import{i as se,r as i,R as P}from"./vendor-B0TG5CS8.js";function Z(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function fe(e){if(Array.isArray(e))return e}function de(e,r,t){return(r=we(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ge(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,o,a,l,p=[],w=!0,y=!1;try{if(a=(t=t.call(e)).next,r!==0)for(;!(w=(n=a.call(t)).done)&&(p.push(n.value),p.length!==r);w=!0);}catch(O){y=!0,o=O}finally{try{if(!w&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(y)throw o}}return p}}function pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function re(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ee(Object(t),!0).forEach(function(n){de(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ve(e,r){if(e==null)return{};var t,n,o=me(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function me(e,r){if(e==null)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;t[n]=e[n]}return t}function he(e,r){return fe(e)||ge(e,r)||ye(e,r)||pe()}function be(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function we(e){var r=be(e,"string");return typeof r=="symbol"?r:r+""}function ye(e,r){if(e){if(typeof e=="string")return Z(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Z(e,r):void 0}}var Me={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function je(e){return function r(){for(var t=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var l=arguments.length,p=new Array(l),w=0;w<l;w++)p[w]=arguments[w];return r.apply(t,[].concat(o,p))}}}function Oe(e){return{}.toString.call(e).includes("Object")}function Ee(e){return e||te("configIsRequired"),Oe(e)||te("configType"),e.urls?(Se(),{paths:{vs:e.urls.monacoBase}}):e}function Se(){console.warn(ne.deprecation)}function Pe(e,r){throw new Error(e[r]||e.default)}var ne={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},te=je(Pe)(ne),Re={config:Ee},Ie=function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return function(o){return t.reduceRight(function(a,l){return l(a)},o)}};function oe(e,r){return Object.keys(r).forEach(function(t){r[t]instanceof Object&&e[t]&&Object.assign(r[t],oe(e[t],r[t]))}),re(re({},e),r)}var Le={type:"cancelation",msg:"operation is manually canceled"};function G(e){var r=!1,t=new Promise(function(n,o){e.then(function(a){return r?o(Le):n(a)}),e.catch(o)});return t.cancel=function(){return r=!0},t}var Ce=["monaco"],Ae=se.create({config:Me,isInitialized:!1,resolve:null,reject:null,monaco:null}),ie=he(Ae,2),V=ie[0],N=ie[1];function Ve(e){var r=Re.config(e),t=r.monaco,n=ve(r,Ce);N(function(o){return{config:oe(o.config,n),monaco:t}})}function xe(){var e=V(function(r){var t=r.monaco,n=r.isInitialized,o=r.resolve;return{monaco:t,isInitialized:n,resolve:o}});if(!e.isInitialized){if(N({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),G(K);if(window.monaco&&window.monaco.editor)return ae(window.monaco),e.resolve(window.monaco),G(K);Ie(Te,_e)(Ne)}return G(K)}function Te(e){return document.body.appendChild(e)}function De(e){var r=document.createElement("script");return e&&(r.src=e),r}function _e(e){var r=V(function(n){var o=n.config,a=n.reject;return{config:o,reject:a}}),t=De("".concat(r.config.paths.vs,"/loader.js"));return t.onload=function(){return e()},t.onerror=r.reject,t}function Ne(){var e=V(function(t){var n=t.config,o=t.resolve,a=t.reject;return{config:n,resolve:o,reject:a}}),r=window.require;r.config(e.config),r(["vs/editor/editor.main"],function(t){var n=t.m||t;ae(n),e.resolve(n)},function(t){e.reject(t)})}function ae(e){V().monaco||N({monaco:e})}function ze(){return V(function(e){var r=e.monaco;return r})}var K=new Promise(function(e,r){return N({resolve:e,reject:r})}),_={config:Ve,init:xe,__getMonacoInstance:ze},ke={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Y=ke,Ue={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},$e=Ue;function qe({children:e}){return P.createElement("div",{style:$e.container},e)}var We=qe,Fe=We;function He({width:e,height:r,isEditorReady:t,loading:n,_ref:o,className:a,wrapperProps:l}){return P.createElement("section",{style:{...Y.wrapper,width:e,height:r},...l},!t&&P.createElement(Fe,null,n),P.createElement("div",{ref:o,style:{...Y.fullWidth,...!t&&Y.hide},className:a}))}var Be=He,ue=i.memo(Be);function Ge(e){i.useEffect(e,[])}var J=Ge;function Ke(e,r,t=!0){let n=i.useRef(!0);i.useEffect(n.current||!t?()=>{n.current=!1}:e,r)}var b=Ke;function A(){}function S(e,r,t,n){return Ye(e,n)||Je(e,r,t,n)}function Ye(e,r){return e.editor.getModel(ce(e,r))}function Je(e,r,t,n){return e.editor.createModel(r,t,n?ce(e,n):void 0)}function ce(e,r){return e.Uri.parse(r)}function Qe({original:e,modified:r,language:t,originalLanguage:n,modifiedLanguage:o,originalModelPath:a,modifiedModelPath:l,keepCurrentOriginalModel:p=!1,keepCurrentModifiedModel:w=!1,theme:y="light",loading:O="Loading...",options:M={},height:z="100%",width:k="100%",className:U,wrapperProps:$={},beforeMount:q=A,onMount:W=A}){let[h,R]=i.useState(!1),[I,f]=i.useState(!0),d=i.useRef(null),s=i.useRef(null),L=i.useRef(null),v=i.useRef(W),u=i.useRef(q),E=i.useRef(!1);J(()=>{let c=_.init();return c.then(g=>(s.current=g)&&f(!1)).catch(g=>g?.type!=="cancelation"&&console.error("Monaco initialization: error:",g)),()=>d.current?C():c.cancel()}),b(()=>{if(d.current&&s.current){let c=d.current.getOriginalEditor(),g=S(s.current,e||"",n||t||"text",a||"");g!==c.getModel()&&c.setModel(g)}},[a],h),b(()=>{if(d.current&&s.current){let c=d.current.getModifiedEditor(),g=S(s.current,r||"",o||t||"text",l||"");g!==c.getModel()&&c.setModel(g)}},[l],h),b(()=>{let c=d.current.getModifiedEditor();c.getOption(s.current.editor.EditorOption.readOnly)?c.setValue(r||""):r!==c.getValue()&&(c.executeEdits("",[{range:c.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),c.pushUndoStop())},[r],h),b(()=>{d.current?.getModel()?.original.setValue(e||"")},[e],h),b(()=>{let{original:c,modified:g}=d.current.getModel();s.current.editor.setModelLanguage(c,n||t||"text"),s.current.editor.setModelLanguage(g,o||t||"text")},[t,n,o],h),b(()=>{s.current?.editor.setTheme(y)},[y],h),b(()=>{d.current?.updateOptions(M)},[M],h);let x=i.useCallback(()=>{if(!s.current)return;u.current(s.current);let c=S(s.current,e||"",n||t||"text",a||""),g=S(s.current,r||"",o||t||"text",l||"");d.current?.setModel({original:c,modified:g})},[t,r,o,e,n,a,l]),T=i.useCallback(()=>{!E.current&&L.current&&(d.current=s.current.editor.createDiffEditor(L.current,{automaticLayout:!0,...M}),x(),s.current?.editor.setTheme(y),R(!0),E.current=!0)},[M,y,x]);i.useEffect(()=>{h&&v.current(d.current,s.current)},[h]),i.useEffect(()=>{!I&&!h&&T()},[I,h,T]);function C(){let c=d.current?.getModel();p||c?.original?.dispose(),w||c?.modified?.dispose(),d.current?.dispose()}return P.createElement(ue,{width:k,height:z,isEditorReady:h,loading:O,_ref:L,className:U,wrapperProps:$})}var Xe=Qe,ar=i.memo(Xe);function Ze(){let[e,r]=i.useState(_.__getMonacoInstance());return J(()=>{let t;return e||(t=_.init(),t.then(n=>{r(n)})),()=>t?.cancel()}),e}var ur=Ze;function er(e){let r=i.useRef();return i.useEffect(()=>{r.current=e},[e]),r.current}var rr=er,D=new Map;function tr({defaultValue:e,defaultLanguage:r,defaultPath:t,value:n,language:o,path:a,theme:l="light",line:p,loading:w="Loading...",options:y={},overrideServices:O={},saveViewState:M=!0,keepCurrentModel:z=!1,width:k="100%",height:U="100%",className:$,wrapperProps:q={},beforeMount:W=A,onMount:h=A,onChange:R,onValidate:I=A}){let[f,d]=i.useState(!1),[s,L]=i.useState(!0),v=i.useRef(null),u=i.useRef(null),E=i.useRef(null),x=i.useRef(h),T=i.useRef(W),C=i.useRef(),c=i.useRef(n),g=rr(a),Q=i.useRef(!1),F=i.useRef(!1);J(()=>{let m=_.init();return m.then(j=>(v.current=j)&&L(!1)).catch(j=>j?.type!=="cancelation"&&console.error("Monaco initialization: error:",j)),()=>u.current?le():m.cancel()}),b(()=>{let m=S(v.current,e||n||"",r||o||"",a||t||"");m!==u.current?.getModel()&&(M&&D.set(g,u.current?.saveViewState()),u.current?.setModel(m),M&&u.current?.restoreViewState(D.get(a)))},[a],f),b(()=>{u.current?.updateOptions(y)},[y],f),b(()=>{!u.current||n===void 0||(u.current.getOption(v.current.editor.EditorOption.readOnly)?u.current.setValue(n):n!==u.current.getValue()&&(F.current=!0,u.current.executeEdits("",[{range:u.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),u.current.pushUndoStop(),F.current=!1))},[n],f),b(()=>{let m=u.current?.getModel();m&&o&&v.current?.editor.setModelLanguage(m,o)},[o],f),b(()=>{p!==void 0&&u.current?.revealLine(p)},[p],f),b(()=>{v.current?.editor.setTheme(l)},[l],f);let X=i.useCallback(()=>{if(!(!E.current||!v.current)&&!Q.current){T.current(v.current);let m=a||t,j=S(v.current,n||e||"",r||o||"",m||"");u.current=v.current?.editor.create(E.current,{model:j,automaticLayout:!0,...y},O),M&&u.current.restoreViewState(D.get(m)),v.current.editor.setTheme(l),p!==void 0&&u.current.revealLine(p),d(!0),Q.current=!0}},[e,r,t,n,o,a,y,O,M,l,p]);i.useEffect(()=>{f&&x.current(u.current,v.current)},[f]),i.useEffect(()=>{!s&&!f&&X()},[s,f,X]),c.current=n,i.useEffect(()=>{f&&R&&(C.current?.dispose(),C.current=u.current?.onDidChangeModelContent(m=>{F.current||R(u.current.getValue(),m)}))},[f,R]),i.useEffect(()=>{if(f){let m=v.current.editor.onDidChangeMarkers(j=>{let H=u.current.getModel()?.uri;if(H&&j.find(B=>B.path===H.path)){let B=v.current.editor.getModelMarkers({resource:H});I?.(B)}});return()=>{m?.dispose()}}return()=>{}},[f,I]);function le(){C.current?.dispose(),z?M&&D.set(a,u.current.saveViewState()):u.current.getModel()?.dispose(),u.current.dispose()}return P.createElement(ue,{width:k,height:U,isEditorReady:f,loading:w,_ref:E,className:$,wrapperProps:q})}var nr=tr,or=i.memo(nr),cr=or;export{ar as DiffEditor,or as Editor,cr as default,_ as loader,ur as useMonaco};

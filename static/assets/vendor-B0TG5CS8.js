function _8(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}var clt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ib(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var v8={exports:{}},Wk={},y8={exports:{}},ei={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb=Symbol.for("react.element"),hlt=Symbol.for("react.portal"),dlt=Symbol.for("react.fragment"),flt=Symbol.for("react.strict_mode"),plt=Symbol.for("react.profiler"),glt=Symbol.for("react.provider"),mlt=Symbol.for("react.context"),_lt=Symbol.for("react.forward_ref"),vlt=Symbol.for("react.suspense"),ylt=Symbol.for("react.memo"),blt=Symbol.for("react.lazy"),sj=Symbol.iterator;function xlt(i){return i===null||typeof i!="object"?null:(i=sj&&i[sj]||i["@@iterator"],typeof i=="function"?i:null)}var b8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x8=Object.assign,S8={};function mm(i,t,e){this.props=i,this.context=t,this.refs=S8,this.updater=e||b8}mm.prototype.isReactComponent={};mm.prototype.setState=function(i,t){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,t,"setState")};mm.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function w8(){}w8.prototype=mm.prototype;function jL(i,t,e){this.props=i,this.context=t,this.refs=S8,this.updater=e||b8}var HL=jL.prototype=new w8;HL.constructor=jL;x8(HL,mm.prototype);HL.isPureReactComponent=!0;var aj=Array.isArray,A8=Object.prototype.hasOwnProperty,VL={current:null},k8={key:!0,ref:!0,__self:!0,__source:!0};function C8(i,t,e){var n,r={},s=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)A8.call(t,n)&&!k8.hasOwnProperty(n)&&(r[n]=t[n]);var o=arguments.length-2;if(o===1)r.children=e;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];r.children=l}if(i&&i.defaultProps)for(n in o=i.defaultProps,o)r[n]===void 0&&(r[n]=o[n]);return{$$typeof:nb,type:i,key:s,ref:a,props:r,_owner:VL.current}}function Slt(i,t){return{$$typeof:nb,type:i.type,key:t,ref:i.ref,props:i.props,_owner:i._owner}}function WL(i){return typeof i=="object"&&i!==null&&i.$$typeof===nb}function wlt(i){var t={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(e){return t[e]})}var oj=/\/+/g;function nP(i,t){return typeof i=="object"&&i!==null&&i.key!=null?wlt(""+i.key):t.toString(36)}function WS(i,t,e,n,r){var s=typeof i;(s==="undefined"||s==="boolean")&&(i=null);var a=!1;if(i===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(i.$$typeof){case nb:case hlt:a=!0}}if(a)return a=i,r=r(a),i=n===""?"."+nP(a,0):n,aj(r)?(e="",i!=null&&(e=i.replace(oj,"$&/")+"/"),WS(r,t,e,"",function(u){return u})):r!=null&&(WL(r)&&(r=Slt(r,e+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(oj,"$&/")+"/")+i)),t.push(r)),1;if(a=0,n=n===""?".":n+":",aj(i))for(var o=0;o<i.length;o++){s=i[o];var l=n+nP(s,o);a+=WS(s,t,e,l,r)}else if(l=xlt(i),typeof l=="function")for(i=l.call(i),o=0;!(s=i.next()).done;)s=s.value,l=n+nP(s,o++),a+=WS(s,t,e,l,r);else if(s==="object")throw t=String(i),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function gx(i,t,e){if(i==null)return i;var n=[],r=0;return WS(i,n,"","",function(s){return t.call(e,s,r++)}),n}function Alt(i){if(i._status===-1){var t=i._result;t=t(),t.then(function(e){(i._status===0||i._status===-1)&&(i._status=1,i._result=e)},function(e){(i._status===0||i._status===-1)&&(i._status=2,i._result=e)}),i._status===-1&&(i._status=0,i._result=t)}if(i._status===1)return i._result.default;throw i._result}var xs={current:null},$S={transition:null},klt={ReactCurrentDispatcher:xs,ReactCurrentBatchConfig:$S,ReactCurrentOwner:VL};function M8(){throw Error("act(...) is not supported in production builds of React.")}ei.Children={map:gx,forEach:function(i,t,e){gx(i,function(){t.apply(this,arguments)},e)},count:function(i){var t=0;return gx(i,function(){t++}),t},toArray:function(i){return gx(i,function(t){return t})||[]},only:function(i){if(!WL(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};ei.Component=mm;ei.Fragment=dlt;ei.Profiler=plt;ei.PureComponent=jL;ei.StrictMode=flt;ei.Suspense=vlt;ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=klt;ei.act=M8;ei.cloneElement=function(i,t,e){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=x8({},i.props),r=i.key,s=i.ref,a=i._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=VL.current),t.key!==void 0&&(r=""+t.key),i.type&&i.type.defaultProps)var o=i.type.defaultProps;for(l in t)A8.call(t,l)&&!k8.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=e;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:nb,type:i.type,key:r,ref:s,props:n,_owner:a}};ei.createContext=function(i){return i={$$typeof:mlt,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:glt,_context:i},i.Consumer=i};ei.createElement=C8;ei.createFactory=function(i){var t=C8.bind(null,i);return t.type=i,t};ei.createRef=function(){return{current:null}};ei.forwardRef=function(i){return{$$typeof:_lt,render:i}};ei.isValidElement=WL;ei.lazy=function(i){return{$$typeof:blt,_payload:{_status:-1,_result:i},_init:Alt}};ei.memo=function(i,t){return{$$typeof:ylt,type:i,compare:t===void 0?null:t}};ei.startTransition=function(i){var t=$S.transition;$S.transition={};try{i()}finally{$S.transition=t}};ei.unstable_act=M8;ei.useCallback=function(i,t){return xs.current.useCallback(i,t)};ei.useContext=function(i){return xs.current.useContext(i)};ei.useDebugValue=function(){};ei.useDeferredValue=function(i){return xs.current.useDeferredValue(i)};ei.useEffect=function(i,t){return xs.current.useEffect(i,t)};ei.useId=function(){return xs.current.useId()};ei.useImperativeHandle=function(i,t,e){return xs.current.useImperativeHandle(i,t,e)};ei.useInsertionEffect=function(i,t){return xs.current.useInsertionEffect(i,t)};ei.useLayoutEffect=function(i,t){return xs.current.useLayoutEffect(i,t)};ei.useMemo=function(i,t){return xs.current.useMemo(i,t)};ei.useReducer=function(i,t,e){return xs.current.useReducer(i,t,e)};ei.useRef=function(i){return xs.current.useRef(i)};ei.useState=function(i){return xs.current.useState(i)};ei.useSyncExternalStore=function(i,t,e){return xs.current.useSyncExternalStore(i,t,e)};ei.useTransition=function(){return xs.current.useTransition()};ei.version="18.3.1";y8.exports=ei;var E=y8.exports;const Y=ib(E),$k=_8({__proto__:null,default:Y},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Clt=E,Mlt=Symbol.for("react.element"),Tlt=Symbol.for("react.fragment"),Plt=Object.prototype.hasOwnProperty,Elt=Clt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rlt={key:!0,ref:!0,__self:!0,__source:!0};function T8(i,t,e){var n,r={},s=null,a=null;e!==void 0&&(s=""+e),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)Plt.call(t,n)&&!Rlt.hasOwnProperty(n)&&(r[n]=t[n]);if(i&&i.defaultProps)for(n in t=i.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:Mlt,type:i,key:s,ref:a,props:r,_owner:Elt.current}}Wk.Fragment=Tlt;Wk.jsx=T8;Wk.jsxs=T8;v8.exports=Wk;var V=v8.exports,lj={},P8={exports:{}},Ca={},E8={exports:{}},R8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function t(I,F){var j=I.length;I.push(F);t:for(;0<j;){var H=j-1>>>1,U=I[H];if(0<r(U,F))I[H]=F,I[j]=U,j=H;else break t}}function e(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var F=I[0],j=I.pop();if(j!==F){I[0]=j;t:for(var H=0,U=I.length,K=U>>>1;H<K;){var q=2*(H+1)-1,Z=I[q],at=q+1,$=I[at];if(0>r(Z,j))at<U&&0>r($,Z)?(I[H]=$,I[at]=j,H=at):(I[H]=Z,I[q]=j,H=q);else if(at<U&&0>r($,j))I[H]=$,I[at]=j,H=at;else break t}}return F}function r(I,F){var j=I.sortIndex-F.sortIndex;return j!==0?j:I.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(I){for(var F=e(u);F!==null;){if(F.callback===null)n(u);else if(F.startTime<=I)n(u),F.sortIndex=F.expirationTime,t(l,F);else break;F=e(u)}}function b(I){if(g=!1,y(I),!p)if(e(l)!==null)p=!0,D(x);else{var F=e(u);F!==null&&B(b,F.startTime-I)}}function x(I,F){p=!1,g&&(g=!1,_(A),A=-1),f=!0;var j=d;try{for(y(F),h=e(l);h!==null&&(!(h.expirationTime>F)||I&&!M());){var H=h.callback;if(typeof H=="function"){h.callback=null,d=h.priorityLevel;var U=H(h.expirationTime<=F);F=i.unstable_now(),typeof U=="function"?h.callback=U:h===e(l)&&n(l),y(F)}else n(l);h=e(l)}if(h!==null)var K=!0;else{var q=e(u);q!==null&&B(b,q.startTime-F),K=!1}return K}finally{h=null,d=j,f=!1}}var S=!1,w=null,A=-1,k=5,C=-1;function M(){return!(i.unstable_now()-C<k)}function R(){if(w!==null){var I=i.unstable_now();C=I;var F=!0;try{F=w(!0,I)}finally{F?P():(S=!1,w=null)}}else S=!1}var P;if(typeof v=="function")P=function(){v(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,T=O.port2;O.port1.onmessage=R,P=function(){T.postMessage(null)}}else P=function(){m(R,0)};function D(I){w=I,S||(S=!0,P())}function B(I,F){A=m(function(){I(i.unstable_now())},F)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(I){I.callback=null},i.unstable_continueExecution=function(){p||f||(p=!0,D(x))},i.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<I?Math.floor(1e3/I):5},i.unstable_getCurrentPriorityLevel=function(){return d},i.unstable_getFirstCallbackNode=function(){return e(l)},i.unstable_next=function(I){switch(d){case 1:case 2:case 3:var F=3;break;default:F=d}var j=d;d=F;try{return I()}finally{d=j}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(I,F){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var j=d;d=I;try{return F()}finally{d=j}},i.unstable_scheduleCallback=function(I,F,j){var H=i.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?H+j:H):j=H,I){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=j+U,I={id:c++,callback:F,priorityLevel:I,startTime:j,expirationTime:U,sortIndex:-1},j>H?(I.sortIndex=j,t(u,I),e(l)===null&&I===e(u)&&(g?(_(A),A=-1):g=!0,B(b,j-H))):(I.sortIndex=U,t(l,I),p||f||(p=!0,D(x))),I},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(I){var F=d;return function(){var j=d;d=F;try{return I.apply(this,arguments)}finally{d=j}}}})(R8);E8.exports=R8;var Olt=E8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dlt=E,ya=Olt;function Ct(i){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+i,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+i+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O8=new Set,Sy={};function of(i,t){Mg(i,t),Mg(i+"Capture",t)}function Mg(i,t){for(Sy[i]=t,i=0;i<t.length;i++)O8.add(t[i])}var Wu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pR=Object.prototype.hasOwnProperty,Ilt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uj={},cj={};function Llt(i){return pR.call(cj,i)?!0:pR.call(uj,i)?!1:Ilt.test(i)?cj[i]=!0:(uj[i]=!0,!1)}function Blt(i,t,e,n){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:e!==null?!e.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function Flt(i,t,e,n){if(t===null||typeof t>"u"||Blt(i,t,e,n))return!0;if(n)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ss(i,t,e,n,r,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=e,this.propertyName=i,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Fr[i]=new Ss(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var t=i[0];Fr[t]=new Ss(t,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Fr[i]=new Ss(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Fr[i]=new Ss(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Fr[i]=new Ss(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Fr[i]=new Ss(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Fr[i]=new Ss(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Fr[i]=new Ss(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Fr[i]=new Ss(i,5,!1,i.toLowerCase(),null,!1,!1)});var $L=/[\-:]([a-z])/g;function UL(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var t=i.replace($L,UL);Fr[t]=new Ss(t,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var t=i.replace($L,UL);Fr[t]=new Ss(t,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var t=i.replace($L,UL);Fr[t]=new Ss(t,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Fr[i]=new Ss(i,1,!1,i.toLowerCase(),null,!1,!1)});Fr.xlinkHref=new Ss("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Fr[i]=new Ss(i,1,!1,i.toLowerCase(),null,!0,!0)});function GL(i,t,e,n){var r=Fr.hasOwnProperty(t)?Fr[t]:null;(r!==null?r.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Flt(t,e,r,n)&&(e=null),n||r===null?Llt(t)&&(e===null?i.removeAttribute(t):i.setAttribute(t,""+e)):r.mustUseProperty?i[r.propertyName]=e===null?r.type===3?!1:"":e:(t=r.attributeName,n=r.attributeNamespace,e===null?i.removeAttribute(t):(r=r.type,e=r===3||r===4&&e===!0?"":""+e,n?i.setAttributeNS(n,t,e):i.setAttribute(t,e))))}var nc=Dlt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mx=Symbol.for("react.element"),pp=Symbol.for("react.portal"),gp=Symbol.for("react.fragment"),YL=Symbol.for("react.strict_mode"),gR=Symbol.for("react.profiler"),D8=Symbol.for("react.provider"),I8=Symbol.for("react.context"),XL=Symbol.for("react.forward_ref"),mR=Symbol.for("react.suspense"),_R=Symbol.for("react.suspense_list"),KL=Symbol.for("react.memo"),bc=Symbol.for("react.lazy"),L8=Symbol.for("react.offscreen"),hj=Symbol.iterator;function i_(i){return i===null||typeof i!="object"?null:(i=hj&&i[hj]||i["@@iterator"],typeof i=="function"?i:null)}var vn=Object.assign,rP;function F_(i){if(rP===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);rP=t&&t[1]||""}return`
`+rP+i}var sP=!1;function aP(i,t){if(!i||sP)return"";sP=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(i,[],t)}else{try{t.call()}catch(u){n=u}i.call(t.prototype)}else{try{throw Error()}catch(u){n=u}i()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=n.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return i.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",i.displayName)),l}while(1<=a&&0<=o);break}}}finally{sP=!1,Error.prepareStackTrace=e}return(i=i?i.displayName||i.name:"")?F_(i):""}function zlt(i){switch(i.tag){case 5:return F_(i.type);case 16:return F_("Lazy");case 13:return F_("Suspense");case 19:return F_("SuspenseList");case 0:case 2:case 15:return i=aP(i.type,!1),i;case 11:return i=aP(i.type.render,!1),i;case 1:return i=aP(i.type,!0),i;default:return""}}function vR(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case gp:return"Fragment";case pp:return"Portal";case gR:return"Profiler";case YL:return"StrictMode";case mR:return"Suspense";case _R:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case I8:return(i.displayName||"Context")+".Consumer";case D8:return(i._context.displayName||"Context")+".Provider";case XL:var t=i.render;return i=i.displayName,i||(i=t.displayName||t.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case KL:return t=i.displayName||null,t!==null?t:vR(i.type)||"Memo";case bc:t=i._payload,i=i._init;try{return vR(i(t))}catch{}}return null}function Nlt(i){var t=i.type;switch(i.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=t.render,i=i.displayName||i.name||"",t.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vR(t);case 8:return t===YL?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nh(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function B8(i){var t=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jlt(i){var t=B8(i)?"checked":"value",e=Object.getOwnPropertyDescriptor(i.constructor.prototype,t),n=""+i[t];if(!i.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var r=e.get,s=e.set;return Object.defineProperty(i,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(i,t,{enumerable:e.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){i._valueTracker=null,delete i[t]}}}}function _x(i){i._valueTracker||(i._valueTracker=jlt(i))}function F8(i){if(!i)return!1;var t=i._valueTracker;if(!t)return!0;var e=t.getValue(),n="";return i&&(n=B8(i)?i.checked?"true":"false":i.value),i=n,i!==e?(t.setValue(i),!0):!1}function k1(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function yR(i,t){var e=t.checked;return vn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??i._wrapperState.initialChecked})}function dj(i,t){var e=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;e=nh(t.value!=null?t.value:e),i._wrapperState={initialChecked:n,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function z8(i,t){t=t.checked,t!=null&&GL(i,"checked",t,!1)}function bR(i,t){z8(i,t);var e=nh(t.value),n=t.type;if(e!=null)n==="number"?(e===0&&i.value===""||i.value!=e)&&(i.value=""+e):i.value!==""+e&&(i.value=""+e);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}t.hasOwnProperty("value")?xR(i,t.type,e):t.hasOwnProperty("defaultValue")&&xR(i,t.type,nh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(i.defaultChecked=!!t.defaultChecked)}function fj(i,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+i._wrapperState.initialValue,e||t===i.value||(i.value=t),i.defaultValue=t}e=i.name,e!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,e!==""&&(i.name=e)}function xR(i,t,e){(t!=="number"||k1(i.ownerDocument)!==i)&&(e==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+e&&(i.defaultValue=""+e))}var z_=Array.isArray;function Qp(i,t,e,n){if(i=i.options,t){t={};for(var r=0;r<e.length;r++)t["$"+e[r]]=!0;for(e=0;e<i.length;e++)r=t.hasOwnProperty("$"+i[e].value),i[e].selected!==r&&(i[e].selected=r),r&&n&&(i[e].defaultSelected=!0)}else{for(e=""+nh(e),t=null,r=0;r<i.length;r++){if(i[r].value===e){i[r].selected=!0,n&&(i[r].defaultSelected=!0);return}t!==null||i[r].disabled||(t=i[r])}t!==null&&(t.selected=!0)}}function SR(i,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ct(91));return vn({},t,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function pj(i,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(Ct(92));if(z_(e)){if(1<e.length)throw Error(Ct(93));e=e[0]}t=e}t==null&&(t=""),e=t}i._wrapperState={initialValue:nh(e)}}function N8(i,t){var e=nh(t.value),n=nh(t.defaultValue);e!=null&&(e=""+e,e!==i.value&&(i.value=e),t.defaultValue==null&&i.defaultValue!==e&&(i.defaultValue=e)),n!=null&&(i.defaultValue=""+n)}function gj(i){var t=i.textContent;t===i._wrapperState.initialValue&&t!==""&&t!==null&&(i.value=t)}function j8(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wR(i,t){return i==null||i==="http://www.w3.org/1999/xhtml"?j8(t):i==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var vx,H8=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction(function(){return i(t,e,n,r)})}:i}(function(i,t){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=t;else{for(vx=vx||document.createElement("div"),vx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vx.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;t.firstChild;)i.appendChild(t.firstChild)}});function wy(i,t){if(t){var e=i.firstChild;if(e&&e===i.lastChild&&e.nodeType===3){e.nodeValue=t;return}}i.textContent=t}var ov={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hlt=["Webkit","ms","Moz","O"];Object.keys(ov).forEach(function(i){Hlt.forEach(function(t){t=t+i.charAt(0).toUpperCase()+i.substring(1),ov[t]=ov[i]})});function V8(i,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||ov.hasOwnProperty(i)&&ov[i]?(""+t).trim():t+"px"}function W8(i,t){i=i.style;for(var e in t)if(t.hasOwnProperty(e)){var n=e.indexOf("--")===0,r=V8(e,t[e],n);e==="float"&&(e="cssFloat"),n?i.setProperty(e,r):i[e]=r}}var Vlt=vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function AR(i,t){if(t){if(Vlt[i]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ct(137,i));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ct(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ct(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ct(62))}}function kR(i,t){if(i.indexOf("-")===-1)return typeof t.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CR=null;function qL(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var MR=null,Jp=null,tg=null;function mj(i){if(i=ab(i)){if(typeof MR!="function")throw Error(Ct(280));var t=i.stateNode;t&&(t=Kk(t),MR(i.stateNode,i.type,t))}}function $8(i){Jp?tg?tg.push(i):tg=[i]:Jp=i}function U8(){if(Jp){var i=Jp,t=tg;if(tg=Jp=null,mj(i),t)for(i=0;i<t.length;i++)mj(t[i])}}function G8(i,t){return i(t)}function Y8(){}var oP=!1;function X8(i,t,e){if(oP)return i(t,e);oP=!0;try{return G8(i,t,e)}finally{oP=!1,(Jp!==null||tg!==null)&&(Y8(),U8())}}function Ay(i,t){var e=i.stateNode;if(e===null)return null;var n=Kk(e);if(n===null)return null;e=n[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break t;default:i=!1}if(i)return null;if(e&&typeof e!="function")throw Error(Ct(231,t,typeof e));return e}var TR=!1;if(Wu)try{var n_={};Object.defineProperty(n_,"passive",{get:function(){TR=!0}}),window.addEventListener("test",n_,n_),window.removeEventListener("test",n_,n_)}catch{TR=!1}function Wlt(i,t,e,n,r,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(c){this.onError(c)}}var lv=!1,C1=null,M1=!1,PR=null,$lt={onError:function(i){lv=!0,C1=i}};function Ult(i,t,e,n,r,s,a,o,l){lv=!1,C1=null,Wlt.apply($lt,arguments)}function Glt(i,t,e,n,r,s,a,o,l){if(Ult.apply(this,arguments),lv){if(lv){var u=C1;lv=!1,C1=null}else throw Error(Ct(198));M1||(M1=!0,PR=u)}}function lf(i){var t=i,e=i;if(i.alternate)for(;t.return;)t=t.return;else{i=t;do t=i,t.flags&4098&&(e=t.return),i=t.return;while(i)}return t.tag===3?e:null}function K8(i){if(i.tag===13){var t=i.memoizedState;if(t===null&&(i=i.alternate,i!==null&&(t=i.memoizedState)),t!==null)return t.dehydrated}return null}function _j(i){if(lf(i)!==i)throw Error(Ct(188))}function Ylt(i){var t=i.alternate;if(!t){if(t=lf(i),t===null)throw Error(Ct(188));return t!==i?null:i}for(var e=i,n=t;;){var r=e.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){e=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===e)return _j(r),i;if(s===n)return _j(r),t;s=s.sibling}throw Error(Ct(188))}if(e.return!==n.return)e=r,n=s;else{for(var a=!1,o=r.child;o;){if(o===e){a=!0,e=r,n=s;break}if(o===n){a=!0,n=r,e=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===e){a=!0,e=s,n=r;break}if(o===n){a=!0,n=s,e=r;break}o=o.sibling}if(!a)throw Error(Ct(189))}}if(e.alternate!==n)throw Error(Ct(190))}if(e.tag!==3)throw Error(Ct(188));return e.stateNode.current===e?i:t}function q8(i){return i=Ylt(i),i!==null?Z8(i):null}function Z8(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var t=Z8(i);if(t!==null)return t;i=i.sibling}return null}var Q8=ya.unstable_scheduleCallback,vj=ya.unstable_cancelCallback,Xlt=ya.unstable_shouldYield,Klt=ya.unstable_requestPaint,zn=ya.unstable_now,qlt=ya.unstable_getCurrentPriorityLevel,ZL=ya.unstable_ImmediatePriority,J8=ya.unstable_UserBlockingPriority,T1=ya.unstable_NormalPriority,Zlt=ya.unstable_LowPriority,t6=ya.unstable_IdlePriority,Uk=null,Hl=null;function Qlt(i){if(Hl&&typeof Hl.onCommitFiberRoot=="function")try{Hl.onCommitFiberRoot(Uk,i,void 0,(i.current.flags&128)===128)}catch{}}var Uo=Math.clz32?Math.clz32:eut,Jlt=Math.log,tut=Math.LN2;function eut(i){return i>>>=0,i===0?32:31-(Jlt(i)/tut|0)|0}var yx=64,bx=4194304;function N_(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function P1(i,t){var e=i.pendingLanes;if(e===0)return 0;var n=0,r=i.suspendedLanes,s=i.pingedLanes,a=e&268435455;if(a!==0){var o=a&~r;o!==0?n=N_(o):(s&=a,s!==0&&(n=N_(s)))}else a=e&~r,a!==0?n=N_(a):s!==0&&(n=N_(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&r)&&(r=n&-n,s=t&-t,r>=s||r===16&&(s&4194240)!==0))return t;if(n&4&&(n|=e&16),t=i.entangledLanes,t!==0)for(i=i.entanglements,t&=n;0<t;)e=31-Uo(t),r=1<<e,n|=i[e],t&=~r;return n}function iut(i,t){switch(i){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nut(i,t){for(var e=i.suspendedLanes,n=i.pingedLanes,r=i.expirationTimes,s=i.pendingLanes;0<s;){var a=31-Uo(s),o=1<<a,l=r[a];l===-1?(!(o&e)||o&n)&&(r[a]=iut(o,t)):l<=t&&(i.expiredLanes|=o),s&=~o}}function ER(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function e6(){var i=yx;return yx<<=1,!(yx&4194240)&&(yx=64),i}function lP(i){for(var t=[],e=0;31>e;e++)t.push(i);return t}function rb(i,t,e){i.pendingLanes|=t,t!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,t=31-Uo(t),i[t]=e}function rut(i,t){var e=i.pendingLanes&~t;i.pendingLanes=t,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=t,i.mutableReadLanes&=t,i.entangledLanes&=t,t=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<e;){var r=31-Uo(e),s=1<<r;t[r]=0,n[r]=-1,i[r]=-1,e&=~s}}function QL(i,t){var e=i.entangledLanes|=t;for(i=i.entanglements;e;){var n=31-Uo(e),r=1<<n;r&t|i[n]&t&&(i[n]|=t),e&=~r}}var Di=0;function i6(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var n6,JL,r6,s6,a6,RR=!1,xx=[],Uc=null,Gc=null,Yc=null,ky=new Map,Cy=new Map,Mc=[],sut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yj(i,t){switch(i){case"focusin":case"focusout":Uc=null;break;case"dragenter":case"dragleave":Gc=null;break;case"mouseover":case"mouseout":Yc=null;break;case"pointerover":case"pointerout":ky.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cy.delete(t.pointerId)}}function r_(i,t,e,n,r,s){return i===null||i.nativeEvent!==s?(i={blockedOn:t,domEventName:e,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},t!==null&&(t=ab(t),t!==null&&JL(t)),i):(i.eventSystemFlags|=n,t=i.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),i)}function aut(i,t,e,n,r){switch(t){case"focusin":return Uc=r_(Uc,i,t,e,n,r),!0;case"dragenter":return Gc=r_(Gc,i,t,e,n,r),!0;case"mouseover":return Yc=r_(Yc,i,t,e,n,r),!0;case"pointerover":var s=r.pointerId;return ky.set(s,r_(ky.get(s)||null,i,t,e,n,r)),!0;case"gotpointercapture":return s=r.pointerId,Cy.set(s,r_(Cy.get(s)||null,i,t,e,n,r)),!0}return!1}function o6(i){var t=td(i.target);if(t!==null){var e=lf(t);if(e!==null){if(t=e.tag,t===13){if(t=K8(e),t!==null){i.blockedOn=t,a6(i.priority,function(){r6(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){i.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}i.blockedOn=null}function US(i){if(i.blockedOn!==null)return!1;for(var t=i.targetContainers;0<t.length;){var e=OR(i.domEventName,i.eventSystemFlags,t[0],i.nativeEvent);if(e===null){e=i.nativeEvent;var n=new e.constructor(e.type,e);CR=n,e.target.dispatchEvent(n),CR=null}else return t=ab(e),t!==null&&JL(t),i.blockedOn=e,!1;t.shift()}return!0}function bj(i,t,e){US(i)&&e.delete(t)}function out(){RR=!1,Uc!==null&&US(Uc)&&(Uc=null),Gc!==null&&US(Gc)&&(Gc=null),Yc!==null&&US(Yc)&&(Yc=null),ky.forEach(bj),Cy.forEach(bj)}function s_(i,t){i.blockedOn===t&&(i.blockedOn=null,RR||(RR=!0,ya.unstable_scheduleCallback(ya.unstable_NormalPriority,out)))}function My(i){function t(r){return s_(r,i)}if(0<xx.length){s_(xx[0],i);for(var e=1;e<xx.length;e++){var n=xx[e];n.blockedOn===i&&(n.blockedOn=null)}}for(Uc!==null&&s_(Uc,i),Gc!==null&&s_(Gc,i),Yc!==null&&s_(Yc,i),ky.forEach(t),Cy.forEach(t),e=0;e<Mc.length;e++)n=Mc[e],n.blockedOn===i&&(n.blockedOn=null);for(;0<Mc.length&&(e=Mc[0],e.blockedOn===null);)o6(e),e.blockedOn===null&&Mc.shift()}var eg=nc.ReactCurrentBatchConfig,E1=!0;function lut(i,t,e,n){var r=Di,s=eg.transition;eg.transition=null;try{Di=1,t2(i,t,e,n)}finally{Di=r,eg.transition=s}}function uut(i,t,e,n){var r=Di,s=eg.transition;eg.transition=null;try{Di=4,t2(i,t,e,n)}finally{Di=r,eg.transition=s}}function t2(i,t,e,n){if(E1){var r=OR(i,t,e,n);if(r===null)vP(i,t,n,R1,e),yj(i,n);else if(aut(r,i,t,e,n))n.stopPropagation();else if(yj(i,n),t&4&&-1<sut.indexOf(i)){for(;r!==null;){var s=ab(r);if(s!==null&&n6(s),s=OR(i,t,e,n),s===null&&vP(i,t,n,R1,e),s===r)break;r=s}r!==null&&n.stopPropagation()}else vP(i,t,n,null,e)}}var R1=null;function OR(i,t,e,n){if(R1=null,i=qL(n),i=td(i),i!==null)if(t=lf(i),t===null)i=null;else if(e=t.tag,e===13){if(i=K8(t),i!==null)return i;i=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;i=null}else t!==i&&(i=null);return R1=i,null}function l6(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qlt()){case ZL:return 1;case J8:return 4;case T1:case Zlt:return 16;case t6:return 536870912;default:return 16}default:return 16}}var Oc=null,e2=null,GS=null;function u6(){if(GS)return GS;var i,t=e2,e=t.length,n,r="value"in Oc?Oc.value:Oc.textContent,s=r.length;for(i=0;i<e&&t[i]===r[i];i++);var a=e-i;for(n=1;n<=a&&t[e-n]===r[s-n];n++);return GS=r.slice(i,1<n?1-n:void 0)}function YS(i){var t=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&t===13&&(i=13)):i=t,i===10&&(i=13),32<=i||i===13?i:0}function Sx(){return!0}function xj(){return!1}function Ma(i){function t(e,n,r,s,a){this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in i)i.hasOwnProperty(o)&&(e=i[o],this[o]=e?e(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Sx:xj,this.isPropagationStopped=xj,this}return vn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Sx)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Sx)},persist:function(){},isPersistent:Sx}),t}var _m={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},i2=Ma(_m),sb=vn({},_m,{view:0,detail:0}),cut=Ma(sb),uP,cP,a_,Gk=vn({},sb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n2,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==a_&&(a_&&i.type==="mousemove"?(uP=i.screenX-a_.screenX,cP=i.screenY-a_.screenY):cP=uP=0,a_=i),uP)},movementY:function(i){return"movementY"in i?i.movementY:cP}}),Sj=Ma(Gk),hut=vn({},Gk,{dataTransfer:0}),dut=Ma(hut),fut=vn({},sb,{relatedTarget:0}),hP=Ma(fut),put=vn({},_m,{animationName:0,elapsedTime:0,pseudoElement:0}),gut=Ma(put),mut=vn({},_m,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),_ut=Ma(mut),vut=vn({},_m,{data:0}),wj=Ma(vut),yut={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},but={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xut={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sut(i){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(i):(i=xut[i])?!!t[i]:!1}function n2(){return Sut}var wut=vn({},sb,{key:function(i){if(i.key){var t=yut[i.key]||i.key;if(t!=="Unidentified")return t}return i.type==="keypress"?(i=YS(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?but[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n2,charCode:function(i){return i.type==="keypress"?YS(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?YS(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Aut=Ma(wut),kut=vn({},Gk,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Aj=Ma(kut),Cut=vn({},sb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n2}),Mut=Ma(Cut),Tut=vn({},_m,{propertyName:0,elapsedTime:0,pseudoElement:0}),Put=Ma(Tut),Eut=vn({},Gk,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Rut=Ma(Eut),Out=[9,13,27,32],r2=Wu&&"CompositionEvent"in window,uv=null;Wu&&"documentMode"in document&&(uv=document.documentMode);var Dut=Wu&&"TextEvent"in window&&!uv,c6=Wu&&(!r2||uv&&8<uv&&11>=uv),kj=" ",Cj=!1;function h6(i,t){switch(i){case"keyup":return Out.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d6(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var mp=!1;function Iut(i,t){switch(i){case"compositionend":return d6(t);case"keypress":return t.which!==32?null:(Cj=!0,kj);case"textInput":return i=t.data,i===kj&&Cj?null:i;default:return null}}function Lut(i,t){if(mp)return i==="compositionend"||!r2&&h6(i,t)?(i=u6(),GS=e2=Oc=null,mp=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return c6&&t.locale!=="ko"?null:t.data;default:return null}}var But={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mj(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t==="input"?!!But[i.type]:t==="textarea"}function f6(i,t,e,n){$8(n),t=O1(t,"onChange"),0<t.length&&(e=new i2("onChange","change",null,e,n),i.push({event:e,listeners:t}))}var cv=null,Ty=null;function Fut(i){A6(i,0)}function Yk(i){var t=yp(i);if(F8(t))return i}function zut(i,t){if(i==="change")return t}var p6=!1;if(Wu){var dP;if(Wu){var fP="oninput"in document;if(!fP){var Tj=document.createElement("div");Tj.setAttribute("oninput","return;"),fP=typeof Tj.oninput=="function"}dP=fP}else dP=!1;p6=dP&&(!document.documentMode||9<document.documentMode)}function Pj(){cv&&(cv.detachEvent("onpropertychange",g6),Ty=cv=null)}function g6(i){if(i.propertyName==="value"&&Yk(Ty)){var t=[];f6(t,Ty,i,qL(i)),X8(Fut,t)}}function Nut(i,t,e){i==="focusin"?(Pj(),cv=t,Ty=e,cv.attachEvent("onpropertychange",g6)):i==="focusout"&&Pj()}function jut(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yk(Ty)}function Hut(i,t){if(i==="click")return Yk(t)}function Vut(i,t){if(i==="input"||i==="change")return Yk(t)}function Wut(i,t){return i===t&&(i!==0||1/i===1/t)||i!==i&&t!==t}var Yo=typeof Object.is=="function"?Object.is:Wut;function Py(i,t){if(Yo(i,t))return!0;if(typeof i!="object"||i===null||typeof t!="object"||t===null)return!1;var e=Object.keys(i),n=Object.keys(t);if(e.length!==n.length)return!1;for(n=0;n<e.length;n++){var r=e[n];if(!pR.call(t,r)||!Yo(i[r],t[r]))return!1}return!0}function Ej(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Rj(i,t){var e=Ej(i);i=0;for(var n;e;){if(e.nodeType===3){if(n=i+e.textContent.length,i<=t&&n>=t)return{node:e,offset:t-i};i=n}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=Ej(e)}}function m6(i,t){return i&&t?i===t?!0:i&&i.nodeType===3?!1:t&&t.nodeType===3?m6(i,t.parentNode):"contains"in i?i.contains(t):i.compareDocumentPosition?!!(i.compareDocumentPosition(t)&16):!1:!1}function _6(){for(var i=window,t=k1();t instanceof i.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)i=t.contentWindow;else break;t=k1(i.document)}return t}function s2(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t&&(t==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||t==="textarea"||i.contentEditable==="true")}function $ut(i){var t=_6(),e=i.focusedElem,n=i.selectionRange;if(t!==e&&e&&e.ownerDocument&&m6(e.ownerDocument.documentElement,e)){if(n!==null&&s2(e)){if(t=n.start,i=n.end,i===void 0&&(i=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(i,e.value.length);else if(i=(t=e.ownerDocument||document)&&t.defaultView||window,i.getSelection){i=i.getSelection();var r=e.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!i.extend&&s>n&&(r=n,n=s,s=r),r=Rj(e,s);var a=Rj(e,n);r&&a&&(i.rangeCount!==1||i.anchorNode!==r.node||i.anchorOffset!==r.offset||i.focusNode!==a.node||i.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),i.removeAllRanges(),s>n?(i.addRange(t),i.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),i.addRange(t)))}}for(t=[],i=e;i=i.parentNode;)i.nodeType===1&&t.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)i=t[e],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Uut=Wu&&"documentMode"in document&&11>=document.documentMode,_p=null,DR=null,hv=null,IR=!1;function Oj(i,t,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;IR||_p==null||_p!==k1(n)||(n=_p,"selectionStart"in n&&s2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),hv&&Py(hv,n)||(hv=n,n=O1(DR,"onSelect"),0<n.length&&(t=new i2("onSelect","select",null,t,e),i.push({event:t,listeners:n}),t.target=_p)))}function wx(i,t){var e={};return e[i.toLowerCase()]=t.toLowerCase(),e["Webkit"+i]="webkit"+t,e["Moz"+i]="moz"+t,e}var vp={animationend:wx("Animation","AnimationEnd"),animationiteration:wx("Animation","AnimationIteration"),animationstart:wx("Animation","AnimationStart"),transitionend:wx("Transition","TransitionEnd")},pP={},v6={};Wu&&(v6=document.createElement("div").style,"AnimationEvent"in window||(delete vp.animationend.animation,delete vp.animationiteration.animation,delete vp.animationstart.animation),"TransitionEvent"in window||delete vp.transitionend.transition);function Xk(i){if(pP[i])return pP[i];if(!vp[i])return i;var t=vp[i],e;for(e in t)if(t.hasOwnProperty(e)&&e in v6)return pP[i]=t[e];return i}var y6=Xk("animationend"),b6=Xk("animationiteration"),x6=Xk("animationstart"),S6=Xk("transitionend"),w6=new Map,Dj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gh(i,t){w6.set(i,t),of(t,[i])}for(var gP=0;gP<Dj.length;gP++){var mP=Dj[gP],Gut=mP.toLowerCase(),Yut=mP[0].toUpperCase()+mP.slice(1);gh(Gut,"on"+Yut)}gh(y6,"onAnimationEnd");gh(b6,"onAnimationIteration");gh(x6,"onAnimationStart");gh("dblclick","onDoubleClick");gh("focusin","onFocus");gh("focusout","onBlur");gh(S6,"onTransitionEnd");Mg("onMouseEnter",["mouseout","mouseover"]);Mg("onMouseLeave",["mouseout","mouseover"]);Mg("onPointerEnter",["pointerout","pointerover"]);Mg("onPointerLeave",["pointerout","pointerover"]);of("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));of("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));of("onBeforeInput",["compositionend","keypress","textInput","paste"]);of("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));of("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));of("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var j_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xut=new Set("cancel close invalid load scroll toggle".split(" ").concat(j_));function Ij(i,t,e){var n=i.type||"unknown-event";i.currentTarget=e,Glt(n,t,void 0,i),i.currentTarget=null}function A6(i,t){t=(t&4)!==0;for(var e=0;e<i.length;e++){var n=i[e],r=n.event;n=n.listeners;t:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break t;Ij(r,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break t;Ij(r,o,u),s=l}}}if(M1)throw i=PR,M1=!1,PR=null,i}function Xi(i,t){var e=t[NR];e===void 0&&(e=t[NR]=new Set);var n=i+"__bubble";e.has(n)||(k6(t,i,2,!1),e.add(n))}function _P(i,t,e){var n=0;t&&(n|=4),k6(e,i,n,t)}var Ax="_reactListening"+Math.random().toString(36).slice(2);function Ey(i){if(!i[Ax]){i[Ax]=!0,O8.forEach(function(e){e!=="selectionchange"&&(Xut.has(e)||_P(e,!1,i),_P(e,!0,i))});var t=i.nodeType===9?i:i.ownerDocument;t===null||t[Ax]||(t[Ax]=!0,_P("selectionchange",!1,t))}}function k6(i,t,e,n){switch(l6(t)){case 1:var r=lut;break;case 4:r=uut;break;default:r=t2}e=r.bind(null,t,e,i),r=void 0,!TR||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),n?r!==void 0?i.addEventListener(t,e,{capture:!0,passive:r}):i.addEventListener(t,e,!0):r!==void 0?i.addEventListener(t,e,{passive:r}):i.addEventListener(t,e,!1)}function vP(i,t,e,n,r){var s=n;if(!(t&1)&&!(t&2)&&n!==null)t:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=td(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue t}o=o.parentNode}}n=n.return}X8(function(){var u=s,c=qL(e),h=[];t:{var d=w6.get(i);if(d!==void 0){var f=i2,p=i;switch(i){case"keypress":if(YS(e)===0)break t;case"keydown":case"keyup":f=Aut;break;case"focusin":p="focus",f=hP;break;case"focusout":p="blur",f=hP;break;case"beforeblur":case"afterblur":f=hP;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Sj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=dut;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Mut;break;case y6:case b6:case x6:f=gut;break;case S6:f=Put;break;case"scroll":f=cut;break;case"wheel":f=Rut;break;case"copy":case"cut":case"paste":f=_ut;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Aj}var g=(t&4)!==0,m=!g&&i==="scroll",_=g?d!==null?d+"Capture":null:d;g=[];for(var v=u,y;v!==null;){y=v;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,_!==null&&(b=Ay(v,_),b!=null&&g.push(Ry(v,b,y)))),m)break;v=v.return}0<g.length&&(d=new f(d,p,null,e,c),h.push({event:d,listeners:g}))}}if(!(t&7)){t:{if(d=i==="mouseover"||i==="pointerover",f=i==="mouseout"||i==="pointerout",d&&e!==CR&&(p=e.relatedTarget||e.fromElement)&&(td(p)||p[$u]))break t;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=e.relatedTarget||e.toElement,f=u,p=p?td(p):null,p!==null&&(m=lf(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=Sj,b="onMouseLeave",_="onMouseEnter",v="mouse",(i==="pointerout"||i==="pointerover")&&(g=Aj,b="onPointerLeave",_="onPointerEnter",v="pointer"),m=f==null?d:yp(f),y=p==null?d:yp(p),d=new g(b,v+"leave",f,e,c),d.target=m,d.relatedTarget=y,b=null,td(c)===u&&(g=new g(_,v+"enter",p,e,c),g.target=y,g.relatedTarget=m,b=g),m=b,f&&p)e:{for(g=f,_=p,v=0,y=g;y;y=Df(y))v++;for(y=0,b=_;b;b=Df(b))y++;for(;0<v-y;)g=Df(g),v--;for(;0<y-v;)_=Df(_),y--;for(;v--;){if(g===_||_!==null&&g===_.alternate)break e;g=Df(g),_=Df(_)}g=null}else g=null;f!==null&&Lj(h,d,f,g,!1),p!==null&&m!==null&&Lj(h,m,p,g,!0)}}t:{if(d=u?yp(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var x=zut;else if(Mj(d))if(p6)x=Vut;else{x=jut;var S=Nut}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=Hut);if(x&&(x=x(i,u))){f6(h,x,e,c);break t}S&&S(i,d,u),i==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&xR(d,"number",d.value)}switch(S=u?yp(u):window,i){case"focusin":(Mj(S)||S.contentEditable==="true")&&(_p=S,DR=u,hv=null);break;case"focusout":hv=DR=_p=null;break;case"mousedown":IR=!0;break;case"contextmenu":case"mouseup":case"dragend":IR=!1,Oj(h,e,c);break;case"selectionchange":if(Uut)break;case"keydown":case"keyup":Oj(h,e,c)}var w;if(r2)t:{switch(i){case"compositionstart":var A="onCompositionStart";break t;case"compositionend":A="onCompositionEnd";break t;case"compositionupdate":A="onCompositionUpdate";break t}A=void 0}else mp?h6(i,e)&&(A="onCompositionEnd"):i==="keydown"&&e.keyCode===229&&(A="onCompositionStart");A&&(c6&&e.locale!=="ko"&&(mp||A!=="onCompositionStart"?A==="onCompositionEnd"&&mp&&(w=u6()):(Oc=c,e2="value"in Oc?Oc.value:Oc.textContent,mp=!0)),S=O1(u,A),0<S.length&&(A=new wj(A,i,null,e,c),h.push({event:A,listeners:S}),w?A.data=w:(w=d6(e),w!==null&&(A.data=w)))),(w=Dut?Iut(i,e):Lut(i,e))&&(u=O1(u,"onBeforeInput"),0<u.length&&(c=new wj("onBeforeInput","beforeinput",null,e,c),h.push({event:c,listeners:u}),c.data=w))}A6(h,t)})}function Ry(i,t,e){return{instance:i,listener:t,currentTarget:e}}function O1(i,t){for(var e=t+"Capture",n=[];i!==null;){var r=i,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ay(i,e),s!=null&&n.unshift(Ry(i,s,r)),s=Ay(i,t),s!=null&&n.push(Ry(i,s,r))),i=i.return}return n}function Df(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Lj(i,t,e,n,r){for(var s=t._reactName,a=[];e!==null&&e!==n;){var o=e,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,r?(l=Ay(e,s),l!=null&&a.unshift(Ry(e,l,o))):r||(l=Ay(e,s),l!=null&&a.push(Ry(e,l,o)))),e=e.return}a.length!==0&&i.push({event:t,listeners:a})}var Kut=/\r\n?/g,qut=/\u0000|\uFFFD/g;function Bj(i){return(typeof i=="string"?i:""+i).replace(Kut,`
`).replace(qut,"")}function kx(i,t,e){if(t=Bj(t),Bj(i)!==t&&e)throw Error(Ct(425))}function D1(){}var LR=null,BR=null;function FR(i,t){return i==="textarea"||i==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zR=typeof setTimeout=="function"?setTimeout:void 0,Zut=typeof clearTimeout=="function"?clearTimeout:void 0,Fj=typeof Promise=="function"?Promise:void 0,Qut=typeof queueMicrotask=="function"?queueMicrotask:typeof Fj<"u"?function(i){return Fj.resolve(null).then(i).catch(Jut)}:zR;function Jut(i){setTimeout(function(){throw i})}function yP(i,t){var e=t,n=0;do{var r=e.nextSibling;if(i.removeChild(e),r&&r.nodeType===8)if(e=r.data,e==="/$"){if(n===0){i.removeChild(r),My(t);return}n--}else e!=="$"&&e!=="$?"&&e!=="$!"||n++;e=r}while(e);My(t)}function Xc(i){for(;i!=null;i=i.nextSibling){var t=i.nodeType;if(t===1||t===3)break;if(t===8){if(t=i.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return i}function zj(i){i=i.previousSibling;for(var t=0;i;){if(i.nodeType===8){var e=i.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return i;t--}else e==="/$"&&t++}i=i.previousSibling}return null}var vm=Math.random().toString(36).slice(2),xl="__reactFiber$"+vm,Oy="__reactProps$"+vm,$u="__reactContainer$"+vm,NR="__reactEvents$"+vm,tct="__reactListeners$"+vm,ect="__reactHandles$"+vm;function td(i){var t=i[xl];if(t)return t;for(var e=i.parentNode;e;){if(t=e[$u]||e[xl]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(i=zj(i);i!==null;){if(e=i[xl])return e;i=zj(i)}return t}i=e,e=i.parentNode}return null}function ab(i){return i=i[xl]||i[$u],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function yp(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Ct(33))}function Kk(i){return i[Oy]||null}var jR=[],bp=-1;function mh(i){return{current:i}}function qi(i){0>bp||(i.current=jR[bp],jR[bp]=null,bp--)}function Wi(i,t){bp++,jR[bp]=i.current,i.current=t}var rh={},is=mh(rh),Ys=mh(!1),Rd=rh;function Tg(i,t){var e=i.type.contextTypes;if(!e)return rh;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in e)r[s]=t[s];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=t,i.__reactInternalMemoizedMaskedChildContext=r),r}function Xs(i){return i=i.childContextTypes,i!=null}function I1(){qi(Ys),qi(is)}function Nj(i,t,e){if(is.current!==rh)throw Error(Ct(168));Wi(is,t),Wi(Ys,e)}function C6(i,t,e){var n=i.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return e;n=n.getChildContext();for(var r in n)if(!(r in t))throw Error(Ct(108,Nlt(i)||"Unknown",r));return vn({},e,n)}function L1(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||rh,Rd=is.current,Wi(is,i),Wi(Ys,Ys.current),!0}function jj(i,t,e){var n=i.stateNode;if(!n)throw Error(Ct(169));e?(i=C6(i,t,Rd),n.__reactInternalMemoizedMergedChildContext=i,qi(Ys),qi(is),Wi(is,i)):qi(Ys),Wi(Ys,e)}var _u=null,qk=!1,bP=!1;function M6(i){_u===null?_u=[i]:_u.push(i)}function ict(i){qk=!0,M6(i)}function _h(){if(!bP&&_u!==null){bP=!0;var i=0,t=Di;try{var e=_u;for(Di=1;i<e.length;i++){var n=e[i];do n=n(!0);while(n!==null)}_u=null,qk=!1}catch(r){throw _u!==null&&(_u=_u.slice(i+1)),Q8(ZL,_h),r}finally{Di=t,bP=!1}}return null}var xp=[],Sp=0,B1=null,F1=0,Na=[],ja=0,Od=null,ku=1,Cu="";function $h(i,t){xp[Sp++]=F1,xp[Sp++]=B1,B1=i,F1=t}function T6(i,t,e){Na[ja++]=ku,Na[ja++]=Cu,Na[ja++]=Od,Od=i;var n=ku;i=Cu;var r=32-Uo(n)-1;n&=~(1<<r),e+=1;var s=32-Uo(t)+r;if(30<s){var a=r-r%5;s=(n&(1<<a)-1).toString(32),n>>=a,r-=a,ku=1<<32-Uo(t)+r|e<<r|n,Cu=s+i}else ku=1<<s|e<<r|n,Cu=i}function a2(i){i.return!==null&&($h(i,1),T6(i,1,0))}function o2(i){for(;i===B1;)B1=xp[--Sp],xp[Sp]=null,F1=xp[--Sp],xp[Sp]=null;for(;i===Od;)Od=Na[--ja],Na[ja]=null,Cu=Na[--ja],Na[ja]=null,ku=Na[--ja],Na[ja]=null}var ma=null,pa=null,nn=!1,Po=null;function P6(i,t){var e=Xa(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=i,t=i.deletions,t===null?(i.deletions=[e],i.flags|=16):t.push(e)}function Hj(i,t){switch(i.tag){case 5:var e=i.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(i.stateNode=t,ma=i,pa=Xc(t.firstChild),!0):!1;case 6:return t=i.pendingProps===""||t.nodeType!==3?null:t,t!==null?(i.stateNode=t,ma=i,pa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=Od!==null?{id:ku,overflow:Cu}:null,i.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Xa(18,null,null,0),e.stateNode=t,e.return=i,i.child=e,ma=i,pa=null,!0):!1;default:return!1}}function HR(i){return(i.mode&1)!==0&&(i.flags&128)===0}function VR(i){if(nn){var t=pa;if(t){var e=t;if(!Hj(i,t)){if(HR(i))throw Error(Ct(418));t=Xc(e.nextSibling);var n=ma;t&&Hj(i,t)?P6(n,e):(i.flags=i.flags&-4097|2,nn=!1,ma=i)}}else{if(HR(i))throw Error(Ct(418));i.flags=i.flags&-4097|2,nn=!1,ma=i}}}function Vj(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ma=i}function Cx(i){if(i!==ma)return!1;if(!nn)return Vj(i),nn=!0,!1;var t;if((t=i.tag!==3)&&!(t=i.tag!==5)&&(t=i.type,t=t!=="head"&&t!=="body"&&!FR(i.type,i.memoizedProps)),t&&(t=pa)){if(HR(i))throw E6(),Error(Ct(418));for(;t;)P6(i,t),t=Xc(t.nextSibling)}if(Vj(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ct(317));t:{for(i=i.nextSibling,t=0;i;){if(i.nodeType===8){var e=i.data;if(e==="/$"){if(t===0){pa=Xc(i.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}i=i.nextSibling}pa=null}}else pa=ma?Xc(i.stateNode.nextSibling):null;return!0}function E6(){for(var i=pa;i;)i=Xc(i.nextSibling)}function Pg(){pa=ma=null,nn=!1}function l2(i){Po===null?Po=[i]:Po.push(i)}var nct=nc.ReactCurrentBatchConfig;function o_(i,t,e){if(i=e.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(Ct(309));var n=e.stateNode}if(!n)throw Error(Ct(147,i));var r=n,s=""+i;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=r.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof i!="string")throw Error(Ct(284));if(!e._owner)throw Error(Ct(290,i))}return i}function Mx(i,t){throw i=Object.prototype.toString.call(t),Error(Ct(31,i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i))}function Wj(i){var t=i._init;return t(i._payload)}function R6(i){function t(_,v){if(i){var y=_.deletions;y===null?(_.deletions=[v],_.flags|=16):y.push(v)}}function e(_,v){if(!i)return null;for(;v!==null;)t(_,v),v=v.sibling;return null}function n(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function r(_,v){return _=Qc(_,v),_.index=0,_.sibling=null,_}function s(_,v,y){return _.index=y,i?(y=_.alternate,y!==null?(y=y.index,y<v?(_.flags|=2,v):y):(_.flags|=2,v)):(_.flags|=1048576,v)}function a(_){return i&&_.alternate===null&&(_.flags|=2),_}function o(_,v,y,b){return v===null||v.tag!==6?(v=MP(y,_.mode,b),v.return=_,v):(v=r(v,y),v.return=_,v)}function l(_,v,y,b){var x=y.type;return x===gp?c(_,v,y.props.children,b,y.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===bc&&Wj(x)===v.type)?(b=r(v,y.props),b.ref=o_(_,v,y),b.return=_,b):(b=t1(y.type,y.key,y.props,null,_.mode,b),b.ref=o_(_,v,y),b.return=_,b)}function u(_,v,y,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=TP(y,_.mode,b),v.return=_,v):(v=r(v,y.children||[]),v.return=_,v)}function c(_,v,y,b,x){return v===null||v.tag!==7?(v=yd(y,_.mode,b,x),v.return=_,v):(v=r(v,y),v.return=_,v)}function h(_,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=MP(""+v,_.mode,y),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case mx:return y=t1(v.type,v.key,v.props,null,_.mode,y),y.ref=o_(_,null,v),y.return=_,y;case pp:return v=TP(v,_.mode,y),v.return=_,v;case bc:var b=v._init;return h(_,b(v._payload),y)}if(z_(v)||i_(v))return v=yd(v,_.mode,y,null),v.return=_,v;Mx(_,v)}return null}function d(_,v,y,b){var x=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return x!==null?null:o(_,v,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mx:return y.key===x?l(_,v,y,b):null;case pp:return y.key===x?u(_,v,y,b):null;case bc:return x=y._init,d(_,v,x(y._payload),b)}if(z_(y)||i_(y))return x!==null?null:c(_,v,y,b,null);Mx(_,y)}return null}function f(_,v,y,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return _=_.get(y)||null,o(v,_,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mx:return _=_.get(b.key===null?y:b.key)||null,l(v,_,b,x);case pp:return _=_.get(b.key===null?y:b.key)||null,u(v,_,b,x);case bc:var S=b._init;return f(_,v,y,S(b._payload),x)}if(z_(b)||i_(b))return _=_.get(y)||null,c(v,_,b,x,null);Mx(v,b)}return null}function p(_,v,y,b){for(var x=null,S=null,w=v,A=v=0,k=null;w!==null&&A<y.length;A++){w.index>A?(k=w,w=null):k=w.sibling;var C=d(_,w,y[A],b);if(C===null){w===null&&(w=k);break}i&&w&&C.alternate===null&&t(_,w),v=s(C,v,A),S===null?x=C:S.sibling=C,S=C,w=k}if(A===y.length)return e(_,w),nn&&$h(_,A),x;if(w===null){for(;A<y.length;A++)w=h(_,y[A],b),w!==null&&(v=s(w,v,A),S===null?x=w:S.sibling=w,S=w);return nn&&$h(_,A),x}for(w=n(_,w);A<y.length;A++)k=f(w,_,A,y[A],b),k!==null&&(i&&k.alternate!==null&&w.delete(k.key===null?A:k.key),v=s(k,v,A),S===null?x=k:S.sibling=k,S=k);return i&&w.forEach(function(M){return t(_,M)}),nn&&$h(_,A),x}function g(_,v,y,b){var x=i_(y);if(typeof x!="function")throw Error(Ct(150));if(y=x.call(y),y==null)throw Error(Ct(151));for(var S=x=null,w=v,A=v=0,k=null,C=y.next();w!==null&&!C.done;A++,C=y.next()){w.index>A?(k=w,w=null):k=w.sibling;var M=d(_,w,C.value,b);if(M===null){w===null&&(w=k);break}i&&w&&M.alternate===null&&t(_,w),v=s(M,v,A),S===null?x=M:S.sibling=M,S=M,w=k}if(C.done)return e(_,w),nn&&$h(_,A),x;if(w===null){for(;!C.done;A++,C=y.next())C=h(_,C.value,b),C!==null&&(v=s(C,v,A),S===null?x=C:S.sibling=C,S=C);return nn&&$h(_,A),x}for(w=n(_,w);!C.done;A++,C=y.next())C=f(w,_,A,C.value,b),C!==null&&(i&&C.alternate!==null&&w.delete(C.key===null?A:C.key),v=s(C,v,A),S===null?x=C:S.sibling=C,S=C);return i&&w.forEach(function(R){return t(_,R)}),nn&&$h(_,A),x}function m(_,v,y,b){if(typeof y=="object"&&y!==null&&y.type===gp&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case mx:t:{for(var x=y.key,S=v;S!==null;){if(S.key===x){if(x=y.type,x===gp){if(S.tag===7){e(_,S.sibling),v=r(S,y.props.children),v.return=_,_=v;break t}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===bc&&Wj(x)===S.type){e(_,S.sibling),v=r(S,y.props),v.ref=o_(_,S,y),v.return=_,_=v;break t}e(_,S);break}else t(_,S);S=S.sibling}y.type===gp?(v=yd(y.props.children,_.mode,b,y.key),v.return=_,_=v):(b=t1(y.type,y.key,y.props,null,_.mode,b),b.ref=o_(_,v,y),b.return=_,_=b)}return a(_);case pp:t:{for(S=y.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){e(_,v.sibling),v=r(v,y.children||[]),v.return=_,_=v;break t}else{e(_,v);break}else t(_,v);v=v.sibling}v=TP(y,_.mode,b),v.return=_,_=v}return a(_);case bc:return S=y._init,m(_,v,S(y._payload),b)}if(z_(y))return p(_,v,y,b);if(i_(y))return g(_,v,y,b);Mx(_,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(e(_,v.sibling),v=r(v,y),v.return=_,_=v):(e(_,v),v=MP(y,_.mode,b),v.return=_,_=v),a(_)):e(_,v)}return m}var Eg=R6(!0),O6=R6(!1),z1=mh(null),N1=null,wp=null,u2=null;function c2(){u2=wp=N1=null}function h2(i){var t=z1.current;qi(z1),i._currentValue=t}function WR(i,t,e){for(;i!==null;){var n=i.alternate;if((i.childLanes&t)!==t?(i.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),i===e)break;i=i.return}}function ig(i,t){N1=i,u2=wp=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&t&&(Us=!0),i.firstContext=null)}function so(i){var t=i._currentValue;if(u2!==i)if(i={context:i,memoizedValue:t,next:null},wp===null){if(N1===null)throw Error(Ct(308));wp=i,N1.dependencies={lanes:0,firstContext:i}}else wp=wp.next=i;return t}var ed=null;function d2(i){ed===null?ed=[i]:ed.push(i)}function D6(i,t,e,n){var r=t.interleaved;return r===null?(e.next=e,d2(t)):(e.next=r.next,r.next=e),t.interleaved=e,Uu(i,n)}function Uu(i,t){i.lanes|=t;var e=i.alternate;for(e!==null&&(e.lanes|=t),e=i,i=i.return;i!==null;)i.childLanes|=t,e=i.alternate,e!==null&&(e.childLanes|=t),e=i,i=i.return;return e.tag===3?e.stateNode:null}var xc=!1;function f2(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I6(i,t){i=i.updateQueue,t.updateQueue===i&&(t.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ju(i,t){return{eventTime:i,lane:t,tag:0,payload:null,callback:null,next:null}}function Kc(i,t,e){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,pi&2){var r=n.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),n.pending=t,Uu(i,e)}return r=n.interleaved,r===null?(t.next=t,d2(n)):(t.next=r.next,r.next=t),n.interleaved=t,Uu(i,e)}function XS(i,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var n=t.lanes;n&=i.pendingLanes,e|=n,t.lanes=e,QL(i,e)}}function $j(i,t){var e=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,e===n)){var r=null,s=null;if(e=e.firstBaseUpdate,e!==null){do{var a={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};s===null?r=s=a:s=s.next=a,e=e.next}while(e!==null);s===null?r=s=t:s=s.next=t}else r=s=t;e={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},i.updateQueue=e;return}i=e.lastBaseUpdate,i===null?e.firstBaseUpdate=t:i.next=t,e.lastBaseUpdate=t}function j1(i,t,e,n){var r=i.updateQueue;xc=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=i.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;a=0,c=u=l=null,o=s;do{var d=o.lane,f=o.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var p=i,g=o;switch(d=t,f=e,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break t;h=vn({},h,d);break t;case 2:xc=!0}}o.callback!==null&&o.lane!==0&&(i.flags|=64,d=r.effects,d===null?r.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,a|=d;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;d=o,o=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(c===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else s===null&&(r.shared.lanes=0);Id|=a,i.lanes=a,i.memoizedState=h}}function Uj(i,t,e){if(i=t.effects,t.effects=null,i!==null)for(t=0;t<i.length;t++){var n=i[t],r=n.callback;if(r!==null){if(n.callback=null,n=e,typeof r!="function")throw Error(Ct(191,r));r.call(n)}}}var ob={},Vl=mh(ob),Dy=mh(ob),Iy=mh(ob);function id(i){if(i===ob)throw Error(Ct(174));return i}function p2(i,t){switch(Wi(Iy,t),Wi(Dy,i),Wi(Vl,ob),i=t.nodeType,i){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wR(null,"");break;default:i=i===8?t.parentNode:t,t=i.namespaceURI||null,i=i.tagName,t=wR(t,i)}qi(Vl),Wi(Vl,t)}function Rg(){qi(Vl),qi(Dy),qi(Iy)}function L6(i){id(Iy.current);var t=id(Vl.current),e=wR(t,i.type);t!==e&&(Wi(Dy,i),Wi(Vl,e))}function g2(i){Dy.current===i&&(qi(Vl),qi(Dy))}var fn=mh(0);function H1(i){for(var t=i;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xP=[];function m2(){for(var i=0;i<xP.length;i++)xP[i]._workInProgressVersionPrimary=null;xP.length=0}var KS=nc.ReactCurrentDispatcher,SP=nc.ReactCurrentBatchConfig,Dd=0,mn=null,ur=null,br=null,V1=!1,dv=!1,Ly=0,rct=0;function $r(){throw Error(Ct(321))}function _2(i,t){if(t===null)return!1;for(var e=0;e<t.length&&e<i.length;e++)if(!Yo(i[e],t[e]))return!1;return!0}function v2(i,t,e,n,r,s){if(Dd=s,mn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,KS.current=i===null||i.memoizedState===null?lct:uct,i=e(n,r),dv){s=0;do{if(dv=!1,Ly=0,25<=s)throw Error(Ct(301));s+=1,br=ur=null,t.updateQueue=null,KS.current=cct,i=e(n,r)}while(dv)}if(KS.current=W1,t=ur!==null&&ur.next!==null,Dd=0,br=ur=mn=null,V1=!1,t)throw Error(Ct(300));return i}function y2(){var i=Ly!==0;return Ly=0,i}function hl(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?mn.memoizedState=br=i:br=br.next=i,br}function ao(){if(ur===null){var i=mn.alternate;i=i!==null?i.memoizedState:null}else i=ur.next;var t=br===null?mn.memoizedState:br.next;if(t!==null)br=t,ur=i;else{if(i===null)throw Error(Ct(310));ur=i,i={memoizedState:ur.memoizedState,baseState:ur.baseState,baseQueue:ur.baseQueue,queue:ur.queue,next:null},br===null?mn.memoizedState=br=i:br=br.next=i}return br}function By(i,t){return typeof t=="function"?t(i):t}function wP(i){var t=ao(),e=t.queue;if(e===null)throw Error(Ct(311));e.lastRenderedReducer=i;var n=ur,r=n.baseQueue,s=e.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}n.baseQueue=r=s,e.pending=null}if(r!==null){s=r.next,n=n.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((Dd&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:i(n,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=n):l=l.next=h,mn.lanes|=c,Id|=c}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,Yo(n,t.memoizedState)||(Us=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,e.lastRenderedState=n}if(i=e.interleaved,i!==null){r=i;do s=r.lane,mn.lanes|=s,Id|=s,r=r.next;while(r!==i)}else r===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function AP(i){var t=ao(),e=t.queue;if(e===null)throw Error(Ct(311));e.lastRenderedReducer=i;var n=e.dispatch,r=e.pending,s=t.memoizedState;if(r!==null){e.pending=null;var a=r=r.next;do s=i(s,a.action),a=a.next;while(a!==r);Yo(s,t.memoizedState)||(Us=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),e.lastRenderedState=s}return[s,n]}function B6(){}function F6(i,t){var e=mn,n=ao(),r=t(),s=!Yo(n.memoizedState,r);if(s&&(n.memoizedState=r,Us=!0),n=n.queue,b2(j6.bind(null,e,n,i),[i]),n.getSnapshot!==t||s||br!==null&&br.memoizedState.tag&1){if(e.flags|=2048,Fy(9,N6.bind(null,e,n,r,t),void 0,null),Ar===null)throw Error(Ct(349));Dd&30||z6(e,t,r)}return r}function z6(i,t,e){i.flags|=16384,i={getSnapshot:t,value:e},t=mn.updateQueue,t===null?(t={lastEffect:null,stores:null},mn.updateQueue=t,t.stores=[i]):(e=t.stores,e===null?t.stores=[i]:e.push(i))}function N6(i,t,e,n){t.value=e,t.getSnapshot=n,H6(t)&&V6(i)}function j6(i,t,e){return e(function(){H6(t)&&V6(i)})}function H6(i){var t=i.getSnapshot;i=i.value;try{var e=t();return!Yo(i,e)}catch{return!0}}function V6(i){var t=Uu(i,1);t!==null&&Go(t,i,1,-1)}function Gj(i){var t=hl();return typeof i=="function"&&(i=i()),t.memoizedState=t.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:By,lastRenderedState:i},t.queue=i,i=i.dispatch=oct.bind(null,mn,i),[t.memoizedState,i]}function Fy(i,t,e,n){return i={tag:i,create:t,destroy:e,deps:n,next:null},t=mn.updateQueue,t===null?(t={lastEffect:null,stores:null},mn.updateQueue=t,t.lastEffect=i.next=i):(e=t.lastEffect,e===null?t.lastEffect=i.next=i:(n=e.next,e.next=i,i.next=n,t.lastEffect=i)),i}function W6(){return ao().memoizedState}function qS(i,t,e,n){var r=hl();mn.flags|=i,r.memoizedState=Fy(1|t,e,void 0,n===void 0?null:n)}function Zk(i,t,e,n){var r=ao();n=n===void 0?null:n;var s=void 0;if(ur!==null){var a=ur.memoizedState;if(s=a.destroy,n!==null&&_2(n,a.deps)){r.memoizedState=Fy(t,e,s,n);return}}mn.flags|=i,r.memoizedState=Fy(1|t,e,s,n)}function Yj(i,t){return qS(8390656,8,i,t)}function b2(i,t){return Zk(2048,8,i,t)}function $6(i,t){return Zk(4,2,i,t)}function U6(i,t){return Zk(4,4,i,t)}function G6(i,t){if(typeof t=="function")return i=i(),t(i),function(){t(null)};if(t!=null)return i=i(),t.current=i,function(){t.current=null}}function Y6(i,t,e){return e=e!=null?e.concat([i]):null,Zk(4,4,G6.bind(null,t,i),e)}function x2(){}function X6(i,t){var e=ao();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&_2(t,n[1])?n[0]:(e.memoizedState=[i,t],i)}function K6(i,t){var e=ao();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&_2(t,n[1])?n[0]:(i=i(),e.memoizedState=[i,t],i)}function q6(i,t,e){return Dd&21?(Yo(e,t)||(e=e6(),mn.lanes|=e,Id|=e,i.baseState=!0),t):(i.baseState&&(i.baseState=!1,Us=!0),i.memoizedState=e)}function sct(i,t){var e=Di;Di=e!==0&&4>e?e:4,i(!0);var n=SP.transition;SP.transition={};try{i(!1),t()}finally{Di=e,SP.transition=n}}function Z6(){return ao().memoizedState}function act(i,t,e){var n=Zc(i);if(e={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null},Q6(i))J6(t,e);else if(e=D6(i,t,e,n),e!==null){var r=ms();Go(e,i,n,r),t7(e,t,n)}}function oct(i,t,e){var n=Zc(i),r={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null};if(Q6(i))J6(t,r);else{var s=i.alternate;if(i.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,e);if(r.hasEagerState=!0,r.eagerState=o,Yo(o,a)){var l=t.interleaved;l===null?(r.next=r,d2(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}e=D6(i,t,r,n),e!==null&&(r=ms(),Go(e,i,n,r),t7(e,t,n))}}function Q6(i){var t=i.alternate;return i===mn||t!==null&&t===mn}function J6(i,t){dv=V1=!0;var e=i.pending;e===null?t.next=t:(t.next=e.next,e.next=t),i.pending=t}function t7(i,t,e){if(e&4194240){var n=t.lanes;n&=i.pendingLanes,e|=n,t.lanes=e,QL(i,e)}}var W1={readContext:so,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useInsertionEffect:$r,useLayoutEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useMutableSource:$r,useSyncExternalStore:$r,useId:$r,unstable_isNewReconciler:!1},lct={readContext:so,useCallback:function(i,t){return hl().memoizedState=[i,t===void 0?null:t],i},useContext:so,useEffect:Yj,useImperativeHandle:function(i,t,e){return e=e!=null?e.concat([i]):null,qS(4194308,4,G6.bind(null,t,i),e)},useLayoutEffect:function(i,t){return qS(4194308,4,i,t)},useInsertionEffect:function(i,t){return qS(4,2,i,t)},useMemo:function(i,t){var e=hl();return t=t===void 0?null:t,i=i(),e.memoizedState=[i,t],i},useReducer:function(i,t,e){var n=hl();return t=e!==void 0?e(t):t,n.memoizedState=n.baseState=t,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:t},n.queue=i,i=i.dispatch=act.bind(null,mn,i),[n.memoizedState,i]},useRef:function(i){var t=hl();return i={current:i},t.memoizedState=i},useState:Gj,useDebugValue:x2,useDeferredValue:function(i){return hl().memoizedState=i},useTransition:function(){var i=Gj(!1),t=i[0];return i=sct.bind(null,i[1]),hl().memoizedState=i,[t,i]},useMutableSource:function(){},useSyncExternalStore:function(i,t,e){var n=mn,r=hl();if(nn){if(e===void 0)throw Error(Ct(407));e=e()}else{if(e=t(),Ar===null)throw Error(Ct(349));Dd&30||z6(n,t,e)}r.memoizedState=e;var s={value:e,getSnapshot:t};return r.queue=s,Yj(j6.bind(null,n,s,i),[i]),n.flags|=2048,Fy(9,N6.bind(null,n,s,e,t),void 0,null),e},useId:function(){var i=hl(),t=Ar.identifierPrefix;if(nn){var e=Cu,n=ku;e=(n&~(1<<32-Uo(n)-1)).toString(32)+e,t=":"+t+"R"+e,e=Ly++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=rct++,t=":"+t+"r"+e.toString(32)+":";return i.memoizedState=t},unstable_isNewReconciler:!1},uct={readContext:so,useCallback:X6,useContext:so,useEffect:b2,useImperativeHandle:Y6,useInsertionEffect:$6,useLayoutEffect:U6,useMemo:K6,useReducer:wP,useRef:W6,useState:function(){return wP(By)},useDebugValue:x2,useDeferredValue:function(i){var t=ao();return q6(t,ur.memoizedState,i)},useTransition:function(){var i=wP(By)[0],t=ao().memoizedState;return[i,t]},useMutableSource:B6,useSyncExternalStore:F6,useId:Z6,unstable_isNewReconciler:!1},cct={readContext:so,useCallback:X6,useContext:so,useEffect:b2,useImperativeHandle:Y6,useInsertionEffect:$6,useLayoutEffect:U6,useMemo:K6,useReducer:AP,useRef:W6,useState:function(){return AP(By)},useDebugValue:x2,useDeferredValue:function(i){var t=ao();return ur===null?t.memoizedState=i:q6(t,ur.memoizedState,i)},useTransition:function(){var i=AP(By)[0],t=ao().memoizedState;return[i,t]},useMutableSource:B6,useSyncExternalStore:F6,useId:Z6,unstable_isNewReconciler:!1};function Ao(i,t){if(i&&i.defaultProps){t=vn({},t),i=i.defaultProps;for(var e in i)t[e]===void 0&&(t[e]=i[e]);return t}return t}function $R(i,t,e,n){t=i.memoizedState,e=e(n,t),e=e==null?t:vn({},t,e),i.memoizedState=e,i.lanes===0&&(i.updateQueue.baseState=e)}var Qk={isMounted:function(i){return(i=i._reactInternals)?lf(i)===i:!1},enqueueSetState:function(i,t,e){i=i._reactInternals;var n=ms(),r=Zc(i),s=ju(n,r);s.payload=t,e!=null&&(s.callback=e),t=Kc(i,s,r),t!==null&&(Go(t,i,r,n),XS(t,i,r))},enqueueReplaceState:function(i,t,e){i=i._reactInternals;var n=ms(),r=Zc(i),s=ju(n,r);s.tag=1,s.payload=t,e!=null&&(s.callback=e),t=Kc(i,s,r),t!==null&&(Go(t,i,r,n),XS(t,i,r))},enqueueForceUpdate:function(i,t){i=i._reactInternals;var e=ms(),n=Zc(i),r=ju(e,n);r.tag=2,t!=null&&(r.callback=t),t=Kc(i,r,n),t!==null&&(Go(t,i,n,e),XS(t,i,n))}};function Xj(i,t,e,n,r,s,a){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,s,a):t.prototype&&t.prototype.isPureReactComponent?!Py(e,n)||!Py(r,s):!0}function e7(i,t,e){var n=!1,r=rh,s=t.contextType;return typeof s=="object"&&s!==null?s=so(s):(r=Xs(t)?Rd:is.current,n=t.contextTypes,s=(n=n!=null)?Tg(i,r):rh),t=new t(e,s),i.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qk,i.stateNode=t,t._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=s),t}function Kj(i,t,e,n){i=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,n),t.state!==i&&Qk.enqueueReplaceState(t,t.state,null)}function UR(i,t,e,n){var r=i.stateNode;r.props=e,r.state=i.memoizedState,r.refs={},f2(i);var s=t.contextType;typeof s=="object"&&s!==null?r.context=so(s):(s=Xs(t)?Rd:is.current,r.context=Tg(i,s)),r.state=i.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&($R(i,t,s,e),r.state=i.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Qk.enqueueReplaceState(r,r.state,null),j1(i,e,r,n),r.state=i.memoizedState),typeof r.componentDidMount=="function"&&(i.flags|=4194308)}function Og(i,t){try{var e="",n=t;do e+=zlt(n),n=n.return;while(n);var r=e}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:i,source:t,stack:r,digest:null}}function kP(i,t,e){return{value:i,source:null,stack:e??null,digest:t??null}}function GR(i,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var hct=typeof WeakMap=="function"?WeakMap:Map;function i7(i,t,e){e=ju(-1,e),e.tag=3,e.payload={element:null};var n=t.value;return e.callback=function(){U1||(U1=!0,iO=n),GR(i,t)},e}function n7(i,t,e){e=ju(-1,e),e.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var r=t.value;e.payload=function(){return n(r)},e.callback=function(){GR(i,t)}}var s=i.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){GR(i,t),typeof n!="function"&&(qc===null?qc=new Set([this]):qc.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),e}function qj(i,t,e){var n=i.pingCache;if(n===null){n=i.pingCache=new hct;var r=new Set;n.set(t,r)}else r=n.get(t),r===void 0&&(r=new Set,n.set(t,r));r.has(e)||(r.add(e),i=kct.bind(null,i,t,e),t.then(i,i))}function Zj(i){do{var t;if((t=i.tag===13)&&(t=i.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return i;i=i.return}while(i!==null);return null}function Qj(i,t,e,n,r){return i.mode&1?(i.flags|=65536,i.lanes=r,i):(i===t?i.flags|=65536:(i.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=ju(-1,1),t.tag=2,Kc(e,t,1))),e.lanes|=1),i)}var dct=nc.ReactCurrentOwner,Us=!1;function ds(i,t,e,n){t.child=i===null?O6(t,null,e,n):Eg(t,i.child,e,n)}function Jj(i,t,e,n,r){e=e.render;var s=t.ref;return ig(t,r),n=v2(i,t,e,n,s,r),e=y2(),i!==null&&!Us?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~r,Gu(i,t,r)):(nn&&e&&a2(t),t.flags|=1,ds(i,t,n,r),t.child)}function t3(i,t,e,n,r){if(i===null){var s=e.type;return typeof s=="function"&&!P2(s)&&s.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=s,r7(i,t,s,n,r)):(i=t1(e.type,null,n,t,t.mode,r),i.ref=t.ref,i.return=t,t.child=i)}if(s=i.child,!(i.lanes&r)){var a=s.memoizedProps;if(e=e.compare,e=e!==null?e:Py,e(a,n)&&i.ref===t.ref)return Gu(i,t,r)}return t.flags|=1,i=Qc(s,n),i.ref=t.ref,i.return=t,t.child=i}function r7(i,t,e,n,r){if(i!==null){var s=i.memoizedProps;if(Py(s,n)&&i.ref===t.ref)if(Us=!1,t.pendingProps=n=s,(i.lanes&r)!==0)i.flags&131072&&(Us=!0);else return t.lanes=i.lanes,Gu(i,t,r)}return YR(i,t,e,n,r)}function s7(i,t,e){var n=t.pendingProps,r=n.children,s=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wi(kp,oa),oa|=e;else{if(!(e&1073741824))return i=s!==null?s.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:i,cachePool:null,transitions:null},t.updateQueue=null,Wi(kp,oa),oa|=i,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:e,Wi(kp,oa),oa|=n}else s!==null?(n=s.baseLanes|e,t.memoizedState=null):n=e,Wi(kp,oa),oa|=n;return ds(i,t,r,e),t.child}function a7(i,t){var e=t.ref;(i===null&&e!==null||i!==null&&i.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function YR(i,t,e,n,r){var s=Xs(e)?Rd:is.current;return s=Tg(t,s),ig(t,r),e=v2(i,t,e,n,s,r),n=y2(),i!==null&&!Us?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~r,Gu(i,t,r)):(nn&&n&&a2(t),t.flags|=1,ds(i,t,e,r),t.child)}function e3(i,t,e,n,r){if(Xs(e)){var s=!0;L1(t)}else s=!1;if(ig(t,r),t.stateNode===null)ZS(i,t),e7(t,e,n),UR(t,e,n,r),n=!0;else if(i===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=e.contextType;typeof u=="object"&&u!==null?u=so(u):(u=Xs(e)?Rd:is.current,u=Tg(t,u));var c=e.getDerivedStateFromProps,h=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&Kj(t,a,n,u),xc=!1;var d=t.memoizedState;a.state=d,j1(t,n,a,r),l=t.memoizedState,o!==n||d!==l||Ys.current||xc?(typeof c=="function"&&($R(t,e,c,n),l=t.memoizedState),(o=xc||Xj(t,e,o,n,d,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,I6(i,t),o=t.memoizedProps,u=t.type===t.elementType?o:Ao(t.type,o),a.props=u,h=t.pendingProps,d=a.context,l=e.contextType,typeof l=="object"&&l!==null?l=so(l):(l=Xs(e)?Rd:is.current,l=Tg(t,l));var f=e.getDerivedStateFromProps;(c=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||d!==l)&&Kj(t,a,n,l),xc=!1,d=t.memoizedState,a.state=d,j1(t,n,a,r);var p=t.memoizedState;o!==h||d!==p||Ys.current||xc?(typeof f=="function"&&($R(t,e,f,n),p=t.memoizedState),(u=xc||Xj(t,e,u,n,d,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,p,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===i.memoizedProps&&d===i.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===i.memoizedProps&&d===i.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===i.memoizedProps&&d===i.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===i.memoizedProps&&d===i.memoizedState||(t.flags|=1024),n=!1)}return XR(i,t,e,n,s,r)}function XR(i,t,e,n,r,s){a7(i,t);var a=(t.flags&128)!==0;if(!n&&!a)return r&&jj(t,e,!1),Gu(i,t,s);n=t.stateNode,dct.current=t;var o=a&&typeof e.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,i!==null&&a?(t.child=Eg(t,i.child,null,s),t.child=Eg(t,null,o,s)):ds(i,t,o,s),t.memoizedState=n.state,r&&jj(t,e,!0),t.child}function o7(i){var t=i.stateNode;t.pendingContext?Nj(i,t.pendingContext,t.pendingContext!==t.context):t.context&&Nj(i,t.context,!1),p2(i,t.containerInfo)}function i3(i,t,e,n,r){return Pg(),l2(r),t.flags|=256,ds(i,t,e,n),t.child}var KR={dehydrated:null,treeContext:null,retryLane:0};function qR(i){return{baseLanes:i,cachePool:null,transitions:null}}function l7(i,t,e){var n=t.pendingProps,r=fn.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=i!==null&&i.memoizedState===null?!1:(r&2)!==0),o?(s=!0,t.flags&=-129):(i===null||i.memoizedState!==null)&&(r|=1),Wi(fn,r&1),i===null)return VR(t),i=t.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(t.mode&1?i.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,i=n.fallback,s?(n=t.mode,s=t.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=eC(a,n,0,null),i=yd(i,n,e,null),s.return=t,i.return=t,s.sibling=i,t.child=s,t.child.memoizedState=qR(e),t.memoizedState=KR,i):S2(t,a));if(r=i.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return fct(i,t,a,n,o,r,e);if(s){s=n.fallback,a=t.mode,r=i.child,o=r.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&t.child!==r?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Qc(r,l),n.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=Qc(o,s):(s=yd(s,a,e,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,a=i.child.memoizedState,a=a===null?qR(e):{baseLanes:a.baseLanes|e,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=i.childLanes&~e,t.memoizedState=KR,n}return s=i.child,i=s.sibling,n=Qc(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=e),n.return=t,n.sibling=null,i!==null&&(e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)),t.child=n,t.memoizedState=null,n}function S2(i,t){return t=eC({mode:"visible",children:t},i.mode,0,null),t.return=i,i.child=t}function Tx(i,t,e,n){return n!==null&&l2(n),Eg(t,i.child,null,e),i=S2(t,t.pendingProps.children),i.flags|=2,t.memoizedState=null,i}function fct(i,t,e,n,r,s,a){if(e)return t.flags&256?(t.flags&=-257,n=kP(Error(Ct(422))),Tx(i,t,a,n)):t.memoizedState!==null?(t.child=i.child,t.flags|=128,null):(s=n.fallback,r=t.mode,n=eC({mode:"visible",children:n.children},r,0,null),s=yd(s,r,a,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&Eg(t,i.child,null,a),t.child.memoizedState=qR(a),t.memoizedState=KR,s);if(!(t.mode&1))return Tx(i,t,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(Ct(419)),n=kP(s,n,void 0),Tx(i,t,a,n)}if(o=(a&i.childLanes)!==0,Us||o){if(n=Ar,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Uu(i,r),Go(n,i,r,-1))}return T2(),n=kP(Error(Ct(421))),Tx(i,t,a,n)}return r.data==="$?"?(t.flags|=128,t.child=i.child,t=Cct.bind(null,i),r._reactRetry=t,null):(i=s.treeContext,pa=Xc(r.nextSibling),ma=t,nn=!0,Po=null,i!==null&&(Na[ja++]=ku,Na[ja++]=Cu,Na[ja++]=Od,ku=i.id,Cu=i.overflow,Od=t),t=S2(t,n.children),t.flags|=4096,t)}function n3(i,t,e){i.lanes|=t;var n=i.alternate;n!==null&&(n.lanes|=t),WR(i.return,t,e)}function CP(i,t,e,n,r){var s=i.memoizedState;s===null?i.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:e,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=e,s.tailMode=r)}function u7(i,t,e){var n=t.pendingProps,r=n.revealOrder,s=n.tail;if(ds(i,t,n.children,e),n=fn.current,n&2)n=n&1|2,t.flags|=128;else{if(i!==null&&i.flags&128)t:for(i=t.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&n3(i,e,t);else if(i.tag===19)n3(i,e,t);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break t;for(;i.sibling===null;){if(i.return===null||i.return===t)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(Wi(fn,n),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(e=t.child,r=null;e!==null;)i=e.alternate,i!==null&&H1(i)===null&&(r=e),e=e.sibling;e=r,e===null?(r=t.child,t.child=null):(r=e.sibling,e.sibling=null),CP(t,!1,r,e,s);break;case"backwards":for(e=null,r=t.child,t.child=null;r!==null;){if(i=r.alternate,i!==null&&H1(i)===null){t.child=r;break}i=r.sibling,r.sibling=e,e=r,r=i}CP(t,!0,e,null,s);break;case"together":CP(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ZS(i,t){!(t.mode&1)&&i!==null&&(i.alternate=null,t.alternate=null,t.flags|=2)}function Gu(i,t,e){if(i!==null&&(t.dependencies=i.dependencies),Id|=t.lanes,!(e&t.childLanes))return null;if(i!==null&&t.child!==i.child)throw Error(Ct(153));if(t.child!==null){for(i=t.child,e=Qc(i,i.pendingProps),t.child=e,e.return=t;i.sibling!==null;)i=i.sibling,e=e.sibling=Qc(i,i.pendingProps),e.return=t;e.sibling=null}return t.child}function pct(i,t,e){switch(t.tag){case 3:o7(t),Pg();break;case 5:L6(t);break;case 1:Xs(t.type)&&L1(t);break;case 4:p2(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;Wi(z1,n._currentValue),n._currentValue=r;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Wi(fn,fn.current&1),t.flags|=128,null):e&t.child.childLanes?l7(i,t,e):(Wi(fn,fn.current&1),i=Gu(i,t,e),i!==null?i.sibling:null);Wi(fn,fn.current&1);break;case 19:if(n=(e&t.childLanes)!==0,i.flags&128){if(n)return u7(i,t,e);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Wi(fn,fn.current),n)break;return null;case 22:case 23:return t.lanes=0,s7(i,t,e)}return Gu(i,t,e)}var c7,ZR,h7,d7;c7=function(i,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)i.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};ZR=function(){};h7=function(i,t,e,n){var r=i.memoizedProps;if(r!==n){i=t.stateNode,id(Vl.current);var s=null;switch(e){case"input":r=yR(i,r),n=yR(i,n),s=[];break;case"select":r=vn({},r,{value:void 0}),n=vn({},n,{value:void 0}),s=[];break;case"textarea":r=SR(i,r),n=SR(i,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=D1)}AR(e,n);var a;e=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(e||(e={}),e[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sy.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=r?.[u],n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(e||(e={}),e[a]=l[a])}else e||(s||(s=[]),s.push(u,e)),e=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sy.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Xi("scroll",i),s||o===l||(s=[])):(s=s||[]).push(u,l))}e&&(s=s||[]).push("style",e);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};d7=function(i,t,e,n){e!==n&&(t.flags|=4)};function l_(i,t){if(!nn)switch(i.tailMode){case"hidden":t=i.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?i.tail=null:e.sibling=null;break;case"collapsed":e=i.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function Ur(i){var t=i.alternate!==null&&i.alternate.child===i.child,e=0,n=0;if(t)for(var r=i.child;r!==null;)e|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=i,r=r.sibling;else for(r=i.child;r!==null;)e|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=i,r=r.sibling;return i.subtreeFlags|=n,i.childLanes=e,t}function gct(i,t,e){var n=t.pendingProps;switch(o2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(t),null;case 1:return Xs(t.type)&&I1(),Ur(t),null;case 3:return n=t.stateNode,Rg(),qi(Ys),qi(is),m2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(Cx(t)?t.flags|=4:i===null||i.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Po!==null&&(sO(Po),Po=null))),ZR(i,t),Ur(t),null;case 5:g2(t);var r=id(Iy.current);if(e=t.type,i!==null&&t.stateNode!=null)h7(i,t,e,n,r),i.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Ct(166));return Ur(t),null}if(i=id(Vl.current),Cx(t)){n=t.stateNode,e=t.type;var s=t.memoizedProps;switch(n[xl]=t,n[Oy]=s,i=(t.mode&1)!==0,e){case"dialog":Xi("cancel",n),Xi("close",n);break;case"iframe":case"object":case"embed":Xi("load",n);break;case"video":case"audio":for(r=0;r<j_.length;r++)Xi(j_[r],n);break;case"source":Xi("error",n);break;case"img":case"image":case"link":Xi("error",n),Xi("load",n);break;case"details":Xi("toggle",n);break;case"input":dj(n,s),Xi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Xi("invalid",n);break;case"textarea":pj(n,s),Xi("invalid",n)}AR(e,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&kx(n.textContent,o,i),r=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&kx(n.textContent,o,i),r=["children",""+o]):Sy.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Xi("scroll",n)}switch(e){case"input":_x(n),fj(n,s,!0);break;case"textarea":_x(n),gj(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=D1)}n=r,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=j8(e)),i==="http://www.w3.org/1999/xhtml"?e==="script"?(i=a.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=a.createElement(e,{is:n.is}):(i=a.createElement(e),e==="select"&&(a=i,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):i=a.createElementNS(i,e),i[xl]=t,i[Oy]=n,c7(i,t,!1,!1),t.stateNode=i;t:{switch(a=kR(e,n),e){case"dialog":Xi("cancel",i),Xi("close",i),r=n;break;case"iframe":case"object":case"embed":Xi("load",i),r=n;break;case"video":case"audio":for(r=0;r<j_.length;r++)Xi(j_[r],i);r=n;break;case"source":Xi("error",i),r=n;break;case"img":case"image":case"link":Xi("error",i),Xi("load",i),r=n;break;case"details":Xi("toggle",i),r=n;break;case"input":dj(i,n),r=yR(i,n),Xi("invalid",i);break;case"option":r=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},r=vn({},n,{value:void 0}),Xi("invalid",i);break;case"textarea":pj(i,n),r=SR(i,n),Xi("invalid",i);break;default:r=n}AR(e,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?W8(i,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&H8(i,l)):s==="children"?typeof l=="string"?(e!=="textarea"||l!=="")&&wy(i,l):typeof l=="number"&&wy(i,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sy.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Xi("scroll",i):l!=null&&GL(i,s,l,a))}switch(e){case"input":_x(i),fj(i,n,!1);break;case"textarea":_x(i),gj(i);break;case"option":n.value!=null&&i.setAttribute("value",""+nh(n.value));break;case"select":i.multiple=!!n.multiple,s=n.value,s!=null?Qp(i,!!n.multiple,s,!1):n.defaultValue!=null&&Qp(i,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(i.onclick=D1)}switch(e){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ur(t),null;case 6:if(i&&t.stateNode!=null)d7(i,t,i.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ct(166));if(e=id(Iy.current),id(Vl.current),Cx(t)){if(n=t.stateNode,e=t.memoizedProps,n[xl]=t,(s=n.nodeValue!==e)&&(i=ma,i!==null))switch(i.tag){case 3:kx(n.nodeValue,e,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&kx(n.nodeValue,e,(i.mode&1)!==0)}s&&(t.flags|=4)}else n=(e.nodeType===9?e:e.ownerDocument).createTextNode(n),n[xl]=t,t.stateNode=n}return Ur(t),null;case 13:if(qi(fn),n=t.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(nn&&pa!==null&&t.mode&1&&!(t.flags&128))E6(),Pg(),t.flags|=98560,s=!1;else if(s=Cx(t),n!==null&&n.dehydrated!==null){if(i===null){if(!s)throw Error(Ct(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ct(317));s[xl]=t}else Pg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ur(t),s=!1}else Po!==null&&(sO(Po),Po=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(i===null||fn.current&1?cr===0&&(cr=3):T2())),t.updateQueue!==null&&(t.flags|=4),Ur(t),null);case 4:return Rg(),ZR(i,t),i===null&&Ey(t.stateNode.containerInfo),Ur(t),null;case 10:return h2(t.type._context),Ur(t),null;case 17:return Xs(t.type)&&I1(),Ur(t),null;case 19:if(qi(fn),s=t.memoizedState,s===null)return Ur(t),null;if(n=(t.flags&128)!==0,a=s.rendering,a===null)if(n)l_(s,!1);else{if(cr!==0||i!==null&&i.flags&128)for(i=t.child;i!==null;){if(a=H1(i),a!==null){for(t.flags|=128,l_(s,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=e,e=t.child;e!==null;)s=e,i=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,i=a.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e=e.sibling;return Wi(fn,fn.current&1|2),t.child}i=i.sibling}s.tail!==null&&zn()>Dg&&(t.flags|=128,n=!0,l_(s,!1),t.lanes=4194304)}else{if(!n)if(i=H1(a),i!==null){if(t.flags|=128,n=!0,e=i.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),l_(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!nn)return Ur(t),null}else 2*zn()-s.renderingStartTime>Dg&&e!==1073741824&&(t.flags|=128,n=!0,l_(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(e=s.last,e!==null?e.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=zn(),t.sibling=null,e=fn.current,Wi(fn,n?e&1|2:e&1),t):(Ur(t),null);case 22:case 23:return M2(),n=t.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?oa&1073741824&&(Ur(t),t.subtreeFlags&6&&(t.flags|=8192)):Ur(t),null;case 24:return null;case 25:return null}throw Error(Ct(156,t.tag))}function mct(i,t){switch(o2(t),t.tag){case 1:return Xs(t.type)&&I1(),i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 3:return Rg(),qi(Ys),qi(is),m2(),i=t.flags,i&65536&&!(i&128)?(t.flags=i&-65537|128,t):null;case 5:return g2(t),null;case 13:if(qi(fn),i=t.memoizedState,i!==null&&i.dehydrated!==null){if(t.alternate===null)throw Error(Ct(340));Pg()}return i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 19:return qi(fn),null;case 4:return Rg(),null;case 10:return h2(t.type._context),null;case 22:case 23:return M2(),null;case 24:return null;default:return null}}var Px=!1,qr=!1,_ct=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function Ap(i,t){var e=i.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){An(i,t,n)}else e.current=null}function QR(i,t,e){try{e()}catch(n){An(i,t,n)}}var r3=!1;function vct(i,t){if(LR=E1,i=_6(),s2(i)){if("selectionStart"in i)var e={start:i.selectionStart,end:i.selectionEnd};else t:{e=(e=i.ownerDocument)&&e.defaultView||window;var n=e.getSelection&&e.getSelection();if(n&&n.rangeCount!==0){e=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{e.nodeType,s.nodeType}catch{e=null;break t}var a=0,o=-1,l=-1,u=0,c=0,h=i,d=null;e:for(;;){for(var f;h!==e||r!==0&&h.nodeType!==3||(o=a+r),h!==s||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===i)break e;if(d===e&&++u===r&&(o=a),d===s&&++c===n&&(l=a),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}e=o===-1||l===-1?null:{start:o,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(BR={focusedElem:i,selectionRange:e},E1=!1,Gt=t;Gt!==null;)if(t=Gt,i=t.child,(t.subtreeFlags&1028)!==0&&i!==null)i.return=t,Gt=i;else for(;Gt!==null;){t=Gt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,_=t.stateNode,v=_.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ao(t.type,g),m);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ct(163))}}catch(b){An(t,t.return,b)}if(i=t.sibling,i!==null){i.return=t.return,Gt=i;break}Gt=t.return}return p=r3,r3=!1,p}function fv(i,t,e){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&i)===i){var s=r.destroy;r.destroy=void 0,s!==void 0&&QR(t,e,s)}r=r.next}while(r!==n)}}function Jk(i,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&i)===i){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}}function JR(i){var t=i.ref;if(t!==null){var e=i.stateNode;switch(i.tag){case 5:i=e;break;default:i=e}typeof t=="function"?t(i):t.current=i}}function f7(i){var t=i.alternate;t!==null&&(i.alternate=null,f7(t)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(t=i.stateNode,t!==null&&(delete t[xl],delete t[Oy],delete t[NR],delete t[tct],delete t[ect])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function p7(i){return i.tag===5||i.tag===3||i.tag===4}function s3(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||p7(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function tO(i,t,e){var n=i.tag;if(n===5||n===6)i=i.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(i,t):e.insertBefore(i,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(i,e)):(t=e,t.appendChild(i)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=D1));else if(n!==4&&(i=i.child,i!==null))for(tO(i,t,e),i=i.sibling;i!==null;)tO(i,t,e),i=i.sibling}function eO(i,t,e){var n=i.tag;if(n===5||n===6)i=i.stateNode,t?e.insertBefore(i,t):e.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(eO(i,t,e),i=i.sibling;i!==null;)eO(i,t,e),i=i.sibling}var Or=null,ko=!1;function hc(i,t,e){for(e=e.child;e!==null;)g7(i,t,e),e=e.sibling}function g7(i,t,e){if(Hl&&typeof Hl.onCommitFiberUnmount=="function")try{Hl.onCommitFiberUnmount(Uk,e)}catch{}switch(e.tag){case 5:qr||Ap(e,t);case 6:var n=Or,r=ko;Or=null,hc(i,t,e),Or=n,ko=r,Or!==null&&(ko?(i=Or,e=e.stateNode,i.nodeType===8?i.parentNode.removeChild(e):i.removeChild(e)):Or.removeChild(e.stateNode));break;case 18:Or!==null&&(ko?(i=Or,e=e.stateNode,i.nodeType===8?yP(i.parentNode,e):i.nodeType===1&&yP(i,e),My(i)):yP(Or,e.stateNode));break;case 4:n=Or,r=ko,Or=e.stateNode.containerInfo,ko=!0,hc(i,t,e),Or=n,ko=r;break;case 0:case 11:case 14:case 15:if(!qr&&(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&QR(e,t,a),r=r.next}while(r!==n)}hc(i,t,e);break;case 1:if(!qr&&(Ap(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(o){An(e,t,o)}hc(i,t,e);break;case 21:hc(i,t,e);break;case 22:e.mode&1?(qr=(n=qr)||e.memoizedState!==null,hc(i,t,e),qr=n):hc(i,t,e);break;default:hc(i,t,e)}}function a3(i){var t=i.updateQueue;if(t!==null){i.updateQueue=null;var e=i.stateNode;e===null&&(e=i.stateNode=new _ct),t.forEach(function(n){var r=Mct.bind(null,i,n);e.has(n)||(e.add(n),n.then(r,r))})}}function bo(i,t){var e=t.deletions;if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];try{var s=i,a=t,o=a;t:for(;o!==null;){switch(o.tag){case 5:Or=o.stateNode,ko=!1;break t;case 3:Or=o.stateNode.containerInfo,ko=!0;break t;case 4:Or=o.stateNode.containerInfo,ko=!0;break t}o=o.return}if(Or===null)throw Error(Ct(160));g7(s,a,r),Or=null,ko=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){An(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)m7(t,i),t=t.sibling}function m7(i,t){var e=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(bo(t,i),al(i),n&4){try{fv(3,i,i.return),Jk(3,i)}catch(g){An(i,i.return,g)}try{fv(5,i,i.return)}catch(g){An(i,i.return,g)}}break;case 1:bo(t,i),al(i),n&512&&e!==null&&Ap(e,e.return);break;case 5:if(bo(t,i),al(i),n&512&&e!==null&&Ap(e,e.return),i.flags&32){var r=i.stateNode;try{wy(r,"")}catch(g){An(i,i.return,g)}}if(n&4&&(r=i.stateNode,r!=null)){var s=i.memoizedProps,a=e!==null?e.memoizedProps:s,o=i.type,l=i.updateQueue;if(i.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&z8(r,s),kR(o,a);var u=kR(o,s);for(a=0;a<l.length;a+=2){var c=l[a],h=l[a+1];c==="style"?W8(r,h):c==="dangerouslySetInnerHTML"?H8(r,h):c==="children"?wy(r,h):GL(r,c,h,u)}switch(o){case"input":bR(r,s);break;case"textarea":N8(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Qp(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Qp(r,!!s.multiple,s.defaultValue,!0):Qp(r,!!s.multiple,s.multiple?[]:"",!1))}r[Oy]=s}catch(g){An(i,i.return,g)}}break;case 6:if(bo(t,i),al(i),n&4){if(i.stateNode===null)throw Error(Ct(162));r=i.stateNode,s=i.memoizedProps;try{r.nodeValue=s}catch(g){An(i,i.return,g)}}break;case 3:if(bo(t,i),al(i),n&4&&e!==null&&e.memoizedState.isDehydrated)try{My(t.containerInfo)}catch(g){An(i,i.return,g)}break;case 4:bo(t,i),al(i);break;case 13:bo(t,i),al(i),r=i.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(k2=zn())),n&4&&a3(i);break;case 22:if(c=e!==null&&e.memoizedState!==null,i.mode&1?(qr=(u=qr)||c,bo(t,i),qr=u):bo(t,i),al(i),n&8192){if(u=i.memoizedState!==null,(i.stateNode.isHidden=u)&&!c&&i.mode&1)for(Gt=i,c=i.child;c!==null;){for(h=Gt=c;Gt!==null;){switch(d=Gt,f=d.child,d.tag){case 0:case 11:case 14:case 15:fv(4,d,d.return);break;case 1:Ap(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){n=d,e=d.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){An(n,e,g)}}break;case 5:Ap(d,d.return);break;case 22:if(d.memoizedState!==null){l3(h);continue}}f!==null?(f.return=d,Gt=f):l3(h)}c=c.sibling}t:for(c=null,h=i;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=V8("display",a))}catch(g){An(i,i.return,g)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){An(i,i.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===i)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:bo(t,i),al(i),n&4&&a3(i);break;case 21:break;default:bo(t,i),al(i)}}function al(i){var t=i.flags;if(t&2){try{t:{for(var e=i.return;e!==null;){if(p7(e)){var n=e;break t}e=e.return}throw Error(Ct(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(wy(r,""),n.flags&=-33);var s=s3(i);eO(i,s,r);break;case 3:case 4:var a=n.stateNode.containerInfo,o=s3(i);tO(i,o,a);break;default:throw Error(Ct(161))}}catch(l){An(i,i.return,l)}i.flags&=-3}t&4096&&(i.flags&=-4097)}function yct(i,t,e){Gt=i,_7(i)}function _7(i,t,e){for(var n=(i.mode&1)!==0;Gt!==null;){var r=Gt,s=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||Px;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||qr;o=Px;var u=qr;if(Px=a,(qr=l)&&!u)for(Gt=r;Gt!==null;)a=Gt,l=a.child,a.tag===22&&a.memoizedState!==null?u3(r):l!==null?(l.return=a,Gt=l):u3(r);for(;s!==null;)Gt=s,_7(s),s=s.sibling;Gt=r,Px=o,qr=u}o3(i)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Gt=s):o3(i)}}function o3(i){for(;Gt!==null;){var t=Gt;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qr||Jk(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!qr)if(e===null)n.componentDidMount();else{var r=t.elementType===t.type?e.memoizedProps:Ao(t.type,e.memoizedProps);n.componentDidUpdate(r,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Uj(t,s,n);break;case 3:var a=t.updateQueue;if(a!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Uj(t,a,e)}break;case 5:var o=t.stateNode;if(e===null&&t.flags&4){e=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&e.focus();break;case"img":l.src&&(e.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&My(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ct(163))}qr||t.flags&512&&JR(t)}catch(d){An(t,t.return,d)}}if(t===i){Gt=null;break}if(e=t.sibling,e!==null){e.return=t.return,Gt=e;break}Gt=t.return}}function l3(i){for(;Gt!==null;){var t=Gt;if(t===i){Gt=null;break}var e=t.sibling;if(e!==null){e.return=t.return,Gt=e;break}Gt=t.return}}function u3(i){for(;Gt!==null;){var t=Gt;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Jk(4,t)}catch(l){An(t,e,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var r=t.return;try{n.componentDidMount()}catch(l){An(t,r,l)}}var s=t.return;try{JR(t)}catch(l){An(t,s,l)}break;case 5:var a=t.return;try{JR(t)}catch(l){An(t,a,l)}}}catch(l){An(t,t.return,l)}if(t===i){Gt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Gt=o;break}Gt=t.return}}var bct=Math.ceil,$1=nc.ReactCurrentDispatcher,w2=nc.ReactCurrentOwner,to=nc.ReactCurrentBatchConfig,pi=0,Ar=null,Qn=null,Br=0,oa=0,kp=mh(0),cr=0,zy=null,Id=0,tC=0,A2=0,pv=null,Hs=null,k2=0,Dg=1/0,fu=null,U1=!1,iO=null,qc=null,Ex=!1,Dc=null,G1=0,gv=0,nO=null,QS=-1,JS=0;function ms(){return pi&6?zn():QS!==-1?QS:QS=zn()}function Zc(i){return i.mode&1?pi&2&&Br!==0?Br&-Br:nct.transition!==null?(JS===0&&(JS=e6()),JS):(i=Di,i!==0||(i=window.event,i=i===void 0?16:l6(i.type)),i):1}function Go(i,t,e,n){if(50<gv)throw gv=0,nO=null,Error(Ct(185));rb(i,e,n),(!(pi&2)||i!==Ar)&&(i===Ar&&(!(pi&2)&&(tC|=e),cr===4&&Tc(i,Br)),Ks(i,n),e===1&&pi===0&&!(t.mode&1)&&(Dg=zn()+500,qk&&_h()))}function Ks(i,t){var e=i.callbackNode;nut(i,t);var n=P1(i,i===Ar?Br:0);if(n===0)e!==null&&vj(e),i.callbackNode=null,i.callbackPriority=0;else if(t=n&-n,i.callbackPriority!==t){if(e!=null&&vj(e),t===1)i.tag===0?ict(c3.bind(null,i)):M6(c3.bind(null,i)),Qut(function(){!(pi&6)&&_h()}),e=null;else{switch(i6(n)){case 1:e=ZL;break;case 4:e=J8;break;case 16:e=T1;break;case 536870912:e=t6;break;default:e=T1}e=k7(e,v7.bind(null,i))}i.callbackPriority=t,i.callbackNode=e}}function v7(i,t){if(QS=-1,JS=0,pi&6)throw Error(Ct(327));var e=i.callbackNode;if(ng()&&i.callbackNode!==e)return null;var n=P1(i,i===Ar?Br:0);if(n===0)return null;if(n&30||n&i.expiredLanes||t)t=Y1(i,n);else{t=n;var r=pi;pi|=2;var s=b7();(Ar!==i||Br!==t)&&(fu=null,Dg=zn()+500,vd(i,t));do try{wct();break}catch(o){y7(i,o)}while(!0);c2(),$1.current=s,pi=r,Qn!==null?t=0:(Ar=null,Br=0,t=cr)}if(t!==0){if(t===2&&(r=ER(i),r!==0&&(n=r,t=rO(i,r))),t===1)throw e=zy,vd(i,0),Tc(i,n),Ks(i,zn()),e;if(t===6)Tc(i,n);else{if(r=i.current.alternate,!(n&30)&&!xct(r)&&(t=Y1(i,n),t===2&&(s=ER(i),s!==0&&(n=s,t=rO(i,s))),t===1))throw e=zy,vd(i,0),Tc(i,n),Ks(i,zn()),e;switch(i.finishedWork=r,i.finishedLanes=n,t){case 0:case 1:throw Error(Ct(345));case 2:Uh(i,Hs,fu);break;case 3:if(Tc(i,n),(n&130023424)===n&&(t=k2+500-zn(),10<t)){if(P1(i,0)!==0)break;if(r=i.suspendedLanes,(r&n)!==n){ms(),i.pingedLanes|=i.suspendedLanes&r;break}i.timeoutHandle=zR(Uh.bind(null,i,Hs,fu),t);break}Uh(i,Hs,fu);break;case 4:if(Tc(i,n),(n&4194240)===n)break;for(t=i.eventTimes,r=-1;0<n;){var a=31-Uo(n);s=1<<a,a=t[a],a>r&&(r=a),n&=~s}if(n=r,n=zn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bct(n/1960))-n,10<n){i.timeoutHandle=zR(Uh.bind(null,i,Hs,fu),n);break}Uh(i,Hs,fu);break;case 5:Uh(i,Hs,fu);break;default:throw Error(Ct(329))}}}return Ks(i,zn()),i.callbackNode===e?v7.bind(null,i):null}function rO(i,t){var e=pv;return i.current.memoizedState.isDehydrated&&(vd(i,t).flags|=256),i=Y1(i,t),i!==2&&(t=Hs,Hs=e,t!==null&&sO(t)),i}function sO(i){Hs===null?Hs=i:Hs.push.apply(Hs,i)}function xct(i){for(var t=i;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var n=0;n<e.length;n++){var r=e[n],s=r.getSnapshot;r=r.value;try{if(!Yo(s(),r))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tc(i,t){for(t&=~A2,t&=~tC,i.suspendedLanes|=t,i.pingedLanes&=~t,i=i.expirationTimes;0<t;){var e=31-Uo(t),n=1<<e;i[e]=-1,t&=~n}}function c3(i){if(pi&6)throw Error(Ct(327));ng();var t=P1(i,0);if(!(t&1))return Ks(i,zn()),null;var e=Y1(i,t);if(i.tag!==0&&e===2){var n=ER(i);n!==0&&(t=n,e=rO(i,n))}if(e===1)throw e=zy,vd(i,0),Tc(i,t),Ks(i,zn()),e;if(e===6)throw Error(Ct(345));return i.finishedWork=i.current.alternate,i.finishedLanes=t,Uh(i,Hs,fu),Ks(i,zn()),null}function C2(i,t){var e=pi;pi|=1;try{return i(t)}finally{pi=e,pi===0&&(Dg=zn()+500,qk&&_h())}}function Ld(i){Dc!==null&&Dc.tag===0&&!(pi&6)&&ng();var t=pi;pi|=1;var e=to.transition,n=Di;try{if(to.transition=null,Di=1,i)return i()}finally{Di=n,to.transition=e,pi=t,!(pi&6)&&_h()}}function M2(){oa=kp.current,qi(kp)}function vd(i,t){i.finishedWork=null,i.finishedLanes=0;var e=i.timeoutHandle;if(e!==-1&&(i.timeoutHandle=-1,Zut(e)),Qn!==null)for(e=Qn.return;e!==null;){var n=e;switch(o2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&I1();break;case 3:Rg(),qi(Ys),qi(is),m2();break;case 5:g2(n);break;case 4:Rg();break;case 13:qi(fn);break;case 19:qi(fn);break;case 10:h2(n.type._context);break;case 22:case 23:M2()}e=e.return}if(Ar=i,Qn=i=Qc(i.current,null),Br=oa=t,cr=0,zy=null,A2=tC=Id=0,Hs=pv=null,ed!==null){for(t=0;t<ed.length;t++)if(e=ed[t],n=e.interleaved,n!==null){e.interleaved=null;var r=n.next,s=e.pending;if(s!==null){var a=s.next;s.next=r,n.next=a}e.pending=n}ed=null}return i}function y7(i,t){do{var e=Qn;try{if(c2(),KS.current=W1,V1){for(var n=mn.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}V1=!1}if(Dd=0,br=ur=mn=null,dv=!1,Ly=0,w2.current=null,e===null||e.return===null){cr=1,zy=t,Qn=null;break}t:{var s=i,a=e.return,o=e,l=t;if(t=Br,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Zj(a);if(f!==null){f.flags&=-257,Qj(f,a,o,s,t),f.mode&1&&qj(s,u,t),t=f,l=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break t}else{if(!(t&1)){qj(s,u,t),T2();break t}l=Error(Ct(426))}}else if(nn&&o.mode&1){var m=Zj(a);if(m!==null){!(m.flags&65536)&&(m.flags|=256),Qj(m,a,o,s,t),l2(Og(l,o));break t}}s=l=Og(l,o),cr!==4&&(cr=2),pv===null?pv=[s]:pv.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var _=i7(s,l,t);$j(s,_);break t;case 1:o=l;var v=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(qc===null||!qc.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=n7(s,o,t);$j(s,b);break t}}s=s.return}while(s!==null)}S7(e)}catch(x){t=x,Qn===e&&e!==null&&(Qn=e=e.return);continue}break}while(!0)}function b7(){var i=$1.current;return $1.current=W1,i===null?W1:i}function T2(){(cr===0||cr===3||cr===2)&&(cr=4),Ar===null||!(Id&268435455)&&!(tC&268435455)||Tc(Ar,Br)}function Y1(i,t){var e=pi;pi|=2;var n=b7();(Ar!==i||Br!==t)&&(fu=null,vd(i,t));do try{Sct();break}catch(r){y7(i,r)}while(!0);if(c2(),pi=e,$1.current=n,Qn!==null)throw Error(Ct(261));return Ar=null,Br=0,cr}function Sct(){for(;Qn!==null;)x7(Qn)}function wct(){for(;Qn!==null&&!Xlt();)x7(Qn)}function x7(i){var t=A7(i.alternate,i,oa);i.memoizedProps=i.pendingProps,t===null?S7(i):Qn=t,w2.current=null}function S7(i){var t=i;do{var e=t.alternate;if(i=t.return,t.flags&32768){if(e=mct(e,t),e!==null){e.flags&=32767,Qn=e;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{cr=6,Qn=null;return}}else if(e=gct(e,t,oa),e!==null){Qn=e;return}if(t=t.sibling,t!==null){Qn=t;return}Qn=t=i}while(t!==null);cr===0&&(cr=5)}function Uh(i,t,e){var n=Di,r=to.transition;try{to.transition=null,Di=1,Act(i,t,e,n)}finally{to.transition=r,Di=n}return null}function Act(i,t,e,n){do ng();while(Dc!==null);if(pi&6)throw Error(Ct(327));e=i.finishedWork;var r=i.finishedLanes;if(e===null)return null;if(i.finishedWork=null,i.finishedLanes=0,e===i.current)throw Error(Ct(177));i.callbackNode=null,i.callbackPriority=0;var s=e.lanes|e.childLanes;if(rut(i,s),i===Ar&&(Qn=Ar=null,Br=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Ex||(Ex=!0,k7(T1,function(){return ng(),null})),s=(e.flags&15990)!==0,e.subtreeFlags&15990||s){s=to.transition,to.transition=null;var a=Di;Di=1;var o=pi;pi|=4,w2.current=null,vct(i,e),m7(e,i),$ut(BR),E1=!!LR,BR=LR=null,i.current=e,yct(e),Klt(),pi=o,Di=a,to.transition=s}else i.current=e;if(Ex&&(Ex=!1,Dc=i,G1=r),s=i.pendingLanes,s===0&&(qc=null),Qlt(e.stateNode),Ks(i,zn()),t!==null)for(n=i.onRecoverableError,e=0;e<t.length;e++)r=t[e],n(r.value,{componentStack:r.stack,digest:r.digest});if(U1)throw U1=!1,i=iO,iO=null,i;return G1&1&&i.tag!==0&&ng(),s=i.pendingLanes,s&1?i===nO?gv++:(gv=0,nO=i):gv=0,_h(),null}function ng(){if(Dc!==null){var i=i6(G1),t=to.transition,e=Di;try{if(to.transition=null,Di=16>i?16:i,Dc===null)var n=!1;else{if(i=Dc,Dc=null,G1=0,pi&6)throw Error(Ct(331));var r=pi;for(pi|=4,Gt=i.current;Gt!==null;){var s=Gt,a=s.child;if(Gt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Gt=u;Gt!==null;){var c=Gt;switch(c.tag){case 0:case 11:case 15:fv(8,c,s)}var h=c.child;if(h!==null)h.return=c,Gt=h;else for(;Gt!==null;){c=Gt;var d=c.sibling,f=c.return;if(f7(c),c===u){Gt=null;break}if(d!==null){d.return=f,Gt=d;break}Gt=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}Gt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Gt=a;else t:for(;Gt!==null;){if(s=Gt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fv(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Gt=_;break t}Gt=s.return}}var v=i.current;for(Gt=v;Gt!==null;){a=Gt;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,Gt=y;else t:for(a=v;Gt!==null;){if(o=Gt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Jk(9,o)}}catch(x){An(o,o.return,x)}if(o===a){Gt=null;break t}var b=o.sibling;if(b!==null){b.return=o.return,Gt=b;break t}Gt=o.return}}if(pi=r,_h(),Hl&&typeof Hl.onPostCommitFiberRoot=="function")try{Hl.onPostCommitFiberRoot(Uk,i)}catch{}n=!0}return n}finally{Di=e,to.transition=t}}return!1}function h3(i,t,e){t=Og(e,t),t=i7(i,t,1),i=Kc(i,t,1),t=ms(),i!==null&&(rb(i,1,t),Ks(i,t))}function An(i,t,e){if(i.tag===3)h3(i,i,e);else for(;t!==null;){if(t.tag===3){h3(t,i,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qc===null||!qc.has(n))){i=Og(e,i),i=n7(t,i,1),t=Kc(t,i,1),i=ms(),t!==null&&(rb(t,1,i),Ks(t,i));break}}t=t.return}}function kct(i,t,e){var n=i.pingCache;n!==null&&n.delete(t),t=ms(),i.pingedLanes|=i.suspendedLanes&e,Ar===i&&(Br&e)===e&&(cr===4||cr===3&&(Br&130023424)===Br&&500>zn()-k2?vd(i,0):A2|=e),Ks(i,t)}function w7(i,t){t===0&&(i.mode&1?(t=bx,bx<<=1,!(bx&130023424)&&(bx=4194304)):t=1);var e=ms();i=Uu(i,t),i!==null&&(rb(i,t,e),Ks(i,e))}function Cct(i){var t=i.memoizedState,e=0;t!==null&&(e=t.retryLane),w7(i,e)}function Mct(i,t){var e=0;switch(i.tag){case 13:var n=i.stateNode,r=i.memoizedState;r!==null&&(e=r.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(Ct(314))}n!==null&&n.delete(t),w7(i,e)}var A7;A7=function(i,t,e){if(i!==null)if(i.memoizedProps!==t.pendingProps||Ys.current)Us=!0;else{if(!(i.lanes&e)&&!(t.flags&128))return Us=!1,pct(i,t,e);Us=!!(i.flags&131072)}else Us=!1,nn&&t.flags&1048576&&T6(t,F1,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ZS(i,t),i=t.pendingProps;var r=Tg(t,is.current);ig(t,e),r=v2(null,t,n,i,r,e);var s=y2();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xs(n)?(s=!0,L1(t)):s=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,f2(t),r.updater=Qk,t.stateNode=r,r._reactInternals=t,UR(t,n,i,e),t=XR(null,t,n,!0,s,e)):(t.tag=0,nn&&s&&a2(t),ds(null,t,r,e),t=t.child),t;case 16:n=t.elementType;t:{switch(ZS(i,t),i=t.pendingProps,r=n._init,n=r(n._payload),t.type=n,r=t.tag=Pct(n),i=Ao(n,i),r){case 0:t=YR(null,t,n,i,e);break t;case 1:t=e3(null,t,n,i,e);break t;case 11:t=Jj(null,t,n,i,e);break t;case 14:t=t3(null,t,n,Ao(n.type,i),e);break t}throw Error(Ct(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Ao(n,r),YR(i,t,n,r,e);case 1:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Ao(n,r),e3(i,t,n,r,e);case 3:t:{if(o7(t),i===null)throw Error(Ct(387));n=t.pendingProps,s=t.memoizedState,r=s.element,I6(i,t),j1(t,n,null,e);var a=t.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){r=Og(Error(Ct(423)),t),t=i3(i,t,n,e,r);break t}else if(n!==r){r=Og(Error(Ct(424)),t),t=i3(i,t,n,e,r);break t}else for(pa=Xc(t.stateNode.containerInfo.firstChild),ma=t,nn=!0,Po=null,e=O6(t,null,n,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(Pg(),n===r){t=Gu(i,t,e);break t}ds(i,t,n,e)}t=t.child}return t;case 5:return L6(t),i===null&&VR(t),n=t.type,r=t.pendingProps,s=i!==null?i.memoizedProps:null,a=r.children,FR(n,r)?a=null:s!==null&&FR(n,s)&&(t.flags|=32),a7(i,t),ds(i,t,a,e),t.child;case 6:return i===null&&VR(t),null;case 13:return l7(i,t,e);case 4:return p2(t,t.stateNode.containerInfo),n=t.pendingProps,i===null?t.child=Eg(t,null,n,e):ds(i,t,n,e),t.child;case 11:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Ao(n,r),Jj(i,t,n,r,e);case 7:return ds(i,t,t.pendingProps,e),t.child;case 8:return ds(i,t,t.pendingProps.children,e),t.child;case 12:return ds(i,t,t.pendingProps.children,e),t.child;case 10:t:{if(n=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,Wi(z1,n._currentValue),n._currentValue=a,s!==null)if(Yo(s.value,a)){if(s.children===r.children&&!Ys.current){t=Gu(i,t,e);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=ju(-1,e&-e),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=e,l=s.alternate,l!==null&&(l.lanes|=e),WR(s.return,e,t),o.lanes|=e;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ct(341));a.lanes|=e,o=a.alternate,o!==null&&(o.lanes|=e),WR(a,e,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}ds(i,t,r.children,e),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,ig(t,e),r=so(r),n=n(r),t.flags|=1,ds(i,t,n,e),t.child;case 14:return n=t.type,r=Ao(n,t.pendingProps),r=Ao(n.type,r),t3(i,t,n,r,e);case 15:return r7(i,t,t.type,t.pendingProps,e);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Ao(n,r),ZS(i,t),t.tag=1,Xs(n)?(i=!0,L1(t)):i=!1,ig(t,e),e7(t,n,r),UR(t,n,r,e),XR(null,t,n,!0,i,e);case 19:return u7(i,t,e);case 22:return s7(i,t,e)}throw Error(Ct(156,t.tag))};function k7(i,t){return Q8(i,t)}function Tct(i,t,e,n){this.tag=i,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xa(i,t,e,n){return new Tct(i,t,e,n)}function P2(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Pct(i){if(typeof i=="function")return P2(i)?1:0;if(i!=null){if(i=i.$$typeof,i===XL)return 11;if(i===KL)return 14}return 2}function Qc(i,t){var e=i.alternate;return e===null?(e=Xa(i.tag,t,i.key,i.mode),e.elementType=i.elementType,e.type=i.type,e.stateNode=i.stateNode,e.alternate=i,i.alternate=e):(e.pendingProps=t,e.type=i.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=i.flags&14680064,e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=i.sibling,e.index=i.index,e.ref=i.ref,e}function t1(i,t,e,n,r,s){var a=2;if(n=i,typeof i=="function")P2(i)&&(a=1);else if(typeof i=="string")a=5;else t:switch(i){case gp:return yd(e.children,r,s,t);case YL:a=8,r|=8;break;case gR:return i=Xa(12,e,t,r|2),i.elementType=gR,i.lanes=s,i;case mR:return i=Xa(13,e,t,r),i.elementType=mR,i.lanes=s,i;case _R:return i=Xa(19,e,t,r),i.elementType=_R,i.lanes=s,i;case L8:return eC(e,r,s,t);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D8:a=10;break t;case I8:a=9;break t;case XL:a=11;break t;case KL:a=14;break t;case bc:a=16,n=null;break t}throw Error(Ct(130,i==null?i:typeof i,""))}return t=Xa(a,e,t,r),t.elementType=i,t.type=n,t.lanes=s,t}function yd(i,t,e,n){return i=Xa(7,i,n,t),i.lanes=e,i}function eC(i,t,e,n){return i=Xa(22,i,n,t),i.elementType=L8,i.lanes=e,i.stateNode={isHidden:!1},i}function MP(i,t,e){return i=Xa(6,i,null,t),i.lanes=e,i}function TP(i,t,e){return t=Xa(4,i.children!==null?i.children:[],i.key,t),t.lanes=e,t.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},t}function Ect(i,t,e,n,r){this.tag=t,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lP(0),this.expirationTimes=lP(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lP(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function E2(i,t,e,n,r,s,a,o,l){return i=new Ect(i,t,e,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Xa(3,null,null,t),i.current=s,s.stateNode=i,s.memoizedState={element:n,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},f2(s),i}function Rct(i,t,e){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pp,key:n==null?null:""+n,children:i,containerInfo:t,implementation:e}}function C7(i){if(!i)return rh;i=i._reactInternals;t:{if(lf(i)!==i||i.tag!==1)throw Error(Ct(170));var t=i;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Xs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(Ct(171))}if(i.tag===1){var e=i.type;if(Xs(e))return C6(i,e,t)}return t}function M7(i,t,e,n,r,s,a,o,l){return i=E2(e,n,!0,i,r,s,a,o,l),i.context=C7(null),e=i.current,n=ms(),r=Zc(e),s=ju(n,r),s.callback=t??null,Kc(e,s,r),i.current.lanes=r,rb(i,r,n),Ks(i,n),i}function iC(i,t,e,n){var r=t.current,s=ms(),a=Zc(r);return e=C7(e),t.context===null?t.context=e:t.pendingContext=e,t=ju(s,a),t.payload={element:i},n=n===void 0?null:n,n!==null&&(t.callback=n),i=Kc(r,t,a),i!==null&&(Go(i,r,a,s),XS(i,r,a)),a}function X1(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function d3(i,t){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var e=i.retryLane;i.retryLane=e!==0&&e<t?e:t}}function R2(i,t){d3(i,t),(i=i.alternate)&&d3(i,t)}function Oct(){return null}var T7=typeof reportError=="function"?reportError:function(i){console.error(i)};function O2(i){this._internalRoot=i}nC.prototype.render=O2.prototype.render=function(i){var t=this._internalRoot;if(t===null)throw Error(Ct(409));iC(i,t,null,null)};nC.prototype.unmount=O2.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var t=i.containerInfo;Ld(function(){iC(null,i,null,null)}),t[$u]=null}};function nC(i){this._internalRoot=i}nC.prototype.unstable_scheduleHydration=function(i){if(i){var t=s6();i={blockedOn:null,target:i,priority:t};for(var e=0;e<Mc.length&&t!==0&&t<Mc[e].priority;e++);Mc.splice(e,0,i),e===0&&o6(i)}};function D2(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function rC(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function f3(){}function Dct(i,t,e,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var u=X1(a);s.call(u)}}var a=M7(t,n,i,0,null,!1,!1,"",f3);return i._reactRootContainer=a,i[$u]=a.current,Ey(i.nodeType===8?i.parentNode:i),Ld(),a}for(;r=i.lastChild;)i.removeChild(r);if(typeof n=="function"){var o=n;n=function(){var u=X1(l);o.call(u)}}var l=E2(i,0,!1,null,null,!1,!1,"",f3);return i._reactRootContainer=l,i[$u]=l.current,Ey(i.nodeType===8?i.parentNode:i),Ld(function(){iC(t,l,e,n)}),l}function sC(i,t,e,n,r){var s=e._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=X1(a);o.call(l)}}iC(t,a,i,r)}else a=Dct(e,t,i,r,n);return X1(a)}n6=function(i){switch(i.tag){case 3:var t=i.stateNode;if(t.current.memoizedState.isDehydrated){var e=N_(t.pendingLanes);e!==0&&(QL(t,e|1),Ks(t,zn()),!(pi&6)&&(Dg=zn()+500,_h()))}break;case 13:Ld(function(){var n=Uu(i,1);if(n!==null){var r=ms();Go(n,i,1,r)}}),R2(i,1)}};JL=function(i){if(i.tag===13){var t=Uu(i,134217728);if(t!==null){var e=ms();Go(t,i,134217728,e)}R2(i,134217728)}};r6=function(i){if(i.tag===13){var t=Zc(i),e=Uu(i,t);if(e!==null){var n=ms();Go(e,i,t,n)}R2(i,t)}};s6=function(){return Di};a6=function(i,t){var e=Di;try{return Di=i,t()}finally{Di=e}};MR=function(i,t,e){switch(t){case"input":if(bR(i,e),t=e.name,e.type==="radio"&&t!=null){for(e=i;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var n=e[t];if(n!==i&&n.form===i.form){var r=Kk(n);if(!r)throw Error(Ct(90));F8(n),bR(n,r)}}}break;case"textarea":N8(i,e);break;case"select":t=e.value,t!=null&&Qp(i,!!e.multiple,t,!1)}};G8=C2;Y8=Ld;var Ict={usingClientEntryPoint:!1,Events:[ab,yp,Kk,$8,U8,C2]},u_={findFiberByHostInstance:td,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lct={bundleType:u_.bundleType,version:u_.version,rendererPackageName:u_.rendererPackageName,rendererConfig:u_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nc.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=q8(i),i===null?null:i.stateNode},findFiberByHostInstance:u_.findFiberByHostInstance||Oct,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rx.isDisabled&&Rx.supportsFiber)try{Uk=Rx.inject(Lct),Hl=Rx}catch{}}Ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ict;Ca.createPortal=function(i,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D2(t))throw Error(Ct(200));return Rct(i,t,null,e)};Ca.createRoot=function(i,t){if(!D2(i))throw Error(Ct(299));var e=!1,n="",r=T7;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=E2(i,1,!1,null,null,e,!1,n,r),i[$u]=t.current,Ey(i.nodeType===8?i.parentNode:i),new O2(t)};Ca.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var t=i._reactInternals;if(t===void 0)throw typeof i.render=="function"?Error(Ct(188)):(i=Object.keys(i).join(","),Error(Ct(268,i)));return i=q8(t),i=i===null?null:i.stateNode,i};Ca.flushSync=function(i){return Ld(i)};Ca.hydrate=function(i,t,e){if(!rC(t))throw Error(Ct(200));return sC(null,i,t,!0,e)};Ca.hydrateRoot=function(i,t,e){if(!D2(i))throw Error(Ct(405));var n=e!=null&&e.hydratedSources||null,r=!1,s="",a=T7;if(e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),t=M7(t,null,i,1,e??null,r,!1,s,a),i[$u]=t.current,Ey(i),n)for(i=0;i<n.length;i++)e=n[i],r=e._getVersion,r=r(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,r]:t.mutableSourceEagerHydrationData.push(e,r);return new nC(t)};Ca.render=function(i,t,e){if(!rC(t))throw Error(Ct(200));return sC(null,i,t,!1,e)};Ca.unmountComponentAtNode=function(i){if(!rC(i))throw Error(Ct(40));return i._reactRootContainer?(Ld(function(){sC(null,null,i,!1,function(){i._reactRootContainer=null,i[$u]=null})}),!0):!1};Ca.unstable_batchedUpdates=C2;Ca.unstable_renderSubtreeIntoContainer=function(i,t,e,n){if(!rC(e))throw Error(Ct(200));if(i==null||i._reactInternals===void 0)throw Error(Ct(38));return sC(i,t,e,!1,n)};Ca.version="18.3.1-next-f1338f8080-20240426";function P7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(P7)}catch(i){console.error(i)}}P7(),P8.exports=Ca;var rc=P8.exports;const E7=ib(rc),Bct=_8({__proto__:null,default:E7},[rc]);var Fct,p3=rc;Fct=lj.createRoot=p3.createRoot,lj.hydrateRoot=p3.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ji(){return Ji=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ji.apply(this,arguments)}var Gn;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Gn||(Gn={}));const g3="popstate";function zct(i){i===void 0&&(i={});function t(n,r){let{pathname:s,search:a,hash:o}=n.location;return Ny("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function e(n,r){return typeof r=="string"?r:Fd(r)}return jct(t,e,null,i)}function Qe(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function Bd(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Nct(){return Math.random().toString(36).substr(2,8)}function m3(i,t){return{usr:i.state,key:i.key,idx:t}}function Ny(i,t,e,n){return e===void 0&&(e=null),Ji({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof t=="string"?vh(t):t,{state:e,key:t&&t.key||n||Nct()})}function Fd(i){let{pathname:t="/",search:e="",hash:n=""}=i;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function vh(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substr(e),i=i.substr(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substr(n),i=i.substr(0,n)),i&&(t.pathname=i)}return t}function jct(i,t,e,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:s=!1}=n,a=r.history,o=Gn.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(Ji({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function h(){o=Gn.Pop;let m=c(),_=m==null?null:m-u;u=m,l&&l({action:o,location:g.location,delta:_})}function d(m,_){o=Gn.Push;let v=Ny(g.location,m,_);u=c()+1;let y=m3(v,u),b=g.createHref(v);try{a.pushState(y,"",b)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;r.location.assign(b)}s&&l&&l({action:o,location:g.location,delta:1})}function f(m,_){o=Gn.Replace;let v=Ny(g.location,m,_);u=c();let y=m3(v,u),b=g.createHref(v);a.replaceState(y,"",b),s&&l&&l({action:o,location:g.location,delta:0})}function p(m){let _=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof m=="string"?m:Fd(m);return v=v.replace(/ $/,"%20"),Qe(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let g={get action(){return o},get location(){return i(r,a)},listen(m){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(g3,h),l=m,()=>{r.removeEventListener(g3,h),l=null}},createHref(m){return t(r,m)},createURL:p,encodeLocation(m){let _=p(m);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:d,replace:f,go(m){return a.go(m)}};return g}var Ei;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Ei||(Ei={}));const Hct=new Set(["lazy","caseSensitive","path","id","index","children"]);function Vct(i){return i.index===!0}function K1(i,t,e,n){return e===void 0&&(e=[]),n===void 0&&(n={}),i.map((r,s)=>{let a=[...e,String(s)],o=typeof r.id=="string"?r.id:a.join("-");if(Qe(r.index!==!0||!r.children,"Cannot specify children on an index route"),Qe(!n[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),Vct(r)){let l=Ji({},r,t(r),{id:o});return n[o]=l,l}else{let l=Ji({},r,t(r),{id:o,children:void 0});return n[o]=l,r.children&&(l.children=K1(r.children,t,a,n)),l}})}function Kh(i,t,e){return e===void 0&&(e="/"),e1(i,t,e,!1)}function e1(i,t,e,n){let r=typeof t=="string"?vh(t):t,s=ym(r.pathname||"/",e);if(s==null)return null;let a=R7(i);$ct(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=eht(s);o=Jct(a[l],u,n)}return o}function Wct(i,t){let{route:e,pathname:n,params:r}=i;return{id:e.id,pathname:n,params:r,data:t[e.id],handle:e.handle}}function R7(i,t,e,n){t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n="");let r=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Qe(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=Hu([n,l.relativePath]),c=e.concat(l);s.children&&s.children.length>0&&(Qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),R7(s.children,t,c,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:Zct(u,s.index),routesMeta:c})};return i.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))r(s,a);else for(let l of O7(s.path))r(s,a,l)}),t}function O7(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,r=e.endsWith("?"),s=e.replace(/\?$/,"");if(n.length===0)return r?[s,""]:[s];let a=O7(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>i.startsWith("/")&&l===""?"/":l)}function $ct(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:Qct(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}const Uct=/^:[\w-]+$/,Gct=3,Yct=2,Xct=1,Kct=10,qct=-2,_3=i=>i==="*";function Zct(i,t){let e=i.split("/"),n=e.length;return e.some(_3)&&(n+=qct),t&&(n+=Yct),e.filter(r=>!_3(r)).reduce((r,s)=>r+(Uct.test(s)?Gct:s===""?Xct:Kct),n)}function Qct(i,t){return i.length===t.length&&i.slice(0,-1).every((n,r)=>n===t[r])?i[i.length-1]-t[t.length-1]:0}function Jct(i,t,e){e===void 0&&(e=!1);let{routesMeta:n}=i,r={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,c=s==="/"?t:t.slice(s.length)||"/",h=v3({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),d=l.route;if(!h&&u&&e&&!n[n.length-1].route.index&&(h=v3({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(r,h.params),a.push({params:r,pathname:Hu([s,h.pathname]),pathnameBase:sht(Hu([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=Hu([s,h.pathnameBase]))}return a}function v3(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=tht(i.path,i.caseSensitive,i.end),r=t.match(e);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:n.reduce((u,c,h)=>{let{paramName:d,isOptional:f}=c;if(d==="*"){let g=o[h]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[h];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:i}}function tht(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),Bd(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),n]}function eht(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bd(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),i}}function ym(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}const iht=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nht=i=>iht.test(i);function rht(i,t){t===void 0&&(t="/");let{pathname:e,search:n="",hash:r=""}=typeof i=="string"?vh(i):i,s;if(e)if(nht(e))s=e;else{if(e.includes("//")){let a=e;e=e.replace(/\/\/+/g,"/"),Bd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+e))}e.startsWith("/")?s=y3(e.substring(1),"/"):s=y3(e,t)}else s=t;return{pathname:s,search:aht(n),hash:oht(r)}}function y3(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function PP(i,t,e,n){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function D7(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function aC(i,t){let e=D7(i);return t?e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase):e.map(n=>n.pathnameBase)}function oC(i,t,e,n){n===void 0&&(n=!1);let r;typeof i=="string"?r=vh(i):(r=Ji({},i),Qe(!r.pathname||!r.pathname.includes("?"),PP("?","pathname","search",r)),Qe(!r.pathname||!r.pathname.includes("#"),PP("#","pathname","hash",r)),Qe(!r.search||!r.search.includes("#"),PP("#","search","hash",r)));let s=i===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=e;else{let h=t.length-1;if(!n&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),h-=1;r.pathname=d.join("/")}o=h>=0?t[h]:"/"}let l=rht(r,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Hu=i=>i.join("/").replace(/\/\/+/g,"/"),sht=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),aht=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,oht=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;class q1{constructor(t,e,n,r){r===void 0&&(r=!1),this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function jy(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const I7=["post","put","patch","delete"],lht=new Set(I7),uht=["get",...I7],cht=new Set(uht),hht=new Set([301,302,303,307,308]),dht=new Set([307,308]),EP={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fht={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},c_={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},I2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pht=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),L7="remix-router-transitions";function ght(i){const t=i.window?i.window:typeof window<"u"?window:void 0,e=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!e;Qe(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(i.mapRouteProperties)r=i.mapRouteProperties;else if(i.detectErrorBoundary){let G=i.detectErrorBoundary;r=tt=>({hasErrorBoundary:G(tt)})}else r=pht;let s={},a=K1(i.routes,r,void 0,s),o,l=i.basename||"/",u=i.dataStrategy||yht,c=i.patchRoutesOnNavigation,h=Ji({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},i.future),d=null,f=new Set,p=null,g=null,m=null,_=i.hydrationData!=null,v=Kh(a,i.history.location,l),y=!1,b=null;if(v==null&&!c){let G=Bs(404,{pathname:i.history.location.pathname}),{matches:tt,route:ht}=E3(a);v=tt,b={[ht.id]:G}}v&&!i.hydrationData&&yr(v,a,i.history.location.pathname).active&&(v=null);let x;if(v)if(v.some(G=>G.route.lazy))x=!1;else if(!v.some(G=>G.route.loader))x=!0;else if(h.v7_partialHydration){let G=i.hydrationData?i.hydrationData.loaderData:null,tt=i.hydrationData?i.hydrationData.errors:null;if(tt){let ht=v.findIndex(At=>tt[At.route.id]!==void 0);x=v.slice(0,ht+1).every(At=>!oO(At.route,G,tt))}else x=v.every(ht=>!oO(ht.route,G,tt))}else x=i.hydrationData!=null;else if(x=!1,v=[],h.v7_partialHydration){let G=yr(null,a,i.history.location.pathname);G.active&&G.matches&&(y=!0,v=G.matches)}let S,w={historyAction:i.history.action,location:i.history.location,matches:v,initialized:x,navigation:EP,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||b,fetchers:new Map,blockers:new Map},A=Gn.Pop,k=!1,C,M=!1,R=new Map,P=null,O=!1,T=!1,D=[],B=new Set,I=new Map,F=0,j=-1,H=new Map,U=new Set,K=new Map,q=new Map,Z=new Set,at=new Map,$=new Map,ft;function pt(){if(d=i.history.listen(G=>{let{action:tt,location:ht,delta:At}=G;if(ft){ft(),ft=void 0;return}Bd($.size===0||At!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ft=Zt({currentLocation:w.location,nextLocation:ht,historyAction:tt});if(Ft&&At!=null){let ce=new Promise(we=>{ft=we});i.history.go(At*-1),kt(Ft,{state:"blocked",location:ht,proceed(){kt(Ft,{state:"proceeding",proceed:void 0,reset:void 0,location:ht}),ce.then(()=>i.history.go(At))},reset(){let we=new Map(w.blockers);we.set(Ft,c_),mt({blockers:we})}});return}return Pt(tt,ht)}),e){Dht(t,R);let G=()=>Iht(t,R);t.addEventListener("pagehide",G),P=()=>t.removeEventListener("pagehide",G)}return w.initialized||Pt(Gn.Pop,w.location,{initialHydration:!0}),S}function rt(){d&&d(),P&&P(),f.clear(),C&&C.abort(),w.fetchers.forEach((G,tt)=>ai(tt)),w.blockers.forEach((G,tt)=>vr(tt))}function gt(G){return f.add(G),()=>f.delete(G)}function mt(G,tt){tt===void 0&&(tt={}),w=Ji({},w,G);let ht=[],At=[];h.v7_fetcherPersist&&w.fetchers.forEach((Ft,ce)=>{Ft.state==="idle"&&(Z.has(ce)?At.push(ce):ht.push(ce))}),Z.forEach(Ft=>{!w.fetchers.has(Ft)&&!I.has(Ft)&&At.push(Ft)}),[...f].forEach(Ft=>Ft(w,{deletedFetchers:At,viewTransitionOpts:tt.viewTransitionOpts,flushSync:tt.flushSync===!0})),h.v7_fetcherPersist?(ht.forEach(Ft=>w.fetchers.delete(Ft)),At.forEach(Ft=>ai(Ft))):At.forEach(Ft=>Z.delete(Ft))}function Dt(G,tt,ht){var At,Ft;let{flushSync:ce}=ht===void 0?{}:ht,we=w.actionData!=null&&w.navigation.formMethod!=null&&Co(w.navigation.formMethod)&&w.navigation.state==="loading"&&((At=G.state)==null?void 0:At._isRedirect)!==!0,Jt;tt.actionData?Object.keys(tt.actionData).length>0?Jt=tt.actionData:Jt=null:we?Jt=w.actionData:Jt=null;let ne=tt.loaderData?T3(w.loaderData,tt.loaderData,tt.matches||[],tt.errors):w.loaderData,Yt=w.blockers;Yt.size>0&&(Yt=new Map(Yt),Yt.forEach((li,Pr)=>Yt.set(Pr,c_)));let ae=k===!0||w.navigation.formMethod!=null&&Co(w.navigation.formMethod)&&((Ft=G.state)==null?void 0:Ft._isRedirect)!==!0;o&&(a=o,o=void 0),O||A===Gn.Pop||(A===Gn.Push?i.history.push(G,G.state):A===Gn.Replace&&i.history.replace(G,G.state));let Fe;if(A===Gn.Pop){let li=R.get(w.location.pathname);li&&li.has(G.pathname)?Fe={currentLocation:w.location,nextLocation:G}:R.has(G.pathname)&&(Fe={currentLocation:G,nextLocation:w.location})}else if(M){let li=R.get(w.location.pathname);li?li.add(G.pathname):(li=new Set([G.pathname]),R.set(w.location.pathname,li)),Fe={currentLocation:w.location,nextLocation:G}}mt(Ji({},tt,{actionData:Jt,loaderData:ne,historyAction:A,location:G,initialized:!0,navigation:EP,revalidation:"idle",restoreScrollPosition:na(G,tt.matches||w.matches),preventScrollReset:ae,blockers:Yt}),{viewTransitionOpts:Fe,flushSync:ce===!0}),A=Gn.Pop,k=!1,M=!1,O=!1,T=!1,D=[]}async function St(G,tt){if(typeof G=="number"){i.history.go(G);return}let ht=aO(w.location,w.matches,l,h.v7_prependBasename,G,h.v7_relativeSplatPath,tt?.fromRouteId,tt?.relative),{path:At,submission:Ft,error:ce}=b3(h.v7_normalizeFormMethod,!1,ht,tt),we=w.location,Jt=Ny(w.location,At,tt&&tt.state);Jt=Ji({},Jt,i.history.encodeLocation(Jt));let ne=tt&&tt.replace!=null?tt.replace:void 0,Yt=Gn.Push;ne===!0?Yt=Gn.Replace:ne===!1||Ft!=null&&Co(Ft.formMethod)&&Ft.formAction===w.location.pathname+w.location.search&&(Yt=Gn.Replace);let ae=tt&&"preventScrollReset"in tt?tt.preventScrollReset===!0:void 0,Fe=(tt&&tt.flushSync)===!0,li=Zt({currentLocation:we,nextLocation:Jt,historyAction:Yt});if(li){kt(li,{state:"blocked",location:Jt,proceed(){kt(li,{state:"proceeding",proceed:void 0,reset:void 0,location:Jt}),St(G,tt)},reset(){let Pr=new Map(w.blockers);Pr.set(li,c_),mt({blockers:Pr})}});return}return await Pt(Yt,Jt,{submission:Ft,pendingError:ce,preventScrollReset:ae,replace:tt&&tt.replace,enableViewTransition:tt&&tt.viewTransition,flushSync:Fe})}function Ot(){if(pe(),mt({revalidation:"loading"}),w.navigation.state!=="submitting"){if(w.navigation.state==="idle"){Pt(w.historyAction,w.location,{startUninterruptedRevalidation:!0});return}Pt(A||w.historyAction,w.navigation.location,{overrideNavigation:w.navigation,enableViewTransition:M===!0})}}async function Pt(G,tt,ht){C&&C.abort(),C=null,A=G,O=(ht&&ht.startUninterruptedRevalidation)===!0,nr(w.location,w.matches),k=(ht&&ht.preventScrollReset)===!0,M=(ht&&ht.enableViewTransition)===!0;let At=o||a,Ft=ht&&ht.overrideNavigation,ce=ht!=null&&ht.initialHydration&&w.matches&&w.matches.length>0&&!y?w.matches:Kh(At,tt,l),we=(ht&&ht.flushSync)===!0;if(ce&&w.initialized&&!T&&kht(w.location,tt)&&!(ht&&ht.submission&&Co(ht.submission.formMethod))){Dt(tt,{matches:ce},{flushSync:we});return}let Jt=yr(ce,At,tt.pathname);if(Jt.active&&Jt.matches&&(ce=Jt.matches),!ce){let{error:ji,notFoundMatches:wi,route:bn}=Nt(tt.pathname);Dt(tt,{matches:wi,loaderData:{},errors:{[bn.id]:ji}},{flushSync:we});return}C=new AbortController;let ne=If(i.history,tt,C.signal,ht&&ht.submission),Yt;if(ht&&ht.pendingError)Yt=[qh(ce).route.id,{type:Ei.error,error:ht.pendingError}];else if(ht&&ht.submission&&Co(ht.submission.formMethod)){let ji=await _e(ne,tt,ht.submission,ce,Jt.active,{replace:ht.replace,flushSync:we});if(ji.shortCircuited)return;if(ji.pendingActionResult){let[wi,bn]=ji.pendingActionResult;if(ca(bn)&&jy(bn.error)&&bn.error.status===404){C=null,Dt(tt,{matches:ji.matches,loaderData:{},errors:{[wi]:bn.error}});return}}ce=ji.matches||ce,Yt=ji.pendingActionResult,Ft=RP(tt,ht.submission),we=!1,Jt.active=!1,ne=If(i.history,ne.url,ne.signal)}let{shortCircuited:ae,matches:Fe,loaderData:li,errors:Pr}=await Ze(ne,tt,ce,Jt.active,Ft,ht&&ht.submission,ht&&ht.fetcherSubmission,ht&&ht.replace,ht&&ht.initialHydration===!0,we,Yt);ae||(C=null,Dt(tt,Ji({matches:Fe||ce},P3(Yt),{loaderData:li,errors:Pr})))}async function _e(G,tt,ht,At,Ft,ce){ce===void 0&&(ce={}),pe();let we=Rht(tt,ht);if(mt({navigation:we},{flushSync:ce.flushSync===!0}),Ft){let Yt=await Wr(At,tt.pathname,G.signal);if(Yt.type==="aborted")return{shortCircuited:!0};if(Yt.type==="error"){let ae=qh(Yt.partialMatches).route.id;return{matches:Yt.partialMatches,pendingActionResult:[ae,{type:Ei.error,error:Yt.error}]}}else if(Yt.matches)At=Yt.matches;else{let{notFoundMatches:ae,error:Fe,route:li}=Nt(tt.pathname);return{matches:ae,pendingActionResult:[li.id,{type:Ei.error,error:Fe}]}}}let Jt,ne=H_(At,tt);if(!ne.route.action&&!ne.route.lazy)Jt={type:Ei.error,error:Bs(405,{method:G.method,pathname:tt.pathname,routeId:ne.route.id})};else if(Jt=(await dt("action",w,G,[ne],At,null))[ne.route.id],G.signal.aborted)return{shortCircuited:!0};if(nd(Jt)){let Yt;return ce&&ce.replace!=null?Yt=ce.replace:Yt=k3(Jt.response.headers.get("Location"),new URL(G.url),l)===w.location.pathname+w.location.search,await xt(G,Jt,!0,{submission:ht,replace:Yt}),{shortCircuited:!0}}if(Ic(Jt))throw Bs(400,{type:"defer-action"});if(ca(Jt)){let Yt=qh(At,ne.route.id);return(ce&&ce.replace)!==!0&&(A=Gn.Push),{matches:At,pendingActionResult:[Yt.route.id,Jt]}}return{matches:At,pendingActionResult:[ne.route.id,Jt]}}async function Ze(G,tt,ht,At,Ft,ce,we,Jt,ne,Yt,ae){let Fe=Ft||RP(tt,ce),li=ce||we||O3(Fe),Pr=!O&&(!h.v7_partialHydration||!ne);if(At){if(Pr){let xn=It(ae);mt(Ji({navigation:Fe},xn!==void 0?{actionData:xn}:{}),{flushSync:Yt})}let gi=await Wr(ht,tt.pathname,G.signal);if(gi.type==="aborted")return{shortCircuited:!0};if(gi.type==="error"){let xn=qh(gi.partialMatches).route.id;return{matches:gi.partialMatches,loaderData:{},errors:{[xn]:gi.error}}}else if(gi.matches)ht=gi.matches;else{let{error:xn,notFoundMatches:Rf,route:e_}=Nt(tt.pathname);return{matches:Rf,loaderData:{},errors:{[e_.id]:xn}}}}let ji=o||a,[wi,bn]=S3(i.history,w,ht,li,tt,h.v7_partialHydration&&ne===!0,h.v7_skipActionErrorRevalidation,T,D,B,Z,K,U,ji,l,ae);if(Ut(gi=>!(ht&&ht.some(xn=>xn.route.id===gi))||wi&&wi.some(xn=>xn.route.id===gi)),j=++F,wi.length===0&&bn.length===0){let gi=_r();return Dt(tt,Ji({matches:ht,loaderData:{},errors:ae&&ca(ae[1])?{[ae[0]]:ae[1].error}:null},P3(ae),gi?{fetchers:new Map(w.fetchers)}:{}),{flushSync:Yt}),{shortCircuited:!0}}if(Pr){let gi={};if(!At){gi.navigation=Fe;let xn=It(ae);xn!==void 0&&(gi.actionData=xn)}bn.length>0&&(gi.fetchers=W(bn)),mt(gi,{flushSync:Yt})}bn.forEach(gi=>{Se(gi.key),gi.controller&&I.set(gi.key,gi.controller)});let Ef=()=>bn.forEach(gi=>Se(gi.key));C&&C.signal.addEventListener("abort",Ef);let{loaderResults:Jm,fetcherResults:su}=await jt(w,ht,wi,bn,G);if(G.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",Ef),bn.forEach(gi=>I.delete(gi.key));let sl=Ox(Jm);if(sl)return await xt(G,sl.result,!0,{replace:Jt}),{shortCircuited:!0};if(sl=Ox(su),sl)return U.add(sl.key),await xt(G,sl.result,!0,{replace:Jt}),{shortCircuited:!0};let{loaderData:iP,errors:t_}=M3(w,ht,Jm,ae,bn,su,at);at.forEach((gi,xn)=>{gi.subscribe(Rf=>{(Rf||gi.done)&&at.delete(xn)})}),h.v7_partialHydration&&ne&&w.errors&&(t_=Ji({},w.errors,t_));let Lh=_r(),fx=us(j),px=Lh||fx||bn.length>0;return Ji({matches:ht,loaderData:iP,errors:t_},px?{fetchers:new Map(w.fetchers)}:{})}function It(G){if(G&&!ca(G[1]))return{[G[0]]:G[1].data};if(w.actionData)return Object.keys(w.actionData).length===0?null:w.actionData}function W(G){return G.forEach(tt=>{let ht=w.fetchers.get(tt.key),At=h_(void 0,ht?ht.data:void 0);w.fetchers.set(tt.key,At)}),new Map(w.fetchers)}function Q(G,tt,ht,At){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Se(G);let Ft=(At&&At.flushSync)===!0,ce=o||a,we=aO(w.location,w.matches,l,h.v7_prependBasename,ht,h.v7_relativeSplatPath,tt,At?.relative),Jt=Kh(ce,we,l),ne=yr(Jt,ce,we);if(ne.active&&ne.matches&&(Jt=ne.matches),!Jt){We(G,tt,Bs(404,{pathname:we}),{flushSync:Ft});return}let{path:Yt,submission:ae,error:Fe}=b3(h.v7_normalizeFormMethod,!0,we,At);if(Fe){We(G,tt,Fe,{flushSync:Ft});return}let li=H_(Jt,Yt),Pr=(At&&At.preventScrollReset)===!0;if(ae&&Co(ae.formMethod)){nt(G,tt,Yt,li,Jt,ne.active,Ft,Pr,ae);return}K.set(G,{routeId:tt,path:Yt}),wt(G,tt,Yt,li,Jt,ne.active,Ft,Pr,ae)}async function nt(G,tt,ht,At,Ft,ce,we,Jt,ne){pe(),K.delete(G);function Yt($n){if(!$n.route.action&&!$n.route.lazy){let Of=Bs(405,{method:ne.formMethod,pathname:ht,routeId:tt});return We(G,tt,Of,{flushSync:we}),!0}return!1}if(!ce&&Yt(At))return;let ae=w.fetchers.get(G);me(G,Oht(ne,ae),{flushSync:we});let Fe=new AbortController,li=If(i.history,ht,Fe.signal,ne);if(ce){let $n=await Wr(Ft,new URL(li.url).pathname,li.signal,G);if($n.type==="aborted")return;if($n.type==="error"){We(G,tt,$n.error,{flushSync:we});return}else if($n.matches){if(Ft=$n.matches,At=H_(Ft,ht),Yt(At))return}else{We(G,tt,Bs(404,{pathname:ht}),{flushSync:we});return}}I.set(G,Fe);let Pr=F,wi=(await dt("action",w,li,[At],Ft,G))[At.route.id];if(li.signal.aborted){I.get(G)===Fe&&I.delete(G);return}if(h.v7_fetcherPersist&&Z.has(G)){if(nd(wi)||ca(wi)){me(G,vc(void 0));return}}else{if(nd(wi))if(I.delete(G),j>Pr){me(G,vc(void 0));return}else return U.add(G),me(G,h_(ne)),xt(li,wi,!1,{fetcherSubmission:ne,preventScrollReset:Jt});if(ca(wi)){We(G,tt,wi.error);return}}if(Ic(wi))throw Bs(400,{type:"defer-action"});let bn=w.navigation.location||w.location,Ef=If(i.history,bn,Fe.signal),Jm=o||a,su=w.navigation.state!=="idle"?Kh(Jm,w.navigation.location,l):w.matches;Qe(su,"Didn't find any matches after fetcher action");let sl=++F;H.set(G,sl);let iP=h_(ne,wi.data);w.fetchers.set(G,iP);let[t_,Lh]=S3(i.history,w,su,ne,bn,!1,h.v7_skipActionErrorRevalidation,T,D,B,Z,K,U,Jm,l,[At.route.id,wi]);Lh.filter($n=>$n.key!==G).forEach($n=>{let Of=$n.key,rj=w.fetchers.get(Of),ult=h_(void 0,rj?rj.data:void 0);w.fetchers.set(Of,ult),Se(Of),$n.controller&&I.set(Of,$n.controller)}),mt({fetchers:new Map(w.fetchers)});let fx=()=>Lh.forEach($n=>Se($n.key));Fe.signal.addEventListener("abort",fx);let{loaderResults:px,fetcherResults:gi}=await jt(w,su,t_,Lh,Ef);if(Fe.signal.aborted)return;Fe.signal.removeEventListener("abort",fx),H.delete(G),I.delete(G),Lh.forEach($n=>I.delete($n.key));let xn=Ox(px);if(xn)return xt(Ef,xn.result,!1,{preventScrollReset:Jt});if(xn=Ox(gi),xn)return U.add(xn.key),xt(Ef,xn.result,!1,{preventScrollReset:Jt});let{loaderData:Rf,errors:e_}=M3(w,su,px,void 0,Lh,gi,at);if(w.fetchers.has(G)){let $n=vc(wi.data);w.fetchers.set(G,$n)}us(sl),w.navigation.state==="loading"&&sl>j?(Qe(A,"Expected pending action"),C&&C.abort(),Dt(w.navigation.location,{matches:su,loaderData:Rf,errors:e_,fetchers:new Map(w.fetchers)})):(mt({errors:e_,loaderData:T3(w.loaderData,Rf,su,e_),fetchers:new Map(w.fetchers)}),T=!1)}async function wt(G,tt,ht,At,Ft,ce,we,Jt,ne){let Yt=w.fetchers.get(G);me(G,h_(ne,Yt?Yt.data:void 0),{flushSync:we});let ae=new AbortController,Fe=If(i.history,ht,ae.signal);if(ce){let wi=await Wr(Ft,new URL(Fe.url).pathname,Fe.signal,G);if(wi.type==="aborted")return;if(wi.type==="error"){We(G,tt,wi.error,{flushSync:we});return}else if(wi.matches)Ft=wi.matches,At=H_(Ft,ht);else{We(G,tt,Bs(404,{pathname:ht}),{flushSync:we});return}}I.set(G,ae);let li=F,ji=(await dt("loader",w,Fe,[At],Ft,G))[At.route.id];if(Ic(ji)&&(ji=await L2(ji,Fe.signal,!0)||ji),I.get(G)===ae&&I.delete(G),!Fe.signal.aborted){if(Z.has(G)){me(G,vc(void 0));return}if(nd(ji))if(j>li){me(G,vc(void 0));return}else{U.add(G),await xt(Fe,ji,!1,{preventScrollReset:Jt});return}if(ca(ji)){We(G,tt,ji.error);return}Qe(!Ic(ji),"Unhandled fetcher deferred data"),me(G,vc(ji.data))}}async function xt(G,tt,ht,At){let{submission:Ft,fetcherSubmission:ce,preventScrollReset:we,replace:Jt}=At===void 0?{}:At;tt.response.headers.has("X-Remix-Revalidate")&&(T=!0);let ne=tt.response.headers.get("Location");Qe(ne,"Expected a Location header on the redirect Response"),ne=k3(ne,new URL(G.url),l);let Yt=Ny(w.location,ne,{_isRedirect:!0});if(e){let wi=!1;if(tt.response.headers.has("X-Remix-Reload-Document"))wi=!0;else if(I2.test(ne)){const bn=i.history.createURL(ne);wi=bn.origin!==t.location.origin||ym(bn.pathname,l)==null}if(wi){Jt?t.location.replace(ne):t.location.assign(ne);return}}C=null;let ae=Jt===!0||tt.response.headers.has("X-Remix-Replace")?Gn.Replace:Gn.Push,{formMethod:Fe,formAction:li,formEncType:Pr}=w.navigation;!Ft&&!ce&&Fe&&li&&Pr&&(Ft=O3(w.navigation));let ji=Ft||ce;if(dht.has(tt.response.status)&&ji&&Co(ji.formMethod))await Pt(ae,Yt,{submission:Ji({},ji,{formAction:ne}),preventScrollReset:we||k,enableViewTransition:ht?M:void 0});else{let wi=RP(Yt,Ft);await Pt(ae,Yt,{overrideNavigation:wi,fetcherSubmission:ce,preventScrollReset:we||k,enableViewTransition:ht?M:void 0})}}async function dt(G,tt,ht,At,Ft,ce){let we,Jt={};try{we=await bht(u,G,tt,ht,At,Ft,ce,s,r)}catch(ne){return At.forEach(Yt=>{Jt[Yt.route.id]={type:Ei.error,error:ne}}),Jt}for(let[ne,Yt]of Object.entries(we))if(Cht(Yt)){let ae=Yt.result;Jt[ne]={type:Ei.redirect,response:wht(ae,ht,ne,Ft,l,h.v7_relativeSplatPath)}}else Jt[ne]=await Sht(Yt);return Jt}async function jt(G,tt,ht,At,Ft){let ce=G.matches,we=dt("loader",G,Ft,ht,tt,null),Jt=Promise.all(At.map(async ae=>{if(ae.matches&&ae.match&&ae.controller){let li=(await dt("loader",G,If(i.history,ae.path,ae.controller.signal),[ae.match],ae.matches,ae.key))[ae.match.route.id];return{[ae.key]:li}}else return Promise.resolve({[ae.key]:{type:Ei.error,error:Bs(404,{pathname:ae.path})}})})),ne=await we,Yt=(await Jt).reduce((ae,Fe)=>Object.assign(ae,Fe),{});return await Promise.all([Pht(tt,ne,Ft.signal,ce,G.loaderData),Eht(tt,Yt,At)]),{loaderResults:ne,fetcherResults:Yt}}function pe(){T=!0,D.push(...Ut()),K.forEach((G,tt)=>{I.has(tt)&&B.add(tt),Se(tt)})}function me(G,tt,ht){ht===void 0&&(ht={}),w.fetchers.set(G,tt),mt({fetchers:new Map(w.fetchers)},{flushSync:(ht&&ht.flushSync)===!0})}function We(G,tt,ht,At){At===void 0&&(At={});let Ft=qh(w.matches,tt);ai(G),mt({errors:{[Ft.route.id]:ht},fetchers:new Map(w.fetchers)},{flushSync:(At&&At.flushSync)===!0})}function Si(G){return q.set(G,(q.get(G)||0)+1),Z.has(G)&&Z.delete(G),w.fetchers.get(G)||fht}function ai(G){let tt=w.fetchers.get(G);I.has(G)&&!(tt&&tt.state==="loading"&&H.has(G))&&Se(G),K.delete(G),H.delete(G),U.delete(G),h.v7_fetcherPersist&&Z.delete(G),B.delete(G),w.fetchers.delete(G)}function Ln(G){let tt=(q.get(G)||0)-1;tt<=0?(q.delete(G),Z.add(G),h.v7_fetcherPersist||ai(G)):q.set(G,tt),mt({fetchers:new Map(w.fetchers)})}function Se(G){let tt=I.get(G);tt&&(tt.abort(),I.delete(G))}function Ni(G){for(let tt of G){let ht=Si(tt),At=vc(ht.data);w.fetchers.set(tt,At)}}function _r(){let G=[],tt=!1;for(let ht of U){let At=w.fetchers.get(ht);Qe(At,"Expected fetcher: "+ht),At.state==="loading"&&(U.delete(ht),G.push(ht),tt=!0)}return Ni(G),tt}function us(G){let tt=[];for(let[ht,At]of H)if(At<G){let Ft=w.fetchers.get(ht);Qe(Ft,"Expected fetcher: "+ht),Ft.state==="loading"&&(Se(ht),H.delete(ht),tt.push(ht))}return Ni(tt),tt.length>0}function Pa(G,tt){let ht=w.blockers.get(G)||c_;return $.get(G)!==tt&&$.set(G,tt),ht}function vr(G){w.blockers.delete(G),$.delete(G)}function kt(G,tt){let ht=w.blockers.get(G)||c_;Qe(ht.state==="unblocked"&&tt.state==="blocked"||ht.state==="blocked"&&tt.state==="blocked"||ht.state==="blocked"&&tt.state==="proceeding"||ht.state==="blocked"&&tt.state==="unblocked"||ht.state==="proceeding"&&tt.state==="unblocked","Invalid blocker state transition: "+ht.state+" -> "+tt.state);let At=new Map(w.blockers);At.set(G,tt),mt({blockers:At})}function Zt(G){let{currentLocation:tt,nextLocation:ht,historyAction:At}=G;if($.size===0)return;$.size>1&&Bd(!1,"A router only supports one blocker at a time");let Ft=Array.from($.entries()),[ce,we]=Ft[Ft.length-1],Jt=w.blockers.get(ce);if(!(Jt&&Jt.state==="proceeding")&&we({currentLocation:tt,nextLocation:ht,historyAction:At}))return ce}function Nt(G){let tt=Bs(404,{pathname:G}),ht=o||a,{matches:At,route:Ft}=E3(ht);return Ut(),{notFoundMatches:At,route:Ft,error:tt}}function Ut(G){let tt=[];return at.forEach((ht,At)=>{(!G||G(At))&&(ht.cancel(),tt.push(At),at.delete(At))}),tt}function oi(G,tt,ht){if(p=G,m=tt,g=ht||null,!_&&w.navigation===EP){_=!0;let At=na(w.location,w.matches);At!=null&&mt({restoreScrollPosition:At})}return()=>{p=null,m=null,g=null}}function fe(G,tt){return g&&g(G,tt.map(At=>Wct(At,w.loaderData)))||G.key}function nr(G,tt){if(p&&m){let ht=fe(G,tt);p[ht]=m()}}function na(G,tt){if(p){let ht=fe(G,tt),At=p[ht];if(typeof At=="number")return At}return null}function yr(G,tt,ht){if(c)if(G){if(Object.keys(G[0].params).length>0)return{active:!0,matches:e1(tt,ht,l,!0)}}else return{active:!0,matches:e1(tt,ht,l,!0)||[]};return{active:!1,matches:null}}async function Wr(G,tt,ht,At){if(!c)return{type:"success",matches:G};let Ft=G;for(;;){let ce=o==null,we=o||a,Jt=s;try{await c({signal:ht,path:tt,matches:Ft,fetcherKey:At,patch:(ae,Fe)=>{ht.aborted||A3(ae,Fe,we,Jt,r)}})}catch(ae){return{type:"error",error:ae,partialMatches:Ft}}finally{ce&&!ht.aborted&&(a=[...a])}if(ht.aborted)return{type:"aborted"};let ne=Kh(we,tt,l);if(ne)return{type:"success",matches:ne};let Yt=e1(we,tt,l,!0);if(!Yt||Ft.length===Yt.length&&Ft.every((ae,Fe)=>ae.route.id===Yt[Fe].route.id))return{type:"success",matches:null};Ft=Yt}}function Rs(G){s={},o=K1(G,r,void 0,s)}function Ea(G,tt){let ht=o==null;A3(G,tt,o||a,s,r),ht&&(a=[...a],mt({}))}return S={get basename(){return l},get future(){return h},get state(){return w},get routes(){return a},get window(){return t},initialize:pt,subscribe:gt,enableScrollRestoration:oi,navigate:St,fetch:Q,revalidate:Ot,createHref:G=>i.history.createHref(G),encodeLocation:G=>i.history.encodeLocation(G),getFetcher:Si,deleteFetcher:Ln,dispose:rt,getBlocker:Pa,deleteBlocker:vr,patchRoutes:Ea,_internalFetchControllers:I,_internalActiveDeferreds:at,_internalSetRoutes:Rs},S}function mht(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function aO(i,t,e,n,r,s,a,o){let l,u;if(a){l=[];for(let h of t)if(l.push(h),h.route.id===a){u=h;break}}else l=t,u=t[t.length-1];let c=oC(r||".",aC(l,s),ym(i.pathname,e)||i.pathname,o==="path");if(r==null&&(c.search=i.search,c.hash=i.hash),(r==null||r===""||r===".")&&u){let h=B2(c.search);if(u.route.index&&!h)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&h){let d=new URLSearchParams(c.search),f=d.getAll("index");d.delete("index"),f.filter(g=>g).forEach(g=>d.append("index",g));let p=d.toString();c.search=p?"?"+p:""}}return n&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Hu([e,c.pathname])),Fd(c)}function b3(i,t,e,n){if(!n||!mht(n))return{path:e};if(n.formMethod&&!Tht(n.formMethod))return{path:e,error:Bs(405,{method:n.formMethod})};let r=()=>({path:e,error:Bs(400,{type:"invalid-body"})}),s=n.formMethod||"get",a=i?s.toUpperCase():s.toLowerCase(),o=z7(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Co(a))return r();let d=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((f,p)=>{let[g,m]=p;return""+f+g+"="+m+`
`},""):String(n.body);return{path:e,submission:{formMethod:a,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:d}}}else if(n.formEncType==="application/json"){if(!Co(a))return r();try{let d=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:a,formAction:o,formEncType:n.formEncType,formData:void 0,json:d,text:void 0}}}catch{return r()}}}Qe(typeof FormData=="function","FormData is not available in this environment");let l,u;if(n.formData)l=lO(n.formData),u=n.formData;else if(n.body instanceof FormData)l=lO(n.body),u=n.body;else if(n.body instanceof URLSearchParams)l=n.body,u=C3(l);else if(n.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(n.body),u=C3(l)}catch{return r()}let c={formMethod:a,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Co(c.formMethod))return{path:e,submission:c};let h=vh(e);return t&&h.search&&B2(h.search)&&l.append("index",""),h.search="?"+l,{path:Fd(h),submission:c}}function x3(i,t,e){e===void 0&&(e=!1);let n=i.findIndex(r=>r.route.id===t);return n>=0?i.slice(0,e?n+1:n):i}function S3(i,t,e,n,r,s,a,o,l,u,c,h,d,f,p,g){let m=g?ca(g[1])?g[1].error:g[1].data:void 0,_=i.createURL(t.location),v=i.createURL(r),y=e;s&&t.errors?y=x3(e,Object.keys(t.errors)[0],!0):g&&ca(g[1])&&(y=x3(e,g[0]));let b=g?g[1].statusCode:void 0,x=a&&b&&b>=400,S=y.filter((A,k)=>{let{route:C}=A;if(C.lazy)return!0;if(C.loader==null)return!1;if(s)return oO(C,t.loaderData,t.errors);if(_ht(t.loaderData,t.matches[k],A)||l.some(P=>P===A.route.id))return!0;let M=t.matches[k],R=A;return w3(A,Ji({currentUrl:_,currentParams:M.params,nextUrl:v,nextParams:R.params},n,{actionResult:m,actionStatus:b,defaultShouldRevalidate:x?!1:o||_.pathname+_.search===v.pathname+v.search||_.search!==v.search||B7(M,R)}))}),w=[];return h.forEach((A,k)=>{if(s||!e.some(O=>O.route.id===A.routeId)||c.has(k))return;let C=Kh(f,A.path,p);if(!C){w.push({key:k,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let M=t.fetchers.get(k),R=H_(C,A.path),P=!1;d.has(k)?P=!1:u.has(k)?(u.delete(k),P=!0):M&&M.state!=="idle"&&M.data===void 0?P=o:P=w3(R,Ji({currentUrl:_,currentParams:t.matches[t.matches.length-1].params,nextUrl:v,nextParams:e[e.length-1].params},n,{actionResult:m,actionStatus:b,defaultShouldRevalidate:x?!1:o})),P&&w.push({key:k,routeId:A.routeId,path:A.path,matches:C,match:R,controller:new AbortController})}),[S,w]}function oO(i,t,e){if(i.lazy)return!0;if(!i.loader)return!1;let n=t!=null&&t[i.id]!==void 0,r=e!=null&&e[i.id]!==void 0;return!n&&r?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!n&&!r}function _ht(i,t,e){let n=!t||e.route.id!==t.route.id,r=i[e.route.id]===void 0;return n||r}function B7(i,t){let e=i.route.path;return i.pathname!==t.pathname||e!=null&&e.endsWith("*")&&i.params["*"]!==t.params["*"]}function w3(i,t){if(i.route.shouldRevalidate){let e=i.route.shouldRevalidate(t);if(typeof e=="boolean")return e}return t.defaultShouldRevalidate}function A3(i,t,e,n,r){var s;let a;if(i){let u=n[i];Qe(u,"No route found to patch children into: routeId = "+i),u.children||(u.children=[]),a=u.children}else a=e;let o=t.filter(u=>!a.some(c=>F7(u,c))),l=K1(o,r,[i||"_","patch",String(((s=a)==null?void 0:s.length)||"0")],n);a.push(...l)}function F7(i,t){return"id"in i&&"id"in t&&i.id===t.id?!0:i.index===t.index&&i.path===t.path&&i.caseSensitive===t.caseSensitive?(!i.children||i.children.length===0)&&(!t.children||t.children.length===0)?!0:i.children.every((e,n)=>{var r;return(r=t.children)==null?void 0:r.some(s=>F7(e,s))}):!1}async function vht(i,t,e){if(!i.lazy)return;let n=await i.lazy();if(!i.lazy)return;let r=e[i.id];Qe(r,"No route found in manifest");let s={};for(let a in n){let l=r[a]!==void 0&&a!=="hasErrorBoundary";Bd(!l,'Route "'+r.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!l&&!Hct.has(a)&&(s[a]=n[a])}Object.assign(r,s),Object.assign(r,Ji({},t(r),{lazy:void 0}))}async function yht(i){let{matches:t}=i,e=t.filter(r=>r.shouldLoad);return(await Promise.all(e.map(r=>r.resolve()))).reduce((r,s,a)=>Object.assign(r,{[e[a].route.id]:s}),{})}async function bht(i,t,e,n,r,s,a,o,l,u){let c=s.map(f=>f.route.lazy?vht(f.route,l,o):void 0),h=s.map((f,p)=>{let g=c[p],m=r.some(v=>v.route.id===f.route.id);return Ji({},f,{shouldLoad:m,resolve:async v=>(v&&n.method==="GET"&&(f.route.lazy||f.route.loader)&&(m=!0),m?xht(t,n,f,g,v,u):Promise.resolve({type:Ei.data,result:void 0}))})}),d=await i({matches:h,request:n,params:s[0].params,fetcherKey:a,context:u});try{await Promise.all(c)}catch{}return d}async function xht(i,t,e,n,r,s){let a,o,l=u=>{let c,h=new Promise((p,g)=>c=g);o=()=>c(),t.signal.addEventListener("abort",o);let d=p=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+i+'" [routeId: '+e.route.id+"]"))):u({request:t,params:e.params,context:s},...p!==void 0?[p]:[]),f=(async()=>{try{return{type:"data",result:await(r?r(g=>d(g)):d())}}catch(p){return{type:"error",result:p}}})();return Promise.race([f,h])};try{let u=e.route[i];if(n)if(u){let c,[h]=await Promise.all([l(u).catch(d=>{c=d}),n]);if(c!==void 0)throw c;a=h}else if(await n,u=e.route[i],u)a=await l(u);else if(i==="action"){let c=new URL(t.url),h=c.pathname+c.search;throw Bs(405,{method:t.method,pathname:h,routeId:e.route.id})}else return{type:Ei.data,result:void 0};else if(u)a=await l(u);else{let c=new URL(t.url),h=c.pathname+c.search;throw Bs(404,{pathname:h})}Qe(a.result!==void 0,"You defined "+(i==="action"?"an action":"a loader")+" for route "+('"'+e.route.id+"\" but didn't return anything from your `"+i+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:Ei.error,result:u}}finally{o&&t.signal.removeEventListener("abort",o)}return a}async function Sht(i){let{result:t,type:e}=i;if(N7(t)){let h;try{let d=t.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?t.body==null?h=null:h=await t.json():h=await t.text()}catch(d){return{type:Ei.error,error:d}}return e===Ei.error?{type:Ei.error,error:new q1(t.status,t.statusText,h),statusCode:t.status,headers:t.headers}:{type:Ei.data,data:h,statusCode:t.status,headers:t.headers}}if(e===Ei.error){if(R3(t)){var n,r;if(t.data instanceof Error){var s,a;return{type:Ei.error,error:t.data,statusCode:(s=t.init)==null?void 0:s.status,headers:(a=t.init)!=null&&a.headers?new Headers(t.init.headers):void 0}}return{type:Ei.error,error:new q1(((n=t.init)==null?void 0:n.status)||500,void 0,t.data),statusCode:jy(t)?t.status:void 0,headers:(r=t.init)!=null&&r.headers?new Headers(t.init.headers):void 0}}return{type:Ei.error,error:t,statusCode:jy(t)?t.status:void 0}}if(Mht(t)){var o,l;return{type:Ei.deferred,deferredData:t,statusCode:(o=t.init)==null?void 0:o.status,headers:((l=t.init)==null?void 0:l.headers)&&new Headers(t.init.headers)}}if(R3(t)){var u,c;return{type:Ei.data,data:t.data,statusCode:(u=t.init)==null?void 0:u.status,headers:(c=t.init)!=null&&c.headers?new Headers(t.init.headers):void 0}}return{type:Ei.data,data:t}}function wht(i,t,e,n,r,s){let a=i.headers.get("Location");if(Qe(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!I2.test(a)){let o=n.slice(0,n.findIndex(l=>l.route.id===e)+1);a=aO(new URL(t.url),o,r,!0,a,s),i.headers.set("Location",a)}return i}function k3(i,t,e){if(I2.test(i)){let n=i,r=n.startsWith("//")?new URL(t.protocol+n):new URL(n),s=ym(r.pathname,e)!=null;if(r.origin===t.origin&&s)return r.pathname+r.search+r.hash}return i}function If(i,t,e,n){let r=i.createURL(z7(t)).toString(),s={signal:e};if(n&&Co(n.formMethod)){let{formMethod:a,formEncType:o}=n;s.method=a.toUpperCase(),o==="application/json"?(s.headers=new Headers({"Content-Type":o}),s.body=JSON.stringify(n.json)):o==="text/plain"?s.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?s.body=lO(n.formData):s.body=n.formData}return new Request(r,s)}function lO(i){let t=new URLSearchParams;for(let[e,n]of i.entries())t.append(e,typeof n=="string"?n:n.name);return t}function C3(i){let t=new FormData;for(let[e,n]of i.entries())t.append(e,n);return t}function Aht(i,t,e,n,r){let s={},a=null,o,l=!1,u={},c=e&&ca(e[1])?e[1].error:void 0;return i.forEach(h=>{if(!(h.route.id in t))return;let d=h.route.id,f=t[d];if(Qe(!nd(f),"Cannot handle redirect results in processLoaderData"),ca(f)){let p=f.error;c!==void 0&&(p=c,c=void 0),a=a||{};{let g=qh(i,d);a[g.route.id]==null&&(a[g.route.id]=p)}s[d]=void 0,l||(l=!0,o=jy(f.error)?f.error.status:500),f.headers&&(u[d]=f.headers)}else Ic(f)?(n.set(d,f.deferredData),s[d]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!l&&(o=f.statusCode),f.headers&&(u[d]=f.headers)):(s[d]=f.data,f.statusCode&&f.statusCode!==200&&!l&&(o=f.statusCode),f.headers&&(u[d]=f.headers))}),c!==void 0&&e&&(a={[e[0]]:c},s[e[0]]=void 0),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:u}}function M3(i,t,e,n,r,s,a){let{loaderData:o,errors:l}=Aht(t,e,n,a);return r.forEach(u=>{let{key:c,match:h,controller:d}=u,f=s[c];if(Qe(f,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(ca(f)){let p=qh(i.matches,h?.route.id);l&&l[p.route.id]||(l=Ji({},l,{[p.route.id]:f.error})),i.fetchers.delete(c)}else if(nd(f))Qe(!1,"Unhandled fetcher revalidation redirect");else if(Ic(f))Qe(!1,"Unhandled fetcher deferred data");else{let p=vc(f.data);i.fetchers.set(c,p)}}),{loaderData:o,errors:l}}function T3(i,t,e,n){let r=Ji({},t);for(let s of e){let a=s.route.id;if(t.hasOwnProperty(a)?t[a]!==void 0&&(r[a]=t[a]):i[a]!==void 0&&s.route.loader&&(r[a]=i[a]),n&&n.hasOwnProperty(a))break}return r}function P3(i){return i?ca(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function qh(i,t){return(t?i.slice(0,i.findIndex(n=>n.route.id===t)+1):[...i]).reverse().find(n=>n.route.hasErrorBoundary===!0)||i[0]}function E3(i){let t=i.length===1?i[0]:i.find(e=>e.index||!e.path||e.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Bs(i,t){let{pathname:e,routeId:n,method:r,type:s,message:a}=t===void 0?{}:t,o="Unknown Server Error",l="Unknown @remix-run/router error";return i===400?(o="Bad Request",r&&e&&n?l="You made a "+r+' request to "'+e+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):i===403?(o="Forbidden",l='Route "'+n+'" does not match URL "'+e+'"'):i===404?(o="Not Found",l='No route matches URL "'+e+'"'):i===405&&(o="Method Not Allowed",r&&e&&n?l="You made a "+r.toUpperCase()+' request to "'+e+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":r&&(l='Invalid request method "'+r.toUpperCase()+'"')),new q1(i||500,o,new Error(l),!0)}function Ox(i){let t=Object.entries(i);for(let e=t.length-1;e>=0;e--){let[n,r]=t[e];if(nd(r))return{key:n,result:r}}}function z7(i){let t=typeof i=="string"?vh(i):i;return Fd(Ji({},t,{hash:""}))}function kht(i,t){return i.pathname!==t.pathname||i.search!==t.search?!1:i.hash===""?t.hash!=="":i.hash===t.hash?!0:t.hash!==""}function Cht(i){return N7(i.result)&&hht.has(i.result.status)}function Ic(i){return i.type===Ei.deferred}function ca(i){return i.type===Ei.error}function nd(i){return(i&&i.type)===Ei.redirect}function R3(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function Mht(i){let t=i;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function N7(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function Tht(i){return cht.has(i.toLowerCase())}function Co(i){return lht.has(i.toLowerCase())}async function Pht(i,t,e,n,r){let s=Object.entries(t);for(let a=0;a<s.length;a++){let[o,l]=s[a],u=i.find(d=>d?.route.id===o);if(!u)continue;let c=n.find(d=>d.route.id===u.route.id),h=c!=null&&!B7(c,u)&&(r&&r[u.route.id])!==void 0;Ic(l)&&h&&await L2(l,e,!1).then(d=>{d&&(t[o]=d)})}}async function Eht(i,t,e){for(let n=0;n<e.length;n++){let{key:r,routeId:s,controller:a}=e[n],o=t[r];i.find(u=>u?.route.id===s)&&Ic(o)&&(Qe(a,"Expected an AbortController for revalidating fetcher deferred result"),await L2(o,a.signal,!0).then(u=>{u&&(t[r]=u)}))}}async function L2(i,t,e){if(e===void 0&&(e=!1),!await i.deferredData.resolveData(t)){if(e)try{return{type:Ei.data,data:i.deferredData.unwrappedData}}catch(r){return{type:Ei.error,error:r}}return{type:Ei.data,data:i.deferredData.data}}}function B2(i){return new URLSearchParams(i).getAll("index").some(t=>t==="")}function H_(i,t){let e=typeof t=="string"?vh(t).search:t.search;if(i[i.length-1].route.index&&B2(e||""))return i[i.length-1];let n=D7(i);return n[n.length-1]}function O3(i){let{formMethod:t,formAction:e,formEncType:n,text:r,formData:s,json:a}=i;if(!(!t||!e||!n)){if(r!=null)return{formMethod:t,formAction:e,formEncType:n,formData:void 0,json:void 0,text:r};if(s!=null)return{formMethod:t,formAction:e,formEncType:n,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:t,formAction:e,formEncType:n,formData:void 0,json:a,text:void 0}}}function RP(i,t){return t?{state:"loading",location:i,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Rht(i,t){return{state:"submitting",location:i,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function h_(i,t){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Oht(i,t){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:t?t.data:void 0}}function vc(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function Dht(i,t){try{let e=i.sessionStorage.getItem(L7);if(e){let n=JSON.parse(e);for(let[r,s]of Object.entries(n||{}))s&&Array.isArray(s)&&t.set(r,new Set(s||[]))}}catch{}}function Iht(i,t){if(t.size>0){let e={};for(let[n,r]of t)e[n]=[...r];try{i.sessionStorage.setItem(L7,JSON.stringify(e))}catch(n){Bd(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Z1(){return Z1=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Z1.apply(this,arguments)}const lC=E.createContext(null),j7=E.createContext(null),yh=E.createContext(null),F2=E.createContext(null),Kl=E.createContext({outlet:null,matches:[],isDataRoute:!1}),H7=E.createContext(null);function Lht(i,t){let{relative:e}=t===void 0?{}:t;bm()||Qe(!1);let{basename:n,navigator:r}=E.useContext(yh),{hash:s,pathname:a,search:o}=W7(i,{relative:e}),l=a;return n!=="/"&&(l=a==="/"?n:Hu([n,a])),r.createHref({pathname:l,search:o,hash:s})}function bm(){return E.useContext(F2)!=null}function xm(){return bm()||Qe(!1),E.useContext(F2).location}function V7(i){E.useContext(yh).static||E.useLayoutEffect(i)}function z2(){let{isDataRoute:i}=E.useContext(Kl);return i?Kht():Bht()}function Bht(){bm()||Qe(!1);let i=E.useContext(lC),{basename:t,future:e,navigator:n}=E.useContext(yh),{matches:r}=E.useContext(Kl),{pathname:s}=xm(),a=JSON.stringify(aC(r,e.v7_relativeSplatPath)),o=E.useRef(!1);return V7(()=>{o.current=!0}),E.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=oC(u,JSON.parse(a),s,c.relative==="path");i==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Hu([t,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[t,n,a,s,i])}const Fht=E.createContext(null);function zht(i){let t=E.useContext(Kl).outlet;return t&&E.createElement(Fht.Provider,{value:i},t)}function kQt(){let{matches:i}=E.useContext(Kl),t=i[i.length-1];return t?t.params:{}}function W7(i,t){let{relative:e}=t===void 0?{}:t,{future:n}=E.useContext(yh),{matches:r}=E.useContext(Kl),{pathname:s}=xm(),a=JSON.stringify(aC(r,n.v7_relativeSplatPath));return E.useMemo(()=>oC(i,JSON.parse(a),s,e==="path"),[i,a,s,e])}function Nht(i,t,e,n){bm()||Qe(!1);let{navigator:r}=E.useContext(yh),{matches:s}=E.useContext(Kl),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=xm(),c;c=u;let h=c.pathname||"/",d=h;if(l!=="/"){let g=l.replace(/^\//,"").split("/");d="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let f=Kh(i,{pathname:d});return $ht(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:Hu([l,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Hu([l,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,e,n)}function jht(){let i=Xht(),t=jy(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),e?E.createElement("pre",{style:r},e):null,null)}const Hht=E.createElement(jht,null);class Vht extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?E.createElement(Kl.Provider,{value:this.props.routeContext},E.createElement(H7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Wht(i){let{routeContext:t,match:e,children:n}=i,r=E.useContext(lC);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(Kl.Provider,{value:t},n)}function $ht(i,t,e,n){var r;if(t===void 0&&(t=[]),e===void 0&&(e=null),n===void 0&&(n=null),i==null){var s;if(!e)return null;if(e.errors)i=e.matches;else if((s=n)!=null&&s.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let a=i,o=(r=e)==null?void 0:r.errors;if(o!=null){let c=a.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);c>=0||Qe(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(e&&n&&n.v7_partialHydration)for(let c=0;c<a.length;c++){let h=a[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:d,errors:f}=e,p=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||p){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,h,d)=>{let f,p=!1,g=null,m=null;e&&(f=o&&h.route.id?o[h.route.id]:void 0,g=h.route.errorElement||Hht,l&&(u<0&&d===0?(qht("route-fallback"),p=!0,m=null):u===d&&(p=!0,m=h.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,d+1)),v=()=>{let y;return f?y=g:p?y=m:h.route.Component?y=E.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=c,E.createElement(Wht,{match:h,routeContext:{outlet:c,matches:_,isDataRoute:e!=null},children:y})};return e&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?E.createElement(Vht,{location:e.location,revalidation:e.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var $7=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}($7||{}),U7=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(U7||{});function Uht(i){let t=E.useContext(lC);return t||Qe(!1),t}function Ght(i){let t=E.useContext(j7);return t||Qe(!1),t}function Yht(i){let t=E.useContext(Kl);return t||Qe(!1),t}function G7(i){let t=Yht(),e=t.matches[t.matches.length-1];return e.route.id||Qe(!1),e.route.id}function Xht(){var i;let t=E.useContext(H7),e=Ght(),n=G7();return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function Kht(){let{router:i}=Uht($7.UseNavigateStable),t=G7(U7.UseNavigateStable),e=E.useRef(!1);return V7(()=>{e.current=!0}),E.useCallback(function(r,s){s===void 0&&(s={}),e.current&&(typeof r=="number"?i.navigate(r):i.navigate(r,Z1({fromRouteId:t},s)))},[i,t])}const D3={};function qht(i,t,e){D3[i]||(D3[i]=!0)}function Zht(i,t){i?.v7_startTransition,i?.v7_relativeSplatPath===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function CQt(i){let{to:t,replace:e,state:n,relative:r}=i;bm()||Qe(!1);let{future:s,static:a}=E.useContext(yh),{matches:o}=E.useContext(Kl),{pathname:l}=xm(),u=z2(),c=oC(t,aC(o,s.v7_relativeSplatPath),l,r==="path"),h=JSON.stringify(c);return E.useEffect(()=>u(JSON.parse(h),{replace:e,state:n,relative:r}),[u,h,r,e,n]),null}function MQt(i){return zht(i.context)}function Qht(i){let{basename:t="/",children:e=null,location:n,navigationType:r=Gn.Pop,navigator:s,static:a=!1,future:o}=i;bm()&&Qe(!1);let l=t.replace(/^\/*/,"/"),u=E.useMemo(()=>({basename:l,navigator:s,static:a,future:Z1({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=vh(n));let{pathname:c="/",search:h="",hash:d="",state:f=null,key:p="default"}=n,g=E.useMemo(()=>{let m=ym(c,l);return m==null?null:{location:{pathname:m,search:h,hash:d,state:f,key:p},navigationType:r}},[l,c,h,d,f,p,r]);return g==null?null:E.createElement(yh.Provider,{value:u},E.createElement(F2.Provider,{children:e,value:g}))}new Promise(()=>{});function Jht(i){let t={hasErrorBoundary:i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&Object.assign(t,{element:E.createElement(i.Component),Component:void 0}),i.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:E.createElement(i.HydrateFallback),HydrateFallback:void 0}),i.ErrorBoundary&&Object.assign(t,{errorElement:E.createElement(i.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hy(){return Hy=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Hy.apply(this,arguments)}function tdt(i,t){if(i==null)return{};var e={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(e[r]=i[r]);return e}function edt(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function idt(i,t){return i.button===0&&(!t||t==="_self")&&!edt(i)}function uO(i){return i===void 0&&(i=""),new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((t,e)=>{let n=i[e];return t.concat(Array.isArray(n)?n.map(r=>[e,r]):[[e,n]])},[]))}function ndt(i,t){let e=uO(i);return t&&t.forEach((n,r)=>{e.has(r)||t.getAll(r).forEach(s=>{e.append(r,s)})}),e}const rdt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sdt="6";try{window.__reactRouterVersion=sdt}catch{}function TQt(i,t){return ght({basename:t?.basename,future:Hy({},t?.future,{v7_prependBasename:!0}),history:zct({window:t?.window}),hydrationData:t?.hydrationData||adt(),routes:i,mapRouteProperties:Jht,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation,window:t?.window}).initialize()}function adt(){var i;let t=(i=window)==null?void 0:i.__staticRouterHydrationData;return t&&t.errors&&(t=Hy({},t,{errors:odt(t.errors)})),t}function odt(i){if(!i)return null;let t=Object.entries(i),e={};for(let[n,r]of t)if(r&&r.__type==="RouteErrorResponse")e[n]=new q1(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let a=new s(r.message);a.stack="",e[n]=a}catch{}}if(e[n]==null){let s=new Error(r.message);s.stack="",e[n]=s}}else e[n]=r;return e}const ldt=E.createContext({isTransitioning:!1}),udt=E.createContext(new Map),cdt="startTransition",I3=$k[cdt],hdt="flushSync",L3=Bct[hdt];function ddt(i){I3?I3(i):i()}function d_(i){L3?L3(i):i()}class fdt{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",e(n))}})}}function PQt(i){let{fallbackElement:t,router:e,future:n}=i,[r,s]=E.useState(e.state),[a,o]=E.useState(),[l,u]=E.useState({isTransitioning:!1}),[c,h]=E.useState(),[d,f]=E.useState(),[p,g]=E.useState(),m=E.useRef(new Map),{v7_startTransition:_}=n||{},v=E.useCallback(A=>{_?ddt(A):A()},[_]),y=E.useCallback((A,k)=>{let{deletedFetchers:C,flushSync:M,viewTransitionOpts:R}=k;A.fetchers.forEach((O,T)=>{O.data!==void 0&&m.current.set(T,O.data)}),C.forEach(O=>m.current.delete(O));let P=e.window==null||e.window.document==null||typeof e.window.document.startViewTransition!="function";if(!R||P){M?d_(()=>s(A)):v(()=>s(A));return}if(M){d_(()=>{d&&(c&&c.resolve(),d.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:R.currentLocation,nextLocation:R.nextLocation})});let O=e.window.document.startViewTransition(()=>{d_(()=>s(A))});O.finished.finally(()=>{d_(()=>{h(void 0),f(void 0),o(void 0),u({isTransitioning:!1})})}),d_(()=>f(O));return}d?(c&&c.resolve(),d.skipTransition(),g({state:A,currentLocation:R.currentLocation,nextLocation:R.nextLocation})):(o(A),u({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}))},[e.window,d,c,m,v]);E.useLayoutEffect(()=>e.subscribe(y),[e,y]),E.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new fdt)},[l]),E.useEffect(()=>{if(c&&a&&e.window){let A=a,k=c.promise,C=e.window.document.startViewTransition(async()=>{v(()=>s(A)),await k});C.finished.finally(()=>{h(void 0),f(void 0),o(void 0),u({isTransitioning:!1})}),f(C)}},[v,a,c,e.window]),E.useEffect(()=>{c&&a&&r.location.key===a.location.key&&c.resolve()},[c,d,r.location,a]),E.useEffect(()=>{!l.isTransitioning&&p&&(o(p.state),u({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),g(void 0))},[l.isTransitioning,p]),E.useEffect(()=>{},[]);let b=E.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:A=>e.navigate(A),push:(A,k,C)=>e.navigate(A,{state:k,preventScrollReset:C?.preventScrollReset}),replace:(A,k,C)=>e.navigate(A,{replace:!0,state:k,preventScrollReset:C?.preventScrollReset})}),[e]),x=e.basename||"/",S=E.useMemo(()=>({router:e,navigator:b,static:!1,basename:x}),[e,b,x]),w=E.useMemo(()=>({v7_relativeSplatPath:e.future.v7_relativeSplatPath}),[e.future.v7_relativeSplatPath]);return E.useEffect(()=>Zht(n,e.future),[n,e.future]),E.createElement(E.Fragment,null,E.createElement(lC.Provider,{value:S},E.createElement(j7.Provider,{value:r},E.createElement(udt.Provider,{value:m.current},E.createElement(ldt.Provider,{value:l},E.createElement(Qht,{basename:x,location:r.location,navigationType:r.historyAction,navigator:b,future:w},r.initialized||e.future.v7_partialHydration?E.createElement(pdt,{routes:e.routes,future:e.future,state:r}):t))))),null)}const pdt=E.memo(gdt);function gdt(i){let{routes:t,future:e,state:n}=i;return Nht(t,void 0,n,e)}const mdt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_dt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EQt=E.forwardRef(function(t,e){let{onClick:n,relative:r,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h}=t,d=tdt(t,rdt),{basename:f}=E.useContext(yh),p,g=!1;if(typeof u=="string"&&_dt.test(u)&&(p=u,mdt))try{let y=new URL(window.location.href),b=u.startsWith("//")?new URL(y.protocol+u):new URL(u),x=ym(b.pathname,f);b.origin===y.origin&&x!=null?u=x+b.search+b.hash:g=!0}catch{}let m=Lht(u,{relative:r}),_=vdt(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:r,viewTransition:h});function v(y){n&&n(y),y.defaultPrevented||_(y)}return E.createElement("a",Hy({},d,{href:p||m,onClick:g||s?n:v,ref:e,target:l}))});var B3;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(B3||(B3={}));var F3;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(F3||(F3={}));function vdt(i,t){let{target:e,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:o}=t===void 0?{}:t,l=z2(),u=xm(),c=W7(i,{relative:a});return E.useCallback(h=>{if(idt(h,e)){h.preventDefault();let d=n!==void 0?n:Fd(u)===Fd(c);l(i,{replace:d,state:r,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,n,r,e,i,s,a,o])}function RQt(i){let t=E.useRef(uO(i)),e=E.useRef(!1),n=xm(),r=E.useMemo(()=>ndt(n.search,e.current?null:t.current),[n.search]),s=z2(),a=E.useCallback((o,l)=>{const u=uO(typeof o=="function"?o(r):o);e.current=!0,s("?"+u,l)},[s,r]);return[r,a]}const Ae=i=>typeof i=="string",f_=()=>{let i,t;const e=new Promise((n,r)=>{i=n,t=r});return e.resolve=i,e.reject=t,e},z3=i=>i==null?"":""+i,ydt=(i,t,e)=>{i.forEach(n=>{t[n]&&(e[n]=t[n])})},bdt=/###/g,N3=i=>i&&i.indexOf("###")>-1?i.replace(bdt,"."):i,j3=i=>!i||Ae(i),mv=(i,t,e)=>{const n=Ae(t)?t.split("."):t;let r=0;for(;r<n.length-1;){if(j3(i))return{};const s=N3(n[r]);!i[s]&&e&&(i[s]=new e),Object.prototype.hasOwnProperty.call(i,s)?i=i[s]:i={},++r}return j3(i)?{}:{obj:i,k:N3(n[r])}},H3=(i,t,e)=>{const{obj:n,k:r}=mv(i,t,Object);if(n!==void 0||t.length===1){n[r]=e;return}let s=t[t.length-1],a=t.slice(0,t.length-1),o=mv(i,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=mv(i,a,Object),o?.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=e},xdt=(i,t,e,n)=>{const{obj:r,k:s}=mv(i,t,Object);r[s]=r[s]||[],r[s].push(e)},Q1=(i,t)=>{const{obj:e,k:n}=mv(i,t);if(e&&Object.prototype.hasOwnProperty.call(e,n))return e[n]},Sdt=(i,t,e)=>{const n=Q1(i,e);return n!==void 0?n:Q1(t,e)},Y7=(i,t,e)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in i?Ae(i[n])||i[n]instanceof String||Ae(t[n])||t[n]instanceof String?e&&(i[n]=t[n]):Y7(i[n],t[n],e):i[n]=t[n]);return i},Lf=i=>i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var wdt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Adt=i=>Ae(i)?i.replace(/[&<>"'\/]/g,t=>wdt[t]):i;class kdt{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(e!==void 0)return e;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const Cdt=[" ",",","?","!",";"],Mdt=new kdt(20),Tdt=(i,t,e)=>{t=t||"",e=e||"";const n=Cdt.filter(a=>t.indexOf(a)<0&&e.indexOf(a)<0);if(n.length===0)return!0;const r=Mdt.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!r.test(i);if(!s){const a=i.indexOf(e);a>0&&!r.test(i.substring(0,a))&&(s=!0)}return s},cO=(i,t,e=".")=>{if(!i)return;if(i[t])return Object.prototype.hasOwnProperty.call(i,t)?i[t]:void 0;const n=t.split(e);let r=i;for(let s=0;s<n.length;){if(!r||typeof r!="object")return;let a,o="";for(let l=s;l<n.length;++l)if(l!==s&&(o+=e),o+=n[l],a=r[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<n.length-1)continue;s+=l-s+1;break}r=a}return r},Vy=i=>i?.replace("_","-"),Pdt={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,t){console?.[i]?.apply?.(console,t)}};let Edt=class hO{constructor(t,e={}){this.init(t,e)}init(t,e={}){this.prefix=e.prefix||"i18next:",this.logger=t||Pdt,this.options=e,this.debug=e.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,n,r){return r&&!this.debug?null:(Ae(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new hO(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new hO(this.logger,t)}};var Pl=new Edt;let uC=class{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const r=this.observers[n].get(e)||0;this.observers[n].set(e,r+1)}),this}off(t,e){if(this.observers[t]){if(!e){delete this.observers[t];return}this.observers[t].delete(e)}}emit(t,...e){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([r,s])=>{for(let a=0;a<s;a++)r(...e)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,s])=>{for(let a=0;a<s;a++)r.apply(r,[t,...e])})}};class V3 extends uC{constructor(t,e={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,n,r={}){const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,a=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t.split("."):(o=[t,e],n&&(Array.isArray(n)?o.push(...n):Ae(n)&&s?o.push(...n.split(s)):o.push(n)));const l=Q1(this.data,o);return!l&&!e&&!n&&t.indexOf(".")>-1&&(t=o[0],e=o[1],n=o.slice(2).join(".")),l||!a||!Ae(n)?l:cO(this.data?.[t]?.[e],n,s)}addResource(t,e,n,r,s={silent:!1}){const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[t,e];n&&(o=o.concat(a?n.split(a):n)),t.indexOf(".")>-1&&(o=t.split("."),r=e,e=o[1]),this.addNamespaces(e),H3(this.data,o,r),s.silent||this.emit("added",t,e,n,r)}addResources(t,e,n,r={silent:!1}){for(const s in n)(Ae(n[s])||Array.isArray(n[s]))&&this.addResource(t,e,s,n[s],{silent:!0});r.silent||this.emit("added",t,e,n)}addResourceBundle(t,e,n,r,s,a={silent:!1,skipCopy:!1}){let o=[t,e];t.indexOf(".")>-1&&(o=t.split("."),r=n,n=e,e=o[1]),this.addNamespaces(e);let l=Q1(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?Y7(l,n,s):l={...l,...n},H3(this.data,o,l),a.silent||this.emit("added",t,e,n)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return this.getResource(t,e)!==void 0}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(r=>e[r]&&Object.keys(e[r]).length>0)}toJSON(){return this.data}}var X7={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,t,e,n,r){return i.forEach(s=>{t=this.processors[s]?.process(t,e,n,r)??t}),t}};const K7=Symbol("i18next/PATH_KEY");function Rdt(){const i=[],t=Object.create(null);let e;return t.get=(n,r)=>(e?.revoke?.(),r===K7?i:(i.push(r),e=Proxy.revocable(n,t),e.proxy)),Proxy.revocable(Object.create(null),t).proxy}function dO(i,t){const{[K7]:e}=i(Rdt());return e.join(t?.keySeparator??".")}const W3={},OP=i=>!Ae(i)&&typeof i!="boolean"&&typeof i!="number";class J1 extends uC{constructor(t,e={}){super(),ydt(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Pl.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,e={interpolation:{}}){const n={...e};if(t==null)return!1;const r=this.resolve(t,n);if(r?.res===void 0)return!1;const s=OP(r.res);return!(n.returnObjects===!1&&s)}extractFromKey(t,e){let n=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const r=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator;let s=e.ns||this.options.defaultNS||[];const a=n&&t.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!Tdt(t,n,r);if(a&&!o){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:Ae(s)?[s]:s};const u=t.split(n);(n!==r||n===r&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),t=u.join(r)}return{key:t,namespaces:Ae(s)?[s]:s}}translate(t,e,n){let r=typeof e=="object"?{...e}:e;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),t==null)return"";typeof t=="function"&&(t=dO(t,{...this.options,...r})),Array.isArray(t)||(t=[String(t)]);const s=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(t[t.length-1],r),u=l[l.length-1];let c=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;c===void 0&&(c=":");const h=r.lng||this.language,d=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h?.toLowerCase()==="cimode")return d?s?{res:`${u}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(r)}:`${u}${c}${o}`:s?{res:o,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(r)}:o;const f=this.resolve(t,r);let p=f?.res;const g=f?.usedKey||o,m=f?.exactUsedKey||o,_=["[object Number]","[object Function]","[object RegExp]"],v=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,b=r.count!==void 0&&!Ae(r.count),x=J1.hasDefaultValue(r),S=b?this.pluralResolver.getSuffix(h,r.count,r):"",w=r.ordinal&&b?this.pluralResolver.getSuffix(h,r.count,{ordinal:!1}):"",A=b&&!r.ordinal&&r.count===0,k=A&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${S}`]||r[`defaultValue${w}`]||r.defaultValue;let C=p;y&&!p&&x&&(C=k);const M=OP(C),R=Object.prototype.toString.apply(C);if(y&&C&&M&&_.indexOf(R)<0&&!(Ae(v)&&Array.isArray(C))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const P=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,C,{...r,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(f.res=P,f.usedParams=this.getUsedParamsDetails(r),f):P}if(a){const P=Array.isArray(C),O=P?[]:{},T=P?m:g;for(const D in C)if(Object.prototype.hasOwnProperty.call(C,D)){const B=`${T}${a}${D}`;x&&!p?O[D]=this.translate(B,{...r,defaultValue:OP(k)?k[D]:void 0,joinArrays:!1,ns:l}):O[D]=this.translate(B,{...r,joinArrays:!1,ns:l}),O[D]===B&&(O[D]=C[D])}p=O}}else if(y&&Ae(v)&&Array.isArray(p))p=p.join(v),p&&(p=this.extendTranslation(p,t,r,n));else{let P=!1,O=!1;!this.isValidLookup(p)&&x&&(P=!0,p=k),this.isValidLookup(p)||(O=!0,p=o);const D=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&O?void 0:p,B=x&&k!==p&&this.options.updateMissing;if(O||P||B){if(this.logger.log(B?"updateKey":"missingKey",h,u,o,B?k:p),a){const H=this.resolve(o,{...r,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let I=[];const F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&F&&F[0])for(let H=0;H<F.length;H++)I.push(F[H]);else this.options.saveMissingTo==="all"?I=this.languageUtils.toResolveHierarchy(r.lng||this.language):I.push(r.lng||this.language);const j=(H,U,K)=>{const q=x&&K!==p?K:D;this.options.missingKeyHandler?this.options.missingKeyHandler(H,u,U,q,B,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(H,u,U,q,B,r),this.emit("missingKey",H,u,U,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?I.forEach(H=>{const U=this.pluralResolver.getSuffixes(H,r);A&&r[`defaultValue${this.options.pluralSeparator}zero`]&&U.indexOf(`${this.options.pluralSeparator}zero`)<0&&U.push(`${this.options.pluralSeparator}zero`),U.forEach(K=>{j([H],o+K,r[`defaultValue${K}`]||k)})}):j(I,o,k))}p=this.extendTranslation(p,t,r,f,n),O&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${u}${c}${o}`),(O||P)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${c}${o}`:o,P?p:void 0,r))}return s?(f.res=p,f.usedParams=this.getUsedParamsDetails(r),f):p}extendTranslation(t,e,n,r,s){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const l=Ae(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(l){const h=t.match(this.interpolator.nestingRegexp);u=h&&h.length}let c=n.replace&&!Ae(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),t=this.interpolator.interpolate(t,c,n.lng||this.language||r.usedLng,n),l){const h=t.match(this.interpolator.nestingRegexp),d=h&&h.length;u<d&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...h)=>s?.[0]===h[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${e[0]}`),null):this.translate(...h,e),n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,o=Ae(a)?[a]:a;return t!=null&&o?.length&&n.applyPostProcessor!==!1&&(t=X7.handle(o,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,e={}){let n,r,s,a,o;return Ae(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(l,e),c=u.key;r=c;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const d=e.count!==void 0&&!Ae(e.count),f=d&&!e.ordinal&&e.count===0,p=e.context!==void 0&&(Ae(e.context)||typeof e.context=="number")&&e.context!=="",g=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);h.forEach(m=>{this.isValidLookup(n)||(o=m,!W3[`${g[0]}-${m}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(W3[`${g[0]}-${m}`]=!0,this.logger.warn(`key "${r}" for languages "${g.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(_=>{if(this.isValidLookup(n))return;a=_;const v=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(v,c,_,m,e);else{let b;d&&(b=this.pluralResolver.getSuffix(_,e.count,e));const x=`${this.options.pluralSeparator}zero`,S=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(e.ordinal&&b.indexOf(S)===0&&v.push(c+b.replace(S,this.options.pluralSeparator)),v.push(c+b),f&&v.push(c+x)),p){const w=`${c}${this.options.contextSeparator||"_"}${e.context}`;v.push(w),d&&(e.ordinal&&b.indexOf(S)===0&&v.push(w+b.replace(S,this.options.pluralSeparator)),v.push(w+b),f&&v.push(w+x))}}let y;for(;y=v.pop();)this.isValidLookup(n)||(s=y,n=this.getResource(_,m,y,e))}))})}),{res:n,usedKey:r,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,e,n,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,e,n,r):this.resourceStore.getResource(t,e,n,r)}getUsedParamsDetails(t={}){const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!Ae(t.replace);let r=n?t.replace:t;if(n&&typeof t.count<"u"&&(r.count=t.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const s of e)delete r[s]}return r}static hasDefaultValue(t){const e="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&t[n]!==void 0)return!0;return!1}}class $3{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Pl.create("languageUtils")}getScriptPartFromCode(t){if(t=Vy(t),!t||t.indexOf("-")<0)return null;const e=t.split("-");return e.length===2||(e.pop(),e[e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(t){if(t=Vy(t),!t||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(Ae(t)&&t.indexOf("-")>-1){let e;try{e=Intl.getCanonicalLocales(t)[0]}catch{}return e&&this.options.lowerCaseLng&&(e=e.toLowerCase()),e||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(n=>{if(e)return;const r=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(r))&&(e=r)}),!e&&this.options.supportedLngs&&t.forEach(n=>{if(e)return;const r=this.getScriptPartFromCode(n);if(this.isSupportedCode(r))return e=r;const s=this.getLanguagePartFromCode(n);if(this.isSupportedCode(s))return e=s;e=this.options.supportedLngs.find(a=>{if(a===s)return a;if(!(a.indexOf("-")<0&&s.indexOf("-")<0)&&(a.indexOf("-")>0&&s.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===s||a.indexOf(s)===0&&s.length>1))return a})}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if(typeof t=="function"&&(t=t(e)),Ae(t)&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}toResolveHierarchy(t,e){const n=this.getFallbackCodes((e===!1?[]:e)||this.options.fallbackLng||[],t),r=[],s=a=>{a&&(this.isSupportedCode(a)?r.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Ae(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):Ae(t)&&s(this.formatLanguageCode(t)),n.forEach(a=>{r.indexOf(a)<0&&s(this.formatLanguageCode(a))}),r}}const U3={zero:0,one:1,two:2,few:3,many:4,other:5},G3={select:i=>i===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Odt{constructor(t,e={}){this.languageUtils=t,this.options=e,this.logger=Pl.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,e){this.rules[t]=e}clearCache(){this.pluralRulesCache={}}getRule(t,e={}){const n=Vy(t==="dev"?"en":t),r=e.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:r});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(n,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),G3;if(!t.match(/-|_/))return G3;const l=this.languageUtils.getLanguagePartFromCode(t);a=this.getRule(l,e)}return this.pluralRulesCache[s]=a,a}needsPlural(t,e={}){let n=this.getRule(t,e);return n||(n=this.getRule("dev",e)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,e,n={}){return this.getSuffixes(t,n).map(r=>`${e}${r}`)}getSuffixes(t,e={}){let n=this.getRule(t,e);return n||(n=this.getRule("dev",e)),n?n.resolvedOptions().pluralCategories.sort((r,s)=>U3[r]-U3[s]).map(r=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(t,e,n={}){const r=this.getRule(t,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(e)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",e,n))}}const Y3=(i,t,e,n=".",r=!0)=>{let s=Sdt(i,t,e);return!s&&r&&Ae(e)&&(s=cO(i,e,n),s===void 0&&(s=cO(t,e,n))),s},DP=i=>i.replace(/\$/g,"$$$$");class X3{constructor(t={}){this.logger=Pl.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(e=>e),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:n,useRawValueToEscape:r,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:d,nestingPrefixEscaped:f,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:m,maxReplaces:_,alwaysFormat:v}=t.interpolation;this.escape=e!==void 0?e:Adt,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=s?Lf(s):a||"{{",this.suffix=o?Lf(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?Lf(d):f||Lf("$t("),this.nestingSuffix=p?Lf(p):g||Lf(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=_||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(e,n)=>e?.source===n?(e.lastIndex=0,e):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,e,n,r){let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=f=>{if(f.indexOf(this.formatSeparator)<0){const _=Y3(e,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(_,void 0,n,{...r,...e,interpolationkey:f}):_}const p=f.split(this.formatSeparator),g=p.shift().trim(),m=p.join(this.formatSeparator).trim();return this.format(Y3(e,l,g,this.options.keySeparator,this.options.ignoreJSONStructure),m,n,{...r,...e,interpolationkey:g})};this.resetRegExp();const c=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>DP(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?DP(this.escape(f)):DP(f)}].forEach(f=>{for(o=0;s=f.regex.exec(t);){const p=s[1].trim();if(a=u(p),a===void 0)if(typeof c=="function"){const m=c(t,s,r);a=Ae(m)?m:""}else if(r&&Object.prototype.hasOwnProperty.call(r,p))a="";else if(h){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${t}`),a="";else!Ae(a)&&!this.useRawValueToEscape&&(a=z3(a));const g=f.safeValue(a);if(t=t.replace(s[0],g),h?(f.regex.lastIndex+=a.length,f.regex.lastIndex-=s[0].length):f.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,e,n={}){let r,s,a;const o=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp(`${c}[ ]*{`));let d=`{${h[1]}`;l=h[0],d=this.interpolate(d,a);const f=d.match(/'/g),p=d.match(/"/g);((f?.length??0)%2===0&&!p||p.length%2!==0)&&(d=d.replace(/'/g,'"'));try{a=JSON.parse(d),u&&(a={...u,...a})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,g),`${l}${c}${d}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;r=this.nestingRegexp.exec(t);){let l=[];a={...n},a=a.replace&&!Ae(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const u=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(u!==-1&&(l=r[1].slice(u).split(this.formatSeparator).map(c=>c.trim()).filter(Boolean),r[1]=r[1].slice(0,u)),s=e(o.call(this,r[1].trim(),a),a),s&&r[0]===t&&!Ae(s))return s;Ae(s)||(s=z3(s)),s||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${t}`),s=""),l.length&&(s=l.reduce((c,h)=>this.format(c,h,n.lng,{...n,interpolationkey:r[1].trim()}),s.trim())),t=t.replace(r[0],s),this.regexp.lastIndex=0}return t}}const Ddt=i=>{let t=i.toLowerCase().trim();const e={};if(i.indexOf("(")>-1){const n=i.split("(");t=n[0].toLowerCase().trim();const r=n[1].substring(0,n[1].length-1);t==="currency"&&r.indexOf(":")<0?e.currency||(e.currency=r.trim()):t==="relativetime"&&r.indexOf(":")<0?e.range||(e.range=r.trim()):r.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=o.trim();e[c]||(e[c]=u),u==="false"&&(e[c]=!1),u==="true"&&(e[c]=!0),isNaN(u)||(e[c]=parseInt(u,10))}})}return{formatName:t,formatOptions:e}},K3=i=>{const t={};return(e,n,r)=>{let s=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(s={...s,[r.interpolationkey]:void 0});const a=n+JSON.stringify(s);let o=t[a];return o||(o=i(Vy(n),r),t[a]=o),o(e)}},Idt=i=>(t,e,n)=>i(Vy(e),n)(t);class Ldt{constructor(t={}){this.logger=Pl.create("formatter"),this.options=t,this.init(t)}init(t,e={interpolation:{}}){this.formatSeparator=e.interpolation.formatSeparator||",";const n=e.cacheInBuiltFormats?K3:Idt;this.formats={number:n((r,s)=>{const a=new Intl.NumberFormat(r,{...s});return o=>a.format(o)}),currency:n((r,s)=>{const a=new Intl.NumberFormat(r,{...s,style:"currency"});return o=>a.format(o)}),datetime:n((r,s)=>{const a=new Intl.DateTimeFormat(r,{...s});return o=>a.format(o)}),relativetime:n((r,s)=>{const a=new Intl.RelativeTimeFormat(r,{...s});return o=>a.format(o,s.range||"day")}),list:n((r,s)=>{const a=new Intl.ListFormat(r,{...s});return o=>a.format(o)})}}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=K3(e)}format(t,e,n,r={}){const s=e.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,l)=>{const{formatName:u,formatOptions:c}=Ddt(l);if(this.formats[u]){let h=o;try{const d=r?.formatParams?.[r.interpolationkey]||{},f=d.locale||d.lng||r.locale||r.lng||n;h=this.formats[u](o,f,{...c,...r,...d})}catch(d){this.logger.warn(d)}return h}else this.logger.warn(`there was no format function for ${u}`);return o},t)}}const Bdt=(i,t)=>{i.pending[t]!==void 0&&(delete i.pending[t],i.pendingCount--)};class Fdt extends uC{constructor(t,e,n,r={}){super(),this.backend=t,this.store=e,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=Pl.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,r.backend,r)}queueLoad(t,e,n,r){const s={},a={},o={},l={};return t.forEach(u=>{let c=!0;e.forEach(h=>{const d=`${u}|${h}`;!n.reload&&this.store.hasResourceBundle(u,h)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?a[d]===void 0&&(a[d]=!0):(this.state[d]=1,c=!1,a[d]===void 0&&(a[d]=!0),s[d]===void 0&&(s[d]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(o[u]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(t,e,n){const r=t.split("|"),s=r[0],a=r[1];e&&this.emit("failedLoading",s,a,e),!e&&n&&this.store.addResourceBundle(s,a,n,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2,e&&n&&(this.state[t]=0);const o={};this.queue.forEach(l=>{xdt(l.loaded,[s],a),Bdt(l,t),e&&l.errors.push(e),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const c=l.loaded[u];c.length&&c.forEach(h=>{o[u][h]===void 0&&(o[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(t,e,n,r=0,s=this.retryTimeout,a){if(!t.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:e,fcName:n,tried:r,wait:s,callback:a});return}this.readingCalls++;const o=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&c&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,t,e,n,r+1,s*2,a)},s);return}a(u,c)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const u=l(t,e);u&&typeof u.then=="function"?u.then(c=>o(null,c)).catch(o):o(null,u)}catch(u){o(u)}return}return l(t,e,o)}prepareLoading(t,e,n={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Ae(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Ae(e)&&(e=[e]);const s=this.queueLoad(t,e,n,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(t,e,n){this.prepareLoading(t,e,{},n)}reload(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}loadOne(t,e=""){const n=t.split("|"),r=n[0],s=n[1];this.read(r,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${e}loading namespace ${s} for language ${r} failed`,a),!a&&o&&this.logger.log(`${e}loaded namespace ${s} for language ${r}`,o),this.loaded(t,a,o)})}saveMissing(t,e,n,r,s,a={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(e)){this.logger.warn(`did not save key "${n}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const l={...a,isUpdate:s},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(t,e,n,r,l):c=u(t,e,n,r),c&&typeof c.then=="function"?c.then(h=>o(null,h)).catch(o):o(null,c)}catch(c){o(c)}else u(t,e,n,r,o,l)}!t||!t[0]||this.store.addResource(t[0],e,n,r)}}}const q3=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:i=>{let t={};if(typeof i[1]=="object"&&(t=i[1]),Ae(i[1])&&(t.defaultValue=i[1]),Ae(i[2])&&(t.tDescription=i[2]),typeof i[2]=="object"||typeof i[3]=="object"){const e=i[3]||i[2];Object.keys(e).forEach(n=>{t[n]=e[n]})}return t},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Z3=i=>(Ae(i.ns)&&(i.ns=[i.ns]),Ae(i.fallbackLng)&&(i.fallbackLng=[i.fallbackLng]),Ae(i.fallbackNS)&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs?.indexOf?.("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),typeof i.initImmediate=="boolean"&&(i.initAsync=i.initImmediate),i),Dx=()=>{},zdt=i=>{Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(e=>{typeof i[e]=="function"&&(i[e]=i[e].bind(i))})};class _v extends uC{constructor(t={},e){if(super(),this.options=Z3(t),this.services={},this.logger=Pl,this.modules={external:[]},zdt(this),e&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(t={},e){this.isInitializing=!0,typeof t=="function"&&(e=t,t={}),t.defaultNS==null&&t.ns&&(Ae(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=q3();this.options={...n,...this.options,...Z3(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const r=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Pl.init(r(this.modules.logger),this.options):Pl.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Ldt;const c=new $3(this.options);this.store=new V3(this.options.resources,this.options);const h=this.services;h.logger=Pl,h.resourceStore=this.store,h.languageUtils=c,h.pluralResolver=new Odt(c,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(h.formatter=r(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new X3(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Fdt(r(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(f,...p)=>{this.emit(f,...p)}),this.modules.languageDetector&&(h.languageDetector=r(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=r(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new J1(this.services,this.options),this.translator.on("*",(f,...p)=>{this.emit(f,...p)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,e||(e=Dx),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...c)=>this.store[u](...c)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...c)=>(this.store[u](...c),this)});const o=f_(),l=()=>{const u=(c,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(h),e(c,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),o}loadResources(t,e=Dx){let n=e;const r=Ae(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const s=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(u=>{u!=="cimode"&&s.indexOf(u)<0&&s.push(u)})};r?a(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload?.forEach?.(o=>a(o)),this.services.backendConnector.load(s,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(t,e,n){const r=f_();return typeof t=="function"&&(n=t,t=void 0),typeof e=="function"&&(n=e,e=void 0),t||(t=this.languages),e||(e=this.options.ns),n||(n=Dx),this.services.backendConnector.reload(t,e,s=>{r.resolve(),n(s)}),r}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&X7.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let e=0;e<this.languages.length;e++){const n=this.languages[e];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,e){this.isLanguageChangingTo=t;const n=f_();this.emit("languageChanging",t);const r=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},s=(o,l)=>{l?this.isLanguageChangingTo===t&&(r(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,n.resolve((...u)=>this.t(...u)),e&&e(o,(...u)=>this.t(...u))},a=o=>{!t&&!o&&this.services.languageDetector&&(o=[]);const l=Ae(o)?o:o&&o[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(Ae(o)?[o]:o);u&&(this.language||r(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector?.cacheUserLanguage?.(u)),this.loadResources(u,c=>{s(c,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),n}getFixedT(t,e,n){const r=(s,a,...o)=>{let l;typeof a!="object"?l=this.options.overloadTranslationOptionHandler([s,a].concat(o)):l={...a},l.lng=l.lng||r.lng,l.lngs=l.lngs||r.lngs,l.ns=l.ns||r.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||r.keyPrefix);const u=this.options.keySeparator||".";let c;return l.keyPrefix&&Array.isArray(s)?c=s.map(h=>(typeof h=="function"&&(h=dO(h,{...this.options,...a})),`${l.keyPrefix}${u}${h}`)):(typeof s=="function"&&(s=dO(s,{...this.options,...a})),c=l.keyPrefix?`${l.keyPrefix}${u}${s}`:s),this.t(c,l)};return Ae(t)?r.lng=t:r.lngs=t,r.ns=e,r.keyPrefix=n,r}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,e={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=e.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(e.precheck){const o=e.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,t)&&(!r||a(s,t)))}loadNamespaces(t,e){const n=f_();return this.options.ns?(Ae(t)&&(t=[t]),t.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{n.resolve(),e&&e(r)}),n):(e&&e(),Promise.resolve())}loadLanguages(t,e){const n=f_();Ae(t)&&(t=[t]);const r=this.options.preload||[],s=t.filter(a=>r.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=r.concat(s),this.loadResources(a=>{n.resolve(),e&&e(a)}),n):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const r=new Intl.Locale(t);if(r&&r.getTextInfo){const s=r.getTextInfo();if(s&&s.direction)return s.direction}}catch{}const e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new $3(q3());return t.toLowerCase().indexOf("-latn")>1?"ltr":e.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},e){const n=new _v(t,e);return n.createInstance=_v.createInstance,n}cloneInstance(t={},e=Dx){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const r={...this.options,...t,isClone:!0},s=new _v(r);if((t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n){const o=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},l[u]=Object.keys(l[u]).reduce((c,h)=>(c[h]={...l[u][h]},c),l[u]),l),{});s.store=new V3(o,r),s.services.resourceStore=s.store}return t.interpolation&&(s.services.interpolator=new X3(r)),s.translator=new J1(s.services,r),s.translator.on("*",(o,...l)=>{s.emit(o,...l)}),s.init(r,e),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Js=_v.createInstance();Js.createInstance;Js.dir;Js.init;Js.loadResources;Js.reloadResources;Js.use;Js.changeLanguage;Js.getFixedT;Js.t;Js.exists;Js.setDefaultNamespace;Js.hasLoadedNamespace;Js.loadNamespaces;Js.loadLanguages;const Ndt=(i,t,e,n)=>{const r=[e,{code:t,...n||{}}];if(i?.services?.logger?.forward)return i.services.logger.forward(r,"warn","react-i18next::",!0);zd(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),i?.services?.logger?.warn?i.services.logger.warn(...r):console?.warn&&console.warn(...r)},Q3={},q7=(i,t,e,n)=>{zd(e)&&Q3[e]||(zd(e)&&(Q3[e]=new Date),Ndt(i,t,e,n))},Z7=(i,t)=>()=>{if(i.isInitialized)t();else{const e=()=>{setTimeout(()=>{i.off("initialized",e)},0),t()};i.on("initialized",e)}},fO=(i,t,e)=>{i.loadNamespaces(t,Z7(i,e))},J3=(i,t,e,n)=>{if(zd(e)&&(e=[e]),i.options.preload&&i.options.preload.indexOf(t)>-1)return fO(i,e,n);e.forEach(r=>{i.options.ns.indexOf(r)<0&&i.options.ns.push(r)}),i.loadLanguages(t,Z7(i,n))},jdt=(i,t,e={})=>!t.languages||!t.languages.length?(q7(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(i,{lng:e.lng,precheck:(n,r)=>{if(e.bindI18n&&e.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!r(n.isLanguageChangingTo,i))return!1}}),zd=i=>typeof i=="string",Hdt=i=>typeof i=="object"&&i!==null,Vdt=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Wdt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},$dt=i=>Wdt[i],Udt=i=>i.replace(Vdt,$dt);let pO={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Udt,transDefaultProps:void 0};const Gdt=(i={})=>{pO={...pO,...i}},Ydt=()=>pO;let Q7;const Xdt=i=>{Q7=i},Kdt=()=>Q7,DQt={type:"3rdParty",init(i){Gdt(i.options.react),Xdt(i)}},qdt=E.createContext();class Zdt{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var J7={exports:{}},t9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig=E;function Qdt(i,t){return i===t&&(i!==0||1/i===1/t)||i!==i&&t!==t}var Jdt=typeof Object.is=="function"?Object.is:Qdt,tft=Ig.useState,eft=Ig.useEffect,ift=Ig.useLayoutEffect,nft=Ig.useDebugValue;function rft(i,t){var e=t(),n=tft({inst:{value:e,getSnapshot:t}}),r=n[0].inst,s=n[1];return ift(function(){r.value=e,r.getSnapshot=t,IP(r)&&s({inst:r})},[i,e,t]),eft(function(){return IP(r)&&s({inst:r}),i(function(){IP(r)&&s({inst:r})})},[i]),nft(e),e}function IP(i){var t=i.getSnapshot;i=i.value;try{var e=t();return!Jdt(i,e)}catch{return!0}}function sft(i,t){return t()}var aft=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sft:rft;t9.useSyncExternalStore=Ig.useSyncExternalStore!==void 0?Ig.useSyncExternalStore:aft;J7.exports=t9;var e9=J7.exports;const oft=(i,t)=>zd(t)?t:Hdt(t)&&zd(t.defaultValue)?t.defaultValue:Array.isArray(i)?i[i.length-1]:i,lft={t:oft,ready:!1},uft=()=>()=>{},IQt=(i,t={})=>{const{i18n:e}=t,{i18n:n,defaultNS:r}=E.useContext(qdt)||{},s=e||n||Kdt();s&&!s.reportNamespaces&&(s.reportNamespaces=new Zdt),s||q7(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const a=E.useMemo(()=>({...Ydt(),...s?.options?.react,...t}),[s,t]),{useSuspense:o,keyPrefix:l}=a,u=r||s?.options?.defaultNS,c=zd(u)?[u]:u||["translation"],h=E.useMemo(()=>c,c);s?.reportNamespaces?.addUsedNamespaces?.(h);const d=E.useRef(0),f=E.useCallback(k=>{if(!s)return uft;const{bindI18n:C,bindI18nStore:M}=a,R=()=>{d.current+=1,k()};return C&&s.on(C,R),M&&s.store.on(M,R),()=>{C&&C.split(" ").forEach(P=>s.off(P,R)),M&&M.split(" ").forEach(P=>s.store.off(P,R))}},[s,a]),p=E.useRef(),g=E.useCallback(()=>{if(!s)return lft;const k=!!(s.isInitialized||s.initializedStoreOnce)&&h.every(T=>jdt(T,s,a)),C=t.lng||s.language,M=d.current,R=p.current;if(R&&R.ready===k&&R.lng===C&&R.keyPrefix===l&&R.revision===M)return R;const O={t:s.getFixedT(C,a.nsMode==="fallback"?h:h[0],l),ready:k,lng:C,keyPrefix:l,revision:M};return p.current=O,O},[s,h,l,a,t.lng]),[m,_]=E.useState(0),{t:v,ready:y}=e9.useSyncExternalStore(f,g,g);E.useEffect(()=>{if(s&&!y&&!o){const k=()=>_(C=>C+1);t.lng?J3(s,t.lng,h,k):fO(s,h,k)}},[s,t.lng,h,y,o,m]);const b=s||{},x=E.useRef(null),S=E.useRef(),w=k=>{const C=Object.getOwnPropertyDescriptors(k);C.__original&&delete C.__original;const M=Object.create(Object.getPrototypeOf(k),C);if(!Object.prototype.hasOwnProperty.call(M,"__original"))try{Object.defineProperty(M,"__original",{value:k,writable:!1,enumerable:!1,configurable:!1})}catch{}return M},A=E.useMemo(()=>{const k=b,C=k?.language;let M=k;k&&(x.current&&x.current.__original===k?S.current!==C?(M=w(k),x.current=M,S.current=C):M=x.current:(M=w(k),x.current=M,S.current=C));const R=[v,M,y];return R.t=v,R.i18n=M,R.ready=y,R},[v,b,y,b.resolvedLanguage,b.language,b.languages]);if(s&&o&&!y)throw new Promise(k=>{const C=()=>k();t.lng?J3(s,t.lng,h,C):fO(s,h,C)});return A};function cft(i,t=[]){let e=[];function n(s,a){const o=E.createContext(a);o.displayName=s+"Context";const l=e.length;e=[...e,a];const u=h=>{const{scope:d,children:f,...p}=h,g=d?.[i]?.[l]||o,m=E.useMemo(()=>p,Object.values(p));return V.jsx(g.Provider,{value:m,children:f})};u.displayName=s+"Provider";function c(h,d){const f=d?.[i]?.[l]||o,p=E.useContext(f);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,c]}const r=()=>{const s=e.map(a=>E.createContext(a));return function(o){const l=o?.[i]||s;return E.useMemo(()=>({[`__scope${i}`]:{...o,[i]:l}}),[o,l])}};return r.scopeName=i,[n,hft(r,...t)]}function hft(...i){const t=i[0];if(i.length===1)return t;const e=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:u})=>{const h=l(s)[`__scope${u}`];return{...o,...h}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return e.scopeName=t.scopeName,e}function _s(i){const t=E.useRef(i);return E.useEffect(()=>{t.current=i}),E.useMemo(()=>(...e)=>t.current?.(...e),[])}var Hn=globalThis?.document?E.useLayoutEffect:()=>{};function tH(i,t){if(typeof i=="function")return i(t);i!=null&&(i.current=t)}function lb(...i){return t=>{let e=!1;const n=i.map(r=>{const s=tH(r,t);return!e&&typeof s=="function"&&(e=!0),s});if(e)return()=>{for(let r=0;r<n.length;r++){const s=n[r];typeof s=="function"?s():tH(i[r],null)}}}}function De(...i){return E.useCallback(lb(...i),i)}var dft=Symbol.for("react.lazy"),tw=$k[" use ".trim().toString()];function fft(i){return typeof i=="object"&&i!==null&&"then"in i}function i9(i){return i!=null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===dft&&"_payload"in i&&fft(i._payload)}function n9(i){const t=pft(i),e=E.forwardRef((n,r)=>{let{children:s,...a}=n;i9(s)&&typeof tw=="function"&&(s=tw(s._payload));const o=E.Children.toArray(s),l=o.find(mft);if(l){const u=l.props.children,c=o.map(h=>h===l?E.Children.count(u)>1?E.Children.only(null):E.isValidElement(u)?u.props.children:null:h);return V.jsx(t,{...a,ref:r,children:E.isValidElement(u)?E.cloneElement(u,void 0,c):null})}return V.jsx(t,{...a,ref:r,children:s})});return e.displayName=`${i}.Slot`,e}var LQt=n9("Slot");function pft(i){const t=E.forwardRef((e,n)=>{let{children:r,...s}=e;if(i9(r)&&typeof tw=="function"&&(r=tw(r._payload)),E.isValidElement(r)){const a=vft(r),o=_ft(s,r.props);return r.type!==E.Fragment&&(o.ref=n?lb(n,a):a),E.cloneElement(r,o)}return E.Children.count(r)>1?E.Children.only(null):null});return t.displayName=`${i}.SlotClone`,t}var gft=Symbol("radix.slottable");function mft(i){return E.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===gft}function _ft(i,t){const e={...t};for(const n in t){const r=i[n],s=t[n];/^on[A-Z]/.test(n)?r&&s?e[n]=(...o)=>{const l=s(...o);return r(...o),l}:r&&(e[n]=r):n==="style"?e[n]={...r,...s}:n==="className"&&(e[n]=[r,s].filter(Boolean).join(" "))}return{...i,...e}}function vft(i){let t=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?i.ref:(t=Object.getOwnPropertyDescriptor(i,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?i.props.ref:i.props.ref||i.ref)}var yft=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ub=yft.reduce((i,t)=>{const e=n9(`Primitive.${t}`),n=E.forwardRef((r,s)=>{const{asChild:a,...o}=r,l=a?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),V.jsx(l,{...o,ref:s})});return n.displayName=`Primitive.${t}`,{...i,[t]:n}},{});function bft(){return e9.useSyncExternalStore(xft,()=>!0,()=>!1)}function xft(){return()=>{}}var N2="Avatar",[Sft]=cft(N2),[wft,r9]=Sft(N2),s9=E.forwardRef((i,t)=>{const{__scopeAvatar:e,...n}=i,[r,s]=E.useState("idle");return V.jsx(wft,{scope:e,imageLoadingStatus:r,onImageLoadingStatusChange:s,children:V.jsx(ub.span,{...n,ref:t})})});s9.displayName=N2;var a9="AvatarImage",o9=E.forwardRef((i,t)=>{const{__scopeAvatar:e,src:n,onLoadingStatusChange:r=()=>{},...s}=i,a=r9(a9,e),o=Aft(n,s),l=_s(u=>{r(u),a.onImageLoadingStatusChange(u)});return Hn(()=>{o!=="idle"&&l(o)},[o,l]),o==="loaded"?V.jsx(ub.img,{...s,ref:t,src:n}):null});o9.displayName=a9;var l9="AvatarFallback",u9=E.forwardRef((i,t)=>{const{__scopeAvatar:e,delayMs:n,...r}=i,s=r9(l9,e),[a,o]=E.useState(n===void 0);return E.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(l)}},[n]),a&&s.imageLoadingStatus!=="loaded"?V.jsx(ub.span,{...r,ref:t}):null});u9.displayName=l9;function eH(i,t){return i?t?(i.src!==t&&(i.src=t),i.complete&&i.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Aft(i,{referrerPolicy:t,crossOrigin:e}){const n=bft(),r=E.useRef(null),s=n?(r.current||(r.current=new window.Image),r.current):null,[a,o]=E.useState(()=>eH(s,i));return Hn(()=>{o(eH(s,i))},[s,i]),Hn(()=>{const l=h=>()=>{o(h)};if(!s)return;const u=l("loaded"),c=l("error");return s.addEventListener("load",u),s.addEventListener("error",c),t&&(s.referrerPolicy=t),typeof e=="string"&&(s.crossOrigin=e),()=>{s.removeEventListener("load",u),s.removeEventListener("error",c)}},[s,e,t]),a}var BQt=s9,FQt=o9,zQt=u9;function c9(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(t=0;t<r;t++)i[t]&&(e=c9(i[t]))&&(n&&(n+=" "),n+=e)}else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function kft(){for(var i,t,e=0,n="",r=arguments.length;e<r;e++)(i=arguments[e])&&(t=c9(i))&&(n&&(n+=" "),n+=t);return n}const Cft=(i,t)=>{const e=new Array(i.length+t.length);for(let n=0;n<i.length;n++)e[n]=i[n];for(let n=0;n<t.length;n++)e[i.length+n]=t[n];return e},Mft=(i,t)=>({classGroupId:i,validator:t}),h9=(i=new Map,t=null,e)=>({nextPart:i,validators:t,classGroupId:e}),ew="-",iH=[],Tft="arbitrary..",Pft=i=>{const t=Rft(i),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return Eft(a);const o=a.split(ew),l=o[0]===""&&o.length>1?1:0;return d9(o,l,t)},getConflictingClassGroupIds:(a,o)=>{if(o){const l=n[a],u=e[a];return l?u?Cft(u,l):l:u||iH}return e[a]||iH}}},d9=(i,t,e)=>{if(i.length-t===0)return e.classGroupId;const r=i[t],s=e.nextPart.get(r);if(s){const u=d9(i,t+1,s);if(u)return u}const a=e.validators;if(a===null)return;const o=t===0?i.join(ew):i.slice(t).join(ew),l=a.length;for(let u=0;u<l;u++){const c=a[u];if(c.validator(o))return c.classGroupId}},Eft=i=>i.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=i.slice(1,-1),e=t.indexOf(":"),n=t.slice(0,e);return n?Tft+n:void 0})(),Rft=i=>{const{theme:t,classGroups:e}=i;return Oft(e,t)},Oft=(i,t)=>{const e=h9();for(const n in i){const r=i[n];j2(r,e,n,t)}return e},j2=(i,t,e,n)=>{const r=i.length;for(let s=0;s<r;s++){const a=i[s];Dft(a,t,e,n)}},Dft=(i,t,e,n)=>{if(typeof i=="string"){Ift(i,t,e);return}if(typeof i=="function"){Lft(i,t,e,n);return}Bft(i,t,e,n)},Ift=(i,t,e)=>{const n=i===""?t:f9(t,i);n.classGroupId=e},Lft=(i,t,e,n)=>{if(Fft(i)){j2(i(n),t,e,n);return}t.validators===null&&(t.validators=[]),t.validators.push(Mft(e,i))},Bft=(i,t,e,n)=>{const r=Object.entries(i),s=r.length;for(let a=0;a<s;a++){const[o,l]=r[a];j2(l,f9(t,o),e,n)}},f9=(i,t)=>{let e=i;const n=t.split(ew),r=n.length;for(let s=0;s<r;s++){const a=n[s];let o=e.nextPart.get(a);o||(o=h9(),e.nextPart.set(a,o)),e=o}return e},Fft=i=>"isThemeGetter"in i&&i.isThemeGetter===!0,zft=i=>{if(i<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),n=Object.create(null);const r=(s,a)=>{e[s]=a,t++,t>i&&(t=0,n=e,e=Object.create(null))};return{get(s){let a=e[s];if(a!==void 0)return a;if((a=n[s])!==void 0)return r(s,a),a},set(s,a){s in e?e[s]=a:r(s,a)}}},gO="!",nH=":",Nft=[],rH=(i,t,e,n,r)=>({modifiers:i,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:n,isExternal:r}),jft=i=>{const{prefix:t,experimentalParseClassName:e}=i;let n=r=>{const s=[];let a=0,o=0,l=0,u;const c=r.length;for(let g=0;g<c;g++){const m=r[g];if(a===0&&o===0){if(m===nH){s.push(r.slice(l,g)),l=g+1;continue}if(m==="/"){u=g;continue}}m==="["?a++:m==="]"?a--:m==="("?o++:m===")"&&o--}const h=s.length===0?r:r.slice(l);let d=h,f=!1;h.endsWith(gO)?(d=h.slice(0,-1),f=!0):h.startsWith(gO)&&(d=h.slice(1),f=!0);const p=u&&u>l?u-l:void 0;return rH(s,f,d,p)};if(t){const r=t+nH,s=n;n=a=>a.startsWith(r)?s(a.slice(r.length)):rH(Nft,!1,a,void 0,!0)}if(e){const r=n;n=s=>e({className:s,parseClassName:r})}return n},Hft=i=>{const t=new Map;return i.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let r=[];for(let s=0;s<e.length;s++){const a=e[s],o=a[0]==="[",l=t.has(a);o||l?(r.length>0&&(r.sort(),n.push(...r),r=[]),n.push(a)):r.push(a)}return r.length>0&&(r.sort(),n.push(...r)),n}},Vft=i=>({cache:zft(i.cacheSize),parseClassName:jft(i),sortModifiers:Hft(i),...Pft(i)}),Wft=/\s+/,$ft=(i,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:s}=t,a=[],o=i.trim().split(Wft);let l="";for(let u=o.length-1;u>=0;u-=1){const c=o[u],{isExternal:h,modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=e(c);if(h){l=c+(l.length>0?" "+l:l);continue}let m=!!g,_=n(m?p.substring(0,g):p);if(!_){if(!m){l=c+(l.length>0?" "+l:l);continue}if(_=n(p),!_){l=c+(l.length>0?" "+l:l);continue}m=!1}const v=d.length===0?"":d.length===1?d[0]:s(d).join(":"),y=f?v+gO:v,b=y+_;if(a.indexOf(b)>-1)continue;a.push(b);const x=r(_,m);for(let S=0;S<x.length;++S){const w=x[S];a.push(y+w)}l=c+(l.length>0?" "+l:l)}return l},Uft=(...i)=>{let t=0,e,n,r="";for(;t<i.length;)(e=i[t++])&&(n=p9(e))&&(r&&(r+=" "),r+=n);return r},p9=i=>{if(typeof i=="string")return i;let t,e="";for(let n=0;n<i.length;n++)i[n]&&(t=p9(i[n]))&&(e&&(e+=" "),e+=t);return e},Gft=(i,...t)=>{let e,n,r,s;const a=l=>{const u=t.reduce((c,h)=>h(c),i());return e=Vft(u),n=e.cache.get,r=e.cache.set,s=o,o(l)},o=l=>{const u=n(l);if(u)return u;const c=$ft(l,e);return r(l,c),c};return s=a,(...l)=>s(Uft(...l))},Yft=[],rr=i=>{const t=e=>e[i]||Yft;return t.isThemeGetter=!0,t},g9=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,m9=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Xft=/^\d+\/\d+$/,Kft=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qft=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zft=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Qft=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Jft=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bf=i=>Xft.test(i),$e=i=>!!i&&!Number.isNaN(Number(i)),dc=i=>!!i&&Number.isInteger(Number(i)),LP=i=>i.endsWith("%")&&$e(i.slice(0,-1)),au=i=>Kft.test(i),tpt=()=>!0,ept=i=>qft.test(i)&&!Zft.test(i),_9=()=>!1,ipt=i=>Qft.test(i),npt=i=>Jft.test(i),rpt=i=>!Xt(i)&&!Kt(i),spt=i=>Sm(i,b9,_9),Xt=i=>g9.test(i),Bh=i=>Sm(i,x9,ept),BP=i=>Sm(i,cpt,$e),sH=i=>Sm(i,v9,_9),apt=i=>Sm(i,y9,npt),Ix=i=>Sm(i,S9,ipt),Kt=i=>m9.test(i),p_=i=>wm(i,x9),opt=i=>wm(i,hpt),aH=i=>wm(i,v9),lpt=i=>wm(i,b9),upt=i=>wm(i,y9),Lx=i=>wm(i,S9,!0),Sm=(i,t,e)=>{const n=g9.exec(i);return n?n[1]?t(n[1]):e(n[2]):!1},wm=(i,t,e=!1)=>{const n=m9.exec(i);return n?n[1]?t(n[1]):e:!1},v9=i=>i==="position"||i==="percentage",y9=i=>i==="image"||i==="url",b9=i=>i==="length"||i==="size"||i==="bg-size",x9=i=>i==="length",cpt=i=>i==="number",hpt=i=>i==="family-name",S9=i=>i==="shadow",dpt=()=>{const i=rr("color"),t=rr("font"),e=rr("text"),n=rr("font-weight"),r=rr("tracking"),s=rr("leading"),a=rr("breakpoint"),o=rr("container"),l=rr("spacing"),u=rr("radius"),c=rr("shadow"),h=rr("inset-shadow"),d=rr("text-shadow"),f=rr("drop-shadow"),p=rr("blur"),g=rr("perspective"),m=rr("aspect"),_=rr("ease"),v=rr("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],x=()=>[...b(),Kt,Xt],S=()=>["auto","hidden","clip","visible","scroll"],w=()=>["auto","contain","none"],A=()=>[Kt,Xt,l],k=()=>[Bf,"full","auto",...A()],C=()=>[dc,"none","subgrid",Kt,Xt],M=()=>["auto",{span:["full",dc,Kt,Xt]},dc,Kt,Xt],R=()=>[dc,"auto",Kt,Xt],P=()=>["auto","min","max","fr",Kt,Xt],O=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],T=()=>["start","end","center","stretch","center-safe","end-safe"],D=()=>["auto",...A()],B=()=>[Bf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],I=()=>[i,Kt,Xt],F=()=>[...b(),aH,sH,{position:[Kt,Xt]}],j=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",lpt,spt,{size:[Kt,Xt]}],U=()=>[LP,p_,Bh],K=()=>["","none","full",u,Kt,Xt],q=()=>["",$e,p_,Bh],Z=()=>["solid","dashed","dotted","double"],at=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>[$e,LP,aH,sH],ft=()=>["","none",p,Kt,Xt],pt=()=>["none",$e,Kt,Xt],rt=()=>["none",$e,Kt,Xt],gt=()=>[$e,Kt,Xt],mt=()=>[Bf,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[au],breakpoint:[au],color:[tpt],container:[au],"drop-shadow":[au],ease:["in","out","in-out"],font:[rpt],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[au],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[au],shadow:[au],spacing:["px",$e],text:[au],"text-shadow":[au],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Bf,Xt,Kt,m]}],container:["container"],columns:[{columns:[$e,Xt,Kt,o]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:x()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:w()}],"overscroll-x":[{"overscroll-x":w()}],"overscroll-y":[{"overscroll-y":w()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[dc,"auto",Kt,Xt]}],basis:[{basis:[Bf,"full","auto",o,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$e,Bf,"auto","initial","none",Xt]}],grow:[{grow:["",$e,Kt,Xt]}],shrink:[{shrink:["",$e,Kt,Xt]}],order:[{order:[dc,"first","last","none",Kt,Xt]}],"grid-cols":[{"grid-cols":C()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":C()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...O(),"normal"]}],"justify-items":[{"justify-items":[...T(),"normal"]}],"justify-self":[{"justify-self":["auto",...T()]}],"align-content":[{content:["normal",...O()]}],"align-items":[{items:[...T(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...T(),{baseline:["","last"]}]}],"place-content":[{"place-content":O()}],"place-items":[{"place-items":[...T(),"baseline"]}],"place-self":[{"place-self":["auto",...T()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:D()}],mx:[{mx:D()}],my:[{my:D()}],ms:[{ms:D()}],me:[{me:D()}],mt:[{mt:D()}],mr:[{mr:D()}],mb:[{mb:D()}],ml:[{ml:D()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[o,"screen",...B()]}],"min-w":[{"min-w":[o,"screen","none",...B()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",e,p_,Bh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Kt,BP]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",LP,Xt]}],"font-family":[{font:[opt,Xt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Kt,Xt]}],"line-clamp":[{"line-clamp":[$e,"none",Kt,BP]}],leading:[{leading:[s,...A()]}],"list-image":[{"list-image":["none",Kt,Xt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Kt,Xt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:[$e,"from-font","auto",Kt,Bh]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[$e,"auto",Kt,Xt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Kt,Xt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Kt,Xt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:F()}],"bg-repeat":[{bg:j()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},dc,Kt,Xt],radial:["",Kt,Xt],conic:[dc,Kt,Xt]},upt,apt]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:U()}],"gradient-via-pos":[{via:U()}],"gradient-to-pos":[{to:U()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:K()}],"rounded-s":[{"rounded-s":K()}],"rounded-e":[{"rounded-e":K()}],"rounded-t":[{"rounded-t":K()}],"rounded-r":[{"rounded-r":K()}],"rounded-b":[{"rounded-b":K()}],"rounded-l":[{"rounded-l":K()}],"rounded-ss":[{"rounded-ss":K()}],"rounded-se":[{"rounded-se":K()}],"rounded-ee":[{"rounded-ee":K()}],"rounded-es":[{"rounded-es":K()}],"rounded-tl":[{"rounded-tl":K()}],"rounded-tr":[{"rounded-tr":K()}],"rounded-br":[{"rounded-br":K()}],"rounded-bl":[{"rounded-bl":K()}],"border-w":[{border:q()}],"border-w-x":[{"border-x":q()}],"border-w-y":[{"border-y":q()}],"border-w-s":[{"border-s":q()}],"border-w-e":[{"border-e":q()}],"border-w-t":[{"border-t":q()}],"border-w-r":[{"border-r":q()}],"border-w-b":[{"border-b":q()}],"border-w-l":[{"border-l":q()}],"divide-x":[{"divide-x":q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Z(),"hidden","none"]}],"divide-style":[{divide:[...Z(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...Z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$e,Kt,Xt]}],"outline-w":[{outline:["",$e,p_,Bh]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",c,Lx,Ix]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",h,Lx,Ix]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[$e,Bh]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":q()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",d,Lx,Ix]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[$e,Kt,Xt]}],"mix-blend":[{"mix-blend":[...at(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":at()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$e]}],"mask-image-linear-from-pos":[{"mask-linear-from":$()}],"mask-image-linear-to-pos":[{"mask-linear-to":$()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":$()}],"mask-image-t-to-pos":[{"mask-t-to":$()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":$()}],"mask-image-r-to-pos":[{"mask-r-to":$()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":$()}],"mask-image-b-to-pos":[{"mask-b-to":$()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":$()}],"mask-image-l-to-pos":[{"mask-l-to":$()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":$()}],"mask-image-x-to-pos":[{"mask-x-to":$()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":$()}],"mask-image-y-to-pos":[{"mask-y-to":$()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[Kt,Xt]}],"mask-image-radial-from-pos":[{"mask-radial-from":$()}],"mask-image-radial-to-pos":[{"mask-radial-to":$()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":b()}],"mask-image-conic-pos":[{"mask-conic":[$e]}],"mask-image-conic-from-pos":[{"mask-conic-from":$()}],"mask-image-conic-to-pos":[{"mask-conic-to":$()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:F()}],"mask-repeat":[{mask:j()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Kt,Xt]}],filter:[{filter:["","none",Kt,Xt]}],blur:[{blur:ft()}],brightness:[{brightness:[$e,Kt,Xt]}],contrast:[{contrast:[$e,Kt,Xt]}],"drop-shadow":[{"drop-shadow":["","none",f,Lx,Ix]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",$e,Kt,Xt]}],"hue-rotate":[{"hue-rotate":[$e,Kt,Xt]}],invert:[{invert:["",$e,Kt,Xt]}],saturate:[{saturate:[$e,Kt,Xt]}],sepia:[{sepia:["",$e,Kt,Xt]}],"backdrop-filter":[{"backdrop-filter":["","none",Kt,Xt]}],"backdrop-blur":[{"backdrop-blur":ft()}],"backdrop-brightness":[{"backdrop-brightness":[$e,Kt,Xt]}],"backdrop-contrast":[{"backdrop-contrast":[$e,Kt,Xt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$e,Kt,Xt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$e,Kt,Xt]}],"backdrop-invert":[{"backdrop-invert":["",$e,Kt,Xt]}],"backdrop-opacity":[{"backdrop-opacity":[$e,Kt,Xt]}],"backdrop-saturate":[{"backdrop-saturate":[$e,Kt,Xt]}],"backdrop-sepia":[{"backdrop-sepia":["",$e,Kt,Xt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Kt,Xt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$e,"initial",Kt,Xt]}],ease:[{ease:["linear","initial",_,Kt,Xt]}],delay:[{delay:[$e,Kt,Xt]}],animate:[{animate:["none",v,Kt,Xt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,Kt,Xt]}],"perspective-origin":[{"perspective-origin":x()}],rotate:[{rotate:pt()}],"rotate-x":[{"rotate-x":pt()}],"rotate-y":[{"rotate-y":pt()}],"rotate-z":[{"rotate-z":pt()}],scale:[{scale:rt()}],"scale-x":[{"scale-x":rt()}],"scale-y":[{"scale-y":rt()}],"scale-z":[{"scale-z":rt()}],"scale-3d":["scale-3d"],skew:[{skew:gt()}],"skew-x":[{"skew-x":gt()}],"skew-y":[{"skew-y":gt()}],transform:[{transform:[Kt,Xt,"","none","gpu","cpu"]}],"transform-origin":[{origin:x()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:mt()}],"translate-x":[{"translate-x":mt()}],"translate-y":[{"translate-y":mt()}],"translate-z":[{"translate-z":mt()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Kt,Xt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Kt,Xt]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[$e,p_,Bh,BP]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},NQt=Gft(dpt);function Et(i,t,{checkForDefaultPrevented:e=!0}={}){return function(r){if(i?.(r),e===!1||!r.defaultPrevented)return t?.(r)}}function fpt(i,t){const e=E.createContext(t),n=s=>{const{children:a,...o}=s,l=E.useMemo(()=>o,Object.values(o));return V.jsx(e.Provider,{value:l,children:a})};n.displayName=i+"Provider";function r(s){const a=E.useContext(e);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${i}\``)}return[n,r]}function rs(i,t=[]){let e=[];function n(s,a){const o=E.createContext(a),l=e.length;e=[...e,a];const u=h=>{const{scope:d,children:f,...p}=h,g=d?.[i]?.[l]||o,m=E.useMemo(()=>p,Object.values(p));return V.jsx(g.Provider,{value:m,children:f})};u.displayName=s+"Provider";function c(h,d){const f=d?.[i]?.[l]||o,p=E.useContext(f);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,c]}const r=()=>{const s=e.map(a=>E.createContext(a));return function(o){const l=o?.[i]||s;return E.useMemo(()=>({[`__scope${i}`]:{...o,[i]:l}}),[o,l])}};return r.scopeName=i,[n,ppt(r,...t)]}function ppt(...i){const t=i[0];if(i.length===1)return t;const e=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:u})=>{const h=l(s)[`__scope${u}`];return{...o,...h}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return e.scopeName=t.scopeName,e}var gpt=$k[" useInsertionEffect ".trim().toString()]||Hn;function oo({prop:i,defaultProp:t,onChange:e=()=>{},caller:n}){const[r,s,a]=mpt({defaultProp:t,onChange:e}),o=i!==void 0,l=o?i:r;{const c=E.useRef(i!==void 0);E.useEffect(()=>{const h=c.current;h!==o&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=o},[o,n])}const u=E.useCallback(c=>{if(o){const h=_pt(c)?c(i):c;h!==i&&a.current?.(h)}else s(c)},[o,i,s,a]);return[l,u]}function mpt({defaultProp:i,onChange:t}){const[e,n]=E.useState(i),r=E.useRef(e),s=E.useRef(t);return gpt(()=>{s.current=t},[t]),E.useEffect(()=>{r.current!==e&&(s.current?.(e),r.current=e)},[e,r]),[e,n,s]}function _pt(i){return typeof i=="function"}function Nd(i){const t=vpt(i),e=E.forwardRef((n,r)=>{const{children:s,...a}=n,o=E.Children.toArray(s),l=o.find(ypt);if(l){const u=l.props.children,c=o.map(h=>h===l?E.Children.count(u)>1?E.Children.only(null):E.isValidElement(u)?u.props.children:null:h);return V.jsx(t,{...a,ref:r,children:E.isValidElement(u)?E.cloneElement(u,void 0,c):null})}return V.jsx(t,{...a,ref:r,children:s})});return e.displayName=`${i}.Slot`,e}function vpt(i){const t=E.forwardRef((e,n)=>{const{children:r,...s}=e;if(E.isValidElement(r)){const a=xpt(r),o=bpt(s,r.props);return r.type!==E.Fragment&&(o.ref=n?lb(n,a):a),E.cloneElement(r,o)}return E.Children.count(r)>1?E.Children.only(null):null});return t.displayName=`${i}.SlotClone`,t}var w9=Symbol("radix.slottable");function A9(i){const t=({children:e})=>V.jsx(V.Fragment,{children:e});return t.displayName=`${i}.Slottable`,t.__radixId=w9,t}function ypt(i){return E.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===w9}function bpt(i,t){const e={...t};for(const n in t){const r=i[n],s=t[n];/^on[A-Z]/.test(n)?r&&s?e[n]=(...o)=>{const l=s(...o);return r(...o),l}:r&&(e[n]=r):n==="style"?e[n]={...r,...s}:n==="className"&&(e[n]=[r,s].filter(Boolean).join(" "))}return{...i,...e}}function xpt(i){let t=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?i.ref:(t=Object.getOwnPropertyDescriptor(i,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?i.props.ref:i.props.ref||i.ref)}var Spt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ue=Spt.reduce((i,t)=>{const e=Nd(`Primitive.${t}`),n=E.forwardRef((r,s)=>{const{asChild:a,...o}=r,l=a?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),V.jsx(l,{...o,ref:s})});return n.displayName=`Primitive.${t}`,{...i,[t]:n}},{});function H2(i,t){i&&rc.flushSync(()=>i.dispatchEvent(t))}function cC(i){const t=i+"CollectionProvider",[e,n]=rs(t),[r,s]=e(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:m,children:_}=g,v=Y.useRef(null),y=Y.useRef(new Map).current;return V.jsx(r,{scope:m,itemMap:y,collectionRef:v,children:_})};a.displayName=t;const o=i+"CollectionSlot",l=Nd(o),u=Y.forwardRef((g,m)=>{const{scope:_,children:v}=g,y=s(o,_),b=De(m,y.collectionRef);return V.jsx(l,{ref:b,children:v})});u.displayName=o;const c=i+"CollectionItemSlot",h="data-radix-collection-item",d=Nd(c),f=Y.forwardRef((g,m)=>{const{scope:_,children:v,...y}=g,b=Y.useRef(null),x=De(m,b),S=s(c,_);return Y.useEffect(()=>(S.itemMap.set(b,{ref:b,...y}),()=>void S.itemMap.delete(b))),V.jsx(d,{[h]:"",ref:x,children:v})});f.displayName=c;function p(g){const m=s(i+"CollectionConsumer",g);return Y.useCallback(()=>{const v=m.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(m.itemMap.values()).sort((S,w)=>y.indexOf(S.ref.current)-y.indexOf(w.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:a,Slot:u,ItemSlot:f},p,n]}var wpt=E.createContext(void 0);function hC(i){const t=E.useContext(wpt);return i||t||"ltr"}function Apt(i,t=globalThis?.document){const e=_s(i);E.useEffect(()=>{const n=r=>{r.key==="Escape"&&e(r)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[e,t])}var kpt="DismissableLayer",mO="dismissableLayer.update",Cpt="dismissableLayer.pointerDownOutside",Mpt="dismissableLayer.focusOutside",oH,k9=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uf=E.forwardRef((i,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=i,u=E.useContext(k9),[c,h]=E.useState(null),d=c?.ownerDocument??globalThis?.document,[,f]=E.useState({}),p=De(t,w=>h(w)),g=Array.from(u.layers),[m]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=g.indexOf(m),v=c?g.indexOf(c):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,b=v>=_,x=Ppt(w=>{const A=w.target,k=[...u.branches].some(C=>C.contains(A));!b||k||(r?.(w),a?.(w),w.defaultPrevented||o?.())},d),S=Ept(w=>{const A=w.target;[...u.branches].some(C=>C.contains(A))||(s?.(w),a?.(w),w.defaultPrevented||o?.())},d);return Apt(w=>{v===u.layers.size-1&&(n?.(w),!w.defaultPrevented&&o&&(w.preventDefault(),o()))},d),E.useEffect(()=>{if(c)return e&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(oH=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),lH(),()=>{e&&u.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=oH)}},[c,d,e,u]),E.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),lH())},[c,u]),E.useEffect(()=>{const w=()=>f({});return document.addEventListener(mO,w),()=>document.removeEventListener(mO,w)},[]),V.jsx(ue.div,{...l,ref:p,style:{pointerEvents:y?b?"auto":"none":void 0,...i.style},onFocusCapture:Et(i.onFocusCapture,S.onFocusCapture),onBlurCapture:Et(i.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Et(i.onPointerDownCapture,x.onPointerDownCapture)})});uf.displayName=kpt;var Tpt="DismissableLayerBranch",C9=E.forwardRef((i,t)=>{const e=E.useContext(k9),n=E.useRef(null),r=De(t,n);return E.useEffect(()=>{const s=n.current;if(s)return e.branches.add(s),()=>{e.branches.delete(s)}},[e.branches]),V.jsx(ue.div,{...i,ref:r})});C9.displayName=Tpt;function Ppt(i,t=globalThis?.document){const e=_s(i),n=E.useRef(!1),r=E.useRef(()=>{});return E.useEffect(()=>{const s=o=>{if(o.target&&!n.current){let l=function(){M9(Cpt,e,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=l,t.addEventListener("click",r.current,{once:!0})):l()}else t.removeEventListener("click",r.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,e]),{onPointerDownCapture:()=>n.current=!0}}function Ept(i,t=globalThis?.document){const e=_s(i),n=E.useRef(!1);return E.useEffect(()=>{const r=s=>{s.target&&!n.current&&M9(Mpt,e,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function lH(){const i=new CustomEvent(mO);document.dispatchEvent(i)}function M9(i,t,e,{discrete:n}){const r=e.originalEvent.target,s=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:e});t&&r.addEventListener(i,t,{once:!0}),n?H2(r,s):r.dispatchEvent(s)}var Rpt=uf,Opt=C9,FP=0;function dC(){E.useEffect(()=>{const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",i[0]??uH()),document.body.insertAdjacentElement("beforeend",i[1]??uH()),FP++,()=>{FP===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),FP--}},[])}function uH(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var zP="focusScope.autoFocusOnMount",NP="focusScope.autoFocusOnUnmount",cH={bubbles:!1,cancelable:!0},Dpt="FocusScope",cb=E.forwardRef((i,t)=>{const{loop:e=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...a}=i,[o,l]=E.useState(null),u=_s(r),c=_s(s),h=E.useRef(null),d=De(t,g=>l(g)),f=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(n){let g=function(y){if(f.paused||!o)return;const b=y.target;o.contains(b)?h.current=b:yc(h.current,{select:!0})},m=function(y){if(f.paused||!o)return;const b=y.relatedTarget;b!==null&&(o.contains(b)||yc(h.current,{select:!0}))},_=function(y){if(document.activeElement===document.body)for(const x of y)x.removedNodes.length>0&&yc(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",m);const v=new MutationObserver(_);return o&&v.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",m),v.disconnect()}}},[n,o,f.paused]),E.useEffect(()=>{if(o){dH.add(f);const g=document.activeElement;if(!o.contains(g)){const _=new CustomEvent(zP,cH);o.addEventListener(zP,u),o.dispatchEvent(_),_.defaultPrevented||(Ipt(Npt(T9(o)),{select:!0}),document.activeElement===g&&yc(o))}return()=>{o.removeEventListener(zP,u),setTimeout(()=>{const _=new CustomEvent(NP,cH);o.addEventListener(NP,c),o.dispatchEvent(_),_.defaultPrevented||yc(g??document.body,{select:!0}),o.removeEventListener(NP,c),dH.remove(f)},0)}}},[o,u,c,f]);const p=E.useCallback(g=>{if(!e&&!n||f.paused)return;const m=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,_=document.activeElement;if(m&&_){const v=g.currentTarget,[y,b]=Lpt(v);y&&b?!g.shiftKey&&_===b?(g.preventDefault(),e&&yc(y,{select:!0})):g.shiftKey&&_===y&&(g.preventDefault(),e&&yc(b,{select:!0})):_===v&&g.preventDefault()}},[e,n,f.paused]);return V.jsx(ue.div,{tabIndex:-1,...a,ref:d,onKeyDown:p})});cb.displayName=Dpt;function Ipt(i,{select:t=!1}={}){const e=document.activeElement;for(const n of i)if(yc(n,{select:t}),document.activeElement!==e)return}function Lpt(i){const t=T9(i),e=hH(t,i),n=hH(t.reverse(),i);return[e,n]}function T9(i){const t=[],e=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function hH(i,t){for(const e of i)if(!Bpt(e,{upTo:t}))return e}function Bpt(i,{upTo:t}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(t!==void 0&&i===t)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function Fpt(i){return i instanceof HTMLInputElement&&"select"in i}function yc(i,{select:t=!1}={}){if(i&&i.focus){const e=document.activeElement;i.focus({preventScroll:!0}),i!==e&&Fpt(i)&&t&&i.select()}}var dH=zpt();function zpt(){let i=[];return{add(t){const e=i[0];t!==e&&e?.pause(),i=fH(i,t),i.unshift(t)},remove(t){i=fH(i,t),i[0]?.resume()}}}function fH(i,t){const e=[...i],n=e.indexOf(t);return n!==-1&&e.splice(n,1),e}function Npt(i){return i.filter(t=>t.tagName!=="A")}var jpt=$k[" useId ".trim().toString()]||(()=>{}),Hpt=0;function eo(i){const[t,e]=E.useState(jpt());return Hn(()=>{e(n=>n??String(Hpt++))},[i]),t?`radix-${t}`:""}const Vpt=["top","right","bottom","left"],sh=Math.min,da=Math.max,iw=Math.round,Bx=Math.floor,Wl=i=>({x:i,y:i}),Wpt={left:"right",right:"left",bottom:"top",top:"bottom"},$pt={start:"end",end:"start"};function _O(i,t,e){return da(i,sh(t,e))}function Yu(i,t){return typeof i=="function"?i(t):i}function Xu(i){return i.split("-")[0]}function Am(i){return i.split("-")[1]}function V2(i){return i==="x"?"y":"x"}function W2(i){return i==="y"?"height":"width"}const Upt=new Set(["top","bottom"]);function El(i){return Upt.has(Xu(i))?"y":"x"}function $2(i){return V2(El(i))}function Gpt(i,t,e){e===void 0&&(e=!1);const n=Am(i),r=$2(i),s=W2(r);let a=r==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=nw(a)),[a,nw(a)]}function Ypt(i){const t=nw(i);return[vO(i),t,vO(t)]}function vO(i){return i.replace(/start|end/g,t=>$pt[t])}const pH=["left","right"],gH=["right","left"],Xpt=["top","bottom"],Kpt=["bottom","top"];function qpt(i,t,e){switch(i){case"top":case"bottom":return e?t?gH:pH:t?pH:gH;case"left":case"right":return t?Xpt:Kpt;default:return[]}}function Zpt(i,t,e,n){const r=Am(i);let s=qpt(Xu(i),e==="start",n);return r&&(s=s.map(a=>a+"-"+r),t&&(s=s.concat(s.map(vO)))),s}function nw(i){return i.replace(/left|right|bottom|top/g,t=>Wpt[t])}function Qpt(i){return{top:0,right:0,bottom:0,left:0,...i}}function P9(i){return typeof i!="number"?Qpt(i):{top:i,right:i,bottom:i,left:i}}function rw(i){const{x:t,y:e,width:n,height:r}=i;return{width:n,height:r,top:e,left:t,right:t+n,bottom:e+r,x:t,y:e}}function mH(i,t,e){let{reference:n,floating:r}=i;const s=El(t),a=$2(t),o=W2(a),l=Xu(t),u=s==="y",c=n.x+n.width/2-r.width/2,h=n.y+n.height/2-r.height/2,d=n[o]/2-r[o]/2;let f;switch(l){case"top":f={x:c,y:n.y-r.height};break;case"bottom":f={x:c,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-r.width,y:h};break;default:f={x:n.x,y:n.y}}switch(Am(t)){case"start":f[a]-=d*(e&&u?-1:1);break;case"end":f[a]+=d*(e&&u?-1:1);break}return f}const Jpt=async(i,t,e)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:a}=e,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:i,floating:t,strategy:r}),{x:c,y:h}=mH(u,n,l),d=n,f={},p=0;for(let g=0;g<o.length;g++){const{name:m,fn:_}=o[g],{x:v,y,data:b,reset:x}=await _({x:c,y:h,initialPlacement:n,placement:d,strategy:r,middlewareData:f,rects:u,platform:a,elements:{reference:i,floating:t}});c=v??c,h=y??h,f={...f,[m]:{...f[m],...b}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(u=x.rects===!0?await a.getElementRects({reference:i,floating:t,strategy:r}):x.rects),{x:c,y:h}=mH(u,d,l)),g=-1)}return{x:c,y:h,placement:d,strategy:r,middlewareData:f}};async function Wy(i,t){var e;t===void 0&&(t={});const{x:n,y:r,platform:s,rects:a,elements:o,strategy:l}=i,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=Yu(t,i),p=P9(f),m=o[d?h==="floating"?"reference":"floating":h],_=rw(await s.getClippingRect({element:(e=await(s.isElement==null?void 0:s.isElement(m)))==null||e?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:u,rootBoundary:c,strategy:l})),v=h==="floating"?{x:n,y:r,width:a.floating.width,height:a.floating.height}:a.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),b=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},x=rw(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:y,strategy:l}):v);return{top:(_.top-x.top+p.top)/b.y,bottom:(x.bottom-_.bottom+p.bottom)/b.y,left:(_.left-x.left+p.left)/b.x,right:(x.right-_.right+p.right)/b.x}}const tgt=i=>({name:"arrow",options:i,async fn(t){const{x:e,y:n,placement:r,rects:s,platform:a,elements:o,middlewareData:l}=t,{element:u,padding:c=0}=Yu(i,t)||{};if(u==null)return{};const h=P9(c),d={x:e,y:n},f=$2(r),p=W2(f),g=await a.getDimensions(u),m=f==="y",_=m?"top":"left",v=m?"bottom":"right",y=m?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[f]-d[f]-s.floating[p],x=d[f]-s.reference[f],S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let w=S?S[y]:0;(!w||!await(a.isElement==null?void 0:a.isElement(S)))&&(w=o.floating[y]||s.floating[p]);const A=b/2-x/2,k=w/2-g[p]/2-1,C=sh(h[_],k),M=sh(h[v],k),R=C,P=w-g[p]-M,O=w/2-g[p]/2+A,T=_O(R,O,P),D=!l.arrow&&Am(r)!=null&&O!==T&&s.reference[p]/2-(O<R?C:M)-g[p]/2<0,B=D?O<R?O-R:O-P:0;return{[f]:d[f]+B,data:{[f]:T,centerOffset:O-T-B,...D&&{alignmentOffset:B}},reset:D}}}),egt=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(t){var e,n;const{placement:r,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=Yu(i,t);if((e=s.arrow)!=null&&e.alignmentOffset)return{};const _=Xu(r),v=El(o),y=Xu(o)===o,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),x=d||(y||!g?[nw(o)]:Ypt(o)),S=p!=="none";!d&&S&&x.push(...Zpt(o,g,p,b));const w=[o,...x],A=await Wy(t,m),k=[];let C=((n=s.flip)==null?void 0:n.overflows)||[];if(c&&k.push(A[_]),h){const O=Gpt(r,a,b);k.push(A[O[0]],A[O[1]])}if(C=[...C,{placement:r,overflows:k}],!k.every(O=>O<=0)){var M,R;const O=(((M=s.flip)==null?void 0:M.index)||0)+1,T=w[O];if(T&&(!(h==="alignment"?v!==El(T):!1)||C.every(I=>El(I.placement)===v?I.overflows[0]>0:!0)))return{data:{index:O,overflows:C},reset:{placement:T}};let D=(R=C.filter(B=>B.overflows[0]<=0).sort((B,I)=>B.overflows[1]-I.overflows[1])[0])==null?void 0:R.placement;if(!D)switch(f){case"bestFit":{var P;const B=(P=C.filter(I=>{if(S){const F=El(I.placement);return F===v||F==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(F=>F>0).reduce((F,j)=>F+j,0)]).sort((I,F)=>I[1]-F[1])[0])==null?void 0:P[0];B&&(D=B);break}case"initialPlacement":D=o;break}if(r!==D)return{reset:{placement:D}}}return{}}}};function _H(i,t){return{top:i.top-t.height,right:i.right-t.width,bottom:i.bottom-t.height,left:i.left-t.width}}function vH(i){return Vpt.some(t=>i[t]>=0)}const igt=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(t){const{rects:e}=t,{strategy:n="referenceHidden",...r}=Yu(i,t);switch(n){case"referenceHidden":{const s=await Wy(t,{...r,elementContext:"reference"}),a=_H(s,e.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:vH(a)}}}case"escaped":{const s=await Wy(t,{...r,altBoundary:!0}),a=_H(s,e.floating);return{data:{escapedOffsets:a,escaped:vH(a)}}}default:return{}}}}},E9=new Set(["left","top"]);async function ngt(i,t){const{placement:e,platform:n,elements:r}=i,s=await(n.isRTL==null?void 0:n.isRTL(r.floating)),a=Xu(e),o=Am(e),l=El(e)==="y",u=E9.has(a)?-1:1,c=s&&l?-1:1,h=Yu(t,i);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof p=="number"&&(f=o==="end"?p*-1:p),l?{x:f*c,y:d*u}:{x:d*u,y:f*c}}const rgt=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(t){var e,n;const{x:r,y:s,placement:a,middlewareData:o}=t,l=await ngt(t,i);return a===((e=o.offset)==null?void 0:e.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:a}}}}},sgt=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(t){const{x:e,y:n,placement:r}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:m=>{let{x:_,y:v}=m;return{x:_,y:v}}},...l}=Yu(i,t),u={x:e,y:n},c=await Wy(t,l),h=El(Xu(r)),d=V2(h);let f=u[d],p=u[h];if(s){const m=d==="y"?"top":"left",_=d==="y"?"bottom":"right",v=f+c[m],y=f-c[_];f=_O(v,f,y)}if(a){const m=h==="y"?"top":"left",_=h==="y"?"bottom":"right",v=p+c[m],y=p-c[_];p=_O(v,p,y)}const g=o.fn({...t,[d]:f,[h]:p});return{...g,data:{x:g.x-e,y:g.y-n,enabled:{[d]:s,[h]:a}}}}}},agt=function(i){return i===void 0&&(i={}),{options:i,fn(t){const{x:e,y:n,placement:r,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=Yu(i,t),c={x:e,y:n},h=El(r),d=V2(h);let f=c[d],p=c[h];const g=Yu(o,t),m=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const y=d==="y"?"height":"width",b=s.reference[d]-s.floating[y]+m.mainAxis,x=s.reference[d]+s.reference[y]-m.mainAxis;f<b?f=b:f>x&&(f=x)}if(u){var _,v;const y=d==="y"?"width":"height",b=E9.has(Xu(r)),x=s.reference[h]-s.floating[y]+(b&&((_=a.offset)==null?void 0:_[h])||0)+(b?0:m.crossAxis),S=s.reference[h]+s.reference[y]+(b?0:((v=a.offset)==null?void 0:v[h])||0)-(b?m.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[d]:f,[h]:p}}}},ogt=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(t){var e,n;const{placement:r,rects:s,platform:a,elements:o}=t,{apply:l=()=>{},...u}=Yu(i,t),c=await Wy(t,u),h=Xu(r),d=Am(r),f=El(r)==="y",{width:p,height:g}=s.floating;let m,_;h==="top"||h==="bottom"?(m=h,_=d===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(_=h,m=d==="end"?"top":"bottom");const v=g-c.top-c.bottom,y=p-c.left-c.right,b=sh(g-c[m],v),x=sh(p-c[_],y),S=!t.middlewareData.shift;let w=b,A=x;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(A=y),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(w=v),S&&!d){const C=da(c.left,0),M=da(c.right,0),R=da(c.top,0),P=da(c.bottom,0);f?A=p-2*(C!==0||M!==0?C+M:da(c.left,c.right)):w=g-2*(R!==0||P!==0?R+P:da(c.top,c.bottom))}await l({...t,availableWidth:A,availableHeight:w});const k=await a.getDimensions(o.floating);return p!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}};function fC(){return typeof window<"u"}function km(i){return R9(i)?(i.nodeName||"").toLowerCase():"#document"}function _a(i){var t;return(i==null||(t=i.ownerDocument)==null?void 0:t.defaultView)||window}function ql(i){var t;return(t=(R9(i)?i.ownerDocument:i.document)||window.document)==null?void 0:t.documentElement}function R9(i){return fC()?i instanceof Node||i instanceof _a(i).Node:!1}function Xo(i){return fC()?i instanceof Element||i instanceof _a(i).Element:!1}function Gl(i){return fC()?i instanceof HTMLElement||i instanceof _a(i).HTMLElement:!1}function yH(i){return!fC()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof _a(i).ShadowRoot}const lgt=new Set(["inline","contents"]);function hb(i){const{overflow:t,overflowX:e,overflowY:n,display:r}=Ko(i);return/auto|scroll|overlay|hidden|clip/.test(t+n+e)&&!lgt.has(r)}const ugt=new Set(["table","td","th"]);function cgt(i){return ugt.has(km(i))}const hgt=[":popover-open",":modal"];function pC(i){return hgt.some(t=>{try{return i.matches(t)}catch{return!1}})}const dgt=["transform","translate","scale","rotate","perspective"],fgt=["transform","translate","scale","rotate","perspective","filter"],pgt=["paint","layout","strict","content"];function U2(i){const t=G2(),e=Xo(i)?Ko(i):i;return dgt.some(n=>e[n]?e[n]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||fgt.some(n=>(e.willChange||"").includes(n))||pgt.some(n=>(e.contain||"").includes(n))}function ggt(i){let t=ah(i);for(;Gl(t)&&!Lg(t);){if(U2(t))return t;if(pC(t))return null;t=ah(t)}return null}function G2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mgt=new Set(["html","body","#document"]);function Lg(i){return mgt.has(km(i))}function Ko(i){return _a(i).getComputedStyle(i)}function gC(i){return Xo(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function ah(i){if(km(i)==="html")return i;const t=i.assignedSlot||i.parentNode||yH(i)&&i.host||ql(i);return yH(t)?t.host:t}function O9(i){const t=ah(i);return Lg(t)?i.ownerDocument?i.ownerDocument.body:i.body:Gl(t)&&hb(t)?t:O9(t)}function $y(i,t,e){var n;t===void 0&&(t=[]),e===void 0&&(e=!0);const r=O9(i),s=r===((n=i.ownerDocument)==null?void 0:n.body),a=_a(r);if(s){const o=yO(a);return t.concat(a,a.visualViewport||[],hb(r)?r:[],o&&e?$y(o):[])}return t.concat(r,$y(r,[],e))}function yO(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function D9(i){const t=Ko(i);let e=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const r=Gl(i),s=r?i.offsetWidth:e,a=r?i.offsetHeight:n,o=iw(e)!==s||iw(n)!==a;return o&&(e=s,n=a),{width:e,height:n,$:o}}function Y2(i){return Xo(i)?i:i.contextElement}function rg(i){const t=Y2(i);if(!Gl(t))return Wl(1);const e=t.getBoundingClientRect(),{width:n,height:r,$:s}=D9(t);let a=(s?iw(e.width):e.width)/n,o=(s?iw(e.height):e.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const _gt=Wl(0);function I9(i){const t=_a(i);return!G2()||!t.visualViewport?_gt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vgt(i,t,e){return t===void 0&&(t=!1),!e||t&&e!==_a(i)?!1:t}function jd(i,t,e,n){t===void 0&&(t=!1),e===void 0&&(e=!1);const r=i.getBoundingClientRect(),s=Y2(i);let a=Wl(1);t&&(n?Xo(n)&&(a=rg(n)):a=rg(i));const o=vgt(s,e,n)?I9(s):Wl(0);let l=(r.left+o.x)/a.x,u=(r.top+o.y)/a.y,c=r.width/a.x,h=r.height/a.y;if(s){const d=_a(s),f=n&&Xo(n)?_a(n):n;let p=d,g=yO(p);for(;g&&n&&f!==p;){const m=rg(g),_=g.getBoundingClientRect(),v=Ko(g),y=_.left+(g.clientLeft+parseFloat(v.paddingLeft))*m.x,b=_.top+(g.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,u*=m.y,c*=m.x,h*=m.y,l+=y,u+=b,p=_a(g),g=yO(p)}}return rw({width:c,height:h,x:l,y:u})}function mC(i,t){const e=gC(i).scrollLeft;return t?t.left+e:jd(ql(i)).left+e}function L9(i,t){const e=i.getBoundingClientRect(),n=e.left+t.scrollLeft-mC(i,e),r=e.top+t.scrollTop;return{x:n,y:r}}function ygt(i){let{elements:t,rect:e,offsetParent:n,strategy:r}=i;const s=r==="fixed",a=ql(n),o=t?pC(t.floating):!1;if(n===a||o&&s)return e;let l={scrollLeft:0,scrollTop:0},u=Wl(1);const c=Wl(0),h=Gl(n);if((h||!h&&!s)&&((km(n)!=="body"||hb(a))&&(l=gC(n)),Gl(n))){const f=jd(n);u=rg(n),c.x=f.x+n.clientLeft,c.y=f.y+n.clientTop}const d=a&&!h&&!s?L9(a,l):Wl(0);return{width:e.width*u.x,height:e.height*u.y,x:e.x*u.x-l.scrollLeft*u.x+c.x+d.x,y:e.y*u.y-l.scrollTop*u.y+c.y+d.y}}function bgt(i){return Array.from(i.getClientRects())}function xgt(i){const t=ql(i),e=gC(i),n=i.ownerDocument.body,r=da(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=da(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-e.scrollLeft+mC(i);const o=-e.scrollTop;return Ko(n).direction==="rtl"&&(a+=da(t.clientWidth,n.clientWidth)-r),{width:r,height:s,x:a,y:o}}const bH=25;function Sgt(i,t){const e=_a(i),n=ql(i),r=e.visualViewport;let s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(r){s=r.width,a=r.height;const c=G2();(!c||c&&t==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}const u=mC(n);if(u<=0){const c=n.ownerDocument,h=c.body,d=getComputedStyle(h),f=c.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,p=Math.abs(n.clientWidth-h.clientWidth-f);p<=bH&&(s-=p)}else u<=bH&&(s+=u);return{width:s,height:a,x:o,y:l}}const wgt=new Set(["absolute","fixed"]);function Agt(i,t){const e=jd(i,!0,t==="fixed"),n=e.top+i.clientTop,r=e.left+i.clientLeft,s=Gl(i)?rg(i):Wl(1),a=i.clientWidth*s.x,o=i.clientHeight*s.y,l=r*s.x,u=n*s.y;return{width:a,height:o,x:l,y:u}}function xH(i,t,e){let n;if(t==="viewport")n=Sgt(i,e);else if(t==="document")n=xgt(ql(i));else if(Xo(t))n=Agt(t,e);else{const r=I9(i);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return rw(n)}function B9(i,t){const e=ah(i);return e===t||!Xo(e)||Lg(e)?!1:Ko(e).position==="fixed"||B9(e,t)}function kgt(i,t){const e=t.get(i);if(e)return e;let n=$y(i,[],!1).filter(o=>Xo(o)&&km(o)!=="body"),r=null;const s=Ko(i).position==="fixed";let a=s?ah(i):i;for(;Xo(a)&&!Lg(a);){const o=Ko(a),l=U2(a);!l&&o.position==="fixed"&&(r=null),(s?!l&&!r:!l&&o.position==="static"&&!!r&&wgt.has(r.position)||hb(a)&&!l&&B9(i,a))?n=n.filter(c=>c!==a):r=o,a=ah(a)}return t.set(i,n),n}function Cgt(i){let{element:t,boundary:e,rootBoundary:n,strategy:r}=i;const a=[...e==="clippingAncestors"?pC(t)?[]:kgt(t,this._c):[].concat(e),n],o=a[0],l=a.reduce((u,c)=>{const h=xH(t,c,r);return u.top=da(h.top,u.top),u.right=sh(h.right,u.right),u.bottom=sh(h.bottom,u.bottom),u.left=da(h.left,u.left),u},xH(t,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Mgt(i){const{width:t,height:e}=D9(i);return{width:t,height:e}}function Tgt(i,t,e){const n=Gl(t),r=ql(t),s=e==="fixed",a=jd(i,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=Wl(0);function u(){l.x=mC(r)}if(n||!n&&!s)if((km(t)!=="body"||hb(r))&&(o=gC(t)),n){const f=jd(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else r&&u();s&&!n&&r&&u();const c=r&&!n&&!s?L9(r,o):Wl(0),h=a.left+o.scrollLeft-l.x-c.x,d=a.top+o.scrollTop-l.y-c.y;return{x:h,y:d,width:a.width,height:a.height}}function jP(i){return Ko(i).position==="static"}function SH(i,t){if(!Gl(i)||Ko(i).position==="fixed")return null;if(t)return t(i);let e=i.offsetParent;return ql(i)===e&&(e=e.ownerDocument.body),e}function F9(i,t){const e=_a(i);if(pC(i))return e;if(!Gl(i)){let r=ah(i);for(;r&&!Lg(r);){if(Xo(r)&&!jP(r))return r;r=ah(r)}return e}let n=SH(i,t);for(;n&&cgt(n)&&jP(n);)n=SH(n,t);return n&&Lg(n)&&jP(n)&&!U2(n)?e:n||ggt(i)||e}const Pgt=async function(i){const t=this.getOffsetParent||F9,e=this.getDimensions,n=await e(i.floating);return{reference:Tgt(i.reference,await t(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Egt(i){return Ko(i).direction==="rtl"}const Rgt={convertOffsetParentRelativeRectToViewportRelativeRect:ygt,getDocumentElement:ql,getClippingRect:Cgt,getOffsetParent:F9,getElementRects:Pgt,getClientRects:bgt,getDimensions:Mgt,getScale:rg,isElement:Xo,isRTL:Egt};function z9(i,t){return i.x===t.x&&i.y===t.y&&i.width===t.width&&i.height===t.height}function Ogt(i,t){let e=null,n;const r=ql(i);function s(){var o;clearTimeout(n),(o=e)==null||o.disconnect(),e=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const u=i.getBoundingClientRect(),{left:c,top:h,width:d,height:f}=u;if(o||t(),!d||!f)return;const p=Bx(h),g=Bx(r.clientWidth-(c+d)),m=Bx(r.clientHeight-(h+f)),_=Bx(c),y={rootMargin:-p+"px "+-g+"px "+-m+"px "+-_+"px",threshold:da(0,sh(1,l))||1};let b=!0;function x(S){const w=S[0].intersectionRatio;if(w!==l){if(!b)return a();w?a(!1,w):n=setTimeout(()=>{a(!1,1e-7)},1e3)}w===1&&!z9(u,i.getBoundingClientRect())&&a(),b=!1}try{e=new IntersectionObserver(x,{...y,root:r.ownerDocument})}catch{e=new IntersectionObserver(x,y)}e.observe(i)}return a(!0),s}function Dgt(i,t,e,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=Y2(i),c=r||s?[...u?$y(u):[],...$y(t)]:[];c.forEach(_=>{r&&_.addEventListener("scroll",e,{passive:!0}),s&&_.addEventListener("resize",e)});const h=u&&o?Ogt(u,e):null;let d=-1,f=null;a&&(f=new ResizeObserver(_=>{let[v]=_;v&&v.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var y;(y=f)==null||y.observe(t)})),e()}),u&&!l&&f.observe(u),f.observe(t));let p,g=l?jd(i):null;l&&m();function m(){const _=jd(i);g&&!z9(g,_)&&e(),g=_,p=requestAnimationFrame(m)}return e(),()=>{var _;c.forEach(v=>{r&&v.removeEventListener("scroll",e),s&&v.removeEventListener("resize",e)}),h?.(),(_=f)==null||_.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const Igt=rgt,Lgt=sgt,Bgt=egt,Fgt=ogt,zgt=igt,wH=tgt,Ngt=agt,jgt=(i,t,e)=>{const n=new Map,r={platform:Rgt,...e},s={...r.platform,_c:n};return Jpt(i,t,{...r,platform:s})};var Hgt=typeof document<"u",Vgt=function(){},i1=Hgt?E.useLayoutEffect:Vgt;function sw(i,t){if(i===t)return!0;if(typeof i!=typeof t)return!1;if(typeof i=="function"&&i.toString()===t.toString())return!0;let e,n,r;if(i&&t&&typeof i=="object"){if(Array.isArray(i)){if(e=i.length,e!==t.length)return!1;for(n=e;n--!==0;)if(!sw(i[n],t[n]))return!1;return!0}if(r=Object.keys(i),e=r.length,e!==Object.keys(t).length)return!1;for(n=e;n--!==0;)if(!{}.hasOwnProperty.call(t,r[n]))return!1;for(n=e;n--!==0;){const s=r[n];if(!(s==="_owner"&&i.$$typeof)&&!sw(i[s],t[s]))return!1}return!0}return i!==i&&t!==t}function N9(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function AH(i,t){const e=N9(i);return Math.round(t*e)/e}function HP(i){const t=E.useRef(i);return i1(()=>{t.current=i}),t}function Wgt(i){i===void 0&&(i={});const{placement:t="bottom",strategy:e="absolute",middleware:n=[],platform:r,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:u}=i,[c,h]=E.useState({x:0,y:0,strategy:e,placement:t,middlewareData:{},isPositioned:!1}),[d,f]=E.useState(n);sw(d,n)||f(n);const[p,g]=E.useState(null),[m,_]=E.useState(null),v=E.useCallback(I=>{I!==S.current&&(S.current=I,g(I))},[]),y=E.useCallback(I=>{I!==w.current&&(w.current=I,_(I))},[]),b=s||p,x=a||m,S=E.useRef(null),w=E.useRef(null),A=E.useRef(c),k=l!=null,C=HP(l),M=HP(r),R=HP(u),P=E.useCallback(()=>{if(!S.current||!w.current)return;const I={placement:t,strategy:e,middleware:d};M.current&&(I.platform=M.current),jgt(S.current,w.current,I).then(F=>{const j={...F,isPositioned:R.current!==!1};O.current&&!sw(A.current,j)&&(A.current=j,rc.flushSync(()=>{h(j)}))})},[d,t,e,M,R]);i1(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(I=>({...I,isPositioned:!1})))},[u]);const O=E.useRef(!1);i1(()=>(O.current=!0,()=>{O.current=!1}),[]),i1(()=>{if(b&&(S.current=b),x&&(w.current=x),b&&x){if(C.current)return C.current(b,x,P);P()}},[b,x,P,C,k]);const T=E.useMemo(()=>({reference:S,floating:w,setReference:v,setFloating:y}),[v,y]),D=E.useMemo(()=>({reference:b,floating:x}),[b,x]),B=E.useMemo(()=>{const I={position:e,left:0,top:0};if(!D.floating)return I;const F=AH(D.floating,c.x),j=AH(D.floating,c.y);return o?{...I,transform:"translate("+F+"px, "+j+"px)",...N9(D.floating)>=1.5&&{willChange:"transform"}}:{position:e,left:F,top:j}},[e,o,D.floating,c.x,c.y]);return E.useMemo(()=>({...c,update:P,refs:T,elements:D,floatingStyles:B}),[c,P,T,D,B])}const $gt=i=>{function t(e){return{}.hasOwnProperty.call(e,"current")}return{name:"arrow",options:i,fn(e){const{element:n,padding:r}=typeof i=="function"?i(e):i;return n&&t(n)?n.current!=null?wH({element:n.current,padding:r}).fn(e):{}:n?wH({element:n,padding:r}).fn(e):{}}}},Ugt=(i,t)=>({...Igt(i),options:[i,t]}),Ggt=(i,t)=>({...Lgt(i),options:[i,t]}),Ygt=(i,t)=>({...Ngt(i),options:[i,t]}),Xgt=(i,t)=>({...Bgt(i),options:[i,t]}),Kgt=(i,t)=>({...Fgt(i),options:[i,t]}),qgt=(i,t)=>({...zgt(i),options:[i,t]}),Zgt=(i,t)=>({...$gt(i),options:[i,t]});var Qgt="Arrow",j9=E.forwardRef((i,t)=>{const{children:e,width:n=10,height:r=5,...s}=i;return V.jsx(ue.svg,{...s,ref:t,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?e:V.jsx("polygon",{points:"0,0 30,0 15,10"})})});j9.displayName=Qgt;var Jgt=j9;function _C(i){const[t,e]=E.useState(void 0);return Hn(()=>{if(i){e({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;a=u.inlineSize,o=u.blockSize}else a=i.offsetWidth,o=i.offsetHeight;e({width:a,height:o})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else e(void 0)},[i]),t}var X2="Popper",[H9,bh]=rs(X2),[tmt,V9]=H9(X2),W9=i=>{const{__scopePopper:t,children:e}=i,[n,r]=E.useState(null);return V.jsx(tmt,{scope:t,anchor:n,onAnchorChange:r,children:e})};W9.displayName=X2;var $9="PopperAnchor",U9=E.forwardRef((i,t)=>{const{__scopePopper:e,virtualRef:n,...r}=i,s=V9($9,e),a=E.useRef(null),o=De(t,a),l=E.useRef(null);return E.useEffect(()=>{const u=l.current;l.current=n?.current||a.current,u!==l.current&&s.onAnchorChange(l.current)}),n?null:V.jsx(ue.div,{...r,ref:o})});U9.displayName=$9;var K2="PopperContent",[emt,imt]=H9(K2),G9=E.forwardRef((i,t)=>{const{__scopePopper:e,side:n="bottom",sideOffset:r=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:h="partial",hideWhenDetached:d=!1,updatePositionStrategy:f="optimized",onPlaced:p,...g}=i,m=V9(K2,e),[_,v]=E.useState(null),y=De(t,$=>v($)),[b,x]=E.useState(null),S=_C(b),w=S?.width??0,A=S?.height??0,k=n+(s!=="center"?"-"+s:""),C=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},M=Array.isArray(u)?u:[u],R=M.length>0,P={padding:C,boundary:M.filter(rmt),altBoundary:R},{refs:O,floatingStyles:T,placement:D,isPositioned:B,middlewareData:I}=Wgt({strategy:"fixed",placement:k,whileElementsMounted:(...$)=>Dgt(...$,{animationFrame:f==="always"}),elements:{reference:m.anchor},middleware:[Ugt({mainAxis:r+A,alignmentAxis:a}),l&&Ggt({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Ygt():void 0,...P}),l&&Xgt({...P}),Kgt({...P,apply:({elements:$,rects:ft,availableWidth:pt,availableHeight:rt})=>{const{width:gt,height:mt}=ft.reference,Dt=$.floating.style;Dt.setProperty("--radix-popper-available-width",`${pt}px`),Dt.setProperty("--radix-popper-available-height",`${rt}px`),Dt.setProperty("--radix-popper-anchor-width",`${gt}px`),Dt.setProperty("--radix-popper-anchor-height",`${mt}px`)}}),b&&Zgt({element:b,padding:o}),smt({arrowWidth:w,arrowHeight:A}),d&&qgt({strategy:"referenceHidden",...P})]}),[F,j]=K9(D),H=_s(p);Hn(()=>{B&&H?.()},[B,H]);const U=I.arrow?.x,K=I.arrow?.y,q=I.arrow?.centerOffset!==0,[Z,at]=E.useState();return Hn(()=>{_&&at(window.getComputedStyle(_).zIndex)},[_]),V.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...T,transform:B?T.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Z,"--radix-popper-transform-origin":[I.transformOrigin?.x,I.transformOrigin?.y].join(" "),...I.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:V.jsx(emt,{scope:e,placedSide:F,onArrowChange:x,arrowX:U,arrowY:K,shouldHideArrow:q,children:V.jsx(ue.div,{"data-side":F,"data-align":j,...g,ref:y,style:{...g.style,animation:B?void 0:"none"}})})})});G9.displayName=K2;var Y9="PopperArrow",nmt={top:"bottom",right:"left",bottom:"top",left:"right"},X9=E.forwardRef(function(t,e){const{__scopePopper:n,...r}=t,s=imt(Y9,n),a=nmt[s.placedSide];return V.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:V.jsx(Jgt,{...r,ref:e,style:{...r.style,display:"block"}})})});X9.displayName=Y9;function rmt(i){return i!==null}var smt=i=>({name:"transformOrigin",options:i,fn(t){const{placement:e,rects:n,middlewareData:r}=t,a=r.arrow?.centerOffset!==0,o=a?0:i.arrowWidth,l=a?0:i.arrowHeight,[u,c]=K9(e),h={start:"0%",center:"50%",end:"100%"}[c],d=(r.arrow?.x??0)+o/2,f=(r.arrow?.y??0)+l/2;let p="",g="";return u==="bottom"?(p=a?h:`${d}px`,g=`${-l}px`):u==="top"?(p=a?h:`${d}px`,g=`${n.floating.height+l}px`):u==="right"?(p=`${-l}px`,g=a?h:`${f}px`):u==="left"&&(p=`${n.floating.width+l}px`,g=a?h:`${f}px`),{data:{x:p,y:g}}}});function K9(i){const[t,e="center"]=i.split("-");return[t,e]}var vC=W9,db=U9,yC=G9,bC=X9,amt="Portal",Cm=E.forwardRef((i,t)=>{const{container:e,...n}=i,[r,s]=E.useState(!1);Hn(()=>s(!0),[]);const a=e||r&&globalThis?.document?.body;return a?E7.createPortal(V.jsx(ue.div,{...n,ref:t}),a):null});Cm.displayName=amt;function omt(i,t){return E.useReducer((e,n)=>t[e][n]??e,i)}var ws=i=>{const{present:t,children:e}=i,n=lmt(t),r=typeof e=="function"?e({present:n.isPresent}):E.Children.only(e),s=De(n.ref,umt(r));return typeof e=="function"||n.isPresent?E.cloneElement(r,{ref:s}):null};ws.displayName="Presence";function lmt(i){const[t,e]=E.useState(),n=E.useRef(null),r=E.useRef(i),s=E.useRef("none"),a=i?"mounted":"unmounted",[o,l]=omt(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const u=Fx(n.current);s.current=o==="mounted"?u:"none"},[o]),Hn(()=>{const u=n.current,c=r.current;if(c!==i){const d=s.current,f=Fx(u);i?l("MOUNT"):f==="none"||u?.display==="none"?l("UNMOUNT"):l(c&&d!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=i}},[i,l]),Hn(()=>{if(t){let u;const c=t.ownerDocument.defaultView??window,h=f=>{const g=Fx(n.current).includes(CSS.escape(f.animationName));if(f.target===t&&g&&(l("ANIMATION_END"),!r.current)){const m=t.style.animationFillMode;t.style.animationFillMode="forwards",u=c.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=m)})}},d=f=>{f.target===t&&(s.current=Fx(n.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{c.clearTimeout(u),t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:E.useCallback(u=>{n.current=u?getComputedStyle(u):null,e(u)},[])}}function Fx(i){return i?.animationName||"none"}function umt(i){let t=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?i.ref:(t=Object.getOwnPropertyDescriptor(i,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?i.props.ref:i.props.ref||i.ref)}var VP="rovingFocusGroup.onEntryFocus",cmt={bubbles:!1,cancelable:!0},fb="RovingFocusGroup",[bO,q9,hmt]=cC(fb),[dmt,xC]=rs(fb,[hmt]),[fmt,pmt]=dmt(fb),Z9=E.forwardRef((i,t)=>V.jsx(bO.Provider,{scope:i.__scopeRovingFocusGroup,children:V.jsx(bO.Slot,{scope:i.__scopeRovingFocusGroup,children:V.jsx(gmt,{...i,ref:t})})}));Z9.displayName=fb;var gmt=E.forwardRef((i,t)=>{const{__scopeRovingFocusGroup:e,orientation:n,loop:r=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...h}=i,d=E.useRef(null),f=De(t,d),p=hC(s),[g,m]=oo({prop:a,defaultProp:o??null,onChange:l,caller:fb}),[_,v]=E.useState(!1),y=_s(u),b=q9(e),x=E.useRef(!1),[S,w]=E.useState(0);return E.useEffect(()=>{const A=d.current;if(A)return A.addEventListener(VP,y),()=>A.removeEventListener(VP,y)},[y]),V.jsx(fmt,{scope:e,orientation:n,dir:p,loop:r,currentTabStopId:g,onItemFocus:E.useCallback(A=>m(A),[m]),onItemShiftTab:E.useCallback(()=>v(!0),[]),onFocusableItemAdd:E.useCallback(()=>w(A=>A+1),[]),onFocusableItemRemove:E.useCallback(()=>w(A=>A-1),[]),children:V.jsx(ue.div,{tabIndex:_||S===0?-1:0,"data-orientation":n,...h,ref:f,style:{outline:"none",...i.style},onMouseDown:Et(i.onMouseDown,()=>{x.current=!0}),onFocus:Et(i.onFocus,A=>{const k=!x.current;if(A.target===A.currentTarget&&k&&!_){const C=new CustomEvent(VP,cmt);if(A.currentTarget.dispatchEvent(C),!C.defaultPrevented){const M=b().filter(D=>D.focusable),R=M.find(D=>D.active),P=M.find(D=>D.id===g),T=[R,P,...M].filter(Boolean).map(D=>D.ref.current);tX(T,c)}}x.current=!1}),onBlur:Et(i.onBlur,()=>v(!1))})})}),Q9="RovingFocusGroupItem",J9=E.forwardRef((i,t)=>{const{__scopeRovingFocusGroup:e,focusable:n=!0,active:r=!1,tabStopId:s,children:a,...o}=i,l=eo(),u=s||l,c=pmt(Q9,e),h=c.currentTabStopId===u,d=q9(e),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:g}=c;return E.useEffect(()=>{if(n)return f(),()=>p()},[n,f,p]),V.jsx(bO.ItemSlot,{scope:e,id:u,focusable:n,active:r,children:V.jsx(ue.span,{tabIndex:h?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:Et(i.onMouseDown,m=>{n?c.onItemFocus(u):m.preventDefault()}),onFocus:Et(i.onFocus,()=>c.onItemFocus(u)),onKeyDown:Et(i.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const _=vmt(m,c.orientation,c.dir);if(_!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let y=d().filter(b=>b.focusable).map(b=>b.ref.current);if(_==="last")y.reverse();else if(_==="prev"||_==="next"){_==="prev"&&y.reverse();const b=y.indexOf(m.currentTarget);y=c.loop?ymt(y,b+1):y.slice(b+1)}setTimeout(()=>tX(y))}}),children:typeof a=="function"?a({isCurrentTabStop:h,hasTabStop:g!=null}):a})})});J9.displayName=Q9;var mmt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _mt(i,t){return t!=="rtl"?i:i==="ArrowLeft"?"ArrowRight":i==="ArrowRight"?"ArrowLeft":i}function vmt(i,t,e){const n=_mt(i.key,e);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return mmt[n]}function tX(i,t=!1){const e=document.activeElement;for(const n of i)if(n===e||(n.focus({preventScroll:t}),document.activeElement!==e))return}function ymt(i,t){return i.map((e,n)=>i[(t+n)%i.length])}var eX=Z9,iX=J9,bmt=function(i){if(typeof document>"u")return null;var t=Array.isArray(i)?i[0]:i;return t.ownerDocument.body},Ff=new WeakMap,zx=new WeakMap,Nx={},WP=0,nX=function(i){return i&&(i.host||nX(i.parentNode))},xmt=function(i,t){return t.map(function(e){if(i.contains(e))return e;var n=nX(e);return n&&i.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",i,". Doing nothing"),null)}).filter(function(e){return!!e})},Smt=function(i,t,e,n){var r=xmt(t,Array.isArray(i)?i:[i]);Nx[e]||(Nx[e]=new WeakMap);var s=Nx[e],a=[],o=new Set,l=new Set(r),u=function(h){!h||o.has(h)||(o.add(h),u(h.parentNode))};r.forEach(u);var c=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(d){if(o.has(d))c(d);else try{var f=d.getAttribute(n),p=f!==null&&f!=="false",g=(Ff.get(d)||0)+1,m=(s.get(d)||0)+1;Ff.set(d,g),s.set(d,m),a.push(d),g===1&&p&&zx.set(d,!0),m===1&&d.setAttribute(e,"true"),p||d.setAttribute(n,"true")}catch(_){console.error("aria-hidden: cannot operate on ",d,_)}})};return c(t),o.clear(),WP++,function(){a.forEach(function(h){var d=Ff.get(h)-1,f=s.get(h)-1;Ff.set(h,d),s.set(h,f),d||(zx.has(h)||h.removeAttribute(n),zx.delete(h)),f||h.removeAttribute(e)}),WP--,WP||(Ff=new WeakMap,Ff=new WeakMap,zx=new WeakMap,Nx={})}},SC=function(i,t,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(i)?i:[i]),r=bmt(i);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live], script"))),Smt(n,r,e,"aria-hidden")):function(){return null}},Sl=function(){return Sl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Sl.apply(this,arguments)};function rX(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e}function wmt(i,t,e){if(e||arguments.length===2)for(var n=0,r=t.length,s;n<r;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return i.concat(s||Array.prototype.slice.call(t))}var n1="right-scroll-bar-position",r1="width-before-scroll-bar",Amt="with-scroll-bars-hidden",kmt="--removed-body-scroll-bar-size";function $P(i,t){return typeof i=="function"?i(t):i&&(i.current=t),i}function Cmt(i,t){var e=E.useState(function(){return{value:i,callback:t,facade:{get current(){return e.value},set current(n){var r=e.value;r!==n&&(e.value=n,e.callback(n,r))}}}})[0];return e.callback=t,e.facade}var Mmt=typeof window<"u"?E.useLayoutEffect:E.useEffect,kH=new WeakMap;function Tmt(i,t){var e=Cmt(null,function(n){return i.forEach(function(r){return $P(r,n)})});return Mmt(function(){var n=kH.get(e);if(n){var r=new Set(n),s=new Set(i),a=e.current;r.forEach(function(o){s.has(o)||$P(o,null)}),s.forEach(function(o){r.has(o)||$P(o,a)})}kH.set(e,i)},[i]),e}function Pmt(i){return i}function Emt(i,t){t===void 0&&(t=Pmt);var e=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:i},useMedium:function(s){var a=t(s,n);return e.push(a),function(){e=e.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(n=!0;e.length;){var a=e;e=[],a.forEach(s)}e={push:function(o){return s(o)},filter:function(){return e}}},assignMedium:function(s){n=!0;var a=[];if(e.length){var o=e;e=[],o.forEach(s),a=e}var l=function(){var c=a;a=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),e={push:function(c){a.push(c),u()},filter:function(c){return a=a.filter(c),e}}}};return r}function Rmt(i){i===void 0&&(i={});var t=Emt(null);return t.options=Sl({async:!0,ssr:!1},i),t}var sX=function(i){var t=i.sideCar,e=rX(i,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return E.createElement(n,Sl({},e))};sX.isSideCarExport=!0;function Omt(i,t){return i.useMedium(t),sX}var aX=Rmt(),UP=function(){},wC=E.forwardRef(function(i,t){var e=E.useRef(null),n=E.useState({onScrollCapture:UP,onWheelCapture:UP,onTouchMoveCapture:UP}),r=n[0],s=n[1],a=i.forwardProps,o=i.children,l=i.className,u=i.removeScrollBar,c=i.enabled,h=i.shards,d=i.sideCar,f=i.noRelative,p=i.noIsolation,g=i.inert,m=i.allowPinchZoom,_=i.as,v=_===void 0?"div":_,y=i.gapMode,b=rX(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=d,S=Tmt([e,t]),w=Sl(Sl({},b),r);return E.createElement(E.Fragment,null,c&&E.createElement(x,{sideCar:aX,removeScrollBar:u,shards:h,noRelative:f,noIsolation:p,inert:g,setCallbacks:s,allowPinchZoom:!!m,lockRef:e,gapMode:y}),a?E.cloneElement(E.Children.only(o),Sl(Sl({},w),{ref:S})):E.createElement(v,Sl({},w,{className:l,ref:S}),o))});wC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wC.classNames={fullWidth:r1,zeroRight:n1};var Dmt=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Imt(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var t=Dmt();return t&&i.setAttribute("nonce",t),i}function Lmt(i,t){i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}function Bmt(i){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(i)}var Fmt=function(){var i=0,t=null;return{add:function(e){i==0&&(t=Imt())&&(Lmt(t,e),Bmt(t)),i++},remove:function(){i--,!i&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},zmt=function(){var i=Fmt();return function(t,e){E.useEffect(function(){return i.add(t),function(){i.remove()}},[t&&e])}},oX=function(){var i=zmt(),t=function(e){var n=e.styles,r=e.dynamic;return i(n,r),null};return t},Nmt={left:0,top:0,right:0,gap:0},GP=function(i){return parseInt(i||"",10)||0},jmt=function(i){var t=window.getComputedStyle(document.body),e=t[i==="padding"?"paddingLeft":"marginLeft"],n=t[i==="padding"?"paddingTop":"marginTop"],r=t[i==="padding"?"paddingRight":"marginRight"];return[GP(e),GP(n),GP(r)]},Hmt=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return Nmt;var t=jmt(i),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-e+t[2]-t[0])}},Vmt=oX(),sg="data-scroll-locked",Wmt=function(i,t,e,n){var r=i.left,s=i.top,a=i.right,o=i.gap;return e===void 0&&(e="margin"),`
  .`.concat(Amt,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(sg,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(n1,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(r1,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(n1," .").concat(n1,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(r1," .").concat(r1,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(sg,`] {
    `).concat(kmt,": ").concat(o,`px;
  }
`)},CH=function(){var i=parseInt(document.body.getAttribute(sg)||"0",10);return isFinite(i)?i:0},$mt=function(){E.useEffect(function(){return document.body.setAttribute(sg,(CH()+1).toString()),function(){var i=CH()-1;i<=0?document.body.removeAttribute(sg):document.body.setAttribute(sg,i.toString())}},[])},Umt=function(i){var t=i.noRelative,e=i.noImportant,n=i.gapMode,r=n===void 0?"margin":n;$mt();var s=E.useMemo(function(){return Hmt(r)},[r]);return E.createElement(Vmt,{styles:Wmt(s,!t,r,e?"":"!important")})},xO=!1;if(typeof window<"u")try{var jx=Object.defineProperty({},"passive",{get:function(){return xO=!0,!0}});window.addEventListener("test",jx,jx),window.removeEventListener("test",jx,jx)}catch{xO=!1}var zf=xO?{passive:!1}:!1,Gmt=function(i){return i.tagName==="TEXTAREA"},lX=function(i,t){if(!(i instanceof Element))return!1;var e=window.getComputedStyle(i);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!Gmt(i)&&e[t]==="visible")},Ymt=function(i){return lX(i,"overflowY")},Xmt=function(i){return lX(i,"overflowX")},MH=function(i,t){var e=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=uX(i,n);if(r){var s=cX(i,n),a=s[1],o=s[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==e.body);return!1},Kmt=function(i){var t=i.scrollTop,e=i.scrollHeight,n=i.clientHeight;return[t,e,n]},qmt=function(i){var t=i.scrollLeft,e=i.scrollWidth,n=i.clientWidth;return[t,e,n]},uX=function(i,t){return i==="v"?Ymt(t):Xmt(t)},cX=function(i,t){return i==="v"?Kmt(t):qmt(t)},Zmt=function(i,t){return i==="h"&&t==="rtl"?-1:1},Qmt=function(i,t,e,n,r){var s=Zmt(i,window.getComputedStyle(t).direction),a=s*n,o=e.target,l=t.contains(o),u=!1,c=a>0,h=0,d=0;do{if(!o)break;var f=cX(i,o),p=f[0],g=f[1],m=f[2],_=g-m-s*p;(p||_)&&uX(i,o)&&(h+=_,d+=p);var v=o.parentNode;o=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(c&&Math.abs(h)<1||!c&&Math.abs(d)<1)&&(u=!0),u},Hx=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},TH=function(i){return[i.deltaX,i.deltaY]},PH=function(i){return i&&"current"in i?i.current:i},Jmt=function(i,t){return i[0]===t[0]&&i[1]===t[1]},t_t=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},e_t=0,Nf=[];function i_t(i){var t=E.useRef([]),e=E.useRef([0,0]),n=E.useRef(),r=E.useState(e_t++)[0],s=E.useState(oX)[0],a=E.useRef(i);E.useEffect(function(){a.current=i},[i]),E.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(r));var g=wmt([i.lockRef.current],(i.shards||[]).map(PH),!0).filter(Boolean);return g.forEach(function(m){return m.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),g.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(r))})}}},[i.inert,i.lockRef.current,i.shards]);var o=E.useCallback(function(g,m){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var _=Hx(g),v=e.current,y="deltaX"in g?g.deltaX:v[0]-_[0],b="deltaY"in g?g.deltaY:v[1]-_[1],x,S=g.target,w=Math.abs(y)>Math.abs(b)?"h":"v";if("touches"in g&&w==="h"&&S.type==="range")return!1;var A=window.getSelection(),k=A&&A.anchorNode,C=k?k===S||k.contains(S):!1;if(C)return!1;var M=MH(w,S);if(!M)return!0;if(M?x=w:(x=w==="v"?"h":"v",M=MH(w,S)),!M)return!1;if(!n.current&&"changedTouches"in g&&(y||b)&&(n.current=x),!x)return!0;var R=n.current||x;return Qmt(R,m,g,R==="h"?y:b)},[]),l=E.useCallback(function(g){var m=g;if(!(!Nf.length||Nf[Nf.length-1]!==s)){var _="deltaY"in m?TH(m):Hx(m),v=t.current.filter(function(x){return x.name===m.type&&(x.target===m.target||m.target===x.shadowParent)&&Jmt(x.delta,_)})[0];if(v&&v.should){m.cancelable&&m.preventDefault();return}if(!v){var y=(a.current.shards||[]).map(PH).filter(Boolean).filter(function(x){return x.contains(m.target)}),b=y.length>0?o(m,y[0]):!a.current.noIsolation;b&&m.cancelable&&m.preventDefault()}}},[]),u=E.useCallback(function(g,m,_,v){var y={name:g,delta:m,target:_,should:v,shadowParent:n_t(_)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(b){return b!==y})},1)},[]),c=E.useCallback(function(g){e.current=Hx(g),n.current=void 0},[]),h=E.useCallback(function(g){u(g.type,TH(g),g.target,o(g,i.lockRef.current))},[]),d=E.useCallback(function(g){u(g.type,Hx(g),g.target,o(g,i.lockRef.current))},[]);E.useEffect(function(){return Nf.push(s),i.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:d}),document.addEventListener("wheel",l,zf),document.addEventListener("touchmove",l,zf),document.addEventListener("touchstart",c,zf),function(){Nf=Nf.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,zf),document.removeEventListener("touchmove",l,zf),document.removeEventListener("touchstart",c,zf)}},[]);var f=i.removeScrollBar,p=i.inert;return E.createElement(E.Fragment,null,p?E.createElement(s,{styles:t_t(r)}):null,f?E.createElement(Umt,{noRelative:i.noRelative,gapMode:i.gapMode}):null)}function n_t(i){for(var t=null;i!==null;)i instanceof ShadowRoot&&(t=i.host,i=i.host),i=i.parentNode;return t}const r_t=Omt(aX,i_t);var pb=E.forwardRef(function(i,t){return E.createElement(wC,Sl({},i,{ref:t,sideCar:r_t}))});pb.classNames=wC.classNames;var SO=["Enter"," "],s_t=["ArrowDown","PageUp","Home"],hX=["ArrowUp","PageDown","End"],a_t=[...s_t,...hX],o_t={ltr:[...SO,"ArrowRight"],rtl:[...SO,"ArrowLeft"]},l_t={ltr:["ArrowLeft"],rtl:["ArrowRight"]},gb="Menu",[Uy,u_t,c_t]=cC(gb),[cf,dX]=rs(gb,[c_t,bh,xC]),AC=bh(),fX=xC(),[h_t,hf]=cf(gb),[d_t,mb]=cf(gb),pX=i=>{const{__scopeMenu:t,open:e=!1,children:n,dir:r,onOpenChange:s,modal:a=!0}=i,o=AC(t),[l,u]=E.useState(null),c=E.useRef(!1),h=_s(s),d=hC(r);return E.useEffect(()=>{const f=()=>{c.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>c.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),V.jsx(vC,{...o,children:V.jsx(h_t,{scope:t,open:e,onOpenChange:h,content:l,onContentChange:u,children:V.jsx(d_t,{scope:t,onClose:E.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:c,dir:d,modal:a,children:n})})})};pX.displayName=gb;var f_t="MenuAnchor",q2=E.forwardRef((i,t)=>{const{__scopeMenu:e,...n}=i,r=AC(e);return V.jsx(db,{...r,...n,ref:t})});q2.displayName=f_t;var Z2="MenuPortal",[p_t,gX]=cf(Z2,{forceMount:void 0}),mX=i=>{const{__scopeMenu:t,forceMount:e,children:n,container:r}=i,s=hf(Z2,t);return V.jsx(p_t,{scope:t,forceMount:e,children:V.jsx(ws,{present:e||s.open,children:V.jsx(Cm,{asChild:!0,container:r,children:n})})})};mX.displayName=Z2;var io="MenuContent",[g_t,Q2]=cf(io),_X=E.forwardRef((i,t)=>{const e=gX(io,i.__scopeMenu),{forceMount:n=e.forceMount,...r}=i,s=hf(io,i.__scopeMenu),a=mb(io,i.__scopeMenu);return V.jsx(Uy.Provider,{scope:i.__scopeMenu,children:V.jsx(ws,{present:n||s.open,children:V.jsx(Uy.Slot,{scope:i.__scopeMenu,children:a.modal?V.jsx(m_t,{...r,ref:t}):V.jsx(__t,{...r,ref:t})})})})}),m_t=E.forwardRef((i,t)=>{const e=hf(io,i.__scopeMenu),n=E.useRef(null),r=De(t,n);return E.useEffect(()=>{const s=n.current;if(s)return SC(s)},[]),V.jsx(J2,{...i,ref:r,trapFocus:e.open,disableOutsidePointerEvents:e.open,disableOutsideScroll:!0,onFocusOutside:Et(i.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>e.onOpenChange(!1)})}),__t=E.forwardRef((i,t)=>{const e=hf(io,i.__scopeMenu);return V.jsx(J2,{...i,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>e.onOpenChange(!1)})}),v_t=Nd("MenuContent.ScrollLock"),J2=E.forwardRef((i,t)=>{const{__scopeMenu:e,loop:n=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:h,onInteractOutside:d,onDismiss:f,disableOutsideScroll:p,...g}=i,m=hf(io,e),_=mb(io,e),v=AC(e),y=fX(e),b=u_t(e),[x,S]=E.useState(null),w=E.useRef(null),A=De(t,w,m.onContentChange),k=E.useRef(0),C=E.useRef(""),M=E.useRef(0),R=E.useRef(null),P=E.useRef("right"),O=E.useRef(0),T=p?pb:E.Fragment,D=p?{as:v_t,allowPinchZoom:!0}:void 0,B=F=>{const j=C.current+F,H=b().filter($=>!$.disabled),U=document.activeElement,K=H.find($=>$.ref.current===U)?.textValue,q=H.map($=>$.textValue),Z=E_t(q,j,K),at=H.find($=>$.textValue===Z)?.ref.current;(function $(ft){C.current=ft,window.clearTimeout(k.current),ft!==""&&(k.current=window.setTimeout(()=>$(""),1e3))})(j),at&&setTimeout(()=>at.focus())};E.useEffect(()=>()=>window.clearTimeout(k.current),[]),dC();const I=E.useCallback(F=>P.current===R.current?.side&&O_t(F,R.current?.area),[]);return V.jsx(g_t,{scope:e,searchRef:C,onItemEnter:E.useCallback(F=>{I(F)&&F.preventDefault()},[I]),onItemLeave:E.useCallback(F=>{I(F)||(w.current?.focus(),S(null))},[I]),onTriggerLeave:E.useCallback(F=>{I(F)&&F.preventDefault()},[I]),pointerGraceTimerRef:M,onPointerGraceIntentChange:E.useCallback(F=>{R.current=F},[]),children:V.jsx(T,{...D,children:V.jsx(cb,{asChild:!0,trapped:r,onMountAutoFocus:Et(s,F=>{F.preventDefault(),w.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:V.jsx(uf,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:h,onInteractOutside:d,onDismiss:f,children:V.jsx(eX,{asChild:!0,...y,dir:_.dir,orientation:"vertical",loop:n,currentTabStopId:x,onCurrentTabStopIdChange:S,onEntryFocus:Et(l,F=>{_.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:V.jsx(yC,{role:"menu","aria-orientation":"vertical","data-state":DX(m.open),"data-radix-menu-content":"",dir:_.dir,...v,...g,ref:A,style:{outline:"none",...g.style},onKeyDown:Et(g.onKeyDown,F=>{const H=F.target.closest("[data-radix-menu-content]")===F.currentTarget,U=F.ctrlKey||F.altKey||F.metaKey,K=F.key.length===1;H&&(F.key==="Tab"&&F.preventDefault(),!U&&K&&B(F.key));const q=w.current;if(F.target!==q||!a_t.includes(F.key))return;F.preventDefault();const at=b().filter($=>!$.disabled).map($=>$.ref.current);hX.includes(F.key)&&at.reverse(),T_t(at)}),onBlur:Et(i.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(k.current),C.current="")}),onPointerMove:Et(i.onPointerMove,Gy(F=>{const j=F.target,H=O.current!==F.clientX;if(F.currentTarget.contains(j)&&H){const U=F.clientX>O.current?"right":"left";P.current=U,O.current=F.clientX}}))})})})})})})});_X.displayName=io;var y_t="MenuGroup",tB=E.forwardRef((i,t)=>{const{__scopeMenu:e,...n}=i;return V.jsx(ue.div,{role:"group",...n,ref:t})});tB.displayName=y_t;var b_t="MenuLabel",vX=E.forwardRef((i,t)=>{const{__scopeMenu:e,...n}=i;return V.jsx(ue.div,{...n,ref:t})});vX.displayName=b_t;var aw="MenuItem",EH="menu.itemSelect",kC=E.forwardRef((i,t)=>{const{disabled:e=!1,onSelect:n,...r}=i,s=E.useRef(null),a=mb(aw,i.__scopeMenu),o=Q2(aw,i.__scopeMenu),l=De(t,s),u=E.useRef(!1),c=()=>{const h=s.current;if(!e&&h){const d=new CustomEvent(EH,{bubbles:!0,cancelable:!0});h.addEventListener(EH,f=>n?.(f),{once:!0}),H2(h,d),d.defaultPrevented?u.current=!1:a.onClose()}};return V.jsx(yX,{...r,ref:l,disabled:e,onClick:Et(i.onClick,c),onPointerDown:h=>{i.onPointerDown?.(h),u.current=!0},onPointerUp:Et(i.onPointerUp,h=>{u.current||h.currentTarget?.click()}),onKeyDown:Et(i.onKeyDown,h=>{const d=o.searchRef.current!=="";e||d&&h.key===" "||SO.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});kC.displayName=aw;var yX=E.forwardRef((i,t)=>{const{__scopeMenu:e,disabled:n=!1,textValue:r,...s}=i,a=Q2(aw,e),o=fX(e),l=E.useRef(null),u=De(t,l),[c,h]=E.useState(!1),[d,f]=E.useState("");return E.useEffect(()=>{const p=l.current;p&&f((p.textContent??"").trim())},[s.children]),V.jsx(Uy.ItemSlot,{scope:e,disabled:n,textValue:r??d,children:V.jsx(iX,{asChild:!0,...o,focusable:!n,children:V.jsx(ue.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...s,ref:u,onPointerMove:Et(i.onPointerMove,Gy(p=>{n?a.onItemLeave(p):(a.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Et(i.onPointerLeave,Gy(p=>a.onItemLeave(p))),onFocus:Et(i.onFocus,()=>h(!0)),onBlur:Et(i.onBlur,()=>h(!1))})})})}),x_t="MenuCheckboxItem",bX=E.forwardRef((i,t)=>{const{checked:e=!1,onCheckedChange:n,...r}=i;return V.jsx(kX,{scope:i.__scopeMenu,checked:e,children:V.jsx(kC,{role:"menuitemcheckbox","aria-checked":ow(e)?"mixed":e,...r,ref:t,"data-state":iB(e),onSelect:Et(r.onSelect,()=>n?.(ow(e)?!0:!e),{checkForDefaultPrevented:!1})})})});bX.displayName=x_t;var xX="MenuRadioGroup",[S_t,w_t]=cf(xX,{value:void 0,onValueChange:()=>{}}),SX=E.forwardRef((i,t)=>{const{value:e,onValueChange:n,...r}=i,s=_s(n);return V.jsx(S_t,{scope:i.__scopeMenu,value:e,onValueChange:s,children:V.jsx(tB,{...r,ref:t})})});SX.displayName=xX;var wX="MenuRadioItem",AX=E.forwardRef((i,t)=>{const{value:e,...n}=i,r=w_t(wX,i.__scopeMenu),s=e===r.value;return V.jsx(kX,{scope:i.__scopeMenu,checked:s,children:V.jsx(kC,{role:"menuitemradio","aria-checked":s,...n,ref:t,"data-state":iB(s),onSelect:Et(n.onSelect,()=>r.onValueChange?.(e),{checkForDefaultPrevented:!1})})})});AX.displayName=wX;var eB="MenuItemIndicator",[kX,A_t]=cf(eB,{checked:!1}),CX=E.forwardRef((i,t)=>{const{__scopeMenu:e,forceMount:n,...r}=i,s=A_t(eB,e);return V.jsx(ws,{present:n||ow(s.checked)||s.checked===!0,children:V.jsx(ue.span,{...r,ref:t,"data-state":iB(s.checked)})})});CX.displayName=eB;var k_t="MenuSeparator",MX=E.forwardRef((i,t)=>{const{__scopeMenu:e,...n}=i;return V.jsx(ue.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});MX.displayName=k_t;var C_t="MenuArrow",TX=E.forwardRef((i,t)=>{const{__scopeMenu:e,...n}=i,r=AC(e);return V.jsx(bC,{...r,...n,ref:t})});TX.displayName=C_t;var M_t="MenuSub",[jQt,PX]=cf(M_t),V_="MenuSubTrigger",EX=E.forwardRef((i,t)=>{const e=hf(V_,i.__scopeMenu),n=mb(V_,i.__scopeMenu),r=PX(V_,i.__scopeMenu),s=Q2(V_,i.__scopeMenu),a=E.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=s,u={__scopeMenu:i.__scopeMenu},c=E.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return E.useEffect(()=>c,[c]),E.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),l(null)}},[o,l]),V.jsx(q2,{asChild:!0,...u,children:V.jsx(yX,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":e.open,"aria-controls":r.contentId,"data-state":DX(e.open),...i,ref:lb(t,r.onTriggerChange),onClick:h=>{i.onClick?.(h),!(i.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),e.open||e.onOpenChange(!0))},onPointerMove:Et(i.onPointerMove,Gy(h=>{s.onItemEnter(h),!h.defaultPrevented&&!i.disabled&&!e.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{e.onOpenChange(!0),c()},100))})),onPointerLeave:Et(i.onPointerLeave,Gy(h=>{c();const d=e.content?.getBoundingClientRect();if(d){const f=e.content?.dataset.side,p=f==="right",g=p?-5:5,m=d[p?"left":"right"],_=d[p?"right":"left"];s.onPointerGraceIntentChange({area:[{x:h.clientX+g,y:h.clientY},{x:m,y:d.top},{x:_,y:d.top},{x:_,y:d.bottom},{x:m,y:d.bottom}],side:f}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(h),h.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Et(i.onKeyDown,h=>{const d=s.searchRef.current!=="";i.disabled||d&&h.key===" "||o_t[n.dir].includes(h.key)&&(e.onOpenChange(!0),e.content?.focus(),h.preventDefault())})})})});EX.displayName=V_;var RX="MenuSubContent",OX=E.forwardRef((i,t)=>{const e=gX(io,i.__scopeMenu),{forceMount:n=e.forceMount,...r}=i,s=hf(io,i.__scopeMenu),a=mb(io,i.__scopeMenu),o=PX(RX,i.__scopeMenu),l=E.useRef(null),u=De(t,l);return V.jsx(Uy.Provider,{scope:i.__scopeMenu,children:V.jsx(ws,{present:n||s.open,children:V.jsx(Uy.Slot,{scope:i.__scopeMenu,children:V.jsx(J2,{id:o.contentId,"aria-labelledby":o.triggerId,...r,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{a.isUsingKeyboardRef.current&&l.current?.focus(),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:Et(i.onFocusOutside,c=>{c.target!==o.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Et(i.onEscapeKeyDown,c=>{a.onClose(),c.preventDefault()}),onKeyDown:Et(i.onKeyDown,c=>{const h=c.currentTarget.contains(c.target),d=l_t[a.dir].includes(c.key);h&&d&&(s.onOpenChange(!1),o.trigger?.focus(),c.preventDefault())})})})})})});OX.displayName=RX;function DX(i){return i?"open":"closed"}function ow(i){return i==="indeterminate"}function iB(i){return ow(i)?"indeterminate":i?"checked":"unchecked"}function T_t(i){const t=document.activeElement;for(const e of i)if(e===t||(e.focus(),document.activeElement!==t))return}function P_t(i,t){return i.map((e,n)=>i[(t+n)%i.length])}function E_t(i,t,e){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=e?i.indexOf(e):-1;let a=P_t(i,Math.max(s,0));r.length===1&&(a=a.filter(u=>u!==e));const l=a.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return l!==e?l:void 0}function R_t(i,t){const{x:e,y:n}=i;let r=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const o=t[s],l=t[a],u=o.x,c=o.y,h=l.x,d=l.y;c>n!=d>n&&e<(h-u)*(n-c)/(d-c)+u&&(r=!r)}return r}function O_t(i,t){if(!t)return!1;const e={x:i.clientX,y:i.clientY};return R_t(e,t)}function Gy(i){return t=>t.pointerType==="mouse"?i(t):void 0}var D_t=pX,I_t=q2,L_t=mX,B_t=_X,F_t=tB,z_t=vX,N_t=kC,j_t=bX,H_t=SX,V_t=AX,W_t=CX,$_t=MX,U_t=TX,G_t=EX,Y_t=OX,CC="DropdownMenu",[X_t]=rs(CC,[dX]),As=dX(),[K_t,IX]=X_t(CC),LX=i=>{const{__scopeDropdownMenu:t,children:e,dir:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=i,l=As(t),u=E.useRef(null),[c,h]=oo({prop:r,defaultProp:s??!1,onChange:a,caller:CC});return V.jsx(K_t,{scope:t,triggerId:eo(),triggerRef:u,contentId:eo(),open:c,onOpenChange:h,onOpenToggle:E.useCallback(()=>h(d=>!d),[h]),modal:o,children:V.jsx(D_t,{...l,open:c,onOpenChange:h,dir:n,modal:o,children:e})})};LX.displayName=CC;var BX="DropdownMenuTrigger",FX=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,disabled:n=!1,...r}=i,s=IX(BX,e),a=As(e);return V.jsx(I_t,{asChild:!0,...a,children:V.jsx(ue.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...r,ref:lb(t,s.triggerRef),onPointerDown:Et(i.onPointerDown,o=>{!n&&o.button===0&&o.ctrlKey===!1&&(s.onOpenToggle(),s.open||o.preventDefault())}),onKeyDown:Et(i.onKeyDown,o=>{n||(["Enter"," "].includes(o.key)&&s.onOpenToggle(),o.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});FX.displayName=BX;var q_t="DropdownMenuPortal",zX=i=>{const{__scopeDropdownMenu:t,...e}=i,n=As(t);return V.jsx(L_t,{...n,...e})};zX.displayName=q_t;var NX="DropdownMenuContent",jX=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=IX(NX,e),s=As(e),a=E.useRef(!1);return V.jsx(B_t,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...n,ref:t,onCloseAutoFocus:Et(i.onCloseAutoFocus,o=>{a.current||r.triggerRef.current?.focus(),a.current=!1,o.preventDefault()}),onInteractOutside:Et(i.onInteractOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,c=l.button===2||u;(!r.modal||c)&&(a.current=!0)}),style:{...i.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jX.displayName=NX;var Z_t="DropdownMenuGroup",Q_t=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=As(e);return V.jsx(F_t,{...r,...n,ref:t})});Q_t.displayName=Z_t;var J_t="DropdownMenuLabel",HX=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=As(e);return V.jsx(z_t,{...r,...n,ref:t})});HX.displayName=J_t;var tvt="DropdownMenuItem",VX=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=As(e);return V.jsx(N_t,{...r,...n,ref:t})});VX.displayName=tvt;var evt="DropdownMenuCheckboxItem",WX=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=As(e);return V.jsx(j_t,{...r,...n,ref:t})});WX.displayName=evt;var ivt="DropdownMenuRadioGroup",nvt=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=As(e);return V.jsx(H_t,{...r,...n,ref:t})});nvt.displayName=ivt;var rvt="DropdownMenuRadioItem",$X=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=As(e);return V.jsx(V_t,{...r,...n,ref:t})});$X.displayName=rvt;var svt="DropdownMenuItemIndicator",UX=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=As(e);return V.jsx(W_t,{...r,...n,ref:t})});UX.displayName=svt;var avt="DropdownMenuSeparator",GX=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=As(e);return V.jsx($_t,{...r,...n,ref:t})});GX.displayName=avt;var ovt="DropdownMenuArrow",lvt=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=As(e);return V.jsx(U_t,{...r,...n,ref:t})});lvt.displayName=ovt;var uvt="DropdownMenuSubTrigger",YX=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=As(e);return V.jsx(G_t,{...r,...n,ref:t})});YX.displayName=uvt;var cvt="DropdownMenuSubContent",XX=E.forwardRef((i,t)=>{const{__scopeDropdownMenu:e,...n}=i,r=As(e);return V.jsx(Y_t,{...r,...n,ref:t,style:{...i.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});XX.displayName=cvt;var HQt=LX,VQt=FX,WQt=zX,$Qt=jX,UQt=HX,GQt=VX,YQt=WX,XQt=$X,KQt=UX,qQt=GX,ZQt=YX,QQt=XX;/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hvt=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dvt=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),RH=i=>{const t=dvt(i);return t.charAt(0).toUpperCase()+t.slice(1)},KX=(...i)=>i.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),fvt=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pvt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gvt=E.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:r="",children:s,iconNode:a,...o},l)=>E.createElement("svg",{ref:l,...pvt,width:t,height:t,stroke:i,strokeWidth:n?Number(e)*24/Number(t):e,className:KX("lucide",r),...!s&&!fvt(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,c])=>E.createElement(u,c)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=(i,t)=>{const e=E.forwardRef(({className:n,...r},s)=>E.createElement(gvt,{ref:s,iconNode:t,className:KX(`lucide-${hvt(RH(i))}`,`lucide-${i}`,n),...r}));return e.displayName=RH(i),e};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mvt=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],JQt=Me("arrow-left",mvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _vt=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],tJt=Me("bell",_vt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vvt=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],eJt=Me("calendar",vvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yvt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],iJt=Me("check",yvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bvt=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],nJt=Me("chevron-down",bvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xvt=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],rJt=Me("chevron-left",xvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Svt=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],sJt=Me("chevron-right",Svt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wvt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],aJt=Me("chevron-up",wvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Avt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],oJt=Me("circle-alert",Avt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kvt=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],lJt=Me("circle-check-big",kvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cvt=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uJt=Me("circle-play",Cvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mvt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cJt=Me("circle",Mvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tvt=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hJt=Me("clock",Tvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pvt=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],dJt=Me("code",Pvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Evt=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],fJt=Me("cpu",Evt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rvt=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],pJt=Me("download",Rvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ovt=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gJt=Me("file-text",Ovt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dvt=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],mJt=Me("flame",Dvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ivt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],_Jt=Me("image",Ivt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lvt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],vJt=Me("info",Lvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bvt=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],yJt=Me("key",Bvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fvt=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],bJt=Me("layout-dashboard",Fvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zvt=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xJt=Me("loader-circle",zvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nvt=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],SJt=Me("lock",Nvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jvt=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],wJt=Me("log-out",jvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hvt=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],AJt=Me("mail",Hvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vvt=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],kJt=Me("monitor",Vvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wvt=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],CJt=Me("moon",Wvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $vt=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],MJt=Me("package",$vt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uvt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],TJt=Me("panel-left",Uvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gvt=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],PJt=Me("play",Gvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yvt=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],EJt=Me("plus",Yvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xvt=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],RJt=Me("qr-code",Xvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kvt=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],OJt=Me("refresh-cw",Kvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qvt=[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]],DJt=Me("rss",qvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zvt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],IJt=Me("save",Zvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qvt=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],LJt=Me("search",Qvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jvt=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],BJt=Me("settings",Jvt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tyt=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],FJt=Me("square-pen",tyt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eyt=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],zJt=Me("sun",eyt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iyt=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],NJt=Me("tag",iyt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nyt=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jJt=Me("trash-2",nyt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ryt=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],HJt=Me("upload",ryt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const syt=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],VJt=Me("user",syt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ayt=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],WJt=Me("wifi",ayt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oyt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$Jt=Me("x",oyt);function OH(i,[t,e]){return Math.min(e,Math.max(t,i))}function MC(i){const t=E.useRef({value:i,previous:i});return E.useMemo(()=>(t.current.value!==i&&(t.current.previous=t.current.value,t.current.value=i),t.current.previous),[i])}var qX=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),lyt="VisuallyHidden",TC=E.forwardRef((i,t)=>V.jsx(ue.span,{...i,ref:t,style:{...qX,...i.style}}));TC.displayName=lyt;var uyt=TC,cyt=[" ","Enter","ArrowUp","ArrowDown"],hyt=[" ","Enter"],Hd="Select",[PC,EC,dyt]=cC(Hd),[Mm]=rs(Hd,[dyt,bh]),RC=bh(),[fyt,xh]=Mm(Hd),[pyt,gyt]=Mm(Hd),ZX=i=>{const{__scopeSelect:t,children:e,open:n,defaultOpen:r,onOpenChange:s,value:a,defaultValue:o,onValueChange:l,dir:u,name:c,autoComplete:h,disabled:d,required:f,form:p}=i,g=RC(t),[m,_]=E.useState(null),[v,y]=E.useState(null),[b,x]=E.useState(!1),S=hC(u),[w,A]=oo({prop:n,defaultProp:r??!1,onChange:s,caller:Hd}),[k,C]=oo({prop:a,defaultProp:o,onChange:l,caller:Hd}),M=E.useRef(null),R=m?p||!!m.closest("form"):!0,[P,O]=E.useState(new Set),T=Array.from(P).map(D=>D.props.value).join(";");return V.jsx(vC,{...g,children:V.jsxs(fyt,{required:f,scope:t,trigger:m,onTriggerChange:_,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:x,contentId:eo(),value:k,onValueChange:C,open:w,onOpenChange:A,dir:S,triggerPointerDownPosRef:M,disabled:d,children:[V.jsx(PC.Provider,{scope:t,children:V.jsx(pyt,{scope:i.__scopeSelect,onNativeOptionAdd:E.useCallback(D=>{O(B=>new Set(B).add(D))},[]),onNativeOptionRemove:E.useCallback(D=>{O(B=>{const I=new Set(B);return I.delete(D),I})},[]),children:e})}),R?V.jsxs(xK,{"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:h,value:k,onChange:D=>C(D.target.value),disabled:d,form:p,children:[k===void 0?V.jsx("option",{value:""}):null,Array.from(P)]},T):null]})})};ZX.displayName=Hd;var QX="SelectTrigger",JX=E.forwardRef((i,t)=>{const{__scopeSelect:e,disabled:n=!1,...r}=i,s=RC(e),a=xh(QX,e),o=a.disabled||n,l=De(t,a.onTriggerChange),u=EC(e),c=E.useRef("touch"),[h,d,f]=wK(g=>{const m=u().filter(y=>!y.disabled),_=m.find(y=>y.value===a.value),v=AK(m,g,_);v!==void 0&&a.onValueChange(v.value)}),p=g=>{o||(a.onOpenChange(!0),f()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return V.jsx(db,{asChild:!0,...s,children:V.jsx(ue.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":SK(a.value)?"":void 0,...r,ref:l,onClick:Et(r.onClick,g=>{g.currentTarget.focus(),c.current!=="mouse"&&p(g)}),onPointerDown:Et(r.onPointerDown,g=>{c.current=g.pointerType;const m=g.target;m.hasPointerCapture(g.pointerId)&&m.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(p(g),g.preventDefault())}),onKeyDown:Et(r.onKeyDown,g=>{const m=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&d(g.key),!(m&&g.key===" ")&&cyt.includes(g.key)&&(p(),g.preventDefault())})})})});JX.displayName=QX;var tK="SelectValue",eK=E.forwardRef((i,t)=>{const{__scopeSelect:e,className:n,style:r,children:s,placeholder:a="",...o}=i,l=xh(tK,e),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,h=De(t,l.onValueNodeChange);return Hn(()=>{u(c)},[u,c]),V.jsx(ue.span,{...o,ref:h,style:{pointerEvents:"none"},children:SK(l.value)?V.jsx(V.Fragment,{children:a}):s})});eK.displayName=tK;var myt="SelectIcon",iK=E.forwardRef((i,t)=>{const{__scopeSelect:e,children:n,...r}=i;return V.jsx(ue.span,{"aria-hidden":!0,...r,ref:t,children:n||""})});iK.displayName=myt;var _yt="SelectPortal",nK=i=>V.jsx(Cm,{asChild:!0,...i});nK.displayName=_yt;var Vd="SelectContent",rK=E.forwardRef((i,t)=>{const e=xh(Vd,i.__scopeSelect),[n,r]=E.useState();if(Hn(()=>{r(new DocumentFragment)},[]),!e.open){const s=n;return s?rc.createPortal(V.jsx(sK,{scope:i.__scopeSelect,children:V.jsx(PC.Slot,{scope:i.__scopeSelect,children:V.jsx("div",{children:i.children})})}),s):null}return V.jsx(aK,{...i,ref:t})});rK.displayName=Vd;var wo=10,[sK,Sh]=Mm(Vd),vyt="SelectContentImpl",yyt=Nd("SelectContent.RemoveScroll"),aK=E.forwardRef((i,t)=>{const{__scopeSelect:e,position:n="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:l,align:u,alignOffset:c,arrowPadding:h,collisionBoundary:d,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:m,..._}=i,v=xh(Vd,e),[y,b]=E.useState(null),[x,S]=E.useState(null),w=De(t,$=>b($)),[A,k]=E.useState(null),[C,M]=E.useState(null),R=EC(e),[P,O]=E.useState(!1),T=E.useRef(!1);E.useEffect(()=>{if(y)return SC(y)},[y]),dC();const D=E.useCallback($=>{const[ft,...pt]=R().map(mt=>mt.ref.current),[rt]=pt.slice(-1),gt=document.activeElement;for(const mt of $)if(mt===gt||(mt?.scrollIntoView({block:"nearest"}),mt===ft&&x&&(x.scrollTop=0),mt===rt&&x&&(x.scrollTop=x.scrollHeight),mt?.focus(),document.activeElement!==gt))return},[R,x]),B=E.useCallback(()=>D([A,y]),[D,A,y]);E.useEffect(()=>{P&&B()},[P,B]);const{onOpenChange:I,triggerPointerDownPosRef:F}=v;E.useEffect(()=>{if(y){let $={x:0,y:0};const ft=rt=>{$={x:Math.abs(Math.round(rt.pageX)-(F.current?.x??0)),y:Math.abs(Math.round(rt.pageY)-(F.current?.y??0))}},pt=rt=>{$.x<=10&&$.y<=10?rt.preventDefault():y.contains(rt.target)||I(!1),document.removeEventListener("pointermove",ft),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",ft),document.addEventListener("pointerup",pt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ft),document.removeEventListener("pointerup",pt,{capture:!0})}}},[y,I,F]),E.useEffect(()=>{const $=()=>I(!1);return window.addEventListener("blur",$),window.addEventListener("resize",$),()=>{window.removeEventListener("blur",$),window.removeEventListener("resize",$)}},[I]);const[j,H]=wK($=>{const ft=R().filter(gt=>!gt.disabled),pt=ft.find(gt=>gt.ref.current===document.activeElement),rt=AK(ft,$,pt);rt&&setTimeout(()=>rt.ref.current.focus())}),U=E.useCallback(($,ft,pt)=>{const rt=!T.current&&!pt;(v.value!==void 0&&v.value===ft||rt)&&(k($),rt&&(T.current=!0))},[v.value]),K=E.useCallback(()=>y?.focus(),[y]),q=E.useCallback(($,ft,pt)=>{const rt=!T.current&&!pt;(v.value!==void 0&&v.value===ft||rt)&&M($)},[v.value]),Z=n==="popper"?wO:oK,at=Z===wO?{side:o,sideOffset:l,align:u,alignOffset:c,arrowPadding:h,collisionBoundary:d,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:m}:{};return V.jsx(sK,{scope:e,content:y,viewport:x,onViewportChange:S,itemRefCallback:U,selectedItem:A,onItemLeave:K,itemTextRefCallback:q,focusSelectedItem:B,selectedItemText:C,position:n,isPositioned:P,searchRef:j,children:V.jsx(pb,{as:yyt,allowPinchZoom:!0,children:V.jsx(cb,{asChild:!0,trapped:v.open,onMountAutoFocus:$=>{$.preventDefault()},onUnmountAutoFocus:Et(r,$=>{v.trigger?.focus({preventScroll:!0}),$.preventDefault()}),children:V.jsx(uf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:$=>$.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:V.jsx(Z,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:$=>$.preventDefault(),..._,...at,onPlaced:()=>O(!0),ref:w,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Et(_.onKeyDown,$=>{const ft=$.ctrlKey||$.altKey||$.metaKey;if($.key==="Tab"&&$.preventDefault(),!ft&&$.key.length===1&&H($.key),["ArrowUp","ArrowDown","Home","End"].includes($.key)){let rt=R().filter(gt=>!gt.disabled).map(gt=>gt.ref.current);if(["ArrowUp","End"].includes($.key)&&(rt=rt.slice().reverse()),["ArrowUp","ArrowDown"].includes($.key)){const gt=$.target,mt=rt.indexOf(gt);rt=rt.slice(mt+1)}setTimeout(()=>D(rt)),$.preventDefault()}})})})})})})});aK.displayName=vyt;var byt="SelectItemAlignedPosition",oK=E.forwardRef((i,t)=>{const{__scopeSelect:e,onPlaced:n,...r}=i,s=xh(Vd,e),a=Sh(Vd,e),[o,l]=E.useState(null),[u,c]=E.useState(null),h=De(t,w=>c(w)),d=EC(e),f=E.useRef(!1),p=E.useRef(!0),{viewport:g,selectedItem:m,selectedItemText:_,focusSelectedItem:v}=a,y=E.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&u&&g&&m&&_){const w=s.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),k=s.valueNode.getBoundingClientRect(),C=_.getBoundingClientRect();if(s.dir!=="rtl"){const gt=C.left-A.left,mt=k.left-gt,Dt=w.left-mt,St=w.width+Dt,Ot=Math.max(St,A.width),Pt=window.innerWidth-wo,_e=OH(mt,[wo,Math.max(wo,Pt-Ot)]);o.style.minWidth=St+"px",o.style.left=_e+"px"}else{const gt=A.right-C.right,mt=window.innerWidth-k.right-gt,Dt=window.innerWidth-w.right-mt,St=w.width+Dt,Ot=Math.max(St,A.width),Pt=window.innerWidth-wo,_e=OH(mt,[wo,Math.max(wo,Pt-Ot)]);o.style.minWidth=St+"px",o.style.right=_e+"px"}const M=d(),R=window.innerHeight-wo*2,P=g.scrollHeight,O=window.getComputedStyle(u),T=parseInt(O.borderTopWidth,10),D=parseInt(O.paddingTop,10),B=parseInt(O.borderBottomWidth,10),I=parseInt(O.paddingBottom,10),F=T+D+P+I+B,j=Math.min(m.offsetHeight*5,F),H=window.getComputedStyle(g),U=parseInt(H.paddingTop,10),K=parseInt(H.paddingBottom,10),q=w.top+w.height/2-wo,Z=R-q,at=m.offsetHeight/2,$=m.offsetTop+at,ft=T+D+$,pt=F-ft;if(ft<=q){const gt=M.length>0&&m===M[M.length-1].ref.current;o.style.bottom="0px";const mt=u.clientHeight-g.offsetTop-g.offsetHeight,Dt=Math.max(Z,at+(gt?K:0)+mt+B),St=ft+Dt;o.style.height=St+"px"}else{const gt=M.length>0&&m===M[0].ref.current;o.style.top="0px";const Dt=Math.max(q,T+g.offsetTop+(gt?U:0)+at)+pt;o.style.height=Dt+"px",g.scrollTop=ft-q+g.offsetTop}o.style.margin=`${wo}px 0`,o.style.minHeight=j+"px",o.style.maxHeight=R+"px",n?.(),requestAnimationFrame(()=>f.current=!0)}},[d,s.trigger,s.valueNode,o,u,g,m,_,s.dir,n]);Hn(()=>y(),[y]);const[b,x]=E.useState();Hn(()=>{u&&x(window.getComputedStyle(u).zIndex)},[u]);const S=E.useCallback(w=>{w&&p.current===!0&&(y(),v?.(),p.current=!1)},[y,v]);return V.jsx(Syt,{scope:e,contentWrapper:o,shouldExpandOnScrollRef:f,onScrollButtonChange:S,children:V.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:V.jsx(ue.div,{...r,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});oK.displayName=byt;var xyt="SelectPopperPosition",wO=E.forwardRef((i,t)=>{const{__scopeSelect:e,align:n="start",collisionPadding:r=wo,...s}=i,a=RC(e);return V.jsx(yC,{...a,...s,ref:t,align:n,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wO.displayName=xyt;var[Syt,nB]=Mm(Vd,{}),AO="SelectViewport",lK=E.forwardRef((i,t)=>{const{__scopeSelect:e,nonce:n,...r}=i,s=Sh(AO,e),a=nB(AO,e),o=De(t,s.onViewportChange),l=E.useRef(0);return V.jsxs(V.Fragment,{children:[V.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),V.jsx(PC.Slot,{scope:e,children:V.jsx(ue.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:Et(r.onScroll,u=>{const c=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:d}=a;if(d?.current&&h){const f=Math.abs(l.current-c.scrollTop);if(f>0){const p=window.innerHeight-wo*2,g=parseFloat(h.style.minHeight),m=parseFloat(h.style.height),_=Math.max(g,m);if(_<p){const v=_+f,y=Math.min(p,v),b=v-y;h.style.height=y+"px",h.style.bottom==="0px"&&(c.scrollTop=b>0?b:0,h.style.justifyContent="flex-end")}}}l.current=c.scrollTop})})})]})});lK.displayName=AO;var uK="SelectGroup",[wyt,Ayt]=Mm(uK),kyt=E.forwardRef((i,t)=>{const{__scopeSelect:e,...n}=i,r=eo();return V.jsx(wyt,{scope:e,id:r,children:V.jsx(ue.div,{role:"group","aria-labelledby":r,...n,ref:t})})});kyt.displayName=uK;var cK="SelectLabel",hK=E.forwardRef((i,t)=>{const{__scopeSelect:e,...n}=i,r=Ayt(cK,e);return V.jsx(ue.div,{id:r.id,...n,ref:t})});hK.displayName=cK;var lw="SelectItem",[Cyt,dK]=Mm(lw),fK=E.forwardRef((i,t)=>{const{__scopeSelect:e,value:n,disabled:r=!1,textValue:s,...a}=i,o=xh(lw,e),l=Sh(lw,e),u=o.value===n,[c,h]=E.useState(s??""),[d,f]=E.useState(!1),p=De(t,v=>l.itemRefCallback?.(v,n,r)),g=eo(),m=E.useRef("touch"),_=()=>{r||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return V.jsx(Cyt,{scope:e,value:n,disabled:r,textId:g,isSelected:u,onItemTextChange:E.useCallback(v=>{h(y=>y||(v?.textContent??"").trim())},[]),children:V.jsx(PC.ItemSlot,{scope:e,value:n,disabled:r,textValue:c,children:V.jsx(ue.div,{role:"option","aria-labelledby":g,"data-highlighted":d?"":void 0,"aria-selected":u&&d,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:p,onFocus:Et(a.onFocus,()=>f(!0)),onBlur:Et(a.onBlur,()=>f(!1)),onClick:Et(a.onClick,()=>{m.current!=="mouse"&&_()}),onPointerUp:Et(a.onPointerUp,()=>{m.current==="mouse"&&_()}),onPointerDown:Et(a.onPointerDown,v=>{m.current=v.pointerType}),onPointerMove:Et(a.onPointerMove,v=>{m.current=v.pointerType,r?l.onItemLeave?.():m.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Et(a.onPointerLeave,v=>{v.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:Et(a.onKeyDown,v=>{l.searchRef?.current!==""&&v.key===" "||(hyt.includes(v.key)&&_(),v.key===" "&&v.preventDefault())})})})})});fK.displayName=lw;var W_="SelectItemText",pK=E.forwardRef((i,t)=>{const{__scopeSelect:e,className:n,style:r,...s}=i,a=xh(W_,e),o=Sh(W_,e),l=dK(W_,e),u=gyt(W_,e),[c,h]=E.useState(null),d=De(t,_=>h(_),l.onItemTextChange,_=>o.itemTextRefCallback?.(_,l.value,l.disabled)),f=c?.textContent,p=E.useMemo(()=>V.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:m}=u;return Hn(()=>(g(p),()=>m(p)),[g,m,p]),V.jsxs(V.Fragment,{children:[V.jsx(ue.span,{id:l.textId,...s,ref:d}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?rc.createPortal(s.children,a.valueNode):null]})});pK.displayName=W_;var gK="SelectItemIndicator",mK=E.forwardRef((i,t)=>{const{__scopeSelect:e,...n}=i;return dK(gK,e).isSelected?V.jsx(ue.span,{"aria-hidden":!0,...n,ref:t}):null});mK.displayName=gK;var kO="SelectScrollUpButton",_K=E.forwardRef((i,t)=>{const e=Sh(kO,i.__scopeSelect),n=nB(kO,i.__scopeSelect),[r,s]=E.useState(!1),a=De(t,n.onScrollButtonChange);return Hn(()=>{if(e.viewport&&e.isPositioned){let o=function(){const u=l.scrollTop>0;s(u)};const l=e.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[e.viewport,e.isPositioned]),r?V.jsx(yK,{...i,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=e;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});_K.displayName=kO;var CO="SelectScrollDownButton",vK=E.forwardRef((i,t)=>{const e=Sh(CO,i.__scopeSelect),n=nB(CO,i.__scopeSelect),[r,s]=E.useState(!1),a=De(t,n.onScrollButtonChange);return Hn(()=>{if(e.viewport&&e.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,c=Math.ceil(l.scrollTop)<u;s(c)};const l=e.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[e.viewport,e.isPositioned]),r?V.jsx(yK,{...i,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=e;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});vK.displayName=CO;var yK=E.forwardRef((i,t)=>{const{__scopeSelect:e,onAutoScroll:n,...r}=i,s=Sh("SelectScrollButton",e),a=E.useRef(null),o=EC(e),l=E.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return E.useEffect(()=>()=>l(),[l]),Hn(()=>{o().find(c=>c.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),V.jsx(ue.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:Et(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:Et(r.onPointerMove,()=>{s.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:Et(r.onPointerLeave,()=>{l()})})}),Myt="SelectSeparator",bK=E.forwardRef((i,t)=>{const{__scopeSelect:e,...n}=i;return V.jsx(ue.div,{"aria-hidden":!0,...n,ref:t})});bK.displayName=Myt;var MO="SelectArrow",Tyt=E.forwardRef((i,t)=>{const{__scopeSelect:e,...n}=i,r=RC(e),s=xh(MO,e),a=Sh(MO,e);return s.open&&a.position==="popper"?V.jsx(bC,{...r,...n,ref:t}):null});Tyt.displayName=MO;var Pyt="SelectBubbleInput",xK=E.forwardRef(({__scopeSelect:i,value:t,...e},n)=>{const r=E.useRef(null),s=De(n,r),a=MC(t);return E.useEffect(()=>{const o=r.current;if(!o)return;const l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&c){const h=new Event("change",{bubbles:!0});c.call(o,t),o.dispatchEvent(h)}},[a,t]),V.jsx(ue.select,{...e,style:{...qX,...e.style},ref:s,defaultValue:t})});xK.displayName=Pyt;function SK(i){return i===""||i===void 0}function wK(i){const t=_s(i),e=E.useRef(""),n=E.useRef(0),r=E.useCallback(a=>{const o=e.current+a;t(o),function l(u){e.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),s=E.useCallback(()=>{e.current="",window.clearTimeout(n.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(n.current),[]),[e,r,s]}function AK(i,t,e){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=e?i.indexOf(e):-1;let a=Eyt(i,Math.max(s,0));r.length===1&&(a=a.filter(u=>u!==e));const l=a.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==e?l:void 0}function Eyt(i,t){return i.map((e,n)=>i[(t+n)%i.length])}var UJt=ZX,GJt=JX,YJt=eK,XJt=iK,KJt=nK,qJt=rK,ZJt=lK,QJt=hK,JJt=fK,tte=pK,ete=mK,ite=_K,nte=vK,rte=bK,[OC]=rs("Tooltip",[bh]),DC=bh(),kK="TooltipProvider",Ryt=700,TO="tooltip.open",[Oyt,rB]=OC(kK),CK=i=>{const{__scopeTooltip:t,delayDuration:e=Ryt,skipDelayDuration:n=300,disableHoverableContent:r=!1,children:s}=i,a=E.useRef(!0),o=E.useRef(!1),l=E.useRef(0);return E.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),V.jsx(Oyt,{scope:t,isOpenDelayedRef:a,delayDuration:e,onOpen:E.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:E.useCallback(u=>{o.current=u},[]),disableHoverableContent:r,children:s})};CK.displayName=kK;var Yy="Tooltip",[Dyt,IC]=OC(Yy),MK=i=>{const{__scopeTooltip:t,children:e,open:n,defaultOpen:r,onOpenChange:s,disableHoverableContent:a,delayDuration:o}=i,l=rB(Yy,i.__scopeTooltip),u=DC(t),[c,h]=E.useState(null),d=eo(),f=E.useRef(0),p=a??l.disableHoverableContent,g=o??l.delayDuration,m=E.useRef(!1),[_,v]=oo({prop:n,defaultProp:r??!1,onChange:w=>{w?(l.onOpen(),document.dispatchEvent(new CustomEvent(TO))):l.onClose(),s?.(w)},caller:Yy}),y=E.useMemo(()=>_?m.current?"delayed-open":"instant-open":"closed",[_]),b=E.useCallback(()=>{window.clearTimeout(f.current),f.current=0,m.current=!1,v(!0)},[v]),x=E.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),S=E.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{m.current=!0,v(!0),f.current=0},g)},[g,v]);return E.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),V.jsx(vC,{...u,children:V.jsx(Dyt,{scope:t,contentId:d,open:_,stateAttribute:y,trigger:c,onTriggerChange:h,onTriggerEnter:E.useCallback(()=>{l.isOpenDelayedRef.current?S():b()},[l.isOpenDelayedRef,S,b]),onTriggerLeave:E.useCallback(()=>{p?x():(window.clearTimeout(f.current),f.current=0)},[x,p]),onOpen:b,onClose:x,disableHoverableContent:p,children:e})})};MK.displayName=Yy;var PO="TooltipTrigger",TK=E.forwardRef((i,t)=>{const{__scopeTooltip:e,...n}=i,r=IC(PO,e),s=rB(PO,e),a=DC(e),o=E.useRef(null),l=De(t,o,r.onTriggerChange),u=E.useRef(!1),c=E.useRef(!1),h=E.useCallback(()=>u.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),V.jsx(db,{asChild:!0,...a,children:V.jsx(ue.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...n,ref:l,onPointerMove:Et(i.onPointerMove,d=>{d.pointerType!=="touch"&&!c.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),c.current=!0)}),onPointerLeave:Et(i.onPointerLeave,()=>{r.onTriggerLeave(),c.current=!1}),onPointerDown:Et(i.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Et(i.onFocus,()=>{u.current||r.onOpen()}),onBlur:Et(i.onBlur,r.onClose),onClick:Et(i.onClick,r.onClose)})})});TK.displayName=PO;var Iyt="TooltipPortal",[ste,Lyt]=OC(Iyt,{forceMount:void 0}),Bg="TooltipContent",PK=E.forwardRef((i,t)=>{const e=Lyt(Bg,i.__scopeTooltip),{forceMount:n=e.forceMount,side:r="top",...s}=i,a=IC(Bg,i.__scopeTooltip);return V.jsx(ws,{present:n||a.open,children:a.disableHoverableContent?V.jsx(EK,{side:r,...s,ref:t}):V.jsx(Byt,{side:r,...s,ref:t})})}),Byt=E.forwardRef((i,t)=>{const e=IC(Bg,i.__scopeTooltip),n=rB(Bg,i.__scopeTooltip),r=E.useRef(null),s=De(t,r),[a,o]=E.useState(null),{trigger:l,onClose:u}=e,c=r.current,{onPointerInTransitChange:h}=n,d=E.useCallback(()=>{o(null),h(!1)},[h]),f=E.useCallback((p,g)=>{const m=p.currentTarget,_={x:p.clientX,y:p.clientY},v=Hyt(_,m.getBoundingClientRect()),y=Vyt(_,v),b=Wyt(g.getBoundingClientRect()),x=Uyt([...y,...b]);o(x),h(!0)},[h]);return E.useEffect(()=>()=>d(),[d]),E.useEffect(()=>{if(l&&c){const p=m=>f(m,c),g=m=>f(m,l);return l.addEventListener("pointerleave",p),c.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",p),c.removeEventListener("pointerleave",g)}}},[l,c,f,d]),E.useEffect(()=>{if(a){const p=g=>{const m=g.target,_={x:g.clientX,y:g.clientY},v=l?.contains(m)||c?.contains(m),y=!$yt(_,a);v?d():y&&(d(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,c,a,u,d]),V.jsx(EK,{...i,ref:s})}),[Fyt,zyt]=OC(Yy,{isInside:!1}),Nyt=A9("TooltipContent"),EK=E.forwardRef((i,t)=>{const{__scopeTooltip:e,children:n,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=i,l=IC(Bg,e),u=DC(e),{onClose:c}=l;return E.useEffect(()=>(document.addEventListener(TO,c),()=>document.removeEventListener(TO,c)),[c]),E.useEffect(()=>{if(l.trigger){const h=d=>{d.target?.contains(l.trigger)&&c()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,c]),V.jsx(uf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:c,children:V.jsxs(yC,{"data-state":l.stateAttribute,...u,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[V.jsx(Nyt,{children:n}),V.jsx(Fyt,{scope:e,isInside:!0,children:V.jsx(uyt,{id:l.contentId,role:"tooltip",children:r||n})})]})})});PK.displayName=Bg;var RK="TooltipArrow",jyt=E.forwardRef((i,t)=>{const{__scopeTooltip:e,...n}=i,r=DC(e);return zyt(RK,e).isInside?null:V.jsx(bC,{...r,...n,ref:t})});jyt.displayName=RK;function Hyt(i,t){const e=Math.abs(t.top-i.y),n=Math.abs(t.bottom-i.y),r=Math.abs(t.right-i.x),s=Math.abs(t.left-i.x);switch(Math.min(e,n,r,s)){case s:return"left";case r:return"right";case e:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Vyt(i,t,e=5){const n=[];switch(t){case"top":n.push({x:i.x-e,y:i.y+e},{x:i.x+e,y:i.y+e});break;case"bottom":n.push({x:i.x-e,y:i.y-e},{x:i.x+e,y:i.y-e});break;case"left":n.push({x:i.x+e,y:i.y-e},{x:i.x+e,y:i.y+e});break;case"right":n.push({x:i.x-e,y:i.y-e},{x:i.x-e,y:i.y+e});break}return n}function Wyt(i){const{top:t,right:e,bottom:n,left:r}=i;return[{x:r,y:t},{x:e,y:t},{x:e,y:n},{x:r,y:n}]}function $yt(i,t){const{x:e,y:n}=i;let r=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const o=t[s],l=t[a],u=o.x,c=o.y,h=l.x,d=l.y;c>n!=d>n&&e<(h-u)*(n-c)/(d-c)+u&&(r=!r)}return r}function Uyt(i){const t=i.slice();return t.sort((e,n)=>e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0),Gyt(t)}function Gyt(i){if(i.length<=1)return i.slice();const t=[];for(let n=0;n<i.length;n++){const r=i[n];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))t.pop();else break}t.push(r)}t.pop();const e=[];for(let n=i.length-1;n>=0;n--){const r=i[n];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))e.pop();else break}e.push(r)}return e.pop(),t.length===1&&e.length===1&&t[0].x===e[0].x&&t[0].y===e[0].y?t:t.concat(e)}var ate=CK,ote=MK,lte=TK,ute=PK;const DH=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,IH=kft,cte=(i,t)=>e=>{var n;if(t?.variants==null)return IH(i,e?.class,e?.className);const{variants:r,defaultVariants:s}=t,a=Object.keys(r).map(u=>{const c=e?.[u],h=s?.[u];if(c===null)return null;const d=DH(c)||DH(h);return r[u][d]}),o=e&&Object.entries(e).reduce((u,c)=>{let[h,d]=c;return d===void 0||(u[h]=d),u},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,c)=>{let{class:h,className:d,...f}=c;return Object.entries(f).every(p=>{let[g,m]=p;return Array.isArray(m)?m.includes({...s,...o}[g]):{...s,...o}[g]===m})?[...u,h,d]:u},[]);return IH(i,a,l,e?.class,e?.className)};var Yyt="Separator",LH="horizontal",Xyt=["horizontal","vertical"],OK=E.forwardRef((i,t)=>{const{decorative:e,orientation:n=LH,...r}=i,s=Kyt(n)?n:LH,o=e?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return V.jsx(ub.div,{"data-orientation":s,...o,...r,ref:t})});OK.displayName=Yyt;function Kyt(i){return Xyt.includes(i)}var hte=OK,LC="Dialog",[DK,IK]=rs(LC),[qyt,el]=DK(LC),LK=i=>{const{__scopeDialog:t,children:e,open:n,defaultOpen:r,onOpenChange:s,modal:a=!0}=i,o=E.useRef(null),l=E.useRef(null),[u,c]=oo({prop:n,defaultProp:r??!1,onChange:s,caller:LC});return V.jsx(qyt,{scope:t,triggerRef:o,contentRef:l,contentId:eo(),titleId:eo(),descriptionId:eo(),open:u,onOpenChange:c,onOpenToggle:E.useCallback(()=>c(h=>!h),[c]),modal:a,children:e})};LK.displayName=LC;var BK="DialogTrigger",FK=E.forwardRef((i,t)=>{const{__scopeDialog:e,...n}=i,r=el(BK,e),s=De(t,r.triggerRef);return V.jsx(ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":oB(r.open),...n,ref:s,onClick:Et(i.onClick,r.onOpenToggle)})});FK.displayName=BK;var sB="DialogPortal",[Zyt,zK]=DK(sB,{forceMount:void 0}),NK=i=>{const{__scopeDialog:t,forceMount:e,children:n,container:r}=i,s=el(sB,t);return V.jsx(Zyt,{scope:t,forceMount:e,children:E.Children.map(n,a=>V.jsx(ws,{present:e||s.open,children:V.jsx(Cm,{asChild:!0,container:r,children:a})}))})};NK.displayName=sB;var uw="DialogOverlay",jK=E.forwardRef((i,t)=>{const e=zK(uw,i.__scopeDialog),{forceMount:n=e.forceMount,...r}=i,s=el(uw,i.__scopeDialog);return s.modal?V.jsx(ws,{present:n||s.open,children:V.jsx(Jyt,{...r,ref:t})}):null});jK.displayName=uw;var Qyt=Nd("DialogOverlay.RemoveScroll"),Jyt=E.forwardRef((i,t)=>{const{__scopeDialog:e,...n}=i,r=el(uw,e);return V.jsx(pb,{as:Qyt,allowPinchZoom:!0,shards:[r.contentRef],children:V.jsx(ue.div,{"data-state":oB(r.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Wd="DialogContent",HK=E.forwardRef((i,t)=>{const e=zK(Wd,i.__scopeDialog),{forceMount:n=e.forceMount,...r}=i,s=el(Wd,i.__scopeDialog);return V.jsx(ws,{present:n||s.open,children:s.modal?V.jsx(t0t,{...r,ref:t}):V.jsx(e0t,{...r,ref:t})})});HK.displayName=Wd;var t0t=E.forwardRef((i,t)=>{const e=el(Wd,i.__scopeDialog),n=E.useRef(null),r=De(t,e.contentRef,n);return E.useEffect(()=>{const s=n.current;if(s)return SC(s)},[]),V.jsx(VK,{...i,ref:r,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Et(i.onCloseAutoFocus,s=>{s.preventDefault(),e.triggerRef.current?.focus()}),onPointerDownOutside:Et(i.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:Et(i.onFocusOutside,s=>s.preventDefault())})}),e0t=E.forwardRef((i,t)=>{const e=el(Wd,i.__scopeDialog),n=E.useRef(!1),r=E.useRef(!1);return V.jsx(VK,{...i,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{i.onCloseAutoFocus?.(s),s.defaultPrevented||(n.current||e.triggerRef.current?.focus(),s.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:s=>{i.onInteractOutside?.(s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const a=s.target;e.triggerRef.current?.contains(a)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),VK=E.forwardRef((i,t)=>{const{__scopeDialog:e,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:s,...a}=i,o=el(Wd,e),l=E.useRef(null),u=De(t,l);return dC(),V.jsxs(V.Fragment,{children:[V.jsx(cb,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:s,children:V.jsx(uf,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":oB(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),V.jsxs(V.Fragment,{children:[V.jsx(n0t,{titleId:o.titleId}),V.jsx(s0t,{contentRef:l,descriptionId:o.descriptionId})]})]})}),aB="DialogTitle",WK=E.forwardRef((i,t)=>{const{__scopeDialog:e,...n}=i,r=el(aB,e);return V.jsx(ue.h2,{id:r.titleId,...n,ref:t})});WK.displayName=aB;var $K="DialogDescription",UK=E.forwardRef((i,t)=>{const{__scopeDialog:e,...n}=i,r=el($K,e);return V.jsx(ue.p,{id:r.descriptionId,...n,ref:t})});UK.displayName=$K;var GK="DialogClose",YK=E.forwardRef((i,t)=>{const{__scopeDialog:e,...n}=i,r=el(GK,e);return V.jsx(ue.button,{type:"button",...n,ref:t,onClick:Et(i.onClick,()=>r.onOpenChange(!1))})});YK.displayName=GK;function oB(i){return i?"open":"closed"}var XK="DialogTitleWarning",[i0t,KK]=fpt(XK,{contentName:Wd,titleName:aB,docsSlug:"dialog"}),n0t=({titleId:i})=>{const t=KK(XK),e=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return E.useEffect(()=>{i&&(document.getElementById(i)||console.error(e))},[e,i]),null},r0t="DialogDescriptionWarning",s0t=({contentRef:i,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${KK(r0t).contentName}}.`;return E.useEffect(()=>{const r=i.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(n))},[n,i,t]),null},qK=LK,a0t=FK,ZK=NK,QK=jK,JK=HK,tq=WK,eq=UK,iq=YK;const BH=i=>{let t;const e=new Set,n=(u,c)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const d=t;t=c??(typeof h!="object"||h===null)?h:Object.assign({},t,h),e.forEach(f=>f(t,d))}},r=()=>t,o={setState:n,getState:r,getInitialState:()=>l,subscribe:u=>(e.add(u),()=>e.delete(u))},l=t=i(n,r,o);return o},o0t=i=>i?BH(i):BH,l0t=i=>i;function u0t(i,t=l0t){const e=Y.useSyncExternalStore(i.subscribe,Y.useCallback(()=>t(i.getState()),[i,t]),Y.useCallback(()=>t(i.getInitialState()),[i,t]));return Y.useDebugValue(e),e}const c0t=i=>{const t=o0t(i),e=n=>u0t(t,n);return Object.assign(e,t),e},dte=i=>c0t;function h0t(i,t){let e;try{e=i()}catch{return}return{getItem:r=>{var s;const a=l=>l===null?null:JSON.parse(l,void 0),o=(s=e.getItem(r))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(r,s)=>e.setItem(r,JSON.stringify(s,void 0)),removeItem:r=>e.removeItem(r)}}const EO=i=>t=>{try{const e=i(t);return e instanceof Promise?e:{then(n){return EO(n)(e)},catch(n){return this}}}catch(e){return{then(n){return this},catch(n){return EO(n)(e)}}}},d0t=(i,t)=>(e,n,r)=>{let s={storage:h0t(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...t},a=!1;const o=new Set,l=new Set;let u=s.storage;if(!u)return i((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),e(...g)},n,r);const c=()=>{const g=s.partialize({...n()});return u.setItem(s.name,{state:g,version:s.version})},h=r.setState;r.setState=(g,m)=>(h(g,m),c());const d=i((...g)=>(e(...g),c()),n,r);r.getInitialState=()=>d;let f;const p=()=>{var g,m;if(!u)return;a=!1,o.forEach(v=>{var y;return v((y=n())!=null?y:d)});const _=((m=s.onRehydrateStorage)==null?void 0:m.call(s,(g=n())!=null?g:d))||void 0;return EO(u.getItem.bind(u))(s.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate){const y=s.migrate(v.state,v.version);return y instanceof Promise?y.then(b=>[!0,b]):[!0,y]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var y;const[b,x]=v;if(f=s.merge(x,(y=n())!=null?y:d),e(f,!0),b)return c()}).then(()=>{_?.(f,void 0),f=n(),a=!0,l.forEach(v=>v(f))}).catch(v=>{_?.(void 0,v)})};return r.persist={setOptions:g=>{s={...s,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>a,onHydrate:g=>(o.add(g),()=>{o.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},s.skipHydration||p(),f||d},fte=d0t;var BC="Collapsible",[f0t]=rs(BC),[p0t,lB]=f0t(BC),nq=E.forwardRef((i,t)=>{const{__scopeCollapsible:e,open:n,defaultOpen:r,disabled:s,onOpenChange:a,...o}=i,[l,u]=oo({prop:n,defaultProp:r??!1,onChange:a,caller:BC});return V.jsx(p0t,{scope:e,disabled:s,contentId:eo(),open:l,onOpenToggle:E.useCallback(()=>u(c=>!c),[u]),children:V.jsx(ue.div,{"data-state":cB(l),"data-disabled":s?"":void 0,...o,ref:t})})});nq.displayName=BC;var rq="CollapsibleTrigger",g0t=E.forwardRef((i,t)=>{const{__scopeCollapsible:e,...n}=i,r=lB(rq,e);return V.jsx(ue.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":cB(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...n,ref:t,onClick:Et(i.onClick,r.onOpenToggle)})});g0t.displayName=rq;var uB="CollapsibleContent",m0t=E.forwardRef((i,t)=>{const{forceMount:e,...n}=i,r=lB(uB,i.__scopeCollapsible);return V.jsx(ws,{present:e||r.open,children:({present:s})=>V.jsx(_0t,{...n,ref:t,present:s})})});m0t.displayName=uB;var _0t=E.forwardRef((i,t)=>{const{__scopeCollapsible:e,present:n,children:r,...s}=i,a=lB(uB,e),[o,l]=E.useState(n),u=E.useRef(null),c=De(t,u),h=E.useRef(0),d=h.current,f=E.useRef(0),p=f.current,g=a.open||o,m=E.useRef(g),_=E.useRef(void 0);return E.useEffect(()=>{const v=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(v)},[]),Hn(()=>{const v=u.current;if(v){_.current=_.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const y=v.getBoundingClientRect();h.current=y.height,f.current=y.width,m.current||(v.style.transitionDuration=_.current.transitionDuration,v.style.animationName=_.current.animationName),l(n)}},[a.open,n]),V.jsx(ue.div,{"data-state":cB(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!g,...s,ref:c,style:{"--radix-collapsible-content-height":d?`${d}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...i.style},children:g&&r})});function cB(i){return i?"open":"closed"}var pte=nq;function sq(i,t){return function(){return i.apply(t,arguments)}}const{toString:v0t}=Object.prototype,{getPrototypeOf:hB}=Object,{iterator:FC,toStringTag:aq}=Symbol,zC=(i=>t=>{const e=v0t.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),il=i=>(i=i.toLowerCase(),t=>zC(t)===i),NC=i=>t=>typeof t===i,{isArray:Tm}=Array,Fg=NC("undefined");function _b(i){return i!==null&&!Fg(i)&&i.constructor!==null&&!Fg(i.constructor)&&qs(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const oq=il("ArrayBuffer");function y0t(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&oq(i.buffer),t}const b0t=NC("string"),qs=NC("function"),lq=NC("number"),vb=i=>i!==null&&typeof i=="object",x0t=i=>i===!0||i===!1,s1=i=>{if(zC(i)!=="object")return!1;const t=hB(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(aq in i)&&!(FC in i)},S0t=i=>{if(!vb(i)||_b(i))return!1;try{return Object.keys(i).length===0&&Object.getPrototypeOf(i)===Object.prototype}catch{return!1}},w0t=il("Date"),A0t=il("File"),k0t=il("Blob"),C0t=il("FileList"),M0t=i=>vb(i)&&qs(i.pipe),T0t=i=>{let t;return i&&(typeof FormData=="function"&&i instanceof FormData||qs(i.append)&&((t=zC(i))==="formdata"||t==="object"&&qs(i.toString)&&i.toString()==="[object FormData]"))},P0t=il("URLSearchParams"),[E0t,R0t,O0t,D0t]=["ReadableStream","Request","Response","Headers"].map(il),I0t=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function yb(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let n,r;if(typeof i!="object"&&(i=[i]),Tm(i))for(n=0,r=i.length;n<r;n++)t.call(null,i[n],n,i);else{if(_b(i))return;const s=e?Object.getOwnPropertyNames(i):Object.keys(i),a=s.length;let o;for(n=0;n<a;n++)o=s[n],t.call(null,i[o],o,i)}}function uq(i,t){if(_b(i))return null;t=t.toLowerCase();const e=Object.keys(i);let n=e.length,r;for(;n-- >0;)if(r=e[n],t===r.toLowerCase())return r;return null}const rd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cq=i=>!Fg(i)&&i!==rd;function RO(){const{caseless:i,skipUndefined:t}=cq(this)&&this||{},e={},n=(r,s)=>{const a=i&&uq(e,s)||s;s1(e[a])&&s1(r)?e[a]=RO(e[a],r):s1(r)?e[a]=RO({},r):Tm(r)?e[a]=r.slice():(!t||!Fg(r))&&(e[a]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&yb(arguments[r],n);return e}const L0t=(i,t,e,{allOwnKeys:n}={})=>(yb(t,(r,s)=>{e&&qs(r)?i[s]=sq(r,e):i[s]=r},{allOwnKeys:n}),i),B0t=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),F0t=(i,t,e,n)=>{i.prototype=Object.create(t.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},z0t=(i,t,e,n)=>{let r,s,a;const o={};if(t=t||{},i==null)return t;do{for(r=Object.getOwnPropertyNames(i),s=r.length;s-- >0;)a=r[s],(!n||n(a,i,t))&&!o[a]&&(t[a]=i[a],o[a]=!0);i=e!==!1&&hB(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},N0t=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const n=i.indexOf(t,e);return n!==-1&&n===e},j0t=i=>{if(!i)return null;if(Tm(i))return i;let t=i.length;if(!lq(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},H0t=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&hB(Uint8Array)),V0t=(i,t)=>{const n=(i&&i[FC]).call(i);let r;for(;(r=n.next())&&!r.done;){const s=r.value;t.call(i,s[0],s[1])}},W0t=(i,t)=>{let e;const n=[];for(;(e=i.exec(t))!==null;)n.push(e);return n},$0t=il("HTMLFormElement"),U0t=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,r){return n.toUpperCase()+r}),FH=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),G0t=il("RegExp"),hq=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),n={};yb(e,(r,s)=>{let a;(a=t(r,s,i))!==!1&&(n[s]=a||r)}),Object.defineProperties(i,n)},Y0t=i=>{hq(i,(t,e)=>{if(qs(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=i[e];if(qs(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},X0t=(i,t)=>{const e={},n=r=>{r.forEach(s=>{e[s]=!0})};return Tm(i)?n(i):n(String(i).split(t)),e},K0t=()=>{},q0t=(i,t)=>i!=null&&Number.isFinite(i=+i)?i:t;function Z0t(i){return!!(i&&qs(i.append)&&i[aq]==="FormData"&&i[FC])}const Q0t=i=>{const t=new Array(10),e=(n,r)=>{if(vb(n)){if(t.indexOf(n)>=0)return;if(_b(n))return n;if(!("toJSON"in n)){t[r]=n;const s=Tm(n)?[]:{};return yb(n,(a,o)=>{const l=e(a,r+1);!Fg(l)&&(s[o]=l)}),t[r]=void 0,s}}return n};return e(i,0)},J0t=il("AsyncFunction"),tbt=i=>i&&(vb(i)||qs(i))&&qs(i.then)&&qs(i.catch),dq=((i,t)=>i?setImmediate:t?((e,n)=>(rd.addEventListener("message",({source:r,data:s})=>{r===rd&&s===e&&n.length&&n.shift()()},!1),r=>{n.push(r),rd.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",qs(rd.postMessage)),ebt=typeof queueMicrotask<"u"?queueMicrotask.bind(rd):typeof process<"u"&&process.nextTick||dq,ibt=i=>i!=null&&qs(i[FC]),ut={isArray:Tm,isArrayBuffer:oq,isBuffer:_b,isFormData:T0t,isArrayBufferView:y0t,isString:b0t,isNumber:lq,isBoolean:x0t,isObject:vb,isPlainObject:s1,isEmptyObject:S0t,isReadableStream:E0t,isRequest:R0t,isResponse:O0t,isHeaders:D0t,isUndefined:Fg,isDate:w0t,isFile:A0t,isBlob:k0t,isRegExp:G0t,isFunction:qs,isStream:M0t,isURLSearchParams:P0t,isTypedArray:H0t,isFileList:C0t,forEach:yb,merge:RO,extend:L0t,trim:I0t,stripBOM:B0t,inherits:F0t,toFlatObject:z0t,kindOf:zC,kindOfTest:il,endsWith:N0t,toArray:j0t,forEachEntry:V0t,matchAll:W0t,isHTMLForm:$0t,hasOwnProperty:FH,hasOwnProp:FH,reduceDescriptors:hq,freezeMethods:Y0t,toObjectSet:X0t,toCamelCase:U0t,noop:K0t,toFiniteNumber:q0t,findKey:uq,global:rd,isContextDefined:cq,isSpecCompliantForm:Z0t,toJSONObject:Q0t,isAsyncFn:J0t,isThenable:tbt,setImmediate:dq,asap:ebt,isIterable:ibt};function Le(i,t,e,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}ut.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ut.toJSONObject(this.config),code:this.code,status:this.status}}});const fq=Le.prototype,pq={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{pq[i]={value:i}});Object.defineProperties(Le,pq);Object.defineProperty(fq,"isAxiosError",{value:!0});Le.from=(i,t,e,n,r,s)=>{const a=Object.create(fq);ut.toFlatObject(i,a,function(c){return c!==Error.prototype},u=>u!=="isAxiosError");const o=i&&i.message?i.message:"Error",l=t==null&&i?i.code:t;return Le.call(a,o,l,e,n,r),i&&a.cause==null&&Object.defineProperty(a,"cause",{value:i,configurable:!0}),a.name=i&&i.name||"Error",s&&Object.assign(a,s),a};const nbt=null;function OO(i){return ut.isPlainObject(i)||ut.isArray(i)}function gq(i){return ut.endsWith(i,"[]")?i.slice(0,-2):i}function zH(i,t,e){return i?i.concat(t).map(function(r,s){return r=gq(r),!e&&s?"["+r+"]":r}).join(e?".":""):t}function rbt(i){return ut.isArray(i)&&!i.some(OO)}const sbt=ut.toFlatObject(ut,{},null,function(t){return/^is[A-Z]/.test(t)});function jC(i,t,e){if(!ut.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=ut.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!ut.isUndefined(m[g])});const n=e.metaTokens,r=e.visitor||c,s=e.dots,a=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&ut.isSpecCompliantForm(t);if(!ut.isFunction(r))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(ut.isDate(p))return p.toISOString();if(ut.isBoolean(p))return p.toString();if(!l&&ut.isBlob(p))throw new Le("Blob is not supported. Use a Buffer instead.");return ut.isArrayBuffer(p)||ut.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,g,m){let _=p;if(p&&!m&&typeof p=="object"){if(ut.endsWith(g,"{}"))g=n?g:g.slice(0,-2),p=JSON.stringify(p);else if(ut.isArray(p)&&rbt(p)||(ut.isFileList(p)||ut.endsWith(g,"[]"))&&(_=ut.toArray(p)))return g=gq(g),_.forEach(function(y,b){!(ut.isUndefined(y)||y===null)&&t.append(a===!0?zH([g],b,s):a===null?g:g+"[]",u(y))}),!1}return OO(p)?!0:(t.append(zH(m,g,s),u(p)),!1)}const h=[],d=Object.assign(sbt,{defaultVisitor:c,convertValue:u,isVisitable:OO});function f(p,g){if(!ut.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(p),ut.forEach(p,function(_,v){(!(ut.isUndefined(_)||_===null)&&r.call(t,_,ut.isString(v)?v.trim():v,g,d))===!0&&f(_,g?g.concat(v):[v])}),h.pop()}}if(!ut.isObject(i))throw new TypeError("data must be an object");return f(i),t}function NH(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function dB(i,t){this._pairs=[],i&&jC(i,this,t)}const mq=dB.prototype;mq.append=function(t,e){this._pairs.push([t,e])};mq.toString=function(t){const e=t?function(n){return t.call(this,n,NH)}:NH;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function abt(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _q(i,t,e){if(!t)return i;const n=e&&e.encode||abt;ut.isFunction(e)&&(e={serialize:e});const r=e&&e.serialize;let s;if(r?s=r(t,e):s=ut.isURLSearchParams(t)?t.toString():new dB(t,e).toString(n),s){const a=i.indexOf("#");a!==-1&&(i=i.slice(0,a)),i+=(i.indexOf("?")===-1?"?":"&")+s}return i}class jH{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ut.forEach(this.handlers,function(n){n!==null&&t(n)})}}const vq={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},obt=typeof URLSearchParams<"u"?URLSearchParams:dB,lbt=typeof FormData<"u"?FormData:null,ubt=typeof Blob<"u"?Blob:null,cbt={isBrowser:!0,classes:{URLSearchParams:obt,FormData:lbt,Blob:ubt},protocols:["http","https","file","blob","url","data"]},fB=typeof window<"u"&&typeof document<"u",DO=typeof navigator=="object"&&navigator||void 0,hbt=fB&&(!DO||["ReactNative","NativeScript","NS"].indexOf(DO.product)<0),dbt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fbt=fB&&window.location.href||"http://localhost",pbt=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:fB,hasStandardBrowserEnv:hbt,hasStandardBrowserWebWorkerEnv:dbt,navigator:DO,origin:fbt},Symbol.toStringTag,{value:"Module"})),Qr={...pbt,...cbt};function gbt(i,t){return jC(i,new Qr.classes.URLSearchParams,{visitor:function(e,n,r,s){return Qr.isNode&&ut.isBuffer(e)?(this.append(n,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function mbt(i){return ut.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function _bt(i){const t={},e=Object.keys(i);let n;const r=e.length;let s;for(n=0;n<r;n++)s=e[n],t[s]=i[s];return t}function yq(i){function t(e,n,r,s){let a=e[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=e.length;return a=!a&&ut.isArray(r)?r.length:a,l?(ut.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):((!r[a]||!ut.isObject(r[a]))&&(r[a]=[]),t(e,n,r[a],s)&&ut.isArray(r[a])&&(r[a]=_bt(r[a])),!o)}if(ut.isFormData(i)&&ut.isFunction(i.entries)){const e={};return ut.forEachEntry(i,(n,r)=>{t(mbt(n),r,e,0)}),e}return null}function vbt(i,t,e){if(ut.isString(i))try{return(t||JSON.parse)(i),ut.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(i)}const bb={transitional:vq,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,s=ut.isObject(t);if(s&&ut.isHTMLForm(t)&&(t=new FormData(t)),ut.isFormData(t))return r?JSON.stringify(yq(t)):t;if(ut.isArrayBuffer(t)||ut.isBuffer(t)||ut.isStream(t)||ut.isFile(t)||ut.isBlob(t)||ut.isReadableStream(t))return t;if(ut.isArrayBufferView(t))return t.buffer;if(ut.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return gbt(t,this.formSerializer).toString();if((o=ut.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return jC(o?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||r?(e.setContentType("application/json",!1),vbt(t)):t}],transformResponse:[function(t){const e=this.transitional||bb.transitional,n=e&&e.forcedJSONParsing,r=this.responseType==="json";if(ut.isResponse(t)||ut.isReadableStream(t))return t;if(t&&ut.isString(t)&&(n&&!this.responseType||r)){const a=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?Le.from(o,Le.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qr.classes.FormData,Blob:Qr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ut.forEach(["delete","get","head","post","put","patch"],i=>{bb.headers[i]={}});const ybt=ut.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bbt=i=>{const t={};let e,n,r;return i&&i.split(`
`).forEach(function(a){r=a.indexOf(":"),e=a.substring(0,r).trim().toLowerCase(),n=a.substring(r+1).trim(),!(!e||t[e]&&ybt[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},HH=Symbol("internals");function g_(i){return i&&String(i).trim().toLowerCase()}function a1(i){return i===!1||i==null?i:ut.isArray(i)?i.map(a1):String(i)}function xbt(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(i);)t[n[1]]=n[2];return t}const Sbt=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function YP(i,t,e,n,r){if(ut.isFunction(n))return n.call(this,t,e);if(r&&(t=e),!!ut.isString(t)){if(ut.isString(n))return t.indexOf(n)!==-1;if(ut.isRegExp(n))return n.test(t)}}function wbt(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function Abt(i,t){const e=ut.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+e,{value:function(r,s,a){return this[n].call(this,t,r,s,a)},configurable:!0})})}let Zs=class{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function s(o,l,u){const c=g_(l);if(!c)throw new Error("header name must be a non-empty string");const h=ut.findKey(r,c);(!h||r[h]===void 0||u===!0||u===void 0&&r[h]!==!1)&&(r[h||l]=a1(o))}const a=(o,l)=>ut.forEach(o,(u,c)=>s(u,c,l));if(ut.isPlainObject(t)||t instanceof this.constructor)a(t,e);else if(ut.isString(t)&&(t=t.trim())&&!Sbt(t))a(bbt(t),e);else if(ut.isObject(t)&&ut.isIterable(t)){let o={},l,u;for(const c of t){if(!ut.isArray(c))throw TypeError("Object iterator must return a key-value pair");o[u=c[0]]=(l=o[u])?ut.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}a(o,e)}else t!=null&&s(e,t,n);return this}get(t,e){if(t=g_(t),t){const n=ut.findKey(this,t);if(n){const r=this[n];if(!e)return r;if(e===!0)return xbt(r);if(ut.isFunction(e))return e.call(this,r,n);if(ut.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=g_(t),t){const n=ut.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||YP(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let r=!1;function s(a){if(a=g_(a),a){const o=ut.findKey(n,a);o&&(!e||YP(n,n[o],o,e))&&(delete n[o],r=!0)}}return ut.isArray(t)?t.forEach(s):s(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const s=e[n];(!t||YP(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const e=this,n={};return ut.forEach(this,(r,s)=>{const a=ut.findKey(n,s);if(a){e[a]=a1(r),delete e[s];return}const o=t?wbt(s):String(s).trim();o!==s&&delete e[s],e[o]=a1(r),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ut.forEach(this,(n,r)=>{n!=null&&n!==!1&&(e[r]=t&&ut.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(r=>n.set(r)),n}static accessor(t){const n=(this[HH]=this[HH]={accessors:{}}).accessors,r=this.prototype;function s(a){const o=g_(a);n[o]||(Abt(r,a),n[o]=!0)}return ut.isArray(t)?t.forEach(s):s(t),this}};Zs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ut.reduceDescriptors(Zs.prototype,({value:i},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(n){this[e]=n}}});ut.freezeMethods(Zs);function XP(i,t){const e=this||bb,n=t||e,r=Zs.from(n.headers);let s=n.data;return ut.forEach(i,function(o){s=o.call(e,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function bq(i){return!!(i&&i.__CANCEL__)}function Pm(i,t,e){Le.call(this,i??"canceled",Le.ERR_CANCELED,t,e),this.name="CanceledError"}ut.inherits(Pm,Le,{__CANCEL__:!0});function xq(i,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?i(e):t(new Le("Request failed with status code "+e.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function kbt(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function Cbt(i,t){i=i||10;const e=new Array(i),n=new Array(i);let r=0,s=0,a;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),c=n[s];a||(a=u),e[r]=l,n[r]=u;let h=s,d=0;for(;h!==r;)d+=e[h++],h=h%i;if(r=(r+1)%i,r===s&&(s=(s+1)%i),u-a<t)return;const f=c&&u-c;return f?Math.round(d*1e3/f):void 0}}function Mbt(i,t){let e=0,n=1e3/t,r,s;const a=(u,c=Date.now())=>{e=c,r=null,s&&(clearTimeout(s),s=null),i(...u)};return[(...u)=>{const c=Date.now(),h=c-e;h>=n?a(u,c):(r=u,s||(s=setTimeout(()=>{s=null,a(r)},n-h)))},()=>r&&a(r)]}const cw=(i,t,e=3)=>{let n=0;const r=Cbt(50,250);return Mbt(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-n,u=r(l),c=a<=o;n=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&c?(o-a)/u:void 0,event:s,lengthComputable:o!=null,[t?"download":"upload"]:!0};i(h)},e)},VH=(i,t)=>{const e=i!=null;return[n=>t[0]({lengthComputable:e,total:i,loaded:n}),t[1]]},WH=i=>(...t)=>ut.asap(()=>i(...t)),Tbt=Qr.hasStandardBrowserEnv?((i,t)=>e=>(e=new URL(e,Qr.origin),i.protocol===e.protocol&&i.host===e.host&&(t||i.port===e.port)))(new URL(Qr.origin),Qr.navigator&&/(msie|trident)/i.test(Qr.navigator.userAgent)):()=>!0,Pbt=Qr.hasStandardBrowserEnv?{write(i,t,e,n,r,s,a){if(typeof document>"u")return;const o=[`${i}=${encodeURIComponent(t)}`];ut.isNumber(e)&&o.push(`expires=${new Date(e).toUTCString()}`),ut.isString(n)&&o.push(`path=${n}`),ut.isString(r)&&o.push(`domain=${r}`),s===!0&&o.push("secure"),ut.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(i){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+i+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(i){this.write(i,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ebt(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function Rbt(i,t){return t?i.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):i}function Sq(i,t,e){let n=!Ebt(t);return i&&(n||e==!1)?Rbt(i,t):t}const $H=i=>i instanceof Zs?{...i}:i;function $d(i,t){t=t||{};const e={};function n(u,c,h,d){return ut.isPlainObject(u)&&ut.isPlainObject(c)?ut.merge.call({caseless:d},u,c):ut.isPlainObject(c)?ut.merge({},c):ut.isArray(c)?c.slice():c}function r(u,c,h,d){if(ut.isUndefined(c)){if(!ut.isUndefined(u))return n(void 0,u,h,d)}else return n(u,c,h,d)}function s(u,c){if(!ut.isUndefined(c))return n(void 0,c)}function a(u,c){if(ut.isUndefined(c)){if(!ut.isUndefined(u))return n(void 0,u)}else return n(void 0,c)}function o(u,c,h){if(h in t)return n(u,c);if(h in i)return n(void 0,u)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,c,h)=>r($H(u),$H(c),h,!0)};return ut.forEach(Object.keys({...i,...t}),function(c){const h=l[c]||r,d=h(i[c],t[c],c);ut.isUndefined(d)&&h!==o||(e[c]=d)}),e}const wq=i=>{const t=$d({},i);let{data:e,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:s,headers:a,auth:o}=t;if(t.headers=a=Zs.from(a),t.url=_q(Sq(t.baseURL,t.url,t.allowAbsoluteUrls),i.params,i.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),ut.isFormData(e)){if(Qr.hasStandardBrowserEnv||Qr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(ut.isFunction(e.getHeaders)){const l=e.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([c,h])=>{u.includes(c.toLowerCase())&&a.set(c,h)})}}if(Qr.hasStandardBrowserEnv&&(n&&ut.isFunction(n)&&(n=n(t)),n||n!==!1&&Tbt(t.url))){const l=r&&s&&Pbt.read(s);l&&a.set(r,l)}return t},Obt=typeof XMLHttpRequest<"u",Dbt=Obt&&function(i){return new Promise(function(e,n){const r=wq(i);let s=r.data;const a=Zs.from(r.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=r,c,h,d,f,p;function g(){f&&f(),p&&p(),r.cancelToken&&r.cancelToken.unsubscribe(c),r.signal&&r.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout;function _(){if(!m)return;const y=Zs.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),x={data:!o||o==="text"||o==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:y,config:i,request:m};xq(function(w){e(w),g()},function(w){n(w),g()},x),m=null}"onloadend"in m?m.onloadend=_:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(_)},m.onabort=function(){m&&(n(new Le("Request aborted",Le.ECONNABORTED,i,m)),m=null)},m.onerror=function(b){const x=b&&b.message?b.message:"Network Error",S=new Le(x,Le.ERR_NETWORK,i,m);S.event=b||null,n(S),m=null},m.ontimeout=function(){let b=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const x=r.transitional||vq;r.timeoutErrorMessage&&(b=r.timeoutErrorMessage),n(new Le(b,x.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,i,m)),m=null},s===void 0&&a.setContentType(null),"setRequestHeader"in m&&ut.forEach(a.toJSON(),function(b,x){m.setRequestHeader(x,b)}),ut.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),o&&o!=="json"&&(m.responseType=r.responseType),u&&([d,p]=cw(u,!0),m.addEventListener("progress",d)),l&&m.upload&&([h,f]=cw(l),m.upload.addEventListener("progress",h),m.upload.addEventListener("loadend",f)),(r.cancelToken||r.signal)&&(c=y=>{m&&(n(!y||y.type?new Pm(null,i,m):y),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(c),r.signal&&(r.signal.aborted?c():r.signal.addEventListener("abort",c)));const v=kbt(r.url);if(v&&Qr.protocols.indexOf(v)===-1){n(new Le("Unsupported protocol "+v+":",Le.ERR_BAD_REQUEST,i));return}m.send(s||null)})},Ibt=(i,t)=>{const{length:e}=i=i?i.filter(Boolean):[];if(t||e){let n=new AbortController,r;const s=function(u){if(!r){r=!0,o();const c=u instanceof Error?u:this.reason;n.abort(c instanceof Le?c:new Pm(c instanceof Error?c.message:c))}};let a=t&&setTimeout(()=>{a=null,s(new Le(`timeout ${t} of ms exceeded`,Le.ETIMEDOUT))},t);const o=()=>{i&&(a&&clearTimeout(a),a=null,i.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),i=null)};i.forEach(u=>u.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>ut.asap(o),l}},Lbt=function*(i,t){let e=i.byteLength;if(e<t){yield i;return}let n=0,r;for(;n<e;)r=n+t,yield i.slice(n,r),n=r},Bbt=async function*(i,t){for await(const e of Fbt(i))yield*Lbt(e,t)},Fbt=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const t=i.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},UH=(i,t,e,n)=>{const r=Bbt(i,t);let s=0,a,o=l=>{a||(a=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await r.next();if(u){o(),l.close();return}let h=c.byteLength;if(e){let d=s+=h;e(d)}l.enqueue(new Uint8Array(c))}catch(u){throw o(u),u}},cancel(l){return o(l),r.return()}},{highWaterMark:2})},GH=64*1024,{isFunction:Vx}=ut,zbt=(({Request:i,Response:t})=>({Request:i,Response:t}))(ut.global),{ReadableStream:YH,TextEncoder:XH}=ut.global,KH=(i,...t)=>{try{return!!i(...t)}catch{return!1}},Nbt=i=>{i=ut.merge.call({skipUndefined:!0},zbt,i);const{fetch:t,Request:e,Response:n}=i,r=t?Vx(t):typeof fetch=="function",s=Vx(e),a=Vx(n);if(!r)return!1;const o=r&&Vx(YH),l=r&&(typeof XH=="function"?(p=>g=>p.encode(g))(new XH):async p=>new Uint8Array(await new e(p).arrayBuffer())),u=s&&o&&KH(()=>{let p=!1;const g=new e(Qr.origin,{body:new YH,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!g}),c=a&&o&&KH(()=>ut.isReadableStream(new n("").body)),h={stream:c&&(p=>p.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!h[p]&&(h[p]=(g,m)=>{let _=g&&g[p];if(_)return _.call(g);throw new Le(`Response type '${p}' is not supported`,Le.ERR_NOT_SUPPORT,m)})});const d=async p=>{if(p==null)return 0;if(ut.isBlob(p))return p.size;if(ut.isSpecCompliantForm(p))return(await new e(Qr.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(ut.isArrayBufferView(p)||ut.isArrayBuffer(p))return p.byteLength;if(ut.isURLSearchParams(p)&&(p=p+""),ut.isString(p))return(await l(p)).byteLength},f=async(p,g)=>{const m=ut.toFiniteNumber(p.getContentLength());return m??d(g)};return async p=>{let{url:g,method:m,data:_,signal:v,cancelToken:y,timeout:b,onDownloadProgress:x,onUploadProgress:S,responseType:w,headers:A,withCredentials:k="same-origin",fetchOptions:C}=wq(p),M=t||fetch;w=w?(w+"").toLowerCase():"text";let R=Ibt([v,y&&y.toAbortSignal()],b),P=null;const O=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let T;try{if(S&&u&&m!=="get"&&m!=="head"&&(T=await f(A,_))!==0){let H=new e(g,{method:"POST",body:_,duplex:"half"}),U;if(ut.isFormData(_)&&(U=H.headers.get("content-type"))&&A.setContentType(U),H.body){const[K,q]=VH(T,cw(WH(S)));_=UH(H.body,GH,K,q)}}ut.isString(k)||(k=k?"include":"omit");const D=s&&"credentials"in e.prototype,B={...C,signal:R,method:m.toUpperCase(),headers:A.normalize().toJSON(),body:_,duplex:"half",credentials:D?k:void 0};P=s&&new e(g,B);let I=await(s?M(P,C):M(g,B));const F=c&&(w==="stream"||w==="response");if(c&&(x||F&&O)){const H={};["status","statusText","headers"].forEach(Z=>{H[Z]=I[Z]});const U=ut.toFiniteNumber(I.headers.get("content-length")),[K,q]=x&&VH(U,cw(WH(x),!0))||[];I=new n(UH(I.body,GH,K,()=>{q&&q(),O&&O()}),H)}w=w||"text";let j=await h[ut.findKey(h,w)||"text"](I,p);return!F&&O&&O(),await new Promise((H,U)=>{xq(H,U,{data:j,headers:Zs.from(I.headers),status:I.status,statusText:I.statusText,config:p,request:P})})}catch(D){throw O&&O(),D&&D.name==="TypeError"&&/Load failed|fetch/i.test(D.message)?Object.assign(new Le("Network Error",Le.ERR_NETWORK,p,P),{cause:D.cause||D}):Le.from(D,D&&D.code,p,P)}}},jbt=new Map,Aq=i=>{let t=i&&i.env||{};const{fetch:e,Request:n,Response:r}=t,s=[n,r,e];let a=s.length,o=a,l,u,c=jbt;for(;o--;)l=s[o],u=c.get(l),u===void 0&&c.set(l,u=o?new Map:Nbt(t)),c=u;return u};Aq();const pB={http:nbt,xhr:Dbt,fetch:{get:Aq}};ut.forEach(pB,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const qH=i=>`- ${i}`,Hbt=i=>ut.isFunction(i)||i===null||i===!1;function Vbt(i,t){i=ut.isArray(i)?i:[i];const{length:e}=i;let n,r;const s={};for(let a=0;a<e;a++){n=i[a];let o;if(r=n,!Hbt(n)&&(r=pB[(o=String(n)).toLowerCase()],r===void 0))throw new Le(`Unknown adapter '${o}'`);if(r&&(ut.isFunction(r)||(r=r.get(t))))break;s[o||"#"+a]=r}if(!r){const a=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?a.length>1?`since :
`+a.map(qH).join(`
`):" "+qH(a[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r}const kq={getAdapter:Vbt,adapters:pB};function KP(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Pm(null,i)}function ZH(i){return KP(i),i.headers=Zs.from(i.headers),i.data=XP.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),kq.getAdapter(i.adapter||bb.adapter,i)(i).then(function(n){return KP(i),n.data=XP.call(i,i.transformResponse,n),n.headers=Zs.from(n.headers),n},function(n){return bq(n)||(KP(i),n&&n.response&&(n.response.data=XP.call(i,i.transformResponse,n.response),n.response.headers=Zs.from(n.response.headers))),Promise.reject(n)})}const Cq="1.13.2",HC={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{HC[i]=function(n){return typeof n===i||"a"+(t<1?"n ":" ")+i}});const QH={};HC.transitional=function(t,e,n){function r(s,a){return"[Axios v"+Cq+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,o)=>{if(t===!1)throw new Le(r(a," has been removed"+(e?" in "+e:"")),Le.ERR_DEPRECATED);return e&&!QH[a]&&(QH[a]=!0,console.warn(r(a," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(s,a,o):!0}};HC.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Wbt(i,t,e){if(typeof i!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let r=n.length;for(;r-- >0;){const s=n[r],a=t[s];if(a){const o=i[s],l=o===void 0||a(o,s,i);if(l!==!0)throw new Le("option "+s+" must be "+l,Le.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Le("Unknown option "+s,Le.ERR_BAD_OPTION)}}const o1={assertOptions:Wbt,validators:HC},ol=o1.validators;let bd=class{constructor(t){this.defaults=t||{},this.interceptors={request:new jH,response:new jH}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=$d(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:s}=e;n!==void 0&&o1.assertOptions(n,{silentJSONParsing:ol.transitional(ol.boolean),forcedJSONParsing:ol.transitional(ol.boolean),clarifyTimeoutError:ol.transitional(ol.boolean)},!1),r!=null&&(ut.isFunction(r)?e.paramsSerializer={serialize:r}:o1.assertOptions(r,{encode:ol.function,serialize:ol.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),o1.assertOptions(e,{baseUrl:ol.spelling("baseURL"),withXsrfToken:ol.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let a=s&&ut.merge(s.common,s[e.method]);s&&ut.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),e.headers=Zs.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(e)===!1||(l=l&&g.synchronous,o.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let c,h=0,d;if(!l){const p=[ZH.bind(this),void 0];for(p.unshift(...o),p.push(...u),d=p.length,c=Promise.resolve(e);h<d;)c=c.then(p[h++],p[h++]);return c}d=o.length;let f=e;for(;h<d;){const p=o[h++],g=o[h++];try{f=p(f)}catch(m){g.call(this,m);break}}try{c=ZH.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,d=u.length;h<d;)c=c.then(u[h++],u[h++]);return c}getUri(t){t=$d(this.defaults,t);const e=Sq(t.baseURL,t.url,t.allowAbsoluteUrls);return _q(e,t.params,t.paramsSerializer)}};ut.forEach(["delete","get","head","options"],function(t){bd.prototype[t]=function(e,n){return this.request($d(n||{},{method:t,url:e,data:(n||{}).data}))}});ut.forEach(["post","put","patch"],function(t){function e(n){return function(s,a,o){return this.request($d(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}bd.prototype[t]=e(),bd.prototype[t+"Form"]=e(!0)});let $bt=class Mq{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(s){e=s});const n=this;this.promise.then(r=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](r);n._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(r);return a.cancel=function(){n.unsubscribe(s)},a},t(function(s,a,o){n.reason||(n.reason=new Pm(s,a,o),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Mq(function(r){t=r}),cancel:t}}};function Ubt(i){return function(e){return i.apply(null,e)}}function Gbt(i){return ut.isObject(i)&&i.isAxiosError===!0}const IO={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(IO).forEach(([i,t])=>{IO[t]=i});function Tq(i){const t=new bd(i),e=sq(bd.prototype.request,t);return ut.extend(e,bd.prototype,t,{allOwnKeys:!0}),ut.extend(e,t,null,{allOwnKeys:!0}),e.create=function(r){return Tq($d(i,r))},e}const tr=Tq(bb);tr.Axios=bd;tr.CanceledError=Pm;tr.CancelToken=$bt;tr.isCancel=bq;tr.VERSION=Cq;tr.toFormData=jC;tr.AxiosError=Le;tr.Cancel=tr.CanceledError;tr.all=function(t){return Promise.all(t)};tr.spread=Ubt;tr.isAxiosError=Gbt;tr.mergeConfig=$d;tr.AxiosHeaders=Zs;tr.formToJSON=i=>yq(ut.isHTMLForm(i)?new FormData(i):i);tr.getAdapter=kq.getAdapter;tr.HttpStatusCode=IO;tr.default=tr;const{Axios:_te,AxiosError:vte,CanceledError:yte,isCancel:bte,CancelToken:xte,VERSION:Ste,all:wte,Cancel:Ate,isAxiosError:kte,spread:Cte,toFormData:Mte,AxiosHeaders:Tte,HttpStatusCode:Pte,formToJSON:Ete,getAdapter:Rte,mergeConfig:Ote}=tr;var xb=i=>i.type==="checkbox",sd=i=>i instanceof Date,Ns=i=>i==null;const Pq=i=>typeof i=="object";var Jn=i=>!Ns(i)&&!Array.isArray(i)&&Pq(i)&&!sd(i),Eq=i=>Jn(i)&&i.target?xb(i.target)?i.target.checked:i.target.value:i,Ybt=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,Rq=(i,t)=>i.has(Ybt(t)),Xbt=i=>{const t=i.constructor&&i.constructor.prototype;return Jn(t)&&t.hasOwnProperty("isPrototypeOf")},gB=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function sr(i){let t;const e=Array.isArray(i),n=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)t=new Date(i);else if(!(gB&&(i instanceof Blob||n))&&(e||Jn(i)))if(t=e?[]:Object.create(Object.getPrototypeOf(i)),!e&&!Xbt(i))t=i;else for(const r in i)i.hasOwnProperty(r)&&(t[r]=sr(i[r]));else return i;return t}var VC=i=>/^\w*$/.test(i),kn=i=>i===void 0,mB=i=>Array.isArray(i)?i.filter(Boolean):[],_B=i=>mB(i.replace(/["|']|\]/g,"").split(/\.|\[/)),Bt=(i,t,e)=>{if(!t||!Jn(i))return e;const n=(VC(t)?[t]:_B(t)).reduce((r,s)=>Ns(r)?r:r[s],i);return kn(n)||n===i?kn(i[t])?e:i[t]:n},ha=i=>typeof i=="boolean",Mi=(i,t,e)=>{let n=-1;const r=VC(t)?[t]:_B(t),s=r.length,a=s-1;for(;++n<s;){const o=r[n];let l=e;if(n!==a){const u=i[o];l=Jn(u)||Array.isArray(u)?u:isNaN(+r[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;i[o]=l,i=i[o]}};const hw={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Oo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ou={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},vB=Y.createContext(null);vB.displayName="HookFormContext";const yB=()=>Y.useContext(vB),Dte=i=>{const{children:t,...e}=i;return Y.createElement(vB.Provider,{value:e},t)};var Oq=(i,t,e,n=!0)=>{const r={defaultValues:t._defaultValues};for(const s in i)Object.defineProperty(r,s,{get:()=>{const a=s;return t._proxyFormState[a]!==Oo.all&&(t._proxyFormState[a]=!n||Oo.all),e&&(e[a]=!0),i[a]}});return r};const bB=typeof window<"u"?Y.useLayoutEffect:Y.useEffect;function Kbt(i){const t=yB(),{control:e=t.control,disabled:n,name:r,exact:s}=i||{},[a,o]=Y.useState(e._formState),l=Y.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return bB(()=>e._subscribe({name:r,formState:l.current,exact:s,callback:u=>{!n&&o({...e._formState,...u})}}),[r,n,s]),Y.useEffect(()=>{l.current.isValid&&e._setValid(!0)},[e]),Y.useMemo(()=>Oq(a,e,l.current,!1),[a,e])}var fa=i=>typeof i=="string",LO=(i,t,e,n,r)=>fa(i)?(n&&t.watch.add(i),Bt(e,i,r)):Array.isArray(i)?i.map(s=>(n&&t.watch.add(s),Bt(e,s))):(n&&(t.watchAll=!0),e),BO=i=>Ns(i)||!Pq(i);function Do(i,t,e=new WeakSet){if(BO(i)||BO(t))return Object.is(i,t);if(sd(i)&&sd(t))return i.getTime()===t.getTime();const n=Object.keys(i),r=Object.keys(t);if(n.length!==r.length)return!1;if(e.has(i)||e.has(t))return!0;e.add(i),e.add(t);for(const s of n){const a=i[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=t[s];if(sd(a)&&sd(o)||Jn(a)&&Jn(o)||Array.isArray(a)&&Array.isArray(o)?!Do(a,o,e):!Object.is(a,o))return!1}}return!0}function qbt(i){const t=yB(),{control:e=t.control,name:n,defaultValue:r,disabled:s,exact:a,compute:o}=i||{},l=Y.useRef(r),u=Y.useRef(o),c=Y.useRef(void 0),h=Y.useRef(e),d=Y.useRef(n);u.current=o;const[f,p]=Y.useState(()=>{const b=e._getWatch(n,l.current);return u.current?u.current(b):b}),g=Y.useCallback(b=>{const x=LO(n,e._names,b||e._formValues,!1,l.current);return u.current?u.current(x):x},[e._formValues,e._names,n]),m=Y.useCallback(b=>{if(!s){const x=LO(n,e._names,b||e._formValues,!1,l.current);if(u.current){const S=u.current(x);Do(S,c.current)||(p(S),c.current=S)}else p(x)}},[e._formValues,e._names,s,n]);bB(()=>((h.current!==e||!Do(d.current,n))&&(h.current=e,d.current=n,m()),e._subscribe({name:n,formState:{values:!0},exact:a,callback:b=>{m(b.values)}})),[e,a,n,m]),Y.useEffect(()=>e._removeUnmounted());const _=h.current!==e,v=d.current,y=Y.useMemo(()=>{if(s)return null;const b=!_&&!Do(v,n);return _||b?g():null},[s,_,n,v,g]);return y!==null?y:f}function Zbt(i){const t=yB(),{name:e,disabled:n,control:r=t.control,shouldUnregister:s,defaultValue:a,exact:o=!0}=i,l=Rq(r._names.array,e),u=Y.useMemo(()=>Bt(r._formValues,e,Bt(r._defaultValues,e,a)),[r,e,a]),c=qbt({control:r,name:e,defaultValue:u,exact:o}),h=Kbt({control:r,name:e,exact:o}),d=Y.useRef(i),f=Y.useRef(void 0),p=Y.useRef(r.register(e,{...i.rules,value:c,...ha(i.disabled)?{disabled:i.disabled}:{}}));d.current=i;const g=Y.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Bt(h.errors,e)},isDirty:{enumerable:!0,get:()=>!!Bt(h.dirtyFields,e)},isTouched:{enumerable:!0,get:()=>!!Bt(h.touchedFields,e)},isValidating:{enumerable:!0,get:()=>!!Bt(h.validatingFields,e)},error:{enumerable:!0,get:()=>Bt(h.errors,e)}}),[h,e]),m=Y.useCallback(b=>p.current.onChange({target:{value:Eq(b),name:e},type:hw.CHANGE}),[e]),_=Y.useCallback(()=>p.current.onBlur({target:{value:Bt(r._formValues,e),name:e},type:hw.BLUR}),[e,r._formValues]),v=Y.useCallback(b=>{const x=Bt(r._fields,e);x&&b&&(x._f.ref={focus:()=>b.focus&&b.focus(),select:()=>b.select&&b.select(),setCustomValidity:S=>b.setCustomValidity(S),reportValidity:()=>b.reportValidity()})},[r._fields,e]),y=Y.useMemo(()=>({name:e,value:c,...ha(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:m,onBlur:_,ref:v}),[e,n,h.disabled,m,_,v,c]);return Y.useEffect(()=>{const b=r._options.shouldUnregister||s,x=f.current;x&&x!==e&&!l&&r.unregister(x),r.register(e,{...d.current.rules,...ha(d.current.disabled)?{disabled:d.current.disabled}:{}});const S=(w,A)=>{const k=Bt(r._fields,w);k&&k._f&&(k._f.mount=A)};if(S(e,!0),b){const w=sr(Bt(r._options.defaultValues,e,d.current.defaultValue));Mi(r._defaultValues,e,w),kn(Bt(r._formValues,e))&&Mi(r._formValues,e,w)}return!l&&r.register(e),f.current=e,()=>{(l?b&&!r._state.action:b)?r.unregister(e):S(e,!1)}},[e,r,l,s]),Y.useEffect(()=>{r._setDisabledField({disabled:n,name:e})},[n,e,r]),Y.useMemo(()=>({field:y,formState:h,fieldState:g}),[y,h,g])}const Ite=i=>i.render(Zbt(i));var xB=(i,t,e,n,r)=>t?{...e[i],types:{...e[i]&&e[i].types?e[i].types:{},[n]:r||!0}}:{},vv=i=>Array.isArray(i)?i:[i],JH=()=>{let i=[];return{get observers(){return i},next:r=>{for(const s of i)s.next&&s.next(r)},subscribe:r=>(i.push(r),{unsubscribe:()=>{i=i.filter(s=>s!==r)}}),unsubscribe:()=>{i=[]}}};function Dq(i,t){const e={};for(const n in i)if(i.hasOwnProperty(n)){const r=i[n],s=t[n];if(r&&Jn(r)&&s){const a=Dq(r,s);Jn(a)&&(e[n]=a)}else i[n]&&(e[n]=s)}return e}var hs=i=>Jn(i)&&!Object.keys(i).length,SB=i=>i.type==="file",Io=i=>typeof i=="function",dw=i=>{if(!gB)return!1;const t=i?i.ownerDocument:0;return i instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Iq=i=>i.type==="select-multiple",wB=i=>i.type==="radio",Qbt=i=>wB(i)||xb(i),qP=i=>dw(i)&&i.isConnected;function Jbt(i,t){const e=t.slice(0,-1).length;let n=0;for(;n<e;)i=kn(i)?n++:i[t[n++]];return i}function txt(i){for(const t in i)if(i.hasOwnProperty(t)&&!kn(i[t]))return!1;return!0}function Un(i,t){const e=Array.isArray(t)?t:VC(t)?[t]:_B(t),n=e.length===1?i:Jbt(i,e),r=e.length-1,s=e[r];return n&&delete n[s],r!==0&&(Jn(n)&&hs(n)||Array.isArray(n)&&txt(n))&&Un(i,e.slice(0,-1)),i}var ext=i=>{for(const t in i)if(Io(i[t]))return!0;return!1};function Lq(i){return Array.isArray(i)||Jn(i)&&!ext(i)}function FO(i,t={}){for(const e in i){const n=i[e];Lq(n)?(t[e]=Array.isArray(n)?[]:{},FO(n,t[e])):kn(n)||(t[e]=!0)}return t}function ep(i,t,e){e||(e=FO(t));for(const n in i){const r=i[n];if(Lq(r))kn(t)||BO(e[n])?e[n]=FO(r,Array.isArray(r)?[]:{}):ep(r,Ns(t)?{}:t[n],e[n]);else{const s=t[n];e[n]=!Do(r,s)}}return e}const tV={value:!1,isValid:!1},eV={value:!0,isValid:!0};var Bq=i=>{if(Array.isArray(i)){if(i.length>1){const t=i.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!kn(i[0].attributes.value)?kn(i[0].value)||i[0].value===""?eV:{value:i[0].value,isValid:!0}:eV:tV}return tV},Fq=(i,{valueAsNumber:t,valueAsDate:e,setValueAs:n})=>kn(i)?i:t?i===""?NaN:i&&+i:e&&fa(i)?new Date(i):n?n(i):i;const iV={isValid:!1,value:null};var zq=i=>Array.isArray(i)?i.reduce((t,e)=>e&&e.checked&&!e.disabled?{isValid:!0,value:e.value}:t,iV):iV;function nV(i){const t=i.ref;return SB(t)?t.files:wB(t)?zq(i.refs).value:Iq(t)?[...t.selectedOptions].map(({value:e})=>e):xb(t)?Bq(i.refs).value:Fq(kn(t.value)?i.ref.value:t.value,i)}var ixt=(i,t,e,n)=>{const r={};for(const s of i){const a=Bt(t,s);a&&Mi(r,s,a._f)}return{criteriaMode:e,names:[...i],fields:r,shouldUseNativeValidation:n}},fw=i=>i instanceof RegExp,m_=i=>kn(i)?i:fw(i)?i.source:Jn(i)?fw(i.value)?i.value.source:i.value:i,rV=i=>({isOnSubmit:!i||i===Oo.onSubmit,isOnBlur:i===Oo.onBlur,isOnChange:i===Oo.onChange,isOnAll:i===Oo.all,isOnTouch:i===Oo.onTouched});const sV="AsyncFunction";var nxt=i=>!!i&&!!i.validate&&!!(Io(i.validate)&&i.validate.constructor.name===sV||Jn(i.validate)&&Object.values(i.validate).find(t=>t.constructor.name===sV)),rxt=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate),aV=(i,t,e)=>!e&&(t.watchAll||t.watch.has(i)||[...t.watch].some(n=>i.startsWith(n)&&/^\.\w+/.test(i.slice(n.length))));const yv=(i,t,e,n)=>{for(const r of e||Object.keys(i)){const s=Bt(i,r);if(s){const{_f:a,...o}=s;if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],r)&&!n)return!0;if(a.ref&&t(a.ref,a.name)&&!n)return!0;if(yv(o,t))break}else if(Jn(o)&&yv(o,t))break}}};function oV(i,t,e){const n=Bt(i,e);if(n||VC(e))return{error:n,name:e};const r=e.split(".");for(;r.length;){const s=r.join("."),a=Bt(t,s),o=Bt(i,s);if(a&&!Array.isArray(a)&&e!==s)return{name:e};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};r.pop()}return{name:e}}var sxt=(i,t,e,n)=>{e(i);const{name:r,...s}=i;return hs(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(a=>t[a]===(!n||Oo.all))},axt=(i,t,e)=>!i||!t||i===t||vv(i).some(n=>n&&(e?n===t:n.startsWith(t)||t.startsWith(n))),oxt=(i,t,e,n,r)=>r.isOnAll?!1:!e&&r.isOnTouch?!(t||i):(e?n.isOnBlur:r.isOnBlur)?!i:(e?n.isOnChange:r.isOnChange)?i:!0,lxt=(i,t)=>!mB(Bt(i,t)).length&&Un(i,t),uxt=(i,t,e)=>{const n=vv(Bt(i,e));return Mi(n,"root",t[e]),Mi(i,e,n),i};function lV(i,t,e="validate"){if(fa(i)||Array.isArray(i)&&i.every(fa)||ha(i)&&!i)return{type:e,message:fa(i)?i:"",ref:t}}var jf=i=>Jn(i)&&!fw(i)?i:{value:i,message:""},uV=async(i,t,e,n,r,s)=>{const{ref:a,refs:o,required:l,maxLength:u,minLength:c,min:h,max:d,pattern:f,validate:p,name:g,valueAsNumber:m,mount:_}=i._f,v=Bt(e,g);if(!_||t.has(g))return{};const y=o?o[0]:a,b=R=>{r&&y.reportValidity&&(y.setCustomValidity(ha(R)?"":R||""),y.reportValidity())},x={},S=wB(a),w=xb(a),A=S||w,k=(m||SB(a))&&kn(a.value)&&kn(v)||dw(a)&&a.value===""||v===""||Array.isArray(v)&&!v.length,C=xB.bind(null,g,n,x),M=(R,P,O,T=ou.maxLength,D=ou.minLength)=>{const B=R?P:O;x[g]={type:R?T:D,message:B,ref:a,...C(R?T:D,B)}};if(s?!Array.isArray(v)||!v.length:l&&(!A&&(k||Ns(v))||ha(v)&&!v||w&&!Bq(o).isValid||S&&!zq(o).isValid)){const{value:R,message:P}=fa(l)?{value:!!l,message:l}:jf(l);if(R&&(x[g]={type:ou.required,message:P,ref:y,...C(ou.required,P)},!n))return b(P),x}if(!k&&(!Ns(h)||!Ns(d))){let R,P;const O=jf(d),T=jf(h);if(!Ns(v)&&!isNaN(v)){const D=a.valueAsNumber||v&&+v;Ns(O.value)||(R=D>O.value),Ns(T.value)||(P=D<T.value)}else{const D=a.valueAsDate||new Date(v),B=j=>new Date(new Date().toDateString()+" "+j),I=a.type=="time",F=a.type=="week";fa(O.value)&&v&&(R=I?B(v)>B(O.value):F?v>O.value:D>new Date(O.value)),fa(T.value)&&v&&(P=I?B(v)<B(T.value):F?v<T.value:D<new Date(T.value))}if((R||P)&&(M(!!R,O.message,T.message,ou.max,ou.min),!n))return b(x[g].message),x}if((u||c)&&!k&&(fa(v)||s&&Array.isArray(v))){const R=jf(u),P=jf(c),O=!Ns(R.value)&&v.length>+R.value,T=!Ns(P.value)&&v.length<+P.value;if((O||T)&&(M(O,R.message,P.message),!n))return b(x[g].message),x}if(f&&!k&&fa(v)){const{value:R,message:P}=jf(f);if(fw(R)&&!v.match(R)&&(x[g]={type:ou.pattern,message:P,ref:a,...C(ou.pattern,P)},!n))return b(P),x}if(p){if(Io(p)){const R=await p(v,e),P=lV(R,y);if(P&&(x[g]={...P,...C(ou.validate,P.message)},!n))return b(P.message),x}else if(Jn(p)){let R={};for(const P in p){if(!hs(R)&&!n)break;const O=lV(await p[P](v,e),y,P);O&&(R={...O,...C(P,O.message)},b(O.message),n&&(x[g]=R))}if(!hs(R)&&(x[g]={ref:y,...R},!n))return x}}return b(!0),x};const cxt={mode:Oo.onSubmit,reValidateMode:Oo.onChange,shouldFocusError:!0};function hxt(i={}){let t={...cxt,...i},e={submitCount:0,isDirty:!1,isReady:!1,isLoading:Io(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},r=Jn(t.defaultValues)||Jn(t.values)?sr(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:sr(r),a={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...c};const d={array:JH(),state:JH()},f=t.criteriaMode===Oo.all,p=W=>Q=>{clearTimeout(u),u=setTimeout(W,Q)},g=async W=>{if(!t.disabled&&(c.isValid||h.isValid||W)){const Q=t.resolver?hs((await w()).errors):await k(n,!0);Q!==e.isValid&&d.state.next({isValid:Q})}},m=(W,Q)=>{!t.disabled&&(c.isValidating||c.validatingFields||h.isValidating||h.validatingFields)&&((W||Array.from(o.mount)).forEach(nt=>{nt&&(Q?Mi(e.validatingFields,nt,Q):Un(e.validatingFields,nt))}),d.state.next({validatingFields:e.validatingFields,isValidating:!hs(e.validatingFields)}))},_=(W,Q=[],nt,wt,xt=!0,dt=!0)=>{if(wt&&nt&&!t.disabled){if(a.action=!0,dt&&Array.isArray(Bt(n,W))){const jt=nt(Bt(n,W),wt.argA,wt.argB);xt&&Mi(n,W,jt)}if(dt&&Array.isArray(Bt(e.errors,W))){const jt=nt(Bt(e.errors,W),wt.argA,wt.argB);xt&&Mi(e.errors,W,jt),lxt(e.errors,W)}if((c.touchedFields||h.touchedFields)&&dt&&Array.isArray(Bt(e.touchedFields,W))){const jt=nt(Bt(e.touchedFields,W),wt.argA,wt.argB);xt&&Mi(e.touchedFields,W,jt)}(c.dirtyFields||h.dirtyFields)&&(e.dirtyFields=ep(r,s)),d.state.next({name:W,isDirty:M(W,Q),dirtyFields:e.dirtyFields,errors:e.errors,isValid:e.isValid})}else Mi(s,W,Q)},v=(W,Q)=>{Mi(e.errors,W,Q),d.state.next({errors:e.errors})},y=W=>{e.errors=W,d.state.next({errors:e.errors,isValid:!1})},b=(W,Q,nt,wt)=>{const xt=Bt(n,W);if(xt){const dt=Bt(s,W,kn(nt)?Bt(r,W):nt);kn(dt)||wt&&wt.defaultChecked||Q?Mi(s,W,Q?dt:nV(xt._f)):O(W,dt),a.mount&&!a.action&&g()}},x=(W,Q,nt,wt,xt)=>{let dt=!1,jt=!1;const pe={name:W};if(!t.disabled){if(!nt||wt){(c.isDirty||h.isDirty)&&(jt=e.isDirty,e.isDirty=pe.isDirty=M(),dt=jt!==pe.isDirty);const me=Do(Bt(r,W),Q);jt=!!Bt(e.dirtyFields,W),me?Un(e.dirtyFields,W):Mi(e.dirtyFields,W,!0),pe.dirtyFields=e.dirtyFields,dt=dt||(c.dirtyFields||h.dirtyFields)&&jt!==!me}if(nt){const me=Bt(e.touchedFields,W);me||(Mi(e.touchedFields,W,nt),pe.touchedFields=e.touchedFields,dt=dt||(c.touchedFields||h.touchedFields)&&me!==nt)}dt&&xt&&d.state.next(pe)}return dt?pe:{}},S=(W,Q,nt,wt)=>{const xt=Bt(e.errors,W),dt=(c.isValid||h.isValid)&&ha(Q)&&e.isValid!==Q;if(t.delayError&&nt?(l=p(()=>v(W,nt)),l(t.delayError)):(clearTimeout(u),l=null,nt?Mi(e.errors,W,nt):Un(e.errors,W)),(nt?!Do(xt,nt):xt)||!hs(wt)||dt){const jt={...wt,...dt&&ha(Q)?{isValid:Q}:{},errors:e.errors,name:W};e={...e,...jt},d.state.next(jt)}},w=async W=>{m(W,!0);const Q=await t.resolver(s,t.context,ixt(W||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return m(W),Q},A=async W=>{const{errors:Q}=await w(W);if(W)for(const nt of W){const wt=Bt(Q,nt);wt?Mi(e.errors,nt,wt):Un(e.errors,nt)}else e.errors=Q;return Q},k=async(W,Q,nt={valid:!0})=>{for(const wt in W){const xt=W[wt];if(xt){const{_f:dt,...jt}=xt;if(dt){const pe=o.array.has(dt.name),me=xt._f&&nxt(xt._f);me&&c.validatingFields&&m([dt.name],!0);const We=await uV(xt,o.disabled,s,f,t.shouldUseNativeValidation&&!Q,pe);if(me&&c.validatingFields&&m([dt.name]),We[dt.name]&&(nt.valid=!1,Q))break;!Q&&(Bt(We,dt.name)?pe?uxt(e.errors,We,dt.name):Mi(e.errors,dt.name,We[dt.name]):Un(e.errors,dt.name))}!hs(jt)&&await k(jt,Q,nt)}}return nt.valid},C=()=>{for(const W of o.unMount){const Q=Bt(n,W);Q&&(Q._f.refs?Q._f.refs.every(nt=>!qP(nt)):!qP(Q._f.ref))&&$(W)}o.unMount=new Set},M=(W,Q)=>!t.disabled&&(W&&Q&&Mi(s,W,Q),!Do(j(),r)),R=(W,Q,nt)=>LO(W,o,{...a.mount?s:kn(Q)?r:fa(W)?{[W]:Q}:Q},nt,Q),P=W=>mB(Bt(a.mount?s:r,W,t.shouldUnregister?Bt(r,W,[]):[])),O=(W,Q,nt={})=>{const wt=Bt(n,W);let xt=Q;if(wt){const dt=wt._f;dt&&(!dt.disabled&&Mi(s,W,Fq(Q,dt)),xt=dw(dt.ref)&&Ns(Q)?"":Q,Iq(dt.ref)?[...dt.ref.options].forEach(jt=>jt.selected=xt.includes(jt.value)):dt.refs?xb(dt.ref)?dt.refs.forEach(jt=>{(!jt.defaultChecked||!jt.disabled)&&(Array.isArray(xt)?jt.checked=!!xt.find(pe=>pe===jt.value):jt.checked=xt===jt.value||!!xt)}):dt.refs.forEach(jt=>jt.checked=jt.value===xt):SB(dt.ref)?dt.ref.value="":(dt.ref.value=xt,dt.ref.type||d.state.next({name:W,values:sr(s)})))}(nt.shouldDirty||nt.shouldTouch)&&x(W,xt,nt.shouldTouch,nt.shouldDirty,!0),nt.shouldValidate&&F(W)},T=(W,Q,nt)=>{for(const wt in Q){if(!Q.hasOwnProperty(wt))return;const xt=Q[wt],dt=W+"."+wt,jt=Bt(n,dt);(o.array.has(W)||Jn(xt)||jt&&!jt._f)&&!sd(xt)?T(dt,xt,nt):O(dt,xt,nt)}},D=(W,Q,nt={})=>{const wt=Bt(n,W),xt=o.array.has(W),dt=sr(Q);Mi(s,W,dt),xt?(d.array.next({name:W,values:sr(s)}),(c.isDirty||c.dirtyFields||h.isDirty||h.dirtyFields)&&nt.shouldDirty&&d.state.next({name:W,dirtyFields:ep(r,s),isDirty:M(W,dt)})):wt&&!wt._f&&!Ns(dt)?T(W,dt,nt):O(W,dt,nt),aV(W,o)&&d.state.next({...e,name:W}),d.state.next({name:a.mount?W:void 0,values:sr(s)})},B=async W=>{a.mount=!0;const Q=W.target;let nt=Q.name,wt=!0;const xt=Bt(n,nt),dt=me=>{wt=Number.isNaN(me)||sd(me)&&isNaN(me.getTime())||Do(me,Bt(s,nt,me))},jt=rV(t.mode),pe=rV(t.reValidateMode);if(xt){let me,We;const Si=Q.type?nV(xt._f):Eq(W),ai=W.type===hw.BLUR||W.type===hw.FOCUS_OUT,Ln=!rxt(xt._f)&&!t.resolver&&!Bt(e.errors,nt)&&!xt._f.deps||oxt(ai,Bt(e.touchedFields,nt),e.isSubmitted,pe,jt),Se=aV(nt,o,ai);Mi(s,nt,Si),ai?(!Q||!Q.readOnly)&&(xt._f.onBlur&&xt._f.onBlur(W),l&&l(0)):xt._f.onChange&&xt._f.onChange(W);const Ni=x(nt,Si,ai),_r=!hs(Ni)||Se;if(!ai&&d.state.next({name:nt,type:W.type,values:sr(s)}),Ln)return(c.isValid||h.isValid)&&(t.mode==="onBlur"?ai&&g():ai||g()),_r&&d.state.next({name:nt,...Se?{}:Ni});if(!ai&&Se&&d.state.next({...e}),t.resolver){const{errors:us}=await w([nt]);if(dt(Si),wt){const Pa=oV(e.errors,n,nt),vr=oV(us,n,Pa.name||nt);me=vr.error,nt=vr.name,We=hs(us)}}else m([nt],!0),me=(await uV(xt,o.disabled,s,f,t.shouldUseNativeValidation))[nt],m([nt]),dt(Si),wt&&(me?We=!1:(c.isValid||h.isValid)&&(We=await k(n,!0)));wt&&(xt._f.deps&&(!Array.isArray(xt._f.deps)||xt._f.deps.length>0)&&F(xt._f.deps),S(nt,We,me,Ni))}},I=(W,Q)=>{if(Bt(e.errors,Q)&&W.focus)return W.focus(),1},F=async(W,Q={})=>{let nt,wt;const xt=vv(W);if(t.resolver){const dt=await A(kn(W)?W:xt);nt=hs(dt),wt=W?!xt.some(jt=>Bt(dt,jt)):nt}else W?(wt=(await Promise.all(xt.map(async dt=>{const jt=Bt(n,dt);return await k(jt&&jt._f?{[dt]:jt}:jt)}))).every(Boolean),!(!wt&&!e.isValid)&&g()):wt=nt=await k(n);return d.state.next({...!fa(W)||(c.isValid||h.isValid)&&nt!==e.isValid?{}:{name:W},...t.resolver||!W?{isValid:nt}:{},errors:e.errors}),Q.shouldFocus&&!wt&&yv(n,I,W?xt:o.mount),wt},j=(W,Q)=>{let nt={...a.mount?s:r};return Q&&(nt=Dq(Q.dirtyFields?e.dirtyFields:e.touchedFields,nt)),kn(W)?nt:fa(W)?Bt(nt,W):W.map(wt=>Bt(nt,wt))},H=(W,Q)=>({invalid:!!Bt((Q||e).errors,W),isDirty:!!Bt((Q||e).dirtyFields,W),error:Bt((Q||e).errors,W),isValidating:!!Bt(e.validatingFields,W),isTouched:!!Bt((Q||e).touchedFields,W)}),U=W=>{W&&vv(W).forEach(Q=>Un(e.errors,Q)),d.state.next({errors:W?e.errors:{}})},K=(W,Q,nt)=>{const wt=(Bt(n,W,{_f:{}})._f||{}).ref,xt=Bt(e.errors,W)||{},{ref:dt,message:jt,type:pe,...me}=xt;Mi(e.errors,W,{...me,...Q,ref:wt}),d.state.next({name:W,errors:e.errors,isValid:!1}),nt&&nt.shouldFocus&&wt&&wt.focus&&wt.focus()},q=(W,Q)=>Io(W)?d.state.subscribe({next:nt=>"values"in nt&&W(R(void 0,Q),nt)}):R(W,Q,!0),Z=W=>d.state.subscribe({next:Q=>{axt(W.name,Q.name,W.exact)&&sxt(Q,W.formState||c,_e,W.reRenderRoot)&&W.callback({values:{...s},...e,...Q,defaultValues:r})}}).unsubscribe,at=W=>(a.mount=!0,h={...h,...W.formState},Z({...W,formState:h})),$=(W,Q={})=>{for(const nt of W?vv(W):o.mount)o.mount.delete(nt),o.array.delete(nt),Q.keepValue||(Un(n,nt),Un(s,nt)),!Q.keepError&&Un(e.errors,nt),!Q.keepDirty&&Un(e.dirtyFields,nt),!Q.keepTouched&&Un(e.touchedFields,nt),!Q.keepIsValidating&&Un(e.validatingFields,nt),!t.shouldUnregister&&!Q.keepDefaultValue&&Un(r,nt);d.state.next({values:sr(s)}),d.state.next({...e,...Q.keepDirty?{isDirty:M()}:{}}),!Q.keepIsValid&&g()},ft=({disabled:W,name:Q})=>{(ha(W)&&a.mount||W||o.disabled.has(Q))&&(W?o.disabled.add(Q):o.disabled.delete(Q))},pt=(W,Q={})=>{let nt=Bt(n,W);const wt=ha(Q.disabled)||ha(t.disabled);return Mi(n,W,{...nt||{},_f:{...nt&&nt._f?nt._f:{ref:{name:W}},name:W,mount:!0,...Q}}),o.mount.add(W),nt?ft({disabled:ha(Q.disabled)?Q.disabled:t.disabled,name:W}):b(W,!0,Q.value),{...wt?{disabled:Q.disabled||t.disabled}:{},...t.progressive?{required:!!Q.required,min:m_(Q.min),max:m_(Q.max),minLength:m_(Q.minLength),maxLength:m_(Q.maxLength),pattern:m_(Q.pattern)}:{},name:W,onChange:B,onBlur:B,ref:xt=>{if(xt){pt(W,Q),nt=Bt(n,W);const dt=kn(xt.value)&&xt.querySelectorAll&&xt.querySelectorAll("input,select,textarea")[0]||xt,jt=Qbt(dt),pe=nt._f.refs||[];if(jt?pe.find(me=>me===dt):dt===nt._f.ref)return;Mi(n,W,{_f:{...nt._f,...jt?{refs:[...pe.filter(qP),dt,...Array.isArray(Bt(r,W))?[{}]:[]],ref:{type:dt.type,name:W}}:{ref:dt}}}),b(W,!1,void 0,dt)}else nt=Bt(n,W,{}),nt._f&&(nt._f.mount=!1),(t.shouldUnregister||Q.shouldUnregister)&&!(Rq(o.array,W)&&a.action)&&o.unMount.add(W)}}},rt=()=>t.shouldFocusError&&yv(n,I,o.mount),gt=W=>{ha(W)&&(d.state.next({disabled:W}),yv(n,(Q,nt)=>{const wt=Bt(n,nt);wt&&(Q.disabled=wt._f.disabled||W,Array.isArray(wt._f.refs)&&wt._f.refs.forEach(xt=>{xt.disabled=wt._f.disabled||W}))},0,!1))},mt=(W,Q)=>async nt=>{let wt;nt&&(nt.preventDefault&&nt.preventDefault(),nt.persist&&nt.persist());let xt=sr(s);if(d.state.next({isSubmitting:!0}),t.resolver){const{errors:dt,values:jt}=await w();e.errors=dt,xt=sr(jt)}else await k(n);if(o.disabled.size)for(const dt of o.disabled)Un(xt,dt);if(Un(e.errors,"root"),hs(e.errors)){d.state.next({errors:{}});try{await W(xt,nt)}catch(dt){wt=dt}}else Q&&await Q({...e.errors},nt),rt(),setTimeout(rt);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:hs(e.errors)&&!wt,submitCount:e.submitCount+1,errors:e.errors}),wt)throw wt},Dt=(W,Q={})=>{Bt(n,W)&&(kn(Q.defaultValue)?D(W,sr(Bt(r,W))):(D(W,Q.defaultValue),Mi(r,W,sr(Q.defaultValue))),Q.keepTouched||Un(e.touchedFields,W),Q.keepDirty||(Un(e.dirtyFields,W),e.isDirty=Q.defaultValue?M(W,sr(Bt(r,W))):M()),Q.keepError||(Un(e.errors,W),c.isValid&&g()),d.state.next({...e}))},St=(W,Q={})=>{const nt=W?sr(W):r,wt=sr(nt),xt=hs(W),dt=xt?r:wt;if(Q.keepDefaultValues||(r=nt),!Q.keepValues){if(Q.keepDirtyValues){const jt=new Set([...o.mount,...Object.keys(ep(r,s))]);for(const pe of Array.from(jt))Bt(e.dirtyFields,pe)?Mi(dt,pe,Bt(s,pe)):D(pe,Bt(dt,pe))}else{if(gB&&kn(W))for(const jt of o.mount){const pe=Bt(n,jt);if(pe&&pe._f){const me=Array.isArray(pe._f.refs)?pe._f.refs[0]:pe._f.ref;if(dw(me)){const We=me.closest("form");if(We){We.reset();break}}}}if(Q.keepFieldsRef)for(const jt of o.mount)D(jt,Bt(dt,jt));else n={}}s=t.shouldUnregister?Q.keepDefaultValues?sr(r):{}:sr(dt),d.array.next({values:{...dt}}),d.state.next({values:{...dt}})}o={mount:Q.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!c.isValid||!!Q.keepIsValid||!!Q.keepDirtyValues||!t.shouldUnregister&&!hs(dt),a.watch=!!t.shouldUnregister,a.action=!1,Q.keepErrors||(e.errors={}),d.state.next({submitCount:Q.keepSubmitCount?e.submitCount:0,isDirty:xt?!1:Q.keepDirty?e.isDirty:!!(Q.keepDefaultValues&&!Do(W,r)),isSubmitted:Q.keepIsSubmitted?e.isSubmitted:!1,dirtyFields:xt?{}:Q.keepDirtyValues?Q.keepDefaultValues&&s?ep(r,s):e.dirtyFields:Q.keepDefaultValues&&W?ep(r,W):Q.keepDirty?e.dirtyFields:{},touchedFields:Q.keepTouched?e.touchedFields:{},errors:Q.keepErrors?e.errors:{},isSubmitSuccessful:Q.keepIsSubmitSuccessful?e.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:r})},Ot=(W,Q)=>St(Io(W)?W(s):W,Q),Pt=(W,Q={})=>{const nt=Bt(n,W),wt=nt&&nt._f;if(wt){const xt=wt.refs?wt.refs[0]:wt.ref;xt.focus&&(xt.focus(),Q.shouldSelect&&Io(xt.select)&&xt.select())}},_e=W=>{e={...e,...W}},It={control:{register:pt,unregister:$,getFieldState:H,handleSubmit:mt,setError:K,_subscribe:Z,_runSchema:w,_focusError:rt,_getWatch:R,_getDirty:M,_setValid:g,_setFieldArray:_,_setDisabledField:ft,_setErrors:y,_getFieldArray:P,_reset:St,_resetDefaultValues:()=>Io(t.defaultValues)&&t.defaultValues().then(W=>{Ot(W,t.resetOptions),d.state.next({isLoading:!1})}),_removeUnmounted:C,_disableForm:gt,_subjects:d,_proxyFormState:c,get _fields(){return n},get _formValues(){return s},get _state(){return a},set _state(W){a=W},get _defaultValues(){return r},get _names(){return o},set _names(W){o=W},get _formState(){return e},get _options(){return t},set _options(W){t={...t,...W}}},subscribe:at,trigger:F,register:pt,handleSubmit:mt,watch:q,setValue:D,getValues:j,reset:Ot,resetField:Dt,clearErrors:U,unregister:$,setError:K,setFocus:Pt,getFieldState:H};return{...It,formControl:It}}function Lte(i={}){const t=Y.useRef(void 0),e=Y.useRef(void 0),[n,r]=Y.useState({isDirty:!1,isValidating:!1,isLoading:Io(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,isReady:!1,defaultValues:Io(i.defaultValues)?void 0:i.defaultValues});if(!t.current)if(i.formControl)t.current={...i.formControl,formState:n},i.defaultValues&&!Io(i.defaultValues)&&i.formControl.reset(i.defaultValues,i.resetOptions);else{const{formControl:a,...o}=hxt(i);t.current={...o,formState:n}}const s=t.current.control;return s._options=i,bB(()=>{const a=s._subscribe({formState:s._proxyFormState,callback:()=>r({...s._formState}),reRenderRoot:!0});return r(o=>({...o,isReady:!0})),s._formState.isReady=!0,a},[s]),Y.useEffect(()=>s._disableForm(i.disabled),[s,i.disabled]),Y.useEffect(()=>{i.mode&&(s._options.mode=i.mode),i.reValidateMode&&(s._options.reValidateMode=i.reValidateMode)},[s,i.mode,i.reValidateMode]),Y.useEffect(()=>{i.errors&&(s._setErrors(i.errors),s._focusError())},[s,i.errors]),Y.useEffect(()=>{i.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,i.shouldUnregister]),Y.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==n.isDirty&&s._subjects.state.next({isDirty:a})}},[s,n.isDirty]),Y.useEffect(()=>{var a;i.values&&!Do(i.values,e.current)?(s._reset(i.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((a=s._options.resetOptions)===null||a===void 0)&&a.keepIsValid||s._setValid(),e.current=i.values,r(o=>({...o}))):s._resetDefaultValues()},[s,i.values]),Y.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=Oq(n,s),t.current}var dxt="Label",Nq=E.forwardRef((i,t)=>V.jsx(ub.label,{...i,ref:t,onMouseDown:e=>{e.target.closest("button, input, select, textarea")||(i.onMouseDown?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));Nq.displayName=dxt;var Bte=Nq;function fxt(i){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t.appendChild(e),e.styleSheet?e.styleSheet.cssText=i:e.appendChild(document.createTextNode(i))}const jq=Y.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Sb=()=>{const i=Y.useContext(jq);if(!i)throw new Error("useDrawerContext must be used within a Drawer.Root");return i};fxt(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function pxt(){const i=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(i)&&/Mobile/.test(i)||/FxiOS/.test(i))}function gxt(){return AB(/^Mac/)}function mxt(){return AB(/^iPhone/)}function cV(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function _xt(){return AB(/^iPad/)||gxt()&&navigator.maxTouchPoints>1}function Hq(){return mxt()||_xt()}function AB(i){return typeof window<"u"&&window.navigator!=null?i.test(window.navigator.platform):void 0}const vxt=24,yxt=typeof window<"u"?E.useLayoutEffect:E.useEffect;function hV(...i){return(...t)=>{for(let e of i)typeof e=="function"&&e(...t)}}const ZP=typeof document<"u"&&window.visualViewport;function dV(i){let t=window.getComputedStyle(i);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function Vq(i){for(dV(i)&&(i=i.parentElement);i&&!dV(i);)i=i.parentElement;return i||document.scrollingElement||document.documentElement}const bxt=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Wx=0,QP;function xxt(i={}){let{isDisabled:t}=i;yxt(()=>{if(!t)return Wx++,Wx===1&&Hq()&&(QP=Sxt()),()=>{Wx--,Wx===0&&QP?.()}},[t])}function Sxt(){let i,t=0,e=h=>{i=Vq(h.target),!(i===document.documentElement&&i===document.body)&&(t=h.changedTouches[0].pageY)},n=h=>{if(!i||i===document.documentElement||i===document.body){h.preventDefault();return}let d=h.changedTouches[0].pageY,f=i.scrollTop,p=i.scrollHeight-i.clientHeight;p!==0&&((f<=0&&d>t||f>=p&&d<t)&&h.preventDefault(),t=d)},r=h=>{let d=h.target;zO(d)&&d!==document.activeElement&&(h.preventDefault(),d.style.transform="translateY(-2000px)",d.focus(),requestAnimationFrame(()=>{d.style.transform=""}))},s=h=>{let d=h.target;zO(d)&&(d.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{d.style.transform="",ZP&&(ZP.height<window.innerHeight?requestAnimationFrame(()=>{fV(d)}):ZP.addEventListener("resize",()=>fV(d),{once:!0}))}))},a=()=>{window.scrollTo(0,0)},o=window.pageXOffset,l=window.pageYOffset,u=hV(wxt(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let c=hV(__(document,"touchstart",e,{passive:!1,capture:!0}),__(document,"touchmove",n,{passive:!1,capture:!0}),__(document,"touchend",r,{passive:!1,capture:!0}),__(document,"focus",s,!0),__(window,"scroll",a));return()=>{u(),c(),window.scrollTo(o,l)}}function wxt(i,t,e){let n=i.style[t];return i.style[t]=e,()=>{i.style[t]=n}}function __(i,t,e,n){return i.addEventListener(t,e,n),()=>{i.removeEventListener(t,e,n)}}function fV(i){let t=document.scrollingElement||document.documentElement;for(;i&&i!==t;){let e=Vq(i);if(e!==document.documentElement&&e!==document.body&&e!==i){let n=e.getBoundingClientRect().top,r=i.getBoundingClientRect().top,s=i.getBoundingClientRect().bottom;const a=e.getBoundingClientRect().bottom+vxt;s>a&&(e.scrollTop+=r-n)}i=e.parentElement}}function zO(i){return i instanceof HTMLInputElement&&!bxt.has(i.type)||i instanceof HTMLTextAreaElement||i instanceof HTMLElement&&i.isContentEditable}function Axt(i,t){typeof i=="function"?i(t):i!=null&&(i.current=t)}function kxt(...i){return t=>i.forEach(e=>Axt(e,t))}function Wq(...i){return E.useCallback(kxt(...i),i)}const $q=new WeakMap;function ar(i,t,e=!1){if(!i||!(i instanceof HTMLElement))return;let n={};Object.entries(t).forEach(([r,s])=>{if(r.startsWith("--")){i.style.setProperty(r,s);return}n[r]=i.style[r],i.style[r]=s}),!e&&$q.set(i,n)}function Cxt(i,t){if(!i||!(i instanceof HTMLElement))return;let e=$q.get(i);e&&(i.style[t]=e[t])}const Yn=i=>{switch(i){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return i}};function $x(i,t){if(!i)return null;const e=window.getComputedStyle(i),n=e.transform||e.webkitTransform||e.mozTransform;let r=n.match(/^matrix3d\((.+)\)$/);return r?parseFloat(r[1].split(", ")[Yn(t)?13:12]):(r=n.match(/^matrix\((.+)\)$/),r?parseFloat(r[1].split(", ")[Yn(t)?5:4]):null)}function Mxt(i){return 8*(Math.log(i+1)-2)}function JP(i,t){if(!i)return()=>{};const e=i.style.cssText;return Object.assign(i.style,t),()=>{i.style.cssText=e}}function Txt(...i){return(...t)=>{for(const e of i)typeof e=="function"&&e(...t)}}const un={DURATION:.5,EASE:[.32,.72,0,1]},Uq=.4,Pxt=.25,Ext=100,Gq=8,Fh=16,NO=26,tE="vaul-dragging";function Yq(i){const t=Y.useRef(i);return Y.useEffect(()=>{t.current=i}),Y.useMemo(()=>(...e)=>t.current==null?void 0:t.current.call(t,...e),[])}function Rxt({defaultProp:i,onChange:t}){const e=Y.useState(i),[n]=e,r=Y.useRef(n),s=Yq(t);return Y.useEffect(()=>{r.current!==n&&(s(n),r.current=n)},[n,r,s]),e}function Xq({prop:i,defaultProp:t,onChange:e=()=>{}}){const[n,r]=Rxt({defaultProp:t,onChange:e}),s=i!==void 0,a=s?i:n,o=Yq(e),l=Y.useCallback(u=>{if(s){const h=typeof u=="function"?u(i):u;h!==i&&o(h)}else r(u)},[s,i,r,o]);return[a,l]}function Oxt({activeSnapPointProp:i,setActiveSnapPointProp:t,snapPoints:e,drawerRef:n,overlayRef:r,fadeFromIndex:s,onSnapPointChange:a,direction:o="bottom",container:l,snapToSequentialPoint:u}){const[c,h]=Xq({prop:i,defaultProp:e?.[0],onChange:t}),[d,f]=Y.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);Y.useEffect(()=>{function w(){f({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const p=Y.useMemo(()=>c===e?.[e.length-1]||null,[e,c]),g=Y.useMemo(()=>{var w;return(w=e?.findIndex(A=>A===c))!=null?w:null},[e,c]),m=e&&e.length>0&&(s||s===0)&&!Number.isNaN(s)&&e[s]===c||!e,_=Y.useMemo(()=>{const w=l?{width:l.getBoundingClientRect().width,height:l.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var A;return(A=e?.map(k=>{const C=typeof k=="string";let M=0;if(C&&(M=parseInt(k,10)),Yn(o)){const P=C?M:d?k*w.height:0;return d?o==="bottom"?w.height-P:-w.height+P:P}const R=C?M:d?k*w.width:0;return d?o==="right"?w.width-R:-w.width+R:R}))!=null?A:[]},[e,d,l]),v=Y.useMemo(()=>g!==null?_?.[g]:null,[_,g]),y=Y.useCallback(w=>{var A;const k=(A=_?.findIndex(C=>C===w))!=null?A:null;a(k),ar(n.current,{transition:`transform ${un.DURATION}s cubic-bezier(${un.EASE.join(",")})`,transform:Yn(o)?`translate3d(0, ${w}px, 0)`:`translate3d(${w}px, 0, 0)`}),_&&k!==_.length-1&&s!==void 0&&k!==s&&k<s?ar(r.current,{transition:`opacity ${un.DURATION}s cubic-bezier(${un.EASE.join(",")})`,opacity:"0"}):ar(r.current,{transition:`opacity ${un.DURATION}s cubic-bezier(${un.EASE.join(",")})`,opacity:"1"}),h(e?.[Math.max(k,0)])},[n.current,e,_,s,r,h]);Y.useEffect(()=>{if(c||i){var w;const A=(w=e?.findIndex(k=>k===i||k===c))!=null?w:-1;_&&A!==-1&&typeof _[A]=="number"&&y(_[A])}},[c,i,e,_,y]);function b({draggedDistance:w,closeDrawer:A,velocity:k,dismissible:C}){if(s===void 0)return;const M=o==="bottom"||o==="right"?(v??0)-w:(v??0)+w,R=g===s-1,P=g===0,O=w>0;if(R&&ar(r.current,{transition:`opacity ${un.DURATION}s cubic-bezier(${un.EASE.join(",")})`}),!u&&k>2&&!O){C?A():y(_[0]);return}if(!u&&k>2&&O&&_&&e){y(_[e.length-1]);return}const T=_?.reduce((B,I)=>typeof B!="number"||typeof I!="number"?B:Math.abs(I-M)<Math.abs(B-M)?I:B),D=Yn(o)?window.innerHeight:window.innerWidth;if(k>Uq&&Math.abs(w)<D*.4){const B=O?1:-1;if(B>0&&p&&e){y(_[e.length-1]);return}if(P&&B<0&&C&&A(),g===null)return;y(_[g+B]);return}y(T)}function x({draggedDistance:w}){if(v===null)return;const A=o==="bottom"||o==="right"?v-w:v+w;(o==="bottom"||o==="right")&&A<_[_.length-1]||(o==="top"||o==="left")&&A>_[_.length-1]||ar(n.current,{transform:Yn(o)?`translate3d(0, ${A}px, 0)`:`translate3d(${A}px, 0, 0)`})}function S(w,A){if(!e||typeof g!="number"||!_||s===void 0)return null;const k=g===s-1;if(g>=s&&A)return 0;if(k&&!A)return 1;if(!m&&!k)return null;const M=k?g+1:g-1,R=k?_[M]-_[M-1]:_[M+1]-_[M],P=w/Math.abs(R);return k?1-P:P}return{isLastSnapPoint:p,activeSnapPoint:c,shouldFade:m,getPercentageDragged:S,setActiveSnapPoint:h,activeSnapPointIndex:g,onRelease:b,onDrag:x,snapPointsOffset:_}}const Dxt=()=>()=>{};function Ixt(){const{direction:i,isOpen:t,shouldScaleBackground:e,setBackgroundColorOnScale:n,noBodyStyles:r}=Sb(),s=Y.useRef(null),a=E.useMemo(()=>document.body.style.backgroundColor,[]);function o(){return(window.innerWidth-NO)/window.innerWidth}Y.useEffect(()=>{if(t&&e){s.current&&clearTimeout(s.current);const l=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!l)return;Txt(n&&!r?JP(document.body,{background:"black"}):Dxt,JP(l,{transformOrigin:Yn(i)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${un.DURATION}s`,transitionTimingFunction:`cubic-bezier(${un.EASE.join(",")})`}));const u=JP(l,{borderRadius:`${Gq}px`,overflow:"hidden",...Yn(i)?{transform:`scale(${o()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${o()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),s.current=window.setTimeout(()=>{a?document.body.style.background=a:document.body.style.removeProperty("background")},un.DURATION*1e3)}}},[t,e,a])}let v_=null;function Lxt({isOpen:i,modal:t,nested:e,hasBeenOpened:n,preventScrollRestoration:r,noBodyStyles:s}){const[a,o]=Y.useState(()=>typeof window<"u"?window.location.href:""),l=Y.useRef(0),u=Y.useCallback(()=>{if(cV()&&v_===null&&i&&!s){v_={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:h,innerHeight:d}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-l.current}px`,left:`${-h}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const f=d-window.innerHeight;f&&l.current>=d&&(document.body.style.top=`${-(l.current+f)}px`)}),300)}},[i]),c=Y.useCallback(()=>{if(cV()&&v_!==null&&!s){const h=-parseInt(document.body.style.top,10),d=-parseInt(document.body.style.left,10);Object.assign(document.body.style,v_),window.requestAnimationFrame(()=>{if(r&&a!==window.location.href){o(window.location.href);return}window.scrollTo(d,h)}),v_=null}},[a]);return Y.useEffect(()=>{function h(){l.current=window.scrollY}return h(),window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}},[]),Y.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||c()}},[t,c]),Y.useEffect(()=>{e||!n||(i?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{c()},500)):c())},[i,n,a,t,e,u,c]),{restorePositionSetting:c}}function Bxt({open:i,onOpenChange:t,children:e,onDrag:n,onRelease:r,snapPoints:s,shouldScaleBackground:a=!1,setBackgroundColorOnScale:o=!0,closeThreshold:l=Pxt,scrollLockTimeout:u=Ext,dismissible:c=!0,handleOnly:h=!1,fadeFromIndex:d=s&&s.length-1,activeSnapPoint:f,setActiveSnapPoint:p,fixed:g,modal:m=!0,onClose:_,nested:v,noBodyStyles:y=!1,direction:b="bottom",defaultOpen:x=!1,disablePreventScroll:S=!0,snapToSequentialPoint:w=!1,preventScrollRestoration:A=!1,repositionInputs:k=!0,onAnimationEnd:C,container:M,autoFocus:R=!1}){var P,O;const[T=!1,D]=Xq({defaultProp:x,prop:i,onChange:kt=>{t?.(kt),!kt&&!v&&pe(),setTimeout(()=>{C?.(kt)},un.DURATION*1e3),kt&&!m&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),kt||(document.body.style.pointerEvents="auto")}}),[B,I]=Y.useState(!1),[F,j]=Y.useState(!1),[H,U]=Y.useState(!1),K=Y.useRef(null),q=Y.useRef(null),Z=Y.useRef(null),at=Y.useRef(null),$=Y.useRef(null),ft=Y.useRef(!1),pt=Y.useRef(null),rt=Y.useRef(0),gt=Y.useRef(!1),mt=Y.useRef(!x),Dt=Y.useRef(0),St=Y.useRef(null),Ot=Y.useRef(((P=St.current)==null?void 0:P.getBoundingClientRect().height)||0),Pt=Y.useRef(((O=St.current)==null?void 0:O.getBoundingClientRect().width)||0),_e=Y.useRef(0),Ze=Y.useCallback(kt=>{s&&kt===wt.length-1&&(q.current=new Date)},[]),{activeSnapPoint:It,activeSnapPointIndex:W,setActiveSnapPoint:Q,onRelease:nt,snapPointsOffset:wt,onDrag:xt,shouldFade:dt,getPercentageDragged:jt}=Oxt({snapPoints:s,activeSnapPointProp:f,setActiveSnapPointProp:p,drawerRef:St,fadeFromIndex:d,overlayRef:K,onSnapPointChange:Ze,direction:b,container:M,snapToSequentialPoint:w});xxt({isDisabled:!T||F||!m||H||!B||!k||!S});const{restorePositionSetting:pe}=Lxt({isOpen:T,modal:m,nested:v??!1,hasBeenOpened:B,preventScrollRestoration:A,noBodyStyles:y});function me(){return(window.innerWidth-NO)/window.innerWidth}function We(kt){var Zt,Nt;!c&&!s||St.current&&!St.current.contains(kt.target)||(Ot.current=((Zt=St.current)==null?void 0:Zt.getBoundingClientRect().height)||0,Pt.current=((Nt=St.current)==null?void 0:Nt.getBoundingClientRect().width)||0,j(!0),Z.current=new Date,Hq()&&window.addEventListener("touchend",()=>ft.current=!1,{once:!0}),kt.target.setPointerCapture(kt.pointerId),rt.current=Yn(b)?kt.pageY:kt.pageX)}function Si(kt,Zt){var Nt;let Ut=kt;const oi=(Nt=window.getSelection())==null?void 0:Nt.toString(),fe=St.current?$x(St.current,b):null,nr=new Date;if(Ut.tagName==="SELECT"||Ut.hasAttribute("data-vaul-no-drag")||Ut.closest("[data-vaul-no-drag]"))return!1;if(b==="right"||b==="left")return!0;if(q.current&&nr.getTime()-q.current.getTime()<500)return!1;if(fe!==null&&(b==="bottom"?fe>0:fe<0))return!0;if(oi&&oi.length>0)return!1;if($.current&&nr.getTime()-$.current.getTime()<u&&fe===0||Zt)return $.current=nr,!1;for(;Ut;){if(Ut.scrollHeight>Ut.clientHeight){if(Ut.scrollTop!==0)return $.current=new Date,!1;if(Ut.getAttribute("role")==="dialog")return!0}Ut=Ut.parentNode}return!0}function ai(kt){if(St.current&&F){const Zt=b==="bottom"||b==="right"?1:-1,Nt=(rt.current-(Yn(b)?kt.pageY:kt.pageX))*Zt,Ut=Nt>0,oi=s&&!c&&!Ut;if(oi&&W===0)return;const fe=Math.abs(Nt),nr=document.querySelector("[data-vaul-drawer-wrapper]"),na=b==="bottom"||b==="top"?Ot.current:Pt.current;let yr=fe/na;const Wr=jt(fe,Ut);if(Wr!==null&&(yr=Wr),oi&&yr>=1||!ft.current&&!Si(kt.target,Ut))return;if(St.current.classList.add(tE),ft.current=!0,ar(St.current,{transition:"none"}),ar(K.current,{transition:"none"}),s&&xt({draggedDistance:Nt}),Ut&&!s){const Ea=Mxt(Nt),G=Math.min(Ea*-1,0)*Zt;ar(St.current,{transform:Yn(b)?`translate3d(0, ${G}px, 0)`:`translate3d(${G}px, 0, 0)`});return}const Rs=1-yr;if((dt||d&&W===d-1)&&(n?.(kt,yr),ar(K.current,{opacity:`${Rs}`,transition:"none"},!0)),nr&&K.current&&a){const Ea=Math.min(me()+yr*(1-me()),1),G=8-yr*8,tt=Math.max(0,14-yr*14);ar(nr,{borderRadius:`${G}px`,transform:Yn(b)?`scale(${Ea}) translate3d(0, ${tt}px, 0)`:`scale(${Ea}) translate3d(${tt}px, 0, 0)`,transition:"none"},!0)}if(!s){const Ea=fe*Zt;ar(St.current,{transform:Yn(b)?`translate3d(0, ${Ea}px, 0)`:`translate3d(${Ea}px, 0, 0)`})}}}Y.useEffect(()=>{window.requestAnimationFrame(()=>{mt.current=!0})},[]),Y.useEffect(()=>{var kt;function Zt(){if(!St.current||!k)return;const Nt=document.activeElement;if(zO(Nt)||gt.current){var Ut;const oi=((Ut=window.visualViewport)==null?void 0:Ut.height)||0,fe=window.innerHeight;let nr=fe-oi;const na=St.current.getBoundingClientRect().height||0,yr=na>fe*.8;_e.current||(_e.current=na);const Wr=St.current.getBoundingClientRect().top;if(Math.abs(Dt.current-nr)>60&&(gt.current=!gt.current),s&&s.length>0&&wt&&W){const Rs=wt[W]||0;nr+=Rs}if(Dt.current=nr,na>oi||gt.current){const Rs=St.current.getBoundingClientRect().height;let Ea=Rs;Rs>oi&&(Ea=oi-(yr?Wr:NO)),g?St.current.style.height=`${Rs-Math.max(nr,0)}px`:St.current.style.height=`${Math.max(Ea,oi-Wr)}px`}else pxt()||(St.current.style.height=`${_e.current}px`);s&&s.length>0&&!gt.current?St.current.style.bottom="0px":St.current.style.bottom=`${Math.max(nr,0)}px`}}return(kt=window.visualViewport)==null||kt.addEventListener("resize",Zt),()=>{var Nt;return(Nt=window.visualViewport)==null?void 0:Nt.removeEventListener("resize",Zt)}},[W,s,wt]);function Ln(kt){Ni(),_?.(),kt||D(!1),setTimeout(()=>{s&&Q(s[0])},un.DURATION*1e3)}function Se(){if(!St.current)return;const kt=document.querySelector("[data-vaul-drawer-wrapper]"),Zt=$x(St.current,b);ar(St.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${un.DURATION}s cubic-bezier(${un.EASE.join(",")})`}),ar(K.current,{transition:`opacity ${un.DURATION}s cubic-bezier(${un.EASE.join(",")})`,opacity:"1"}),a&&Zt&&Zt>0&&T&&ar(kt,{borderRadius:`${Gq}px`,overflow:"hidden",...Yn(b)?{transform:`scale(${me()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${me()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${un.DURATION}s`,transitionTimingFunction:`cubic-bezier(${un.EASE.join(",")})`},!0)}function Ni(){!F||!St.current||(St.current.classList.remove(tE),ft.current=!1,j(!1),at.current=new Date)}function _r(kt){if(!F||!St.current)return;St.current.classList.remove(tE),ft.current=!1,j(!1),at.current=new Date;const Zt=$x(St.current,b);if(!kt||!Si(kt.target,!1)||!Zt||Number.isNaN(Zt)||Z.current===null)return;const Nt=at.current.getTime()-Z.current.getTime(),Ut=rt.current-(Yn(b)?kt.pageY:kt.pageX),oi=Math.abs(Ut)/Nt;if(oi>.05&&(U(!0),setTimeout(()=>{U(!1)},200)),s){nt({draggedDistance:Ut*(b==="bottom"||b==="right"?1:-1),closeDrawer:Ln,velocity:oi,dismissible:c}),r?.(kt,!0);return}if(b==="bottom"||b==="right"?Ut>0:Ut<0){Se(),r?.(kt,!0);return}if(oi>Uq){Ln(),r?.(kt,!1);return}var fe;const nr=Math.min((fe=St.current.getBoundingClientRect().height)!=null?fe:0,window.innerHeight);var na;const yr=Math.min((na=St.current.getBoundingClientRect().width)!=null?na:0,window.innerWidth),Wr=b==="left"||b==="right";if(Math.abs(Zt)>=(Wr?yr:nr)*l){Ln(),r?.(kt,!1);return}r?.(kt,!0),Se()}Y.useEffect(()=>(T&&(ar(document.documentElement,{scrollBehavior:"auto"}),q.current=new Date),()=>{Cxt(document.documentElement,"scrollBehavior")}),[T]);function us(kt){const Zt=kt?(window.innerWidth-Fh)/window.innerWidth:1,Nt=kt?-Fh:0;pt.current&&window.clearTimeout(pt.current),ar(St.current,{transition:`transform ${un.DURATION}s cubic-bezier(${un.EASE.join(",")})`,transform:Yn(b)?`scale(${Zt}) translate3d(0, ${Nt}px, 0)`:`scale(${Zt}) translate3d(${Nt}px, 0, 0)`}),!kt&&St.current&&(pt.current=setTimeout(()=>{const Ut=$x(St.current,b);ar(St.current,{transition:"none",transform:Yn(b)?`translate3d(0, ${Ut}px, 0)`:`translate3d(${Ut}px, 0, 0)`})},500))}function Pa(kt,Zt){if(Zt<0)return;const Nt=(window.innerWidth-Fh)/window.innerWidth,Ut=Nt+Zt*(1-Nt),oi=-Fh+Zt*Fh;ar(St.current,{transform:Yn(b)?`scale(${Ut}) translate3d(0, ${oi}px, 0)`:`scale(${Ut}) translate3d(${oi}px, 0, 0)`,transition:"none"})}function vr(kt,Zt){const Nt=Yn(b)?window.innerHeight:window.innerWidth,Ut=Zt?(Nt-Fh)/Nt:1,oi=Zt?-Fh:0;Zt&&ar(St.current,{transition:`transform ${un.DURATION}s cubic-bezier(${un.EASE.join(",")})`,transform:Yn(b)?`scale(${Ut}) translate3d(0, ${oi}px, 0)`:`scale(${Ut}) translate3d(${oi}px, 0, 0)`})}return Y.useEffect(()=>{m||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[m]),Y.createElement(qK,{defaultOpen:x,onOpenChange:kt=>{!c&&!kt||(kt?I(!0):Ln(!0),D(kt))},open:T},Y.createElement(jq.Provider,{value:{activeSnapPoint:It,snapPoints:s,setActiveSnapPoint:Q,drawerRef:St,overlayRef:K,onOpenChange:t,onPress:We,onRelease:_r,onDrag:ai,dismissible:c,shouldAnimate:mt,handleOnly:h,isOpen:T,isDragging:F,shouldFade:dt,closeDrawer:Ln,onNestedDrag:Pa,onNestedOpenChange:us,onNestedRelease:vr,keyboardIsOpen:gt,modal:m,snapPointsOffset:wt,activeSnapPointIndex:W,direction:b,shouldScaleBackground:a,setBackgroundColorOnScale:o,noBodyStyles:y,container:M,autoFocus:R}},e))}const Kq=Y.forwardRef(function({...i},t){const{overlayRef:e,snapPoints:n,onRelease:r,shouldFade:s,isOpen:a,modal:o,shouldAnimate:l}=Sb(),u=Wq(t,e),c=n&&n.length>0;if(!o)return null;const h=Y.useCallback(d=>r(d),[r]);return Y.createElement(QK,{onMouseUp:h,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":a&&c?"true":"false","data-vaul-snap-points-overlay":a&&s?"true":"false","data-vaul-animate":l?.current?"true":"false",...i})});Kq.displayName="Drawer.Overlay";const qq=Y.forwardRef(function({onPointerDownOutside:i,style:t,onOpenAutoFocus:e,...n},r){const{drawerRef:s,onPress:a,onRelease:o,onDrag:l,keyboardIsOpen:u,snapPointsOffset:c,activeSnapPointIndex:h,modal:d,isOpen:f,direction:p,snapPoints:g,container:m,handleOnly:_,shouldAnimate:v,autoFocus:y}=Sb(),[b,x]=Y.useState(!1),S=Wq(r,s),w=Y.useRef(null),A=Y.useRef(null),k=Y.useRef(!1),C=g&&g.length>0;Ixt();const M=(P,O,T=0)=>{if(k.current)return!0;const D=Math.abs(P.y),B=Math.abs(P.x),I=B>D,F=["bottom","right"].includes(O)?1:-1;if(O==="left"||O==="right"){if(!(P.x*F<0)&&B>=0&&B<=T)return I}else if(!(P.y*F<0)&&D>=0&&D<=T)return!I;return k.current=!0,!0};Y.useEffect(()=>{C&&window.requestAnimationFrame(()=>{x(!0)})},[]);function R(P){w.current=null,k.current=!1,o(P)}return Y.createElement(JK,{"data-vaul-drawer-direction":p,"data-vaul-drawer":"","data-vaul-delayed-snap-points":b?"true":"false","data-vaul-snap-points":f&&C?"true":"false","data-vaul-custom-container":m?"true":"false","data-vaul-animate":v?.current?"true":"false",...n,ref:S,style:c&&c.length>0?{"--snap-point-height":`${c[h??0]}px`,...t}:t,onPointerDown:P=>{_||(n.onPointerDown==null||n.onPointerDown.call(n,P),w.current={x:P.pageX,y:P.pageY},a(P))},onOpenAutoFocus:P=>{e?.(P),y||P.preventDefault()},onPointerDownOutside:P=>{if(i?.(P),!d||P.defaultPrevented){P.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:P=>{if(!d){P.preventDefault();return}},onPointerMove:P=>{if(A.current=P,_||(n.onPointerMove==null||n.onPointerMove.call(n,P),!w.current))return;const O=P.pageY-w.current.y,T=P.pageX-w.current.x,D=P.pointerType==="touch"?10:2;M({x:T,y:O},p,D)?l(P):(Math.abs(T)>D||Math.abs(O)>D)&&(w.current=null)},onPointerUp:P=>{n.onPointerUp==null||n.onPointerUp.call(n,P),w.current=null,k.current=!1,o(P)},onPointerOut:P=>{n.onPointerOut==null||n.onPointerOut.call(n,P),R(A.current)},onContextMenu:P=>{n.onContextMenu==null||n.onContextMenu.call(n,P),A.current&&R(A.current)}})});qq.displayName="Drawer.Content";const Fxt=250,zxt=120,Nxt=Y.forwardRef(function({preventCycle:i=!1,children:t,...e},n){const{closeDrawer:r,isDragging:s,snapPoints:a,activeSnapPoint:o,setActiveSnapPoint:l,dismissible:u,handleOnly:c,isOpen:h,onPress:d,onDrag:f}=Sb(),p=Y.useRef(null),g=Y.useRef(!1);function m(){if(g.current){y();return}window.setTimeout(()=>{_()},zxt)}function _(){if(s||i||g.current){y();return}if(y(),!a||a.length===0){u||r();return}if(o===a[a.length-1]&&u){r();return}const x=a.findIndex(w=>w===o);if(x===-1)return;const S=a[x+1];l(S)}function v(){p.current=window.setTimeout(()=>{g.current=!0},Fxt)}function y(){p.current&&window.clearTimeout(p.current),g.current=!1}return Y.createElement("div",{onClick:m,onPointerCancel:y,onPointerDown:b=>{c&&d(b),v()},onPointerMove:b=>{c&&f(b)},ref:n,"data-vaul-drawer-visible":h?"true":"false","data-vaul-handle":"","aria-hidden":"true",...e},Y.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});Nxt.displayName="Drawer.Handle";function jxt(i){const t=Sb(),{container:e=t.container,...n}=i;return Y.createElement(ZK,{container:e,...n})}const Fte={Root:Bxt,Content:qq,Overlay:Kq,Portal:jxt,Title:tq,Description:eq};var WC="Checkbox",[Hxt]=rs(WC),[Vxt,kB]=Hxt(WC);function Wxt(i){const{__scopeCheckbox:t,checked:e,children:n,defaultChecked:r,disabled:s,form:a,name:o,onCheckedChange:l,required:u,value:c="on",internal_do_not_use_render:h}=i,[d,f]=oo({prop:e,defaultProp:r??!1,onChange:l,caller:WC}),[p,g]=E.useState(null),[m,_]=E.useState(null),v=E.useRef(!1),y=p?!!a||!!p.closest("form"):!0,b={checked:d,disabled:s,setChecked:f,control:p,setControl:g,name:o,form:a,value:c,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:Jc(r)?!1:r,isFormControl:y,bubbleInput:m,setBubbleInput:_};return V.jsx(Vxt,{scope:t,...b,children:Gxt(h)?h(b):n})}var Zq="CheckboxTrigger",Qq=E.forwardRef(({__scopeCheckbox:i,onKeyDown:t,onClick:e,...n},r)=>{const{control:s,value:a,disabled:o,checked:l,required:u,setControl:c,setChecked:h,hasConsumerStoppedPropagationRef:d,isFormControl:f,bubbleInput:p}=kB(Zq,i),g=De(r,c),m=E.useRef(l);return E.useEffect(()=>{const _=s?.form;if(_){const v=()=>h(m.current);return _.addEventListener("reset",v),()=>_.removeEventListener("reset",v)}},[s,h]),V.jsx(ue.button,{type:"button",role:"checkbox","aria-checked":Jc(l)?"mixed":l,"aria-required":u,"data-state":iZ(l),"data-disabled":o?"":void 0,disabled:o,value:a,...n,ref:g,onKeyDown:Et(t,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:Et(e,_=>{h(v=>Jc(v)?!0:!v),p&&f&&(d.current=_.isPropagationStopped(),d.current||_.stopPropagation())})})});Qq.displayName=Zq;var $xt=E.forwardRef((i,t)=>{const{__scopeCheckbox:e,name:n,checked:r,defaultChecked:s,required:a,disabled:o,value:l,onCheckedChange:u,form:c,...h}=i;return V.jsx(Wxt,{__scopeCheckbox:e,checked:r,defaultChecked:s,disabled:o,required:a,onCheckedChange:u,name:n,form:c,value:l,internal_do_not_use_render:({isFormControl:d})=>V.jsxs(V.Fragment,{children:[V.jsx(Qq,{...h,ref:t,__scopeCheckbox:e}),d&&V.jsx(eZ,{__scopeCheckbox:e})]})})});$xt.displayName=WC;var Jq="CheckboxIndicator",Uxt=E.forwardRef((i,t)=>{const{__scopeCheckbox:e,forceMount:n,...r}=i,s=kB(Jq,e);return V.jsx(ws,{present:n||Jc(s.checked)||s.checked===!0,children:V.jsx(ue.span,{"data-state":iZ(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...i.style}})})});Uxt.displayName=Jq;var tZ="CheckboxBubbleInput",eZ=E.forwardRef(({__scopeCheckbox:i,...t},e)=>{const{control:n,hasConsumerStoppedPropagationRef:r,checked:s,defaultChecked:a,required:o,disabled:l,name:u,value:c,form:h,bubbleInput:d,setBubbleInput:f}=kB(tZ,i),p=De(e,f),g=MC(s),m=_C(n);E.useEffect(()=>{const v=d;if(!v)return;const y=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(y,"checked").set,S=!r.current;if(g!==s&&x){const w=new Event("click",{bubbles:S});v.indeterminate=Jc(s),x.call(v,Jc(s)?!1:s),v.dispatchEvent(w)}},[d,g,s,r]);const _=E.useRef(Jc(s)?!1:s);return V.jsx(ue.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??_.current,required:o,disabled:l,name:u,value:c,form:h,...t,tabIndex:-1,ref:p,style:{...t.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});eZ.displayName=tZ;function Gxt(i){return typeof i=="function"}function Jc(i){return i==="indeterminate"}function iZ(i){return Jc(i)?"indeterminate":i?"checked":"unchecked"}var nZ={exports:{}};(function(i,t){(function(e,n){i.exports=n()})(clt,function(){var e=1e3,n=6e4,r=36e5,s="millisecond",a="second",o="minute",l="hour",u="day",c="week",h="month",d="quarter",f="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var T=["th","st","nd","rd"],D=O%100;return"["+O+(T[(D-20)%10]||T[D]||T[0])+"]"}},y=function(O,T,D){var B=String(O);return!B||B.length>=T?O:""+Array(T+1-B.length).join(D)+O},b={s:y,z:function(O){var T=-O.utcOffset(),D=Math.abs(T),B=Math.floor(D/60),I=D%60;return(T<=0?"+":"-")+y(B,2,"0")+":"+y(I,2,"0")},m:function O(T,D){if(T.date()<D.date())return-O(D,T);var B=12*(D.year()-T.year())+(D.month()-T.month()),I=T.clone().add(B,h),F=D-I<0,j=T.clone().add(B+(F?-1:1),h);return+(-(B+(D-I)/(F?I-j:j-I))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:h,y:f,w:c,d:u,D:p,h:l,m:o,s:a,ms:s,Q:d}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},x="en",S={};S[x]=v;var w="$isDayjsObject",A=function(O){return O instanceof R||!(!O||!O[w])},k=function O(T,D,B){var I;if(!T)return x;if(typeof T=="string"){var F=T.toLowerCase();S[F]&&(I=F),D&&(S[F]=D,I=F);var j=T.split("-");if(!I&&j.length>1)return O(j[0])}else{var H=T.name;S[H]=T,I=H}return!B&&I&&(x=I),I||!B&&x},C=function(O,T){if(A(O))return O.clone();var D=typeof T=="object"?T:{};return D.date=O,D.args=arguments,new R(D)},M=b;M.l=k,M.i=A,M.w=function(O,T){return C(O,{locale:T.$L,utc:T.$u,x:T.$x,$offset:T.$offset})};var R=function(){function O(D){this.$L=k(D.locale,null,!0),this.parse(D),this.$x=this.$x||D.x||{},this[w]=!0}var T=O.prototype;return T.parse=function(D){this.$d=function(B){var I=B.date,F=B.utc;if(I===null)return new Date(NaN);if(M.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var j=I.match(m);if(j){var H=j[2]-1||0,U=(j[7]||"0").substring(0,3);return F?new Date(Date.UTC(j[1],H,j[3]||1,j[4]||0,j[5]||0,j[6]||0,U)):new Date(j[1],H,j[3]||1,j[4]||0,j[5]||0,j[6]||0,U)}}return new Date(I)}(D),this.init()},T.init=function(){var D=this.$d;this.$y=D.getFullYear(),this.$M=D.getMonth(),this.$D=D.getDate(),this.$W=D.getDay(),this.$H=D.getHours(),this.$m=D.getMinutes(),this.$s=D.getSeconds(),this.$ms=D.getMilliseconds()},T.$utils=function(){return M},T.isValid=function(){return this.$d.toString()!==g},T.isSame=function(D,B){var I=C(D);return this.startOf(B)<=I&&I<=this.endOf(B)},T.isAfter=function(D,B){return C(D)<this.startOf(B)},T.isBefore=function(D,B){return this.endOf(B)<C(D)},T.$g=function(D,B,I){return M.u(D)?this[B]:this.set(I,D)},T.unix=function(){return Math.floor(this.valueOf()/1e3)},T.valueOf=function(){return this.$d.getTime()},T.startOf=function(D,B){var I=this,F=!!M.u(B)||B,j=M.p(D),H=function(pt,rt){var gt=M.w(I.$u?Date.UTC(I.$y,rt,pt):new Date(I.$y,rt,pt),I);return F?gt:gt.endOf(u)},U=function(pt,rt){return M.w(I.toDate()[pt].apply(I.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(rt)),I)},K=this.$W,q=this.$M,Z=this.$D,at="set"+(this.$u?"UTC":"");switch(j){case f:return F?H(1,0):H(31,11);case h:return F?H(1,q):H(0,q+1);case c:var $=this.$locale().weekStart||0,ft=(K<$?K+7:K)-$;return H(F?Z-ft:Z+(6-ft),q);case u:case p:return U(at+"Hours",0);case l:return U(at+"Minutes",1);case o:return U(at+"Seconds",2);case a:return U(at+"Milliseconds",3);default:return this.clone()}},T.endOf=function(D){return this.startOf(D,!1)},T.$set=function(D,B){var I,F=M.p(D),j="set"+(this.$u?"UTC":""),H=(I={},I[u]=j+"Date",I[p]=j+"Date",I[h]=j+"Month",I[f]=j+"FullYear",I[l]=j+"Hours",I[o]=j+"Minutes",I[a]=j+"Seconds",I[s]=j+"Milliseconds",I)[F],U=F===u?this.$D+(B-this.$W):B;if(F===h||F===f){var K=this.clone().set(p,1);K.$d[H](U),K.init(),this.$d=K.set(p,Math.min(this.$D,K.daysInMonth())).$d}else H&&this.$d[H](U);return this.init(),this},T.set=function(D,B){return this.clone().$set(D,B)},T.get=function(D){return this[M.p(D)]()},T.add=function(D,B){var I,F=this;D=Number(D);var j=M.p(B),H=function(q){var Z=C(F);return M.w(Z.date(Z.date()+Math.round(q*D)),F)};if(j===h)return this.set(h,this.$M+D);if(j===f)return this.set(f,this.$y+D);if(j===u)return H(1);if(j===c)return H(7);var U=(I={},I[o]=n,I[l]=r,I[a]=e,I)[j]||1,K=this.$d.getTime()+D*U;return M.w(K,this)},T.subtract=function(D,B){return this.add(-1*D,B)},T.format=function(D){var B=this,I=this.$locale();if(!this.isValid())return I.invalidDate||g;var F=D||"YYYY-MM-DDTHH:mm:ssZ",j=M.z(this),H=this.$H,U=this.$m,K=this.$M,q=I.weekdays,Z=I.months,at=I.meridiem,$=function(rt,gt,mt,Dt){return rt&&(rt[gt]||rt(B,F))||mt[gt].slice(0,Dt)},ft=function(rt){return M.s(H%12||12,rt,"0")},pt=at||function(rt,gt,mt){var Dt=rt<12?"AM":"PM";return mt?Dt.toLowerCase():Dt};return F.replace(_,function(rt,gt){return gt||function(mt){switch(mt){case"YY":return String(B.$y).slice(-2);case"YYYY":return M.s(B.$y,4,"0");case"M":return K+1;case"MM":return M.s(K+1,2,"0");case"MMM":return $(I.monthsShort,K,Z,3);case"MMMM":return $(Z,K);case"D":return B.$D;case"DD":return M.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return $(I.weekdaysMin,B.$W,q,2);case"ddd":return $(I.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(H);case"HH":return M.s(H,2,"0");case"h":return ft(1);case"hh":return ft(2);case"a":return pt(H,U,!0);case"A":return pt(H,U,!1);case"m":return String(U);case"mm":return M.s(U,2,"0");case"s":return String(B.$s);case"ss":return M.s(B.$s,2,"0");case"SSS":return M.s(B.$ms,3,"0");case"Z":return j}return null}(rt)||j.replace(":","")})},T.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},T.diff=function(D,B,I){var F,j=this,H=M.p(B),U=C(D),K=(U.utcOffset()-this.utcOffset())*n,q=this-U,Z=function(){return M.m(j,U)};switch(H){case f:F=Z()/12;break;case h:F=Z();break;case d:F=Z()/3;break;case c:F=(q-K)/6048e5;break;case u:F=(q-K)/864e5;break;case l:F=q/r;break;case o:F=q/n;break;case a:F=q/e;break;default:F=q}return I?F:M.a(F)},T.daysInMonth=function(){return this.endOf(h).$D},T.$locale=function(){return S[this.$L]},T.locale=function(D,B){if(!D)return this.$L;var I=this.clone(),F=k(D,B,!0);return F&&(I.$L=F),I},T.clone=function(){return M.w(this.$d,this)},T.toDate=function(){return new Date(this.valueOf())},T.toJSON=function(){return this.isValid()?this.toISOString():null},T.toISOString=function(){return this.$d.toISOString()},T.toString=function(){return this.$d.toUTCString()},O}(),P=R.prototype;return C.prototype=P,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",u],["$M",h],["$y",f],["$D",p]].forEach(function(O){P[O[1]]=function(T){return this.$g(T,O[0],O[1])}}),C.extend=function(O,T){return O.$i||(O(T,R,C),O.$i=!0),C},C.locale=k,C.isDayjs=A,C.unix=function(O){return C(1e3*O)},C.en=S[x],C.Ls=S,C.p={},C})})(nZ);var Yxt=nZ.exports;const zte=ib(Yxt);var CB="Radio",[Xxt,rZ]=rs(CB),[Kxt,qxt]=Xxt(CB),sZ=E.forwardRef((i,t)=>{const{__scopeRadio:e,name:n,checked:r=!1,required:s,disabled:a,value:o="on",onCheck:l,form:u,...c}=i,[h,d]=E.useState(null),f=De(t,m=>d(m)),p=E.useRef(!1),g=h?u||!!h.closest("form"):!0;return V.jsxs(Kxt,{scope:e,checked:r,disabled:a,children:[V.jsx(ue.button,{type:"button",role:"radio","aria-checked":r,"data-state":uZ(r),"data-disabled":a?"":void 0,disabled:a,value:o,...c,ref:f,onClick:Et(i.onClick,m=>{r||l?.(),g&&(p.current=m.isPropagationStopped(),p.current||m.stopPropagation())})}),g&&V.jsx(lZ,{control:h,bubbles:!p.current,name:n,value:o,checked:r,required:s,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});sZ.displayName=CB;var aZ="RadioIndicator",oZ=E.forwardRef((i,t)=>{const{__scopeRadio:e,forceMount:n,...r}=i,s=qxt(aZ,e);return V.jsx(ws,{present:n||s.checked,children:V.jsx(ue.span,{"data-state":uZ(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})})});oZ.displayName=aZ;var Zxt="RadioBubbleInput",lZ=E.forwardRef(({__scopeRadio:i,control:t,checked:e,bubbles:n=!0,...r},s)=>{const a=E.useRef(null),o=De(a,s),l=MC(e),u=_C(t);return E.useEffect(()=>{const c=a.current;if(!c)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==e&&f){const p=new Event("click",{bubbles:n});f.call(c,e),c.dispatchEvent(p)}},[l,e,n]),V.jsx(ue.input,{type:"radio","aria-hidden":!0,defaultChecked:e,...r,tabIndex:-1,ref:o,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});lZ.displayName=Zxt;function uZ(i){return i?"checked":"unchecked"}var Qxt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$C="RadioGroup",[Jxt]=rs($C,[xC,rZ]),cZ=xC(),hZ=rZ(),[tSt,eSt]=Jxt($C),dZ=E.forwardRef((i,t)=>{const{__scopeRadioGroup:e,name:n,defaultValue:r,value:s,required:a=!1,disabled:o=!1,orientation:l,dir:u,loop:c=!0,onValueChange:h,...d}=i,f=cZ(e),p=hC(u),[g,m]=oo({prop:s,defaultProp:r??null,onChange:h,caller:$C});return V.jsx(tSt,{scope:e,name:n,required:a,disabled:o,value:g,onValueChange:m,children:V.jsx(eX,{asChild:!0,...f,orientation:l,dir:p,loop:c,children:V.jsx(ue.div,{role:"radiogroup","aria-required":a,"aria-orientation":l,"data-disabled":o?"":void 0,dir:p,...d,ref:t})})})});dZ.displayName=$C;var fZ="RadioGroupItem",pZ=E.forwardRef((i,t)=>{const{__scopeRadioGroup:e,disabled:n,...r}=i,s=eSt(fZ,e),a=s.disabled||n,o=cZ(e),l=hZ(e),u=E.useRef(null),c=De(t,u),h=s.value===r.value,d=E.useRef(!1);return E.useEffect(()=>{const f=g=>{Qxt.includes(g.key)&&(d.current=!0)},p=()=>d.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",p),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",p)}},[]),V.jsx(iX,{asChild:!0,...o,focusable:!a,active:h,children:V.jsx(sZ,{disabled:a,required:s.required,checked:h,...l,...r,name:s.name,ref:c,onCheck:()=>s.onValueChange(r.value),onKeyDown:Et(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:Et(r.onFocus,()=>{d.current&&u.current?.click()})})})});pZ.displayName=fZ;var iSt="RadioGroupIndicator",gZ=E.forwardRef((i,t)=>{const{__scopeRadioGroup:e,...n}=i,r=hZ(e);return V.jsx(oZ,{...r,...n,ref:t})});gZ.displayName=iSt;var Nte=dZ,jte=pZ,Hte=gZ;const pV=(i,t,e)=>{if(i&&"reportValidity"in i){const n=Bt(e,t);i.setCustomValidity(n&&n.message||""),i.reportValidity()}},jO=(i,t)=>{for(const e in t.fields){const n=t.fields[e];n&&n.ref&&"reportValidity"in n.ref?pV(n.ref,e,i):n&&n.refs&&n.refs.forEach(r=>pV(r,e,i))}},gV=(i,t)=>{t.shouldUseNativeValidation&&jO(i,t);const e={};for(const n in i){const r=Bt(t.fields,n),s=Object.assign(i[n]||{},{ref:r&&r.ref});if(nSt(t.names||Object.keys(i),n)){const a=Object.assign({},Bt(e,n));Mi(a,"root",s),Mi(e,n,a)}else Mi(e,n,s)}return e},nSt=(i,t)=>{const e=mV(t);return i.some(n=>mV(n).match(`^${e}\\.\\d+`))};function mV(i){return i.replace(/\]|\[/g,"")}function _t(i,t,e){function n(o,l){if(o._zod||Object.defineProperty(o,"_zod",{value:{def:l,constr:a,traits:new Set},enumerable:!1}),o._zod.traits.has(i))return;o._zod.traits.add(i),t(o,l);const u=a.prototype,c=Object.keys(u);for(let h=0;h<c.length;h++){const d=c[h];d in o||(o[d]=u[d].bind(o))}}const r=e?.Parent??Object;class s extends r{}Object.defineProperty(s,"name",{value:i});function a(o){var l;const u=e?.Parent?new s:this;n(u,o),(l=u._zod).deferred??(l.deferred=[]);for(const c of u._zod.deferred)c();return u}return Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:o=>e?.Parent&&o instanceof e.Parent?!0:o?._zod?.traits?.has(i)}),Object.defineProperty(a,"name",{value:i}),a}class ag extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class mZ extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const _Z={};function Ud(i){return _Z}function rSt(i){const t=Object.values(i).filter(n=>typeof n=="number");return Object.entries(i).filter(([n,r])=>t.indexOf(+n)===-1).map(([n,r])=>r)}function HO(i,t){return typeof t=="bigint"?t.toString():t}function MB(i){return{get value(){{const t=i();return Object.defineProperty(this,"value",{value:t}),t}}}}function TB(i){return i==null}function PB(i){const t=i.startsWith("^")?1:0,e=i.endsWith("$")?i.length-1:i.length;return i.slice(t,e)}function sSt(i,t){const e=(i.toString().split(".")[1]||"").length,n=t.toString();let r=(n.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(n)){const l=n.match(/\d?e-(\d?)/);l?.[1]&&(r=Number.parseInt(l[1]))}const s=e>r?e:r,a=Number.parseInt(i.toFixed(s).replace(".","")),o=Number.parseInt(t.toFixed(s).replace(".",""));return a%o/10**s}const _V=Symbol("evaluating");function $i(i,t,e){let n;Object.defineProperty(i,t,{get(){if(n!==_V)return n===void 0&&(n=_V,n=e()),n},set(r){Object.defineProperty(i,t,{value:r})},configurable:!0})}function df(i,t,e){Object.defineProperty(i,t,{value:e,writable:!0,enumerable:!0,configurable:!0})}function ff(...i){const t={};for(const e of i){const n=Object.getOwnPropertyDescriptors(e);Object.assign(t,n)}return Object.defineProperties({},t)}function vV(i){return JSON.stringify(i)}function aSt(i){return i.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const vZ="captureStackTrace"in Error?Error.captureStackTrace:(...i)=>{};function pw(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}const oSt=MB(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const i=Function;return new i(""),!0}catch{return!1}});function Xy(i){if(pw(i)===!1)return!1;const t=i.constructor;if(t===void 0||typeof t!="function")return!0;const e=t.prototype;return!(pw(e)===!1||Object.prototype.hasOwnProperty.call(e,"isPrototypeOf")===!1)}function yZ(i){return Xy(i)?{...i}:Array.isArray(i)?[...i]:i}const lSt=new Set(["string","number","symbol"]);function UC(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function wh(i,t,e){const n=new i._zod.constr(t??i._zod.def);return(!t||e?.parent)&&(n._zod.parent=i),n}function de(i){const t=i;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function uSt(i){return Object.keys(i).filter(t=>i[t]._zod.optin==="optional"&&i[t]._zod.optout==="optional")}const cSt={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function hSt(i,t){const e=i._zod.def,n=ff(i._zod.def,{get shape(){const r={};for(const s in t){if(!(s in e.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(r[s]=e.shape[s])}return df(this,"shape",r),r},checks:[]});return wh(i,n)}function dSt(i,t){const e=i._zod.def,n=ff(i._zod.def,{get shape(){const r={...i._zod.def.shape};for(const s in t){if(!(s in e.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete r[s]}return df(this,"shape",r),r},checks:[]});return wh(i,n)}function fSt(i,t){if(!Xy(t))throw new Error("Invalid input to extend: expected a plain object");const e=i._zod.def.checks;if(e&&e.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=ff(i._zod.def,{get shape(){const s={...i._zod.def.shape,...t};return df(this,"shape",s),s},checks:[]});return wh(i,r)}function pSt(i,t){if(!Xy(t))throw new Error("Invalid input to safeExtend: expected a plain object");const e={...i._zod.def,get shape(){const n={...i._zod.def.shape,...t};return df(this,"shape",n),n},checks:i._zod.def.checks};return wh(i,e)}function gSt(i,t){const e=ff(i._zod.def,{get shape(){const n={...i._zod.def.shape,...t._zod.def.shape};return df(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return wh(i,e)}function mSt(i,t,e){const n=ff(t._zod.def,{get shape(){const r=t._zod.def.shape,s={...r};if(e)for(const a in e){if(!(a in r))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(s[a]=i?new i({type:"optional",innerType:r[a]}):r[a])}else for(const a in r)s[a]=i?new i({type:"optional",innerType:r[a]}):r[a];return df(this,"shape",s),s},checks:[]});return wh(t,n)}function _St(i,t,e){const n=ff(t._zod.def,{get shape(){const r=t._zod.def.shape,s={...r};if(e)for(const a in e){if(!(a in s))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(s[a]=new i({type:"nonoptional",innerType:r[a]}))}else for(const a in r)s[a]=new i({type:"nonoptional",innerType:r[a]});return df(this,"shape",s),s},checks:[]});return wh(t,n)}function Cp(i,t=0){if(i.aborted===!0)return!0;for(let e=t;e<i.issues.length;e++)if(i.issues[e]?.continue!==!0)return!0;return!1}function bZ(i,t){return t.map(e=>{var n;return(n=e).path??(n.path=[]),e.path.unshift(i),e})}function Ux(i){return typeof i=="string"?i:i?.message}function Gd(i,t,e){const n={...i,path:i.path??[]};if(!i.message){const r=Ux(i.inst?._zod.def?.error?.(i))??Ux(t?.error?.(i))??Ux(e.customError?.(i))??Ux(e.localeError?.(i))??"Invalid input";n.message=r}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function EB(i){return Array.isArray(i)?"array":typeof i=="string"?"string":"unknown"}function Ky(...i){const[t,e,n]=i;return typeof t=="string"?{message:t,code:"custom",input:e,inst:n}:{...t}}const xZ=(i,t)=>{i.name="$ZodError",Object.defineProperty(i,"_zod",{value:i._zod,enumerable:!1}),Object.defineProperty(i,"issues",{value:t,enumerable:!1}),i.message=JSON.stringify(t,HO,2),Object.defineProperty(i,"toString",{value:()=>i.message,enumerable:!1})},RB=_t("$ZodError",xZ),GC=_t("$ZodError",xZ,{Parent:Error});function vSt(i,t=e=>e.message){const e={},n=[];for(const r of i.issues)r.path.length>0?(e[r.path[0]]=e[r.path[0]]||[],e[r.path[0]].push(t(r))):n.push(t(r));return{formErrors:n,fieldErrors:e}}function ySt(i,t=e=>e.message){const e={_errors:[]},n=r=>{for(const s of r.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>n({issues:a}));else if(s.code==="invalid_key")n({issues:s.issues});else if(s.code==="invalid_element")n({issues:s.issues});else if(s.path.length===0)e._errors.push(t(s));else{let a=e,o=0;for(;o<s.path.length;){const l=s.path[o];o===s.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(t(s))):a[l]=a[l]||{_errors:[]},a=a[l],o++}}};return n(i),e}const YC=i=>(t,e,n,r)=>{const s=n?Object.assign(n,{async:!1}):{async:!1},a=t._zod.run({value:e,issues:[]},s);if(a instanceof Promise)throw new ag;if(a.issues.length){const o=new(r?.Err??i)(a.issues.map(l=>Gd(l,s,Ud())));throw vZ(o,r?.callee),o}return a.value},bSt=YC(GC),XC=i=>async(t,e,n,r)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let a=t._zod.run({value:e,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){const o=new(r?.Err??i)(a.issues.map(l=>Gd(l,s,Ud())));throw vZ(o,r?.callee),o}return a.value},xSt=XC(GC),KC=i=>(t,e,n)=>{const r=n?{...n,async:!1}:{async:!1},s=t._zod.run({value:e,issues:[]},r);if(s instanceof Promise)throw new ag;return s.issues.length?{success:!1,error:new(i??RB)(s.issues.map(a=>Gd(a,r,Ud())))}:{success:!0,data:s.value}},SSt=KC(GC),qC=i=>async(t,e,n)=>{const r=n?Object.assign(n,{async:!0}):{async:!0};let s=t._zod.run({value:e,issues:[]},r);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new i(s.issues.map(a=>Gd(a,r,Ud())))}:{success:!0,data:s.value}},wSt=qC(GC),ASt=i=>(t,e,n)=>{const r=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return YC(i)(t,e,r)},kSt=i=>(t,e,n)=>YC(i)(t,e,n),CSt=i=>async(t,e,n)=>{const r=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return XC(i)(t,e,r)},MSt=i=>async(t,e,n)=>XC(i)(t,e,n),TSt=i=>(t,e,n)=>{const r=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return KC(i)(t,e,r)},PSt=i=>(t,e,n)=>KC(i)(t,e,n),ESt=i=>async(t,e,n)=>{const r=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return qC(i)(t,e,r)},RSt=i=>async(t,e,n)=>qC(i)(t,e,n),OSt=/^[cC][^\s-]{8,}$/,DSt=/^[0-9a-z]+$/,ISt=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,LSt=/^[0-9a-vA-V]{20}$/,BSt=/^[A-Za-z0-9]{27}$/,FSt=/^[a-zA-Z0-9_-]{21}$/,zSt=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,NSt=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,yV=i=>i?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${i}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,jSt=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,HSt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function VSt(){return new RegExp(HSt,"u")}const WSt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,$St=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,USt=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,GSt=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,YSt=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,SZ=/^[A-Za-z0-9_-]*$/,XSt=/^\+(?:[0-9]){6,14}[0-9]$/,wZ="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",KSt=new RegExp(`^${wZ}$`);function AZ(i){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof i.precision=="number"?i.precision===-1?`${t}`:i.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${i.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function qSt(i){return new RegExp(`^${AZ(i)}$`)}function ZSt(i){const t=AZ({precision:i.precision}),e=["Z"];i.local&&e.push(""),i.offset&&e.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${e.join("|")})`;return new RegExp(`^${wZ}T(?:${n})$`)}const QSt=i=>{const t=i?`[\\s\\S]{${i?.minimum??0},${i?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},JSt=/^-?\d+$/,t1t=/^-?\d+(?:\.\d+)?/,e1t=/^(?:true|false)$/i,i1t=/^[^A-Z]*$/,n1t=/^[^a-z]*$/,ta=_t("$ZodCheck",(i,t)=>{var e;i._zod??(i._zod={}),i._zod.def=t,(e=i._zod).onattach??(e.onattach=[])}),kZ={number:"number",bigint:"bigint",object:"date"},CZ=_t("$ZodCheckLessThan",(i,t)=>{ta.init(i,t);const e=kZ[typeof t.value];i._zod.onattach.push(n=>{const r=n._zod.bag,s=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),i._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:e,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:i,continue:!t.abort})}}),MZ=_t("$ZodCheckGreaterThan",(i,t)=>{ta.init(i,t);const e=kZ[typeof t.value];i._zod.onattach.push(n=>{const r=n._zod.bag,s=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),i._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:e,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:i,continue:!t.abort})}}),r1t=_t("$ZodCheckMultipleOf",(i,t)=>{ta.init(i,t),i._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),i._zod.check=e=>{if(typeof e.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof e.value=="bigint"?e.value%t.value===BigInt(0):sSt(e.value,t.value)===0)||e.issues.push({origin:typeof e.value,code:"not_multiple_of",divisor:t.value,input:e.value,inst:i,continue:!t.abort})}}),s1t=_t("$ZodCheckNumberFormat",(i,t)=>{ta.init(i,t),t.format=t.format||"float64";const e=t.format?.includes("int"),n=e?"int":"number",[r,s]=cSt[t.format];i._zod.onattach.push(a=>{const o=a._zod.bag;o.format=t.format,o.minimum=r,o.maximum=s,e&&(o.pattern=JSt)}),i._zod.check=a=>{const o=a.value;if(e){if(!Number.isInteger(o)){a.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:o,inst:i});return}if(!Number.isSafeInteger(o)){o>0?a.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:i,origin:n,continue:!t.abort}):a.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:i,origin:n,continue:!t.abort});return}}o<r&&a.issues.push({origin:"number",input:o,code:"too_small",minimum:r,inclusive:!0,inst:i,continue:!t.abort}),o>s&&a.issues.push({origin:"number",input:o,code:"too_big",maximum:s,inst:i})}}),a1t=_t("$ZodCheckMaxLength",(i,t)=>{var e;ta.init(i,t),(e=i._zod.def).when??(e.when=n=>{const r=n.value;return!TB(r)&&r.length!==void 0}),i._zod.onattach.push(n=>{const r=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(n._zod.bag.maximum=t.maximum)}),i._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const a=EB(r);n.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:i,continue:!t.abort})}}),o1t=_t("$ZodCheckMinLength",(i,t)=>{var e;ta.init(i,t),(e=i._zod.def).when??(e.when=n=>{const r=n.value;return!TB(r)&&r.length!==void 0}),i._zod.onattach.push(n=>{const r=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(n._zod.bag.minimum=t.minimum)}),i._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const a=EB(r);n.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:i,continue:!t.abort})}}),l1t=_t("$ZodCheckLengthEquals",(i,t)=>{var e;ta.init(i,t),(e=i._zod.def).when??(e.when=n=>{const r=n.value;return!TB(r)&&r.length!==void 0}),i._zod.onattach.push(n=>{const r=n._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),i._zod.check=n=>{const r=n.value,s=r.length;if(s===t.length)return;const a=EB(r),o=s>t.length;n.issues.push({origin:a,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:i,continue:!t.abort})}}),ZC=_t("$ZodCheckStringFormat",(i,t)=>{var e,n;ta.init(i,t),i._zod.onattach.push(r=>{const s=r._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(e=i._zod).check??(e.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:i,continue:!t.abort})}):(n=i._zod).check??(n.check=()=>{})}),u1t=_t("$ZodCheckRegex",(i,t)=>{ZC.init(i,t),i._zod.check=e=>{t.pattern.lastIndex=0,!t.pattern.test(e.value)&&e.issues.push({origin:"string",code:"invalid_format",format:"regex",input:e.value,pattern:t.pattern.toString(),inst:i,continue:!t.abort})}}),c1t=_t("$ZodCheckLowerCase",(i,t)=>{t.pattern??(t.pattern=i1t),ZC.init(i,t)}),h1t=_t("$ZodCheckUpperCase",(i,t)=>{t.pattern??(t.pattern=n1t),ZC.init(i,t)}),d1t=_t("$ZodCheckIncludes",(i,t)=>{ta.init(i,t);const e=UC(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${e}`:e);t.pattern=n,i._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),i._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:i,continue:!t.abort})}}),f1t=_t("$ZodCheckStartsWith",(i,t)=>{ta.init(i,t);const e=new RegExp(`^${UC(t.prefix)}.*`);t.pattern??(t.pattern=e),i._zod.onattach.push(n=>{const r=n._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(e)}),i._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:i,continue:!t.abort})}}),p1t=_t("$ZodCheckEndsWith",(i,t)=>{ta.init(i,t);const e=new RegExp(`.*${UC(t.suffix)}$`);t.pattern??(t.pattern=e),i._zod.onattach.push(n=>{const r=n._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(e)}),i._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:i,continue:!t.abort})}}),g1t=_t("$ZodCheckOverwrite",(i,t)=>{ta.init(i,t),i._zod.check=e=>{e.value=t.tx(e.value)}});class m1t{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(a=>a),r=Math.min(...n.map(a=>a.length-a.trimStart().length)),s=n.map(a=>a.slice(r)).map(a=>" ".repeat(this.indent*2)+a);for(const a of s)this.content.push(a)}compile(){const t=Function,e=this?.args,r=[...(this?.content??[""]).map(s=>`  ${s}`)];return new t(...e,r.join(`
`))}}const _1t={major:4,minor:1,patch:13},Dn=_t("$ZodType",(i,t)=>{var e;i??(i={}),i._zod.def=t,i._zod.bag=i._zod.bag||{},i._zod.version=_1t;const n=[...i._zod.def.checks??[]];i._zod.traits.has("$ZodCheck")&&n.unshift(i);for(const r of n)for(const s of r._zod.onattach)s(i);if(n.length===0)(e=i._zod).deferred??(e.deferred=[]),i._zod.deferred?.push(()=>{i._zod.run=i._zod.parse});else{const r=(a,o,l)=>{let u=Cp(a),c;for(const h of o){if(h._zod.def.when){if(!h._zod.def.when(a))continue}else if(u)continue;const d=a.issues.length,f=h._zod.check(a);if(f instanceof Promise&&l?.async===!1)throw new ag;if(c||f instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await f,a.issues.length!==d&&(u||(u=Cp(a,d)))});else{if(a.issues.length===d)continue;u||(u=Cp(a,d))}}return c?c.then(()=>a):a},s=(a,o,l)=>{if(Cp(a))return a.aborted=!0,a;const u=r(o,n,l);if(u instanceof Promise){if(l.async===!1)throw new ag;return u.then(c=>i._zod.parse(c,l))}return i._zod.parse(u,l)};i._zod.run=(a,o)=>{if(o.skipChecks)return i._zod.parse(a,o);if(o.direction==="backward"){const u=i._zod.parse({value:a.value,issues:[]},{...o,skipChecks:!0});return u instanceof Promise?u.then(c=>s(c,a,o)):s(u,a,o)}const l=i._zod.parse(a,o);if(l instanceof Promise){if(o.async===!1)throw new ag;return l.then(u=>r(u,n,o))}return r(l,n,o)}}i["~standard"]={validate:r=>{try{const s=SSt(i,r);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return wSt(i,r).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),OB=_t("$ZodString",(i,t)=>{Dn.init(i,t),i._zod.pattern=[...i?._zod.bag?.patterns??[]].pop()??QSt(i._zod.bag),i._zod.parse=(e,n)=>{if(t.coerce)try{e.value=String(e.value)}catch{}return typeof e.value=="string"||e.issues.push({expected:"string",code:"invalid_type",input:e.value,inst:i}),e}}),an=_t("$ZodStringFormat",(i,t)=>{ZC.init(i,t),OB.init(i,t)}),v1t=_t("$ZodGUID",(i,t)=>{t.pattern??(t.pattern=NSt),an.init(i,t)}),y1t=_t("$ZodUUID",(i,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=yV(n))}else t.pattern??(t.pattern=yV());an.init(i,t)}),b1t=_t("$ZodEmail",(i,t)=>{t.pattern??(t.pattern=jSt),an.init(i,t)}),x1t=_t("$ZodURL",(i,t)=>{an.init(i,t),i._zod.check=e=>{try{const n=e.value.trim(),r=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||e.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:e.value,inst:i,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||e.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:e.value,inst:i,continue:!t.abort})),t.normalize?e.value=r.href:e.value=n;return}catch{e.issues.push({code:"invalid_format",format:"url",input:e.value,inst:i,continue:!t.abort})}}}),S1t=_t("$ZodEmoji",(i,t)=>{t.pattern??(t.pattern=VSt()),an.init(i,t)}),w1t=_t("$ZodNanoID",(i,t)=>{t.pattern??(t.pattern=FSt),an.init(i,t)}),A1t=_t("$ZodCUID",(i,t)=>{t.pattern??(t.pattern=OSt),an.init(i,t)}),k1t=_t("$ZodCUID2",(i,t)=>{t.pattern??(t.pattern=DSt),an.init(i,t)}),C1t=_t("$ZodULID",(i,t)=>{t.pattern??(t.pattern=ISt),an.init(i,t)}),M1t=_t("$ZodXID",(i,t)=>{t.pattern??(t.pattern=LSt),an.init(i,t)}),T1t=_t("$ZodKSUID",(i,t)=>{t.pattern??(t.pattern=BSt),an.init(i,t)}),P1t=_t("$ZodISODateTime",(i,t)=>{t.pattern??(t.pattern=ZSt(t)),an.init(i,t)}),E1t=_t("$ZodISODate",(i,t)=>{t.pattern??(t.pattern=KSt),an.init(i,t)}),R1t=_t("$ZodISOTime",(i,t)=>{t.pattern??(t.pattern=qSt(t)),an.init(i,t)}),O1t=_t("$ZodISODuration",(i,t)=>{t.pattern??(t.pattern=zSt),an.init(i,t)}),D1t=_t("$ZodIPv4",(i,t)=>{t.pattern??(t.pattern=WSt),an.init(i,t),i._zod.bag.format="ipv4"}),I1t=_t("$ZodIPv6",(i,t)=>{t.pattern??(t.pattern=$St),an.init(i,t),i._zod.bag.format="ipv6",i._zod.check=e=>{try{new URL(`http://[${e.value}]`)}catch{e.issues.push({code:"invalid_format",format:"ipv6",input:e.value,inst:i,continue:!t.abort})}}}),L1t=_t("$ZodCIDRv4",(i,t)=>{t.pattern??(t.pattern=USt),an.init(i,t)}),B1t=_t("$ZodCIDRv6",(i,t)=>{t.pattern??(t.pattern=GSt),an.init(i,t),i._zod.check=e=>{const n=e.value.split("/");try{if(n.length!==2)throw new Error;const[r,s]=n;if(!s)throw new Error;const a=Number(s);if(`${a}`!==s)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${r}]`)}catch{e.issues.push({code:"invalid_format",format:"cidrv6",input:e.value,inst:i,continue:!t.abort})}}});function TZ(i){if(i==="")return!0;if(i.length%4!==0)return!1;try{return atob(i),!0}catch{return!1}}const F1t=_t("$ZodBase64",(i,t)=>{t.pattern??(t.pattern=YSt),an.init(i,t),i._zod.bag.contentEncoding="base64",i._zod.check=e=>{TZ(e.value)||e.issues.push({code:"invalid_format",format:"base64",input:e.value,inst:i,continue:!t.abort})}});function z1t(i){if(!SZ.test(i))return!1;const t=i.replace(/[-_]/g,n=>n==="-"?"+":"/"),e=t.padEnd(Math.ceil(t.length/4)*4,"=");return TZ(e)}const N1t=_t("$ZodBase64URL",(i,t)=>{t.pattern??(t.pattern=SZ),an.init(i,t),i._zod.bag.contentEncoding="base64url",i._zod.check=e=>{z1t(e.value)||e.issues.push({code:"invalid_format",format:"base64url",input:e.value,inst:i,continue:!t.abort})}}),j1t=_t("$ZodE164",(i,t)=>{t.pattern??(t.pattern=XSt),an.init(i,t)});function H1t(i,t=null){try{const e=i.split(".");if(e.length!==3)return!1;const[n]=e;if(!n)return!1;const r=JSON.parse(atob(n));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const V1t=_t("$ZodJWT",(i,t)=>{an.init(i,t),i._zod.check=e=>{H1t(e.value,t.alg)||e.issues.push({code:"invalid_format",format:"jwt",input:e.value,inst:i,continue:!t.abort})}}),PZ=_t("$ZodNumber",(i,t)=>{Dn.init(i,t),i._zod.pattern=i._zod.bag.pattern??t1t,i._zod.parse=(e,n)=>{if(t.coerce)try{e.value=Number(e.value)}catch{}const r=e.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return e;const s=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return e.issues.push({expected:"number",code:"invalid_type",input:r,inst:i,...s?{received:s}:{}}),e}}),W1t=_t("$ZodNumberFormat",(i,t)=>{s1t.init(i,t),PZ.init(i,t)}),$1t=_t("$ZodBoolean",(i,t)=>{Dn.init(i,t),i._zod.pattern=e1t,i._zod.parse=(e,n)=>{if(t.coerce)try{e.value=!!e.value}catch{}const r=e.value;return typeof r=="boolean"||e.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:i}),e}}),U1t=_t("$ZodAny",(i,t)=>{Dn.init(i,t),i._zod.parse=e=>e}),G1t=_t("$ZodUnknown",(i,t)=>{Dn.init(i,t),i._zod.parse=e=>e}),Y1t=_t("$ZodNever",(i,t)=>{Dn.init(i,t),i._zod.parse=(e,n)=>(e.issues.push({expected:"never",code:"invalid_type",input:e.value,inst:i}),e)});function bV(i,t,e){i.issues.length&&t.issues.push(...bZ(e,i.issues)),t.value[e]=i.value}const X1t=_t("$ZodArray",(i,t)=>{Dn.init(i,t),i._zod.parse=(e,n)=>{const r=e.value;if(!Array.isArray(r))return e.issues.push({expected:"array",code:"invalid_type",input:r,inst:i}),e;e.value=Array(r.length);const s=[];for(let a=0;a<r.length;a++){const o=r[a],l=t.element._zod.run({value:o,issues:[]},n);l instanceof Promise?s.push(l.then(u=>bV(u,e,a))):bV(l,e,a)}return s.length?Promise.all(s).then(()=>e):e}});function gw(i,t,e,n){i.issues.length&&t.issues.push(...bZ(e,i.issues)),i.value===void 0?e in n&&(t.value[e]=void 0):t.value[e]=i.value}function EZ(i){const t=Object.keys(i.shape);for(const n of t)if(!i.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const e=uSt(i.shape);return{...i,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(e)}}function RZ(i,t,e,n,r,s){const a=[],o=r.keySet,l=r.catchall._zod,u=l.def.type;for(const c in t){if(o.has(c))continue;if(u==="never"){a.push(c);continue}const h=l.run({value:t[c],issues:[]},n);h instanceof Promise?i.push(h.then(d=>gw(d,e,c,t))):gw(h,e,c,t)}return a.length&&e.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:s}),i.length?Promise.all(i).then(()=>e):e}const K1t=_t("$ZodObject",(i,t)=>{if(Dn.init(i,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const o=t.shape;Object.defineProperty(t,"shape",{get:()=>{const l={...o};return Object.defineProperty(t,"shape",{value:l}),l}})}const n=MB(()=>EZ(t));$i(i._zod,"propValues",()=>{const o=t.shape,l={};for(const u in o){const c=o[u]._zod;if(c.values){l[u]??(l[u]=new Set);for(const h of c.values)l[u].add(h)}}return l});const r=pw,s=t.catchall;let a;i._zod.parse=(o,l)=>{a??(a=n.value);const u=o.value;if(!r(u))return o.issues.push({expected:"object",code:"invalid_type",input:u,inst:i}),o;o.value={};const c=[],h=a.shape;for(const d of a.keys){const p=h[d]._zod.run({value:u[d],issues:[]},l);p instanceof Promise?c.push(p.then(g=>gw(g,o,d,u))):gw(p,o,d,u)}return s?RZ(c,u,o,l,n.value,i):c.length?Promise.all(c).then(()=>o):o}}),q1t=_t("$ZodObjectJIT",(i,t)=>{K1t.init(i,t);const e=i._zod.parse,n=MB(()=>EZ(t)),r=d=>{const f=new m1t(["shape","payload","ctx"]),p=n.value,g=y=>{const b=vV(y);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};f.write("const input = payload.value;");const m=Object.create(null);let _=0;for(const y of p.keys)m[y]=`key_${_++}`;f.write("const newResult = {};");for(const y of p.keys){const b=m[y],x=vV(y);f.write(`const ${b} = ${g(y)};`),f.write(`
        if (${b}.issues.length) {
          payload.issues = payload.issues.concat(${b}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${x}, ...iss.path] : [${x}]
          })));
        }
        
        
        if (${b}.value === undefined) {
          if (${x} in input) {
            newResult[${x}] = undefined;
          }
        } else {
          newResult[${x}] = ${b}.value;
        }
        
      `)}f.write("payload.value = newResult;"),f.write("return payload;");const v=f.compile();return(y,b)=>v(d,y,b)};let s;const a=pw,o=!_Z.jitless,u=o&&oSt.value,c=t.catchall;let h;i._zod.parse=(d,f)=>{h??(h=n.value);const p=d.value;return a(p)?o&&u&&f?.async===!1&&f.jitless!==!0?(s||(s=r(t.shape)),d=s(d,f),c?RZ([],p,d,f,h,i):d):e(d,f):(d.issues.push({expected:"object",code:"invalid_type",input:p,inst:i}),d)}});function xV(i,t,e,n){for(const s of i)if(s.issues.length===0)return t.value=s.value,t;const r=i.filter(s=>!Cp(s));return r.length===1?(t.value=r[0].value,r[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:e,errors:i.map(s=>s.issues.map(a=>Gd(a,n,Ud())))}),t)}const Z1t=_t("$ZodUnion",(i,t)=>{Dn.init(i,t),$i(i._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),$i(i._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),$i(i._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),$i(i._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${r.map(s=>PB(s.source)).join("|")})$`)}});const e=t.options.length===1,n=t.options[0]._zod.run;i._zod.parse=(r,s)=>{if(e)return n(r,s);let a=!1;const o=[];for(const l of t.options){const u=l._zod.run({value:r.value,issues:[]},s);if(u instanceof Promise)o.push(u),a=!0;else{if(u.issues.length===0)return u;o.push(u)}}return a?Promise.all(o).then(l=>xV(l,r,i,s)):xV(o,r,i,s)}}),Q1t=_t("$ZodIntersection",(i,t)=>{Dn.init(i,t),i._zod.parse=(e,n)=>{const r=e.value,s=t.left._zod.run({value:r,issues:[]},n),a=t.right._zod.run({value:r,issues:[]},n);return s instanceof Promise||a instanceof Promise?Promise.all([s,a]).then(([l,u])=>SV(e,l,u)):SV(e,s,a)}});function VO(i,t){if(i===t)return{valid:!0,data:i};if(i instanceof Date&&t instanceof Date&&+i==+t)return{valid:!0,data:i};if(Xy(i)&&Xy(t)){const e=Object.keys(t),n=Object.keys(i).filter(s=>e.indexOf(s)!==-1),r={...i,...t};for(const s of n){const a=VO(i[s],t[s]);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};r[s]=a.data}return{valid:!0,data:r}}if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return{valid:!1,mergeErrorPath:[]};const e=[];for(let n=0;n<i.length;n++){const r=i[n],s=t[n],a=VO(r,s);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};e.push(a.data)}return{valid:!0,data:e}}return{valid:!1,mergeErrorPath:[]}}function SV(i,t,e){if(t.issues.length&&i.issues.push(...t.issues),e.issues.length&&i.issues.push(...e.issues),Cp(i))return i;const n=VO(t.value,e.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return i.value=n.data,i}const J1t=_t("$ZodEnum",(i,t)=>{Dn.init(i,t);const e=rSt(t.entries),n=new Set(e);i._zod.values=n,i._zod.pattern=new RegExp(`^(${e.filter(r=>lSt.has(typeof r)).map(r=>typeof r=="string"?UC(r):r.toString()).join("|")})$`),i._zod.parse=(r,s)=>{const a=r.value;return n.has(a)||r.issues.push({code:"invalid_value",values:e,input:a,inst:i}),r}}),twt=_t("$ZodTransform",(i,t)=>{Dn.init(i,t),i._zod.parse=(e,n)=>{if(n.direction==="backward")throw new mZ(i.constructor.name);const r=t.transform(e.value,e);if(n.async)return(r instanceof Promise?r:Promise.resolve(r)).then(a=>(e.value=a,e));if(r instanceof Promise)throw new ag;return e.value=r,e}});function wV(i,t){return i.issues.length&&t===void 0?{issues:[],value:void 0}:i}const ewt=_t("$ZodOptional",(i,t)=>{Dn.init(i,t),i._zod.optin="optional",i._zod.optout="optional",$i(i._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),$i(i._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${PB(e.source)})?$`):void 0}),i._zod.parse=(e,n)=>{if(t.innerType._zod.optin==="optional"){const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(s=>wV(s,e.value)):wV(r,e.value)}return e.value===void 0?e:t.innerType._zod.run(e,n)}}),iwt=_t("$ZodNullable",(i,t)=>{Dn.init(i,t),$i(i._zod,"optin",()=>t.innerType._zod.optin),$i(i._zod,"optout",()=>t.innerType._zod.optout),$i(i._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${PB(e.source)}|null)$`):void 0}),$i(i._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),i._zod.parse=(e,n)=>e.value===null?e:t.innerType._zod.run(e,n)}),nwt=_t("$ZodDefault",(i,t)=>{Dn.init(i,t),i._zod.optin="optional",$i(i._zod,"values",()=>t.innerType._zod.values),i._zod.parse=(e,n)=>{if(n.direction==="backward")return t.innerType._zod.run(e,n);if(e.value===void 0)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(s=>AV(s,t)):AV(r,t)}});function AV(i,t){return i.value===void 0&&(i.value=t.defaultValue),i}const rwt=_t("$ZodPrefault",(i,t)=>{Dn.init(i,t),i._zod.optin="optional",$i(i._zod,"values",()=>t.innerType._zod.values),i._zod.parse=(e,n)=>(n.direction==="backward"||e.value===void 0&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),swt=_t("$ZodNonOptional",(i,t)=>{Dn.init(i,t),$i(i._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(n=>n!==void 0)):void 0}),i._zod.parse=(e,n)=>{const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(s=>kV(s,i)):kV(r,i)}});function kV(i,t){return!i.issues.length&&i.value===void 0&&i.issues.push({code:"invalid_type",expected:"nonoptional",input:i.value,inst:t}),i}const awt=_t("$ZodCatch",(i,t)=>{Dn.init(i,t),$i(i._zod,"optin",()=>t.innerType._zod.optin),$i(i._zod,"optout",()=>t.innerType._zod.optout),$i(i._zod,"values",()=>t.innerType._zod.values),i._zod.parse=(e,n)=>{if(n.direction==="backward")return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(s=>(e.value=s.value,s.issues.length&&(e.value=t.catchValue({...e,error:{issues:s.issues.map(a=>Gd(a,n,Ud()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(s=>Gd(s,n,Ud()))},input:e.value}),e.issues=[]),e)}}),owt=_t("$ZodPipe",(i,t)=>{Dn.init(i,t),$i(i._zod,"values",()=>t.in._zod.values),$i(i._zod,"optin",()=>t.in._zod.optin),$i(i._zod,"optout",()=>t.out._zod.optout),$i(i._zod,"propValues",()=>t.in._zod.propValues),i._zod.parse=(e,n)=>{if(n.direction==="backward"){const s=t.out._zod.run(e,n);return s instanceof Promise?s.then(a=>Gx(a,t.in,n)):Gx(s,t.in,n)}const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(s=>Gx(s,t.out,n)):Gx(r,t.out,n)}});function Gx(i,t,e){return i.issues.length?(i.aborted=!0,i):t._zod.run({value:i.value,issues:i.issues},e)}const lwt=_t("$ZodReadonly",(i,t)=>{Dn.init(i,t),$i(i._zod,"propValues",()=>t.innerType._zod.propValues),$i(i._zod,"values",()=>t.innerType._zod.values),$i(i._zod,"optin",()=>t.innerType?._zod?.optin),$i(i._zod,"optout",()=>t.innerType?._zod?.optout),i._zod.parse=(e,n)=>{if(n.direction==="backward")return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(CV):CV(r)}});function CV(i){return i.value=Object.freeze(i.value),i}const uwt=_t("$ZodCustom",(i,t)=>{ta.init(i,t),Dn.init(i,t),i._zod.parse=(e,n)=>e,i._zod.check=e=>{const n=e.value,r=t.fn(n);if(r instanceof Promise)return r.then(s=>MV(s,e,n,i));MV(r,e,n,i)}});function MV(i,t,e,n){if(!i){const r={code:"custom",input:e,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(r.params=n._zod.def.params),t.issues.push(Ky(r))}}var TV;class cwt{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...e){const n=e[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const e=this._map.get(t);return e&&typeof e=="object"&&"id"in e&&this._idmap.delete(e.id),this._map.delete(t),this}get(t){const e=t._zod.parent;if(e){const n={...this.get(e)??{}};delete n.id;const r={...n,...this._map.get(t)};return Object.keys(r).length?r:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function hwt(){return new cwt}(TV=globalThis).__zod_globalRegistry??(TV.__zod_globalRegistry=hwt());const Yx=globalThis.__zod_globalRegistry;function dwt(i,t){return new i({type:"string",...de(t)})}function fwt(i,t){return new i({type:"string",format:"email",check:"string_format",abort:!1,...de(t)})}function PV(i,t){return new i({type:"string",format:"guid",check:"string_format",abort:!1,...de(t)})}function pwt(i,t){return new i({type:"string",format:"uuid",check:"string_format",abort:!1,...de(t)})}function gwt(i,t){return new i({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...de(t)})}function mwt(i,t){return new i({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...de(t)})}function _wt(i,t){return new i({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...de(t)})}function vwt(i,t){return new i({type:"string",format:"url",check:"string_format",abort:!1,...de(t)})}function ywt(i,t){return new i({type:"string",format:"emoji",check:"string_format",abort:!1,...de(t)})}function bwt(i,t){return new i({type:"string",format:"nanoid",check:"string_format",abort:!1,...de(t)})}function xwt(i,t){return new i({type:"string",format:"cuid",check:"string_format",abort:!1,...de(t)})}function Swt(i,t){return new i({type:"string",format:"cuid2",check:"string_format",abort:!1,...de(t)})}function wwt(i,t){return new i({type:"string",format:"ulid",check:"string_format",abort:!1,...de(t)})}function Awt(i,t){return new i({type:"string",format:"xid",check:"string_format",abort:!1,...de(t)})}function kwt(i,t){return new i({type:"string",format:"ksuid",check:"string_format",abort:!1,...de(t)})}function Cwt(i,t){return new i({type:"string",format:"ipv4",check:"string_format",abort:!1,...de(t)})}function Mwt(i,t){return new i({type:"string",format:"ipv6",check:"string_format",abort:!1,...de(t)})}function Twt(i,t){return new i({type:"string",format:"cidrv4",check:"string_format",abort:!1,...de(t)})}function Pwt(i,t){return new i({type:"string",format:"cidrv6",check:"string_format",abort:!1,...de(t)})}function Ewt(i,t){return new i({type:"string",format:"base64",check:"string_format",abort:!1,...de(t)})}function Rwt(i,t){return new i({type:"string",format:"base64url",check:"string_format",abort:!1,...de(t)})}function Owt(i,t){return new i({type:"string",format:"e164",check:"string_format",abort:!1,...de(t)})}function Dwt(i,t){return new i({type:"string",format:"jwt",check:"string_format",abort:!1,...de(t)})}function Iwt(i,t){return new i({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...de(t)})}function Lwt(i,t){return new i({type:"string",format:"date",check:"string_format",...de(t)})}function Bwt(i,t){return new i({type:"string",format:"time",check:"string_format",precision:null,...de(t)})}function Fwt(i,t){return new i({type:"string",format:"duration",check:"string_format",...de(t)})}function zwt(i,t){return new i({type:"number",checks:[],...de(t)})}function Nwt(i,t){return new i({type:"number",check:"number_format",abort:!1,format:"safeint",...de(t)})}function jwt(i,t){return new i({type:"boolean",...de(t)})}function Hwt(i){return new i({type:"any"})}function Vwt(i){return new i({type:"unknown"})}function Wwt(i,t){return new i({type:"never",...de(t)})}function EV(i,t){return new CZ({check:"less_than",...de(t),value:i,inclusive:!1})}function eE(i,t){return new CZ({check:"less_than",...de(t),value:i,inclusive:!0})}function RV(i,t){return new MZ({check:"greater_than",...de(t),value:i,inclusive:!1})}function iE(i,t){return new MZ({check:"greater_than",...de(t),value:i,inclusive:!0})}function OV(i,t){return new r1t({check:"multiple_of",...de(t),value:i})}function OZ(i,t){return new a1t({check:"max_length",...de(t),maximum:i})}function mw(i,t){return new o1t({check:"min_length",...de(t),minimum:i})}function DZ(i,t){return new l1t({check:"length_equals",...de(t),length:i})}function $wt(i,t){return new u1t({check:"string_format",format:"regex",...de(t),pattern:i})}function Uwt(i){return new c1t({check:"string_format",format:"lowercase",...de(i)})}function Gwt(i){return new h1t({check:"string_format",format:"uppercase",...de(i)})}function Ywt(i,t){return new d1t({check:"string_format",format:"includes",...de(t),includes:i})}function Xwt(i,t){return new f1t({check:"string_format",format:"starts_with",...de(t),prefix:i})}function Kwt(i,t){return new p1t({check:"string_format",format:"ends_with",...de(t),suffix:i})}function Em(i){return new g1t({check:"overwrite",tx:i})}function qwt(i){return Em(t=>t.normalize(i))}function Zwt(){return Em(i=>i.trim())}function Qwt(){return Em(i=>i.toLowerCase())}function Jwt(){return Em(i=>i.toUpperCase())}function tAt(){return Em(i=>aSt(i))}function eAt(i,t,e){return new i({type:"array",element:t,...de(e)})}function iAt(i,t,e){return new i({type:"custom",check:"custom",fn:t,...de(e)})}function nAt(i){const t=rAt(e=>(e.addIssue=n=>{if(typeof n=="string")e.issues.push(Ky(n,e.value,t._zod.def));else{const r=n;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=e.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),e.issues.push(Ky(r))}},i(e.value,e)));return t}function rAt(i,t){const e=new ta({check:"custom",...de(t)});return e._zod.check=i,e}function DV(i,t){try{var e=i()}catch(n){return t(n)}return e&&e.then?e.then(void 0,t):e}function sAt(i,t){for(var e={};i.length;){var n=i[0],r=n.code,s=n.message,a=n.path.join(".");if(!e[a])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];e[a]={message:o.message,type:o.code}}else e[a]={message:s,type:r};if("unionErrors"in n&&n.unionErrors.forEach(function(c){return c.errors.forEach(function(h){return i.push(h)})}),t){var l=e[a].types,u=l&&l[n.code];e[a]=xB(a,t,e,r,u?[].concat(u,n.message):n.message)}i.shift()}return e}function aAt(i,t){for(var e={};i.length;){var n=i[0],r=n.code,s=n.message,a=n.path.join(".");if(!e[a])if(n.code==="invalid_union"&&n.errors.length>0){var o=n.errors[0][0];e[a]={message:o.message,type:o.code}}else e[a]={message:s,type:r};if(n.code==="invalid_union"&&n.errors.forEach(function(c){return c.forEach(function(h){return i.push(h)})}),t){var l=e[a].types,u=l&&l[n.code];e[a]=xB(a,t,e,r,u?[].concat(u,n.message):n.message)}i.shift()}return e}function Vte(i,t,e){if(e===void 0&&(e={}),function(n){return"_def"in n&&typeof n._def=="object"&&"typeName"in n._def}(i))return function(n,r,s){try{return Promise.resolve(DV(function(){return Promise.resolve(i[e.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(a){return s.shouldUseNativeValidation&&jO({},s),{errors:{},values:e.raw?Object.assign({},n):a}})},function(a){if(function(o){return Array.isArray(o?.issues)}(a))return{values:{},errors:gV(sAt(a.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw a}))}catch(a){return Promise.reject(a)}};if(function(n){return"_zod"in n&&typeof n._zod=="object"}(i))return function(n,r,s){try{return Promise.resolve(DV(function(){return Promise.resolve((e.mode==="sync"?bSt:xSt)(i,n,t)).then(function(a){return s.shouldUseNativeValidation&&jO({},s),{errors:{},values:e.raw?Object.assign({},n):a}})},function(a){if(function(o){return o instanceof RB}(a))return{values:{},errors:gV(aAt(a.issues,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw a}))}catch(a){return Promise.reject(a)}};throw new Error("Invalid input: not a Zod schema")}const oAt=_t("ZodISODateTime",(i,t)=>{P1t.init(i,t),yn.init(i,t)});function lAt(i){return Iwt(oAt,i)}const uAt=_t("ZodISODate",(i,t)=>{E1t.init(i,t),yn.init(i,t)});function cAt(i){return Lwt(uAt,i)}const hAt=_t("ZodISOTime",(i,t)=>{R1t.init(i,t),yn.init(i,t)});function dAt(i){return Bwt(hAt,i)}const fAt=_t("ZodISODuration",(i,t)=>{O1t.init(i,t),yn.init(i,t)});function pAt(i){return Fwt(fAt,i)}const gAt=(i,t)=>{RB.init(i,t),i.name="ZodError",Object.defineProperties(i,{format:{value:e=>ySt(i,e)},flatten:{value:e=>vSt(i,e)},addIssue:{value:e=>{i.issues.push(e),i.message=JSON.stringify(i.issues,HO,2)}},addIssues:{value:e=>{i.issues.push(...e),i.message=JSON.stringify(i.issues,HO,2)}},isEmpty:{get(){return i.issues.length===0}}})},po=_t("ZodError",gAt,{Parent:Error}),mAt=YC(po),_At=XC(po),vAt=KC(po),yAt=qC(po),bAt=ASt(po),xAt=kSt(po),SAt=CSt(po),wAt=MSt(po),AAt=TSt(po),kAt=PSt(po),CAt=ESt(po),MAt=RSt(po),Wn=_t("ZodType",(i,t)=>(Dn.init(i,t),i.def=t,i.type=t.type,Object.defineProperty(i,"_def",{value:t}),i.check=(...e)=>i.clone(ff(t,{checks:[...t.checks??[],...e.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),i.clone=(e,n)=>wh(i,e,n),i.brand=()=>i,i.register=(e,n)=>(e.add(i,n),i),i.parse=(e,n)=>mAt(i,e,n,{callee:i.parse}),i.safeParse=(e,n)=>vAt(i,e,n),i.parseAsync=async(e,n)=>_At(i,e,n,{callee:i.parseAsync}),i.safeParseAsync=async(e,n)=>yAt(i,e,n),i.spa=i.safeParseAsync,i.encode=(e,n)=>bAt(i,e,n),i.decode=(e,n)=>xAt(i,e,n),i.encodeAsync=async(e,n)=>SAt(i,e,n),i.decodeAsync=async(e,n)=>wAt(i,e,n),i.safeEncode=(e,n)=>AAt(i,e,n),i.safeDecode=(e,n)=>kAt(i,e,n),i.safeEncodeAsync=async(e,n)=>CAt(i,e,n),i.safeDecodeAsync=async(e,n)=>MAt(i,e,n),i.refine=(e,n)=>i.check(bkt(e,n)),i.superRefine=e=>i.check(xkt(e)),i.overwrite=e=>i.check(Em(e)),i.optional=()=>FV(i),i.nullable=()=>zV(i),i.nullish=()=>FV(zV(i)),i.nonoptional=e=>fkt(i,e),i.array=()=>JAt(i),i.or=e=>ikt([i,e]),i.and=e=>rkt(i,e),i.transform=e=>NV(i,okt(e)),i.default=e=>ckt(i,e),i.prefault=e=>dkt(i,e),i.catch=e=>gkt(i,e),i.pipe=e=>NV(i,e),i.readonly=()=>vkt(i),i.describe=e=>{const n=i.clone();return Yx.add(n,{description:e}),n},Object.defineProperty(i,"description",{get(){return Yx.get(i)?.description},configurable:!0}),i.meta=(...e)=>{if(e.length===0)return Yx.get(i);const n=i.clone();return Yx.add(n,e[0]),n},i.isOptional=()=>i.safeParse(void 0).success,i.isNullable=()=>i.safeParse(null).success,i)),IZ=_t("_ZodString",(i,t)=>{OB.init(i,t),Wn.init(i,t);const e=i._zod.bag;i.format=e.format??null,i.minLength=e.minimum??null,i.maxLength=e.maximum??null,i.regex=(...n)=>i.check($wt(...n)),i.includes=(...n)=>i.check(Ywt(...n)),i.startsWith=(...n)=>i.check(Xwt(...n)),i.endsWith=(...n)=>i.check(Kwt(...n)),i.min=(...n)=>i.check(mw(...n)),i.max=(...n)=>i.check(OZ(...n)),i.length=(...n)=>i.check(DZ(...n)),i.nonempty=(...n)=>i.check(mw(1,...n)),i.lowercase=n=>i.check(Uwt(n)),i.uppercase=n=>i.check(Gwt(n)),i.trim=()=>i.check(Zwt()),i.normalize=(...n)=>i.check(qwt(...n)),i.toLowerCase=()=>i.check(Qwt()),i.toUpperCase=()=>i.check(Jwt()),i.slugify=()=>i.check(tAt())}),TAt=_t("ZodString",(i,t)=>{OB.init(i,t),IZ.init(i,t),i.email=e=>i.check(fwt(PAt,e)),i.url=e=>i.check(vwt(EAt,e)),i.jwt=e=>i.check(Dwt(UAt,e)),i.emoji=e=>i.check(ywt(RAt,e)),i.guid=e=>i.check(PV(IV,e)),i.uuid=e=>i.check(pwt(Xx,e)),i.uuidv4=e=>i.check(gwt(Xx,e)),i.uuidv6=e=>i.check(mwt(Xx,e)),i.uuidv7=e=>i.check(_wt(Xx,e)),i.nanoid=e=>i.check(bwt(OAt,e)),i.guid=e=>i.check(PV(IV,e)),i.cuid=e=>i.check(xwt(DAt,e)),i.cuid2=e=>i.check(Swt(IAt,e)),i.ulid=e=>i.check(wwt(LAt,e)),i.base64=e=>i.check(Ewt(VAt,e)),i.base64url=e=>i.check(Rwt(WAt,e)),i.xid=e=>i.check(Awt(BAt,e)),i.ksuid=e=>i.check(kwt(FAt,e)),i.ipv4=e=>i.check(Cwt(zAt,e)),i.ipv6=e=>i.check(Mwt(NAt,e)),i.cidrv4=e=>i.check(Twt(jAt,e)),i.cidrv6=e=>i.check(Pwt(HAt,e)),i.e164=e=>i.check(Owt($At,e)),i.datetime=e=>i.check(lAt(e)),i.date=e=>i.check(cAt(e)),i.time=e=>i.check(dAt(e)),i.duration=e=>i.check(pAt(e))});function Wte(i){return dwt(TAt,i)}const yn=_t("ZodStringFormat",(i,t)=>{an.init(i,t),IZ.init(i,t)}),PAt=_t("ZodEmail",(i,t)=>{b1t.init(i,t),yn.init(i,t)}),IV=_t("ZodGUID",(i,t)=>{v1t.init(i,t),yn.init(i,t)}),Xx=_t("ZodUUID",(i,t)=>{y1t.init(i,t),yn.init(i,t)}),EAt=_t("ZodURL",(i,t)=>{x1t.init(i,t),yn.init(i,t)}),RAt=_t("ZodEmoji",(i,t)=>{S1t.init(i,t),yn.init(i,t)}),OAt=_t("ZodNanoID",(i,t)=>{w1t.init(i,t),yn.init(i,t)}),DAt=_t("ZodCUID",(i,t)=>{A1t.init(i,t),yn.init(i,t)}),IAt=_t("ZodCUID2",(i,t)=>{k1t.init(i,t),yn.init(i,t)}),LAt=_t("ZodULID",(i,t)=>{C1t.init(i,t),yn.init(i,t)}),BAt=_t("ZodXID",(i,t)=>{M1t.init(i,t),yn.init(i,t)}),FAt=_t("ZodKSUID",(i,t)=>{T1t.init(i,t),yn.init(i,t)}),zAt=_t("ZodIPv4",(i,t)=>{D1t.init(i,t),yn.init(i,t)}),NAt=_t("ZodIPv6",(i,t)=>{I1t.init(i,t),yn.init(i,t)}),jAt=_t("ZodCIDRv4",(i,t)=>{L1t.init(i,t),yn.init(i,t)}),HAt=_t("ZodCIDRv6",(i,t)=>{B1t.init(i,t),yn.init(i,t)}),VAt=_t("ZodBase64",(i,t)=>{F1t.init(i,t),yn.init(i,t)}),WAt=_t("ZodBase64URL",(i,t)=>{N1t.init(i,t),yn.init(i,t)}),$At=_t("ZodE164",(i,t)=>{j1t.init(i,t),yn.init(i,t)}),UAt=_t("ZodJWT",(i,t)=>{V1t.init(i,t),yn.init(i,t)}),LZ=_t("ZodNumber",(i,t)=>{PZ.init(i,t),Wn.init(i,t),i.gt=(n,r)=>i.check(RV(n,r)),i.gte=(n,r)=>i.check(iE(n,r)),i.min=(n,r)=>i.check(iE(n,r)),i.lt=(n,r)=>i.check(EV(n,r)),i.lte=(n,r)=>i.check(eE(n,r)),i.max=(n,r)=>i.check(eE(n,r)),i.int=n=>i.check(LV(n)),i.safe=n=>i.check(LV(n)),i.positive=n=>i.check(RV(0,n)),i.nonnegative=n=>i.check(iE(0,n)),i.negative=n=>i.check(EV(0,n)),i.nonpositive=n=>i.check(eE(0,n)),i.multipleOf=(n,r)=>i.check(OV(n,r)),i.step=(n,r)=>i.check(OV(n,r)),i.finite=()=>i;const e=i._zod.bag;i.minValue=Math.max(e.minimum??Number.NEGATIVE_INFINITY,e.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,i.maxValue=Math.min(e.maximum??Number.POSITIVE_INFINITY,e.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,i.isInt=(e.format??"").includes("int")||Number.isSafeInteger(e.multipleOf??.5),i.isFinite=!0,i.format=e.format??null});function $te(i){return zwt(LZ,i)}const GAt=_t("ZodNumberFormat",(i,t)=>{W1t.init(i,t),LZ.init(i,t)});function LV(i){return Nwt(GAt,i)}const YAt=_t("ZodBoolean",(i,t)=>{$1t.init(i,t),Wn.init(i,t)});function Ute(i){return jwt(YAt,i)}const XAt=_t("ZodAny",(i,t)=>{U1t.init(i,t),Wn.init(i,t)});function Gte(){return Hwt(XAt)}const KAt=_t("ZodUnknown",(i,t)=>{G1t.init(i,t),Wn.init(i,t)});function BV(){return Vwt(KAt)}const qAt=_t("ZodNever",(i,t)=>{Y1t.init(i,t),Wn.init(i,t)});function ZAt(i){return Wwt(qAt,i)}const QAt=_t("ZodArray",(i,t)=>{X1t.init(i,t),Wn.init(i,t),i.element=t.element,i.min=(e,n)=>i.check(mw(e,n)),i.nonempty=e=>i.check(mw(1,e)),i.max=(e,n)=>i.check(OZ(e,n)),i.length=(e,n)=>i.check(DZ(e,n)),i.unwrap=()=>i.element});function JAt(i,t){return eAt(QAt,i,t)}const tkt=_t("ZodObject",(i,t)=>{q1t.init(i,t),Wn.init(i,t),$i(i,"shape",()=>t.shape),i.keyof=()=>skt(Object.keys(i._zod.def.shape)),i.catchall=e=>i.clone({...i._zod.def,catchall:e}),i.passthrough=()=>i.clone({...i._zod.def,catchall:BV()}),i.loose=()=>i.clone({...i._zod.def,catchall:BV()}),i.strict=()=>i.clone({...i._zod.def,catchall:ZAt()}),i.strip=()=>i.clone({...i._zod.def,catchall:void 0}),i.extend=e=>fSt(i,e),i.safeExtend=e=>pSt(i,e),i.merge=e=>gSt(i,e),i.pick=e=>hSt(i,e),i.omit=e=>dSt(i,e),i.partial=(...e)=>mSt(BZ,i,e[0]),i.required=(...e)=>_St(FZ,i,e[0])});function Yte(i,t){const e={type:"object",shape:i??{},...de(t)};return new tkt(e)}const ekt=_t("ZodUnion",(i,t)=>{Z1t.init(i,t),Wn.init(i,t),i.options=t.options});function ikt(i,t){return new ekt({type:"union",options:i,...de(t)})}const nkt=_t("ZodIntersection",(i,t)=>{Q1t.init(i,t),Wn.init(i,t)});function rkt(i,t){return new nkt({type:"intersection",left:i,right:t})}const WO=_t("ZodEnum",(i,t)=>{J1t.init(i,t),Wn.init(i,t),i.enum=t.entries,i.options=Object.values(t.entries);const e=new Set(Object.keys(t.entries));i.extract=(n,r)=>{const s={};for(const a of n)if(e.has(a))s[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new WO({...t,checks:[],...de(r),entries:s})},i.exclude=(n,r)=>{const s={...t.entries};for(const a of n)if(e.has(a))delete s[a];else throw new Error(`Key ${a} not found in enum`);return new WO({...t,checks:[],...de(r),entries:s})}});function skt(i,t){const e=Array.isArray(i)?Object.fromEntries(i.map(n=>[n,n])):i;return new WO({type:"enum",entries:e,...de(t)})}const akt=_t("ZodTransform",(i,t)=>{twt.init(i,t),Wn.init(i,t),i._zod.parse=(e,n)=>{if(n.direction==="backward")throw new mZ(i.constructor.name);e.addIssue=s=>{if(typeof s=="string")e.issues.push(Ky(s,e.value,t));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=e.value),a.inst??(a.inst=i),e.issues.push(Ky(a))}};const r=t.transform(e.value,e);return r instanceof Promise?r.then(s=>(e.value=s,e)):(e.value=r,e)}});function okt(i){return new akt({type:"transform",transform:i})}const BZ=_t("ZodOptional",(i,t)=>{ewt.init(i,t),Wn.init(i,t),i.unwrap=()=>i._zod.def.innerType});function FV(i){return new BZ({type:"optional",innerType:i})}const lkt=_t("ZodNullable",(i,t)=>{iwt.init(i,t),Wn.init(i,t),i.unwrap=()=>i._zod.def.innerType});function zV(i){return new lkt({type:"nullable",innerType:i})}const ukt=_t("ZodDefault",(i,t)=>{nwt.init(i,t),Wn.init(i,t),i.unwrap=()=>i._zod.def.innerType,i.removeDefault=i.unwrap});function ckt(i,t){return new ukt({type:"default",innerType:i,get defaultValue(){return typeof t=="function"?t():yZ(t)}})}const hkt=_t("ZodPrefault",(i,t)=>{rwt.init(i,t),Wn.init(i,t),i.unwrap=()=>i._zod.def.innerType});function dkt(i,t){return new hkt({type:"prefault",innerType:i,get defaultValue(){return typeof t=="function"?t():yZ(t)}})}const FZ=_t("ZodNonOptional",(i,t)=>{swt.init(i,t),Wn.init(i,t),i.unwrap=()=>i._zod.def.innerType});function fkt(i,t){return new FZ({type:"nonoptional",innerType:i,...de(t)})}const pkt=_t("ZodCatch",(i,t)=>{awt.init(i,t),Wn.init(i,t),i.unwrap=()=>i._zod.def.innerType,i.removeCatch=i.unwrap});function gkt(i,t){return new pkt({type:"catch",innerType:i,catchValue:typeof t=="function"?t:()=>t})}const mkt=_t("ZodPipe",(i,t)=>{owt.init(i,t),Wn.init(i,t),i.in=t.in,i.out=t.out});function NV(i,t){return new mkt({type:"pipe",in:i,out:t})}const _kt=_t("ZodReadonly",(i,t)=>{lwt.init(i,t),Wn.init(i,t),i.unwrap=()=>i._zod.def.innerType});function vkt(i){return new _kt({type:"readonly",innerType:i})}const ykt=_t("ZodCustom",(i,t)=>{uwt.init(i,t),Wn.init(i,t)});function bkt(i,t={}){return iAt(ykt,i,t)}function xkt(i){return nAt(i)}var QC="Switch",[Skt]=rs(QC),[wkt,Akt]=Skt(QC),zZ=E.forwardRef((i,t)=>{const{__scopeSwitch:e,name:n,checked:r,defaultChecked:s,required:a,disabled:o,value:l="on",onCheckedChange:u,form:c,...h}=i,[d,f]=E.useState(null),p=De(t,y=>f(y)),g=E.useRef(!1),m=d?c||!!d.closest("form"):!0,[_,v]=oo({prop:r,defaultProp:s??!1,onChange:u,caller:QC});return V.jsxs(wkt,{scope:e,checked:_,disabled:o,children:[V.jsx(ue.button,{type:"button",role:"switch","aria-checked":_,"aria-required":a,"data-state":VZ(_),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:p,onClick:Et(i.onClick,y=>{v(b=>!b),m&&(g.current=y.isPropagationStopped(),g.current||y.stopPropagation())})}),m&&V.jsx(HZ,{control:d,bubbles:!g.current,name:n,value:l,checked:_,required:a,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});zZ.displayName=QC;var NZ="SwitchThumb",jZ=E.forwardRef((i,t)=>{const{__scopeSwitch:e,...n}=i,r=Akt(NZ,e);return V.jsx(ue.span,{"data-state":VZ(r.checked),"data-disabled":r.disabled?"":void 0,...n,ref:t})});jZ.displayName=NZ;var kkt="SwitchBubbleInput",HZ=E.forwardRef(({__scopeSwitch:i,control:t,checked:e,bubbles:n=!0,...r},s)=>{const a=E.useRef(null),o=De(a,s),l=MC(e),u=_C(t);return E.useEffect(()=>{const c=a.current;if(!c)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==e&&f){const p=new Event("click",{bubbles:n});f.call(c,e),c.dispatchEvent(p)}},[l,e,n]),V.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...r,tabIndex:-1,ref:o,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});HZ.displayName=kkt;function VZ(i){return i?"checked":"unchecked"}var Xte=zZ,Kte=jZ,WZ="AlertDialog",[Ckt]=rs(WZ,[IK]),sc=IK(),$Z=i=>{const{__scopeAlertDialog:t,...e}=i,n=sc(t);return V.jsx(qK,{...n,...e,modal:!0})};$Z.displayName=WZ;var Mkt="AlertDialogTrigger",Tkt=E.forwardRef((i,t)=>{const{__scopeAlertDialog:e,...n}=i,r=sc(e);return V.jsx(a0t,{...r,...n,ref:t})});Tkt.displayName=Mkt;var Pkt="AlertDialogPortal",UZ=i=>{const{__scopeAlertDialog:t,...e}=i,n=sc(t);return V.jsx(ZK,{...n,...e})};UZ.displayName=Pkt;var Ekt="AlertDialogOverlay",GZ=E.forwardRef((i,t)=>{const{__scopeAlertDialog:e,...n}=i,r=sc(e);return V.jsx(QK,{...r,...n,ref:t})});GZ.displayName=Ekt;var og="AlertDialogContent",[Rkt,Okt]=Ckt(og),Dkt=A9("AlertDialogContent"),YZ=E.forwardRef((i,t)=>{const{__scopeAlertDialog:e,children:n,...r}=i,s=sc(e),a=E.useRef(null),o=De(t,a),l=E.useRef(null);return V.jsx(i0t,{contentName:og,titleName:XZ,docsSlug:"alert-dialog",children:V.jsx(Rkt,{scope:e,cancelRef:l,children:V.jsxs(JK,{role:"alertdialog",...s,...r,ref:o,onOpenAutoFocus:Et(r.onOpenAutoFocus,u=>{u.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[V.jsx(Dkt,{children:n}),V.jsx(Lkt,{contentRef:a})]})})})});YZ.displayName=og;var XZ="AlertDialogTitle",KZ=E.forwardRef((i,t)=>{const{__scopeAlertDialog:e,...n}=i,r=sc(e);return V.jsx(tq,{...r,...n,ref:t})});KZ.displayName=XZ;var qZ="AlertDialogDescription",ZZ=E.forwardRef((i,t)=>{const{__scopeAlertDialog:e,...n}=i,r=sc(e);return V.jsx(eq,{...r,...n,ref:t})});ZZ.displayName=qZ;var Ikt="AlertDialogAction",QZ=E.forwardRef((i,t)=>{const{__scopeAlertDialog:e,...n}=i,r=sc(e);return V.jsx(iq,{...r,...n,ref:t})});QZ.displayName=Ikt;var JZ="AlertDialogCancel",tQ=E.forwardRef((i,t)=>{const{__scopeAlertDialog:e,...n}=i,{cancelRef:r}=Okt(JZ,e),s=sc(e),a=De(t,r);return V.jsx(iq,{...s,...n,ref:a})});tQ.displayName=JZ;var Lkt=({contentRef:i})=>{const t=`\`${og}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${og}\` by passing a \`${qZ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${og}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return E.useEffect(()=>{document.getElementById(i.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,i]),null},qte=$Z,Zte=UZ,Qte=GZ,Jte=YZ,tee=QZ,eee=tQ,iee=KZ,nee=ZZ;function Bkt(i,t,e="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:i,timeZoneName:e}).format(t).split(/\s/g).slice(2).join(" ")}const nE={},$_={};function ad(i,t){try{const n=(nE[i]||(nE[i]=new Intl.DateTimeFormat("en-US",{timeZone:i,timeZoneName:"longOffset"}).format))(t).split("GMT")[1];return n in $_?$_[n]:jV(n,n.split(":"))}catch{if(i in $_)return $_[i];const e=i?.match(Fkt);return e?jV(i,e.slice(1)):NaN}}const Fkt=/([+-]\d\d):?(\d\d)?/;function jV(i,t){const e=+(t[0]||0),n=+(t[1]||0),r=+(t[2]||0)/60;return $_[i]=e*60+n>0?e*60+n+r:e*60-n-r}class Rl extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(ad(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),eQ(this),$O(this)):this.setTime(Date.now())}static tz(t,...e){return e.length?new Rl(...e,t):new Rl(Date.now(),t)}withTimeZone(t){return new Rl(+this,t)}getTimezoneOffset(){const t=-ad(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),$O(this),+this}[Symbol.for("constructDateFrom")](t){return new Rl(+new Date(t),this.timeZone)}}const HV=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(i=>{if(!HV.test(i))return;const t=i.replace(HV,"$1UTC");Rl.prototype[t]&&(i.startsWith("get")?Rl.prototype[i]=function(){return this.internal[t]()}:(Rl.prototype[i]=function(){return Date.prototype[t].apply(this.internal,arguments),zkt(this),+this},Rl.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),$O(this),+this}))});function $O(i){i.internal.setTime(+i),i.internal.setUTCSeconds(i.internal.getUTCSeconds()-Math.round(-ad(i.timeZone,i)*60))}function zkt(i){Date.prototype.setFullYear.call(i,i.internal.getUTCFullYear(),i.internal.getUTCMonth(),i.internal.getUTCDate()),Date.prototype.setHours.call(i,i.internal.getUTCHours(),i.internal.getUTCMinutes(),i.internal.getUTCSeconds(),i.internal.getUTCMilliseconds()),eQ(i)}function eQ(i){const t=ad(i.timeZone,i),e=t>0?Math.floor(t):Math.ceil(t),n=new Date(+i);n.setUTCHours(n.getUTCHours()-1);const r=-new Date(+i).getTimezoneOffset(),s=-new Date(+n).getTimezoneOffset(),a=r-s,o=Date.prototype.getHours.apply(i)!==i.internal.getUTCHours();a&&o&&i.internal.setUTCMinutes(i.internal.getUTCMinutes()+a);const l=r-e;l&&Date.prototype.setUTCMinutes.call(i,Date.prototype.getUTCMinutes.call(i)+l);const u=new Date(+i);u.setUTCSeconds(0);const c=r>0?u.getSeconds():(u.getSeconds()-60)%60,h=Math.round(-(ad(i.timeZone,i)*60))%60;(h||c)&&(i.internal.setUTCSeconds(i.internal.getUTCSeconds()+h),Date.prototype.setUTCSeconds.call(i,Date.prototype.getUTCSeconds.call(i)+h+c));const d=ad(i.timeZone,i),f=d>0?Math.floor(d):Math.ceil(d),g=-new Date(+i).getTimezoneOffset()-f,m=f!==e,_=g-l;if(m&&_){Date.prototype.setUTCMinutes.call(i,Date.prototype.getUTCMinutes.call(i)+_);const v=ad(i.timeZone,i),y=v>0?Math.floor(v):Math.ceil(v),b=f-y;b&&(i.internal.setUTCMinutes(i.internal.getUTCMinutes()+b),Date.prototype.setUTCMinutes.call(i,Date.prototype.getUTCMinutes.call(i)+b))}}class Mu extends Rl{static tz(t,...e){return e.length?new Mu(...e,t):new Mu(Date.now(),t)}toISOString(){const[t,e,n]=this.tzComponents(),r=`${t}${e}:${n}`;return this.internal.toISOString().slice(0,-1)+r}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,e,n,r]=this.internal.toUTCString().split(" ");return`${t?.slice(0,-1)} ${n} ${e} ${r}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[e,n,r]=this.tzComponents();return`${t} GMT${e}${n}${r} (${Bkt(this.timeZone,this)})`}toLocaleString(t,e){return Date.prototype.toLocaleString.call(this,t,{...e,timeZone:e?.timeZone||this.timeZone})}toLocaleDateString(t,e){return Date.prototype.toLocaleDateString.call(this,t,{...e,timeZone:e?.timeZone||this.timeZone})}toLocaleTimeString(t,e){return Date.prototype.toLocaleTimeString.call(this,t,{...e,timeZone:e?.timeZone||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),e=t>0?"-":"+",n=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),r=String(Math.abs(t)%60).padStart(2,"0");return[e,n,r]}withTimeZone(t){return new Mu(+this,t)}[Symbol.for("constructDateFrom")](t){return new Mu(+new Date(t),this.timeZone)}}const iQ=6048e5,Nkt=864e5,VV=Symbol.for("constructDateFrom");function er(i,t){return typeof i=="function"?i(t):i&&typeof i=="object"&&VV in i?i[VV](t):i instanceof Date?new i.constructor(t):new Date(t)}function Li(i,t){return er(t||i,i)}function nQ(i,t,e){const n=Li(i,e?.in);return isNaN(t)?er(i,NaN):(t&&n.setDate(n.getDate()+t),n)}function rQ(i,t,e){const n=Li(i,e?.in);if(isNaN(t))return er(i,NaN);if(!t)return n;const r=n.getDate(),s=er(i,n.getTime());s.setMonth(n.getMonth()+t+1,0);const a=s.getDate();return r>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}let jkt={};function wb(){return jkt}function zg(i,t){const e=wb(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=Li(i,t?.in),s=r.getDay(),a=(s<n?7:0)+s-n;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function qy(i,t){return zg(i,{...t,weekStartsOn:1})}function sQ(i,t){const e=Li(i,t?.in),n=e.getFullYear(),r=er(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=qy(r),a=er(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=qy(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function WV(i){const t=Li(i),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+i-+e}function Rm(i,...t){const e=er.bind(null,t.find(n=>typeof n=="object"));return t.map(e)}function Zy(i,t){const e=Li(i,t?.in);return e.setHours(0,0,0,0),e}function aQ(i,t,e){const[n,r]=Rm(e?.in,i,t),s=Zy(n),a=Zy(r),o=+s-WV(s),l=+a-WV(a);return Math.round((o-l)/Nkt)}function Hkt(i,t){const e=sQ(i,t),n=er(i,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),qy(n)}function Vkt(i,t,e){return nQ(i,t*7,e)}function Wkt(i,t,e){return rQ(i,t*12,e)}function $kt(i,t){let e,n=t?.in;return i.forEach(r=>{!n&&typeof r=="object"&&(n=er.bind(null,r));const s=Li(r,n);(!e||e<s||isNaN(+s))&&(e=s)}),er(n,e||NaN)}function Ukt(i,t){let e,n=t?.in;return i.forEach(r=>{!n&&typeof r=="object"&&(n=er.bind(null,r));const s=Li(r,n);(!e||e>s||isNaN(+s))&&(e=s)}),er(n,e||NaN)}function Gkt(i,t,e){const[n,r]=Rm(e?.in,i,t);return+Zy(n)==+Zy(r)}function oQ(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function Ykt(i){return!(!oQ(i)&&typeof i!="number"||isNaN(+Li(i)))}function Xkt(i,t,e){const[n,r]=Rm(e?.in,i,t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function Kkt(i,t){const e=Li(i,t?.in),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function lQ(i,t){const[e,n]=Rm(i,t.start,t.end);return{start:e,end:n}}function qkt(i,t){const{start:e,end:n}=lQ(t?.in,i);let r=+e>+n;const s=r?+e:+n,a=r?n:e;a.setHours(0,0,0,0),a.setDate(1);let o=1;const l=[];for(;+a<=s;)l.push(er(e,a)),a.setMonth(a.getMonth()+o);return r?l.reverse():l}function Zkt(i,t){const e=Li(i,t?.in);return e.setDate(1),e.setHours(0,0,0,0),e}function Qkt(i,t){const e=Li(i,t?.in),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function uQ(i,t){const e=Li(i,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function Jkt(i,t){const{start:e,end:n}=lQ(t?.in,i);let r=+e>+n;const s=r?+e:+n,a=r?n:e;a.setHours(0,0,0,0),a.setMonth(0,1);let o=1;const l=[];for(;+a<=s;)l.push(er(e,a)),a.setFullYear(a.getFullYear()+o);return r?l.reverse():l}function cQ(i,t){const e=wb(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=Li(i,t?.in),s=r.getDay(),a=(s<n?-7:0)+6-(s-n);return r.setDate(r.getDate()+a),r.setHours(23,59,59,999),r}function tCt(i,t){return cQ(i,{...t,weekStartsOn:1})}const eCt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iCt=(i,t,e)=>{let n;const r=eCt[i];return typeof r=="string"?n=r:t===1?n=r.one:n=r.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+n:n+" ago":n};function rE(i){return(t={})=>{const e=t.width?String(t.width):i.defaultWidth;return i.formats[e]||i.formats[i.defaultWidth]}}const nCt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rCt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sCt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aCt={date:rE({formats:nCt,defaultWidth:"full"}),time:rE({formats:rCt,defaultWidth:"full"}),dateTime:rE({formats:sCt,defaultWidth:"full"})},oCt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},lCt=(i,t,e,n)=>oCt[i];function y_(i){return(t,e)=>{const n=e?.context?String(e.context):"standalone";let r;if(n==="formatting"&&i.formattingValues){const a=i.defaultFormattingWidth||i.defaultWidth,o=e?.width?String(e.width):a;r=i.formattingValues[o]||i.formattingValues[a]}else{const a=i.defaultWidth,o=e?.width?String(e.width):i.defaultWidth;r=i.values[o]||i.values[a]}const s=i.argumentCallback?i.argumentCallback(t):t;return r[s]}}const uCt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cCt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hCt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dCt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fCt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pCt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gCt=(i,t)=>{const e=Number(i),n=e%100;if(n>20||n<10)switch(n%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},mCt={ordinalNumber:gCt,era:y_({values:uCt,defaultWidth:"wide"}),quarter:y_({values:cCt,defaultWidth:"wide",argumentCallback:i=>i-1}),month:y_({values:hCt,defaultWidth:"wide"}),day:y_({values:dCt,defaultWidth:"wide"}),dayPeriod:y_({values:fCt,defaultWidth:"wide",formattingValues:pCt,defaultFormattingWidth:"wide"})};function b_(i){return(t,e={})=>{const n=e.width,r=n&&i.matchPatterns[n]||i.matchPatterns[i.defaultMatchWidth],s=t.match(r);if(!s)return null;const a=s[0],o=n&&i.parsePatterns[n]||i.parsePatterns[i.defaultParseWidth],l=Array.isArray(o)?vCt(o,h=>h.test(a)):_Ct(o,h=>h.test(a));let u;u=i.valueCallback?i.valueCallback(l):l,u=e.valueCallback?e.valueCallback(u):u;const c=t.slice(a.length);return{value:u,rest:c}}}function _Ct(i,t){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)&&t(i[e]))return e}function vCt(i,t){for(let e=0;e<i.length;e++)if(t(i[e]))return e}function yCt(i){return(t,e={})=>{const n=t.match(i.matchPattern);if(!n)return null;const r=n[0],s=t.match(i.parsePattern);if(!s)return null;let a=i.valueCallback?i.valueCallback(s[0]):s[0];a=e.valueCallback?e.valueCallback(a):a;const o=t.slice(r.length);return{value:a,rest:o}}}const bCt=/^(\d+)(th|st|nd|rd)?/i,xCt=/\d+/i,SCt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wCt={any:[/^b/i,/^(a|c)/i]},ACt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kCt={any:[/1/i,/2/i,/3/i,/4/i]},CCt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},MCt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},TCt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},PCt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ECt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},RCt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},OCt={ordinalNumber:yCt({matchPattern:bCt,parsePattern:xCt,valueCallback:i=>parseInt(i,10)}),era:b_({matchPatterns:SCt,defaultMatchWidth:"wide",parsePatterns:wCt,defaultParseWidth:"any"}),quarter:b_({matchPatterns:ACt,defaultMatchWidth:"wide",parsePatterns:kCt,defaultParseWidth:"any",valueCallback:i=>i+1}),month:b_({matchPatterns:CCt,defaultMatchWidth:"wide",parsePatterns:MCt,defaultParseWidth:"any"}),day:b_({matchPatterns:TCt,defaultMatchWidth:"wide",parsePatterns:PCt,defaultParseWidth:"any"}),dayPeriod:b_({matchPatterns:ECt,defaultMatchWidth:"any",parsePatterns:RCt,defaultParseWidth:"any"})},ip={code:"en-US",formatDistance:iCt,formatLong:aCt,formatRelative:lCt,localize:mCt,match:OCt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function DCt(i,t){const e=Li(i,t?.in);return aQ(e,uQ(e))+1}function hQ(i,t){const e=Li(i,t?.in),n=+qy(e)-+Hkt(e);return Math.round(n/iQ)+1}function dQ(i,t){const e=Li(i,t?.in),n=e.getFullYear(),r=wb(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=er(t?.in||i,0);a.setFullYear(n+1,0,s),a.setHours(0,0,0,0);const o=zg(a,t),l=er(t?.in||i,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const u=zg(l,t);return+e>=+o?n+1:+e>=+u?n:n-1}function ICt(i,t){const e=wb(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,r=dQ(i,t),s=er(t?.in||i,0);return s.setFullYear(r,0,n),s.setHours(0,0,0,0),zg(s,t)}function fQ(i,t){const e=Li(i,t?.in),n=+zg(e,t)-+ICt(e,t);return Math.round(n/iQ)+1}function Ti(i,t){const e=i<0?"-":"",n=Math.abs(i).toString().padStart(t,"0");return e+n}const fc={y(i,t){const e=i.getFullYear(),n=e>0?e:1-e;return Ti(t==="yy"?n%100:n,t.length)},M(i,t){const e=i.getMonth();return t==="M"?String(e+1):Ti(e+1,2)},d(i,t){return Ti(i.getDate(),t.length)},a(i,t){const e=i.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(i,t){return Ti(i.getHours()%12||12,t.length)},H(i,t){return Ti(i.getHours(),t.length)},m(i,t){return Ti(i.getMinutes(),t.length)},s(i,t){return Ti(i.getSeconds(),t.length)},S(i,t){const e=t.length,n=i.getMilliseconds(),r=Math.trunc(n*Math.pow(10,e-3));return Ti(r,t.length)}},Hf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$V={G:function(i,t,e){const n=i.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(n,{width:"abbreviated"});case"GGGGG":return e.era(n,{width:"narrow"});case"GGGG":default:return e.era(n,{width:"wide"})}},y:function(i,t,e){if(t==="yo"){const n=i.getFullYear(),r=n>0?n:1-n;return e.ordinalNumber(r,{unit:"year"})}return fc.y(i,t)},Y:function(i,t,e,n){const r=dQ(i,n),s=r>0?r:1-r;if(t==="YY"){const a=s%100;return Ti(a,2)}return t==="Yo"?e.ordinalNumber(s,{unit:"year"}):Ti(s,t.length)},R:function(i,t){const e=sQ(i);return Ti(e,t.length)},u:function(i,t){const e=i.getFullYear();return Ti(e,t.length)},Q:function(i,t,e){const n=Math.ceil((i.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Ti(n,2);case"Qo":return e.ordinalNumber(n,{unit:"quarter"});case"QQQ":return e.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(n,{width:"wide",context:"formatting"})}},q:function(i,t,e){const n=Math.ceil((i.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Ti(n,2);case"qo":return e.ordinalNumber(n,{unit:"quarter"});case"qqq":return e.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(n,{width:"wide",context:"standalone"})}},M:function(i,t,e){const n=i.getMonth();switch(t){case"M":case"MM":return fc.M(i,t);case"Mo":return e.ordinalNumber(n+1,{unit:"month"});case"MMM":return e.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(n,{width:"wide",context:"formatting"})}},L:function(i,t,e){const n=i.getMonth();switch(t){case"L":return String(n+1);case"LL":return Ti(n+1,2);case"Lo":return e.ordinalNumber(n+1,{unit:"month"});case"LLL":return e.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(n,{width:"wide",context:"standalone"})}},w:function(i,t,e,n){const r=fQ(i,n);return t==="wo"?e.ordinalNumber(r,{unit:"week"}):Ti(r,t.length)},I:function(i,t,e){const n=hQ(i);return t==="Io"?e.ordinalNumber(n,{unit:"week"}):Ti(n,t.length)},d:function(i,t,e){return t==="do"?e.ordinalNumber(i.getDate(),{unit:"date"}):fc.d(i,t)},D:function(i,t,e){const n=DCt(i);return t==="Do"?e.ordinalNumber(n,{unit:"dayOfYear"}):Ti(n,t.length)},E:function(i,t,e){const n=i.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(n,{width:"short",context:"formatting"});case"EEEE":default:return e.day(n,{width:"wide",context:"formatting"})}},e:function(i,t,e,n){const r=i.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Ti(s,2);case"eo":return e.ordinalNumber(s,{unit:"day"});case"eee":return e.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(r,{width:"short",context:"formatting"});case"eeee":default:return e.day(r,{width:"wide",context:"formatting"})}},c:function(i,t,e,n){const r=i.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Ti(s,t.length);case"co":return e.ordinalNumber(s,{unit:"day"});case"ccc":return e.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(r,{width:"narrow",context:"standalone"});case"cccccc":return e.day(r,{width:"short",context:"standalone"});case"cccc":default:return e.day(r,{width:"wide",context:"standalone"})}},i:function(i,t,e){const n=i.getDay(),r=n===0?7:n;switch(t){case"i":return String(r);case"ii":return Ti(r,t.length);case"io":return e.ordinalNumber(r,{unit:"day"});case"iii":return e.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(n,{width:"short",context:"formatting"});case"iiii":default:return e.day(n,{width:"wide",context:"formatting"})}},a:function(i,t,e){const r=i.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(i,t,e){const n=i.getHours();let r;switch(n===12?r=Hf.noon:n===0?r=Hf.midnight:r=n/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(i,t,e){const n=i.getHours();let r;switch(n>=17?r=Hf.evening:n>=12?r=Hf.afternoon:n>=4?r=Hf.morning:r=Hf.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(i,t,e){if(t==="ho"){let n=i.getHours()%12;return n===0&&(n=12),e.ordinalNumber(n,{unit:"hour"})}return fc.h(i,t)},H:function(i,t,e){return t==="Ho"?e.ordinalNumber(i.getHours(),{unit:"hour"}):fc.H(i,t)},K:function(i,t,e){const n=i.getHours()%12;return t==="Ko"?e.ordinalNumber(n,{unit:"hour"}):Ti(n,t.length)},k:function(i,t,e){let n=i.getHours();return n===0&&(n=24),t==="ko"?e.ordinalNumber(n,{unit:"hour"}):Ti(n,t.length)},m:function(i,t,e){return t==="mo"?e.ordinalNumber(i.getMinutes(),{unit:"minute"}):fc.m(i,t)},s:function(i,t,e){return t==="so"?e.ordinalNumber(i.getSeconds(),{unit:"second"}):fc.s(i,t)},S:function(i,t){return fc.S(i,t)},X:function(i,t,e){const n=i.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return GV(n);case"XXXX":case"XX":return Gh(n);case"XXXXX":case"XXX":default:return Gh(n,":")}},x:function(i,t,e){const n=i.getTimezoneOffset();switch(t){case"x":return GV(n);case"xxxx":case"xx":return Gh(n);case"xxxxx":case"xxx":default:return Gh(n,":")}},O:function(i,t,e){const n=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+UV(n,":");case"OOOO":default:return"GMT"+Gh(n,":")}},z:function(i,t,e){const n=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+UV(n,":");case"zzzz":default:return"GMT"+Gh(n,":")}},t:function(i,t,e){const n=Math.trunc(+i/1e3);return Ti(n,t.length)},T:function(i,t,e){return Ti(+i,t.length)}};function UV(i,t=""){const e=i>0?"-":"+",n=Math.abs(i),r=Math.trunc(n/60),s=n%60;return s===0?e+String(r):e+String(r)+t+Ti(s,2)}function GV(i,t){return i%60===0?(i>0?"-":"+")+Ti(Math.abs(i)/60,2):Gh(i,t)}function Gh(i,t=""){const e=i>0?"-":"+",n=Math.abs(i),r=Ti(Math.trunc(n/60),2),s=Ti(n%60,2);return e+r+t+s}const YV=(i,t)=>{switch(i){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},pQ=(i,t)=>{switch(i){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},LCt=(i,t)=>{const e=i.match(/(P+)(p+)?/)||[],n=e[1],r=e[2];if(!r)return YV(i,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",YV(n,t)).replace("{{time}}",pQ(r,t))},BCt={p:pQ,P:LCt},FCt=/^D+$/,zCt=/^Y+$/,NCt=["D","DD","YY","YYYY"];function jCt(i){return FCt.test(i)}function HCt(i){return zCt.test(i)}function VCt(i,t,e){const n=WCt(i,t,e);if(console.warn(n),NCt.includes(i))throw new RangeError(n)}function WCt(i,t,e){const n=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${t}\`) for formatting ${n} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $Ct=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UCt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GCt=/^'([^]*?)'?$/,YCt=/''/g,XCt=/[a-zA-Z]/;function U_(i,t,e){const n=wb(),r=e?.locale??n.locale??ip,s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=Li(i,e?.in);if(!Ykt(o))throw new RangeError("Invalid time value");let l=t.match(UCt).map(c=>{const h=c[0];if(h==="p"||h==="P"){const d=BCt[h];return d(c,r.formatLong)}return c}).join("").match($Ct).map(c=>{if(c==="''")return{isToken:!1,value:"'"};const h=c[0];if(h==="'")return{isToken:!1,value:KCt(c)};if($V[h])return{isToken:!0,value:c};if(h.match(XCt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:c}});r.localize.preprocessor&&(l=r.localize.preprocessor(o,l));const u={firstWeekContainsDate:s,weekStartsOn:a,locale:r};return l.map(c=>{if(!c.isToken)return c.value;const h=c.value;(!e?.useAdditionalWeekYearTokens&&HCt(h)||!e?.useAdditionalDayOfYearTokens&&jCt(h))&&VCt(h,t,String(i));const d=$V[h[0]];return d(o,h,r.localize,u)}).join("")}function KCt(i){const t=i.match(GCt);return t?t[1].replace(YCt,"'"):i}function qCt(i,t){const e=Li(i,t?.in),n=e.getFullYear(),r=e.getMonth(),s=er(e,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function ZCt(i,t){return Li(i,t?.in).getMonth()}function QCt(i,t){return Li(i,t?.in).getFullYear()}function JCt(i,t){return+Li(i)>+Li(t)}function tMt(i,t){return+Li(i)<+Li(t)}function eMt(i,t,e){const[n,r]=Rm(e?.in,i,t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function iMt(i,t,e){const[n,r]=Rm(e?.in,i,t);return n.getFullYear()===r.getFullYear()}function nMt(i,t,e){const n=Li(i,e?.in),r=n.getFullYear(),s=n.getDate(),a=er(i,0);a.setFullYear(r,t,15),a.setHours(0,0,0,0);const o=qCt(a);return n.setMonth(t,Math.min(s,o)),n}function rMt(i,t,e){const n=Li(i,e?.in);return isNaN(+n)?er(i,NaN):(n.setFullYear(t),n)}const XV=5,sMt=4;function aMt(i,t){const e=t.startOfMonth(i),n=e.getDay()>0?e.getDay():7,r=t.addDays(i,-n+1),s=t.addDays(r,XV*7-1);return t.getMonth(i)===t.getMonth(s)?XV:sMt}function gQ(i,t){const e=t.startOfMonth(i),n=e.getDay();return n===1?e:n===0?t.addDays(e,-1*6):t.addDays(e,-1*(n-1))}function oMt(i,t){const e=gQ(i,t),n=aMt(i,t);return t.addDays(e,n*7-1)}const mQ={...ip,labels:{labelDayButton:(i,t,e,n)=>{let r;n&&typeof n.format=="function"?r=n.format.bind(n):r=(a,o)=>U_(a,o,{locale:ip,...e});let s=r(i,"PPPP");return t.today&&(s=`Today, ${s}`),t.selected&&(s=`${s}, selected`),s},labelMonthDropdown:"Choose the Month",labelNext:"Go to the Next Month",labelPrevious:"Go to the Previous Month",labelWeekNumber:i=>`Week ${i}`,labelYearDropdown:"Choose the Year",labelGrid:(i,t,e)=>{let n;return e&&typeof e.format=="function"?n=e.format.bind(e):n=(r,s)=>U_(r,s,{locale:ip,...t}),n(i,"LLLL yyyy")},labelGridcell:(i,t,e,n)=>{let r;n&&typeof n.format=="function"?r=n.format.bind(n):r=(a,o)=>U_(a,o,{locale:ip,...e});let s=r(i,"PPPP");return t?.today&&(s=`Today, ${s}`),s},labelNav:"Navigation bar",labelWeekNumberHeader:"Week Number",labelWeekday:(i,t,e)=>{let n;return e&&typeof e.format=="function"?n=e.format.bind(e):n=(r,s)=>U_(r,s,{locale:ip,...t}),n(i,"cccc")}}};class ba{constructor(t,e){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?Mu.tz(this.options.timeZone):new this.Date,this.newDate=(n,r,s)=>this.overrides?.newDate?this.overrides.newDate(n,r,s):this.options.timeZone?new Mu(n,r,s,this.options.timeZone):new Date(n,r,s),this.addDays=(n,r)=>this.overrides?.addDays?this.overrides.addDays(n,r):nQ(n,r),this.addMonths=(n,r)=>this.overrides?.addMonths?this.overrides.addMonths(n,r):rQ(n,r),this.addWeeks=(n,r)=>this.overrides?.addWeeks?this.overrides.addWeeks(n,r):Vkt(n,r),this.addYears=(n,r)=>this.overrides?.addYears?this.overrides.addYears(n,r):Wkt(n,r),this.differenceInCalendarDays=(n,r)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(n,r):aQ(n,r),this.differenceInCalendarMonths=(n,r)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(n,r):Xkt(n,r),this.eachMonthOfInterval=n=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(n):qkt(n),this.eachYearOfInterval=n=>{const r=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(n):Jkt(n),s=new Set(r.map(o=>this.getYear(o)));if(s.size===r.length)return r;const a=[];return s.forEach(o=>{a.push(new Date(o,0,1))}),a},this.endOfBroadcastWeek=n=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(n):oMt(n,this),this.endOfISOWeek=n=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(n):tCt(n),this.endOfMonth=n=>this.overrides?.endOfMonth?this.overrides.endOfMonth(n):Kkt(n),this.endOfWeek=(n,r)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(n,r):cQ(n,this.options),this.endOfYear=n=>this.overrides?.endOfYear?this.overrides.endOfYear(n):Qkt(n),this.format=(n,r,s)=>{const a=this.overrides?.format?this.overrides.format(n,r,this.options):U_(n,r,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(a):a},this.getISOWeek=n=>this.overrides?.getISOWeek?this.overrides.getISOWeek(n):hQ(n),this.getMonth=(n,r)=>this.overrides?.getMonth?this.overrides.getMonth(n,this.options):ZCt(n,this.options),this.getYear=(n,r)=>this.overrides?.getYear?this.overrides.getYear(n,this.options):QCt(n,this.options),this.getWeek=(n,r)=>this.overrides?.getWeek?this.overrides.getWeek(n,this.options):fQ(n,this.options),this.isAfter=(n,r)=>this.overrides?.isAfter?this.overrides.isAfter(n,r):JCt(n,r),this.isBefore=(n,r)=>this.overrides?.isBefore?this.overrides.isBefore(n,r):tMt(n,r),this.isDate=n=>this.overrides?.isDate?this.overrides.isDate(n):oQ(n),this.isSameDay=(n,r)=>this.overrides?.isSameDay?this.overrides.isSameDay(n,r):Gkt(n,r),this.isSameMonth=(n,r)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(n,r):eMt(n,r),this.isSameYear=(n,r)=>this.overrides?.isSameYear?this.overrides.isSameYear(n,r):iMt(n,r),this.max=n=>this.overrides?.max?this.overrides.max(n):$kt(n),this.min=n=>this.overrides?.min?this.overrides.min(n):Ukt(n),this.setMonth=(n,r)=>this.overrides?.setMonth?this.overrides.setMonth(n,r):nMt(n,r),this.setYear=(n,r)=>this.overrides?.setYear?this.overrides.setYear(n,r):rMt(n,r),this.startOfBroadcastWeek=(n,r)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(n,this):gQ(n,this),this.startOfDay=n=>this.overrides?.startOfDay?this.overrides.startOfDay(n):Zy(n),this.startOfISOWeek=n=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(n):qy(n),this.startOfMonth=n=>this.overrides?.startOfMonth?this.overrides.startOfMonth(n):Zkt(n),this.startOfWeek=(n,r)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(n,this.options):zg(n,this.options),this.startOfYear=n=>this.overrides?.startOfYear?this.overrides.startOfYear(n):uQ(n),this.options={locale:mQ,...t},this.overrides=e}getDigitMap(){const{numerals:t="latn"}=this.options,e=new Intl.NumberFormat("en-US",{numberingSystem:t}),n={};for(let r=0;r<10;r++)n[r.toString()]=e.format(r);return n}replaceDigits(t){const e=this.getDigitMap();return t.replace(/\d/g,n=>e[n]||n)}formatNumber(t){return this.replaceDigits(t.toString())}getMonthYearOrder(){const t=this.options.locale?.code;return t&&ba.yearFirstLocales.has(t)?"year-first":"month-first"}formatMonthYear(t){const{locale:e,timeZone:n,numerals:r}=this.options,s=e?.code;if(s&&ba.yearFirstLocales.has(s))try{return new Intl.DateTimeFormat(s,{month:"long",year:"numeric",timeZone:n,numberingSystem:r}).format(t)}catch{}const a=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(t,a)}}ba.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Zl=new ba;class _Q{constructor(t,e,n=Zl){this.date=t,this.displayMonth=e,this.outside=!!(e&&!n.isSameMonth(t,e)),this.dateLib=n,this.isoDate=n.format(t,"yyyy-MM-dd"),this.displayMonthId=n.format(e,"yyyy-MM"),this.dateMonthId=n.format(t,"yyyy-MM")}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class lMt{constructor(t,e){this.date=t,this.weeks=e}}class uMt{constructor(t,e){this.days=e,this.weekNumber=t}}function cMt(i){return Y.createElement("button",{...i})}function hMt(i){return Y.createElement("span",{...i})}function dMt(i){const{size:t=24,orientation:e="left",className:n}=i;return Y.createElement("svg",{className:n,width:t,height:t,viewBox:"0 0 24 24"},e==="up"&&Y.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),e==="down"&&Y.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),e==="left"&&Y.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),e==="right"&&Y.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function fMt(i){const{day:t,modifiers:e,...n}=i;return Y.createElement("td",{...n})}function pMt(i){const{day:t,modifiers:e,...n}=i,r=Y.useRef(null);return Y.useEffect(()=>{e.focused&&r.current?.focus()},[e.focused]),Y.createElement("button",{ref:r,...n})}var oe;(function(i){i.Root="root",i.Chevron="chevron",i.Day="day",i.DayButton="day_button",i.CaptionLabel="caption_label",i.Dropdowns="dropdowns",i.Dropdown="dropdown",i.DropdownRoot="dropdown_root",i.Footer="footer",i.MonthGrid="month_grid",i.MonthCaption="month_caption",i.MonthsDropdown="months_dropdown",i.Month="month",i.Months="months",i.Nav="nav",i.NextMonthButton="button_next",i.PreviousMonthButton="button_previous",i.Week="week",i.Weeks="weeks",i.Weekday="weekday",i.Weekdays="weekdays",i.WeekNumber="week_number",i.WeekNumberHeader="week_number_header",i.YearsDropdown="years_dropdown"})(oe||(oe={}));var hn;(function(i){i.disabled="disabled",i.hidden="hidden",i.outside="outside",i.focused="focused",i.today="today"})(hn||(hn={}));var zo;(function(i){i.range_end="range_end",i.range_middle="range_middle",i.range_start="range_start",i.selected="selected"})(zo||(zo={}));var la;(function(i){i.weeks_before_enter="weeks_before_enter",i.weeks_before_exit="weeks_before_exit",i.weeks_after_enter="weeks_after_enter",i.weeks_after_exit="weeks_after_exit",i.caption_after_enter="caption_after_enter",i.caption_after_exit="caption_after_exit",i.caption_before_enter="caption_before_enter",i.caption_before_exit="caption_before_exit"})(la||(la={}));function gMt(i){const{options:t,className:e,components:n,classNames:r,...s}=i,a=[r[oe.Dropdown],e].join(" "),o=t?.find(({value:l})=>l===s.value);return Y.createElement("span",{"data-disabled":s.disabled,className:r[oe.DropdownRoot]},Y.createElement(n.Select,{className:a,...s},t?.map(({value:l,label:u,disabled:c})=>Y.createElement(n.Option,{key:l,value:l,disabled:c},u))),Y.createElement("span",{className:r[oe.CaptionLabel],"aria-hidden":!0},o?.label,Y.createElement(n.Chevron,{orientation:"down",size:18,className:r[oe.Chevron]})))}function mMt(i){return Y.createElement("div",{...i})}function _Mt(i){return Y.createElement("div",{...i})}function vMt(i){const{calendarMonth:t,displayIndex:e,...n}=i;return Y.createElement("div",{...n},i.children)}function yMt(i){const{calendarMonth:t,displayIndex:e,...n}=i;return Y.createElement("div",{...n})}function bMt(i){return Y.createElement("table",{...i})}function xMt(i){return Y.createElement("div",{...i})}const vQ=E.createContext(void 0);function Ab(){const i=E.useContext(vQ);if(i===void 0)throw new Error("useDayPicker() must be used within a custom component.");return i}function SMt(i){const{components:t}=Ab();return Y.createElement(t.Dropdown,{...i})}function wMt(i){const{onPreviousClick:t,onNextClick:e,previousMonth:n,nextMonth:r,...s}=i,{components:a,classNames:o,labels:{labelPrevious:l,labelNext:u}}=Ab(),c=E.useCallback(d=>{r&&e?.(d)},[r,e]),h=E.useCallback(d=>{n&&t?.(d)},[n,t]);return Y.createElement("nav",{...s},Y.createElement(a.PreviousMonthButton,{type:"button",className:o[oe.PreviousMonthButton],tabIndex:n?void 0:-1,"aria-disabled":n?void 0:!0,"aria-label":l(n),onClick:h},Y.createElement(a.Chevron,{disabled:n?void 0:!0,className:o[oe.Chevron],orientation:"left"})),Y.createElement(a.NextMonthButton,{type:"button",className:o[oe.NextMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":u(r),onClick:c},Y.createElement(a.Chevron,{disabled:r?void 0:!0,orientation:"right",className:o[oe.Chevron]})))}function AMt(i){const{components:t}=Ab();return Y.createElement(t.Button,{...i})}function kMt(i){return Y.createElement("option",{...i})}function CMt(i){const{components:t}=Ab();return Y.createElement(t.Button,{...i})}function MMt(i){const{rootRef:t,...e}=i;return Y.createElement("div",{...e,ref:t})}function TMt(i){return Y.createElement("select",{...i})}function PMt(i){const{week:t,...e}=i;return Y.createElement("tr",{...e})}function EMt(i){return Y.createElement("th",{...i})}function RMt(i){return Y.createElement("thead",{"aria-hidden":!0},Y.createElement("tr",{...i}))}function OMt(i){const{week:t,...e}=i;return Y.createElement("th",{...e})}function DMt(i){return Y.createElement("th",{...i})}function IMt(i){return Y.createElement("tbody",{...i})}function LMt(i){const{components:t}=Ab();return Y.createElement(t.Dropdown,{...i})}const BMt=Object.freeze(Object.defineProperty({__proto__:null,Button:cMt,CaptionLabel:hMt,Chevron:dMt,Day:fMt,DayButton:pMt,Dropdown:gMt,DropdownNav:mMt,Footer:_Mt,Month:vMt,MonthCaption:yMt,MonthGrid:bMt,Months:xMt,MonthsDropdown:SMt,Nav:wMt,NextMonthButton:AMt,Option:kMt,PreviousMonthButton:CMt,Root:MMt,Select:TMt,Week:PMt,WeekNumber:OMt,WeekNumberHeader:DMt,Weekday:EMt,Weekdays:RMt,Weeks:IMt,YearsDropdown:LMt},Symbol.toStringTag,{value:"Module"}));function Tu(i,t,e=!1,n=Zl){let{from:r,to:s}=i;const{differenceInCalendarDays:a,isSameDay:o}=n;return r&&s?(a(s,r)<0&&([r,s]=[s,r]),a(t,r)>=(e?1:0)&&a(s,t)>=(e?1:0)):!e&&s?o(s,t):!e&&r?o(r,t):!1}function DB(i){return!!(i&&typeof i=="object"&&"before"in i&&"after"in i)}function JC(i){return!!(i&&typeof i=="object"&&"from"in i)}function IB(i){return!!(i&&typeof i=="object"&&"after"in i)}function LB(i){return!!(i&&typeof i=="object"&&"before"in i)}function yQ(i){return!!(i&&typeof i=="object"&&"dayOfWeek"in i)}function bQ(i,t){return Array.isArray(i)&&i.every(t.isDate)}function Pu(i,t,e=Zl){const n=Array.isArray(t)?t:[t],{isSameDay:r,differenceInCalendarDays:s,isAfter:a}=e;return n.some(o=>{if(typeof o=="boolean")return o;if(e.isDate(o))return r(i,o);if(bQ(o,e))return o.some(l=>r(i,l));if(JC(o))return Tu(o,i,!1,e);if(yQ(o))return Array.isArray(o.dayOfWeek)?o.dayOfWeek.includes(i.getDay()):o.dayOfWeek===i.getDay();if(DB(o)){const l=s(o.before,i),u=s(o.after,i),c=l>0,h=u<0;return a(o.before,o.after)?h&&c:c||h}return IB(o)?s(i,o.after)>0:LB(o)?s(o.before,i)>0:typeof o=="function"?o(i):!1})}function FMt(i,t,e,n,r){const{disabled:s,hidden:a,modifiers:o,showOutsideDays:l,broadcastCalendar:u,today:c=r.today()}=t,{isSameDay:h,isSameMonth:d,startOfMonth:f,isBefore:p,endOfMonth:g,isAfter:m}=r,_=e&&f(e),v=n&&g(n),y={[hn.focused]:[],[hn.outside]:[],[hn.disabled]:[],[hn.hidden]:[],[hn.today]:[]},b={};for(const x of i){const{date:S,displayMonth:w}=x,A=!!(w&&!d(S,w)),k=!!(_&&p(S,_)),C=!!(v&&m(S,v)),M=!!(s&&Pu(S,s,r)),R=!!(a&&Pu(S,a,r))||k||C||!u&&!l&&A||u&&l===!1&&A,P=h(S,c);A&&y.outside.push(x),M&&y.disabled.push(x),R&&y.hidden.push(x),P&&y.today.push(x),o&&Object.keys(o).forEach(O=>{const T=o?.[O];T&&Pu(S,T,r)&&(b[O]?b[O].push(x):b[O]=[x])})}return x=>{const S={[hn.focused]:!1,[hn.disabled]:!1,[hn.hidden]:!1,[hn.outside]:!1,[hn.today]:!1},w={};for(const A in y){const k=y[A];S[A]=k.some(C=>C===x)}for(const A in b)w[A]=b[A].some(k=>k===x);return{...S,...w}}}function zMt(i,t,e={}){return Object.entries(i).filter(([,r])=>r===!0).reduce((r,[s])=>(e[s]?r.push(e[s]):t[hn[s]]?r.push(t[hn[s]]):t[zo[s]]&&r.push(t[zo[s]]),r),[t[oe.Day]])}function NMt(i){return{...BMt,...i}}function jMt(i){const t={"data-mode":i.mode??void 0,"data-required":"required"in i?i.required:void 0,"data-multiple-months":i.numberOfMonths&&i.numberOfMonths>1||void 0,"data-week-numbers":i.showWeekNumber||void 0,"data-broadcast-calendar":i.broadcastCalendar||void 0,"data-nav-layout":i.navLayout||void 0};return Object.entries(i).forEach(([e,n])=>{e.startsWith("data-")&&(t[e]=n)}),t}function HMt(){const i={};for(const t in oe)i[oe[t]]=`rdp-${oe[t]}`;for(const t in hn)i[hn[t]]=`rdp-${hn[t]}`;for(const t in zo)i[zo[t]]=`rdp-${zo[t]}`;for(const t in la)i[la[t]]=`rdp-${la[t]}`;return i}function xQ(i,t,e){return(e??new ba(t)).formatMonthYear(i)}const VMt=xQ;function WMt(i,t,e){return(e??new ba(t)).format(i,"d")}function $Mt(i,t=Zl){return t.format(i,"LLLL")}function UMt(i,t,e){return(e??new ba(t)).format(i,"cccccc")}function GMt(i,t=Zl){return i<10?t.formatNumber(`0${i.toLocaleString()}`):t.formatNumber(`${i.toLocaleString()}`)}function YMt(){return""}function SQ(i,t=Zl){return t.format(i,"yyyy")}const XMt=SQ,KMt=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:xQ,formatDay:WMt,formatMonthCaption:VMt,formatMonthDropdown:$Mt,formatWeekNumber:GMt,formatWeekNumberHeader:YMt,formatWeekdayName:UMt,formatYearCaption:XMt,formatYearDropdown:SQ},Symbol.toStringTag,{value:"Module"}));function qMt(i){return i?.formatMonthCaption&&!i.formatCaption&&(i.formatCaption=i.formatMonthCaption),i?.formatYearCaption&&!i.formatYearDropdown&&(i.formatYearDropdown=i.formatYearCaption),{...KMt,...i}}function BB(i,t,e,n){let r=(n??new ba(e)).format(i,"PPPP");return t.today&&(r=`Today, ${r}`),t.selected&&(r=`${r}, selected`),r}const ZMt=BB;function FB(i,t,e){return(e??new ba(t)).formatMonthYear(i)}const QMt=FB;function wQ(i,t,e,n){let r=(n??new ba(e)).format(i,"PPPP");return t?.today&&(r=`Today, ${r}`),r}function AQ(i){return"Choose the Month"}function kQ(){return""}const JMt="Go to the Next Month";function CQ(i,t){return JMt}function MQ(i){return"Go to the Previous Month"}function TQ(i,t,e){return(e??new ba(t)).format(i,"cccc")}function PQ(i,t){return`Week ${i}`}function EQ(i){return"Week Number"}function RQ(i){return"Choose the Year"}const tTt=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:QMt,labelDay:ZMt,labelDayButton:BB,labelGrid:FB,labelGridcell:wQ,labelMonthDropdown:AQ,labelNav:kQ,labelNext:CQ,labelPrevious:MQ,labelWeekNumber:PQ,labelWeekNumberHeader:EQ,labelWeekday:TQ,labelYearDropdown:RQ},Symbol.toStringTag,{value:"Module"})),xo=(i,t,e)=>t||(e?typeof e=="function"?e:(...n)=>e:i);function eTt(i,t){const e=t.locale?.labels??{};return{...tTt,...i??{},labelDayButton:xo(BB,i?.labelDayButton,e.labelDayButton),labelMonthDropdown:xo(AQ,i?.labelMonthDropdown,e.labelMonthDropdown),labelNext:xo(CQ,i?.labelNext,e.labelNext),labelPrevious:xo(MQ,i?.labelPrevious,e.labelPrevious),labelWeekNumber:xo(PQ,i?.labelWeekNumber,e.labelWeekNumber),labelYearDropdown:xo(RQ,i?.labelYearDropdown,e.labelYearDropdown),labelGrid:xo(FB,i?.labelGrid,e.labelGrid),labelGridcell:xo(wQ,i?.labelGridcell,e.labelGridcell),labelNav:xo(kQ,i?.labelNav,e.labelNav),labelWeekNumberHeader:xo(EQ,i?.labelWeekNumberHeader,e.labelWeekNumberHeader),labelWeekday:xo(TQ,i?.labelWeekday,e.labelWeekday)}}function iTt(i,t,e,n,r){const{startOfMonth:s,startOfYear:a,endOfYear:o,eachMonthOfInterval:l,getMonth:u}=r;return l({start:a(i),end:o(i)}).map(d=>{const f=n.formatMonthDropdown(d,r),p=u(d),g=t&&d<s(t)||e&&d>s(e)||!1;return{value:p,label:f,disabled:g}})}function nTt(i,t={},e={}){let n={...t?.[oe.Day]};return Object.entries(i).filter(([,r])=>r===!0).forEach(([r])=>{n={...n,...e?.[r]}}),n}function rTt(i,t,e,n){const r=n??i.today(),s=e?i.startOfBroadcastWeek(r,i):t?i.startOfISOWeek(r):i.startOfWeek(r),a=[];for(let o=0;o<7;o++){const l=i.addDays(s,o);a.push(l)}return a}function sTt(i,t,e,n,r=!1){if(!i||!t)return;const{startOfYear:s,endOfYear:a,eachYearOfInterval:o,getYear:l}=n,u=s(i),c=a(t),h=o({start:u,end:c});return r&&h.reverse(),h.map(d=>{const f=e.formatYearDropdown(d,n);return{value:l(d),label:f,disabled:!1}})}const kb=i=>i instanceof HTMLElement?i:null,sE=i=>[...i.querySelectorAll("[data-animated-month]")??[]],aTt=i=>kb(i.querySelector("[data-animated-month]")),aE=i=>kb(i.querySelector("[data-animated-caption]")),oE=i=>kb(i.querySelector("[data-animated-weeks]")),oTt=i=>kb(i.querySelector("[data-animated-nav]")),lTt=i=>kb(i.querySelector("[data-animated-weekdays]"));function uTt(i,t,{classNames:e,months:n,focused:r,dateLib:s}){const a=E.useRef(null),o=E.useRef(n),l=E.useRef(!1);E.useLayoutEffect(()=>{const u=o.current;if(o.current=n,!t||!i.current||!(i.current instanceof HTMLElement)||n.length===0||u.length===0||n.length!==u.length)return;const c=s.isSameMonth(n[0].date,u[0].date),h=s.isAfter(n[0].date,u[0].date),d=h?e[la.caption_after_enter]:e[la.caption_before_enter],f=h?e[la.weeks_after_enter]:e[la.weeks_before_enter],p=a.current,g=i.current.cloneNode(!0);if(g instanceof HTMLElement?(sE(g).forEach(y=>{if(!(y instanceof HTMLElement))return;const b=aTt(y);b&&y.contains(b)&&y.removeChild(b);const x=aE(y);x&&x.classList.remove(d);const S=oE(y);S&&S.classList.remove(f)}),a.current=g):a.current=null,l.current||c||r)return;const m=p instanceof HTMLElement?sE(p):[],_=sE(i.current);if(_?.every(v=>v instanceof HTMLElement)&&m&&m.every(v=>v instanceof HTMLElement)){l.current=!0,i.current.style.isolation="isolate";const v=oTt(i.current);v&&(v.style.zIndex="1"),_.forEach((y,b)=>{const x=m[b];if(!x)return;y.style.position="relative",y.style.overflow="hidden";const S=aE(y);S&&S.classList.add(d);const w=oE(y);w&&w.classList.add(f);const A=()=>{l.current=!1,i.current&&(i.current.style.isolation=""),v&&(v.style.zIndex=""),S&&S.classList.remove(d),w&&w.classList.remove(f),y.style.position="",y.style.overflow="",y.contains(x)&&y.removeChild(x)};x.style.pointerEvents="none",x.style.position="absolute",x.style.overflow="hidden",x.setAttribute("aria-hidden","true");const k=lTt(x);k&&(k.style.opacity="0");const C=aE(x);C&&(C.classList.add(h?e[la.caption_before_exit]:e[la.caption_after_exit]),C.addEventListener("animationend",A));const M=oE(x);M&&M.classList.add(h?e[la.weeks_before_exit]:e[la.weeks_after_exit]),y.insertBefore(x,y.firstChild)})}})}function cTt(i,t,e,n){const r=i[0],s=i[i.length-1],{ISOWeek:a,fixedWeeks:o,broadcastCalendar:l}=e??{},{addDays:u,differenceInCalendarDays:c,differenceInCalendarMonths:h,endOfBroadcastWeek:d,endOfISOWeek:f,endOfMonth:p,endOfWeek:g,isAfter:m,startOfBroadcastWeek:_,startOfISOWeek:v,startOfWeek:y}=n,b=l?_(r,n):a?v(r):y(r),x=l?d(s):a?f(p(s)):g(p(s)),S=t&&(l?d(t):a?f(t):g(t)),w=S&&m(x,S)?S:x,A=c(w,b),k=h(s,r)+1,C=[];for(let P=0;P<=A;P++){const O=u(b,P);C.push(O)}const R=(l?35:42)*k;if(o&&C.length<R){const P=R-C.length;for(let O=0;O<P;O++){const T=u(C[C.length-1],1);C.push(T)}}return C}function hTt(i){const t=[];return i.reduce((e,n)=>{const r=n.weeks.reduce((s,a)=>s.concat(a.days.slice()),t.slice());return e.concat(r.slice())},t.slice())}function dTt(i,t,e,n){const{numberOfMonths:r=1}=e,s=[];for(let a=0;a<r;a++){const o=n.addMonths(i,a);if(t&&o>t)break;s.push(o)}return s}function KV(i,t,e,n){const{month:r,defaultMonth:s,today:a=n.today(),numberOfMonths:o=1}=i;let l=r||s||a;const{differenceInCalendarMonths:u,addMonths:c,startOfMonth:h}=n;if(e&&u(e,l)<o-1){const d=-1*(o-1);l=c(e,d)}return t&&u(l,t)<0&&(l=t),h(l)}function fTt(i,t,e,n){const{addDays:r,endOfBroadcastWeek:s,endOfISOWeek:a,endOfMonth:o,endOfWeek:l,getISOWeek:u,getWeek:c,startOfBroadcastWeek:h,startOfISOWeek:d,startOfWeek:f}=n,p=i.reduce((g,m)=>{const _=e.broadcastCalendar?h(m,n):e.ISOWeek?d(m):f(m),v=e.broadcastCalendar?s(m):e.ISOWeek?a(o(m)):l(o(m)),y=t.filter(w=>w>=_&&w<=v),b=e.broadcastCalendar?35:42;if(e.fixedWeeks&&y.length<b){const w=t.filter(A=>{const k=b-y.length;return A>v&&A<=r(v,k)});y.push(...w)}const x=y.reduce((w,A)=>{const k=e.ISOWeek?u(A):c(A),C=w.find(R=>R.weekNumber===k),M=new _Q(A,m,n);return C?C.days.push(M):w.push(new uMt(k,[M])),w},[]),S=new lMt(m,x);return g.push(S),g},[]);return e.reverseMonths?p.reverse():p}function pTt(i,t){let{startMonth:e,endMonth:n}=i;const{startOfYear:r,startOfDay:s,startOfMonth:a,endOfMonth:o,addYears:l,endOfYear:u,newDate:c,today:h}=t,{fromYear:d,toYear:f,fromMonth:p,toMonth:g}=i;!e&&p&&(e=p),!e&&d&&(e=t.newDate(d,0,1)),!n&&g&&(n=g),!n&&f&&(n=c(f,11,31));const m=i.captionLayout==="dropdown"||i.captionLayout==="dropdown-years";return e?e=a(e):d?e=c(d,0,1):!e&&m&&(e=r(l(i.today??h(),-100))),n?n=o(n):f?n=c(f,11,31):!n&&m&&(n=u(i.today??h())),[e&&s(e),n&&s(n)]}function gTt(i,t,e,n){if(e.disableNavigation)return;const{pagedNavigation:r,numberOfMonths:s=1}=e,{startOfMonth:a,addMonths:o,differenceInCalendarMonths:l}=n,u=r?s:1,c=a(i);if(!t)return o(c,u);if(!(l(t,i)<s))return o(c,u)}function mTt(i,t,e,n){if(e.disableNavigation)return;const{pagedNavigation:r,numberOfMonths:s}=e,{startOfMonth:a,addMonths:o,differenceInCalendarMonths:l}=n,u=r?s??1:1,c=a(i);if(!t)return o(c,-u);if(!(l(c,t)<=0))return o(c,-u)}function _Tt(i){const t=[];return i.reduce((e,n)=>e.concat(n.weeks.slice()),t.slice())}function tM(i,t){const[e,n]=E.useState(i);return[t===void 0?e:t,n]}function vTt(i,t){const[e,n]=pTt(i,t),{startOfMonth:r,endOfMonth:s}=t,a=KV(i,e,n,t),[o,l]=tM(a,i.month?a:void 0);E.useEffect(()=>{const b=KV(i,e,n,t);l(b)},[i.timeZone]);const{months:u,weeks:c,days:h,previousMonth:d,nextMonth:f}=E.useMemo(()=>{const b=dTt(o,n,{numberOfMonths:i.numberOfMonths},t),x=cTt(b,i.endMonth?s(i.endMonth):void 0,{ISOWeek:i.ISOWeek,fixedWeeks:i.fixedWeeks,broadcastCalendar:i.broadcastCalendar},t),S=fTt(b,x,{broadcastCalendar:i.broadcastCalendar,fixedWeeks:i.fixedWeeks,ISOWeek:i.ISOWeek,reverseMonths:i.reverseMonths},t),w=_Tt(S),A=hTt(S),k=mTt(o,e,i,t),C=gTt(o,n,i,t);return{months:S,weeks:w,days:A,previousMonth:k,nextMonth:C}},[t,o.getTime(),n?.getTime(),e?.getTime(),i.disableNavigation,i.broadcastCalendar,i.endMonth?.getTime(),i.fixedWeeks,i.ISOWeek,i.numberOfMonths,i.pagedNavigation,i.reverseMonths]),{disableNavigation:p,onMonthChange:g}=i,m=b=>c.some(x=>x.days.some(S=>S.isEqualTo(b))),_=b=>{if(p)return;let x=r(b);e&&x<r(e)&&(x=r(e)),n&&x>r(n)&&(x=r(n)),l(x),g?.(x)};return{months:u,weeks:c,days:h,navStart:e,navEnd:n,previousMonth:d,nextMonth:f,goToMonth:_,goToDay:b=>{m(b)||_(b.date)}}}var dl;(function(i){i[i.Today=0]="Today",i[i.Selected=1]="Selected",i[i.LastFocused=2]="LastFocused",i[i.FocusedModifier=3]="FocusedModifier"})(dl||(dl={}));function qV(i){return!i[hn.disabled]&&!i[hn.hidden]&&!i[hn.outside]}function yTt(i,t,e,n){let r,s=-1;for(const a of i){const o=t(a);qV(o)&&(o[hn.focused]&&s<dl.FocusedModifier?(r=a,s=dl.FocusedModifier):n?.isEqualTo(a)&&s<dl.LastFocused?(r=a,s=dl.LastFocused):e(a.date)&&s<dl.Selected?(r=a,s=dl.Selected):o[hn.today]&&s<dl.Today&&(r=a,s=dl.Today))}return r||(r=i.find(a=>qV(t(a)))),r}function bTt(i,t,e,n,r,s,a){const{ISOWeek:o,broadcastCalendar:l}=s,{addDays:u,addMonths:c,addWeeks:h,addYears:d,endOfBroadcastWeek:f,endOfISOWeek:p,endOfWeek:g,max:m,min:_,startOfBroadcastWeek:v,startOfISOWeek:y,startOfWeek:b}=a;let S={day:u,week:h,month:c,year:d,startOfWeek:w=>l?v(w,a):o?y(w):b(w),endOfWeek:w=>l?f(w):o?p(w):g(w)}[i](e,t==="after"?1:-1);return t==="before"&&n?S=m([n,S]):t==="after"&&r&&(S=_([r,S])),S}function OQ(i,t,e,n,r,s,a,o=0){if(o>365)return;const l=bTt(i,t,e.date,n,r,s,a),u=!!(s.disabled&&Pu(l,s.disabled,a)),c=!!(s.hidden&&Pu(l,s.hidden,a)),h=l,d=new _Q(l,h,a);return!u&&!c?d:OQ(i,t,d,n,r,s,a,o+1)}function xTt(i,t,e,n,r){const{autoFocus:s}=i,[a,o]=E.useState(),l=yTt(t.days,e,n||(()=>!1),a),[u,c]=E.useState(s?l:void 0);return{isFocusTarget:g=>!!l?.isEqualTo(g),setFocused:c,focused:u,blur:()=>{o(u),c(void 0)},moveFocus:(g,m)=>{if(!u)return;const _=OQ(g,m,u,t.navStart,t.navEnd,i,r);_&&(i.disableNavigation&&!t.days.some(y=>y.isEqualTo(_))||(t.goToDay(_),c(_)))}}}function STt(i,t){const{selected:e,required:n,onSelect:r}=i,[s,a]=tM(e,r?e:void 0),o=r?e:s,{isSameDay:l}=t,u=f=>o?.some(p=>l(p,f))??!1,{min:c,max:h}=i;return{selected:o,select:(f,p,g)=>{let m=[...o??[]];if(u(f)){if(o?.length===c||n&&o?.length===1)return;m=o?.filter(_=>!l(_,f))}else o?.length===h?m=[f]:m=[...m,f];return r||a(m),r?.(m,f,p,g),m},isSelected:u}}function wTt(i,t,e=0,n=0,r=!1,s=Zl){const{from:a,to:o}=t||{},{isSameDay:l,isAfter:u,isBefore:c}=s;let h;if(!a&&!o)h={from:i,to:e>0?void 0:i};else if(a&&!o)l(a,i)?e===0?h={from:a,to:i}:r?h={from:a,to:void 0}:h=void 0:c(i,a)?h={from:i,to:a}:h={from:a,to:i};else if(a&&o)if(l(a,i)&&l(o,i))r?h={from:a,to:o}:h=void 0;else if(l(a,i))h={from:a,to:e>0?void 0:i};else if(l(o,i))h={from:i,to:e>0?void 0:i};else if(c(i,a))h={from:i,to:o};else if(u(i,a))h={from:a,to:i};else if(u(i,o))h={from:a,to:i};else throw new Error("Invalid range");if(h?.from&&h?.to){const d=s.differenceInCalendarDays(h.to,h.from);n>0&&d>n?h={from:i,to:void 0}:e>1&&d<e&&(h={from:i,to:void 0})}return h}function ATt(i,t,e=Zl){const n=Array.isArray(t)?t:[t];let r=i.from;const s=e.differenceInCalendarDays(i.to,i.from),a=Math.min(s,6);for(let o=0;o<=a;o++){if(n.includes(r.getDay()))return!0;r=e.addDays(r,1)}return!1}function ZV(i,t,e=Zl){return Tu(i,t.from,!1,e)||Tu(i,t.to,!1,e)||Tu(t,i.from,!1,e)||Tu(t,i.to,!1,e)}function kTt(i,t,e=Zl){const n=Array.isArray(t)?t:[t];if(n.filter(o=>typeof o!="function").some(o=>typeof o=="boolean"?o:e.isDate(o)?Tu(i,o,!1,e):bQ(o,e)?o.some(l=>Tu(i,l,!1,e)):JC(o)?o.from&&o.to?ZV(i,{from:o.from,to:o.to},e):!1:yQ(o)?ATt(i,o.dayOfWeek,e):DB(o)?e.isAfter(o.before,o.after)?ZV(i,{from:e.addDays(o.after,1),to:e.addDays(o.before,-1)},e):Pu(i.from,o,e)||Pu(i.to,o,e):IB(o)||LB(o)?Pu(i.from,o,e)||Pu(i.to,o,e):!1))return!0;const a=n.filter(o=>typeof o=="function");if(a.length){let o=i.from;const l=e.differenceInCalendarDays(i.to,i.from);for(let u=0;u<=l;u++){if(a.some(c=>c(o)))return!0;o=e.addDays(o,1)}}return!1}function CTt(i,t){const{disabled:e,excludeDisabled:n,selected:r,required:s,onSelect:a}=i,[o,l]=tM(r,a?r:void 0),u=a?r:o;return{selected:u,select:(d,f,p)=>{const{min:g,max:m}=i,_=d?wTt(d,u,g,m,s,t):void 0;return n&&e&&_?.from&&_.to&&kTt({from:_.from,to:_.to},e,t)&&(_.from=d,_.to=void 0),a||l(_),a?.(_,d,f,p),_},isSelected:d=>u&&Tu(u,d,!1,t)}}function MTt(i,t){const{selected:e,required:n,onSelect:r}=i,[s,a]=tM(e,r?e:void 0),o=r?e:s,{isSameDay:l}=t;return{selected:o,select:(h,d,f)=>{let p=h;return!n&&o&&o&&l(h,o)&&(p=void 0),r||a(p),r?.(p,h,d,f),p},isSelected:h=>o?l(o,h):!1}}function TTt(i,t){const e=MTt(i,t),n=STt(i,t),r=CTt(i,t);switch(i.mode){case"single":return e;case"multiple":return n;case"range":return r;default:return}}function Ir(i,t){return i instanceof Mu&&i.timeZone===t?i:new Mu(i,t)}function QV(i,t){return typeof i=="boolean"||typeof i=="function"?i:i instanceof Date?Ir(i,t):Array.isArray(i)?i.map(e=>e instanceof Date?Ir(e,t):e):JC(i)?{...i,from:i.from?Ir(i.from,t):i.from,to:i.to?Ir(i.to,t):i.to}:DB(i)?{before:Ir(i.before,t),after:Ir(i.after,t)}:IB(i)?{after:Ir(i.after,t)}:LB(i)?{before:Ir(i.before,t)}:i}function lE(i,t){return i&&(Array.isArray(i)?i.map(e=>QV(e,t)):QV(i,t))}function ree(i){let t=i;const e=t.timeZone;if(e&&(t={...i,timeZone:e},t.today&&(t.today=Ir(t.today,e)),t.month&&(t.month=Ir(t.month,e)),t.defaultMonth&&(t.defaultMonth=Ir(t.defaultMonth,e)),t.startMonth&&(t.startMonth=Ir(t.startMonth,e)),t.endMonth&&(t.endMonth=Ir(t.endMonth,e)),t.mode==="single"&&t.selected?t.selected=Ir(t.selected,e):t.mode==="multiple"&&t.selected?t.selected=t.selected?.map(kt=>Ir(kt,e)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?Ir(t.selected.from,e):t.selected.from,to:t.selected.to?Ir(t.selected.to,e):t.selected.to}),t.disabled!==void 0&&(t.disabled=lE(t.disabled,e)),t.hidden!==void 0&&(t.hidden=lE(t.hidden,e)),t.modifiers)){const kt={};Object.keys(t.modifiers).forEach(Zt=>{kt[Zt]=lE(t.modifiers?.[Zt],e)}),t.modifiers=kt}const{components:n,formatters:r,labels:s,dateLib:a,locale:o,classNames:l}=E.useMemo(()=>{const kt={...mQ,...t.locale},Zt=new ba({locale:kt,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib);return{dateLib:Zt,components:NMt(t.components),formatters:qMt(t.formatters),labels:eTt(t.labels,Zt.options),locale:kt,classNames:{...HMt(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]);t.today||(t={...t,today:a.today()});const{captionLayout:u,mode:c,navLayout:h,numberOfMonths:d=1,onDayBlur:f,onDayClick:p,onDayFocus:g,onDayKeyDown:m,onDayMouseEnter:_,onDayMouseLeave:v,onNextClick:y,onPrevClick:b,showWeekNumber:x,styles:S}=t,{formatCaption:w,formatDay:A,formatMonthDropdown:k,formatWeekNumber:C,formatWeekNumberHeader:M,formatWeekdayName:R,formatYearDropdown:P}=r,O=vTt(t,a),{days:T,months:D,navStart:B,navEnd:I,previousMonth:F,nextMonth:j,goToMonth:H}=O,U=FMt(T,t,B,I,a),{isSelected:K,select:q,selected:Z}=TTt(t,a)??{},{blur:at,focused:$,isFocusTarget:ft,moveFocus:pt,setFocused:rt}=xTt(t,O,U,K??(()=>!1),a),{labelDayButton:gt,labelGridcell:mt,labelGrid:Dt,labelMonthDropdown:St,labelNav:Ot,labelPrevious:Pt,labelNext:_e,labelWeekday:Ze,labelWeekNumber:It,labelWeekNumberHeader:W,labelYearDropdown:Q}=s,nt=E.useMemo(()=>rTt(a,t.ISOWeek,t.broadcastCalendar,t.today),[a,t.ISOWeek,t.broadcastCalendar,t.today]),wt=c!==void 0||p!==void 0,xt=E.useCallback(()=>{F&&(H(F),b?.(F))},[F,H,b]),dt=E.useCallback(()=>{j&&(H(j),y?.(j))},[H,j,y]),jt=E.useCallback((kt,Zt)=>Nt=>{Nt.preventDefault(),Nt.stopPropagation(),rt(kt),!Zt.disabled&&(q?.(kt.date,Zt,Nt),p?.(kt.date,Zt,Nt))},[q,p,rt]),pe=E.useCallback((kt,Zt)=>Nt=>{rt(kt),g?.(kt.date,Zt,Nt)},[g,rt]),me=E.useCallback((kt,Zt)=>Nt=>{at(),f?.(kt.date,Zt,Nt)},[at,f]),We=E.useCallback((kt,Zt)=>Nt=>{const Ut={ArrowLeft:[Nt.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[Nt.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[Nt.shiftKey?"year":"week","after"],ArrowUp:[Nt.shiftKey?"year":"week","before"],PageUp:[Nt.shiftKey?"year":"month","before"],PageDown:[Nt.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(Ut[Nt.key]){Nt.preventDefault(),Nt.stopPropagation();const[oi,fe]=Ut[Nt.key];pt(oi,fe)}m?.(kt.date,Zt,Nt)},[pt,m,t.dir]),Si=E.useCallback((kt,Zt)=>Nt=>{_?.(kt.date,Zt,Nt)},[_]),ai=E.useCallback((kt,Zt)=>Nt=>{v?.(kt.date,Zt,Nt)},[v]),Ln=E.useCallback(kt=>Zt=>{const Nt=Number(Zt.target.value),Ut=a.setMonth(a.startOfMonth(kt),Nt);H(Ut)},[a,H]),Se=E.useCallback(kt=>Zt=>{const Nt=Number(Zt.target.value),Ut=a.setYear(a.startOfMonth(kt),Nt);H(Ut)},[a,H]),{className:Ni,style:_r}=E.useMemo(()=>({className:[l[oe.Root],t.className].filter(Boolean).join(" "),style:{...S?.[oe.Root],...t.style}}),[l,t.className,t.style,S]),us=jMt(t),Pa=E.useRef(null);uTt(Pa,!!t.animate,{classNames:l,months:D,focused:$,dateLib:a});const vr={dayPickerProps:t,selected:Z,select:q,isSelected:K,months:D,nextMonth:j,previousMonth:F,goToMonth:H,getModifiers:U,components:n,classNames:l,styles:S,labels:s,formatters:r};return Y.createElement(vQ.Provider,{value:vr},Y.createElement(n.Root,{rootRef:t.animate?Pa:void 0,className:Ni,style:_r,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],...us},Y.createElement(n.Months,{className:l[oe.Months],style:S?.[oe.Months]},!t.hideNavigation&&!h&&Y.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[oe.Nav],style:S?.[oe.Nav],"aria-label":Ot(),onPreviousClick:xt,onNextClick:dt,previousMonth:F,nextMonth:j}),D.map((kt,Zt)=>Y.createElement(n.Month,{"data-animated-month":t.animate?"true":void 0,className:l[oe.Month],style:S?.[oe.Month],key:Zt,displayIndex:Zt,calendarMonth:kt},h==="around"&&!t.hideNavigation&&Zt===0&&Y.createElement(n.PreviousMonthButton,{type:"button",className:l[oe.PreviousMonthButton],tabIndex:F?void 0:-1,"aria-disabled":F?void 0:!0,"aria-label":Pt(F),onClick:xt,"data-animated-button":t.animate?"true":void 0},Y.createElement(n.Chevron,{disabled:F?void 0:!0,className:l[oe.Chevron],orientation:t.dir==="rtl"?"right":"left"})),Y.createElement(n.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:l[oe.MonthCaption],style:S?.[oe.MonthCaption],calendarMonth:kt,displayIndex:Zt},u?.startsWith("dropdown")?Y.createElement(n.DropdownNav,{className:l[oe.Dropdowns],style:S?.[oe.Dropdowns]},(()=>{const Nt=u==="dropdown"||u==="dropdown-months"?Y.createElement(n.MonthsDropdown,{key:"month",className:l[oe.MonthsDropdown],"aria-label":St(),classNames:l,components:n,disabled:!!t.disableNavigation,onChange:Ln(kt.date),options:iTt(kt.date,B,I,r,a),style:S?.[oe.Dropdown],value:a.getMonth(kt.date)}):Y.createElement("span",{key:"month"},k(kt.date,a)),Ut=u==="dropdown"||u==="dropdown-years"?Y.createElement(n.YearsDropdown,{key:"year",className:l[oe.YearsDropdown],"aria-label":Q(a.options),classNames:l,components:n,disabled:!!t.disableNavigation,onChange:Se(kt.date),options:sTt(B,I,r,a,!!t.reverseYears),style:S?.[oe.Dropdown],value:a.getYear(kt.date)}):Y.createElement("span",{key:"year"},P(kt.date,a));return a.getMonthYearOrder()==="year-first"?[Ut,Nt]:[Nt,Ut]})(),Y.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},w(kt.date,a.options,a))):Y.createElement(n.CaptionLabel,{className:l[oe.CaptionLabel],role:"status","aria-live":"polite"},w(kt.date,a.options,a))),h==="around"&&!t.hideNavigation&&Zt===d-1&&Y.createElement(n.NextMonthButton,{type:"button",className:l[oe.NextMonthButton],tabIndex:j?void 0:-1,"aria-disabled":j?void 0:!0,"aria-label":_e(j),onClick:dt,"data-animated-button":t.animate?"true":void 0},Y.createElement(n.Chevron,{disabled:j?void 0:!0,className:l[oe.Chevron],orientation:t.dir==="rtl"?"left":"right"})),Zt===d-1&&h==="after"&&!t.hideNavigation&&Y.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[oe.Nav],style:S?.[oe.Nav],"aria-label":Ot(),onPreviousClick:xt,onNextClick:dt,previousMonth:F,nextMonth:j}),Y.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":c==="multiple"||c==="range","aria-label":Dt(kt.date,a.options,a)||void 0,className:l[oe.MonthGrid],style:S?.[oe.MonthGrid]},!t.hideWeekdays&&Y.createElement(n.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:l[oe.Weekdays],style:S?.[oe.Weekdays]},x&&Y.createElement(n.WeekNumberHeader,{"aria-label":W(a.options),className:l[oe.WeekNumberHeader],style:S?.[oe.WeekNumberHeader],scope:"col"},M()),nt.map(Nt=>Y.createElement(n.Weekday,{"aria-label":Ze(Nt,a.options,a),className:l[oe.Weekday],key:String(Nt),style:S?.[oe.Weekday],scope:"col"},R(Nt,a.options,a)))),Y.createElement(n.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:l[oe.Weeks],style:S?.[oe.Weeks]},kt.weeks.map(Nt=>Y.createElement(n.Week,{className:l[oe.Week],key:Nt.weekNumber,style:S?.[oe.Week],week:Nt},x&&Y.createElement(n.WeekNumber,{week:Nt,style:S?.[oe.WeekNumber],"aria-label":It(Nt.weekNumber,{locale:o}),className:l[oe.WeekNumber],scope:"row",role:"rowheader"},C(Nt.weekNumber,a)),Nt.days.map(Ut=>{const{date:oi}=Ut,fe=U(Ut);if(fe[hn.focused]=!fe.hidden&&!!$?.isEqualTo(Ut),fe[zo.selected]=K?.(oi)||fe.selected,JC(Z)){const{from:Wr,to:Rs}=Z;fe[zo.range_start]=!!(Wr&&Rs&&a.isSameDay(oi,Wr)),fe[zo.range_end]=!!(Wr&&Rs&&a.isSameDay(oi,Rs)),fe[zo.range_middle]=Tu(Z,oi,!0,a)}const nr=nTt(fe,S,t.modifiersStyles),na=zMt(fe,l,t.modifiersClassNames),yr=!wt&&!fe.hidden?mt(oi,fe,a.options,a):void 0;return Y.createElement(n.Day,{key:`${Ut.isoDate}_${Ut.displayMonthId}`,day:Ut,modifiers:fe,className:na.join(" "),style:nr,role:"gridcell","aria-selected":fe.selected||void 0,"aria-label":yr,"data-day":Ut.isoDate,"data-month":Ut.outside?Ut.dateMonthId:void 0,"data-selected":fe.selected||void 0,"data-disabled":fe.disabled||void 0,"data-hidden":fe.hidden||void 0,"data-outside":Ut.outside||void 0,"data-focused":fe.focused||void 0,"data-today":fe.today||void 0},!fe.hidden&&wt?Y.createElement(n.DayButton,{className:l[oe.DayButton],style:S?.[oe.DayButton],type:"button",day:Ut,modifiers:fe,disabled:!fe.focused&&fe.disabled||void 0,"aria-disabled":fe.focused&&fe.disabled||void 0,tabIndex:ft(Ut)?0:-1,"aria-label":gt(oi,fe,a.options,a),onClick:jt(Ut,fe),onBlur:me(Ut,fe),onFocus:pe(Ut,fe),onKeyDown:We(Ut,fe),onMouseEnter:Si(Ut,fe),onMouseLeave:ai(Ut,fe)},A(oi,a.options,a)):!fe.hidden&&A(Ut.date,a.options,a))})))))))),t.footer&&Y.createElement(n.Footer,{className:l[oe.Footer],style:S?.[oe.Footer],role:"status","aria-live":"polite"},t.footer)))}var eM="Popover",[DQ]=rs(eM,[bh]),Cb=bh(),[PTt,Ah]=DQ(eM),IQ=i=>{const{__scopePopover:t,children:e,open:n,defaultOpen:r,onOpenChange:s,modal:a=!1}=i,o=Cb(t),l=E.useRef(null),[u,c]=E.useState(!1),[h,d]=oo({prop:n,defaultProp:r??!1,onChange:s,caller:eM});return V.jsx(vC,{...o,children:V.jsx(PTt,{scope:t,contentId:eo(),triggerRef:l,open:h,onOpenChange:d,onOpenToggle:E.useCallback(()=>d(f=>!f),[d]),hasCustomAnchor:u,onCustomAnchorAdd:E.useCallback(()=>c(!0),[]),onCustomAnchorRemove:E.useCallback(()=>c(!1),[]),modal:a,children:e})})};IQ.displayName=eM;var LQ="PopoverAnchor",ETt=E.forwardRef((i,t)=>{const{__scopePopover:e,...n}=i,r=Ah(LQ,e),s=Cb(e),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=r;return E.useEffect(()=>(a(),()=>o()),[a,o]),V.jsx(db,{...s,...n,ref:t})});ETt.displayName=LQ;var BQ="PopoverTrigger",FQ=E.forwardRef((i,t)=>{const{__scopePopover:e,...n}=i,r=Ah(BQ,e),s=Cb(e),a=De(t,r.triggerRef),o=V.jsx(ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":VQ(r.open),...n,ref:a,onClick:Et(i.onClick,r.onOpenToggle)});return r.hasCustomAnchor?o:V.jsx(db,{asChild:!0,...s,children:o})});FQ.displayName=BQ;var zB="PopoverPortal",[RTt,OTt]=DQ(zB,{forceMount:void 0}),zQ=i=>{const{__scopePopover:t,forceMount:e,children:n,container:r}=i,s=Ah(zB,t);return V.jsx(RTt,{scope:t,forceMount:e,children:V.jsx(ws,{present:e||s.open,children:V.jsx(Cm,{asChild:!0,container:r,children:n})})})};zQ.displayName=zB;var Ng="PopoverContent",NQ=E.forwardRef((i,t)=>{const e=OTt(Ng,i.__scopePopover),{forceMount:n=e.forceMount,...r}=i,s=Ah(Ng,i.__scopePopover);return V.jsx(ws,{present:n||s.open,children:s.modal?V.jsx(ITt,{...r,ref:t}):V.jsx(LTt,{...r,ref:t})})});NQ.displayName=Ng;var DTt=Nd("PopoverContent.RemoveScroll"),ITt=E.forwardRef((i,t)=>{const e=Ah(Ng,i.__scopePopover),n=E.useRef(null),r=De(t,n),s=E.useRef(!1);return E.useEffect(()=>{const a=n.current;if(a)return SC(a)},[]),V.jsx(pb,{as:DTt,allowPinchZoom:!0,children:V.jsx(jQ,{...i,ref:r,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Et(i.onCloseAutoFocus,a=>{a.preventDefault(),s.current||e.triggerRef.current?.focus()}),onPointerDownOutside:Et(i.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,u=o.button===2||l;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Et(i.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),LTt=E.forwardRef((i,t)=>{const e=Ah(Ng,i.__scopePopover),n=E.useRef(!1),r=E.useRef(!1);return V.jsx(jQ,{...i,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{i.onCloseAutoFocus?.(s),s.defaultPrevented||(n.current||e.triggerRef.current?.focus(),s.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:s=>{i.onInteractOutside?.(s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const a=s.target;e.triggerRef.current?.contains(a)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),jQ=E.forwardRef((i,t)=>{const{__scopePopover:e,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...h}=i,d=Ah(Ng,e),f=Cb(e);return dC(),V.jsx(cb,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:s,children:V.jsx(uf,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:c,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>d.onOpenChange(!1),children:V.jsx(yC,{"data-state":VQ(d.open),role:"dialog",id:d.contentId,...f,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),HQ="PopoverClose",BTt=E.forwardRef((i,t)=>{const{__scopePopover:e,...n}=i,r=Ah(HQ,e);return V.jsx(ue.button,{type:"button",...n,ref:t,onClick:Et(i.onClick,()=>r.onOpenChange(!1))})});BTt.displayName=HQ;var FTt="PopoverArrow",zTt=E.forwardRef((i,t)=>{const{__scopePopover:e,...n}=i,r=Cb(e);return V.jsx(bC,{...r,...n,ref:t})});zTt.displayName=FTt;function VQ(i){return i?"open":"closed"}var see=IQ,aee=FQ,oee=zQ,lee=NQ,NB="ToastProvider",[jB,NTt,jTt]=cC("Toast"),[WQ]=rs("Toast",[jTt]),[HTt,iM]=WQ(NB),$Q=i=>{const{__scopeToast:t,label:e="Notification",duration:n=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:a}=i,[o,l]=E.useState(null),[u,c]=E.useState(0),h=E.useRef(!1),d=E.useRef(!1);return e.trim()||console.error(`Invalid prop \`label\` supplied to \`${NB}\`. Expected non-empty \`string\`.`),V.jsx(jB.Provider,{scope:t,children:V.jsx(HTt,{scope:t,label:e,duration:n,swipeDirection:r,swipeThreshold:s,toastCount:u,viewport:o,onViewportChange:l,onToastAdd:E.useCallback(()=>c(f=>f+1),[]),onToastRemove:E.useCallback(()=>c(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:d,children:a})})};$Q.displayName=NB;var UQ="ToastViewport",VTt=["F8"],UO="toast.viewportPause",GO="toast.viewportResume",GQ=E.forwardRef((i,t)=>{const{__scopeToast:e,hotkey:n=VTt,label:r="Notifications ({hotkey})",...s}=i,a=iM(UQ,e),o=NTt(e),l=E.useRef(null),u=E.useRef(null),c=E.useRef(null),h=E.useRef(null),d=De(t,h,a.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=a.toastCount>0;E.useEffect(()=>{const m=_=>{n.length!==0&&n.every(y=>_[y]||_.code===y)&&h.current?.focus()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[n]),E.useEffect(()=>{const m=l.current,_=h.current;if(p&&m&&_){const v=()=>{if(!a.isClosePausedRef.current){const S=new CustomEvent(UO);_.dispatchEvent(S),a.isClosePausedRef.current=!0}},y=()=>{if(a.isClosePausedRef.current){const S=new CustomEvent(GO);_.dispatchEvent(S),a.isClosePausedRef.current=!1}},b=S=>{!m.contains(S.relatedTarget)&&y()},x=()=>{m.contains(document.activeElement)||y()};return m.addEventListener("focusin",v),m.addEventListener("focusout",b),m.addEventListener("pointermove",v),m.addEventListener("pointerleave",x),window.addEventListener("blur",v),window.addEventListener("focus",y),()=>{m.removeEventListener("focusin",v),m.removeEventListener("focusout",b),m.removeEventListener("pointermove",v),m.removeEventListener("pointerleave",x),window.removeEventListener("blur",v),window.removeEventListener("focus",y)}}},[p,a.isClosePausedRef]);const g=E.useCallback(({tabbingDirection:m})=>{const v=o().map(y=>{const b=y.ref.current,x=[b,...ePt(b)];return m==="forwards"?x:x.reverse()});return(m==="forwards"?v.reverse():v).flat()},[o]);return E.useEffect(()=>{const m=h.current;if(m){const _=v=>{const y=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!y){const x=document.activeElement,S=v.shiftKey;if(v.target===m&&S){u.current?.focus();return}const k=g({tabbingDirection:S?"backwards":"forwards"}),C=k.findIndex(M=>M===x);uE(k.slice(C+1))?v.preventDefault():S?u.current?.focus():c.current?.focus()}};return m.addEventListener("keydown",_),()=>m.removeEventListener("keydown",_)}},[o,g]),V.jsxs(Opt,{ref:l,role:"region","aria-label":r.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&V.jsx(YO,{ref:u,onFocusFromOutsideViewport:()=>{const m=g({tabbingDirection:"forwards"});uE(m)}}),V.jsx(jB.Slot,{scope:e,children:V.jsx(ue.ol,{tabIndex:-1,...s,ref:d})}),p&&V.jsx(YO,{ref:c,onFocusFromOutsideViewport:()=>{const m=g({tabbingDirection:"backwards"});uE(m)}})]})});GQ.displayName=UQ;var YQ="ToastFocusProxy",YO=E.forwardRef((i,t)=>{const{__scopeToast:e,onFocusFromOutsideViewport:n,...r}=i,s=iM(YQ,e);return V.jsx(TC,{tabIndex:0,...r,ref:t,style:{position:"fixed"},onFocus:a=>{const o=a.relatedTarget;!s.viewport?.contains(o)&&n()}})});YO.displayName=YQ;var Mb="Toast",WTt="toast.swipeStart",$Tt="toast.swipeMove",UTt="toast.swipeCancel",GTt="toast.swipeEnd",XQ=E.forwardRef((i,t)=>{const{forceMount:e,open:n,defaultOpen:r,onOpenChange:s,...a}=i,[o,l]=oo({prop:n,defaultProp:r??!0,onChange:s,caller:Mb});return V.jsx(ws,{present:e||o,children:V.jsx(KTt,{open:o,...a,ref:t,onClose:()=>l(!1),onPause:_s(i.onPause),onResume:_s(i.onResume),onSwipeStart:Et(i.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Et(i.onSwipeMove,u=>{const{x:c,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Et(i.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Et(i.onSwipeEnd,u=>{const{x:c,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});XQ.displayName=Mb;var[YTt,XTt]=WQ(Mb,{onClose(){}}),KTt=E.forwardRef((i,t)=>{const{__scopeToast:e,type:n="foreground",duration:r,open:s,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:h,onSwipeCancel:d,onSwipeEnd:f,...p}=i,g=iM(Mb,e),[m,_]=E.useState(null),v=De(t,O=>_(O)),y=E.useRef(null),b=E.useRef(null),x=r||g.duration,S=E.useRef(0),w=E.useRef(x),A=E.useRef(0),{onToastAdd:k,onToastRemove:C}=g,M=_s(()=>{m?.contains(document.activeElement)&&g.viewport?.focus(),a()}),R=E.useCallback(O=>{!O||O===1/0||(window.clearTimeout(A.current),S.current=new Date().getTime(),A.current=window.setTimeout(M,O))},[M]);E.useEffect(()=>{const O=g.viewport;if(O){const T=()=>{R(w.current),u?.()},D=()=>{const B=new Date().getTime()-S.current;w.current=w.current-B,window.clearTimeout(A.current),l?.()};return O.addEventListener(UO,D),O.addEventListener(GO,T),()=>{O.removeEventListener(UO,D),O.removeEventListener(GO,T)}}},[g.viewport,x,l,u,R]),E.useEffect(()=>{s&&!g.isClosePausedRef.current&&R(x)},[s,x,g.isClosePausedRef,R]),E.useEffect(()=>(k(),()=>C()),[k,C]);const P=E.useMemo(()=>m?eJ(m):null,[m]);return g.viewport?V.jsxs(V.Fragment,{children:[P&&V.jsx(qTt,{__scopeToast:e,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:P}),V.jsx(YTt,{scope:e,onClose:M,children:rc.createPortal(V.jsx(jB.ItemSlot,{scope:e,children:V.jsx(Rpt,{asChild:!0,onEscapeKeyDown:Et(o,()=>{g.isFocusedToastEscapeKeyDownRef.current||M(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:V.jsx(ue.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...i.style},onKeyDown:Et(i.onKeyDown,O=>{O.key==="Escape"&&(o?.(O.nativeEvent),O.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:Et(i.onPointerDown,O=>{O.button===0&&(y.current={x:O.clientX,y:O.clientY})}),onPointerMove:Et(i.onPointerMove,O=>{if(!y.current)return;const T=O.clientX-y.current.x,D=O.clientY-y.current.y,B=!!b.current,I=["left","right"].includes(g.swipeDirection),F=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,j=I?F(0,T):0,H=I?0:F(0,D),U=O.pointerType==="touch"?10:2,K={x:j,y:H},q={originalEvent:O,delta:K};B?(b.current=K,Kx($Tt,h,q,{discrete:!1})):JV(K,g.swipeDirection,U)?(b.current=K,Kx(WTt,c,q,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(T)>U||Math.abs(D)>U)&&(y.current=null)}),onPointerUp:Et(i.onPointerUp,O=>{const T=b.current,D=O.target;if(D.hasPointerCapture(O.pointerId)&&D.releasePointerCapture(O.pointerId),b.current=null,y.current=null,T){const B=O.currentTarget,I={originalEvent:O,delta:T};JV(T,g.swipeDirection,g.swipeThreshold)?Kx(GTt,f,I,{discrete:!0}):Kx(UTt,d,I,{discrete:!0}),B.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),qTt=i=>{const{__scopeToast:t,children:e,...n}=i,r=iM(Mb,t),[s,a]=E.useState(!1),[o,l]=E.useState(!1);return JTt(()=>a(!0)),E.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:V.jsx(Cm,{asChild:!0,children:V.jsx(TC,{...n,children:s&&V.jsxs(V.Fragment,{children:[r.label," ",e]})})})},ZTt="ToastTitle",KQ=E.forwardRef((i,t)=>{const{__scopeToast:e,...n}=i;return V.jsx(ue.div,{...n,ref:t})});KQ.displayName=ZTt;var QTt="ToastDescription",qQ=E.forwardRef((i,t)=>{const{__scopeToast:e,...n}=i;return V.jsx(ue.div,{...n,ref:t})});qQ.displayName=QTt;var ZQ="ToastAction",QQ=E.forwardRef((i,t)=>{const{altText:e,...n}=i;return e.trim()?V.jsx(tJ,{altText:e,asChild:!0,children:V.jsx(HB,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${ZQ}\`. Expected non-empty \`string\`.`),null)});QQ.displayName=ZQ;var JQ="ToastClose",HB=E.forwardRef((i,t)=>{const{__scopeToast:e,...n}=i,r=XTt(JQ,e);return V.jsx(tJ,{asChild:!0,children:V.jsx(ue.button,{type:"button",...n,ref:t,onClick:Et(i.onClick,r.onClose)})})});HB.displayName=JQ;var tJ=E.forwardRef((i,t)=>{const{__scopeToast:e,altText:n,...r}=i;return V.jsx(ue.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...r,ref:t})});function eJ(i){const t=[];return Array.from(i.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),tPt(n)){const r=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...eJ(n))}}),t}function Kx(i,t,e,{discrete:n}){const r=e.originalEvent.currentTarget,s=new CustomEvent(i,{bubbles:!0,cancelable:!0,detail:e});t&&r.addEventListener(i,t,{once:!0}),n?H2(r,s):r.dispatchEvent(s)}var JV=(i,t,e=0)=>{const n=Math.abs(i.x),r=Math.abs(i.y),s=n>r;return t==="left"||t==="right"?s&&n>e:!s&&r>e};function JTt(i=()=>{}){const t=_s(i);Hn(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}function tPt(i){return i.nodeType===i.ELEMENT_NODE}function ePt(i){const t=[],e=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function uE(i){const t=document.activeElement;return i.some(e=>e===t?!0:(e.focus(),document.activeElement!==t))}var uee=$Q,cee=GQ,hee=XQ,dee=KQ,fee=qQ,pee=QQ,gee=HB;function iPt(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function tW(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,n)}return e}function eW(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?tW(Object(e),!0).forEach(function(n){iPt(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):tW(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function nPt(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return function(n){return t.reduceRight(function(r,s){return s(r)},n)}}function G_(i){return function t(){for(var e=this,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return r.length>=i.length?i.apply(this,r):function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return t.apply(e,[].concat(r,o))}}}function _w(i){return{}.toString.call(i).includes("Object")}function rPt(i){return!Object.keys(i).length}function Qy(i){return typeof i=="function"}function sPt(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function aPt(i,t){return _w(t)||th("changeType"),Object.keys(t).some(function(e){return!sPt(i,e)})&&th("changeField"),t}function oPt(i){Qy(i)||th("selectorType")}function lPt(i){Qy(i)||_w(i)||th("handlerType"),_w(i)&&Object.values(i).some(function(t){return!Qy(t)})&&th("handlersType")}function uPt(i){i||th("initialIsRequired"),_w(i)||th("initialType"),rPt(i)&&th("initialContent")}function cPt(i,t){throw new Error(i[t]||i.default)}var hPt={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},th=G_(cPt)(hPt),qx={changes:aPt,selector:oPt,handler:lPt,initial:uPt};function dPt(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qx.initial(i),qx.handler(t);var e={current:i},n=G_(gPt)(e,t),r=G_(pPt)(e),s=G_(qx.changes)(i),a=G_(fPt)(e);function o(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(c){return c};return qx.selector(u),u(e.current)}function l(u){nPt(n,r,s,a)(u)}return[o,l]}function fPt(i,t){return Qy(t)?t(i.current):t}function pPt(i,t){return i.current=eW(eW({},i.current),t),t}function gPt(i,t,e){return Qy(t)?t(i.current):Object.keys(e).forEach(function(n){var r;return(r=t[n])===null||r===void 0?void 0:r.call(t,i.current[n])}),e}var mee={create:dPt};const iJ=i=>i;var wn;(function(i){i["desktop-browser"]="desktop-browser",i["mobile-browser"]="mobile-browser",i.node="node",i.worker="worker",i.miniApp="miniApp",i.wx="wx",i.tt="tt",i.harmony="harmony",i["desktop-miniApp"]="desktop-miniApp",i.lynx="lynx"})(wn||(wn={}));var lt;(function(i){i.cartesianAxis="cartesianAxis",i.cartesianBandAxis="cartesianAxis-band",i.cartesianLinearAxis="cartesianAxis-linear",i.cartesianTimeAxis="cartesianAxis-time",i.cartesianLogAxis="cartesianAxis-log",i.cartesianSymlogAxis="cartesianAxis-symlog",i.polarAxis="polarAxis",i.polarBandAxis="polarAxis-band",i.polarLinearAxis="polarAxis-linear",i.crosshair="crosshair",i.cartesianCrosshair="cartesianCrosshair",i.polarCrosshair="polarCrosshair",i.dataZoom="dataZoom",i.geoCoordinate="geoCoordinate",i.indicator="indicator",i.discreteLegend="discreteLegend",i.continuousLegend="continuousLegend",i.colorLegend="colorLegend",i.sizeLegend="sizeLegend",i.markLine="markLine",i.markArea="markArea",i.markPoint="markPoint",i.polarMarkLine="polarMarkLine",i.polarMarkArea="polarMarkArea",i.polarMarkPoint="polarMarkPoint",i.geoMarkPoint="geoMarkPoint",i.tooltip="tooltip",i.title="title",i.player="player",i.scrollBar="scrollBar",i.label="label",i.totalLabel="totalLabel",i.brush="brush",i.poptip="poptip",i.customMark="customMark"})(lt||(lt={}));var nJ={exports:{}};(function(i){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function r(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,h,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new r(c,h||l,d),p=e?e+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,h;if(this._eventsCount===0)return u;for(h in c=this._events)t.call(c,h)&&u.push(e?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=e?e+u:u,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,f=h.length,p=new Array(f);d<f;d++)p[d]=h[d].fn;return p},o.prototype.listenerCount=function(u){var c=e?e+u:u,h=this._events[c];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,c,h,d,f,p){var g=e?e+u:u;if(!this._events[g])return!1;var m=this._events[g],_=arguments.length,v,y;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),_){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,h),!0;case 4:return m.fn.call(m.context,c,h,d),!0;case 5:return m.fn.call(m.context,c,h,d,f),!0;case 6:return m.fn.call(m.context,c,h,d,f,p),!0}for(y=1,v=new Array(_-1);y<_;y++)v[y-1]=arguments[y];m.fn.apply(m.context,v)}else{var b=m.length,x;for(y=0;y<b;y++)switch(m[y].once&&this.removeListener(u,m[y].fn,void 0,!0),_){case 1:m[y].fn.call(m[y].context);break;case 2:m[y].fn.call(m[y].context,c);break;case 3:m[y].fn.call(m[y].context,c,h);break;case 4:m[y].fn.call(m[y].context,c,h,d);break;default:if(!v)for(x=1,v=new Array(_-1);x<_;x++)v[x-1]=arguments[x];m[y].fn.apply(m[y].context,v)}}return!0},o.prototype.on=function(u,c,h){return s(this,u,c,h,!1)},o.prototype.once=function(u,c,h){return s(this,u,c,h,!0)},o.prototype.removeListener=function(u,c,h,d){var f=e?e+u:u;if(!this._events[f])return this;if(!c)return a(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!d||p.once)&&(!h||p.context===h)&&a(this,f);else{for(var g=0,m=[],_=p.length;g<_;g++)(p[g].fn!==c||d&&!p[g].once||h&&p[g].context!==h)&&m.push(p[g]);m.length?this._events[f]=m.length===1?m[0]:m:a(this,f)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=e?e+u:u,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,i.exports=o})(nJ);var mPt=nJ.exports;const kh=ib(mPt),Om=(i,t)=>Object.prototype.toString.call(i)===`[object ${t}]`,Vn=(i,t=!1)=>t?typeof i=="boolean":i===!0||i===!1||Om(i,"Boolean"),it=i=>typeof i=="function",N=i=>i==null,L=i=>i!=null,ee=i=>{const t=typeof i;return i!==null&&t==="object"||t==="function"},_Pt=i=>typeof i=="object"&&i!==null,no=function(i){if(!_Pt(i)||!Om(i,"Object"))return!1;if(Object.getPrototypeOf(i)===null)return!0;let t=i;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(i)===t},Hi=i=>i===void 0,Ht=(i,t=!1)=>{const e=typeof i;return t?e==="string":e==="string"||Om(i,"String")},J=i=>Array.isArray?Array.isArray(i):Om(i,"Array"),VB=function(i){return i!==null&&typeof i!="function"&&Number.isFinite(i.length)},vPt=i=>Om(i,"Date"),yt=(i,t=!1)=>{const e=typeof i;return t?e==="number":e==="number"||Om(i,"Number")},yPt=i=>typeof i=="string"&&!isNaN(Number(i))&&!isNaN(parseFloat(i)),et=i=>yt(i)&&Number.isFinite(i),rJ=i=>new RegExp(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}$/).test(i),sJ=i=>new RegExp(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(i),bPt=i=>({}).toString.call(i).replace(/^\[object /,"").replace(/]$/,""),xPt=Object.prototype,SPt=function(i){const t=i&&i.constructor;return i===(typeof t=="function"&&t.prototype||xPt)},wPt=Object.prototype.hasOwnProperty;function Lt(i){if(N(i))return!0;if(VB(i))return!i.length;const t=bPt(i);if(t==="Map"||t==="Set")return!i.size;if(SPt(i))return!Object.keys(i).length;for(const e in i)if(wPt.call(i,e))return!1;return!0}const be=(i,t,e)=>{const n=Ht(t)?t.split("."):t;for(let r=0;r<n.length;r++)i=i?i[n[r]]:void 0;return i===void 0?e:i},APt=Object.prototype.hasOwnProperty,kPt=(i,t)=>i!=null&&APt.call(i,t);function Jr(i,t,e){let n;if(!L(i)||typeof i!="object"||t&&t(i))return i;const r=J(i),s=i.length;n=r?new Array(s):typeof i=="object"?{}:Vn(i)||yt(i)||Ht(i)?i:vPt(i)?new Date(+i):void 0;const a=r?void 0:Object.keys(Object(i));let o=-1;if(n)for(;++o<(a||i).length;){const l=a?a[o]:o,u=i[l];e&&e.includes(l.toString())?n[l]=u:n[l]=Jr(u,t,e)}return n}function WB(i,t,e=!1,n=!1){if(t){if(i===t)return;if(L(t)&&typeof t=="object"){const r=Object(t),s=[];for(const l in r)s.push(l);let{length:a}=s,o=-1;for(;a--;){const l=s[++o];!L(r[l])||typeof r[l]!="object"||n&&J(i[l])?aJ(i,l,r[l]):CPt(i,t,l,e,n)}}}}function CPt(i,t,e,n=!1,r=!1){const s=i[e],a=t[e];let o=t[e],l=!0;if(J(a)){if(n)o=[];else if(J(s))o=s;else if(VB(s)){o=new Array(s.length);let u=-1;const c=s.length;for(;++u<c;)o[u]=s[u]}}else no(a)?(o=s??{},typeof s!="function"&&typeof s=="object"||(o={})):l=!1;l&&WB(o,a,n,r),aJ(i,e,o)}function aJ(i,t,e){(e!==void 0&&!MPt(i[t],e)||e===void 0&&!(t in i))&&(i[t]=e)}function MPt(i,t){return i===t||Number.isNaN(i)&&Number.isNaN(t)}function ot(i,...t){let e=-1;const n=t.length;for(;++e<n;)WB(i,t[e],!0);return i}function xa(i,t){if(!i||!no(i))return i;const e={};return Object.keys(i).forEach(n=>{const r=i[n];let s=!1;t.forEach(a=>{(Ht(a)&&a===n||a instanceof RegExp&&n.match(a))&&(s=!0)}),s||(e[n]=r)}),e}function iW(i){return Object.prototype.toString.call(i)}function nW(i){return Object.keys(i)}function Ne(i,t,e){if(i===t)return!0;if(typeof i!=typeof t||i==null||t==null)return!1;if(Number.isNaN(i)&&Number.isNaN(t))return!0;if(iW(i)!==iW(t))return!1;if(it(i))return!!e?.skipFunction;if(typeof i!="object")return!1;if(J(i)){if(i.length!==t.length)return!1;for(let s=i.length-1;s>=0;s--)if(!Ne(i[s],t[s],e))return!1;return!0}if(!no(i))return!1;const n=nW(i),r=nW(t);if(n.length!==r.length)return!1;n.sort(),r.sort();for(let s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(let s=n.length-1;s>=0;s--){const a=n[s];if(!Ne(i[a],t[a],e))return!1}return!0}function TPt(i){if(!i)return[];if(Object.keys)return Object.keys(i);const t=[];for(const e in i)i.hasOwnProperty(e)&&t.push(e);return t}function PPt(i,t,e){const n=TPt(t);for(let r=0;r<n.length;r++){const s=n[r];(e?t[s]!=null:i[s]==null)&&(i[s]=t[s])}return i}function Be(i,t,e=!0){if(i="prototype"in i?i.prototype:i,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames){const n=Object.getOwnPropertyNames(t);for(let r=0;r<n.length;r++){const s=n[r];s!=="constructor"&&(e?t[s]!=null:i[s]==null)&&(i[s]=t[s])}}else PPt(i,t,e)}function X(i){return L(i)?J(i)?i:[i]:[]}function ke(i){if(VB(i))return i[i.length-1]}const rn=(i,t)=>{var e;if(i.length===0)return;let n=i[0];for(let r=1;r<i.length;r++){const s=i[r];((e=t?.(s,n))!==null&&e!==void 0?e:s-n)>0&&(n=s)}return n},Rn=(i,t)=>{var e;if(i.length===0)return;let n=i[0];for(let r=1;r<i.length;r++){const s=i[r];((e=t?.(s,n))!==null&&e!==void 0?e:s-n)<0&&(n=s)}return n};function Zx(i,t){if(!J(i)||!J(t)||i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==t[e])return!1;return!0}function EPt(i){return i&&J(i)?Array.from(new Set(X(i))):i}function oJ(i,t=Math.random){let e,n,r=i.length;for(;r;)e=Math.floor(t()*r),n=i[--r],i[r]=i[e],i[e]=n;return i}function XO(i){if(!J(i))return[i];const t=[];for(const e of i)t.push(...XO(e));return t}function lJ(i,t,e){L(t)||(t=i,i=0),L(e)||(e=1);let n=-1;const r=0|Math.max(0,Math.ceil((t-i)/e)),s=new Array(r);for(;++n<r;)s[n]=i+n*e;return s}function uJ(i,t){return i<t?-1:i>t?1:i>=t?0:NaN}function Lc(i){return Number(i)}function np(i,t,e=Lc){const n=i.length;if(!n)return;if(t<=0||n<2)return e(i[0],0,i);if(t>=1)return e(i[n-1],n-1,i);const r=(n-1)*t,s=Math.floor(r),a=e(i[s],s,i);return a+(e(i[s+1],s+1,i)-a)*(r-s)}const RPt=typeof console<"u";function Qx(i,t,e){const n=[t].concat([].slice.call(e));RPt&&console[i].apply(console,n)}var Ia;(function(i){i[i.None=0]="None",i[i.Error=1]="Error",i[i.Warn=2]="Warn",i[i.Info=3]="Info",i[i.Debug=4]="Debug"})(Ia||(Ia={}));class Ee{static getInstance(t,e){return Ee._instance&&yt(t)?Ee._instance.level(t):Ee._instance||(Ee._instance=new Ee(t,e)),Ee._instance}static setInstance(t){return Ee._instance=t}static setInstanceLevel(t){Ee._instance?Ee._instance.level(t):Ee._instance=new Ee(t)}static clearInstance(){Ee._instance=null}constructor(t=Ia.None,e){this._onErrorHandler=[],this._level=t,this._method=e}addErrorHandler(t){this._onErrorHandler.find(e=>e===t)||this._onErrorHandler.push(t)}removeErrorHandler(t){const e=this._onErrorHandler.findIndex(n=>n===t);e<0||this._onErrorHandler.splice(e,1)}callErrorHandler(...t){this._onErrorHandler.forEach(e=>e(...t))}canLogInfo(){return this._level>=Ia.Info}canLogDebug(){return this._level>=Ia.Debug}canLogError(){return this._level>=Ia.Error}canLogWarn(){return this._level>=Ia.Warn}level(t){return arguments.length?(this._level=+t,this):this._level}error(...t){var e;return this._level>=Ia.Error&&(this._onErrorHandler.length?this.callErrorHandler(...t):Qx((e=this._method)!==null&&e!==void 0?e:"error","ERROR",t)),this}warn(...t){return this._level>=Ia.Warn&&Qx(this._method||"warn","WARN",t),this}info(...t){return this._level>=Ia.Info&&Qx(this._method||"log","INFO",t),this}debug(...t){return this._level>=Ia.Debug&&Qx(this._method||"log","DEBUG",t),this}}Ee._instance=null;function cJ(i,t,e=0,n){for(N(n)&&(n=i.length);e<n;){const r=e+n>>>1;uJ(i[r],t)>0?n=r:e=r+1}return e}function OPt(i,t,e,n){var r,s;const a=(r=void 0)!==null&&r!==void 0?r:100,o=(s=void 0)!==null&&s!==void 0?s:1e-10,l=i(t),u=i(e);let c=e-t;if(l*u>0)return Ee.getInstance().error("Initial bisect points must have opposite signs"),NaN;if(l===0)return t;if(u===0)return e;for(let h=0;h<a;++h){c/=2;const d=t+c,f=i(d);if(f*l>=0&&(t=d),Math.abs(c)<o||f===0)return d}return t+c}const rW=(i,t)=>hJ(0,i.length,e=>t(i[e])),hJ=(i,t,e)=>{let n=i,r=t;for(;n<r;){const s=Math.floor((n+r)/2);e(s)>=0?r=s:n=s+1}return n},DPt=(i,t)=>{let e=i;return e=i.sort(uJ),np(e,.5)},IPt=1e-10,LPt=1e-10;function sn(i,t,e=LPt,n=IPt){const r=n,s=e*Math.max(i,t);return Math.abs(i-t)<=Math.max(r,s)}function pu(i,t,e,n){return i>t&&!sn(i,t,e,n)}function fl(i,t,e,n){return i<t&&!sn(i,t,e,n)}const Tb=i=>{let t=null,e=null;return(...n)=>(t&&n.every((r,s)=>r===t[s])||(t=n,e=i(...n)),e)},Ke=function(i,t,e){return i<t?t:i>e?e:i},Yh=(i,t,e)=>{let[n,r]=i;r<n&&(n=i[1],r=i[0]);const s=r-n;return s>=e-t?[t,e]:(n=Math.min(Math.max(n,t),e-s),[n,n+s])};function jg(i,t){let e;return i>t&&(e=i,i=t,t=e),n=>Math.max(i,Math.min(t,n))}let vw=!1;try{vw=typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"}catch{vw=!1}function pf(i,t,e){let n,r,s,a,o,l,u=0,c=!1,h=!1,d=!0;const f=!t&&t!==0&&vw;if(typeof i!="function")throw new TypeError("Expected a function");function p(b){const x=n,S=r;return n=r=void 0,u=b,a=i.apply(S,x),a}function g(b,x){return f?(cancelAnimationFrame(o),requestAnimationFrame(b)):setTimeout(b,x)}function m(b){const x=b-l;return l===void 0||x>=t||x<0||h&&b-u>=s}function _(){const b=Date.now();if(m(b))return v(b);o=g(_,function(x){const S=x-u,w=t-(x-l);return h?Math.min(w,s-S):w}(b))}function v(b){return o=void 0,d&&n?p(b):(n=r=void 0,a)}function y(...b){const x=Date.now(),S=m(x);if(n=b,r=this,l=x,S){if(o===void 0)return function(w){return u=w,o=g(_,t),c?p(w):a}(l);if(h)return o=g(_,t),p(l)}return o===void 0&&(o=g(_,t)),a}return t=+t||0,ee(e)&&(c=!!e.leading,h="maxWait"in e,h&&(s=Math.max(et(e.maxWait)?e.maxWait:0,t)),d="trailing"in e?!!e.trailing:d),y.cancel=function(){o!==void 0&&function(b){if(f)return cancelAnimationFrame(b);clearTimeout(b)}(o),u=0,n=l=r=o=void 0},y.flush=function(){return o===void 0?a:v(Date.now())},y.pending=function(){return o!==void 0},y}vw=!1;function ac(i,t,e){let n=!0,r=!0;if(typeof i!="function")throw new TypeError("Expected a function");return ee(e)&&(n="leading"in e?!!e.leading:n,r="trailing"in e?!!e.trailing:r),pf(i,t,{leading:n,trailing:r,maxWait:t})}function l1(i,t){return e=>i*(1-e)+t*e}function BPt(i,t){return function(e){return Math.round(i*(1-e)+t*e)}}function FPt(i,t){const e=i.valueOf(),n=t.valueOf(),r=new Date;return s=>(r.setTime(e*(1-s)+n*s),r)}function xd(i){if(et(i))return i;const t=+i;return et(t)?t:0}function dJ(i){return parseFloat("0."+Math.sin(i).toString().substring(6))}const zPt=1664525,NPt=1013904223,sW=4294967296;function jPt(i=1){let t=i;return()=>(t=(zPt*t+NPt)%sW)/sW}const HPt=()=>{let i=-1;const t=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9];return()=>(i=(i+1)%t.length,t[i])},VPt=i=>t=>be(t,i),aW=(i,t={})=>{if(it(i))return i;const e=[i];return(t&&t.get||VPt)(e)},Hg=(i,t={})=>{if(J(i)){const e=i.map(n=>aW(n,t));return n=>e.map(r=>r(n))}return aW(i,t)},cs=i=>i?typeof i=="string"||typeof i=="number"?()=>i:it(i)?i:t=>t[i.field]:null,Mo=(i,t)=>N(i)?t:Ht(i)?t*parseFloat(i)/100:i,WPt=i=>0,oW=(i,t)=>{const e=it(t)?t:s=>s;let n,r;if(i&&i.length){const s=i.length;for(let a=0;a<s;a+=1){let o=e(i[a]);N(o)||!yt(o=+o)||Number.isNaN(o)||(N(n)?(n=o,r=o):(n=Math.min(n,o),r=Math.max(r,o)))}return[n,r]}return[n,r]};function $Pt(i){if(i<=0||i>=1)return 0;const t=-.00778489400243029,e=-.322396458041136,n=-2.40075827716184,r=-2.54973253934373,s=4.37466414146497,a=2.93816398269878,o=.00778469570904146,l=.32246712907004,u=2.445134137143,c=3.75440866190742;let h,d;return i<.02425?(h=Math.sqrt(-2*Math.log(i)),(((((t*h+e)*h+n)*h+r)*h+s)*h+a)/((((o*h+l)*h+u)*h+c)*h+1)):i<=.97575?(h=i-.5,d=h*h,(((((-39.6968302866538*d+220.946098424521)*d-275.928510446969)*d+138.357751867269)*d-30.6647980661472)*d+2.50662827745924)*h/(((((-54.4760987982241*d+161.585836858041)*d-155.698979859887)*d+66.8013118877197)*d-13.2806815528857)*d+1)):(h=Math.sqrt(-2*Math.log(1-i)),-(((((t*h+e)*h+n)*h+r)*h+s)*h+a)/((((o*h+l)*h+u)*h+c)*h+1))}function UPt(i,t,e,n){let r=1/0,s=-1/0,a=0,o=0;for(let h=0;h<i.length;h++){const d=i[h];let f=t(d),p=e(d);!N(f)&&(f=+f)>=f&&!N(p)&&(p=+p)>=p&&(f<r&&(r=f),f>s&&(s=f),a++,o+=f)}if(a===0)return{min:r,max:s,n:a,X:0,SSE:0,Sxx:0};const l=o/a;let u=0,c=0;for(let h=0;h<i.length;h++){const d=i[h];let f=t(d),p=e(d);if(!N(f)&&(f=+f)>=f&&!N(p)&&(p=+p)>=p){const g=p-n(f);u+=g*g;const m=f-l;c+=m*m}}return{min:r,max:s,n:a,X:l,SSE:u,Sxx:c}}function lW(i,t){const{n:e,X:n,Sxx:r,SSE:s}=t,a=e>2?s/(e-2):0;return{seMean:r>0?Math.sqrt(a*(1/e+(i-n)*(i-n)/r)):Math.sqrt(a/e),sePred:Math.sqrt(a*(1+1/e+(r>0?(i-n)*(i-n)/r:0)))}}function GPt(i,t,e,n){const r=n-i*i;if(Math.abs(r)<Number.EPSILON)return{a:t,b:0};const s=(e-i*t)/r;return{a:t-s*i,b:s}}function YPt(i,t,e,n){for(let r=0;r<i.length;r++){const s=i[r];let a=t(s),o=e(s);!N(a)&&(a=+a)>=a&&!N(o)&&(o=+o)>=o&&n(a,o,r)}}function XPt(i,t,e,n,r){let s=0,a=0;for(let o=0;o<i.length;o++){const l=i[o];let u=e(l);if(!N(u)&&(u=+u)>=u){const c=u-r(t(l));s+=c*c;const h=u-n;a+=h*h}}return a===0?0:1-s/a}function KPt(i,t=r=>r.x,e=r=>r.y,n){var r;const s=(r=n?.alpha)!==null&&r!==void 0?r:.05;let a=0,o=0,l=0,u=0,c=0;YPt(i,t,e,(g,m)=>{a++,o+=(g-o)/a,l+=(m-l)/a,u+=(g*m-u)/a,c+=(g*g-c)/a});const{a:h,b:d}=GPt(o,l,u,c),f=g=>h+d*g,p=UPt(i,t,e,f);return{coef:{a:h,b:d},predict:f,rSquared:XPt(i,t,e,l,f),evaluateGrid:function(g){const m=[];if(p.n===0||g<=0)return m;if(p.min===p.max){for(let v=0;v<g;v++)m.push({x:p.min,y:f(p.min)});return m}const _=(p.max-p.min)/(g-1);for(let v=0;v<g;v++){const y=v===g-1?p.max:p.min+_*v;m.push({x:y,y:f(y)})}return m},confidenceInterval:function(g=50){const m=[];if(p.n===0||g<=0)return m;const _=$Pt(1-s/2);if(p.min===p.max){const y=f(p.min),b=lW(p.min,p);for(let x=0;x<g;x++)m.push({x:p.min,mean:y,lower:y-_*b.seMean,upper:y+_*b.seMean,predLower:y-_*b.sePred,predUpper:y+_*b.sePred});return m}const v=(p.max-p.min)/(g-1);for(let y=0;y<g;y++){const b=y===g-1?p.max:p.min+v*y,x=f(b),S=lW(b,p);m.push({x:b,mean:x,lower:x-_*S.seMean,upper:x+_*S.seMean,predLower:x-_*S.sePred,predUpper:x+_*S.sePred})}return m}}}const Ye=1e-12,Xe=Math.PI,Ua=Xe/2,Lr=2*Xe,qt=2*Math.PI,xe=Math.abs,ri=Math.atan2,Ri=Math.cos,Nn=Math.max,gn=Math.min,fi=Math.sin,ro=Math.sqrt,Vf=Math.pow;function qPt(i){return i>1?0:i<-1?Xe:Math.acos(i)}function uW(i){return i>=1?Ua:i<=-1?-Ua:Math.asin(i)}function cW(i,t,e,n,r){let s=e,a=n;return typeof i=="number"&&typeof e=="number"&&(s=(1-r)*i+r*e),typeof t=="number"&&typeof n=="number"&&(a=(1-r)*t+r*n),{x:s,y:a}}function yw(i,t){return i[0]*t[1]-i[1]*t[0]}function lg(i,t){let e=0;for(let n=0;n<i.length;++n)e+=i[n]*t[n];return e}function ZPt(i,t){return xe(i[0]-t[0])+xe(i[1]-t[1])<1e-12}function fJ(i,t=10){return Math.round(i*t)/t}function Vg(i){const t=i.toString().split(/[eE]/),e=(t[0].split(".")[1]||"").length-(+t[1]||0);return e>0?e:0}function Ol(i,t){return fJ(i+t,10**Math.max(Vg(i),Vg(t)))}function Jy(i,t){return fJ(i-t,10**Math.max(Vg(i),Vg(t)))}class ci{constructor(t=0,e=0,n,r){this.x=0,this.y=0,this.x=t,this.y=e,this.x1=n,this.y1=r}clone(){return new ci(this.x,this.y)}copyFrom(t){return this.x=t.x,this.y=t.y,this.x1=t.x1,this.y1=t.y1,this.defined=t.defined,this.context=t.context,this}set(t,e){return this.x=t,this.y=e,this}add(t){return yt(t)?(this.x+=t,void(this.y+=t)):(this.x+=t.x,this.y+=t.y,this)}sub(t){return yt(t)?(this.x-=t,void(this.y-=t)):(this.x-=t.x,this.y-=t.y,this)}multi(t){throw new Error("")}div(t){throw new Error("")}}class Je{static distancePP(t,e){return ro(Vf(t.x-e.x,2)+Vf(t.y-e.y,2))}static distanceNN(t,e,n,r){return ro(Vf(t-n,2)+Vf(e-r,2))}static distancePN(t,e,n){return ro(Vf(e-t.x,2)+Vf(n-t.y,2))}static pointAtPP(t,e,n){return new ci((e.x-t.x)*n+t.x,(e.y-t.y)*n+t.y)}}function ii(i){return i*(Math.PI/180)}function t0(i){return 180*i/Math.PI}const QPt=(i=0)=>{if(i<0)for(;i<-Lr;)i+=Lr;else if(i>0)for(;i>Lr;)i-=Lr;return i},JPt=QPt;function yi(i,t,e){return t?{x:i.x+t*Math.cos(e),y:i.y+t*Math.sin(e)}:{x:i.x,y:i.y}}function e0(i,t={x:0,y:0},e=0,n=2*Math.PI){const{x:r,y:s}=i,{x:a,y:o}=t;let l=r-a,u=s-o;const c=Math.sqrt(l*l+u*u);if(c===0)return{radius:0,angle:0};l/=c,u/=c;let h=Math.atan2(u,l);if(h<e)for(;h<=e;)h+=2*Math.PI;if(h>n)for(;h>=n;)h-=2*Math.PI;return{radius:c,angle:h}}function pJ(i,t){return Math.atan2(t.y-i.y,t.x-i.x)}function oh(i){for(;i<0;)i+=2*Math.PI;for(;i>=2*Math.PI;)i-=2*Math.PI;return i}function tEt(i,t){const e=Math.abs(t-i);if(e>=2*Math.PI||2*Math.PI-e<1e-6)return[0,Math.PI/2,Math.PI,1.5*Math.PI];const n=oh(Math.min(i,t)),r=n+e,s=[n,r];let a=Math.floor(n/Math.PI)*Math.PI/2;for(;a<r;)a>n&&s.push(a),a+=Math.PI/2;return s}function eEt(i,t,e,n){const{x:r,y:s}=t,a=tEt(e,n),{width:o,height:l}=i,u=[];return a.forEach(c=>{const h=Math.sin(c),d=Math.cos(c);h===1?u.push(l-s):h===-1?u.push(s):d===1?u.push(o-r):d===-1?u.push(r):(h>0?u.push(Math.abs((l-s)/h)):u.push(Math.abs(s/h)),d>0?u.push(Math.abs((o-r)/d)):u.push(Math.abs(r/d)))}),Math.min.apply(null,u)}function gJ(i){return(i=oh(i))>0&&i<=Math.PI/2?2:i>Math.PI/2&&i<=Math.PI?3:i>Math.PI&&i<=3*Math.PI/2?4:1}function cE(i,t,e){i[0]=t[0]-e[0],i[1]=t[1]-e[1]}function mJ(i,t,e,n){let r=i[0],s=t[0],a=e[0],o=n[0];return s<r&&([r,s]=[s,r]),o<a&&([o,a]=[a,o]),!(s<a||o<r)&&(r=i[1],s=t[1],a=e[1],o=n[1],s<r&&([r,s]=[s,r]),o<a&&([o,a]=[a,o]),!(s<a||o<r))}function _J(i,t,e,n){if(!mJ(i,t,e,n))return!1;const r=[0,0],s=[0,0],a=[0,0];if(cE(r,t,i),cE(s,n,e),ZPt(r,s))return!0;cE(a,e,i);const o=yw(a,s)/yw(r,s);return o>=0&&o<=1&&[i[0]+r[0]*o,i[1]+r[1]*o]}function vJ(i,t,e){if(i===null)return t;if(t===null)return i;const{x11:n,x12:r,y11:s,y12:a,x21:o,x22:l,y21:u,y22:c}=$B(i,t,e);return n>=l||r<=o||s>=c||a<=u?{x1:0,y1:0,x2:0,y2:0}:{x1:Math.max(n,o),y1:Math.max(s,u),x2:Math.min(r,l),y2:Math.min(a,c)}}var Mp;(function(i){i[i.NONE=0]="NONE",i[i.BBOX1=1]="BBOX1",i[i.BBOX2=2]="BBOX2"})(Mp||(Mp={}));const $B=(i,t,e)=>{let n=i.x1,r=i.x2,s=i.y1,a=i.y2,o=t.x1,l=t.x2,u=t.y1,c=t.y2;return e&&(n>r&&([n,r]=[r,n]),s>a&&([s,a]=[a,s]),o>l&&([o,l]=[l,o]),u>c&&([u,c]=[c,u])),{x11:n,x12:r,y11:s,y12:a,x21:o,x22:l,y21:u,y22:c}};function iEt(i,t,e){if(!i||!t)return Mp.NONE;const{x11:n,x12:r,y11:s,y12:a,x21:o,x22:l,y21:u,y22:c}=$B(i,t,e);return n>o&&r<l&&s>u&&a<c?Mp.BBOX1:o>n&&l<r&&u>s&&c<a?Mp.BBOX2:Mp.NONE}function i0(i,t,e){if(i&&t){if(!e)return!(i.x1>t.x2||i.x2<t.x1||i.y1>t.y2||i.y2<t.y1);const{x11:n,x12:r,y11:s,y12:a,x21:o,x22:l,y21:u,y22:c}=$B(i,t,!0);return!(n>l||r<o||s>c||a<u)}return!0}function ug(i,t,e){if(!t)return!0;if(!e)return i.x>=t.x1&&i.x<=t.x2&&i.y>=t.y1&&i.y<=t.y2;let n=t.x1,r=t.x2,s=t.y1,a=t.y2;return n>r&&([n,r]=[r,n]),s>a&&([s,a]=[a,s]),i.x>=n&&i.x<=r&&i.y>=s&&i.y<=a}function hE(i,t){return Math.abs(t[0]*i[0]+t[1]*i[1])}function Dl({x:i,y:t},e,n={x:0,y:0}){return{x:(i-n.x)*Math.cos(e)-(t-n.y)*Math.sin(e)+n.x,y:(i-n.x)*Math.sin(e)+(t-n.y)*Math.cos(e)+n.y}}function KO(i){return{x:(i.x1+i.x2)/2,y:(i.y1+i.y2)/2}}function hW(i,t){const e=t?ii(i.angle):i.angle,n=KO(i);return[Dl({x:i.x1,y:i.y1},e,n),Dl({x:i.x2,y:i.y1},e,n),Dl({x:i.x2,y:i.y2},e,n),Dl({x:i.x1,y:i.y2},e,n)]}function yJ(i,t,e=!1){const n=hW(i,e),r=hW(t,e),s=(m,_)=>[_.x-m.x,_.y-m.y],a=s(KO(i),KO(t)),o=s(n[0],n[1]),l=s(n[1],n[2]),u=s(r[0],r[1]),c=s(r[1],r[2]),h=e?ii(i.angle):i.angle;let d=e?ii(90-i.angle):i.angle+Ua;const f=e?ii(t.angle):t.angle;let p=e?ii(90-t.angle):t.angle+Ua;d>qt&&(d-=qt),p>qt&&(p-=qt);const g=(m,_,v,y)=>{const b=[Math.cos(_),Math.sin(_)];return m+(hE(b,v)+hE(b,y))/2>hE(b,a)};return g((i.x2-i.x1)/2,h,u,c)&&g((i.y2-i.y1)/2,d,u,c)&&g((t.x2-t.x1)/2,f,o,l)&&g((t.y2-t.y1)/2,p,o,l)}let Jx,tS,eS,iS;function nEt(i){return Jx=1/0,tS=1/0,eS=-1/0,iS=-1/0,i.forEach(t=>{Jx>t.x&&(Jx=t.x),eS<t.x&&(eS=t.x),tS>t.y&&(tS=t.y),iS<t.y&&(iS=t.y)}),{x1:Jx,y1:tS,x2:eS,y2:iS}}const rEt=1e-8;function sEt(i,t,e,n,r){for(let s=0,a=r[r.length-1];s<r.length;s++){const o=r[s];if(mJ([i,t],[e,n],[o.x,o.y],[a.x,a.y]))return!0;a=o}return!1}function UB(i,t,e){let n=0,r=i[0];if(!r)return!1;for(let a=1;a<i.length;a++){const o=i[a];n+=gu(r.x,r.y,o.x,o.y,t,e),r=o}const s=i[0];return dW(r.x,s.x)&&dW(r.y,s.y)||(n+=gu(r.x,r.y,s.x,s.y,t,e)),n!==0}function gu(i,t,e,n,r,s){if(s>t&&s>n||s<t&&s<n||n===t)return 0;const a=(s-t)/(n-t);let o=n<t?1:-1;a!==1&&a!==0||(o=n<t?.5:-.5);const l=a*(e-i)+i;return l===r?1/0:l>r?o:0}function dW(i,t){return Math.abs(i-t)<rEt}function aEt(i,t){for(let e=0;e<t.length;e++)if(UB(i,t[e].x,t[e].y)||e>0&&sEt(t[e-1].x,t[e-1].y,t[e].x,t[e].y,i))return!0;return!1}const fW=i=>{let t=i.charCodeAt(0),e=i.length===2?i.charCodeAt(1):0,n=t;return 55296<=t&&t<=56319&&56320<=e&&e<=57343&&(t&=1023,e&=1023,n=t<<10|e,n+=65536),n===12288||65281<=n&&n<=65376||65504<=n&&n<=65510?"F":n===8361||65377<=n&&n<=65470||65474<=n&&n<=65479||65482<=n&&n<=65487||65490<=n&&n<=65495||65498<=n&&n<=65500||65512<=n&&n<=65518?"H":4352<=n&&n<=4447||4515<=n&&n<=4519||4602<=n&&n<=4607||9001<=n&&n<=9002||11904<=n&&n<=11929||11931<=n&&n<=12019||12032<=n&&n<=12245||12272<=n&&n<=12283||12289<=n&&n<=12350||12353<=n&&n<=12438||12441<=n&&n<=12543||12549<=n&&n<=12589||12593<=n&&n<=12686||12688<=n&&n<=12730||12736<=n&&n<=12771||12784<=n&&n<=12830||12832<=n&&n<=12871||12880<=n&&n<=13054||13056<=n&&n<=19903||19968<=n&&n<=42124||42128<=n&&n<=42182||43360<=n&&n<=43388||44032<=n&&n<=55203||55216<=n&&n<=55238||55243<=n&&n<=55291||63744<=n&&n<=64255||65040<=n&&n<=65049||65072<=n&&n<=65106||65108<=n&&n<=65126||65128<=n&&n<=65131||110592<=n&&n<=110593||127488<=n&&n<=127490||127504<=n&&n<=127546||127552<=n&&n<=127560||127568<=n&&n<=127569||131072<=n&&n<=194367||177984<=n&&n<=196605||196608<=n&&n<=262141?"W":32<=n&&n<=126||162<=n&&n<=163||165<=n&&n<=166||n===172||n===175||10214<=n&&n<=10221||10629<=n&&n<=10630?"Na":n===161||n===164||167<=n&&n<=168||n===170||173<=n&&n<=174||176<=n&&n<=180||182<=n&&n<=186||188<=n&&n<=191||n===198||n===208||215<=n&&n<=216||222<=n&&n<=225||n===230||232<=n&&n<=234||236<=n&&n<=237||n===240||242<=n&&n<=243||247<=n&&n<=250||n===252||n===254||n===257||n===273||n===275||n===283||294<=n&&n<=295||n===299||305<=n&&n<=307||n===312||319<=n&&n<=322||n===324||328<=n&&n<=331||n===333||338<=n&&n<=339||358<=n&&n<=359||n===363||n===462||n===464||n===466||n===468||n===470||n===472||n===474||n===476||n===593||n===609||n===708||n===711||713<=n&&n<=715||n===717||n===720||728<=n&&n<=731||n===733||n===735||768<=n&&n<=879||913<=n&&n<=929||931<=n&&n<=937||945<=n&&n<=961||963<=n&&n<=969||n===1025||1040<=n&&n<=1103||n===1105||n===8208||8211<=n&&n<=8214||8216<=n&&n<=8217||8220<=n&&n<=8221||8224<=n&&n<=8226||8228<=n&&n<=8231||n===8240||8242<=n&&n<=8243||n===8245||n===8251||n===8254||n===8308||n===8319||8321<=n&&n<=8324||n===8364||n===8451||n===8453||n===8457||n===8467||n===8470||8481<=n&&n<=8482||n===8486||n===8491||8531<=n&&n<=8532||8539<=n&&n<=8542||8544<=n&&n<=8555||8560<=n&&n<=8569||n===8585||8592<=n&&n<=8601||8632<=n&&n<=8633||n===8658||n===8660||n===8679||n===8704||8706<=n&&n<=8707||8711<=n&&n<=8712||n===8715||n===8719||n===8721||n===8725||n===8730||8733<=n&&n<=8736||n===8739||n===8741||8743<=n&&n<=8748||n===8750||8756<=n&&n<=8759||8764<=n&&n<=8765||n===8776||n===8780||n===8786||8800<=n&&n<=8801||8804<=n&&n<=8807||8810<=n&&n<=8811||8814<=n&&n<=8815||8834<=n&&n<=8835||8838<=n&&n<=8839||n===8853||n===8857||n===8869||n===8895||n===8978||9312<=n&&n<=9449||9451<=n&&n<=9547||9552<=n&&n<=9587||9600<=n&&n<=9615||9618<=n&&n<=9621||9632<=n&&n<=9633||9635<=n&&n<=9641||9650<=n&&n<=9651||9654<=n&&n<=9655||9660<=n&&n<=9661||9664<=n&&n<=9665||9670<=n&&n<=9672||n===9675||9678<=n&&n<=9681||9698<=n&&n<=9701||n===9711||9733<=n&&n<=9734||n===9737||9742<=n&&n<=9743||9748<=n&&n<=9749||n===9756||n===9758||n===9792||n===9794||9824<=n&&n<=9825||9827<=n&&n<=9829||9831<=n&&n<=9834||9836<=n&&n<=9837||n===9839||9886<=n&&n<=9887||9918<=n&&n<=9919||9924<=n&&n<=9933||9935<=n&&n<=9953||n===9955||9960<=n&&n<=9983||n===10045||n===10071||10102<=n&&n<=10111||11093<=n&&n<=11097||12872<=n&&n<=12879||57344<=n&&n<=63743||65024<=n&&n<=65039||n===65533||127232<=n&&n<=127242||127248<=n&&n<=127277||127280<=n&&n<=127337||127344<=n&&n<=127386||917760<=n&&n<=917999||983040<=n&&n<=1048573||1048576<=n&&n<=1114109?"A":"N"};function bw(i,t={},e){e||(e=1);const{fontStyle:n=t.fontStyle,fontVariant:r=t.fontVariant,fontWeight:s=t.fontWeight,fontSize:a=t.fontSize,fontFamily:o=t.fontFamily}=i;return(n?n+" ":"")+(r?r+" ":"")+(s?s+" ":"")+a*e+"px "+(o||"sans-serif")}class Zr{constructor(t,e){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet=`-/: .,@%'"~`,this._option=t,this._userSpec=e??{},this.textSpec=this._initSpec(),L(t.specialCharSet)&&(this.specialCharSet=t.specialCharSet),this._standardMethod=L(t.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}initContext(){if(this._notSupportCanvas)return!1;if(N(this._canvas)&&(L(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),N(this._canvas)&&typeof window<"u"&&window.document!==void 0&&globalThis&&L(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),N(this._context)&&L(this._canvas)){const t=this._canvas.getContext("2d");L(t)&&(t.save(),t.font=bw(this.textSpec),this._contextSaved=!0,this._context=t)}return!N(this._context)||(this._notSupportCanvas=!0,!1)}_initSpec(){var t,e,n;const{defaultFontParams:r={}}=this._option,{fontStyle:s=r.fontStyle,fontVariant:a=r.fontVariant,fontWeight:o=(t=r.fontWeight)!==null&&t!==void 0?t:"normal",fontSize:l=(e=r.fontSize)!==null&&e!==void 0?e:12,fontFamily:u=(n=r.fontFamily)!==null&&n!==void 0?n:"sans-serif",align:c,textAlign:h=c??"center",baseline:d,textBaseline:f=d??"middle",ellipsis:p,limit:g}=this._userSpec;let{lineHeight:m=l}=this._userSpec;if(Ht(m)&&m[m.length-1]==="%"){const _=Number.parseFloat(m.substring(0,m.length-1))/100;m=l*_}return{fontStyle:s,fontVariant:a,fontFamily:u,fontSize:l,fontWeight:o,textAlign:h,textBaseline:f,ellipsis:p,limit:g,lineHeight:m}}measure(t,e){switch(e){case"vrender":case"canopus":return this.fullMeasure(t);case"canvas":return this.measureWithNaiveCanvas(t);case"simple":return this.quickMeasureWithoutCanvas(t);default:return this.quickMeasure(t)}}fullMeasure(t){if(N(t))return{width:0,height:0};if(N(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(t);const{fontFamily:e,fontSize:n,fontWeight:r,textAlign:s,textBaseline:a,ellipsis:o,limit:l,lineHeight:u}=this.textSpec;let c;try{const h=this._option.getTextBounds({text:t,fontFamily:e,fontSize:n,fontWeight:r,textAlign:s,textBaseline:a,ellipsis:!!o,maxLineWidth:l||1/0,lineHeight:u});c={width:h.width(),height:h.height()}}catch{this._notSupportVRender=!0,c=this.measureWithNaiveCanvas(t)}return c}measureWithNaiveCanvas(t){return this._measureReduce(t,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(t){var e;if(!this.initContext())return this._quickMeasureWithoutCanvas(t);const n=this._context.measureText(t),{fontSize:r,lineHeight:s}=this.textSpec;return{width:n.width,height:(e=s)!==null&&e!==void 0?e:r,fontBoundingBoxAscent:n.fontBoundingBoxAscent,fontBoundingBoxDescent:n.fontBoundingBoxDescent}}quickMeasure(t){return this._measureReduce(t,this._quickMeasure.bind(this))}_quickMeasure(t){const e={width:0,height:0};for(let n=0;n<t.length;n++){const r=t[n];let s=this._measureSpecialChar(r);N(s)&&Zr.NUMBERS_CHAR_SET.includes(r)&&(s=this._measureNumberChar()),N(s)&&["F","W"].includes(fW(r))&&(s=this._measureFullSizeChar()),N(s)&&(s=this._measureLetterChar()),e.width+=s.width,e.height=Math.max(e.height,s.height),!N(s.fontBoundingBoxAscent)&&(e.fontBoundingBoxAscent=s.fontBoundingBoxAscent),!N(s.fontBoundingBoxDescent)&&(e.fontBoundingBoxDescent=s.fontBoundingBoxDescent)}return e}quickMeasureWithoutCanvas(t){return this._measureReduce(t,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(t){var e;const n={width:0,height:0},{fontSize:r,lineHeight:s}=this.textSpec;for(let a=0;a<t.length;a++){const o=t[a],l=["F","W"].includes(fW(o))?1:.53;n.width+=l*r}return n.height=(e=s)!==null&&e!==void 0?e:r,n}_measureReduce(t,e){var n;const{fontSize:r,lineHeight:s}=this.textSpec,a={width:0,height:0};if(N(t))return a;if(J(t)){const o=t.filter(L).map(l=>l.toString());return o.length===0?a:o.length===1?e(o[0]):{width:o.reduce((l,u)=>Math.max(l,e(u).width),0),height:o.length*(((n=s)!==null&&n!==void 0?n:r)+1)+1}}return e(t.toString())}_measureNumberChar(){if(N(this._numberCharSize)){const t=this._standardMethod(Zr.NUMBERS_CHAR_SET);this._numberCharSize={width:t.width/Zr.NUMBERS_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._numberCharSize}_measureFullSizeChar(){return N(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(Zr.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){if(N(this._letterCharSize)){const t=this._standardMethod(Zr.ALPHABET_CHAR_SET);this._letterCharSize={width:t.width/Zr.ALPHABET_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._letterCharSize}_measureSpecialChar(t){return L(this._specialCharSizeMap[t])?this._specialCharSizeMap[t]:this.specialCharSet.includes(t)?(this._specialCharSizeMap[t]=this._standardMethod(t),this._specialCharSizeMap[t]):null}release(){L(this._canvas)&&(this._canvas=null),L(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}}Zr.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",Zr.NUMBERS_CHAR_SET="0123456789",Zr.FULL_SIZE_CHAR="";const bJ=(i,t)=>{const{x1:e,x2:n,y1:r,y2:s}=i,a=Math.abs(n-e),o=Math.abs(s-r);let l=(e+n)/2,u=(r+s)/2,c=0,h=0;switch(t){case"top":case"inside-top":h=-.5;break;case"bottom":case"inside-bottom":h=.5;break;case"left":case"inside-left":c=-.5;break;case"right":case"inside-right":c=.5;break;case"top-right":c=.5,h=-.5;break;case"top-left":c=-.5,h=-.5;break;case"bottom-right":c=.5,h=.5;break;case"bottom-left":c=-.5,h=.5}return l+=c*a,u+=h*o,{x:l,y:u}},pW=(i,t)=>Math.max(t.x1-i.x2,i.x1-t.x2,t.y1-i.y2,i.y1-t.y2),oEt=(i,t)=>{const e=[{x:Math.cos(i.angle),y:Math.sin(i.angle)},{x:-Math.sin(i.angle),y:Math.cos(i.angle)},{x:Math.cos(t.angle),y:Math.sin(i.angle)},{x:-Math.sin(t.angle),y:Math.cos(i.angle)}];function n(s,a,o){const l=s.getRotatedCorners().map(u=>u.x*a+u.y*o);return{min:Math.min(...l),max:Math.max(...l)}}let r=0;for(const s of e){const a=n(i,s.x,s.y),o=n(t,s.x,s.y);let l;l=a.max<o.min?o.min-a.max:o.max<a.min?a.min-o.max:0,r=Math.max(r,l)}return r};function GB(i,t,e){const{x1:n,y1:r,x2:s,y2:a}=t;return e.onlyTranslate()?(i!==t&&i.setValue(t.x1,t.y1,t.x2,t.y2),i.translate(e.e,e.f),t):(i.clear(),i.add(e.a*n+e.c*r+e.e,e.b*n+e.d*r+e.f),i.add(e.a*s+e.c*r+e.e,e.b*s+e.d*r+e.f),i.add(e.a*s+e.c*a+e.e,e.b*s+e.d*a+e.f),i.add(e.a*n+e.c*a+e.e,e.b*n+e.d*a+e.f),t)}class ir{constructor(t){t?this.setValue(t.x1,t.y1,t.x2,t.y2):this.clear()}clone(){return new ir(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}setValue(t=0,e=0,n=0,r=0){return this.x1=t,this.y1=e,this.x2=n,this.y2=r,this}set(t=0,e=0,n=0,r=0){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this}add(t=0,e=0){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this}expand(t=0){return J(t)?(this.y1-=t[0],this.x2+=t[1],this.y2+=t[2],this.x1-=t[3]):(this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(t=0,e=0){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}rotate(t=0,e=0,n=0){const r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])}scale(t=0,e=0,n=0,r=0){const s=this.scalePoints(t,e,n,r);return this.clear().add(s[0],s[1]).add(s[2],s[3])}union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this}intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this}encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2}alignsWith(t){return t&&(this.x1===t.x1||this.x2===t.x2||this.y1===t.y1||this.y2===t.y2)}intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)}contains(t=0,e=0){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)}containsPoint(t){return!(t.x<this.x1||t.x>this.x2||t.y<this.y1||t.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(t=0){return this.x1*=t,this.x2*=t,this}scaleY(t=0){return this.y1*=t,this.y2*=t,this}transformWithMatrix(t){return GB(this,this,t),this}copy(t){return this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this}rotatedPoints(t,e,n){const{x1:r,y1:s,x2:a,y2:o}=this,l=Math.cos(t),u=Math.sin(t),c=e-e*l+n*u,h=n-e*u-n*l;return[l*r-u*s+c,u*r+l*s+h,l*r-u*o+c,u*r+l*o+h,l*a-u*s+c,u*a+l*s+h,l*a-u*o+c,u*a+l*o+h]}scalePoints(t,e,n,r){const{x1:s,y1:a,x2:o,y2:l}=this;return[t*s+(1-t)*n,e*a+(1-e)*r,t*o+(1-t)*n,e*l+(1-e)*r]}}class Gi extends ir{}class YB extends ir{constructor(t,e=0){var n;super(t),t&&(this.angle=(n=t.angle)!==null&&n!==void 0?n:e)}intersects(t){return yJ(this,t)}setValue(t=0,e=0,n=0,r=0,s=0){return super.setValue(t,e,n,r),this.angle=s,this}clone(){return new YB(this)}getRotatedCorners(){const t={x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2};return[Dl({x:this.x1,y:this.y1},this.angle,t),Dl({x:this.x2,y:this.y1},this.angle,t),Dl({x:this.x1,y:this.y2},this.angle,t),Dl({x:this.x2,y:this.y2},this.angle,t)]}}class di{constructor(t=1,e=0,n=0,r=1,s=0,a=0){this.a=t,this.b=e,this.c=n,this.d=r,this.e=s,this.f=a}equalToMatrix(t){return!(this.e!==t.e||this.f!==t.f||this.a!==t.a||this.d!==t.d||this.b!==t.b||this.c!==t.c)}equalTo(t,e,n,r,s,a){return!(this.e!==s||this.f!==a||this.a!==t||this.d!==r||this.b!==e||this.c!==n)}setValue(t,e,n,r,s,a){return this.a=t,this.b=e,this.c=n,this.d=r,this.e=s,this.f=a,this}reset(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}getInverse(){const t=this.a,e=this.b,n=this.c,r=this.d,s=this.e,a=this.f,o=new di,l=t*r-e*n;return o.a=r/l,o.b=-e/l,o.c=-n/l,o.d=t/l,o.e=(n*a-r*s)/l,o.f=-(t*a-e*s)/l,o}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.a*e+this.c*n,s=this.b*e+this.d*n,a=this.a*-n+this.c*e,o=this.b*-n+this.d*e;return this.a=r,this.b=s,this.c=a,this.d=o,this}rotateByCenter(t,e,n){const r=Math.cos(t),s=Math.sin(t),a=(1-r)*e+s*n,o=(1-r)*n-s*e,l=r*this.a-s*this.b,u=s*this.a+r*this.b,c=r*this.c-s*this.d,h=s*this.c+r*this.d,d=r*this.e-s*this.f+a,f=s*this.e+r*this.f+o;return this.a=l,this.b=u,this.c=c,this.d=h,this.e=d,this.f=f,this}scale(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this}setScale(t,e){return this.b=this.b/this.a*t,this.c=this.c/this.d*e,this.a=t,this.d=e,this}transform(t,e,n,r,s,a){return this.multiply(t,e,n,r,s,a),this}translate(t,e){return this.e+=this.a*t+this.c*e,this.f+=this.b*t+this.d*e,this}transpose(){const{a:t,b:e,c:n,d:r,e:s,f:a}=this;return this.a=e,this.b=t,this.c=r,this.d=n,this.e=a,this.f=s,this}multiply(t,e,n,r,s,a){const o=this.a,l=this.b,u=this.c,c=this.d,h=o*t+u*e,d=l*t+c*e,f=o*n+u*r,p=l*n+c*r,g=o*s+u*a+this.e,m=l*s+c*a+this.f;return this.a=h,this.b=d,this.c=f,this.d=p,this.e=g,this.f=m,this}interpolate(t,e){const n=new di;return n.a=this.a+(t.a-this.a)*e,n.b=this.b+(t.b-this.b)*e,n.c=this.c+(t.c-this.c)*e,n.d=this.d+(t.d-this.d)*e,n.e=this.e+(t.e-this.e)*e,n.f=this.f+(t.f-this.f)*e,n}transformPoint(t,e){const{a:n,b:r,c:s,d:a,e:o,f:l}=this,u=n*a-r*s,c=a/u,h=-r/u,d=-s/u,f=n/u,p=(s*l-a*o)/u,g=-(n*l-r*o)/u,{x:m,y:_}=t;e.x=m*c+_*d+p,e.y=m*h+_*f+g}onlyTranslate(t=1){return this.a===t&&this.b===0&&this.c===0&&this.d===t}clone(){return new di(this.a,this.b,this.c,this.d,this.e,this.f)}toTransformAttrs(){const t=this.a,e=this.b,n=this.c,r=this.d,s=t*r-e*n,a={x:this.e,y:this.f,rotateDeg:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!==0||e!==0){const o=Math.sqrt(t*t+e*e);a.rotateDeg=e>0?Math.acos(t/o):-Math.acos(t/o),a.scaleX=o,a.scaleY=s/o,a.skewX=(t*n+e*r)/s,a.skewY=0}else if(n!==0||r!==0){const o=Math.sqrt(n*n+r*r);a.rotateDeg=Math.PI/2-(r>0?Math.acos(-n/o):-Math.acos(n/o)),a.scaleX=s/o,a.scaleY=o,a.skewX=0,a.skewY=(t*n+e*r)/s}return a.rotateDeg=t0(a.rotateDeg),a}}function lEt(i,t,e,n,r,s,a,o){const l=t.a,u=t.b,c=t.c,h=t.d,d=t.e,f=t.f,p=Ri(a),g=fi(a);let m,_;o?(m=o[0],_=o[1]):(m=e,_=n);const v=m-e,y=_-n,b=l*p+c*g,x=u*p+h*g,S=c*p-l*g,w=h*p-u*g;i.a=r*b,i.b=r*x,i.c=s*S,i.d=s*w,i.e=d+l*m+c*_-b*v-S*y,i.f=f+u*m+h*_-x*v-w*y}class uEt{constructor(){this.CLEAN_THRESHOLD=1e3,this.L_TIME=1e3,this.R_COUNT=1,this.R_TIMESTAMP_MAX_SIZE=20}clearCache(t,e){const{CLEAN_THRESHOLD:n=this.CLEAN_THRESHOLD,L_TIME:r=this.L_TIME,R_COUNT:s=this.R_COUNT}=e;if(t.size<n)return 0;let a=0;const o=u=>{a++,t.delete(u)},l=Date.now();return t.forEach((u,c)=>{if(u.timestamp.length<s)return o(c);let h=0;for(;l-u.timestamp[u.timestamp.length-1-h]<r&&(h++,!(h>=s)););if(h<s)return o(c);for(;l-u.timestamp[0]>r;)u.timestamp.shift()}),a}addLimitedTimestamp(t,e,n){const{R_TIMESTAMP_MAX_SIZE:r=this.R_TIMESTAMP_MAX_SIZE}=n;t.timestamp.length>r&&t.timestamp.shift(),t.timestamp.push(e)}clearTimeStamp(t,e){const{L_TIME:n=this.L_TIME}=e,r=Date.now();t.forEach(s=>{for(;r-s.timestamp[0]>n;)s.timestamp.shift()})}clearItemTimestamp(t,e){const{L_TIME:n=this.L_TIME}=e,r=Date.now();for(;r-t.timestamp[0]>n;)t.timestamp.shift()}}function xw(i,t,e){t/=100,e/=100;const n=(1-Math.abs(2*e-1))*t,r=n*(1-Math.abs(i/60%2-1)),s=e-n/2;let a=0,o=0,l=0;return 0<=i&&i<60?(a=n,o=r,l=0):60<=i&&i<120?(a=r,o=n,l=0):120<=i&&i<180?(a=0,o=n,l=r):180<=i&&i<240?(a=0,o=r,l=n):240<=i&&i<300?(a=r,o=0,l=n):300<=i&&i<360&&(a=n,o=0,l=r),a=Math.round(255*(a+s)),o=Math.round(255*(o+s)),l=Math.round(255*(l+s)),{r:a,g:o,b:l}}function nM(i,t,e){i/=255,t/=255,e/=255;const n=Math.min(i,t,e),r=Math.max(i,t,e),s=r-n;let a=0,o=0,l=0;return a=s===0?0:r===i?(t-e)/s%6:r===t?(e-i)/s+2:(i-t)/s+4,a=Math.round(60*a),a<0&&(a+=360),l=(r+n)/2,o=s===0?0:s/(1-Math.abs(2*l-1)),o=+(100*o).toFixed(1),l=+(100*l).toFixed(1),{h:a,s:o,l}}const cEt=/^#([0-9a-f]{3,8})$/,gW={transparent:4294967040},u1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function nS(i){return((i=Math.max(0,Math.min(255,Math.round(i)||0)))<16?"0":"")+i.toString(16)}function xJ(i){return yt(i)?new ps(i>>16,i>>8&255,255&i,1):J(i)?new ps(i[0],i[1],i[2]):new ps(255,255,255)}function hEt(i){return yt(i)?new ps(i>>>24,i>>>16&255,i>>>8&255,255&i):J(i)?new ps(i[0],i[1],i[2],i[3]):new ps(255,255,255,1)}function dE(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function fE(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}const mW=(i,t)=>{const e=cEt.exec(i);if(t||e){const n=parseInt(e[1],16),r=e[1].length;return r===3?new ps((n>>8&15)+((n>>8&15)<<4),(n>>4&15)+((n>>4&15)<<4),(15&n)+((15&n)<<4),1):r===6?xJ(n):r===8?new ps(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):null}};class Mn{static Brighter(t,e=1){return e===1?t:new Mn(t).brighter(e).toRGBA()}static SetOpacity(t,e=1){return e===1?t:new Mn(t).setOpacity(e).toRGBA()}static getColorBrightness(t,e="hsl"){const n=t instanceof Mn?t:new Mn(t);switch(e){case"hsv":default:return n.getHSVBrightness();case"hsl":return n.getHSLBrightness();case"lum":return n.getLuminance();case"lum2":return n.getLuminance2();case"lum3":return n.getLuminance3();case"wcag":return n.getLuminanceWCAG()}}static parseColorString(t){if(L(gW[t]))return hEt(gW[t]);if(L(u1[t]))return xJ(u1[t]);const e=`${t}`.trim().toLowerCase(),n=mW(e);if(n!==void 0)return n;if(/^(rgb|RGB|rgba|RGBA)/.test(e)){const r=e.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new ps(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseFloat(r[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(e)){const r=e.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),s=xw(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10));return new ps(s.r,s.g,s.b,parseFloat(r[3]))}}constructor(t){const e=Mn.parseColorString(t);e?this.color=e:(console.warn(`Warn: ${t}Color`),this.color=new ps(255,255,255))}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(t){const{r:e,g:n,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t))),this.color.g=Math.max(0,Math.min(255,Math.floor(n*t))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t))),this}add(t){const{r:e,g:n,b:r}=this.color;return this.color.r+=Math.min(255,e+t.color.r),this.color.g+=Math.min(255,n+t.color.g),this.color.b+=Math.min(255,r+t.color.b),this}sub(t){return this.color.r=Math.max(0,this.color.r-t.color.r),this.color.g=Math.max(0,this.color.g-t.color.g),this.color.b=Math.max(0,this.color.b-t.color.b),this}multiply(t){const{r:e,g:n,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(n*t.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return .5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(t,e,n){const r=this.color.opacity,s=nM(this.color.r,this.color.g,this.color.b),a=xw(N(t)?s.h:Ke(t,0,360),N(e)?s.s:e>=0&&e<=1?100*e:e,N(n)?s.l:n<=1&&n>=0?100*n:n);return this.color=new ps(a.r,a.g,a.b,r),this}setRGB(t,e,n){return!N(t)&&(this.color.r=t),!N(e)&&(this.color.g=e),!N(n)&&(this.color.b=n),this}setHex(t){const e=`${t}`.trim().toLowerCase(),n=mW(e,!0);return n??this}setColorName(t){const e=u1[t.toLowerCase()];return e!==void 0?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}setScalar(t){return this.color.r=t,this.color.g=t,this.color.b=t,this}setOpacity(t=1){return this.color.opacity=t,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}getLuminanceWCAG(){const t=this.color.r/255,e=this.color.g/255,n=this.color.b/255;let r,s,a;return r=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),s=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),a=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*r+.7152*s+.0722*a}clone(){return new Mn(this.color.toString())}copyGammaToLinear(t,e=2){return this.color.r=Math.pow(t.color.r,e),this.color.g=Math.pow(t.color.g,e),this.color.b=Math.pow(t.color.b,e),this}copyLinearToGamma(t,e=2){const n=e>0?1/e:1;return this.color.r=Math.pow(t.color.r,n),this.color.g=Math.pow(t.color.g,n),this.color.b=Math.pow(t.color.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.color.r=dE(t.color.r),this.color.g=dE(t.color.g),this.color.b=dE(t.color.b),this}copyLinearToSRGB(t){return this.color.r=fE(t.color.r),this.color.g=fE(t.color.g),this.color.b=fE(t.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}}class ps{constructor(t,e,n,r){this.r=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.g=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.b=isNaN(+n)?255:Math.max(0,Math.min(255,+n)),L(r)?this.opacity=isNaN(+r)?1:Math.max(0,Math.min(1,+r)):this.opacity=1}formatHex(){return`#${nS(this.r)+nS(this.g)+nS(this.b)+(this.opacity===1?"":nS(255*this.opacity))}`}formatRgb(){const t=this.opacity;return`${t===1?"rgb(":"rgba("}${this.r},${this.g},${this.b}${t===1?")":`,${t})`}`}formatHsl(){const t=this.opacity,{h:e,s:n,l:r}=nM(this.r,this.g,this.b);return`${t===1?"hsl(":"hsla("}${e},${n}%,${r}%${t===1?")":`,${t})`}`}toString(){return this.formatHex()}}function SJ(i){let t="",e="",n="";const r=i[0]==="#"?1:0;for(let s=r;s<i.length;s++)i[s]!=="#"&&(s<r+2?t+=i[s]:s<r+4?e+=i[s]:s<r+6&&(n+=i[s]));return[parseInt(t,16),parseInt(e,16),parseInt(n,16)]}function dEt(i,t,e){return Number((1<<24)+(i<<16)+(t<<8)+e).toString(16).slice(1)}function fEt(i,t){const e=i.r,n=t.r,r=i.g,s=t.g,a=i.b,o=t.b,l=i.opacity,u=t.opacity;return c=>{const h=Math.round(e*(1-c)+n*c),d=Math.round(r*(1-c)+s*c),f=Math.round(a*(1-c)+o*c);return new ps(h,d,f,l*(1-c)+u*c)}}const pEt=Object.freeze(Object.defineProperty({__proto__:null,Color:Mn,DEFAULT_COLORS:u1,RGB:ps,hexToRgb:SJ,hslToRgb:xw,interpolateRgb:fEt,rgbToHex:dEt,rgbToHsl:nM},Symbol.toStringTag,{value:"Module"}));function zr(i){if(et(i))return[i,i,i,i];if(J(i)){const t=i.length;if(t===1){const e=i[0];return[e,e,e,e]}if(t===2){const[e,n]=i;return[e,n,e,n]}if(t===3){const[e,n,r]=i;return[e,n,r,n]}if(t===4)return i}if(ee(i)){const{top:t=0,right:e=0,bottom:n=0,left:r=0}=i;return[t,e,n,r]}return[0,0,0,0]}function _W(i,t=0,e=0){if(!i)return{width:t,height:e};let n;try{n=window?.getComputedStyle}catch{n=()=>({})}const r=n(i);if(/^(\d*\.?\d+)(px)$/.exec(r.width)){const s=parseFloat(r.width)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)||i.clientWidth-1,a=parseFloat(r.height)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)||i.clientHeight-1;return{width:s<=0?t:s,height:a<=0?e:a}}return{width:t,height:e}}function gEt(i){const{x:t,y:e}=i.getBoundingClientRect();return{x:t,y:e}}const mEt=(i="")=>{const t={};return i.split(";").forEach(e=>{if(e){const n=e.split(":");if(n.length===2){const r=n[0].trim(),s=n[1].trim();r&&s&&(t[r]=s)}}}),t},vW=i=>i.replace(/([A-Z])/g,"-$1").toLowerCase();function wJ(i){return i.replace(/-([a-z])/g,(t,e)=>e.toUpperCase())}var Os=63710088e-1,_Et={centimeters:Os*100,centimetres:Os*100,degrees:Os/111325,feet:Os*3.28084,inches:Os*39.37,kilometers:Os/1e3,kilometres:Os/1e3,meters:Os,metres:Os,miles:Os/1609.344,millimeters:Os*1e3,millimetres:Os*1e3,nauticalmiles:Os/1852,radians:1,yards:Os*1.0936};function yW(i,t,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=t||{},n.geometry=i,n}function AJ(i,t){t===void 0&&(t={});var e={type:"FeatureCollection"};return t.id&&(e.id=t.id),t.bbox&&(e.bbox=t.bbox),e.features=i,e}function vEt(i,t){t===void 0&&(t="kilometers");var e=_Et[t];if(!e)throw new Error(t+" units is invalid");return i/e}function yEt(i){return!!i&&i.constructor===Object}function bEt(i){return i.type==="Feature"?i.geometry:i}function xEt(i,t){if(!i||!t)return!1;const e=bEt(t),n=e.type,r=t.bbox;let s=e.coordinates;if(r&&ug(i,{x1:r[0],x2:r[1],y1:r[1],y2:r[3]},!0)===!0)return!1;n==="Polygon"&&(s=[s]);let a=!1;for(let o=0;o<s.length;++o)for(let l=0;l<s[o].length;++l)if(UB(s[o][l].map(u=>({x:u[0],y:u[1]})),i.x,i.y))return a=!0,a;return a}function SEt(i,t,e,n={}){const r=ii(i[0]),s=ii(i[1]),a=ii(e),o=vEt(t,n.units),l=Math.asin(Math.sin(s)*Math.cos(o)+Math.cos(s)*Math.sin(o)*Math.cos(a)),u=r+Math.atan2(Math.sin(a)*Math.sin(o)*Math.cos(s),Math.cos(o)-Math.sin(s)*Math.sin(l));return{x:t0(u),y:t0(l)}}const Pb=1e-10;function XB(i,t){const e=AEt(i),n=e.filter(function(o){return wEt(o,i)});let r=0,s=0;const a=[];if(n.length>1){const o=MJ(n);for(let u=0;u<n.length;++u){const c=n[u];c.angle=Math.atan2(c.x-o.x,c.y-o.y)}n.sort(function(u,c){return c.angle-u.angle});let l=n[n.length-1];for(let u=0;u<n.length;++u){const c=n[u];s+=(l.x+c.x)*(c.y-l.y);const h={x:(c.x+l.x)/2,y:(c.y+l.y)/2};let d=null;for(let f=0;f<c.parentIndex.length;++f)if(l.parentIndex.indexOf(c.parentIndex[f])>-1){const p=i[c.parentIndex[f]],g=Math.atan2(c.x-p.x,c.y-p.y),m=Math.atan2(l.x-p.x,l.y-p.y);let _=m-g;_<0&&(_+=2*Math.PI);const v=m-_/2;let y=Je.distancePP(h,{x:p.x+p.radius*Math.sin(v),y:p.y+p.radius*Math.cos(v)});y>2*p.radius&&(y=2*p.radius),(d===null||d.width>y)&&(d={circle:p,width:y,p1:c,p2:l})}d!==null&&(a.push(d),r+=qO(d.circle.radius,d.width),l=c)}}else{let o=i[0];for(let u=1;u<i.length;++u)i[u].radius<o.radius&&(o=i[u]);let l=!1;for(let u=0;u<i.length;++u)if(Je.distancePP(i[u],o)>Math.abs(o.radius-i[u].radius)){l=!0;break}l?r=s=0:(r=o.radius*o.radius*Math.PI,a.push({circle:o,p1:{x:o.x,y:o.y+o.radius},p2:{x:o.x-Pb,y:o.y+o.radius},width:2*o.radius}))}return s/=2,t&&(t.area=r+s,t.arcArea=r,t.polygonArea=s,t.arcs=a,t.innerPoints=n,t.intersectionPoints=e),r+s}function wEt(i,t){for(let e=0;e<t.length;++e)if(Je.distancePP(i,t[e])>t[e].radius+Pb)return!1;return!0}function AEt(i){const t=[];for(let e=0;e<i.length;++e)for(let n=e+1;n<i.length;++n){const r=CJ(i[e],i[n]);for(let s=0;s<r.length;++s){const a=r[s];a.parentIndex=[e,n],t.push(a)}}return t}function qO(i,t){return i*i*Math.acos(1-t/i)-(i-t)*Math.sqrt(t*(2*i-t))}function kJ(i,t,e){if(e>=i+t)return 0;if(e<=Math.abs(i-t))return Math.PI*Math.min(i,t)*Math.min(i,t);const n=t-(e*e-i*i+t*t)/(2*e);return qO(i,i-(e*e-t*t+i*i)/(2*e))+qO(t,n)}function CJ(i,t){const e=Je.distancePP(i,t),n=i.radius,r=t.radius;if(e>=n+r||e<=Math.abs(n-r))return[];const s=(n*n-r*r+e*e)/(2*e),a=Math.sqrt(n*n-s*s),o=i.x+s*(t.x-i.x)/e,l=i.y+s*(t.y-i.y)/e,u=-(t.y-i.y)*(a/e),c=-(t.x-i.x)*(a/e);return[{x:o+u,y:l-c},{x:o-u,y:l+c}]}function MJ(i){const t={x:0,y:0};for(let e=0;e<i.length;++e)t.x+=i[e].x,t.y+=i[e].y;return t.x/=i.length,t.y/=i.length,t}class No{static getInstance(){return No.instance||(No.instance=new No),No.instance}constructor(){this.locale_shortWeekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.locale_periods=["AM","PM"],this.locale_weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.locale_shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.numberRe=/^\s*\d+/,this.pads={"-":"",_:" ",0:"0"},this.requoteRe=/[\\^$*+?|[\]().{}]/g,this.locale_months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.formatShortWeekday=t=>this.locale_shortWeekdays[t.getDay()],this.formatWeekday=t=>this.locale_weekdays[t.getDay()],this.formatShortMonth=t=>this.locale_shortMonths[t.getMonth()],this.formatMonth=t=>this.locale_months[t.getMonth()],this.formatDayOfMonth=(t,e)=>this.pad(t.getDate(),e,2),this.formatHour24=(t,e)=>this.pad(t.getHours(),e,2),this.formatHour12=(t,e)=>this.pad(t.getHours()%12||12,e,2),this.formatMilliseconds=(t,e)=>this.pad(t.getMilliseconds(),e,3),this.formatMonthNumber=(t,e)=>this.pad(t.getMonth()+1,e,2),this.formatMinutes=(t,e)=>this.pad(t.getMinutes(),e,2),this.formatPeriod=t=>this.locale_periods[+(t.getHours()>=12)],this.formatSeconds=(t,e)=>this.pad(t.getSeconds(),e,2),this.formatFullYear=(t,e)=>this.pad(t.getFullYear()%1e4,e,4),this.formatUTCShortWeekday=t=>this.locale_shortWeekdays[t.getUTCDay()],this.formatUTCWeekday=t=>this.locale_weekdays[t.getUTCDay()],this.formatUTCShortMonth=t=>this.locale_shortMonths[t.getUTCMonth()],this.formatUTCMonth=t=>this.locale_months[t.getUTCMonth()],this.formatUTCDayOfMonth=(t,e)=>this.pad(t.getUTCDate(),e,2),this.formatUTCHour24=(t,e)=>this.pad(t.getUTCHours(),e,2),this.formatUTCHour12=(t,e)=>this.pad(t.getUTCHours()%12||12,e,2),this.formatUTCMilliseconds=(t,e)=>this.pad(t.getUTCMilliseconds(),e,3),this.formatUTCMonthNumber=(t,e)=>this.pad(t.getUTCMonth()+1,e,2),this.formatUTCMinutes=(t,e)=>this.pad(t.getUTCMinutes(),e,2),this.formatUTCPeriod=t=>this.locale_periods[+(t.getUTCHours()>=12)],this.formatUTCSeconds=(t,e)=>this.pad(t.getUTCSeconds(),e,2),this.formatUTCFullYear=(t,e)=>this.pad(t.getUTCFullYear()%1e4,e,4),this.formats={a:this.formatShortWeekday,A:this.formatWeekday,b:this.formatShortMonth,B:this.formatMonth,d:this.formatDayOfMonth,e:this.formatDayOfMonth,H:this.formatHour24,I:this.formatHour12,L:this.formatMilliseconds,m:this.formatMonthNumber,M:this.formatMinutes,p:this.formatPeriod,S:this.formatSeconds,Y:this.formatFullYear},this.utcFormats={a:this.formatUTCShortWeekday,A:this.formatUTCWeekday,b:this.formatUTCShortMonth,B:this.formatUTCMonth,d:this.formatUTCDayOfMonth,e:this.formatUTCDayOfMonth,H:this.formatUTCHour24,I:this.formatUTCHour12,L:this.formatUTCMilliseconds,m:this.formatUTCMonthNumber,M:this.formatUTCMinutes,p:this.formatUTCPeriod,S:this.formatUTCSeconds,Y:this.formatUTCFullYear},this.parseShortWeekday=(t,e,n)=>{const r=this.shortWeekdayRe.exec(e.slice(n));return r?(t.w=this.shortWeekdayLookup.get(r[0].toLowerCase()),n+r[0].length):-1},this.parseWeekday=(t,e,n)=>{const r=this.weekdayRe.exec(e.slice(n));return r?(t.w=this.weekdayLookup.get(r[0].toLowerCase()),n+r[0].length):-1},this.parseShortMonth=(t,e,n)=>{const r=this.shortMonthRe.exec(e.slice(n));return r?(t.m=this.shortMonthLookup.get(r[0].toLowerCase()),n+r[0].length):-1},this.parseMonth=(t,e,n)=>{const r=this.monthRe.exec(e.slice(n));return r?(t.m=this.monthLookup.get(r[0].toLowerCase()),n+r[0].length):-1},this.parseDayOfMonth=(t,e,n)=>{const r=this.numberRe.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1},this.parseHour24=(t,e,n)=>{const r=this.numberRe.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1},this.parseMilliseconds=(t,e,n)=>{const r=this.numberRe.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1},this.parseMonthNumber=(t,e,n)=>{const r=this.numberRe.exec(e.slice(n,n+2));return r?(t.m=r-1,n+r[0].length):-1},this.parseMinutes=(t,e,n)=>{const r=this.numberRe.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1},this.parsePeriod=(t,e,n)=>{const r=this.periodRe.exec(e.slice(n));return r?(t.p=this.periodLookup.get(r[0].toLowerCase()),n+r[0].length):-1},this.parseSeconds=(t,e,n)=>{const r=this.numberRe.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1},this.parseFullYear=(t,e,n)=>{const r=this.numberRe.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1},this.parses={a:this.parseShortWeekday,A:this.parseWeekday,b:this.parseShortMonth,B:this.parseMonth,d:this.parseDayOfMonth,e:this.parseDayOfMonth,H:this.parseHour24,I:this.parseHour24,L:this.parseMilliseconds,m:this.parseMonthNumber,M:this.parseMinutes,p:this.parsePeriod,S:this.parseSeconds,Y:this.parseFullYear},this.timeFormat=(t,e)=>this.newFormat(t,this.formats)(new Date(this.getFullTimeStamp(e))),this.timeUTCFormat=(t,e)=>this.newFormat(t,this.utcFormats)(new Date(this.getFullTimeStamp(e))),this.timeParse=(t,e)=>this.newParse(t,!1)(e+""),this.requoteF=this.requote.bind(this),this.periodRe=this.formatRe(this.locale_periods),this.periodLookup=this.formatLookup(this.locale_periods),this.weekdayRe=this.formatRe(this.locale_weekdays),this.weekdayLookup=this.formatLookup(this.locale_weekdays),this.shortWeekdayRe=this.formatRe(this.locale_shortWeekdays),this.shortWeekdayLookup=this.formatLookup(this.locale_shortWeekdays),this.monthRe=this.formatRe(this.locale_months),this.monthLookup=this.formatLookup(this.locale_months),this.shortMonthRe=this.formatRe(this.locale_shortMonths),this.shortMonthLookup=this.formatLookup(this.locale_shortMonths)}requote(t){return t.replace(this.requoteRe,"\\$&")}localDate(t){if(0<=t.y&&t.y<100){const e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}utcDate(t){if(0<=t.y&&t.y<100){const e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}newDate(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}formatRe(t){return new RegExp("^(?:"+t.map(this.requoteF).join("|")+")","i")}formatLookup(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}pad(t,e,n){const r=t<0?"-":"",s=(r?-t:t)+"",a=s.length;return r+(a<n?new Array(n-a+1).join(e)+s:s)}parseSpecifier(t,e,n,r){let s=0;const a=e.length,o=n.length;let l,u;for(;s<a;){if(r>=o)return-1;if(l=e.charCodeAt(s++),l===37){if(l=e.charAt(s++),u=this.parses[l in this.pads?e.charAt(s++):l],!u||(r=u(t,n,r))<0)return-1}else if(l!==n.charCodeAt(r++))return-1}return r}newParse(t,e){const n=this;return function(r){const s=n.newDate(1900,void 0,1);return n.parseSpecifier(s,t,r+="",0)!==r.length?null:"Q"in s?new Date(s.Q):"s"in s?new Date(1e3*s.s+("L"in s?s.L:0)):(e&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),s.m===void 0&&(s.m="q"in s?s.q:0),"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,n.utcDate(s)):n.localDate(s))}}newFormat(t,e){const n=this;return function(r){const s=[];let a=-1,o=0;const l=t.length;let u,c,h;for(r instanceof Date||(r=new Date(+r));++a<l;)t.charCodeAt(a)===37&&(s.push(t.slice(o,a)),(c=n.pads[u=t.charAt(++a)])?u=t.charAt(++a):c=u==="e"?" ":"0",h=e[u],u=h(r,c),s.push(u),o=a+1);return s.push(t.slice(o,a)),s.join("")}}getFullTimeStamp(t){const e=parseInt(t+"",10);return String(e).length===10?1e3*e:e}}function kEt(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function Sw(i,t){const e=t?i.toExponential(t-1):i.toExponential(),n=e.indexOf("e");if(n<0)return null;const r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function CEt(i,t){return function(e,n){let r=e.length;const s=[];let a=0,o=i[0],l=0;for(;r>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(e.substring(r-=o,r+o)),!((l+=o+1)>n));)o=i[a=(a+1)%i.length];return s.reverse().join(t)}}let TJ;function MEt(i,t){const e=Sw(i,t);if(!e)return i+"";const n=e[0],r=e[1],s=r-(TJ=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Sw(i,Math.max(0,t+s-1))[0]}function bW(i,t){const e=Sw(i,t);if(!e)return i+"";const n=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}function TEt(i){const t=i.length;let e,n=-1;t:for(let r=1;r<t;++r)switch(i[r]){case".":n=e=r;break;case"0":n===0&&(n=r),e=r;break;default:if(!+i[r])break t;n>0&&(n=0)}return n>0?i.slice(0,n)+i.slice(e+1):i}class PEt{constructor(t={}){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}toString(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}}const PJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xW(i){let t;if(t=PJ.exec(i))return new PEt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]});Ee.getInstance().error("invalid format: "+i)}const SW=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];class od{constructor(){this.locale={thousands:",",grouping:[3],currency:["$",""]},this.group=this.locale.grouping===void 0||this.locale.thousands===void 0?t=>t:CEt([...this.locale.grouping].map(Number),`${this.locale.thousands}`),this.currencyPrefix=this.locale.currency===void 0?"":this.locale.currency[0]+"",this.currencySuffix=this.locale.currency===void 0?"":this.locale.currency[1]+"",this.decimal=this.locale.decimal===void 0?".":this.locale.decimal+"",this.numerals=this.locale.numerals===void 0?t=>t:REt([...this.locale.numerals].map(String)),this.percent=this.locale.percent===void 0?"%":this.locale.percent+"",this.minus=this.locale.minus===void 0?"":this.locale.minus+"",this.nan=this.locale.nan===void 0?"NaN":this.locale.nan+"",this.formatter=t=>this.newFormat(t),this.format=(t,e)=>this.formatter(t)(e),this.formatPrefix=(t,e)=>this._formatPrefix(t,e)}static getInstance(){return od.instance||(od.instance=new od),od.instance}newFormat(t){const e=xW(t);let n=e.fill,r=e.align;const s=e.sign,a=e.symbol;let o=e.zero;const l=e.width;let u=e.comma,c=e.precision,h=e.trim,d=e.type;d==="n"?(u=!0,d="g"):wW[d]||(c===void 0&&(c=12),h=!0,d="g"),(o||n==="0"&&r==="=")&&(o=!0,n="0",r="=");const f=a==="$"?this.currencyPrefix:a==="#"&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",p=a==="$"?this.currencySuffix:/[%p]/.test(d)?this.percent:"",g=wW[d],m=/[defgprstz%]/.test(d);c=c===void 0?6:/[gprs]/.test(d)?Math.max(1,Math.min(21,c)):Math.max(0,Math.min(20,c));const{nan:_,minus:v,decimal:y,group:b,numerals:x}=this;function S(w){let A,k,C,M=f,R=p,P=w;if(d==="c")R=g(P)+R,P="";else{P=+P;let D=P<0||1/P<0;if(P=isNaN(P)?_:g(Math.abs(P),c),h&&(P=TEt(P)),D&&+P==0&&s!=="+"&&(D=!1),M=(D?s==="("?s:v:s==="-"||s==="("?"":s)+M,R=(d==="s"?SW[8+TJ/3]:"")+R+(D&&s==="("?")":""),m){for(A=-1,k=P.length;++A<k;)if(C=P.charCodeAt(A),48>C||C>57){R=(C===46?y+P.slice(A+1):P.slice(A))+R,P=P.slice(0,A);break}}}u&&!o&&(P=b(P,1/0));let O=M.length+P.length+R.length,T=O<l?new Array(l-O+1).join(n):"";switch(u&&o&&(P=b(T+P,T.length?l-R.length:1/0),T=""),r){case"<":P=M+P+R+T;break;case"=":P=M+T+P+R;break;case"^":P=T.slice(0,O=T.length>>1)+M+P+R+T.slice(O);break;default:P=T+M+P+R}return x(P)}return S.toString=function(){return t+""},S}_formatPrefix(t,e){const n=xW(t);n.type="f";const r=this.newFormat(n.toString()),s=3*Math.max(-8,Math.min(8,Math.floor(EEt(e)/3))),a=Math.pow(10,-s),o=SW[8+s/3];return function(l){return r(a*l)+o}}}const wW={"%":(i,t)=>(100*i).toFixed(t),b:i=>Math.round(i).toString(2),c:i=>i+"",d:kEt,f:(i,t)=>i.toFixed(t),e:(i,t)=>i.toExponential(t),g:(i,t)=>i.toPrecision(t),o:i=>Math.round(i).toString(8),p:(i,t)=>bW(100*i,t),r:bW,s:MEt,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16),t:(i,t)=>Number.isInteger(i)?i.toFixed(2):Math.floor(i*Math.pow(10,t))/Math.pow(10,t)+"",z:(i,t)=>i%1==0?i+"":i.toFixed(t)};function EEt(i){const t=Sw(Math.abs(i));return t?t[1]:NaN}function REt(i){return function(t){return t.replace(/[0-9]/g,e=>i[+e])}}function ZO(i){const t=new Array(i);for(let e=0;e<i;++e)t[e]=0;return t}function AW(i,t){return ZO(i).map(function(){return ZO(t)})}function QO(i){return Math.sqrt(lg(i,i))}function JO(i,t,e){for(let n=0;n<t.length;++n)i[n]=t[n]*e}function bu(i,t,e,n,r){for(let s=0;s<i.length;++s)i[s]=t*e[s]+n*r[s]}function EJ(i,t,e){const n=(e=e||{}).maxIterations||200*t.length,r=e.nonZeroDelta||1.05,s=e.zeroDelta||.001,a=e.minErrorDelta||1e-6,o=e.minErrorDelta||1e-5,l=e.rho!==void 0?e.rho:1,u=e.chi!==void 0?e.chi:2,c=e.psi!==void 0?e.psi:-.5,h=e.sigma!==void 0?e.sigma:.5;let d;const f=t.length,p=new Array(f+1);p[0]=t,p[0].fx=i(t),p[0].id=0;for(let x=0;x<f;++x){const S=t.slice();S[x]=S[x]?S[x]*r:s,p[x+1]=S,p[x+1].fx=i(S),p[x+1].id=x+1}function g(x){for(let S=0;S<x.length;S++)p[f][S]=x[S];p[f].fx=x.fx}const m=function(x,S){return x.fx-S.fx},_=t.slice(),v=t.slice(),y=t.slice(),b=t.slice();for(let x=0;x<n;++x){if(p.sort(m),e.history){const w=p.map(function(A){const k=A.slice();return k.fx=A.fx,k.id=A.id,k});w.sort(function(A,k){return A.id-k.id}),e.history.push({x:p[0].slice(),fx:p[0].fx,simplex:w})}d=0;for(let w=0;w<f;++w)d=Math.max(d,Math.abs(p[0][w]-p[1][w]));if(Math.abs(p[0].fx-p[f].fx)<a&&d<o)break;for(let w=0;w<f;++w){_[w]=0;for(let A=0;A<f;++A)_[w]+=p[A][w];_[w]/=f}const S=p[f];if(bu(v,1+l,_,-l,S),v.fx=i(v),v.fx<p[0].fx)bu(b,1+u,_,-u,S),b.fx=i(b),b.fx<v.fx?g(b):g(v);else if(v.fx>=p[f-1].fx){let w=!1;if(v.fx>S.fx?(bu(y,1+c,_,-c,S),y.fx=i(y),y.fx<S.fx?g(y):w=!0):(bu(y,1-c*l,_,c*l,S),y.fx=i(y),y.fx<v.fx?g(y):w=!0),w){if(h>=1)break;for(let A=1;A<p.length;++A)bu(p[A],1-h,p[0],h,p[A]),p[A].fx=i(p[A])}}else g(v)}return p.sort(m),{fx:p[0].fx,x:p[0]}}function OEt(i,t,e,n,r,s,a){const o=e.fx,l=lg(e.fxprime,t);let u=o,c=o,h=l,d=0;function f(p,g,m){for(let _=0;_<16;++_)if(r=(p+g)/2,bu(n.x,1,e.x,r,t),u=n.fx=i(n.x,n.fxprime),h=lg(n.fxprime,t),u>o+s*r*l||u>=m)g=r;else{if(Math.abs(h)<=-a*l)return r;h*(g-p)>=0&&(g=p),p=r,m=u}return 0}r=r||1,s=s||1e-6,a=a||.1;for(let p=0;p<10;++p){if(bu(n.x,1,e.x,r,t),u=n.fx=i(n.x,n.fxprime),h=lg(n.fxprime,t),u>o+s*r*l||p&&u>=c)return f(d,r,c);if(Math.abs(h)<=-a*l)return r;if(h>=0)return f(r,d,u);c=u,d=r,r*=2}return r}function DEt(i,t,e){let n={x:t.slice(),fx:0,fxprime:t.slice()},r={x:t.slice(),fx:0,fxprime:t.slice()};const s=t.slice();let a,o=1;const l=(e=e||{}).maxIterations||20*t.length;n.fx=i(n.x,n.fxprime);const u=n.fxprime.slice();JO(u,n.fxprime,-1);for(let c=0;c<l;++c){if(o=OEt(i,u,n,r,o),e.history&&e.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:o}),o){bu(s,1,r.fxprime,-1,n.fxprime);const h=lg(n.fxprime,n.fxprime),d=Math.max(0,lg(s,r.fxprime)/h);bu(u,d,u,-1,r.fxprime),a=n,n=r,r=a}else JO(u,n.fxprime,-1);if(QO(n.fxprime)<=1e-5)break}return e.history&&e.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:o}),n}const IEt=(i,t)=>{const{callback:e}=t;return e&&(i=i.filter(e)),i};function rM(){return new ww}function ww(){this.reset()}ww.prototype={constructor:ww,reset:function(){this.s=this.t=0},add:function(i){kW(rS,i,this.t),kW(this,rS.s,this.s),this.s?this.t+=rS.t:this.s=rS.t},valueOf:function(){return this.s}};var rS=new ww;function kW(i,t,e){var n=i.s=t+e,r=n-t,s=n-r;i.t=t-s+(e-r)}var Re=1e-6,LEt=1e-12,Ue=Math.PI,Pn=Ue/2,CW=Ue/4,Sa=Ue*2,Yr=180/Ue,dn=Ue/180,Oi=Math.abs,Dm=Math.atan,Ku=Math.atan2,Ve=Math.cos,RJ=Math.exp,Aw=Math.log,pE=Math.pow,Oe=Math.sin,Ka=Math.sign||function(i){return i>0?1:i<0?-1:0},Qs=Math.sqrt,KB=Math.tan;function OJ(i){return i>1?0:i<-1?Ue:Math.acos(i)}function lo(i){return i>1?Pn:i<-1?-Pn:Math.asin(i)}function qa(){}function kw(i,t){i&&TW.hasOwnProperty(i.type)&&TW[i.type](i,t)}var MW={Feature:function(i,t){kw(i.geometry,t)},FeatureCollection:function(i,t){for(var e=i.features,n=-1,r=e.length;++n<r;)kw(e[n].geometry,t)}},TW={Sphere:function(i,t){t.sphere()},Point:function(i,t){i=i.coordinates,t.point(i[0],i[1],i[2])},MultiPoint:function(i,t){for(var e=i.coordinates,n=-1,r=e.length;++n<r;)i=e[n],t.point(i[0],i[1],i[2])},LineString:function(i,t){tD(i.coordinates,t,0)},MultiLineString:function(i,t){for(var e=i.coordinates,n=-1,r=e.length;++n<r;)tD(e[n],t,0)},Polygon:function(i,t){PW(i.coordinates,t)},MultiPolygon:function(i,t){for(var e=i.coordinates,n=-1,r=e.length;++n<r;)PW(e[n],t)},GeometryCollection:function(i,t){for(var e=i.geometries,n=-1,r=e.length;++n<r;)kw(e[n],t)}};function tD(i,t,e){var n=-1,r=i.length-e,s;for(t.lineStart();++n<r;)s=i[n],t.point(s[0],s[1],s[2]);t.lineEnd()}function PW(i,t){var e=-1,n=i.length;for(t.polygonStart();++e<n;)tD(i[e],t,1);t.polygonEnd()}function rp(i,t){i&&MW.hasOwnProperty(i.type)?MW[i.type](i,t):kw(i,t)}function eD(i){return[Ku(i[1],i[0]),lo(i[2])]}function Wg(i){var t=i[0],e=i[1],n=Ve(e);return[n*Ve(t),n*Oe(t),Oe(e)]}function sS(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]}function Cw(i,t){return[i[1]*t[2]-i[2]*t[1],i[2]*t[0]-i[0]*t[2],i[0]*t[1]-i[1]*t[0]]}function gE(i,t){i[0]+=t[0],i[1]+=t[1],i[2]+=t[2]}function aS(i,t){return[i[0]*t,i[1]*t,i[2]*t]}function iD(i){var t=Qs(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=t,i[1]/=t,i[2]/=t}function nD(i,t){function e(n,r){return n=i(n,r),t(n[0],n[1])}return i.invert&&t.invert&&(e.invert=function(n,r){return n=t.invert(n,r),n&&i.invert(n[0],n[1])}),e}function rD(i,t){return[Oi(i)>Ue?i+Math.round(-i/Sa)*Sa:i,t]}rD.invert=rD;function DJ(i,t,e){return(i%=Sa)?t||e?nD(RW(i),OW(t,e)):RW(i):t||e?OW(t,e):rD}function EW(i){return function(t,e){return t+=i,[t>Ue?t-Sa:t<-Ue?t+Sa:t,e]}}function RW(i){var t=EW(i);return t.invert=EW(-i),t}function OW(i,t){var e=Ve(i),n=Oe(i),r=Ve(t),s=Oe(t);function a(o,l){var u=Ve(l),c=Ve(o)*u,h=Oe(o)*u,d=Oe(l),f=d*e+c*n;return[Ku(h*r-f*s,c*e-d*n),lo(f*r+h*s)]}return a.invert=function(o,l){var u=Ve(l),c=Ve(o)*u,h=Oe(o)*u,d=Oe(l),f=d*r-h*s;return[Ku(h*r+d*s,c*e+f*n),lo(f*e-c*n)]},a}function BEt(i){i=DJ(i[0]*dn,i[1]*dn,i.length>2?i[2]*dn:0);function t(e){return e=i(e[0]*dn,e[1]*dn),e[0]*=Yr,e[1]*=Yr,e}return t.invert=function(e){return e=i.invert(e[0]*dn,e[1]*dn),e[0]*=Yr,e[1]*=Yr,e},t}function FEt(i,t,e,n,r,s){if(e){var a=Ve(t),o=Oe(t),l=n*e;r==null?(r=t+n*Sa,s=t-l/2):(r=DW(a,r),s=DW(a,s),(n>0?r<s:r>s)&&(r+=n*Sa));for(var u,c=r;n>0?c>s:c<s;c-=l)u=eD([a,-o*Ve(c),-o*Oe(c)]),i.point(u[0],u[1])}}function DW(i,t){t=Wg(t),t[0]-=i,iD(t);var e=OJ(-t[1]);return((-t[2]<0?-e:e)+Sa-Re)%Sa}function IJ(){var i=[],t;return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){i.push(t=[])},lineEnd:qa,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var e=i;return i=[],t=null,e}}}function c1(i,t){return Oi(i[0]-t[0])<Re&&Oi(i[1]-t[1])<Re}function oS(i,t,e,n){this.x=i,this.z=t,this.o=e,this.e=n,this.v=!1,this.n=this.p=null}function LJ(i,t,e,n,r){var s=[],a=[],o,l;if(i.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],_=p[g],v;if(c1(m,_)){if(!m[2]&&!_[2]){for(r.lineStart(),o=0;o<g;++o)r.point((m=p[o])[0],m[1]);r.lineEnd();return}_[0]+=2*Re}s.push(v=new oS(m,p,null,!0)),a.push(v.o=new oS(m,null,v,!1)),s.push(v=new oS(_,p,null,!1)),a.push(v.o=new oS(_,null,v,!0))}}),!!s.length){for(a.sort(t),IW(s),IW(a),o=0,l=a.length;o<l;++o)a[o].e=e=!e;for(var u=s[0],c,h;;){for(var d=u,f=!0;d.v;)if((d=d.n)===u)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(o=0,l=c.length;o<l;++o)r.point((h=c[o])[0],h[1]);else n(d.x,d.n.x,1,r);d=d.n}else{if(f)for(c=d.p.z,o=c.length-1;o>=0;--o)r.point((h=c[o])[0],h[1]);else n(d.x,d.p.x,-1,r);d=d.p}d=d.o,c=d.z,f=!f}while(!d.v);r.lineEnd()}}}function IW(i){if(t=i.length){for(var t,e=0,n=i[0],r;++e<t;)n.n=r=i[e],r.p=n,n=r;n.n=r=i[0],r.p=n}}var mE=rM();function _E(i){return Oi(i[0])<=Ue?i[0]:Ka(i[0])*((Oi(i[0])+Ue)%Sa-Ue)}function zEt(i,t){var e=_E(t),n=t[1],r=Oe(n),s=[Oe(e),-Ve(e),0],a=0,o=0;mE.reset(),r===1?n=Pn+Re:r===-1&&(n=-Pn-Re);for(var l=0,u=i.length;l<u;++l)if(h=(c=i[l]).length)for(var c,h,d=c[h-1],f=_E(d),p=d[1]/2+CW,g=Oe(p),m=Ve(p),_=0;_<h;++_,f=y,g=x,m=S,d=v){var v=c[_],y=_E(v),b=v[1]/2+CW,x=Oe(b),S=Ve(b),w=y-f,A=w>=0?1:-1,k=A*w,C=k>Ue,M=g*x;if(mE.add(Ku(M*A*Oe(k),m*S+M*Ve(k))),a+=C?w+A*Sa:w,C^f>=e^y>=e){var R=Cw(Wg(d),Wg(v));iD(R);var P=Cw(s,R);iD(P);var O=(C^w>=0?-1:1)*lo(P[2]);(n>O||n===O&&(R[0]||R[1]))&&(o+=C^w>=0?1:-1)}}return(a<-Re||a<Re&&mE<-Re)^o&1}function BJ(i,t){return i<t?-1:i>t?1:i>=t?0:NaN}function NEt(i){return i.length===1&&(i=jEt(i)),{left:function(t,e,n,r){for(n==null&&(n=0),r==null&&(r=t.length);n<r;){var s=n+r>>>1;i(t[s],e)<0?n=s+1:r=s}return n},right:function(t,e,n,r){for(n==null&&(n=0),r==null&&(r=t.length);n<r;){var s=n+r>>>1;i(t[s],e)>0?r=s:n=s+1}return n}}}function jEt(i){return function(t,e){return BJ(i(t),e)}}NEt(BJ);function FJ(i){for(var t=i.length,e,n=-1,r=0,s,a;++n<t;)r+=i[n].length;for(s=new Array(r);--t>=0;)for(a=i[t],e=a.length;--e>=0;)s[--r]=a[e];return s}function zJ(i,t,e,n){return function(r){var s=t(r),a=IJ(),o=t(a),l=!1,u,c,h,d={point:f,lineStart:g,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=v,d.lineEnd=y,c=[],u=[]},polygonEnd:function(){d.point=f,d.lineStart=g,d.lineEnd=m,c=FJ(c);var b=zEt(u,n);c.length?(l||(r.polygonStart(),l=!0),LJ(c,VEt,b,e,r)):b&&(l||(r.polygonStart(),l=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(b,x){i(b,x)&&r.point(b,x)}function p(b,x){s.point(b,x)}function g(){d.point=p,s.lineStart()}function m(){d.point=f,s.lineEnd()}function _(b,x){h.push([b,x]),o.point(b,x)}function v(){o.lineStart(),h=[]}function y(){_(h[0][0],h[0][1]),o.lineEnd();var b=o.clean(),x=a.result(),S,w=x.length,A,k,C;if(h.pop(),u.push(h),h=null,!!w){if(b&1){if(k=x[0],(A=k.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),S=0;S<A;++S)r.point((C=k[S])[0],C[1]);r.lineEnd()}return}w>1&&b&2&&x.push(x.pop().concat(x.shift())),c.push(x.filter(HEt))}}return d}}function HEt(i){return i.length>1}function VEt(i,t){return((i=i.x)[0]<0?i[1]-Pn-Re:Pn-i[1])-((t=t.x)[0]<0?t[1]-Pn-Re:Pn-t[1])}const LW=zJ(function(){return!0},WEt,UEt,[-Ue,-Pn]);function WEt(i){var t=NaN,e=NaN,n=NaN,r;return{lineStart:function(){i.lineStart(),r=1},point:function(s,a){var o=s>0?Ue:-Ue,l=Oi(s-t);Oi(l-Ue)<Re?(i.point(t,e=(e+a)/2>0?Pn:-Pn),i.point(n,e),i.lineEnd(),i.lineStart(),i.point(o,e),i.point(s,e),r=0):n!==o&&l>=Ue&&(Oi(t-n)<Re&&(t-=n*Re),Oi(s-o)<Re&&(s-=o*Re),e=$Et(t,e,s,a),i.point(n,e),i.lineEnd(),i.lineStart(),i.point(o,e),r=0),i.point(t=s,e=a),n=o},lineEnd:function(){i.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function $Et(i,t,e,n){var r,s,a=Oe(i-e);return Oi(a)>Re?Dm((Oe(t)*(s=Ve(n))*Oe(e)-Oe(n)*(r=Ve(t))*Oe(i))/(r*s*a)):(t+n)/2}function UEt(i,t,e,n){var r;if(i==null)r=e*Pn,n.point(-Ue,r),n.point(0,r),n.point(Ue,r),n.point(Ue,0),n.point(Ue,-r),n.point(0,-r),n.point(-Ue,-r),n.point(-Ue,0),n.point(-Ue,r);else if(Oi(i[0]-t[0])>Re){var s=i[0]<t[0]?Ue:-Ue;r=e*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(t[0],t[1])}function GEt(i){var t=Ve(i),e=6*dn,n=t>0,r=Oi(t)>Re;function s(c,h,d,f){FEt(f,i,e,d,c,h)}function a(c,h){return Ve(c)*Ve(h)>t}function o(c){var h,d,f,p,g;return{lineStart:function(){p=f=!1,g=1},point:function(m,_){var v=[m,_],y,b=a(m,_),x=n?b?0:u(m,_):b?u(m+(m<0?Ue:-Ue),_):0;if(!h&&(p=f=b)&&c.lineStart(),b!==f&&(y=l(h,v),(!y||c1(h,y)||c1(v,y))&&(v[2]=1)),b!==f)g=0,b?(c.lineStart(),y=l(v,h),c.point(y[0],y[1])):(y=l(h,v),c.point(y[0],y[1],2),c.lineEnd()),h=y;else if(r&&h&&n^b){var S;!(x&d)&&(S=l(v,h,!0))&&(g=0,n?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}b&&(!h||!c1(h,v))&&c.point(v[0],v[1]),h=v,f=b,d=x},lineEnd:function(){f&&c.lineEnd(),h=null},clean:function(){return g|(p&&f)<<1}}}function l(c,h,d){var f=Wg(c),p=Wg(h),g=[1,0,0],m=Cw(f,p),_=sS(m,m),v=m[0],y=_-v*v;if(!y)return!d&&c;var b=t*_/y,x=-t*v/y,S=Cw(g,m),w=aS(g,b),A=aS(m,x);gE(w,A);var k=S,C=sS(w,k),M=sS(k,k),R=C*C-M*(sS(w,w)-1);if(!(R<0)){var P=Qs(R),O=aS(k,(-C-P)/M);if(gE(O,w),O=eD(O),!d)return O;var T=c[0],D=h[0],B=c[1],I=h[1],F;D<T&&(F=T,T=D,D=F);var j=D-T,H=Oi(j-Ue)<Re,U=H||j<Re;if(!H&&I<B&&(F=B,B=I,I=F),U?H?B+I>0^O[1]<(Oi(O[0]-T)<Re?B:I):B<=O[1]&&O[1]<=I:j>Ue^(T<=O[0]&&O[0]<=D)){var K=aS(k,(-C+P)/M);return gE(K,w),[O,eD(K)]}}}function u(c,h){var d=n?i:Ue-i,f=0;return c<-d?f|=1:c>d&&(f|=2),h<-d?f|=4:h>d&&(f|=8),f}return zJ(a,o,s,n?[0,-i]:[-Ue,i-Ue])}function YEt(i,t,e,n,r,s){var a=i[0],o=i[1],l=t[0],u=t[1],c=0,h=1,d=l-a,f=u-o,p;if(p=e-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>c&&(c=p)}if(p=r-a,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<h&&(h=p)}if(p=n-o,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<h&&(h=p)}else if(f>0){if(p>h)return;p>c&&(c=p)}if(p=s-o,!(!f&&p<0)){if(p/=f,f<0){if(p>h)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<h&&(h=p)}return c>0&&(i[0]=a+c*d,i[1]=o+c*f),h<1&&(t[0]=a+h*d,t[1]=o+h*f),!0}}}}}var Y_=1e9,lS=-Y_;function NJ(i,t,e,n){function r(u,c){return i<=u&&u<=e&&t<=c&&c<=n}function s(u,c,h,d){var f=0,p=0;if(u==null||(f=a(u,h))!==(p=a(c,h))||l(u,c)<0^h>0)do d.point(f===0||f===3?i:e,f>1?n:t);while((f=(f+h+4)%4)!==p);else d.point(c[0],c[1])}function a(u,c){return Oi(u[0]-i)<Re?c>0?0:3:Oi(u[0]-e)<Re?c>0?2:1:Oi(u[1]-t)<Re?c>0?1:0:c>0?3:2}function o(u,c){return l(u.x,c.x)}function l(u,c){var h=a(u,1),d=a(c,1);return h!==d?h-d:h===0?c[1]-u[1]:h===1?u[0]-c[0]:h===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,h=IJ(),d,f,p,g,m,_,v,y,b,x,S,w={point:A,lineStart:R,lineEnd:P,polygonStart:C,polygonEnd:M};function A(T,D){r(T,D)&&c.point(T,D)}function k(){for(var T=0,D=0,B=f.length;D<B;++D)for(var I=f[D],F=1,j=I.length,H=I[0],U,K,q=H[0],Z=H[1];F<j;++F)U=q,K=Z,H=I[F],q=H[0],Z=H[1],K<=n?Z>n&&(q-U)*(n-K)>(Z-K)*(i-U)&&++T:Z<=n&&(q-U)*(n-K)<(Z-K)*(i-U)&&--T;return T}function C(){c=h,d=[],f=[],S=!0}function M(){var T=k(),D=S&&T,B=(d=FJ(d)).length;(D||B)&&(u.polygonStart(),D&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),B&&LJ(d,o,T,s,u),u.polygonEnd()),c=u,d=f=p=null}function R(){w.point=O,f&&f.push(p=[]),x=!0,b=!1,v=y=NaN}function P(){d&&(O(g,m),_&&b&&h.rejoin(),d.push(h.result())),w.point=A,b&&c.lineEnd()}function O(T,D){var B=r(T,D);if(f&&p.push([T,D]),x)g=T,m=D,_=B,x=!1,B&&(c.lineStart(),c.point(T,D));else if(B&&b)c.point(T,D);else{var I=[v=Math.max(lS,Math.min(Y_,v)),y=Math.max(lS,Math.min(Y_,y))],F=[T=Math.max(lS,Math.min(Y_,T)),D=Math.max(lS,Math.min(Y_,D))];YEt(I,F,i,t,e,n)?(b||(c.lineStart(),c.point(I[0],I[1])),c.point(F[0],F[1]),B||c.lineEnd(),S=!1):B&&(c.lineStart(),c.point(T,D),S=!1)}v=T,y=D,b=B}return w}}function n0(i){return i}var vE=rM(),sD=rM(),jJ,HJ,aD,oD,xu={point:qa,lineStart:qa,lineEnd:qa,polygonStart:function(){xu.lineStart=XEt,xu.lineEnd=qEt},polygonEnd:function(){xu.lineStart=xu.lineEnd=xu.point=qa,vE.add(Oi(sD)),sD.reset()},result:function(){var i=vE/2;return vE.reset(),i}};function XEt(){xu.point=KEt}function KEt(i,t){xu.point=VJ,jJ=aD=i,HJ=oD=t}function VJ(i,t){sD.add(oD*i-aD*t),aD=i,oD=t}function qEt(){VJ(jJ,HJ)}var $g=1/0,Mw=$g,r0=-$g,Tw=r0,Pw={point:ZEt,lineStart:qa,lineEnd:qa,polygonStart:qa,polygonEnd:qa,result:function(){var i=[[$g,Mw],[r0,Tw]];return r0=Tw=-(Mw=$g=1/0),i}};function ZEt(i,t){i<$g&&($g=i),i>r0&&(r0=i),t<Mw&&(Mw=t),t>Tw&&(Tw=t)}var lD=0,uD=0,X_=0,Ew=0,Rw=0,Tp=0,cD=0,hD=0,K_=0,WJ,$J,wl,Al,Ga={point:Yd,lineStart:BW,lineEnd:FW,polygonStart:function(){Ga.lineStart=tRt,Ga.lineEnd=eRt},polygonEnd:function(){Ga.point=Yd,Ga.lineStart=BW,Ga.lineEnd=FW},result:function(){var i=K_?[cD/K_,hD/K_]:Tp?[Ew/Tp,Rw/Tp]:X_?[lD/X_,uD/X_]:[NaN,NaN];return lD=uD=X_=Ew=Rw=Tp=cD=hD=K_=0,i}};function Yd(i,t){lD+=i,uD+=t,++X_}function BW(){Ga.point=QEt}function QEt(i,t){Ga.point=JEt,Yd(wl=i,Al=t)}function JEt(i,t){var e=i-wl,n=t-Al,r=Qs(e*e+n*n);Ew+=r*(wl+i)/2,Rw+=r*(Al+t)/2,Tp+=r,Yd(wl=i,Al=t)}function FW(){Ga.point=Yd}function tRt(){Ga.point=iRt}function eRt(){UJ(WJ,$J)}function iRt(i,t){Ga.point=UJ,Yd(WJ=wl=i,$J=Al=t)}function UJ(i,t){var e=i-wl,n=t-Al,r=Qs(e*e+n*n);Ew+=r*(wl+i)/2,Rw+=r*(Al+t)/2,Tp+=r,r=Al*i-wl*t,cD+=r*(wl+i),hD+=r*(Al+t),K_+=r*3,Yd(wl=i,Al=t)}function GJ(i){this._context=i}GJ.prototype={_radius:4.5,pointRadius:function(i){return this._radius=i,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(i,t){switch(this._point){case 0:{this._context.moveTo(i,t),this._point=1;break}case 1:{this._context.lineTo(i,t);break}default:{this._context.moveTo(i+this._radius,t),this._context.arc(i,t,this._radius,0,Sa);break}}},result:qa};var dD=rM(),yE,YJ,XJ,q_,Z_,s0={point:qa,lineStart:function(){s0.point=nRt},lineEnd:function(){yE&&KJ(YJ,XJ),s0.point=qa},polygonStart:function(){yE=!0},polygonEnd:function(){yE=null},result:function(){var i=+dD;return dD.reset(),i}};function nRt(i,t){s0.point=KJ,YJ=q_=i,XJ=Z_=t}function KJ(i,t){q_-=i,Z_-=t,dD.add(Qs(q_*q_+Z_*Z_)),q_=i,Z_=t}function qJ(){this._string=[]}qJ.prototype={_radius:4.5,_circle:zW(4.5),pointRadius:function(i){return(i=+i)!==this._radius&&(this._radius=i,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(i,t){switch(this._point){case 0:{this._string.push("M",i,",",t),this._point=1;break}case 1:{this._string.push("L",i,",",t);break}default:{this._circle==null&&(this._circle=zW(this._radius)),this._string.push("M",i,",",t,this._circle);break}}},result:function(){if(this._string.length){var i=this._string.join("");return this._string=[],i}else return null}};function zW(i){return"m0,"+i+"a"+i+","+i+" 0 1,1 0,"+-2*i+"a"+i+","+i+" 0 1,1 0,"+2*i+"z"}function qB(i,t){var e=4.5,n,r;function s(a){return a&&(typeof e=="function"&&r.pointRadius(+e.apply(this,arguments)),rp(a,n(r))),r.result()}return s.area=function(a){return rp(a,n(xu)),xu.result()},s.measure=function(a){return rp(a,n(s0)),s0.result()},s.bounds=function(a){return rp(a,n(Pw)),Pw.result()},s.centroid=function(a){return rp(a,n(Ga)),Ga.result()},s.projection=function(a){return arguments.length?(n=a==null?(i=null,n0):(i=a).stream,s):i},s.context=function(a){return arguments.length?(r=a==null?(t=null,new qJ):new GJ(t=a),typeof e!="function"&&r.pointRadius(e),s):t},s.pointRadius=function(a){return arguments.length?(e=typeof a=="function"?a:(r.pointRadius(+a),+a),s):e},s.projection(i).context(t)}function sM(i){return function(t){var e=new fD;for(var n in i)e[n]=i[n];return e.stream=t,e}}function fD(){}fD.prototype={constructor:fD,point:function(i,t){this.stream.point(i,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ZB(i,t,e){var n=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),n!=null&&i.clipExtent(null),rp(e,i.stream(Pw)),t(Pw.result()),n!=null&&i.clipExtent(n),i}function aM(i,t,e){return ZB(i,function(n){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,l=+t[0][1]+(s-a*(n[1][1]+n[0][1]))/2;i.scale(150*a).translate([o,l])},e)}function QB(i,t,e){return aM(i,[[0,0],t],e)}function JB(i,t,e){return ZB(i,function(n){var r=+t,s=r/(n[1][0]-n[0][0]),a=(r-s*(n[1][0]+n[0][0]))/2,o=-s*n[0][1];i.scale(150*s).translate([a,o])},e)}function tF(i,t,e){return ZB(i,function(n){var r=+t,s=r/(n[1][1]-n[0][1]),a=-s*n[0][0],o=(r-s*(n[1][1]+n[0][1]))/2;i.scale(150*s).translate([a,o])},e)}var NW=16,rRt=Ve(30*dn);function jW(i,t){return+t?aRt(i,t):sRt(i)}function sRt(i){return sM({point:function(t,e){t=i(t,e),this.stream.point(t[0],t[1])}})}function aRt(i,t){function e(n,r,s,a,o,l,u,c,h,d,f,p,g,m){var _=u-n,v=c-r,y=_*_+v*v;if(y>4*t&&g--){var b=a+d,x=o+f,S=l+p,w=Qs(b*b+x*x+S*S),A=lo(S/=w),k=Oi(Oi(S)-1)<Re||Oi(s-h)<Re?(s+h)/2:Ku(x,b),C=i(k,A),M=C[0],R=C[1],P=M-n,O=R-r,T=v*P-_*O;(T*T/y>t||Oi((_*P+v*O)/y-.5)>.3||a*d+o*f+l*p<rRt)&&(e(n,r,s,a,o,l,M,R,k,b/=w,x/=w,S,g,m),m.point(M,R),e(M,R,k,b,x,S,u,c,h,d,f,p,g,m))}}return function(n){var r,s,a,o,l,u,c,h,d,f,p,g,m={point:_,lineStart:v,lineEnd:b,polygonStart:function(){n.polygonStart(),m.lineStart=x},polygonEnd:function(){n.polygonEnd(),m.lineStart=v}};function _(A,k){A=i(A,k),n.point(A[0],A[1])}function v(){h=NaN,m.point=y,n.lineStart()}function y(A,k){var C=Wg([A,k]),M=i(A,k);e(h,d,c,f,p,g,h=M[0],d=M[1],c=A,f=C[0],p=C[1],g=C[2],NW,n),n.point(h,d)}function b(){m.point=_,n.lineEnd()}function x(){v(),m.point=S,m.lineEnd=w}function S(A,k){y(r=A,k),s=h,a=d,o=f,l=p,u=g,m.point=y}function w(){e(h,d,c,f,p,g,s,a,r,o,l,u,NW,n),m.lineEnd=b,b()}return m}}var oRt=sM({point:function(i,t){this.stream.point(i*dn,t*dn)}});function lRt(i){return sM({point:function(t,e){var n=i(t,e);return this.stream.point(n[0],n[1])}})}function uRt(i,t,e,n,r){function s(a,o){return a*=n,o*=r,[t+i*a,e-i*o]}return s.invert=function(a,o){return[(a-t)/i*n,(e-o)/i*r]},s}function HW(i,t,e,n,r,s){var a=Ve(s),o=Oe(s),l=a*i,u=o*i,c=a/i,h=o/i,d=(o*e-a*t)/i,f=(o*t+a*e)/i;function p(g,m){return g*=n,m*=r,[l*g-u*m+t,e-u*g-l*m]}return p.invert=function(g,m){return[n*(c*g-h*m+d),r*(f-h*g-c*m)]},p}function oc(i){return ZJ(function(){return i})()}function ZJ(i){var t,e=150,n=480,r=250,s=0,a=0,o=0,l=0,u=0,c,h=0,d=1,f=1,p=null,g=LW,m=null,_,v,y,b=n0,x=.5,S,w,A,k,C;function M(T){return A(T[0]*dn,T[1]*dn)}function R(T){return T=A.invert(T[0],T[1]),T&&[T[0]*Yr,T[1]*Yr]}M.stream=function(T){return k&&C===T?k:k=oRt(lRt(c)(g(S(b(C=T)))))},M.preclip=function(T){return arguments.length?(g=T,p=void 0,O()):g},M.postclip=function(T){return arguments.length?(b=T,m=_=v=y=null,O()):b},M.clipAngle=function(T){return arguments.length?(g=+T?GEt(p=T*dn):(p=null,LW),O()):p*Yr},M.clipExtent=function(T){return arguments.length?(b=T==null?(m=_=v=y=null,n0):NJ(m=+T[0][0],_=+T[0][1],v=+T[1][0],y=+T[1][1]),O()):m==null?null:[[m,_],[v,y]]},M.scale=function(T){return arguments.length?(e=+T,P()):e},M.translate=function(T){return arguments.length?(n=+T[0],r=+T[1],P()):[n,r]},M.center=function(T){return arguments.length?(s=T[0]%360*dn,a=T[1]%360*dn,P()):[s*Yr,a*Yr]},M.rotate=function(T){return arguments.length?(o=T[0]%360*dn,l=T[1]%360*dn,u=T.length>2?T[2]%360*dn:0,P()):[o*Yr,l*Yr,u*Yr]},M.angle=function(T){return arguments.length?(h=T%360*dn,P()):h*Yr},M.reflectX=function(T){return arguments.length?(d=T?-1:1,P()):d<0},M.reflectY=function(T){return arguments.length?(f=T?-1:1,P()):f<0},M.precision=function(T){return arguments.length?(S=jW(w,x=T*T),O()):Qs(x)},M.fitExtent=function(T,D){return aM(M,T,D)},M.fitSize=function(T,D){return QB(M,T,D)},M.fitWidth=function(T,D){return JB(M,T,D)},M.fitHeight=function(T,D){return tF(M,T,D)};function P(){var T=HW(e,0,0,d,f,h).apply(null,t(s,a)),D=(h?HW:uRt)(e,n-T[0],r-T[1],d,f,h);return c=DJ(o,l,u),w=nD(t,D),A=nD(c,w),S=jW(w,x),O()}function O(){return k=C=null,M}return function(){return t=i.apply(this,arguments),M.invert=t.invert&&R,P()}}function eF(i){var t=0,e=Ue/3,n=ZJ(i),r=n(t,e);return r.parallels=function(s){return arguments.length?n(t=s[0]*dn,e=s[1]*dn):[t*Yr,e*Yr]},r}function cRt(i){var t=Ve(i);function e(n,r){return[n*t,Oe(r)/t]}return e.invert=function(n,r){return[n/t,lo(r*t)]},e}function hRt(i,t){var e=Oe(i),n=(e+Oe(t))/2;if(Oi(n)<Re)return cRt(i);var r=1+e*(2*n-e),s=Qs(r)/n;function a(o,l){var u=Qs(r-2*n*Oe(l))/n;return[u*Oe(o*=n),s-u*Ve(o)]}return a.invert=function(o,l){var u=s-l,c=Ku(o,Oi(u))*Ka(u);return u*n<0&&(c-=Ue*Ka(o)*Ka(u)),[c/n,lo((r-(o*o+u*u)*n*n)/(2*n))]},a}function Ow(){return eF(hRt).scale(155.424).center([0,33.6442])}function QJ(){return Ow().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function dRt(i){var t=i.length;return{point:function(e,n){for(var r=-1;++r<t;)i[r].point(e,n)},sphere:function(){for(var e=-1;++e<t;)i[e].sphere()},lineStart:function(){for(var e=-1;++e<t;)i[e].lineStart()},lineEnd:function(){for(var e=-1;++e<t;)i[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<t;)i[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<t;)i[e].polygonEnd()}}}function fRt(){var i,t,e=QJ(),n,r=Ow().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=Ow().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,u={point:function(d,f){l=[d,f]}};function c(d){var f=d[0],p=d[1];return l=null,n.point(f,p),l||(s.point(f,p),l)||(o.point(f,p),l)}c.invert=function(d){var f=e.scale(),p=e.translate(),g=(d[0]-p[0])/f,m=(d[1]-p[1])/f;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?r:m>=.166&&m<.234&&g>=-.214&&g<-.115?a:e).invert(d)},c.stream=function(d){return i&&t===d?i:i=dRt([e.stream(t=d),r.stream(d),a.stream(d)])},c.precision=function(d){return arguments.length?(e.precision(d),r.precision(d),a.precision(d),h()):e.precision()},c.scale=function(d){return arguments.length?(e.scale(d),r.scale(d*.35),a.scale(d),c.translate(e.translate())):e.scale()},c.translate=function(d){if(!arguments.length)return e.translate();var f=e.scale(),p=+d[0],g=+d[1];return n=e.translate(d).clipExtent([[p-.455*f,g-.238*f],[p+.455*f,g+.238*f]]).stream(u),s=r.translate([p-.307*f,g+.201*f]).clipExtent([[p-.425*f+Re,g+.12*f+Re],[p-.214*f-Re,g+.234*f-Re]]).stream(u),o=a.translate([p-.205*f,g+.212*f]).clipExtent([[p-.214*f+Re,g+.166*f+Re],[p-.115*f-Re,g+.234*f-Re]]).stream(u),h()},c.fitExtent=function(d,f){return aM(c,d,f)},c.fitSize=function(d,f){return QB(c,d,f)},c.fitWidth=function(d,f){return JB(c,d,f)},c.fitHeight=function(d,f){return tF(c,d,f)};function h(){return i=t=null,c}return c.scale(1070)}function JJ(i){return function(t,e){var n=Ve(t),r=Ve(e),s=i(n*r);return[s*r*Oe(t),s*Oe(e)]}}function Eb(i){return function(t,e){var n=Qs(t*t+e*e),r=i(n),s=Oe(r),a=Ve(r);return[Ku(t*s,n*a),lo(n&&e*s/n)]}}var ttt=JJ(function(i){return Qs(2/(1+i))});ttt.invert=Eb(function(i){return 2*lo(i/2)});function pRt(){return oc(ttt).scale(124.75).clipAngle(180-.001)}var ett=JJ(function(i){return(i=OJ(i))&&i/Oe(i)});ett.invert=Eb(function(i){return i});function gRt(){return oc(ett).scale(79.4188).clipAngle(180-.001)}function oM(i,t){return[i,Aw(KB((Pn+t)/2))]}oM.invert=function(i,t){return[i,2*Dm(RJ(t))-Pn]};function mRt(){return itt(oM).scale(961/Sa)}function itt(i){var t=oc(i),e=t.center,n=t.scale,r=t.translate,s=t.clipExtent,a=null,o,l,u;t.scale=function(h){return arguments.length?(n(h),c()):n()},t.translate=function(h){return arguments.length?(r(h),c()):r()},t.center=function(h){return arguments.length?(e(h),c()):e()},t.clipExtent=function(h){return arguments.length?(h==null?a=o=l=u=null:(a=+h[0][0],o=+h[0][1],l=+h[1][0],u=+h[1][1]),c()):a==null?null:[[a,o],[l,u]]};function c(){var h=Ue*n(),d=t(BEt(t.rotate()).invert([0,0]));return s(a==null?[[d[0]-h,d[1]-h],[d[0]+h,d[1]+h]]:i===oM?[[Math.max(d[0]-h,a),o],[Math.min(d[0]+h,l),u]]:[[a,Math.max(d[1]-h,o)],[l,Math.min(d[1]+h,u)]])}return c()}function uS(i){return KB((Pn+i)/2)}function _Rt(i,t){var e=Ve(i),n=i===t?Oe(i):Aw(e/Ve(t))/Aw(uS(t)/uS(i)),r=e*pE(uS(i),n)/n;if(!n)return oM;function s(a,o){r>0?o<-Pn+Re&&(o=-Pn+Re):o>Pn-Re&&(o=Pn-Re);var l=r/pE(uS(o),n);return[l*Oe(n*a),r-l*Ve(n*a)]}return s.invert=function(a,o){var l=r-o,u=Ka(n)*Qs(a*a+l*l),c=Ku(a,Oi(l))*Ka(l);return l*n<0&&(c-=Ue*Ka(a)*Ka(l)),[c/n,2*Dm(pE(r/u,1/n))-Pn]},s}function vRt(){return eF(_Rt).scale(109.5).parallels([30,30])}function Dw(i,t){return[i,t]}Dw.invert=Dw;function yRt(){return oc(Dw).scale(152.63)}function bRt(i,t){var e=Ve(i),n=i===t?Oe(i):(e-Ve(t))/(t-i),r=e/n+i;if(Oi(n)<Re)return Dw;function s(a,o){var l=r-o,u=n*a;return[l*Oe(u),r-l*Ve(u)]}return s.invert=function(a,o){var l=r-o,u=Ku(a,Oi(l))*Ka(l);return l*n<0&&(u-=Ue*Ka(a)*Ka(l)),[u/n,r-Ka(n)*Qs(a*a+l*l)]},s}function xRt(){return eF(bRt).scale(131.154).center([0,13.9389])}var bv=1.340264,xv=-.081106,Sv=893e-6,wv=.003796,Iw=Qs(3)/2,SRt=12;function ntt(i,t){var e=lo(Iw*Oe(t)),n=e*e,r=n*n*n;return[i*Ve(e)/(Iw*(bv+3*xv*n+r*(7*Sv+9*wv*n))),e*(bv+xv*n+r*(Sv+wv*n))]}ntt.invert=function(i,t){for(var e=t,n=e*e,r=n*n*n,s=0,a,o,l;s<SRt&&(o=e*(bv+xv*n+r*(Sv+wv*n))-t,l=bv+3*xv*n+r*(7*Sv+9*wv*n),e-=a=o/l,n=e*e,r=n*n*n,!(Oi(a)<LEt));++s);return[Iw*i*(bv+3*xv*n+r*(7*Sv+9*wv*n))/Ve(e),lo(Oe(e)/Iw)]};function wRt(){return oc(ntt).scale(177.158)}function rtt(i,t){var e=Ve(t),n=Ve(i)*e;return[e*Oe(i)/n,Oe(t)/n]}rtt.invert=Eb(Dm);function ARt(){return oc(rtt).scale(144.049).clipAngle(60)}function kRt(){var i=1,t=0,e=0,n=1,r=1,s=0,a,o,l=null,u,c,h,d=1,f=1,p=sM({point:function(b,x){var S=y([b,x]);this.stream.point(S[0],S[1])}}),g=n0,m,_;function v(){return d=i*n,f=i*r,m=_=null,y}function y(b){var x=b[0]*d,S=b[1]*f;if(s){var w=S*a-x*o;x=x*a+S*o,S=w}return[x+t,S+e]}return y.invert=function(b){var x=b[0]-t,S=b[1]-e;if(s){var w=S*a+x*o;x=x*a-S*o,S=w}return[x/d,S/f]},y.stream=function(b){return m&&_===b?m:m=p(g(_=b))},y.postclip=function(b){return arguments.length?(g=b,l=u=c=h=null,v()):g},y.clipExtent=function(b){return arguments.length?(g=b==null?(l=u=c=h=null,n0):NJ(l=+b[0][0],u=+b[0][1],c=+b[1][0],h=+b[1][1]),v()):l==null?null:[[l,u],[c,h]]},y.scale=function(b){return arguments.length?(i=+b,v()):i},y.translate=function(b){return arguments.length?(t=+b[0],e=+b[1],v()):[t,e]},y.angle=function(b){return arguments.length?(s=b%360*dn,o=Oe(s),a=Ve(s),v()):s*Yr},y.reflectX=function(b){return arguments.length?(n=b?-1:1,v()):n<0},y.reflectY=function(b){return arguments.length?(r=b?-1:1,v()):r<0},y.fitExtent=function(b,x){return aM(y,b,x)},y.fitSize=function(b,x){return QB(y,b,x)},y.fitWidth=function(b,x){return JB(y,b,x)},y.fitHeight=function(b,x){return tF(y,b,x)},y}function stt(i,t){var e=t*t,n=e*e;return[i*(.8707-.131979*e+n*(-.013791+n*(.003971*e-.001529*n))),t*(1.007226+e*(.015085+n*(-.044475+.028874*e-.005916*n)))]}stt.invert=function(i,t){var e=t,n=25,r;do{var s=e*e,a=s*s;e-=r=(e*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-t)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(Oi(r)>Re&&--n>0);return[i/(.8707+(s=e*e)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),e]};function CRt(){return oc(stt).scale(175.295)}function att(i,t){return[Ve(t)*Oe(i),Oe(t)]}att.invert=Eb(lo);function MRt(){return oc(att).scale(249.5).clipAngle(90+Re)}function ott(i,t){var e=Ve(t),n=1+Ve(i)*e;return[e*Oe(i)/n,Oe(t)/n]}ott.invert=Eb(function(i){return 2*Dm(i)});function TRt(){return oc(ott).scale(250).clipAngle(142)}function ltt(i,t){return[Aw(KB((Pn+t)/2)),-i]}ltt.invert=function(i,t){return[-t,2*Dm(RJ(i))-Pn]};function PRt(){var i=itt(ltt),t=i.center,e=i.rotate;return i.center=function(n){return arguments.length?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},i.rotate=function(n){return arguments.length?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90]).scale(159.155)}function ERt(i){return i}function RRt(i){if(i==null)return ERt;var t,e,n=i.scale[0],r=i.scale[1],s=i.translate[0],a=i.translate[1];return function(o,l){l||(t=e=0);var u=2,c=o.length,h=new Array(c);for(h[0]=(t+=o[0])*n+s,h[1]=(e+=o[1])*r+a;u<c;)h[u]=o[u],++u;return h}}function ORt(i,t){for(var e,n=i.length,r=n-t;r<--n;)e=i[r],i[r++]=i[n],i[n]=e}function DRt(i,t){return typeof t=="string"&&(t=i.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(e){return VW(i,e)})}:VW(i,t)}function VW(i,t){var e=t.id,n=t.bbox,r=t.properties==null?{}:t.properties,s=IRt(i,t);return e==null&&n==null?{type:"Feature",properties:r,geometry:s}:n==null?{type:"Feature",id:e,properties:r,geometry:s}:{type:"Feature",id:e,bbox:n,properties:r,geometry:s}}function IRt(i,t){var e=RRt(i.transform),n=i.arcs;function r(c,h){h.length&&h.pop();for(var d=n[c<0?~c:c],f=0,p=d.length;f<p;++f)h.push(e(d[f],f));c<0&&ORt(h,p)}function s(c){return e(c)}function a(c){for(var h=[],d=0,f=c.length;d<f;++d)r(c[d],h);return h.length<2&&h.push(h[0]),h}function o(c){for(var h=a(c);h.length<4;)h.push(h[0]);return h}function l(c){return c.map(o)}function u(c){var h=c.type,d;switch(h){case"GeometryCollection":return{type:h,geometries:c.geometries.map(u)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=a(c.arcs);break;case"MultiLineString":d=c.arcs.map(a);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:h,coordinates:d}}return u(t)}var utt={exports:{}},nl=function(i,t){this.p1=i,this.p2=t};nl.prototype.rise=function(){return this.p2[1]-this.p1[1]};nl.prototype.run=function(){return this.p2[0]-this.p1[0]};nl.prototype.slope=function(){return this.rise()/this.run()};nl.prototype.yIntercept=function(){return this.p1[1]-this.p1[0]*this.slope(this.p1,this.p2)};nl.prototype.isVertical=function(){return!isFinite(this.slope())};nl.prototype.isHorizontal=function(){return this.p1[1]==this.p2[1]};nl.prototype._perpendicularDistanceHorizontal=function(i){return Math.abs(this.p1[1]-i[1])};nl.prototype._perpendicularDistanceVertical=function(i){return Math.abs(this.p1[0]-i[0])};nl.prototype._perpendicularDistanceHasSlope=function(i){var t=this.slope(),e=this.yIntercept();return Math.abs(t*i[0]-i[1]+e)/Math.sqrt(Math.pow(t,2)+1)};nl.prototype.perpendicularDistance=function(i){return this.isVertical()?this._perpendicularDistanceVertical(i):this.isHorizontal()?this._perpendicularDistanceHorizontal(i):this._perpendicularDistanceHasSlope(i)};var LRt=nl,BRt=LRt,pD=function(i,t){for(var e=0,n=0,r=1;r<=i.length-2;r++){var s=new BRt(i[0],i[i.length-1]).perpendicularDistance(i[r]);s>e&&(n=r,e=s)}if(e>t)var a=pD(i.slice(0,n),t),o=pD(i.slice(n,i.length),t),l=a.concat(o);else i.length>1?l=[i[0],i[i.length-1]]:l=[i[0]];return l},FRt=pD;(function(i){var t=FRt;i.exports=function(r,s,a){return a||(r=JSON.parse(JSON.stringify(r))),r.features?n(r,s):r.type&&r.type==="Feature"?e(r,s):new Error("FeatureCollection or individual Feature required")},i.exports.simplify=function(r,s){return t(r,s)};function e(r,s){var a=r.geometry,o=a.type;if(o==="LineString")a.coordinates=i.exports.simplify(a.coordinates,s);else if(o==="Polygon"||o==="MultiLineString")for(var l=0;l<a.coordinates.length;l++)a.coordinates[l]=i.exports.simplify(a.coordinates[l],s);else if(o==="MultiPolygon")for(var u=0;u<a.coordinates.length;u++)for(var c=0;c<a.coordinates[u].length;c++)a.coordinates[u][c]=i.exports.simplify(a.coordinates[u][c],s);return r}function n(r,s){for(var a=0;a<r.features.length;a++)r.features[a]=e(r.features[a],s);return r}})(utt);var zRt=utt.exports;const NRt=ib(zRt),lM=function(i,...t){return HRt(Jr(i),...t)};function ctt(i,t,e){const n=t[e];if(n===void 0)i[e]=null;else if(ee(n)){ee(i[e])||(i[e]={});for(const r in n)ctt(i[e],n,r)}else i[e]=n}function jRt(i,t){if(ee(t)&&i!==t)for(const e in t)ctt(i,t,e)}function HRt(i,...t){i||(i={});let e=-1;const n=t.length;for(;++e<n;)jRt(i,t[e]);return i}const VRt={tolerance:.01},WRt=(i,t)=>{const e=lM(VRt,t),{tolerance:n}=e;return NRt(i,n)};var Xd;(function(i){i.DSV="dsv",i.TREE="tree",i.GEO="geo",i.BYTE="bytejson",i.HEX="hex",i.GRAPH="graph",i.TABLE="table",i.GEO_GRATICULE="geo-graticule"})(Xd||(Xd={}));const $Rt=(i,t)=>{const{fields:e,key:n,value:r,retains:s}=t,a=[];for(let o=0;o<i.length;o++)e.forEach(l=>{const u={};if(u[n]=l,u[r]=i[o][l],s)s.forEach(c=>{u[c]=i[o][c]});else for(const c in i[o])e.indexOf(c)===-1&&(u[c]=i[o][c]);a.push(u)});return a},htt=(i,t)=>{var e,n;if(!t?.fields||i.length===0)return i;const r=t.fields,s=i[0],a={},o=[];for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const u=r[l];if(u.sort&&(et(u.sortIndex)||(u.sortIndex=0),L(u.sortReverse)||(u.sortReverse=u.sort==="desc")),!u.type){let h=s;l in s||(h=(e=i.find(d=>l in d))!==null&&e!==void 0?e:s),u.type=typeof h[l]=="number"?"linear":"ordinal"}let c;if(typeof u.sortIndex=="number"&&(c={key:l,type:u.type,index:u.sortIndex,sortIndex:{},sortIndexCount:0,sortReverse:u.sortReverse===!0},o.push(c)),((n=u.domain)===null||n===void 0?void 0:n.length)>0)if(u.type==="ordinal"){u._domainCache={},a[l]=u;const h={};u.domain.forEach((d,f)=>{h[d]=f,u._domainCache[d]=f}),c&&(c.sortIndex=h,c.sortIndexCount=u.domain.length)}else u.domain.length>=2&&(a[l]=u)}return Object.keys(a).length>0&&(i=i.filter(l=>{for(const u in a){const c=a[u];if(c.type==="ordinal"){if(!(l[u]in c._domainCache))return!1}else if(c.domain[0]>l[u]||c.domain[1]<l[u])return!1}return!0})),o.sort((l,u)=>l.index-u.index),i.sort((l,u)=>URt(l,u,o)),i};function URt(i,t,e){for(let n=0;n<e.length;n++){const r=e[n];let s=0;if(r.type==="ordinal"?(r.sortIndex[t[r.key]]===void 0&&(r.sortIndex[t[r.key]]=r.sortIndexCount++),r.sortIndex[i[r.key]]===void 0&&(r.sortIndex[i[r.key]]=r.sortIndexCount++),s=r.sortIndex[i[r.key]]-r.sortIndex[t[r.key]]):r.type==="linear"&&(s=i[r.key]-t[r.key]),r.sortReverse&&(s=-s),s!==0)return s}return 0}const WW=(i,t)=>{var e,n,r,s;const{numBins:a,thresholds:o,countName:l,percentageName:u,valuesName:c,countField:h,field:d,n:f,x0Name:p,x1Name:g}=t,m=t.groupField,_=Array.isArray(m)?m.length>0:!!m,v=[];if(!_)for(let C=0;C<a;C++){const M={[p]:o[C],[g]:o[C+1],[l]:0};t.includeValues&&(M[c]=[]),v.push(M)}const y=_?new Array(a).fill(0).map(()=>new Map):[],b=_?new Array(a).fill(0).map(()=>new Map):[],x=[],S=new Set,w=new Map;for(let C=0;C<f;C++){const M=i[C][d];if(M==null)continue;const R=+M;if(Number.isFinite(R))for(let P=0;P<a;P++){const O=o[P],T=o[P+1];if(R>=O&&R<T||P===a-1&&R<=T){const D=(e=i[C][h])!==null&&e!==void 0?e:1;if(_){let B;B=J(m)?m.map(j=>String(i[C][j])).join("||"):String(i[C][m]);const I=y[P],F=(n=I.get(B))!==null&&n!==void 0?n:0;if(I.set(B,F+D),S.has(B)||(S.add(B),x.push(B),J(m)?w.set(B,Object.fromEntries(m.map(j=>[j,i[C][j]]))):w.set(B,i[C][m])),t&&t.includeValues){const j=b[P];j.has(B)||j.set(B,[]);const H=j.get(B);H&&H.push(i[C])}}else v[P][l]+=D;t&&t.includeValues&&!_&&v[P][c].push(i[C]);break}}}let A=0;const k=[];if(_){for(let M=0;M<a;M++)for(const R of x){const P=(r=y[M].get(R))!==null&&r!==void 0?r:0,O={[p]:o[M],[g]:o[M+1],[l]:P},T=(s=w.get(R))!==null&&s!==void 0?s:{};if(J(m))for(const D of m)O[D]=T[D];else m&&(O[m]=T);t&&t.includeValues&&(O[c]=b[M].get(R)||[]),k.push(O),A+=P}const C=A;for(const M of k)M[u]=C>0?M[l]/C:0}else{for(let C=0,M=v.length;C<M;C++)A+=v[C][l];for(let C=0,M=v.length;C<M;C++)v[C][u]=A>0?v[C][l]/A:0,k.push(v[C])}return k},GRt=(i,t)=>{var e,n,r,s,a,o,l,u,c,h;const d=t?.field;if(!d)return[];const f=t.countField,p=i.length;let g,m=1/0,_=-1/0;if(t.extent)m=t.extent[0],_=t.extent[1];else for(let P=0;P<p;P++){const O=i[P][d];if(N(O))continue;const T=+O;Number.isFinite(T)&&(T<m&&(m=T),T>_&&(_=T))}if(!Number.isFinite(m)||!Number.isFinite(_)||p===0)return[];if(t.thresholds&&t.thresholds.length)g=t.thresholds.slice(),g.sort((P,O)=>P-O);else if(typeof t.step=="number"&&t.step>0){const P=t.step;let O=m;for(t.extent||(O=Math.floor(m/P)*P),g=[O];O<=_;)O+=P,g.push(O)}else{let P=t.bins&&t.bins>0?Math.floor(t.bins):10;if(_-m>1){const O=Math.floor(m),T=Math.ceil((_-O)/P);g=new Array(P+1);for(let D=0;D<=P;D++)if(g[D]=O+T*D,g[D]>_){P=D,g.length=P+1;break}}else{const O=(_-m)/P;g=new Array(P+1);for(let T=0;T<=P;T++)if(g[T]=m+O*T,g[T]>_){P=T,g.length=P+1;break}}}const v=Math.max(0,g.length-1);if(v===0)return[];const y=(n=(e=t.outputNames)===null||e===void 0?void 0:e.x0)!==null&&n!==void 0?n:"x0",b=(s=(r=t.outputNames)===null||r===void 0?void 0:r.x1)!==null&&s!==void 0?s:"x1",x=(o=(a=t.outputNames)===null||a===void 0?void 0:a.count)!==null&&o!==void 0?o:"count",S=(u=(l=t.outputNames)===null||l===void 0?void 0:l.values)!==null&&u!==void 0?u:"values",w=(h=(c=t.outputNames)===null||c===void 0?void 0:c.percentage)!==null&&h!==void 0?h:"percentage",A=J(t?.facetField)?t?.facetField:t?.facetField?[t.facetField]:[],k=J(t?.groupField)?t?.groupField:t?.groupField?[t.groupField]:[],C=k.length?k:void 0,M=Object.assign(Object.assign({},t),{numBins:v,thresholds:g,countName:x,percentageName:w,valuesName:S,countField:f,field:d,n:p,x0Name:y,x1Name:b,groupField:C});if(!A.length)return WW(i,M);const R={};return i.forEach(P=>{const O=A.map(T=>P?.[T]).join("-&&-");R[O]?R[O].push(P):R[O]=[P]}),Object.values(R).map(P=>{const O=[...k,...A];return WW(P,Object.assign(Object.assign({},M),{groupField:O.length?O:void 0,n:P.length}))}).flat()},YRt=(i,t)=>{var e,n,r,s,a,o,l,u,c,h,d,f,p,g,m,_;const v=t?.field;if(!v)return[];const y=t?.groupField;let b=(e=t?.whiskers)!==null&&e!==void 0?e:1.5;const x=!!t?.includeValues,S=(n=t?.outputNames)!==null&&n!==void 0?n:{},w=(r=S.key)!==null&&r!==void 0?r:J(y)?null:(s=y)!==null&&s!==void 0?s:"key",A=(a=S.count)!==null&&a!==void 0?a:"count",k=(o=S.mean)!==null&&o!==void 0?o:"mean",C=(l=S.q1)!==null&&l!==void 0?l:"q1",M=(u=S.median)!==null&&u!==void 0?u:"median",R=(c=S.q3)!==null&&c!==void 0?c:"q3",P=(h=S.iqr)!==null&&h!==void 0?h:"iqr",O=(d=S.min)!==null&&d!==void 0?d:"min",T=(f=S.max)!==null&&f!==void 0?f:"max",D=(p=S.lowerWhisker)!==null&&p!==void 0?p:"lowerWhisker",B=(g=S.upperWhisker)!==null&&g!==void 0?g:"upperWhisker",I=(m=S.outliers)!==null&&m!==void 0?m:"outliers",F=(_=S.values)!==null&&_!==void 0?_:"values",j=new Map,H=new Map,U=new Map,K=i.length;for(let Z=0;Z<K;Z++){const at=i[Z],$=at[v];if(N($))continue;const ft=+$;if(!Number.isFinite(ft))continue;let pt;pt=J(y)?y.map(gt=>String(at[gt])).join("||"):y?String(at[y]):"___all",j.has(pt)||(j.set(pt,[]),x&&H.set(pt,[]),J(y)?U.set(pt,Object.fromEntries(y.map(gt=>[gt,at[gt]]))):U.set(pt,y?at[y]:null));const rt=j.get(pt);if(rt&&rt.push(ft),x){const gt=H.get(pt);gt&&gt.push(at)}}J(b)&&(b=[Ke(Math.min.apply(null,b),0,1),Ke(Math.max.apply(null,b),0,1)]);const q=[];for(const[Z,at]of j){if(!at||at.length===0)continue;const $=at.slice().sort((nt,wt)=>nt-wt),ft=$.length,pt=$[0],rt=$[$.length-1];let gt=0;for(let nt=0;nt<$.length;nt++)gt+=$[nt];const mt=gt/ft,Dt=np($,.25),St=np($,.5),Ot=np($,.75),Pt=Ot-Dt,_e=J(b)?np($,b[0]):Dt-b*Pt,Ze=J(b)?np($,b[1]):Ot+b*Pt,It=[];for(let nt=0;nt<$.length;nt++)($[nt]<_e||$[nt]>Ze)&&It.push($[nt]);const W={},Q=U.get(Z);if(w!==null)W[w]=Q;else if(J(y)){const nt=Q||{};for(const wt of y)W[wt]=nt[wt]}W[A]=ft,W[k]=mt,W[C]=Dt,W[M]=St,W[R]=Ot,W[P]=Pt,W[O]=pt,W[T]=rt,W[D]=_e,W[B]=Ze,W[I]=It,x&&(W[F]=H.get(Z)||[]),q.push(W)}return q};var $W={},bE={},xE=34,x_=10,SE=13;function dtt(i){return new Function("d","return {"+i.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function XRt(i,t){var e=dtt(i);return function(n,r){return t(e(n),r,i)}}function UW(i){var t=Object.create(null),e=[];return i.forEach(function(n){for(var r in n)r in t||e.push(t[r]=r)}),e}function Ls(i,t){var e=i+"",n=e.length;return n<t?new Array(t-n+1).join(0)+e:e}function KRt(i){return i<0?"-"+Ls(-i,6):i>9999?"+"+Ls(i,6):Ls(i,4)}function qRt(i){var t=i.getUTCHours(),e=i.getUTCMinutes(),n=i.getUTCSeconds(),r=i.getUTCMilliseconds();return isNaN(i)?"Invalid Date":KRt(i.getUTCFullYear())+"-"+Ls(i.getUTCMonth()+1,2)+"-"+Ls(i.getUTCDate(),2)+(r?"T"+Ls(t,2)+":"+Ls(e,2)+":"+Ls(n,2)+"."+Ls(r,3)+"Z":n?"T"+Ls(t,2)+":"+Ls(e,2)+":"+Ls(n,2)+"Z":e||t?"T"+Ls(t,2)+":"+Ls(e,2)+"Z":"")}function iF(i){var t=new RegExp('["'+i+`
\r]`),e=i.charCodeAt(0);function n(h,d){var f,p,g=r(h,function(m,_){if(f)return f(m,_-1);p=m,f=d?XRt(m,d):dtt(m)});return g.columns=p||[],g}function r(h,d){var f=[],p=h.length,g=0,m=0,_,v=p<=0,y=!1;h.charCodeAt(p-1)===x_&&--p,h.charCodeAt(p-1)===SE&&--p;function b(){if(v)return bE;if(y)return y=!1,$W;var S,w=g,A;if(h.charCodeAt(w)===xE){for(;g++<p&&h.charCodeAt(g)!==xE||h.charCodeAt(++g)===xE;);return(S=g)>=p?v=!0:(A=h.charCodeAt(g++))===x_?y=!0:A===SE&&(y=!0,h.charCodeAt(g)===x_&&++g),h.slice(w+1,S-1).replace(/""/g,'"')}for(;g<p;){if((A=h.charCodeAt(S=g++))===x_)y=!0;else if(A===SE)y=!0,h.charCodeAt(g)===x_&&++g;else if(A!==e)continue;return h.slice(w,S)}return v=!0,h.slice(w,p)}for(;(_=b())!==bE;){for(var x=[];_!==$W&&_!==bE;)x.push(_),_=b();d&&(x=d(x,m++))==null||f.push(x)}return f}function s(h,d){return h.map(function(f){return d.map(function(p){return c(f[p])}).join(i)})}function a(h,d){return d==null&&(d=UW(h)),[d.map(c).join(i)].concat(s(h,d)).join(`
`)}function o(h,d){return d==null&&(d=UW(h)),s(h,d).join(`
`)}function l(h){return h.map(u).join(`
`)}function u(h){return h.map(c).join(i)}function c(h){return h==null?"":h instanceof Date?qRt(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:n,parseRows:r,format:a,formatBody:o,formatRows:l,formatRow:u,formatValue:c}}var ZRt=iF(","),QRt=ZRt.parse,JRt=iF("	"),tOt=JRt.parse;const eOt={delimiter:","},iOt=(i,t={},e)=>{e.type=Xd.DSV;const n=lM(eOt,t),{delimiter:r}=n;if(!Ht(r))throw new TypeError("Invalid delimiter: must be a string!");return iF(r).parse(i)},nOt=(i,t={},e)=>(e.type=Xd.DSV,QRt(i)),rOt=(i,t={},e)=>(e.type=Xd.DSV,tOt(i));function sOt(i){if(!i)throw new Error("geojson is required");switch(i.type){case"Feature":return ftt(i);case"FeatureCollection":return aOt(i);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return nF(i);default:throw new Error("unknown GeoJSON type")}}function ftt(i){var t={type:"Feature"};return Object.keys(i).forEach(function(e){switch(e){case"type":case"properties":case"geometry":return;default:t[e]=i[e]}}),t.properties=ptt(i.properties),t.geometry=nF(i.geometry),t}function ptt(i){var t={};return i&&Object.keys(i).forEach(function(e){var n=i[e];typeof n=="object"?n===null?t[e]=null:Array.isArray(n)?t[e]=n.map(function(r){return r}):t[e]=ptt(n):t[e]=n}),t}function aOt(i){var t={type:"FeatureCollection"};return Object.keys(i).forEach(function(e){switch(e){case"type":case"features":return;default:t[e]=i[e]}}),t.features=i.features.map(function(e){return ftt(e)}),t}function nF(i){var t={type:i.type};return i.bbox&&(t.bbox=i.bbox),i.type==="GeometryCollection"?(t.geometries=i.geometries.map(function(e){return nF(e)}),t):(t.coordinates=gtt(i.coordinates),t)}function gtt(i){var t=i;return typeof t[0]!="object"?t.slice():t.map(function(e){return gtt(e)})}function Q_(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function gD(i){for(var t=Q_(i),e=0,n=1,r,s;n<t.length;)r=s||t[0],s=t[n],e+=(s[0]-r[0])*(s[1]+r[1]),n++;return e>0}function GW(i,t){if(i.type==="Feature")t(i,0);else if(i.type==="FeatureCollection")for(var e=0;e<i.features.length&&t(i.features[e],e)!==!1;e++);}function rF(i,t){var e,n,r,s,a,o,l,u,c,h,d=0,f=i.type==="FeatureCollection",p=i.type==="Feature",g=f?i.features.length:1;for(e=0;e<g;e++){for(o=f?i.features[e].geometry:p?i.geometry:i,u=f?i.features[e].properties:p?i.properties:{},c=f?i.features[e].bbox:p?i.bbox:void 0,h=f?i.features[e].id:p?i.id:void 0,l=o?o.type==="GeometryCollection":!1,a=l?o.geometries.length:1,r=0;r<a;r++){if(s=l?o.geometries[r]:o,s===null){if(t(null,d,u,c,h)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,d,u,c,h)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<s.geometries.length;n++)if(t(s.geometries[n],d,u,c,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function oOt(i,t){rF(i,function(e,n,r,s,a){var o=e===null?null:e.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return t(yW(e,r,{bbox:s,id:a}),n,0)===!1?!1:void 0}var l;switch(o){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<e.coordinates.length;u++){var c=e.coordinates[u],h={type:l,coordinates:c};if(t(yW(h,r),n,u)===!1)return!1}})}function lOt(i,t){if(t=t||{},!yEt(t))throw new Error("options is invalid");var e=t.reverse||!1,n=t.mutate||!1;if(!i)throw new Error("<geojson> is required");if(typeof e!="boolean")throw new Error("<reverse> must be a boolean");if(typeof n!="boolean")throw new Error("<mutate> must be a boolean");n===!1&&(i=sOt(i));var r=[];switch(i.type){case"GeometryCollection":return rF(i,function(s){h1(s,e)}),i;case"FeatureCollection":return GW(i,function(s){GW(h1(s,e),function(a){r.push(a)})}),AJ(r)}return h1(i,e)}function h1(i,t){var e=i.type==="Feature"?i.geometry.type:i.type;switch(e){case"GeometryCollection":return rF(i,function(n){h1(n,t)}),i;case"LineString":return YW(Q_(i),t),i;case"Polygon":return XW(Q_(i),t),i;case"MultiLineString":return Q_(i).forEach(function(n){YW(n,t)}),i;case"MultiPolygon":return Q_(i).forEach(function(n){XW(n,t)}),i;case"Point":case"MultiPoint":return i}}function YW(i,t){gD(i)===t&&i.reverse()}function XW(i,t){gD(i[0])!==t&&i[0].reverse();for(var e=1;e<i.length;e++)gD(i[e])===t&&i[e].reverse()}function uOt(i){if(!i)throw new Error("geojson is required");var t=[];return oOt(i,function(e){t.push(e)}),AJ(t)}const KW=qB(),mtt={centroid:!1,name:!1,bbox:!1,rewind:!1},qW=i=>{if(i.geometry.type.startsWith("Multi")){const t=uOt(i).features[0];return Object.assign(Object.assign({},t),t.properties)}return Object.assign(Object.assign({},i),i.properties)},cOt=i=>{const t=[];return i.forEach(e=>{e.type==="FeatureCollection"?e.features.forEach(n=>{t.push(qW(n))}):t.push(qW(e))}),t},_tt=(i,t={},e)=>{e.type=Xd.GEO;const n=lM(mtt,t),{centroid:r,name:s,bbox:a,rewind:o}=n;if(Array.isArray(i))return cOt(i);let l=i.features;return o&&(l=lOt(i,{reverse:!ee(o)||o.reverse}).features),l.forEach(u=>{if(r){const c=KW.centroid(u);u.centroidX=c[0],u.centroidY=c[1]}if(s&&(u.name=u.properties.name),a){const c=KW.bounds(u);u.bbox=c}}),i.features=l,i},hOt={},dOt=(i,t,e)=>{e.type=Xd.GEO;const n=lM(mtt,hOt,t),{object:r}=n;if(!Ht(r))throw new TypeError("Invalid object: must be a string!");const s=DRt(i,i.objects[r]);return _tt(s,n,e)},uM=(i,t,e)=>{const n=!Vn(t?.dependencyUpdate)||t?.dependencyUpdate;if(!i||!J(i))throw new TypeError("Invalid data: must be DataView array!");return J(e.rawData)&&e.rawData.forEach(r=>{r.target&&(r.target.removeListener("change",e.reRunAllTransform),r.target.removeListener("markRunning",e.markRunning))}),n&&i.forEach(r=>{r.target.addListener("change",e.reRunAllTransform),r.target.addListener("markRunning",e.markRunning)}),i},vtt={svg:"group",rect:"rect",line:"rule",polygon:"polygon",path:"path",polyline:"line",g:"group",circle:"arc",ellipse:"arc"},fOt=Object.keys(vtt),pOt=["g","svg","text","tspan","switch"],ytt=["font-size","font-family","font-weight","font-style","text-align","text-anchor"],gOt=["cx","cy","r"],mOt=["cx","cy","rx","ry"],_Ot=["x1","x2","y1","y2"],ZW=["visibility","x","y","width","height","d","points","stroke","stroke-width","fill","fill-opacity","stroke-opacity",...ytt,...gOt,...mOt,..._Ot],vOt=["visible","fill","stroke","stroke-width","fill-opacity","stroke-opacity",...ytt],yOt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function bOt(i){return i.match(yOt)||[]}const xOt=(i,t={},e)=>{let n=t.customDOMParser;if(n||window?.DOMParser&&(n=a=>new DOMParser().parseFromString(a,"text/xml")),!n)throw new Error("No Available DOMParser!");const r=n(i);let s=r.nodeType===9?r.firstChild:r;for(;s&&(s.nodeName.toLowerCase()!=="svg"||s.nodeType!==1);)s=s.nextSibling;return s?SOt(s):null};let mD=0;function SOt(i,t={}){const e=[],n=xtt(i,null);let r=parseFloat(i.getAttribute("width")||t.width),s=parseFloat(i.getAttribute("height")||t.height);!et(r)&&(r=null),!et(s)&&(s=null);const a=i.getAttribute("viewBox");let o;if(a){const l=bOt(a);if(l.length>=4&&(o={x:parseFloat(l[0]||0),y:parseFloat(l[1]||0),width:parseFloat(l[2]),height:parseFloat(l[3])},r||s)){const u={x:0,y:0,width:r,height:s},c=u.width/o.width,h=u.height/o.height,d=Math.min(c,h),f=-(o.x+o.width/2)*d+(u.x+u.width/2),p=-(o.y+o.height/2)*d+(u.y+u.height/2),g=new di().translate(f,p).scale(d,d);n.transform=g}}return wtt(i,n,e),{root:n,width:r,height:s,elements:e,viewBoxRect:o}}function btt(i){let t;const{parent:e,attributes:n}=i,r=s=>s?vOt.reduce((a,o)=>{const l=wJ(o);return L(s[l])&&(a[l]=s[l]),a},{}):{};return e?(e._inheritStyle||(e._inheritStyle=r(e.attributes)),t=ot({},e._inheritStyle,r(n))):t=r(n),t}function J_(i){var t,e,n;const r={},s=(t=i.attributes)!==null&&t!==void 0?t:{},a=(e=i.style)!==null&&e!==void 0?e:{};for(let o=0;o<ZW.length;o++){const l=ZW[o],u=L(a[l])&&a[l]!==""?a[l]:(n=s[l])===null||n===void 0?void 0:n.value;L(u)&&(r[wJ(l)]=isNaN(+u)?u:parseFloat(u))}return a.display==="none"&&(r.visible=!1),["fontSize","strokeWidth","width","height"].forEach(o=>{const l=r[o];Ht(r[o])&&(r[o]=parseFloat(l))}),r}function xtt(i,t){var e,n,r,s,a;const o=(e=i.tagName)===null||e===void 0?void 0:e.toLowerCase();if(i.nodeType===3||o==="text"||o==="tspan")return wOt(i,t);if(!fOt.includes(o))return null;const l={tagName:o,graphicType:vtt[o],attributes:J_(i),parent:t,name:(n=i.getAttribute("name"))!==null&&n!==void 0?n:(r=t?.attributes)===null||r===void 0?void 0:r.name,id:(s=i.getAttribute("id"))!==null&&s!==void 0?s:`${o}-${mD++}`,transform:Stt(i)};return l._inheritStyle=btt(l),t&&!L(l.name)&&(l._nameFromParent=(a=t.name)!==null&&a!==void 0?a:t._nameFromParent),l}function wOt(i,t){var e,n,r,s,a,o;if(!t)return null;const l=(e=i.tagName)===null||e===void 0?void 0:e.toLowerCase();if(!l&&t.graphicType!=="group")return null;const u=l==="text"||l==="tspan",c=u?"group":"text",h=u||(n=i.textContent)===null||n===void 0?void 0:n.replace(/\n/g," ").replace(/\s+/g," ");if(h===" ")return null;let d;return d=u?{tagName:l,graphicType:c,attributes:J_(i),parent:t,name:i.getAttribute("name"),id:(r=i.getAttribute("id"))!==null&&r!==void 0?r:`${l}-${mD++}`,transform:Stt(i),value:h}:{tagName:l,graphicType:"text",attributes:J_(i),parent:t,name:t?.name,id:(a=(s=i.getAttribute)===null||s===void 0?void 0:s.call(i,"id"))!==null&&a!==void 0?a:`${l}-${mD++}`,value:h},d._inheritStyle=btt(d),L(d.name)||(d._nameFromParent=(o=t.name)!==null&&o!==void 0?o:t._nameFromParent),u?t._textGroupStyle?d._textGroupStyle=ot({},t._textGroupStyle,J_(i)):d._textGroupStyle=J_(i):d.attributes=d._inheritStyle,d}function Stt(i){var t,e;const n=(t=i.transform)===null||t===void 0?void 0:t.baseVal;if(!n)return null;const r=(e=n.consolidate())===null||e===void 0?void 0:e.matrix;if(!r)return null;const{a:s,b:a,c:o,d:l,e:u,f:c}=r;return new di(s,a,o,l,u,c)}function wtt(i,t,e=[]){var n;if(!i)return;let r;i.nodeName!=="svg"&&(r=xtt(i,t)),r&&e.push(r);let s=pOt.includes((n=i.tagName)===null||n===void 0?void 0:n.toLocaleLowerCase())?i.firstChild:null;for(;s;)wtt(s,r??t,e),s=s.nextSibling}let wE=0;const AOt=1e8;function Att(i="dataset"){return wE>AOt&&(wE=0),i+"_"+wE++}class lh{constructor(t){var e;let n;this.options=t,this.isDataSet=!0,this.transformMap={},this.parserMap={},this.dataViewMap={},this.target=new kh,n=t?.name?t.name:Att("dataset"),this.name=n,this._logger=(e=t?.logger)!==null&&e!==void 0?e:Ee.getInstance()}setLogger(t){this._logger=t}getDataView(t){return this.dataViewMap[t]}setDataView(t,e){var n;this.dataViewMap[t]&&((n=this._logger)===null||n===void 0||n.error(`Error: dataView ${t} `)),this.dataViewMap[t]=e}removeDataView(t){this.dataViewMap[t]=null,delete this.dataViewMap[t]}registerParser(t,e){var n;this.parserMap[t]&&((n=this._logger)===null||n===void 0||n.warn(`Warn: transform ${t} `)),this.parserMap[t]=e}removeParser(t){this.parserMap[t]=null,delete this.parserMap[t]}getParser(t){return this.parserMap[t]||this.parserMap.default}registerTransform(t,e){var n;this.transformMap[t]&&((n=this._logger)===null||n===void 0||n.warn(`Warn: transform ${t} `)),this.transformMap[t]=e}removeTransform(t){this.transformMap[t]=null,delete this.transformMap[t]}getTransform(t){return this.transformMap[t]}multipleDataViewAddListener(t,e,n){this._callMap||(this._callMap=new Map);let r=this._callMap.get(n);r||(r=()=>{t.some(s=>s.isRunning)||n()}),t.forEach(s=>{s.target.addListener(e,r)}),this._callMap.set(n,r)}allDataViewAddListener(t,e){this.multipleDataViewAddListener(Object.values(this.dataViewMap),t,e)}multipleDataViewRemoveListener(t,e,n){if(this._callMap){const r=this._callMap.get(n);r&&t.forEach(s=>{s.target.removeListener(e,r)}),this._callMap.delete(n)}}multipleDataViewUpdateInParse(t){t.forEach(e=>{var n;return(n=this.getDataView(e.name))===null||n===void 0?void 0:n.markRunning()}),t.forEach(e=>{var n;return(n=this.getDataView(e.name))===null||n===void 0?void 0:n.parseNewData(e.data,e.options)})}multipleDataViewUpdateInRawData(t){t.forEach(e=>{var n;return(n=this.getDataView(e.name))===null||n===void 0?void 0:n.markRunning()}),t.forEach(e=>{var n;return(n=this.getDataView(e.name))===null||n===void 0?void 0:n.updateRawData(e.data,e.options)})}destroy(){this.transformMap=null,this.parserMap=null,this.dataViewMap=null,this._callMap=null,this.target.removeAllListeners()}}class je{constructor(t,e){let n;this.dataSet=t,this.options=e,this.isDataView=!0,this.target=new kh,this.parseOption=null,this.transformsArr=[],this.isRunning=!1,this.rawData={},this.history=!1,this.parserData={},this.latestData={},this._fields=null,this.reRunAllTransform=(r={})=>{const s=this.latestData;return this.isRunning=!0,this.resetTransformData(),this.transformsArr.forEach(a=>{this.executeTransform(a,{pushHistory:r.pushHistory,emitMessage:!1})}),this.isRunning=!1,r.emitMessage===!1||r.skipEqual&&Ne(s,this.latestData)||this.target.emit("change",{latestData:this.latestData}),this},this.markRunning=()=>{this.isRunning=!0,this.target.emit("markRunning",[])},n=e?.name?e.name:Att("dataview"),this.name=n,e?.history&&(this.history=e.history,this.historyData=[]),this.dataSet.setDataView(n,this),this.setFields(e?.fields)}parse(t,e,n=!1){var r;this.isRunning=!0,n&&this.target.emit("beforeParse",[]),e&&(this.parseOption=e);const s=this.cloneParseData(t,e);if(e?.type){const a=((r=this.dataSet.getParser(e.type))!==null&&r!==void 0?r:this.dataSet.getParser("bytejson"))(s,e.options,this);this.rawData=s,this.parserData=a,this.history&&this.historyData.push(s,a),this.latestData=a}else this.parserData=s,this.rawData=s,this.history&&this.historyData.push(s),this.latestData=s;return this.isRunning=!1,n&&this.target.emit("afterParse",[]),this}transform(t,e=!0){if(this.isRunning=!0,t&&t.type){let n=!0;if(t.type==="fields"){this._fields=t.options.fields;const r=this.transformsArr.findIndex(s=>s.type===t.type);r>=0&&(n=!1,this.transformsArr[r].options.fields=this._fields)}n&&this.transformsArr.push(t),e&&this.executeTransform(t)}return this.sortTransform(),this.isRunning=!1,this}sortTransform(){this.transformsArr.length>=2&&this.transformsArr.sort((t,e)=>{var n,r;return((n=t.level)!==null&&n!==void 0?n:0)-((r=e.level)!==null&&r!==void 0?r:0)})}executeTransform(t,e={}){const{pushHistory:n,emitMessage:r,skipEqual:s}=e,a=this.dataSet.getTransform(t.type),o=this.latestData,l=a(o,t.options);this.history&&n!==!1&&this.historyData.push(l),this.latestData=l,r===!1||s&&Ne(o,this.latestData)||this.target.emit("change",{latestData:this.latestData})}resetTransformData(){this.latestData=this.parserData,this.history&&(this.historyData.length=0,this.historyData.push(this.rawData,this.parserData))}cloneParseData(t,e){let n=!1;return t instanceof je||e?.clone!==!0||(n=!0),n?Jr(t):t}parseNewData(t,e){this.parse(t,e||this.parseOption),this.reRunAllTransform()}updateRawData(t,e){const n=this.cloneParseData(t,e);this.rawData=n,this.parserData=n,this.latestData=n,this.reRunAllTransform()}getFields(){var t;return this._fields?this._fields:((t=this.parseOption)===null||t===void 0?void 0:t.type)==="dataview"&&this.rawData.length===1&&this.rawData[0].getFields?this.rawData[0].getFields():null}setFields(t,e=!1){this._fields=t&&e?ot({},this._fields,t):t;const n=this.transformsArr.find(r=>r.type==="fields");!N(this._fields)&&N(n)?(this.dataSet.registerTransform("fields",htt),this.transform({type:"fields",options:{fields:this._fields}},!1)):n&&(n.options.fields=this._fields)}destroy(){this.dataSet.removeDataView(this.name),this.latestData=null,this.rawData=null,this.parserData=null,this.transformsArr=null,this.target=null}}qB();const AE={},QW={albers:QJ,albersusa:fRt,azimuthalequalarea:pRt,azimuthalequidistant:gRt,conicconformal:vRt,conicequalarea:Ow,conicequidistant:xRt,equalearth:wRt,equirectangular:yRt,gnomonic:ARt,identity:kRt,mercator:mRt,naturalearth1:CRt,orthographic:MRt,stereographic:TRt,transversemercator:PRt},kOt=["clipAngle","clipExtent","scale","translate","center","rotate","precision","reflectX","reflectY","parallels","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function JW(i,t){return function e(){const n=t();return n.type=i,n.path=qB().projection(n),n.copy=n.copy||function(){const r=e();return kOt.forEach(s=>{n[s]&&r[s](n[s]())}),r.path.pointRadius(n.path.pointRadius()),r},n}}function COt(i,t){const e=i.toLowerCase();return arguments.length>1?JW(e,t):QW[e]?(AE[e]||(AE[e]=JW(e,QW[e])),AE[e]):null}class on{static GenAutoIncrementId(){return on.auto_increment_id++}}on.auto_increment_id=0;class re{constructor(t){this.id=on.GenAutoIncrementId(),this.registry=t}}const cM="named",ktt="inject",Ctt="multi_inject",Mtt="inversify:tagged",Ttt="inversify:paramtypes";class sF{constructor(t,e){this.key=t,this.value=e}toString(){return this.key===cM?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}const cg=function(i){var t;return function(e){const n=typeof Symbol=="function",r=n&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",s=Object.getPrototypeOf(Function),a=Map,o=new WeakMap;function l(T,D,B,I){if(!S(B))throw new TypeError;return _(T,D,B,I)}function u(T,D,B){if(!S(D))throw new TypeError;return y(B)||(B=M(B)),f(T,D,B)}function c(T,D,B){if(!S(D))throw new TypeError;return y(B)||(B=M(B)),p(T,D,B)}function h(T,D,B){if(!S(D))throw new TypeError;return y(B)||(B=M(B)),g(T,D,B)}function d(T,D,B){let I=o.get(T);if(y(I)){if(!B)return;I=new a,o.set(T,I)}let F=I.get(D);if(y(F)){if(!B)return;F=new a,I.set(D,F)}return F}function f(T,D,B){if(p(T,D,B))return!0;const I=O(D);return!b(I)&&f(T,I,B)}function p(T,D,B){const I=d(D,B,!1);return!y(I)&&k(I.has(T))}function g(T,D,B){if(p(T,D,B))return m(T,D,B);const I=O(D);return b(I)?void 0:g(T,I,B)}function m(T,D,B){const I=d(D,B,!1);if(!y(I))return I.get(T)}function _(T,D,B,I){d(B,I,!0).set(T,D)}function v(T){if(T===null)return 1;switch(typeof T){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return T===null?1:6;default:return 6}}function y(T){return T===void 0}function b(T){return T===null}function x(T){return typeof T=="symbol"}function S(T){return typeof T=="object"?T!==null:typeof T=="function"}function w(T,D){switch(v(T)){case 0:case 1:case 2:case 3:case 4:case 5:return T}const B="string",I=P(T,r);if(I!==void 0){const F=I.call(T,B);if(S(F))throw new TypeError;return F}return A(T)}function A(T,D){{const B=T.toString;if(R(B)){const F=B.call(T);if(!S(F))return F}const I=T.valueOf;if(R(I)){const F=I.call(T);if(!S(F))return F}}throw new TypeError}function k(T){return!!T}function C(T){return""+T}function M(T){const D=w(T);return x(D)?D:C(D)}function R(T){return typeof T=="function"}function P(T,D){const B=T[D];if(B!=null){if(!R(B))throw new TypeError;return B}}function O(T){const D=Object.getPrototypeOf(T);if(typeof T!="function"||T===s||D!==s)return D;const B=T.prototype,I=B&&Object.getPrototypeOf(B);if(I==null||I===Object.prototype)return D;const F=I.constructor;return typeof F!="function"||F===T?D:F}e("defineMetadata",l),e("hasMetadata",u),e("hasOwnMetadata",c),e("getMetadata",h)}((t=i,function(e,n){typeof t[e]!="function"&&Object.defineProperty(t,e,{configurable:!0,writable:!0,value:n})})),i}({});function MOt(i,t,e,n){const r=[n];let s={};cg.hasOwnMetadata(i,t)&&(s=cg.getMetadata(i,t));let a=s[e];a===void 0&&(a=[]),a.push(...r),s[e]=a,cg.defineMetadata(i,s,t)}function TOt(i,t,e,n){MOt(Mtt,i,e.toString(),n)}function Ptt(i){return(t,e,n)=>{TOt(t,e,n,i)}}function Ett(i){return t=>(e,n,r)=>Ptt(new sF(i,t))(e,n,r)}const ge=Ett(ktt),Rtt=Ett(Ctt);function Rt(){return function(i){return cg.defineMetadata(Ttt,null,i),i}}function jn(i){return Ptt(new sF(cM,i))}const Kd={Singleton:"Singleton",Transient:"Transient"},Bc={ConstantValue:"ConstantValue",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid"};class aF{constructor(t,e){this.id=on.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=Bc.Invalid,this.constraint=n=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}clone(){const t=new aF(this.serviceIdentifier,this.scope);return t.activated=t.scope===Kd.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.provider=this.provider,t.constraint=this.constraint,t.cache=this.cache,t}}class POt{getConstructorMetadata(t){return{compilerGeneratedMetadata:cg.getMetadata(Ttt,t),userGeneratedMetadata:cg.getMetadata(Mtt,t)||{}}}getPropertiesMetadata(t){throw new Error("")}}const EOt=i=>t=>{const e=n=>{if(n==null)return!1;if(n.key===i&&n.value===t)return!0;if(n.constructorArgsMetadata==null)return!1;const r=n.constructorArgsMetadata;for(let s=0;s<r.length;s++)if(r[s].key===i&&r[s].value===t)return!0;return!1};return e.metaData=new sF(i,t),e},ROt=EOt(cM);class cS{constructor(t){this._binding=t}inRequestScope(){throw new Error("")}inSingletonScope(){return this._binding.scope=Kd.Singleton,this}inTransientScope(){return this._binding.scope=Kd.Transient,this}whenTargetNamed(t){return this._binding.constraint=ROt(t),this}}class OOt{constructor(t){this._binding=t}to(t){return this._binding.type=Bc.Instance,this._binding.implementationType=t,new cS(this._binding)}toSelf(){const t=this._binding.serviceIdentifier;return this.to(t)}toDynamicValue(t){return this._binding.type=Bc.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new cS(this._binding)}toConstantValue(t){return this._binding.type=Bc.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Kd.Singleton,new cS(this._binding)}toFactory(t){return this._binding.type=Bc.Factory,this._binding.factory=t,this._binding.scope=Kd.Singleton,new cS(this._binding)}toService(t){this.toDynamicValue(e=>e.container.get(t))}}class DOt{constructor(t){const e=t||{};e.defaultScope=e.defaultScope||Kd.Transient,this.options=e,this.id=on.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new POt}load(t){const e=this._getContainerModuleHelpersFactory()(t.id);t.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction)}get(t){const e=this._getNotAllArgs(t,!1);return this._get(e)}getAll(t){const e=this._getAllArgs(t);return this._get(e)}getTagged(t,e,n){const r=this._getNotAllArgs(t,!1,e,n);return this._get(r)}getNamed(t,e){return this.getTagged(t,cM,e)}isBound(t){return this._bindingDictionary.has(t)}bind(t){const e=this.options.defaultScope,n=new aF(t,e),r=this._bindingDictionary.get(t)||[];return r.push(n),this._bindingDictionary.set(t,r),new OOt(n)}unbind(t){this._bindingDictionary.delete(t)}rebind(t){return this.unbind(t),this.bind(t)}_getContainerModuleHelpersFactory(){const t=(a,o)=>{a._binding.moduleId=o},e=a=>o=>{const l=this.bind(o);return t(l,a),l},n=()=>a=>this.unbind(a),r=()=>a=>this.isBound(a),s=a=>o=>{const l=this.rebind(o);return t(l,a),l};return a=>({bindFunction:e(a),isboundFunction:r(),rebindFunction:s(a),unbindFunction:n(),unbindAsyncFunction:o=>null})}_getNotAllArgs(t,e,n,r){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:n,value:r}}_getAllArgs(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}}_get(t){const e=[];return this._bindingDictionary.get(t.serviceIdentifier).filter(n=>n.constraint(t)).forEach(n=>{e.push(this._resolveFromBinding(n))}),t.isMultiInject||e.length!==1?e:e[0]}_getChildRequest(t){const e=t.implementationType,{userGeneratedMetadata:n}=this._metadataReader.getConstructorMetadata(e),r=Object.keys(n),s=[];for(let a=0;a<r.length;a++){const o=n[a],l={};o.forEach(f=>{l[f.key]=f.value});const u={inject:l[ktt],multiInject:l[Ctt]},c=u.inject||u.multiInject,h={serviceIdentifier:c,constructorArgsMetadata:o},d=(this._bindingDictionary.get(c)||[]).filter(f=>f.constraint(h));if(d.length){const f={injectIdentifier:c,metadata:o,bindings:d};s.push(f)}}return s}_resolveFromBinding(t){const e=this._getResolvedFromBinding(t);return this._saveToScope(t,e),e}_getResolvedFromBinding(t){let e;switch(t.type){case Bc.ConstantValue:case Bc.Function:e=t.cache;break;case Bc.Instance:e=this._resolveInstance(t,t.implementationType);break;default:e=t.dynamicValue({container:this})}return e}_resolveInstance(t,e){if(t.activated)return t.cache;const n=this._getChildRequest(t);return this._createInstance(e,n)}_createInstance(t,e){return e.length?new t(...this._resolveRequests(e)):new t}_resolveRequests(t){return t.map(e=>e.bindings.length>1?e.bindings.map(n=>this._resolveFromBinding(n)):this._resolveFromBinding(e.bindings[0]))}_saveToScope(t,e){t.scope===Kd.Singleton&&(t.cache=e,t.activated=!0)}}const _n=Symbol("ContributionProvider");class Ott{constructor(t,e){this.serviceIdentifier=t,this.container=e,Dtt.setStore(this.serviceIdentifier,this)}getContributions(){return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier))),this.caches}refresh(){this.caches&&(this.caches.length=0,this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier)))}}function Sr(i,t){i(_n).toDynamicValue(({container:e})=>new Ott(t,e)).inSingletonScope().whenTargetNamed(t)}function IOt(i,t){i(_n).toDynamicValue(({container:e})=>new Ott(t,e)).whenTargetNamed(t)}class Dtt{static getStore(t){return this.store.get(t)}static setStore(t,e){this.store.set(t,e)}static refreshAllContributions(){this.store.forEach(t=>{t.refresh()})}}Dtt.store=new Map;class LOt{constructor(t,e){this._args=t,this.name=e,this.taps=[]}tap(t,e){this._tap("sync",t,e)}unTap(t,e){const n=typeof t=="string"?t.trim():t.name;n&&(this.taps=this.taps.filter(r=>!(r.name===n&&(!e||r.fn===e))))}_parseOptions(t,e,n){let r;if(typeof e=="string")r={name:e.trim()};else if(typeof e!="object"||e===null)throw new Error("Invalid tap options");if(typeof r.name!="string"||r.name==="")throw new Error("Missing name for tap");return r=Object.assign({type:t,fn:n},r),r}_tap(t,e,n){this._insert(this._parseOptions(t,e,n))}_insert(t){let e;typeof t.before=="string"?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let n=0;typeof t.stage=="number"&&(n=t.stage);let r=this.taps.length;for(;r>0;){r--;const s=this.taps[r];this.taps[r+1]=s;const a=s.stage||0;if(e){if(e.has(s.name)){e.delete(s.name);continue}if(e.size>0)continue}if(!(a>n)){r++;break}}this.taps[r]=t}}class Xr extends LOt{call(...t){this.taps.map(e=>e.fn).forEach(e=>e(...t))}}const hM=Symbol.for("EnvContribution"),oF=Symbol.for("VGlobal"),te=new DOt,lF=Symbol.for("RenderService");class BOt{get renderService(){return this._renderService||(this._renderService=te.get(lF)),this._renderService}}const vt=new BOt;let t$=0;class Itt{constructor(){this.nextAnimationFrameCbs=new Map,this._rafHandle=null,this.runAnimationFrame=t=>{this._rafHandle=null;const e=this.nextAnimationFrameCbs;this.nextAnimationFrameCbs=new Map,e.forEach(n=>n(t))},this.tryRunAnimationFrameNextFrame=()=>{this._rafHandle===null&&this.nextAnimationFrameCbs.size!==0&&(this._rafHandle=vt.global.getRequestAnimationFrame()(this.runAnimationFrame))}}addAnimationFrameCb(t){return this.nextAnimationFrameCbs.set(++t$,t),this.tryRunAnimationFrameNextFrame(),t$}removeAnimationFrameCb(t){return!!this.nextAnimationFrameCbs.has(t)&&(this.nextAnimationFrameCbs.delete(t),!0)}}class Ltt{constructor(){this._listenerMap=new Map,this._eventListenerTransformer=t=>t}setEventListenerTransformer(t){this._eventListenerTransformer=t||(e=>e)}addEventListener(t,e,n){if(!e)return;const r=s=>{const a=this._eventListenerTransformer(s);typeof e=="function"?e(a):e.handleEvent&&e.handleEvent(a)};this._listenerMap.has(t)||this._listenerMap.set(t,new Map),this._listenerMap.get(t).set(e,r),this._nativeAddEventListener(t,r,n)}removeEventListener(t,e,n){var r;if(!e)return;const s=(r=this._listenerMap.get(t))===null||r===void 0?void 0:r.get(e);s&&(this._nativeRemoveEventListener(t,s,n),this._listenerMap.get(t).delete(e),this._listenerMap.get(t).size===0&&this._listenerMap.delete(t))}dispatchEvent(t){return this._nativeDispatchEvent(t)}clearAllEventListeners(){this._listenerMap.forEach((t,e)=>{t.forEach((n,r)=>{this._nativeRemoveEventListener(e,n,void 0)})}),this._listenerMap.clear()}_nativeAddEventListener(t,e,n){throw new Error("_nativeAddEventListener must be implemented by derived classes")}_nativeRemoveEventListener(t,e,n){throw new Error("_nativeRemoveEventListener must be implemented by derived classes")}_nativeDispatchEvent(t){throw new Error("_nativeDispatchEvent must be implemented by derived classes")}}var FOt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},zOt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},e$=function(i,t){return function(e,n){t(e,n,i)}},NOt=function(i,t,e,n){return new(e||(e=Promise))(function(r,s){function a(u){try{l(n.next(u))}catch(c){s(c)}}function o(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof e?c:new e(function(h){h(c)})).then(a,o)}l((n=n.apply(i,t||[])).next())})};let _D=class extends Ltt{get env(){return this._env}get isImageAnonymous(){return this._isImageAnonymous}set isImageAnonymous(i){this._isImageAnonymous=i}get devicePixelRatio(){return this._env||this.setEnv("browser"),this.envContribution.getDevicePixelRatio()}get supportEvent(){return this._env||this.setEnv("browser"),this.envContribution.supportEvent}set supportEvent(i){this._env||this.setEnv("browser"),this.envContribution.supportEvent=i}get supportsTouchEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents}set supportsTouchEvents(i){this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents=i}get supportsPointerEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents}set supportsPointerEvents(i){this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents=i}get supportsMouseEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents}set supportsMouseEvents(i){this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents=i}get applyStyles(){return this._env||this.setEnv("browser"),this.envContribution.applyStyles}set applyStyles(i){this._env||this.setEnv("browser"),this.envContribution.applyStyles=i}constructor(i){super(),this.contributions=i,this._isImageAnonymous=!0,this._performanceRAFList=[],this.eventListenerTransformer=t=>t,this.id=on.GenAutoIncrementId(),this.hooks={onSetEnv:new Xr(["lastEnv","env","global"])},this.measureTextMethod="native",this.optimizeVisible=!1}_nativeAddEventListener(i,t,e){return this._env||this.setEnv("browser"),this.envContribution.addEventListener(i,t,e)}_nativeRemoveEventListener(i,t,e){return this._env||this.setEnv("browser"),this.envContribution.removeEventListener(i,t,e)}_nativeDispatchEvent(i){return this._env||this.setEnv("browser"),this.envContribution.dispatchEvent(i)}bindContribution(i){const t=[];if(this.contributions.getContributions().forEach(e=>{const n=e.configure(this,i);n&&n.then&&t.push(n)}),t.length)return Promise.all(t)}getDynamicCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getDynamicCanvasCount()}getStaticCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getStaticCanvasCount()}setEnv(i,t){if(t&&t.force===!0||this._env!==i)return this.deactiveCurrentEnv(),this.activeEnv(i,t)}deactiveCurrentEnv(){this.envContribution&&this.envContribution.release()}activeEnv(i,t){const e=this._env;this._env=i;const n=this.bindContribution(t);if(n&&n.then)return n.then(()=>{this.envParams=t,this.hooks.onSetEnv.call(e,i,this)});this.envParams=t,this.hooks.onSetEnv.call(e,i,this)}setActiveEnvContribution(i){this.envContribution=i}createCanvas(i){return this._env||this.setEnv("browser"),this.envContribution.createCanvas(i)}createOffscreenCanvas(i){return this._env||this.setEnv("browser"),this.envContribution.createOffscreenCanvas(i)}releaseCanvas(i){return this._env||this.setEnv("browser"),this.envContribution.releaseCanvas(i)}getRequestAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getRequestAnimationFrame()}getSpecifiedRequestAnimationFrame(i){this._env||this.setEnv("browser"),this._performanceRAFList[i]||(this._performanceRAFList[i]=new Itt);const t=this._performanceRAFList[i];return e=>t.addAnimationFrameCb(e)}getSpecifiedCancelAnimationFrame(i){if(this._env||this.setEnv("browser"),!this._performanceRAFList[i])return()=>!1;const t=this._performanceRAFList[i];return e=>t.removeAnimationFrameCb(e)}getCancelAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getCancelAnimationFrame()}getElementById(i){return this._env||this.setEnv("browser"),this.envContribution.getElementById?this.envContribution.getElementById(i):null}getRootElement(){return this._env||this.setEnv("browser"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}getDocument(){return this._env||this.setEnv("browser"),this.envContribution.getDocument?this.envContribution.getDocument():null}mapToCanvasPoint(i,t){return this._env||this.setEnv("browser"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(i,t):null}loadImage(i){return this._env||this.setEnv("browser"),this.envContribution.loadImage(i)}loadSvg(i){return this._env||this.setEnv("browser"),this.envContribution.loadSvg(i)}loadJson(i){return this._env||this.setEnv("browser"),this.envContribution.loadJson(i)}loadArrayBuffer(i){return this._env||this.setEnv("browser"),this.envContribution.loadArrayBuffer(i)}loadBlob(i){return this._env||this.setEnv("browser"),this.envContribution.loadBlob(i)}loadFont(i,t,e){return NOt(this,void 0,void 0,function*(){return this._env||this.setEnv("browser"),this.envContribution.loadFont(i,t,e)})}isChrome(){return this._isChrome!=null||(this._env||this.setEnv("browser"),this._isChrome=this._env==="browser"&&navigator.userAgent.indexOf("Chrome")>-1),this._isChrome}isSafari(){return this._isSafari!=null||(this._env||this.setEnv("browser"),this._isSafari=this._env==="browser"&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}getNativeAABBBounds(i){return this._env||this.setEnv("browser"),this.envContribution.getNativeAABBBounds(i)}removeDom(i){return this._env||this.setEnv("browser"),this.envContribution.removeDom(i)}createDom(i){return this._env||this.setEnv("browser"),this.envContribution.createDom(i)}updateDom(i,t){return this._env||this.setEnv("browser"),this.envContribution.updateDom(i,t)}getElementTop(i,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTop(i,t)}getElementLeft(i,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementLeft(i,t)}getElementTopLeft(i,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTopLeft(i,t)}isMacOS(){return this._env||this.setEnv("browser"),this.envContribution.isMacOS()}copyToClipBoard(i){return this._env||this.setEnv("browser"),this.envContribution.copyToClipBoard(i)}};_D=FOt([Rt(),e$(0,ge(_n)),e$(0,jn(hM)),zOt("design:paramtypes",[Object])],_D);var Sd;(function(i){i[i.estimate=0]="estimate",i[i.actualBounding=1]="actualBounding",i[i.fontBounding=2]="fontBounding"})(Sd||(Sd={}));var Ds;(function(i){i[i.INITIAL=0]="INITIAL",i[i.RUNNING=1]="RUNNING",i[i.PAUSE=2]="PAUSE"})(Ds||(Ds={}));var Av;(function(i){i.wait="wait",i.from="from",i.to="to",i.customAnimate="customAnimate"})(Av||(Av={}));var Dr;(function(i){i[i.INITIAL=0]="INITIAL",i[i.RUNNING=1]="RUNNING",i[i.PAUSED=2]="PAUSED",i[i.END=3]="END"})(Dr||(Dr={}));const jOt=Lr-1e-8;class uF{constructor(t){this.init(t)}init(t){this.bounds=t}arc(t,e,n,r,s,a){if(Math.abs(s-r)>jOt)return this.bounds.add(t-n,e-n),void this.bounds.add(t+n,e+n);let o,l,u,c,h=1/0,d=-1/0,f=1/0,p=-1/0;function g(m){u=n*Math.cos(m),c=n*Math.sin(m),u<h&&(h=u),u>d&&(d=u),c<f&&(f=c),c>p&&(p=c)}if(g(r),g(s),s!==r)if((r%=Lr)<0&&(r+=Lr),(s%=Lr)<0&&(s+=Lr),s<r&&(a=!a,o=r,r=s,s=o),a)for(s-=Lr,o=r-r%Ua,l=0;l<4&&o>s;++l,o-=Ua)g(o);else for(o=r-r%Ua+Ua,l=0;l<4&&o<s;++l,o+=Ua)g(o);this.bounds.add(t+h,e+f),this.bounds.add(t+d,e+p)}arcTo(t,e,n,r,s){this.bounds.add(t,e)}bezierCurveTo(t,e,n,r,s,a){this.bounds.add(t,e),this.bounds.add(n,r),this.bounds.add(s,a)}closePath(){}ellipse(){throw new Error("ellipse")}lineTo(t,e){this.bounds.add(t,e)}moveTo(t,e){this.bounds.add(t,e)}quadraticCurveTo(t,e,n,r){this.bounds.add(t,e),this.bounds.add(n,r)}rect(t,e,n,r){this.bounds.add(t,e),this.bounds.add(t+n,e+r)}clear(){this.bounds.clear()}release(...t){}}class HOt{constructor(){this._curves=[],this.bounds=new Gi}get curves(){return this._curves}getCurveLengths(){return this._curves.map(t=>t.getLength())}getPointAt(t){return{x:0,y:0}}getLength(){return 0}getBounds(){return this.bounds}}const VOt=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,WOt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7},Ie={A:0,AT:1,C:2,Z:3,E:4,L:5,M:6,Q:7,R:8};let kE,i$,hS,n$,CE,dS;function $Ot(i){if(!i)return[];const t=i.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(t===null)return[];let e,n;const r=[];for(let s=0,a=t.length;s<a;s++)if(kE=t[s],i$=kE.slice(1),hS=kE[0],e=[hS],n=i$.match(VOt),n!==null){for(let o=0,l=n.length;o<l;o++)n$=n[o],CE=parseFloat(n$),Number.isNaN(CE)||e.push(CE);if(dS=WOt[hS],e.length-1>dS){let o,l=hS;for(let u=1,c=e.length;u<c;u+=dS){o=[l];for(let h=u,d=u+dS;h<d;h++)o.push(e[h]);r.push(o),l==="m"?l="l":l==="M"&&(l="L")}}else r.push(e)}else r.push(e);return r}var _i;(function(i){i[i.NONE=0]="NONE",i[i.UPDATE_BOUNDS=1]="UPDATE_BOUNDS",i[i.UPDATE_SHAPE=2]="UPDATE_SHAPE",i[i.CLEAR_SHAPE=253]="CLEAR_SHAPE",i[i.UPDATE_SHAPE_AND_BOUNDS=3]="UPDATE_SHAPE_AND_BOUNDS",i[i.INIT=179]="INIT",i[i.CLEAR_BOUNDS=254]="CLEAR_BOUNDS",i[i.UPDATE_GLOBAL_MATRIX=32]="UPDATE_GLOBAL_MATRIX",i[i.CLEAR_GLOBAL_MATRIX=223]="CLEAR_GLOBAL_MATRIX",i[i.UPDATE_LOCAL_MATRIX=16]="UPDATE_LOCAL_MATRIX",i[i.CLEAR_LOCAL_MATRIX=239]="CLEAR_LOCAL_MATRIX",i[i.UPDATE_GLOBAL_LOCAL_MATRIX=48]="UPDATE_GLOBAL_LOCAL_MATRIX",i[i.UPDATE_LAYOUT=128]="UPDATE_LAYOUT",i[i.CLEAR_LAYOUT=127]="CLEAR_LAYOUT"})(_i||(_i={}));var a0;(function(i){i[i.GLOBAL=1]="GLOBAL",i[i.LOCAL=16]="LOCAL",i[i.GLOBAL_ACCURATE=3]="GLOBAL_ACCURATE",i[i.LOCAL_ACCURATE=48]="LOCAL_ACCURATE"})(a0||(a0={}));var Xn;(function(i){i[i.INIT=0]="INIT",i[i.DEFAULT=1]="DEFAULT",i[i.STATE=2]="STATE",i[i.ANIMATE_BIND=10]="ANIMATE_BIND",i[i.ANIMATE_PLAY=11]="ANIMATE_PLAY",i[i.ANIMATE_START=12]="ANIMATE_START",i[i.ANIMATE_UPDATE=13]="ANIMATE_UPDATE",i[i.ANIMATE_END=14]="ANIMATE_END",i[i.TRANSLATE=20]="TRANSLATE",i[i.TRANSLATE_TO=21]="TRANSLATE_TO",i[i.SCALE=22]="SCALE",i[i.SCALE_TO=23]="SCALE_TO",i[i.ROTATE=24]="ROTATE",i[i.ROTATE_TO=25]="ROTATE_TO"})(Xn||(Xn={}));var hi;(function(i){i[i.ROW=1]="ROW",i[i.COLUMN=2]="COLUMN"})(hi||(hi={}));var o0;(function(i){i[i.CubicBezierCurve=0]="CubicBezierCurve",i[i.QuadraticBezierCurve=1]="QuadraticBezierCurve",i[i.ArcCurve=2]="ArcCurve",i[i.LineCurve=3]="LineCurve",i[i.EllipseCurve=4]="EllipseCurve",i[i.MoveCurve=5]="MoveCurve"})(o0||(o0={}));var On;(function(i){i[i.beforeFillStroke=0]="beforeFillStroke",i[i.afterFillStroke=1]="afterFillStroke"})(On||(On={}));function UOt(i,t,e,n,r,s,a,o,l){const u=ii(a),c=Math.sin(u),h=Math.cos(u),d=h*(o-i)*.5+c*(l-t)*.5,f=h*(l-t)*.5-c*(o-i)*.5;let p=d*d/((e=Math.abs(e))*e)+f*f/((n=Math.abs(n))*n);p>1&&(p=Math.sqrt(p),e*=p,n*=p);const g=h/e,m=c/e,_=-c/n,v=h/n,y=g*o+m*l,b=_*o+v*l,x=g*i+m*t,S=_*i+v*t;let w=1/((x-y)*(x-y)+(S-b)*(S-b))-.25;w<0&&(w=0);let A=Math.sqrt(w);s===r&&(A=-A);const k=.5*(y+x)-A*(S-b),C=.5*(b+S)+A*(x-y),M=Math.atan2(b-C,y-k);let R=Math.atan2(S-C,x-k)-M;R<0&&s===1?R+=Lr:R>0&&s===0&&(R-=Lr);const P=Math.ceil(Math.abs(R/(Ua+.001))),O=[];for(let T=0;T<P;++T){const D=M+T*R/P,B=M+(T+1)*R/P;O[T]=[k,C,D,B,e,n,c,h]}return O}function GOt(i){const t=i[0],e=i[1],n=i[2],r=i[3],s=i[4],a=i[5],o=i[6],l=i[7],u=l*s,c=-o*a,h=o*s,d=l*a,f=Math.cos(n),p=Math.sin(n),g=Math.cos(r),m=Math.sin(r),_=.5*(r-n),v=Math.sin(.5*_),y=8/3*v*v/Math.sin(_),b=t+f-y*p,x=e+p+y*f,S=t+g,w=e+m,A=S+y*m,k=w-y*g;return[u*b+c*x,h*b+d*x,u*A+c*k,h*A+d*k,u*S+c*w,h*S+d*w]}function r$(i,t,e,n){const r=UOt(n[5],n[6],n[0],n[1],n[3],n[4],n[2],t,e);for(let s=0;s<r.length;++s){const a=GOt(r[s]);i.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const YOt=(i,t,e,n,r,s,a,o=!1)=>{const l=2*Math.PI,u=(t%l+l)%l;let c,h=(e%l+l)%l;o?(h>=u&&(h-=l),c=h-u):(h<=u&&(h+=l),c=h-u);const d=Math.ceil(Math.abs(c)/(.5*Math.PI)),f=c/d;for(let p=0;p<d;p++){const g=u+f*p,m=u+f*(p+1),_=4/3*Math.tan(Math.abs(f)/4),v=Math.cos(g),y=Math.sin(g),b=Math.cos(m),x=Math.sin(m),S=v*s+n,w=y*a+r,A=b*s+n,k=x*a+r,C=o?-1:1,M=s*_*C,R=a*_*C;i.push(S-M*y,w+R*v,A+M*x,k-R*b,A,k)}},XOt=[(i,t,e,n,r,s,a)=>t.arc(i[1]*r+e,i[2]*s+n,i[3]*(r+s)/2,i[4],i[5],i[6],a),(i,t,e,n,r,s,a)=>t.arcTo(i[1]*r+e,i[2]*s+n,i[3]*r+e,i[4]*s+n,i[5]*(r+s)/2,a),(i,t,e,n,r,s,a)=>t.bezierCurveTo(i[1]*r+e,i[2]*s+n,i[3]*r+e,i[4]*s+n,i[5]*r+e,i[6]*s+n,a),(i,t,e,n)=>t.closePath(),(i,t,e,n,r,s)=>t.ellipse(i[1]*r+e,i[2]*s+n,i[3]*r,i[4]*s,i[5],i[6],i[7],i[8]),(i,t,e,n,r,s,a)=>t.lineTo(i[1]*r+e,i[2]*s+n,a),(i,t,e,n,r,s,a)=>t.moveTo(i[1]*r+e,i[2]*s+n,a),(i,t,e,n,r,s,a)=>t.quadraticCurveTo(i[1]*r+e,i[2]*s+n,i[3]*r+e,i[4]*s+n,a),(i,t,e,n,r,s,a)=>t.rect(i[1]*r+e,i[2]*s+n,i[3]*r,i[4]*s,a)];function qu(i,t,e=0,n=0,r=1,s=1,a){for(let o=0;o<i.length;o++){const l=i[o];XOt[l[0]](l,t,e,n,r,s,a)}}class cF{getLength(t){return t!=null?this.calcProjLength(t):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}}function Btt(i,t){let e=0;const n=i.length;for(let r=0;r<n;r++){const s=i[r],a=t[r],o=i[(r+1)%n],l=t[(r+1)%n];e+=Je.distanceNN(s,a,o,l)}return e/2}function KOt(i,t,e,n,r){return Btt([i.x,t.x,e.x,n.x],[i.y,t.y,e.y,n.y])}function s$(i,t,e,n,r){const s=1-r;return s*s*s*i+3*t*r*s*s+3*e*r*r*s+n*r*r*r}function Ftt(i,t,e,n,r){const s=s$(i.x,t.x,e.x,n.x,r),a=s$(i.y,t.y,e.y,n.y,r);return new ci(s,a)}function a$(i,t,e,n){const r=1-n;return r*r*i+2*r*n*t+n*n*e}function ztt(i,t,e,n){const r=a$(i.x,t.x,e.x,n),s=a$(i.y,t.y,e.y,n);return new ci(r,s)}function qOt(i,t,e,n){return Btt([i.x,t.x,e.x],[i.y,t.y,e.y])}function Lw(i,t){const{p0:e,p1:n,p2:r,p3:s}=i,a=Ftt(e,n,r,s,t),o=Je.pointAtPP(e,n,t),l=Je.pointAtPP(n,r,t),u=Je.pointAtPP(r,s,t),c=Je.pointAtPP(o,l,t),h=Je.pointAtPP(l,u,t);return[new Bw(e,o,c,a),new Bw(a,h,u,s)]}class Bw extends cF{constructor(t,e,n,r){super(),this.type=o0.CubicBezierCurve,this.p0=t,this.p1=e,this.p2=n,this.p3=r}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}getPointAt(t){if(this.defined!==!1)return Ftt(this.p0,this.p1,this.p2,this.p3,t);throw new Error("definedfalsegetPointAt")}calcLength(){return this._validPoint()?KOt(this.p0,this.p1,this.p2,this.p3):60}calcProjLength(t){return t===hi.ROW?xe(this.p0.x-this.p3.x):t===hi.COLUMN?xe(this.p0.y-this.p3.y):0}getAngleAt(t){const e=Nn(t-.01,0),n=gn(t+.01,1),r=this.getPointAt(e),s=this.getPointAt(n);return ri(s.y-r.y,s.x-r.x)}draw(t,e,n,r,s,a){if(t.moveTo(this.p0.x*r+e,this.p0.y*s+n),a>=1)t.bezierCurveTo(this.p1.x*r+e,this.p1.y*s+n,this.p2.x*r+e,this.p2.y*s+n,this.p3.x*r+e,this.p3.y*s+n);else if(a>0){const[o]=Lw(this,a);t.bezierCurveTo(o.p1.x*r+e,o.p1.y*s+n,o.p2.x*r+e,o.p2.y*s+n,o.p3.x*r+e,o.p3.y*s+n)}}includeX(t){const e=gn(this.p0.x,this.p1.x,this.p2.x,this.p3.x),n=Nn(this.p0.x,this.p1.x,this.p2.x,this.p3.x);return t>=e&&t<=n}getYAt(t){const e=gn(this.p0.x,this.p1.x,this.p2.x,this.p3.x),n=(t-e)/(Nn(this.p0.x,this.p1.x,this.p2.x,this.p3.x)-e);return this.getPointAt(n).y}}function o$(i,t){const{p0:e,p1:n}=i,r=Je.pointAtPP(e,n,t);return[new Fw(e,r),new Fw(r,n)]}class Fw extends cF{constructor(t,e){super(),this.type=o0.LineCurve,this.p0=t,this.p1=e}getPointAt(t){if(this.defined!==!1)return Je.pointAtPP(this.p0,this.p1,t);throw new Error("definedfalsegetPointAt")}getAngleAt(t){return this.angle==null&&(this.angle=ri(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}calcLength(){return this._validPoint()?Je.distancePP(this.p0,this.p1):60}calcProjLength(t){return t===hi.ROW?xe(this.p0.x-this.p1.x):t===hi.COLUMN?xe(this.p0.y-this.p1.y):0}draw(t,e,n,r,s,a){if(t.moveTo(this.p0.x*r+e,this.p0.y*s+n),a>=1)t.lineTo(this.p1.x*r+e,this.p1.y*s+n);else if(a>0){const o=this.getPointAt(a);t.lineTo(o.x*r+e,o.y*s+n)}}includeX(t){return t>=this.p0.x&&t<=this.p1.x||t>=this.p1.x&&t<=this.p0.x}getYAt(t){if(this.includeX(t)){let e=this.p0,n=this.p1;this.p0.x>this.p1.x&&(e=this.p1,n=this.p0);const r=(t-e.x)/(n.x-e.x);return e.y+r*(n.y-e.y)}return 1/0}}class dM{get endX(){return this._lastX}get endY(){return this._lastY}constructor(t,e){this.init(t,e)}init(t,e){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=t,this.direction=e,this.curves=[]}bezierCurveTo(t,e,n,r,s,a,o,l){const u=new Bw(new ci(this._lastX,this._lastY),new ci(t,e),new ci(n,r),new ci(s,a));u.originP1=this._lastOriginP,u.originP2=l,u.defined=o,this.curves.push(u),this._lastX=s,this._lastY=a,this._lastOriginP=l}closePath(){if(this.curves.length<2)return;const t=this.curves[this.curves.length-1];this.lineTo(this._startX,this._startY,t.defined,this._startOriginP)}ellipse(){throw new Error("SegContextellipse")}lineTo(t,e,n,r){const s=this.addLinearCurve(t,e,n,this._lastOriginP,r);this.curves.push(s),this._lastX=t,this._lastY=e,this._lastOriginP=r}moveTo(t,e,n){return this._lastX=this._startX=t,this._lastY=this._startY=e,this._lastOriginP=n,this._startOriginP=n,this}quadraticCurveTo(t,e,n,r){throw new Error("SegContextquadraticCurveTo")}clear(){this.curves=[],this.length=NaN}tryUpdateLength(t){return this.getLength(t)}addLinearCurve(t,e,n,r,s){const a=new Fw(new ci(this._lastX,this._lastY),new ci(t,e));return a.originP1=r,a.originP2=s,a.defined=n,a}getPointAt(t){throw new Error("")}getCurveLengths(){return[]}getLength(t){var e,n;if(t===hi.COLUMN){if(!this.curves.length)return 0;const r=this.curves[0],s=this.curves[this.curves.length-1],a=(e=s.p3)!==null&&e!==void 0?e:s.p1;return xe(r.p0.y-a.y)}if(t===hi.ROW){if(!this.curves.length)return 0;const r=this.curves[0],s=this.curves[this.curves.length-1],a=(n=s.p3)!==null&&n!==void 0?n:s.p1;return xe(r.p0.x-a.x)}return Number.isFinite(this.length)||(this.length=this.curves.reduce((r,s)=>r+s.getLength(),0)),this.length}}class ZOt extends dM{bezierCurveTo(t,e,n,r,s,a,o,l){return super.bezierCurveTo(e,t,r,n,a,s,o,l)}lineTo(t,e,n,r){return super.lineTo(e,t,n,r)}moveTo(t,e,n){return super.moveTo(e,t,n)}clear(){return super.clear()}}function gf(i,t,e=1){let n=!1;for(let r=0,s=t.length;r<=s;r++)r>=s===n&&((n=!n)?i.lineStart():i.lineEnd()),n&&i.point(t[r])}function Im(i,t,e){const n=t??(xe(e[e.length-1].x-e[0].x)>xe(e[e.length-1].y-e[0].y)?hi.ROW:hi.COLUMN);return i==="monotoneY"?new ZOt(i,n):new dM(i,n)}class Ntt{constructor(t,e){this.context=t,e&&(this.startPoint=e)}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(t){const e=t.x,n=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,n,this._lastDefined!==!1&&t.defined!==!1,t):this.context.moveTo(e,n,t);break;case 1:this._point=2;default:this.context.lineTo(e,n,this._lastDefined!==!1&&t.defined!==!1,t)}this._lastDefined=t.defined}tryUpdateLength(){return this.context.tryUpdateLength()}}function Rb(i,t={}){const{direction:e,startPoint:n}=t;if(i.length<2-+!!n)return null;const r=Im("linear",e,i);return QOt(new Ntt(r,n),i),r}function QOt(i,t){return gf(i,t,1)}function l$(i,t,e,n,r){i.context.bezierCurveTo((2*i._x0+i._x1)/3,(2*i._y0+i._y1)/3,(i._x0+2*i._x1)/3,(i._y0+2*i._y1)/3,(i._x0+4*i._x1+t)/6,(i._y0+4*i._y1+e)/6,n,i.lastPoint1)}class JOt{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){this._point===2&&l$(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1),(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(t){const e=t.x,n=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,n,this._lastDefined1!==!1&&this._lastDefined2!==!1,t):this.context.moveTo(e,n,t);break;case 1:this._point=2;break;default:l$(this,e,n,this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}function tDt(i,t){return gf(i,t,2)}function eDt(i,t={}){const{direction:e,startPoint:n}=t;if(i.length<2-+!!n)return null;if(i.length<3-+!!n)return Rb(i,t);const r=Im("basis",e,i);return tDt(new JOt(r,n),i),r}function u$(i){return i<0?-1:1}function c$(i,t,e){const n=i._x1-i._x0,r=t-i._x1,s=(i._y1-i._y0)/(n||Number(r<0&&-0)),a=(e-i._y1)/(r||Number(n<0&&-0)),o=(s*r+a*n)/(n+r);return(u$(s)+u$(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function h$(i,t){const e=i._x1-i._x0;return e?(3*(i._y1-i._y0)/e-t)/2:t}function ME(i,t,e,n,r){const s=i._x0,a=i._y0,o=i._x1,l=i._y1,u=(o-s)/3;i.context.bezierCurveTo(s+u,a+u*t,o-u,l-u*e,o,l,n,i.lastPoint1)}class jtt{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1);break;case 3:ME(this,this._t0,h$(this,this._t0),this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1)}(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(t){let e=NaN;const n=t.x,r=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(n,r,this._lastDefined1!==!1&&this._lastDefined2!==!1,t):this.context.moveTo(n,r,t);break;case 1:this._point=2;break;case 2:this._point=3,ME(this,h$(this,e=c$(this,n,r)),e,this._lastDefined1!==!1&&this._lastDefined2!==!1);break;default:ME(this,this._t0,e=c$(this,n,r),this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=r,this._t0=e,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined!==!1,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}class iDt extends jtt{constructor(t,e){super(t,e)}point(t){return super.point({y:t.x,x:t.y,defined:t.defined})}}function nDt(i,t){return gf(i,t,2)}function rDt(i,t={}){const{direction:e,startPoint:n}=t;if(i.length<2-+!!n)return null;if(i.length<3-+!!n)return Rb(i,t);const r=Im("monotoneX",e,i);return nDt(new jtt(r,n),i),r}function sDt(i,t){return gf(i,t,2)}function aDt(i,t={}){const{direction:e,startPoint:n}=t;if(i.length<2-+!!n)return null;if(i.length<3-+!!n)return Rb(i,t);const r=Im("monotoneY",e,i);return sDt(new iDt(r,n),i),r}let Htt=class{constructor(t,e=.5,n){this.context=t,this._t=e,this.startPoint=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){0<this._t&&this._t<1&&this._point===2&&this.context.lineTo(this._x,this._y,this._lastDefined!==!1,this.lastPoint),(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}point(t){const e=t.x,n=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,n,this._lastDefined!==!1&&t.defined!==!1,t):this.context.moveTo(e,n,t);break;case 1:this._point=2;default:if(this._t<=0)this.context.lineTo(this._x,n,this._lastDefined!==!1&&t.defined!==!1,this.lastPoint),this.context.lineTo(e,n,this._lastDefined!==!1&&t.defined!==!1,t);else{const r=this._x*(1-this._t)+e*this._t;this._t===.5?this.context.lineTo(r,this._y,this._lastDefined!==!1,this.lastPoint):this.context.lineTo(r,this._y,this._lastDefined!==!1&&t.defined!==!1,this.lastPoint),this.context.lineTo(r,n,this._lastDefined!==!1&&t.defined!==!1,t)}}this._lastDefined=t.defined,this._x=e,this._y=n,this.lastPoint=t}tryUpdateLength(){return this.context.tryUpdateLength()}};class oDt extends Htt{lineEnd(){this.context.closePath()}}function TE(i,t,e={}){const{direction:n,startPoint:r}=e;if(i.length<2-+!!r)return null;const s=new dM("step",n??(xe(i[i.length-1].x-i[0].x)>xe(i[i.length-1].y-i[0].y)?hi.ROW:hi.COLUMN));return Vtt(new Htt(s,t,r),i),s}function Vtt(i,t){return gf(i,t,1)}function lDt(i,t,e={}){const{direction:n,startPoint:r}=e;if(i.length<2-+!!r)return null;const s=new dM("step",n??(xe(i[i.length-1].x-i[0].x)>xe(i[i.length-1].y-i[0].y)?hi.ROW:hi.COLUMN));return Vtt(new oDt(s,t,r),i),s}class uDt extends Ntt{lineEnd(){this.context.closePath()}}function cDt(i,t={}){const{direction:e,startPoint:n}=t;if(i.length<2-+!!n)return null;const r=Im("linear",e,i);return hDt(new uDt(r,n),i),r}function hDt(i,t){return gf(i,t,1)}function Wtt(i,t,e,n,r){let s=i._x1,a=i._y1,o=i._x2,l=i._y2;if(i._l01_a>Ye){const u=2*i._l01_2a+3*i._l01_a*i._l12_a+i._l12_2a,c=3*i._l01_a*(i._l01_a+i._l12_a);s=(s*u-i._x0*i._l12_2a+i._x2*i._l01_2a)/c,a=(a*u-i._y0*i._l12_2a+i._y2*i._l01_2a)/c}if(i._l23_a>Ye){const u=2*i._l23_2a+3*i._l23_a*i._l12_a+i._l12_2a,c=3*i._l23_a*(i._l23_a+i._l12_a);o=(o*u+i._x1*i._l23_2a-t*i._l12_2a)/c,l=(l*u+i._y1*i._l23_2a-e*i._l12_2a)/c}i.context.bezierCurveTo(s,a,o,l,i._x2,i._y2,n,i.lastPoint1)}class dDt{constructor(t,e=.5,n){this.context=t,this.startPoint=n,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x2,this._y2,this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1);break;case 3:this.point({x:this._x2,y:this._y2})}(this._line||this._line!==0&&this._point===1)&&this.context.closePath(),this._line=1-this._line}point(t){const{x:e,y:n}=t;if(this._point){const r=this._x2-e,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,n,this._lastDefined1!==!1&&this._lastDefined2!==!1):this.context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Wtt(this,e,n,this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}function $tt(i,t){return function(e,n,r={}){const{direction:s,startPoint:a}=r;if(e.length<2-+!!a)return null;if(e.length<3-+!!a)return Rb(e,r);const o=Im(i,s,e),l=new t(o,n,a);return gf(l,e,2),o}}const fDt=$tt("catmullRom",dDt);class pDt{constructor(t,e=.5,n){this.context=t,this.startPoint=n,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 1:this.context.moveTo(this._x3,this._y3,this.lastPoint1),this.context.closePath();break;case 2:this.context.lineTo(this._x3,this._y3,this._lastDefined1!==!1&&this._lastDefined2!==!1,this.lastPoint1),this.context.closePath();break;case 3:this.point({x:this._x3,y:this._y3}),this.point({x:this._x4,y:this._y4}),this.point({x:this._x5,y:this._y5})}}point(t){const{x:e,y:n}=t;if(this._point){const r=this._x2-e,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=n;break;case 1:this._point=2,this.context.moveTo(this._x4=e,this._y4=n,t);break;case 2:this._point=3,this._x5=e,this._y5=n;break;default:Wtt(this,e,n,this._lastDefined1!==!1&&this._lastDefined2!==!1)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}const gDt=$tt("catmullRomClosed",pDt);function mDt(i,t){const{p0:e,p1:n,p2:r}=i,s=ztt(e,n,r,t),a=Je.pointAtPP(e,n,t),o=Je.pointAtPP(n,r,t);return[new vD(e,a,s),new vD(s,o,r)]}class vD extends cF{constructor(t,e,n){super(),this.type=o0.QuadraticBezierCurve,this.p0=t,this.p1=e,this.p2=n}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y)}getPointAt(t){if(this.defined!==!1)return ztt(this.p0,this.p1,this.p2,t);throw new Error("definedfalsegetPointAt")}calcLength(){return this._validPoint()?qOt(this.p0,this.p1,this.p2):60}calcProjLength(t){return t===hi.ROW?xe(this.p0.x-this.p2.x):t===hi.COLUMN?xe(this.p0.y-this.p2.y):0}getAngleAt(t){const e=Nn(t-.01,0),n=gn(t+.01,1),r=this.getPointAt(e),s=this.getPointAt(n);return ri(s.y-r.y,s.x-r.x)}draw(t,e,n,r,s,a){if(t.moveTo(this.p0.x*r+e,this.p0.y*s+n),a>=1)t.quadraticCurveTo(this.p1.x*r+e,this.p1.y*s+n,this.p2.x*r+e,this.p2.y*s+n);else if(a>0){const[o]=mDt(this,a);t.quadraticCurveTo(o.p1.x*r+e,o.p1.y*s+n,o.p2.x*r+e,o.p2.y*s+n)}}getYAt(t){throw new Error("QuadraticBezierCurvegetYAt")}includeX(t){throw new Error("QuadraticBezierCurveincludeX")}}class _Dt{constructor(t){this.path=t,this._lastX=this._lastY=this._startX=this._startY=0}moveTo(t,e){return this._lastX=this._startX=t,this._lastY=this._startY=e,this}lineTo(t,e){const n=this.addLinearCurve(t,e);this.path.addCurve(n),this._lastX=t,this._lastY=e}addLinearCurve(t,e){return new Fw(new ci(this._lastX,this._lastY),new ci(t,e))}quadraticCurveTo(t,e,n,r){const s=new vD(new ci(this._lastX,this._lastY),new ci(t,e),new ci(n,r));this.path.addCurve(s),this._lastX=n,this._lastY=r}bezierCurveTo(t,e,n,r,s,a){const o=new Bw(new ci(this._lastX,this._lastY),new ci(t,e),new ci(n,r),new ci(s,a));this.path.addCurve(o),this._lastX=s,this._lastY=a}arcTo(t,e,n,r,s){throw new Error("CurveContextarcTo")}ellipse(t,e,n,r,s,a,o,l){throw new Error("CurveContextellipse")}rect(t,e,n,r){throw new Error("CurveContextrect")}arc(t,e,n,r,s,a){throw new Error("CurveContextarc")}closePath(){this.path.curves.length<2||this.lineTo(this._startX,this._startY)}}function ld(i,t,e){var n,r;switch(t){case"linear":default:return Rb(i,e);case"basis":return eDt(i,e);case"monotoneX":return rDt(i,e);case"monotoneY":return aDt(i,e);case"step":return TE(i,.5,e);case"stepClosed":return lDt(i,.5,e);case"stepBefore":return TE(i,0,e);case"stepAfter":return TE(i,1,e);case"catmullRom":return fDt(i,(n=e?.curveTension)!==null&&n!==void 0?n:.5,e);case"catmullRomClosed":return gDt(i,(r=e?.curveTension)!==null&&r!==void 0?r:.5,e);case"linearClosed":return cDt(i,e)}}class Ki extends HOt{constructor(t){super(),this.commandList=[],t&&(this._ctx=t),this._boundsContext=new uF(this.bounds)}get curves(){return this.tryBuildCurves()}setCtx(t){this._ctx=t}moveTo(t,e){return this.commandList.push([Ie.M,t,e]),this._ctx&&this._ctx.moveTo(t,e),this}lineTo(t,e){return this.commandList.push([Ie.L,t,e]),this._ctx&&this._ctx.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.commandList.push([Ie.Q,t,e,n,r]),this._ctx&&this._ctx.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,s,a){return this.commandList.push([Ie.C,t,e,n,r,s,a]),this._ctx&&this._ctx.bezierCurveTo(t,e,n,r,s,a),this}arcTo(t,e,n,r,s){return this.commandList.push([Ie.AT,t,e,n,r,s]),this._ctx&&this._ctx.arcTo(t,e,n,r,s),this}ellipse(t,e,n,r,s,a,o,l){return this.commandList.push([Ie.E,t,e,n,r,s,a,o,l]),this._ctx&&this._ctx.ellipse(t,e,n,r,s,a,o,l),this}rect(t,e,n,r){return this.commandList.push([Ie.R,t,e,n,r]),this._ctx&&this._ctx.rect(t,e,n,r),this}arc(t,e,n,r,s,a){return this.commandList.push([Ie.A,t,e,n,r,s,a]),this._ctx&&this._ctx.arc(t,e,n,r,s,a),this}closePath(){return this.commandList.push([Ie.Z]),this._ctx&&this._ctx.closePath(),this}addCurve(t){this._curves.push(t)}clear(){this.transformCbList=null,this.commandList.length=0,this._curves.length=0}beginPath(){this.clear()}tryBuildCurves(){if(!this._curves||!this._curves.length){const t=new _Dt(this);qu(this.commandList,t,0,0,1,1)}return this._curves}toString(){if(!this.toStringCbList){const n=[];n[Ie.M]=r=>`M${r[1]} ${r[2]}`,n[Ie.L]=r=>`L${r[1]} ${r[2]}`,n[Ie.Q]=r=>`Q${r[1]} ${r[2]} ${r[3]} ${r[4]}`,n[Ie.C]=r=>`C${r[1]} ${r[2]} ${r[3]} ${r[4]} ${r[5]} ${r[6]}`,n[Ie.A]=r=>{const s=[],a=r[1],o=r[2],l=r[3],u=r[4],c=r[5],h=r[6];YOt(s,u,c,a,o,l,l,h);let d="";for(let f=0;f<s.length;f+=6)d+=`C${s[f]} ${s[f+1]} ${s[f+2]} ${s[f+3]} ${s[f+4]} ${s[f+5]}`;return d},n[Ie.R]=r=>`M${r[1]} ${r[2]} h${r[3]} v${r[4]} H${r[1]}Z`,n[Ie.Z]=r=>"Z",this.toStringCbList=n}const t=this.toStringCbList;let e="";return this.commandList.forEach(n=>{e+=t[n[0]](n)}),e}fromString(t,e,n,r,s){this.clear();const a=$Ot(t);return this._runCommandStrList(a,e,n,r,s),this._updateBounds(),this}fromLine(t){const{points:e,curveType:n,clipRangeByDimension:r}=t.attribute;if(!e)return;const s=ld(e,n);r==="x"?this.direction=hi.ROW:r==="y"?this.direction=hi.COLUMN:r==="auto"&&(this.direction=s.direction),this._curves=s.curves}fromCustomPath2D(t,e,n,r,s){return this.clear(),this._runCommandList(t.commandList,e,n,r,s),this._updateBounds(),this}transform(t,e,n,r){const s=this.commandList;if(!this.transformCbList){const a=[];a[Ie.M]=this.moveToTransform,a[Ie.L]=this.lineToTransform,a[Ie.Q]=this.quadraticCurveToTransform,a[Ie.C]=this.bezierCurveToTransform,a[Ie.AT]=this.arcToTransform,a[Ie.E]=this.ellipseTransform,a[Ie.R]=this.rectTransform,a[Ie.A]=this.arcTransform,a[Ie.Z]=this.closePathTransform,this.transformCbList=a}s.forEach(a=>{this.transformCbList[a[0]](a,t,e,n,r)}),this._updateBounds()}moveToTransform(t,e,n,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+n}lineToTransform(t,e,n,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+n}quadraticCurveToTransform(t,e,n,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+n,t[3]=t[3]*r+e,t[4]=t[4]*s+n}bezierCurveToTransform(t,e,n,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+n,t[3]=t[3]*r+e,t[4]=t[4]*s+n,t[5]=t[5]*r+e,t[6]=t[6]*s+n}arcToTransform(t,e,n,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+n,t[3]=t[3]*r+e,t[4]=t[4]*s+n,t[5]=t[5]*(r+s)/2}ellipseTransform(t,e,n,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+n,t[3]=t[3]*r,t[4]=t[4]*s}rectTransform(t,e,n,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+n,t[3]=t[3]*r,t[4]=t[4]*s}arcTransform(t,e,n,r,s){t[1]=t[1]*r+e,t[2]=t[2]*s+n,t[3]=t[3]*(r+s)/2}closePathTransform(){}_runCommandStrList(t,e=0,n=0,r=1,s=1){let a,o,l,u,c,h=null,d=0,f=0,p=0,g=0;for(let m=0,_=t.length;m<_;++m){switch(a=t[m],r===1&&s===1||(a=vDt(a,r,s)),a[0]){case"l":d+=a[1],f+=a[2],this.lineTo(d+e,f+n);break;case"L":d=a[1],f=a[2],this.lineTo(d+e,f+n);break;case"h":d+=a[1],this.lineTo(d+e,f+n);break;case"H":d=a[1],this.lineTo(d+e,f+n);break;case"v":f+=a[1],this.lineTo(d+e,f+n);break;case"V":f=a[1],this.lineTo(d+e,f+n);break;case"m":d+=a[1],f+=a[2],this.moveTo(d+e,f+n);break;case"M":d=a[1],f=a[2],this.moveTo(d+e,f+n);break;case"c":o=d+a[5],l=f+a[6],p=d+a[3],g=f+a[4],this.bezierCurveTo(d+a[1]+e,f+a[2]+n,p+e,g+n,o+e,l+n),d=o,f=l;break;case"C":d=a[5],f=a[6],p=a[3],g=a[4],this.bezierCurveTo(a[1]+e,a[2]+n,p+e,g+n,d+e,f+n);break;case"s":o=d+a[3],l=f+a[4],h[0].match(/[CcSs]/)===null?(p=d,g=f):(p=2*d-p,g=2*f-g),u=d+a[1],c=f+a[2],this.bezierCurveTo(p+e,g+n,u+e,c+n,o+e,l+n),p=u,g=c,d=o,f=l;break;case"S":o=a[3],l=a[4],h[0].match(/[CcSs]/)===null?(p=d,g=f):(p=2*d-p,g=2*f-g),u=a[1],c=a[2],this.bezierCurveTo(p+e,g+n,u+e,c+n,o+e,l+n),p=u,g=c,d=o,f=l;break;case"q":o=d+a[3],l=f+a[4],p=d+a[1],g=f+a[2],this.quadraticCurveTo(p+e,g+n,o+e,l+n),d=o,f=l;break;case"Q":o=a[3],l=a[4],this.quadraticCurveTo(a[1]+e,a[2]+n,o+e,l+n),d=o,f=l,p=a[1],g=a[2];break;case"t":o=d+a[1],l=f+a[2],h[0].match(/[QqTt]/)===null?(p=d,g=f):h[0]==="t"?(p=2*d-u,g=2*f-c):h[0]==="q"&&(p=2*d-p,g=2*f-g),u=p,c=g,this.quadraticCurveTo(p+e,g+n,o+e,l+n),d=o,f=l,p=d+a[1],g=f+a[2];break;case"T":o=a[1],l=a[2],p=2*d-p,g=2*f-g,this.quadraticCurveTo(p+e,g+n,o+e,l+n),d=o,f=l;break;case"a":r$(this,d+e,f+n,[a[1],a[2],a[3],a[4],a[5],a[6]+d+e,a[7]+f+n]),d+=a[6],f+=a[7];break;case"A":r$(this,d+e,f+n,[a[1],a[2],a[3],a[4],a[5],a[6]+e,a[7]+n]),d=a[6],f=a[7];break;case"z":case"Z":this.closePath()}h=a}}_runCommandList(t,e=0,n=0,r=1,s=1){if(e!==0||n!==0||r!==1||s!==1)for(let a=0,o=t.length;a<o;++a){const l=t[a].slice();switch(l[0]){case Ie.L:this.lineToTransform(l,e,n,r,s);break;case Ie.M:this.moveToTransform(l,e,n,r,s);break;case Ie.C:this.bezierCurveToTransform(l,e,n,r,s);break;case Ie.Q:this.quadraticCurveToTransform(l,e,n,r,s);break;case Ie.A:this.arcToTransform(l,e,n,r,s);break;case Ie.E:this.ellipseTransform(l,e,n,r,s);break;case Ie.R:this.rectTransform(l,e,n,r,s);break;case Ie.AT:this.arcToTransform(l,e,n,r,s);break;case Ie.Z:this.closePath()}}else this.commandList=t.map(a=>a.slice())}_updateBounds(){this.bounds.clear(),qu(this.commandList,this._boundsContext)}release(){this.commandList=[],this._boundsContext=null,this._ctx=null}getLength(){if(this.direction===hi.COLUMN){if(!this._curves.length)return 0;const t=this._curves[0],e=this._curves[this._curves.length-1];return xe(t.p0.y-e.p1.y)}if(this.direction===hi.ROW){if(!this._curves.length)return 0;const t=this._curves[0],e=this._curves[this._curves.length-1];return xe(t.p0.x-e.p1.x)}return this._curves.reduce((t,e)=>t+e.getLength(),0)}getYAt(t){if(!this.curves)return 1/0;for(let e=0;e<this.curves.length;e++){const n=this.curves[e];if(n.includeX(t))return n.getYAt(t)}return 1/0}getAttrAt(t){if(!this._curves)return{pos:{x:0,y:0},angle:0};let e,n=0;for(let s=0;s<this._curves.length;s++){e=this._curves[s];const a=e.getLength(this.direction);if(n+a>=t)break;n+=a}const r=(t-n)/e.getLength(this.direction);return{pos:e.getPointAt(r),angle:e.getAngleAt(r)}}drawWithClipRange(t,e,n,r,s){this.tryBuildCurves();const a=this.getLength()*s;let o=0;for(let l=0;l<this._curves.length;l++){const u=this._curves[l],c=u.getLength(this.direction);if(!(o+c<=a)){const h=1-(o+c-a)/c;u.draw(t,n,r,e,e,h);break}u.draw(t,n,r,e,e,1),o+=c}}}const Ra=["l",0,0,0,0,0,0,0];function vDt(i,t,e){const n=Ra[0]=i[0];if(n==="a"||n==="A")Ra[1]=t*i[1],Ra[2]=e*i[2],Ra[3]=i[3],Ra[4]=i[4],Ra[5]=i[5],Ra[6]=t*i[6],Ra[7]=e*i[7];else if(n==="h"||n==="H")Ra[1]=t*i[1];else if(n==="v"||n==="V")Ra[1]=e*i[1];else for(let r=1,s=i.length;r<s;++r)Ra[r]=(r%2==1?t:e)*i[r];return Ra}const yDt={alignSelf:"auto"},lr={x:0,y:0,z:0,dx:0,dy:0,dz:0,scrollX:0,scrollY:0,scaleX:1,scaleY:1,scaleZ:1,angle:0,alpha:0,beta:0,scaleCenter:[0,0],anchor:[0,0],anchor3d:[0,0],postMatrix:new di},Utt={fillOpacity:1,fill:!1,shadowBlur:0,shadowColor:"black",shadowOffsetX:0,shadowOffsetY:0},PE={strokeOpacity:1,lineDash:[],lineDashOffset:0,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,strokeBoundsBuffer:2,stroke:!1},Gtt=Object.assign({outerBorder:Object.assign(Object.assign({},PE),{distance:0}),innerBorder:Object.assign(Object.assign({},PE),{distance:0})},PE),Za={text:"",maxLineWidth:1/0,maxWidth:1/0,textAlign:"left",textBaseline:"alphabetic",fontSize:16,fontFamily:`PingFang SC,Microsoft Yahei,system-ui,'-apple-system',segoe ui,
    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol`,fontWeight:"",ellipsis:"",fontVariant:"",fontStyle:"",lineHeight:void 0,underline:0,lineThrough:0,scaleIn3d:!1,direction:"horizontal",wordBreak:"break-all",ignoreBuf:!1,verticalMode:0,wrap:!1,whiteSpace:"no-wrap",heightLimit:1/0,lineClamp:1/0,suffixPosition:"end",underlineDash:[],underlineOffset:0,disableAutoClipedPoptip:void 0,measureMode:Sd.fontBounding,keepCenterInLine:!1},bDt={pickStrokeBuffer:0},xDt=Object.assign(Object.assign(Object.assign(Object.assign({forceBoundsWidth:void 0,forceBoundsHeight:void 0,opacity:1,background:null,autoAnimateTexture:!1,textureRatio:1,textureOptions:null,backgroundOpacity:1,backgroundCornerRadius:0,texture:null,textureColor:"black",textureSize:10,texturePadding:2,backgroundMode:"no-repeat",backgroundFit:!0,backgroundKeepAspectRatio:!1,backgroundClip:!0,backgroundScale:1,backgroundOffsetX:0,backgroundOffsetY:0,blur:0,filter:"",cursor:null,html:null,react:null,vue:null},Utt),Gtt),yDt),bDt),Ytt={connectedType:"none",connectedStyle:{},connectedX:NaN,connectedY:NaN},SDt={_debug_bounds:!1},Ui=Object.assign(Object.assign(Object.assign({strokeSeg:null,renderable:!0,pickable:!0,shadowGraphic:void 0,childrenPickable:!0,fillPickable:!0,strokePickable:!0,visible:!0,zIndex:0,layout:null,boundsPadding:0,fillStrokeOrder:0,renderStyle:"default",pickMode:"accurate",customPickShape:null,boundsMode:"accurate",keepDirIn3d:!0,shadowRootIdx:1,globalZIndex:1,globalCompositeOperation:"",overflow:"hidden",shadowPickMode:"graphic",keepStrokeScale:!1,clipConfig:null,roughStyle:null},SDt),xDt),lr),wDt=Object.assign(Object.assign({},Ui),{startAngle:0,endAngle:qt,innerRadius:0,outerRadius:1,innerPadding:0,outerPadding:0,cornerRadius:0,padRadius:0,padAngle:0,cap:!1,forceShowCap:!1}),ADt=Object.assign(Object.assign(Object.assign({},Ui),Ytt),{points:[],segments:[],curveType:"linear",clipRange:1,closePath:!1,curveTension:1}),kDt=Object.assign(Object.assign({},Ui),{radius:1,startAngle:0,endAngle:qt}),CDt=Object.assign(Object.assign({},Ui),{width:0,height:0,cornerRadius:0,path:[],clip:!1,visibleAll:!0,display:"relative",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",baseOpacity:1,cornerType:"round"}),MDt=Object.assign(Object.assign({},Ui),{path:"",width:0,height:0,cornerRadius:0,clip:!1}),TDt=Object.assign(Object.assign(Object.assign({},Ui),Ytt),{points:[],segments:[],curveType:"linear",clipRange:1,clipRangeByDimension:"default",closePath:!1,curveTension:1}),PDt=Object.assign(Object.assign({},Ui),{path:new Ki,fillStrokeOrder:1,clipRange:1,customPath:()=>{Ee.getInstance().warn("")}}),EDt=Object.assign(Object.assign({},Ui),{points:[],cornerRadius:0,closePath:!0}),RDt=Object.assign(Object.assign({},Ui),{width:100,height:100,spikes:5,thickness:.5}),ODt=Object.assign(Object.assign({},Ui),{width:0,height:0,x1:0,y1:0,strokeBoundsBuffer:0,cornerRadius:0,cornerType:"round",drawStrokeWhenZeroWH:!1});Object.assign(Object.assign({},Ui),{width:0,height:0,x1:0,y1:0,cornerRadius:0,length:0,cornerType:"round",drawStrokeWhenZeroWH:!1});const DDt=Object.assign(Object.assign({},Ui),{symbolType:"circle",size:10,keepDirIn3d:!0,clipRange:1}),Xtt=Object.assign(Object.assign(Object.assign({},Ui),Za),{strokeBoundsBuffer:0,keepDirIn3d:!0}),hu=Object.assign(Object.assign(Object.assign({},Ui),Za),{upgradeAttrs:null,editable:!1,editOptions:null,ascentDescentMode:"actual",width:300,height:300,ellipsis:!0,wordBreak:"break-word",verticalDirection:"top",textAlign:"left",textBaseline:"top",layoutDirection:"horizontal",textConfig:[],disableAutoWrapLine:!1,maxHeight:void 0,maxWidth:void 0,singleLine:!1}),l0=Object.assign(Object.assign({repeatX:"no-repeat",repeatY:"no-repeat",image:"",width:0,height:0,maxWidth:500,maxHeight:500},Ui),{fill:!0,cornerRadius:0,cornerType:"round"}),IDt=Object.assign(Object.assign({},l0),{backgroundShowMode:"never",backgroundWidth:0,backgroundHeight:0,textAlign:"left",textBaseline:"middle",direction:"horizontal",margin:0,id:"",width:20,height:20,backgroundFill:"rgba(101, 117, 168, 0.1)",backgroundFillOpacity:1,backgroundStroke:!1,backgroundStrokeOpacity:1,backgroundRadius:4,opacity:1}),LDt=function(){const i={linearGradient:/^(linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,fromAngleValue:/^from\s*(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/(^\#[0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^(rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\))/i,rgbaColor:/^(rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*((\d\.\d+)|\d{1,3})\))/i};let t="";function e(b){const x=new Error(t+": "+b);throw x.source=t,x}function n(){const b=f(r);return t.length>0&&e("Invalid input not EOF"),b}function r(){return s("linear",i.linearGradient,a)||s("radial",i.radialGradient,l)||s("conic",i.conicGradient,o)}function s(b,x,S){return function(w,A){const k=v(w);if(k){v(i.startCall)||e("Missing (");const C=A(k);return v(i.endCall)||e("Missing )"),C}}(x,function(w){const A=S();return A&&(v(i.comma)||e("Missing comma before color stops")),{type:b,orientation:A,colorStops:f(p)}})}function a(){return _("directional",i.sideOrCorner,1)||_("angular",i.angleValue,1)}function o(){return _("angular",i.fromAngleValue,1)}function l(){let b,x,S=u();return S&&(b=[],b.push(S),x=t,v(i.comma)&&(S=u(),S?b.push(S):t=x)),b}function u(){let b=function(){const x=_("shape",/^(circle)/i,0);return x&&(x.style=m()||c()),x}()||function(){const x=_("shape",/^(ellipse)/i,0);return x&&(x.style=g()||c()),x}();if(b)b.at=h();else{const x=c();if(x){b=x;const S=h();S&&(b.at=S)}else{const S=d();S&&(b={type:"default-radial",at:S})}}return b}function c(){return _("extent-keyword",i.extentKeywords,1)}function h(){if(_("position",/^at/,0)){const b=d();return b||e("Missing positioning value"),b}}function d(){const b={x:g(),y:g()};if(b.x||b.y)return{type:"position",value:b}}function f(b){let x=b();const S=[];if(x)for(S.push(x);v(i.comma);)x=b(),x?S.push(x):e("One extra comma");return S}function p(){const b=_("hex",i.hexColor,1)||_("rgba",i.rgbaColor,1)||_("rgb",i.rgbColor,1)||_("literal",i.literalColor,0);return b||e("Expected color definition"),b.length=g(),b}function g(){return _("%",i.percentageValue,1)||_("position-keyword",i.positionKeywords,1)||m()}function m(){return _("px",i.pixelValue,1)||_("em",i.emValue,1)}function _(b,x,S){const w=v(x);if(w)return{type:b,value:w[S]}}function v(b){const x=/^[\n\r\t\s]+/.exec(t);x&&y(x[0].length);const S=b.exec(t);return S&&y(S[0].length),S}function y(b){t=t.substr(b)}return function(b){return t=b.toString(),n()}}();class To{static IsGradient(t){return!(typeof t=="string"&&!t.includes("gradient"))}static IsGradientStr(t){return typeof t=="string"&&t.includes("gradient")}static Parse(t){if(To.IsGradientStr(t))try{const e=LDt(t)[0];if(e){if(e.type==="linear")return To.ParseLinear(e);if(e.type==="radial")return To.ParseRadial(e);if(e.type==="conic")return To.ParseConic(e)}}catch{return t}return t}static processColorStops(t){if(!t||t.length===0)return[];if(t.some(e=>e.length)){const e=t.map(n=>({color:n.value,offset:n.length?parseFloat(n.length.value)/100:-1}));e[0].offset<0&&(e[0].offset=0),e[e.length-1].offset<0&&(e[e.length-1].offset=1);for(let n=1;n<e.length-1;n++)if(e[n].offset<0){const r=n-1;let s=n+1;for(;s<e.length&&e[s].offset<0;)s++;const a=e[r].offset,o=e[s].offset,l=s-r;for(let u=1;u<l;u++)e[r+u].offset=a+(o-a)*u/l;n=s-1}return e}return t.map((e,n)=>{const r=t.length>1?n/(t.length-1):0;return{color:e.value,offset:r}})}static ParseConic(t){const{orientation:e,colorStops:n=[]}=t,r=Xe/2,s=parseFloat(e.value)/180*Xe-r;return{gradient:"conical",x:.5,y:.5,startAngle:s,endAngle:s+qt,stops:To.processColorStops(n)}}static ParseRadial(t){const{colorStops:e=[]}=t;return{gradient:"radial",x0:.5,y0:.5,x1:.5,y1:.5,r0:0,r1:1,stops:To.processColorStops(e)}}static ParseLinear(t){const{orientation:e,colorStops:n=[]}=t,r=Xe/2;let s=e.type==="angular"?parseFloat(e.value)/180*Xe:0;for(;s<0;)s+=qt;for(;s>=qt;)s-=qt;let a=0,o=0,l=0,u=0;return s<r?(a=0,o=1,l=Math.sin(s),u=o-Math.cos(s)):s<Xe?(a=0,o=0,l=Math.cos(s-r),u=Math.sin(s-r)):s<Xe+r?(a=1,o=0,l=a-Math.sin(s-Xe),u=Math.cos(s-Xe)):(a=1,l=a-Math.cos(s-r-Xe),u-=Math.sin(s-r-Xe)),{gradient:"linear",x0:a,y0:o,x1:l,y1:u,stops:To.processColorStops(n)}}}function Ql(i,t,e){let n=t;const{a:r,b:s,c:a,d:o}=i.currentMatrix,l=Math.sign(r)*Math.sqrt(r*r+s*s),u=Math.sign(o)*Math.sqrt(a*a+o*o);return l+u===0?0:(n=n/Math.abs(l+u)*2*e,n)}function zw(i,t,e,n=0,r=0){var s,a,o,l;if(!t||t===!0)return"black";let u,c;if(J(t))for(let h=0;h<t.length&&(c=t[h],!c);h++);else c=t;if(c=To.Parse(c),typeof c=="string")return c;if(e.AABBBounds&&(!e.attribute||e.attribute.scaleX!==0||e.attribute.scaleY!==0)){const h=e.AABBBounds;let d=h.x2-h.x1,f=h.y2-h.y1,p=h.x1-n,g=h.y1-r;if(e.attribute){const{scaleX:m=1,scaleY:_=1,angle:v=0}=e.attribute;d/=m,f/=_,p/=m,g/=_,(v||m!==1||_!==1)&&(p=(s=e.x1WithoutTransform)!==null&&s!==void 0?s:0,g=(a=e.y1WithoutTransform)!==null&&a!==void 0?a:0,d=(o=e.widthWithoutTransform)!==null&&o!==void 0?o:d,f=(l=e.heightWithoutTransform)!==null&&l!==void 0?l:f)}c.gradient==="linear"?u=BDt(i,c,p,g,d,f):c.gradient==="conical"?u=zDt(i,c,p,g,d,f):c.gradient==="radial"&&(u=FDt(i,c,p,g,d,f))}return u||"orange"}function BDt(i,t,e,n,r,s){var a,o,l,u;const c=i.createLinearGradient(e+((a=t.x0)!==null&&a!==void 0?a:0)*r,n+((o=t.y0)!==null&&o!==void 0?o:0)*s,e+((l=t.x1)!==null&&l!==void 0?l:1)*r,n+((u=t.y1)!==null&&u!==void 0?u:0)*s);return t.stops.forEach(h=>{c.addColorStop(h.offset,h.color)}),c}function FDt(i,t,e,n,r,s){var a,o,l,u,c,h;const d=i.createRadialGradient(e+((a=t.x0)!==null&&a!==void 0?a:.5)*r,n+((o=t.y0)!==null&&o!==void 0?o:.5)*s,Math.max(r,s)*((l=t.r0)!==null&&l!==void 0?l:0),e+((u=t.x1)!==null&&u!==void 0?u:.5)*r,n+((c=t.y1)!==null&&c!==void 0?c:.5)*s,Math.max(r,s)*((h=t.r1)!==null&&h!==void 0?h:.5));return t.stops.forEach(f=>{d.addColorStop(f.offset,f.color)}),d}function zDt(i,t,e,n,r,s){var a,o;const l=i.createConicGradient(e+((a=t.x)!==null&&a!==void 0?a:0)*r,n+((o=t.y)!==null&&o!==void 0?o:0)*s,t.startAngle,t.endAngle);return t.stops.forEach(u=>{l.addColorStop(u.offset,u.color)}),l.GetPattern?l.GetPattern(r+e,s+n,void 0):l}const hF={horizontal:{width:"width",height:"height",left:"left",top:"top",x:"x",y:"y",bottom:"bottom"},vertical:{width:"height",height:"width",left:"top",top:"left",x:"y",y:"x",bottom:"right"}},Ktt={fill:!0,stroke:!1},Nw=/\w|\(|\)|-/,qtt=/[.?!,;:/]/,NDt=/\S/,Ztt=(i,t)=>{let e=t.fontSize||16;switch(t.script){case"super":case"sub":e*=.8}i.setTextStyle({textAlign:"left",textBaseline:t.textBaseline||"alphabetic",fontStyle:t.fontStyle||"",fontWeight:t.fontWeight||"",fontSize:e,fontFamily:t.fontFamily})};function jDt(i,t,e){const n=t&&t.fill||Ktt.fill,{fillOpacity:r=1,opacity:s=1}=t;i.globalAlpha=r*s,i.fillStyle=e?zw(i,n,{AABBBounds:e}):n,Ztt(i,t)}function HDt(i,t){const e=t&&t.stroke||Ktt.stroke;if(!e)return void(i.globalAlpha=0);const{strokeOpacity:n=1,opacity:r=1}=t;i.globalAlpha=n*r,i.lineWidth=t&&typeof t.lineWidth=="number"?t.lineWidth:1,i.strokeStyle=e,Ztt(i,t)}function d1(i,t,e,n,r){if(i.length<=1||!t||t<=0)return 0;const s=vt.graphicUtil.textMeasure;let a=n,o=i.slice(0,a),l=Math.floor(s.measureText(o,e).width),u=i.slice(0,a+1),c=Math.floor(s.measureText(u,e).width);for(;l>t||c<=t;){if(l>t?a--:a++,a>i.length){a=i.length;break}if(a<0){a=0;break}o=i.slice(0,a),l=Math.floor(s.measureText(o,e).width),u=i.slice(0,a+1),c=Math.floor(s.measureText(u,e).width)}return r&&(a=f1(i,a)),a}function f1(i,t,e=!1){let n=t;for(;Nw.test(i[n-1])&&Nw.test(i[n])||qtt.test(i[n]);)if(n--,n<=0)return e?VDt(i,t):t;return n}function VDt(i,t){let e=t;for(;Nw.test(i[e+1])&&Nw.test(i[e])||qtt.test(i[e]);)if(e++,e>=i.length)return e;return e+1}function Zh(i,t,e="actual"){var n;if(i==="")return{ascent:0,height:0,descent:0,width:0};const r=vt.graphicUtil.textMeasure.measureText(i,t),s={ascent:0,height:0,descent:0,width:0},a=e==="actual"?r.actualBoundingBoxAscent:r.fontBoundingBoxAscent,o=e==="actual"?r.actualBoundingBoxDescent:r.fontBoundingBoxDescent;typeof a!="number"||typeof o!="number"?(s.width=Math.floor(r.width),s.height=t.fontSize||0,s.ascent=s.height,s.descent=0):(s.width=Math.floor(r.width),s.height=Math.floor(a+o),s.ascent=Math.floor(a),s.descent=s.height-s.ascent);const l=(n=t.space)!==null&&n!==void 0?n:0;return s.width+=l,s}var WDt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let yD=class{constructor(){this.id="ATextMeasure"}configure(i,t){this.canvas=i.canvas,this.context=i.context,i.bindTextMeasure(this)}_measureTextWithoutAlignBaseline(i,t,e){this.context.setTextStyleWithoutAlignBaseline(t);const n=this.context.measureText(i);return e?this.compatibleMetrics(n,t):n}_measureTextWithAlignBaseline(i,t,e){this.context.setTextStyle(t);const n=this.context.measureText(i);return e?this.compatibleMetrics(n,t):n}compatibleMetrics(i,t){if(i.actualBoundingBoxAscent==null||i.actualBoundingBoxDescent==null||i.fontBoundingBoxAscent==null||i.fontBoundingBoxDescent==null){i={width:i.width};const{ascent:e,descent:n}=this.measureTextBoundADscentEstimate(t);i.actualBoundingBoxAscent=e,i.actualBoundingBoxDescent=n,i.fontBoundingBoxAscent=e,i.fontBoundingBoxDescent=n}if(i.actualBoundingBoxLeft==null||i.actualBoundingBoxRight==null){i={width:i.width,actualBoundingBoxAscent:i.actualBoundingBoxAscent,actualBoundingBoxDescent:i.actualBoundingBoxDescent,fontBoundingBoxAscent:i.fontBoundingBoxAscent,fontBoundingBoxDescent:i.fontBoundingBoxDescent};const{left:e,right:n}=this.measureTextBoundLeftRightEstimate(t);i.actualBoundingBoxLeft=e,i.actualBoundingBoxRight=n}return i}estimate(i,{fontSize:t=Xtt.fontSize}){let e=0,n=0;for(let r=0;r<i.length;r++)i.charCodeAt(r)<128?e++:n++;return{width:~~(.8*e*t+n*t),height:t}}measureTextWidth(i,t,e){return this.context?(e=e??this._measureTextWithoutAlignBaseline(i,t)).width:this.estimate(i,t).width}measureTextBoundsWidth(i,t,e){return this.context?(e=e??this._measureTextWithoutAlignBaseline(i,t)).width:this.estimate(i,t).width}measureTextBoundsLeftRight(i,t,e){return this.context?{left:(e=e??this._measureTextWithAlignBaseline(i,t,!0)).actualBoundingBoxLeft,right:e.actualBoundingBoxRight}:this.measureTextBoundLeftRightEstimate(t)}measureTextPixelHeight(i,t,e){var n;return this.context?(e=e??this._measureTextWithoutAlignBaseline(i,t,!0),Math.abs(e.actualBoundingBoxAscent-e.actualBoundingBoxDescent)):(n=t.fontSize)!==null&&n!==void 0?n:Za.fontSize}measureTextPixelADscent(i,t,e){return this.context?{ascent:(e=e??this._measureTextWithAlignBaseline(i,t,!0)).actualBoundingBoxAscent,descent:e.actualBoundingBoxDescent}:this.measureTextBoundADscentEstimate(t)}measureTextBoundHieght(i,t,e){var n;return this.context?(e=e??this._measureTextWithoutAlignBaseline(i,t,!0),Math.abs(e.fontBoundingBoxAscent-e.fontBoundingBoxDescent)):(n=t.fontSize)!==null&&n!==void 0?n:Za.fontSize}measureTextBoundADscent(i,t,e){return this.context?{ascent:(e=e??this._measureTextWithAlignBaseline(i,t,!0)).fontBoundingBoxAscent,descent:e.fontBoundingBoxDescent}:this.measureTextBoundADscentEstimate(t)}measureTextBoundADscentEstimate(i){var t;const e=(t=i.fontSize)!==null&&t!==void 0?t:Za.fontSize;return{ascent:.79*e,descent:.21*e}}measureTextBoundLeftRightEstimate(i){var t;const e=(t=i.fontSize)!==null&&t!==void 0?t:Za.fontSize,{textAlign:n}=i;return n==="center"?{left:e/2,right:e/2}:n==="right"||n==="end"?{left:e,right:0}:{left:0,right:e}}measureTextPixelADscentAndWidth(i,t,e){if(!this.context)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(t)),{width:this.estimate(i,t).width});const n=this._measureTextWithoutAlignBaseline(i,t,!0);if(e===Sd.actualBounding)return{ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,width:n.width};if(e===Sd.estimate)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(t)),{width:n.width});if(e===Sd.fontBounding){let r=n.fontBoundingBoxAscent,s=n.fontBoundingBoxDescent;if(n.actualBoundingBoxDescent&&s<n.actualBoundingBoxDescent){const a=n.actualBoundingBoxDescent-s;s+=a,r-=a}else if(n.actualBoundingBoxAscent&&r<n.actualBoundingBoxAscent){const a=n.actualBoundingBoxAscent-r;r+=a,s-=a}return{ascent:r,descent:s,width:n.width}}return{ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,width:n.width}}measureText(i,t){return this.context?(this.context.setTextStyleWithoutAlignBaseline(t),this.context.measureText(i)):this.estimate(i,t)}clipTextVertical(i,t,e,n){if(i.length===0)return{verticalList:i,width:0};const{fontSize:r=12}=t;i.forEach(l=>{l.width=l.direction===0?r:this.measureTextWidth(l.text,t)});const s=[];let a=0,o=0;for(;o<i.length&&a+i[o].width<e;o++)a+=i[o].width,s.push(i[o]);if(i[o]&&i[o].text.length>1){const l=this._clipText(i[o].text,t,e-a,0,i[o].text.length-1,"end",!1);if(n&&l.str!==i[o].text){let u="",c=0;for(let f=0;f<o;f++){const p=i[f];u+=p.text,c+=p.text.length}u+=i[o].text;const h=c+l.str.length;let d=f1(u,h);d-=c,d!==l.str.length-1&&(l.str=l.str.substring(0,d),l.width=this.measureTextWidth(l.str,t))}s.push(Object.assign(Object.assign({},i[o]),{text:l.str,width:l.width})),a+=l.width}return{verticalList:s,width:a}}clipText(i,t,e,n,r){if(i.length===0)return{str:"",width:0};let s=this.measureTextWidth(i,t);if(s<=e)return{str:i,width:s};if(s=this.measureTextWidth(i[0],t),s>e)return{str:"",width:0};const a=this._clipText(i,t,e,0,i.length-1,"end",!1);if(n&&a.str!==i){let o=f1(i,a.str.length,r);o!==a.str.length&&(o>a.str.length&&(a.wordBreaked=o,o=a.str.length),a.str=i.substring(0,o),a.width=this.measureTextWidth(a.str,t))}return a}_clipText(i,t,e,n,r,s,a){let o;if(s==="start")o=this._clipTextStart(i,t,e,n,r),a&&(o.result=a+o.str);else if(s==="middle"){const l=this._clipTextMiddle(i,t,e,"","",0,0,1);o={str:"none",width:l.width,result:l.left+a+l.right}}else o=this._clipTextEnd(i,t,e,n,r),a&&(o.result=o.str+a);return o}_clipTextEnd(i,t,e,n,r){if(n===r){Ee.getInstance().warn(`_clipTextEnd${i}, ${n}, ${r}`);const u=i.substring(0,r+1);return{str:u,width:this.measureTextWidth(u,t)}}const s=Math.floor((n+r)/2),a=i.substring(0,s+1),o=this.measureTextWidth(a,t);let l;if(o>e){if(a.length<=1)return{str:"",width:0};const u=i.substring(0,s);return l=this.measureTextWidth(u,t),l<=e?{str:u,width:l}:this._clipTextEnd(i,t,e,n,s)}if(o<e){if(s>=i.length-1)return{str:i,width:this.measureTextWidth(i,t)};const u=i.substring(0,s+2);return l=this.measureTextWidth(u,t),l>=e?{str:a,width:o}:this._clipTextEnd(i,t,e,s,r)}return{str:a,width:o}}_clipTextStart(i,t,e,n,r){const s=Math.ceil((n+r)/2),a=i.substring(s-1,i.length),o=this.measureTextWidth(a,t);let l;if(o>e){if(a.length<=1)return{str:"",width:0};const u=i.substring(s,i.length);return l=this.measureTextWidth(u,t),l<=e?{str:u,width:l}:this._clipTextStart(i,t,e,s,i.length)}if(o<e){if(s<=0)return{str:i,width:this.measureTextWidth(i,t)};const u=i.substring(s-2,i.length);return l=this.measureTextWidth(u,t),l>=e?{str:a,width:o}:this._clipTextStart(i,t,e,n,s)}return{str:a,width:o}}_clipTextMiddle(i,t,e,n,r,s,a,o){const l=i.substring(0,o),u=this.measureTextWidth(l,t);if(u+a>e)return{left:n,right:r,width:s+a};const c=i.substring(i.length-o,i.length),h=this.measureTextWidth(c,t);return u+h>e?{left:l,right:r,width:u+a}:this._clipTextMiddle(i,t,e,l,c,u,h,o+1)}clipTextWithSuffixVertical(i,t,e,n,r,s){if(n==="")return this.clipTextVertical(i,t,e,r);if(i.length===0)return{verticalList:i,width:0};const a=this.clipTextVertical(i,t,e,r);if(a.verticalList.length===i.length&&a.verticalList[a.verticalList.length-1].width===i[i.length-1].width)return a;const o=this.measureTextWidth(n,t);if(o>e)return a;let l;if(e-=o,s==="start"){const u=this.revertVerticalList(i);l=this.clipTextVertical(u,t,e,r);const c=this.revertVerticalList(l.verticalList);c.unshift({text:n,direction:1,width:o}),l.verticalList=c}else if(s==="middle"){const u=this.clipTextVertical(i,t,e/2,r),c=this.revertVerticalList(i),h=this.clipTextVertical(c,t,e/2,r);u.verticalList.push({text:n,direction:1,width:o}),this.revertVerticalList(h.verticalList).forEach(d=>u.verticalList.push(d)),l={verticalList:u.verticalList,width:u.width+h.width}}else l=this.clipTextVertical(i,t,e,r),l.verticalList.push({text:n,direction:1,width:o});return l.width+=o,l}revertVerticalList(i){return i.reverse().map(t=>{const e=t.text.split("").reverse().join("");return Object.assign(Object.assign({},t),{text:e})})}clipTextWithSuffix(i,t,e,n,r,s,a=!1){if(n==="")return this.clipText(i,t,e,r);if(i.length===0)return{str:"",width:0};const o=this.measureTextWidth(i,t);if(!a&&o<=e)return{str:i,width:o};const l=this.measureTextWidth(n,t);if(l>e)return{str:"",width:0};if(a&&o+l<=e)return{str:i+n,width:o+l};e-=l;const u=this._clipText(i,t,e,0,i.length-1,s,n);if(r&&u.str!==i){const c=f1(i,u.str.length);c!==u.str.length&&(u.result=i.substring(0,c),u.width=this.measureTextWidth(u.str,t))}else a&&u.str===i&&(u.result=i+n);return u.str=u.result,u.width+=l,u}};yD=WDt([Rt()],yD);var $Dt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};const bD=Symbol.for("TextMeasureContribution");let xD=class extends yD{constructor(){super(...arguments),this.id="DefaultTextMeasureContribution"}};xD=$Dt([Rt()],xD);const Qtt=Symbol.for("CanvasFactory"),UDt=Symbol.for("Context2dFactory");function SD(i){return te.getNamed(Qtt,vt.global.env)(i)}const Jtt=1e-4,d$=Math.sqrt(3),fS=1/3;function Fc(i){return i>-u0&&i<u0}function tet(i){return i>u0||i<-u0}const kl=[0,0],Ha=[0,0],hg=[0,0];function dg(i,t){return(i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1])}function vu(i,t,e,n){const r=1-n;return r*(r*i+2*n*t)+n*n*e}function yu(i,t,e,n,r){const s=1-r;return s*s*(s*i+3*r*t)+r*r*(r*n+3*s*e)}function GDt(i,t,e,n,r){const s=i-2*t+e,a=2*(t-i),o=i-n;let l=0;if(Fc(s)){if(tet(a)){const u=-o/a;u>=0&&u<=1&&(r[l++]=u)}}else{const u=a*a-4*s*o;if(Fc(u)){const c=-a/(2*s);c>=0&&c<=1&&(r[l++]=c)}else if(u>0){const c=Math.sqrt(u),h=(-a+c)/(2*s),d=(-a-c)/(2*s);h>=0&&h<=1&&(r[l++]=h),d>=0&&d<=1&&(r[l++]=d)}}return l}function YDt(i,t,e){const n=i+e-2*t;return n===0?.5:(i-t)/n}function XDt(i,t,e,n,r,s,a,o,l){let u=0,c=.005,h=1/0;kl[0]=a,kl[1]=o;for(let d=0;d<1;d+=.05){Ha[0]=vu(i,e,r,d),Ha[1]=vu(t,n,s,d);const f=dg(kl,Ha);f<h&&(u=d,h=f)}h=1/0;for(let d=0;d<32&&!(c<Jtt);d++){const f=u-c,p=u+c;Ha[0]=vu(i,e,r,f),Ha[1]=vu(t,n,s,f);const g=dg(Ha,kl);if(f>=0&&g<h)u=f,h=g;else{hg[0]=vu(i,e,r,p),hg[1]=vu(t,n,s,p);const m=dg(hg,kl);p<=1&&m<h?(u=p,h=m):c*=.5}}return Math.sqrt(h)}function KDt(i,t,e,n,r,s,a,o,l,u,c){let h,d,f,p,g=0,m=.005,_=1/0;kl[0]=l,kl[1]=u;for(let v=0;v<1;v+=.05)Ha[0]=yu(i,e,r,a,v),Ha[1]=yu(t,n,s,o,v),f=dg(kl,Ha),f<_&&(g=v,_=f);_=1/0;for(let v=0;v<32&&!(m<Jtt);v++)h=g-m,d=g+m,Ha[0]=yu(i,e,r,a,h),Ha[1]=yu(t,n,s,o,h),f=dg(Ha,kl),h>=0&&f<_?(g=h,_=f):(hg[0]=yu(i,e,r,a,d),hg[1]=yu(t,n,s,o,d),p=dg(hg,kl),d<=1&&p<_?(g=d,_=p):m*=.5);return Math.sqrt(_)}function pS(i){return(i%=qt)<0&&(i+=qt),i}function qDt(i,t,e,n,r,s,a,o,l){if(a===0)return!1;const u=a;return l>t+u&&l>n+u&&l>s+u||l<t-u&&l<n-u&&l<s-u||o>i+u&&o>e+u&&o>r+u||o<i-u&&o<e-u&&o<r-u?!1:XDt(i,t,e,n,r,s,o,l)<=u/2}function ZDt(i,t,e,n,r,s,a,o,l,u,c){if(l===0)return!1;const h=l;return c>t+h&&c>n+h&&c>s+h&&c>o+h||c<t-h&&c<n-h&&c<s-h&&c<o-h||u>i+h&&u>e+h&&u>r+h&&u>a+h||u<i-h&&u<e-h&&u<r-h&&u<a-h?!1:KDt(i,t,e,n,r,s,a,o,u,c)<=h/2}function QDt(i,t,e,n,r,s,a,o,l){if(a===0)return!1;const u=a;o-=i,l-=t;const c=Math.sqrt(o*o+l*l);if(c-u>e||c+u<e)return!1;if(Math.abs(n-r)%qt<1e-4)return!0;if(s){const d=n;n=pS(r),r=pS(d)}else n=pS(n),r=pS(r);n>r&&(r+=qt);let h=Math.atan2(l,o);return h<0&&(h+=qt),h>=n&&h<=r||h+qt>=n&&h+qt<=r}function Wf(i,t,e,n,r,s,a){if(r===0)return!1;const o=r,l=r/2;let u=0,c=i;if(a>t+l&&a>n+l||a<t-l&&a<n-l||s>i+l&&s>e+l||s<i-l&&s<e-l)return!1;if(i===e)return Math.abs(s-i)<=o/2;u=(t-n)/(i-e),c=(i*n-e*t)/(i-e);const h=u*s-a+c;return h*h/(u*u+1)<=o/2*o/2}const u0=1e-4;function JDt(i,t,e,n,r,s){const a=n+3*(t-e)-i,o=3*(e-2*t+i),l=3*(t-i),u=i-r,c=o*o-3*a*l,h=o*l-9*a*u,d=l*l-3*o*u;let f=0;if(Fc(c)&&Fc(h))if(Fc(o))s[0]=0;else{const p=-l/o;p>=0&&p<=1&&(s[f++]=p)}else{const p=h*h-4*c*d;if(Fc(p)){const g=h/c,m=-o/a+g,_=-g/2;m>=0&&m<=1&&(s[f++]=m),_>=0&&_<=1&&(s[f++]=_)}else if(p>0){const g=Math.sqrt(p);let m=c*o+1.5*a*(-h+g),_=c*o+1.5*a*(-h-g);m=m<0?-Math.pow(-m,fS):Math.pow(m,fS),_=_<0?-Math.pow(-_,fS):Math.pow(_,fS);const v=(-o-(m+_))/(3*a);v>=0&&v<=1&&(s[f++]=v)}else{const g=(2*c*o-3*a*h)/(2*Math.sqrt(c*c*c)),m=Math.acos(g)/3,_=Math.sqrt(c),v=Math.cos(m),y=(-o-2*_*v)/(3*a),b=(-o+_*(v+d$*Math.sin(m)))/(3*a),x=(-o+_*(v-d$*Math.sin(m)))/(3*a);y>=0&&y<=1&&(s[f++]=y),b>=0&&b<=1&&(s[f++]=b),x>=0&&x<=1&&(s[f++]=x)}}return f}function tIt(i,t,e,n,r){const s=6*e-12*t+6*i,a=9*t+3*n-3*i-9*e,o=3*t-3*i;let l=0;if(Fc(a)){if(tet(s)){const u=-o/s;u>=0&&u<=1&&(r[l++]=u)}}else{const u=s*s-4*a*o;if(Fc(u))r[0]=-s/(2*a);else if(u>0){const c=Math.sqrt(u),h=(-s+c)/(2*a),d=(-s-c)/(2*a);h>=0&&h<=1&&(r[l++]=h),d>=0&&d<=1&&(r[l++]=d)}}return l}function eIt(i,t){return Math.abs(i-t)<u0}const fs=[-1,-1,-1],La=[-1,-1];function iIt(){const i=La[0];La[0]=La[1],La[1]=i}function nIt(i,t,e,n,r,s,a,o,l,u){if(u>t&&u>n&&u>s&&u>o||u<t&&u<n&&u<s&&u<o)return 0;const c=JDt(t,n,s,o,u,fs);if(c===0)return 0;let h=0,d=-1,f=0,p=0;for(let g=0;g<c;g++){const m=fs[g],_=m===0||m===1?.5:1;yu(i,e,r,a,m)<l||(d<0&&(d=tIt(t,n,s,o,La),La[1]<La[0]&&d>1&&iIt(),f=yu(t,n,s,o,La[0]),d>1&&(p=yu(t,n,s,o,La[1]))),d===2?m<La[0]?h+=f<t?_:-_:m<La[1]?h+=p<f?_:-_:h+=o<p?_:-_:m<La[0]?h+=f<t?_:-_:h+=o<f?_:-_)}return h}function rIt(i,t,e,n,r,s,a,o){if(o>t&&o>n&&o>s||o<t&&o<n&&o<s)return 0;const l=GDt(t,n,s,o,fs);if(l===0)return 0;const u=YDt(t,n,s);if(u>=0&&u<=1){let h=0;const d=vu(t,n,s,u);for(let f=0;f<l;f++){const p=fs[f]===0||fs[f]===1?.5:1;vu(i,e,r,fs[f])<a||(fs[f]<u?h+=d<t?p:-p:h+=s<d?p:-p)}return h}const c=fs[0]===0||fs[0]===1?.5:1;return vu(i,e,r,fs[0])<a?0:s<t?c:-c}function sIt(i,t,e,n,r,s,a,o){if((o-=t)>e||o<-e)return 0;const l=Math.sqrt(e*e-o*o);fs[0]=-l,fs[1]=l;const u=Math.abs(n-r);if(u<1e-4)return 0;if(u>=qt-1e-4){n=0,r=qt;const h=s?1:-1;return a>=fs[0]+i&&a<=fs[1]+i?h:0}if(n>r){const h=n;n=r,r=h}n<0&&(n+=qt,r+=qt);let c=0;for(let h=0;h<2;h++){const d=fs[h];if(d+i>a){let f=Math.atan2(o,d),p=s?1:-1;f<0&&(f=qt+f),(f>=n&&f<=r||f+qt>=n&&f+qt<=r)&&(f>Xe/2&&f<1.5*Xe&&(p=-p),c+=p)}}return c}function EE(i){return Math.round(i/Xe*1e8)/1e8%2*Xe}function aIt(i,t){let e=EE(i[0]);e<0&&(e+=qt);const n=e-i[0];let r=i[1];r+=n,!t&&r-e>=qt?r=e+qt:t&&e-r>=qt?r=e-qt:!t&&e>r?r=e+(qt-EE(e-r)):t&&e<r&&(r=e-(qt-EE(r-e))),i[0]=e,i[1]=r}const S_=[0,0];function eet(i,t,e,n,r){const s=i,a=i.length;let o,l,u=0,c=0,h=0,d=0,f=0;for(let p=0;p<a;p++){const g=s[p],m=p===0;g[0]===Ie.M&&p>1&&(e||(u+=gu(c,h,d,f,n,r))),m&&(c=g[1],h=g[2],d=c,f=h);const _=g[0],v=g[1],y=g[2],b=g[3],x=g[4],S=g[5],w=g[6];let A=x,k=S;S_[0]=A,S_[1]=k,aIt(S_,!!g[6]),A=S_[0],k=S_[1];const C=A,M=k-A,R=!!(1-(g[6]?0:1)),P=(n-v)*b/b+v;switch(_){case Ie.M:d=v,f=y,c=d,h=f;break;case Ie.L:if(e){if(Wf(c,h,v,y,t,n,r))return!0}else u+=gu(c,h,v,y,n,r)||0;c=v,h=y;break;case Ie.C:if(e){if(ZDt(c,h,v,y,b,x,S,w,t,n,r))return!0}else u+=nIt(c,h,v,y,b,x,S,w,n,r)||0;c=S,h=w;break;case Ie.Q:if(e){if(qDt(c,h,v,y,b,x,t,n,r))return!0}else u+=rIt(c,h,v,y,b,x,n,r)||0;c=b,h=x;break;case Ie.A:if(o=Math.cos(C)*b+v,l=Math.sin(C)*b+y,m?(d=o,f=l):u+=gu(c,h,o,l,n,r),e){if(QDt(v,y,b,C,C+M,R,t,P,r))return!0}else u+=sIt(v,y,b,C,C+M,R,P,r);c=Math.cos(C+M)*b+v,h=Math.sin(C+M)*b+y;break;case Ie.R:if(d=c=v,f=h=y,o=d+b,l=f+x,e){if(Wf(d,f,o,f,t,n,r)||Wf(o,f,o,l,t,n,r)||Wf(o,l,d,l,t,n,r)||Wf(d,l,d,f,t,n,r))return!0}else u+=gu(o,f,o,l,n,r),u+=gu(d,l,d,f,n,r);break;case Ie.Z:if(e){if(Wf(c,h,d,f,t,n,r))return!0}else u+=gu(c,h,d,f,n,r);c=d,h=f}}return e||eIt(h,f)||(u+=gu(c,h,d,f,n,r)||0),u!==0}function oIt(i,t,e){return eet(i,0,!1,t,e)}function lIt(i,t,e,n){return eet(i,t,!0,e,n)}class uIt{constructor(){this.pools=[],this.allocatedCanvas=[]}shareCanvas(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}getCommonCanvas(){return this._commonCanvas||(this._commonCanvas=this.allocate({width:100,height:100,dpr:2})),this._commonCanvas}allocate(t){if(!this.pools.length){const n=SD(Object.assign({nativeCanvas:vt.global.createCanvas(t)},t));return this.allocatedCanvas.push(n),n}const e=this.pools.pop();return e.resize(t.width,t.height),e.dpr=t.dpr,e}allocateByObj(t){if(!this.pools.length){const n={width:t.width/t.dpr,height:t.height/t.dpr,dpr:t.dpr},r=SD(Object.assign({nativeCanvas:vt.global.createCanvas(n)},n));return this.allocatedCanvas.push(r),r}const e=this.pools.pop();return e.width=t.width,e.height=t.height,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}const wd=new uIt;var cIt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},hIt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};const jw=Symbol.for("VWindow"),dF=Symbol.for("WindowHandlerContribution");let wD=class extends Ltt{get width(){if(this._handler){const i=this._handler.getWH();return this._width=i.width}return this._width}get height(){if(this._handler){const i=this._handler.getWH();return this._height=i.height}return this._height}get dpr(){return this._handler.getDpr()}constructor(){super(),this.hooks={onChange:new Xr(["x","y","width","height"])},this.active=()=>{const i=this.global;!i.env||this.actived||(te.getNamed(dF,i.env).configure(this,i),this.actived=!0)},this._uid=on.GenAutoIncrementId(),this.global=vt.global,this.postInit()}_nativeAddEventListener(i,t,e){return this._handler.addEventListener(i,t,e)}_nativeRemoveEventListener(i,t,e){return this._handler.removeEventListener(i,t,e)}_nativeDispatchEvent(i){return this._handler.dispatchEvent(i)}postInit(){this.global.hooks.onSetEnv.tap("window",this.active),this.active()}get style(){var i;return(i=this._handler.getStyle())!==null&&i!==void 0?i:{}}set style(i){this._handler.setStyle(i)}create(i){var t,e;this._handler.createWindow(i);const n=this._handler.getWH();this._width=n.width,this._height=n.height,i.viewBox?this.setViewBox(i.viewBox):i.canvasControled!==!1?this.setViewBox({x1:0,y1:0,x2:this._width,y2:this._height}):this.setViewBox({x1:0,y1:0,x2:(t=i.width)!==null&&t!==void 0?t:this._width,y2:(e=i.height)!==null&&e!==void 0?e:this._height}),this.title=this._handler.getTitle(),this.resizable=!0}setWindowHandler(i){this._handler=i}setDpr(i){return this._handler.setDpr(i)}resize(i,t){return this._handler.resizeWindow(i,t)}configure(){throw new Error("")}release(){return this.global.hooks.onSetEnv.unTap("window",this.active),this.clearAllEventListeners(),this._handler.releaseWindow()}getContext(){return this._handler.getContext()}getNativeHandler(){return this._handler.getNativeHandler()}getImageBuffer(i){return this._handler.getImageBuffer?this._handler.getImageBuffer(i):null}getBoundingClientRect(){return this._handler.getBoundingClientRect()}getContainer(){return this._handler.container}clearViewBox(i){this._handler.clearViewBox(i)}setViewBox(i){this._handler.setViewBox(i)}setViewBoxTransform(i,t,e,n,r,s){this._handler.setViewBoxTransform(i,t,e,n,r,s)}getViewBox(){return this._handler.getViewBox()}getViewBoxTransform(){return this._handler.getViewBoxTransform()}pointTransform(i,t){const e=this._handler.getViewBox(),n={x:i,y:t};return this._handler.getViewBoxTransform().transformPoint({x:i,y:t},n),n.x-=e.x1,n.y-=e.y1,n}hasSubView(){const i=this._handler.getViewBox();return!(i.x1===0&&i.y1===0&&sn(this.width,i.width())&&sn(this.height,i.height()))}isVisible(i){return this._handler.isVisible(i)}onVisibleChange(i){return this._handler.onVisibleChange(i)}getTopLeft(i){return this._handler.getTopLeft(i)}};wD=cIt([Rt(),hIt("design:paramtypes",[])],wD);var iet=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},net=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},f$=function(i,t){return function(e,n){t(e,n,i)}};let AD=class{get canvas(){return this.tryInitCanvas(),this._canvas}get context(){return this.tryInitCanvas(),this._context}constructor(i){this.contributions=i,this.configured=!1,this.global=vt.global,this._textMeasureMap=new Map,this.global.hooks.onSetEnv.tap("graphic-util",(t,e,n)=>{this.configured=!1,this.configure(n,e)})}get textMeasure(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}getTextMeasureInstance(i){return i?this._textMeasureMap.get(i)||this.textMeasure:this.textMeasure}configure(i,t){this.configured||(this.contributions.getContributions().forEach(e=>{e.configure(this,t)}),this.configured=!0)}tryInitCanvas(){if(!this._canvas){const i=wd.shareCanvas();this._canvas=i,this._context=i.getContext("2d")}}bindTextMeasure(i){this._textMeasure&&i.id!=="DefaultTextMeasureContribution"||(this._textMeasure=i),this._textMeasureMap.has(i.id)||this._textMeasureMap.set(i.id,i)}measureText(i,t,e="native"){var n;this.configure(this.global,this.global.env);const r=this.global.measureTextMethod;this.global.measureTextMethod=e;const s={width:this._textMeasure.measureTextWidth(i,t),height:(n=t.fontSize)!==null&&n!==void 0?n:Za.fontSize};return this.global.measureTextMethod=r,s}createTextMeasureInstance(i,t,e){return this.configure(this.global,this.global.env),new Zr(Object.assign({defaultFontParams:{fontFamily:Za.fontFamily,fontSize:Za.fontSize},getCanvasForMeasure:e||(()=>this.canvas),getTextBounds:void 0,specialCharSet:`-/: .,@%'"~`+Zr.ALPHABET_CHAR_SET+Zr.ALPHABET_CHAR_SET.toUpperCase()},t??{}),i)}drawGraphicToCanvas(i,t,e){if(!t.defaultLayer)return null;const n=te.get(jw),r=i.AABBBounds,s=r.width(),a=r.height(),o=-r.x1,l=-r.y1;n.create({viewBox:{x1:o,y1:l,x2:r.x2,y2:r.y2},width:s,height:a,canvas:e,dpr:t.window.dpr,canvasControled:!0,offscreen:!0,title:""});const u=t.params.optimize.disableCheckGraphicWidthOutRange;t.params.optimize.disableCheckGraphicWidthOutRange=!0,t.defaultLayer.getNativeHandler().drawTo(n,[i],{transMatrix:n.getViewBoxTransform(),viewBox:n.getViewBox(),stage:t,layer:t.defaultLayer,renderService:t.renderService,background:"transparent",clear:!0,updateBounds:!1}),t.params.optimize.disableCheckGraphicWidthOutRange=u;const c=n.getNativeHandler();return c.nativeCanvas?c.nativeCanvas:null}};AD=iet([Rt(),f$(0,ge(_n)),f$(0,jn(bD)),net("design:paramtypes",[Object])],AD);var Sc;(function(i){i[i.transform=0]="transform",i[i.matrix=1]="matrix"})(Sc||(Sc={}));const Bn=new di;let kD=class{constructor(){this.matrix=new di}init(i){return this.mode=Sc.transform,this.originTransform=i,this.matrix.reset(),this}fromMatrix(i,t){return this.mode=Sc.matrix,this.outSourceMatrix=i,this.outTargetMatrix=t,this}scaleMatrix(i,t,e){const n=this.outSourceMatrix;if(Bn.setValue(n.a,n.b,n.c,n.d,n.e,n.f),this.outTargetMatrix.reset(),e){const{x:r,y:s}=e;this.outTargetMatrix.translate(r,s),this.outTargetMatrix.scale(i,t),this.outTargetMatrix.translate(-r,-s)}else this.outTargetMatrix.scale(i,t);return this.outTargetMatrix.multiply(Bn.a,Bn.b,Bn.c,Bn.d,Bn.e,Bn.f),this}rotateMatrix(i,t){const e=this.outSourceMatrix;if(Bn.setValue(e.a,e.b,e.c,e.d,e.e,e.f),this.outTargetMatrix.reset(),t){const{x:n,y:r}=t;this.outTargetMatrix.translate(n,r),this.outTargetMatrix.rotate(i),this.outTargetMatrix.translate(-n,-r)}else this.outTargetMatrix.rotate(i);return this.outTargetMatrix.multiply(Bn.a,Bn.b,Bn.c,Bn.d,Bn.e,Bn.f),this}scale(i,t,e){return this.mode===Sc.matrix?this.scaleMatrix(i,t,e):this}rotate(i,t){return this.mode===Sc.matrix?this.rotateMatrix(i,t):this}translateMatrix(i,t){const e=this.outSourceMatrix;return Bn.setValue(e.a,e.b,e.c,e.d,e.e,e.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(i,t),this.outTargetMatrix.multiply(Bn.a,Bn.b,Bn.c,Bn.d,Bn.e,Bn.f),this}translate(i,t){return this.mode===Sc.matrix?this.translateMatrix(i,t):this}simplify(i){return this.mode===Sc.matrix?this.simplifyMatrix(i):this}simplifyMatrix(i){return this}};kD=iet([Rt(),net("design:paramtypes",[])],kD);const Gr={arc:wDt,area:ADt,circle:kDt,line:TDt,path:PDt,symbol:DDt,text:Xtt,rect:ODt,polygon:EDt,star:RDt,richtext:hu,richtextIcon:IDt,image:l0,group:CDt,glyph:MDt},RE=Object.keys(Gr);function dIt(){return{arc:Object.assign({},Gr.arc),area:Object.assign({},Gr.area),circle:Object.assign({},Gr.circle),line:Object.assign({},Gr.line),path:Object.assign({},Gr.path),symbol:Object.assign({},Gr.symbol),text:Object.assign({},Gr.text),rect:Object.assign({},Gr.rect),polygon:Object.assign({},Gr.polygon),star:Object.assign({},Gr.star),richtext:Object.assign({},Gr.richtext),richtextIcon:Object.assign({},Gr.richtextIcon),image:Object.assign({},Gr.image),group:Object.assign({},Gr.group),glyph:Object.assign({},Gr.glyph)}}function gS(i,t){Object.keys(t).forEach(e=>{i[e]=t[e]})}const p$=dIt();class c0{constructor(){this.initTheme(),this.dirty=!1}initTheme(){this._defaultTheme={},RE.forEach(t=>{this._defaultTheme[t]=Object.create(p$[t])}),this.combinedTheme=this._defaultTheme}getTheme(t){if(!t)return this.combinedTheme;if(!this.dirty)return this.combinedTheme;let e={};const n=this.getParentWithTheme(t);return n&&(e=n.theme),this.applyTheme(t,e),this.combinedTheme}getParentWithTheme(t){for(;t.parent;)if((t=t.parent).theme)return t;return null}applyTheme(t,e,n=!1){if(this.dirty){const r=this.getParentWithTheme(t);if(r){const s=r.theme;(s.dirty||n)&&s.applyTheme(r,e,!0)}this.userTheme?this.doCombine(r&&r.theme.combinedTheme):(r?this.combinedTheme=r.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,Ee.getInstance().warn("")),this.dirty=!1)}return this.combinedTheme}doCombine(t){const e=this.userTheme,n=this.combinedTheme;RE.forEach(r=>{const s=Object.create(p$[r]);t&&t[r]&&gS(s,t[r]),n[r]&&gS(s,n[r]),e[r]&&gS(s,e[r]),this.combinedTheme[r]=s}),e.common&&RE.forEach(r=>{gS(this.combinedTheme[r],e.common)}),this.dirty=!1}setTheme(t,e){let n=this.userTheme;n?Object.keys(t).forEach(r=>{n[r]?Object.assign(n[r],t[r]):n[r]=Object.assign({},t[r])}):n=t,this.userTheme=n,this.dirty=!0,this.dirtyChildren(e)}resetTheme(t,e){this.userTheme=t,this.dirty=!0,this.dirtyChildren(e)}dirtyChildren(t){t.forEachChildren(e=>{e.isContainer&&(e.theme&&(e.theme.dirty=!0),this.dirtyChildren(e))})}}const ret=new c0;function le(i,t){return i.glyphHost?le(i.glyphHost):t?(i.isContainer,t):fIt(i)||i.attachedThemeGraphic&&le(i.attachedThemeGraphic)||ret.getTheme()}function fIt(i){let t;if(t=i.isContainer?i:i.parent,t){for(;t&&!t.theme;)t=t.parent;return t?(t.theme||t.createTheme(),t.theme.getTheme(t)):ret.getTheme()}return null}var pIt=function(i,t,e,n){return new(e||(e=Promise))(function(r,s){function a(u){try{l(n.next(u))}catch(c){s(c)}}function o(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof e?c:new e(function(h){h(c)})).then(a,o)}l((n=n.apply(i,t||[])).next())})};let gIt=class extends kh{get previousSibling(){return this._prev}get nextSibling(){return this._next}get children(){return this.getChildren()}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get count(){return this._count}get childrenCount(){return this._idMap?this._idMap.size:0}constructor(){super(),this._uid=on.GenAutoIncrementId(),this._firstChild=null,this._lastChild=null,this.parent=null,this._count=1}forEachChildren(t,e=!1){if(e){let n=this._lastChild,r=0;for(;n;){if(t(n,r++))return;n=n._prev}}else{let n=this._firstChild,r=0;for(;n;){if(t(n,r++))return;n=n._next}}}forEachChildrenAsync(t,e=!1){return pIt(this,void 0,void 0,function*(){if(e){let n=this._lastChild,r=0;for(;n;){let s=t(n,r++);if(s.then&&(s=yield s),s)return;n=n._prev}}else{let n=this._firstChild,r=0;for(;n;){let s=t(n,r++);if(s.then&&(s=yield s),s)return;n=n._next}}})}forEach(t){return this.forEachChildren(t)}appendChild(t,e=!0){if(this._uid===t._uid)return null;if(!e&&t.isAncestorsOf(this))throw new Error("Node::appendChildappend");return t.parent&&t.parent.removeChild(t),t.parent=this,this._lastChild?(this._lastChild._next=t,t._prev=this._lastChild,this._lastChild=t):(this._firstChild=this._lastChild=t,t._prev=t._next=null),this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this.setCount(t.count),this._structEdit=!0,t}appendChildArrHighPerformance(t,e=!1){return console.error(""),t}insertBefore(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw new Error("Node::insertBeforeinsert");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,t._prev=e._prev,e._prev?e._prev._next=t:this._firstChild=t,e._prev=t,t._next=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertAfter(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw new Error("Node::insertAfterinsert");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,e._next?(e._next._prev=t,t._next=e._next):this._lastChild=t,e._next=t,t._prev=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertInto(t,e){if(!this._ignoreWarn&&this._nodeList&&Ee.getInstance().warn("insertIntoKeepIdxinsertInto"),e>=this.childrenCount)return this.appendChild(t);if(this===t)return null;if(t.isAncestorsOf(this))throw new Error("Node::insertBeforeinsert");if(t.parent&&t.parent.removeChild(t),t.parent=this,e===0)t._next=this._firstChild,this._firstChild&&(this._firstChild._prev=t),t._prev=null,this._firstChild=t;else{let n=this._firstChild;for(let r=0;r<e;r++){if(!n)return null;r>0&&(n=n._next)}if(!n)return null;t._next=n._next,t._prev=n,n._next=t,t._next&&(t._next._prev=t)}return this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t}insertIntoKeepIdx(t,e){if(this._nodeList||(this._nodeList=this.children),this._nodeList[e]){const s=this._nodeList[e];return this._nodeList.splice(e,0,t),this.insertBefore(t,s)}let n;this._nodeList[e]=t;for(let s=e-1;s>=0&&(n=this._nodeList[s],!n);s--);if(n)return n._next?this.insertBefore(t,n._next):this.appendChild(t);this._ignoreWarn=!0;const r=this.insertInto(t,0);return this._ignoreWarn=!1,r}removeChild(t){if(!this._idMap||!this._idMap.has(t._uid))return null;if(this._idMap.delete(t._uid),this._nodeList){const e=this._nodeList.findIndex(n=>n===t);e>=0&&this._nodeList.splice(e,1)}return t._prev?t._prev._next=t._next:this._firstChild=t._next,t._next?t._next._prev=t._prev:this._lastChild=t._prev,t.parent=null,t._prev=null,t._next=null,this._structEdit=!0,this.setCount(-t.count),t}delete(){this.parent&&this.parent.removeChild(this)}removeAllChild(t){if(!this._idMap)return;this._nodeList&&(this._nodeList.length=0);let e=this._firstChild;for(;e;){const n=e._next;e.parent=null,e._prev=null,e._next=null,e=e._next,e=n}this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}replaceChild(t,e){throw new Error("")}find(t,e=!1){let n=null;return this.forEachChildren((r,s)=>!(r===this||!t(r,s))&&(n=r,!0)),e&&this.forEachChildren(r=>{if(r.isContainer){const s=r.find(t,!0);if(s)return n=s,!0}return!1}),n}findAll(t,e=!1){let n=[];return this.forEachChildren((r,s)=>{r!==this&&t(r,s)&&n.push(r)}),e&&this.forEachChildren(r=>{if(r.isContainer){const s=r.findAll(t,!0);s.length&&(n=n.concat(s))}}),n}getElementById(t){return this.find(e=>e.id===t,!0)}findChildById(t){return this.getElementById(t)}findChildByUid(t){return this._idMap&&this._idMap.get(t)||null}getElementsByName(t){return this.findAll(e=>e.name===t,!0)}findChildrenByName(t){return this.getElementsByName(t)}getElementsByType(t){return this.findAll(e=>e.type===t,!0)}getChildByName(t,e=!1){return this.find(n=>n.name===t,e)}getChildAt(t){let e=this._firstChild;if(!e)return null;for(let n=0;n<t;n++){if(!e._next)return null;e=e._next}return e}at(t){return this.getChildAt(t)}containNode(t){if(!this._idMap)return!1;if(this._idMap.has(t._uid))return!0;let e=this._firstChild;for(;e;){if(e.containNode(t))return!0;e=e._next}return!1}getRootNode(){let t=this.parent;for(;t?.parent;)t=t.parent;return t||this}hasChildNodes(){return this._firstChild!==null}addChild(t){return this.appendChild(t)}add(t){return this.appendChild(t)}getChildren(){const t=[];let e=this._firstChild;for(;e;)t.push(e),e=e._next;return t}isChildOf(t){return!!this.parent&&this.parent._uid===t._uid}isParentOf(t){return t.isChildOf(this)}isDescendantsOf(t){let e=this.parent;if(!e)return!1;do{if(e._uid===t._uid)return!0;e=e.parent}while(e!==null);return!1}isAncestorsOf(t){return t.isDescendantsOf(this)}getAncestor(t){throw new Error("")}setAllDescendantsProps(t,e){let n=this._firstChild;for(;n;)n[t]=e,n.setAllDescendantsProps(t,e),n=n._next}setCount(t){this._count+=t;let e=this.parent;if(e)do e._count+=t,e=e.parent;while(e!==null)}clone(){throw new Error("")}cloneTo(t){throw new Error("")}getParent(){return this.parent}del(t){return this.removeChild(t)}addEventListener(t,e,n){const r=Vn(n,!0)&&n||ee(n)&&n.capture,s=ee(n)&&n.once,a=it(e)?void 0:e;return t=r?`${t}capture`:t,e=it(e)?e:e.handleEvent,s?super.once(t,e,a):super.on(t,e,a),this}on(t,e,n){return this.addEventListener(t,e,n)}removeEventListener(t,e,n){const r=Vn(n,!0)&&n||ee(n)&&n.capture,s=it(e)?void 0:e;t=r?`${t}capture`:t,e=it(e)?e:e.handleEvent;const a=ee(n)&&n.once;return super.off(t,e,s,a),this}off(t,e,n){return this.removeEventListener(t,e,n)}once(t,e,n){return ee(n)?(n.once=!0,this.addEventListener(t,e,n)):this.addEventListener(t,e,{once:!0})}removeAllEventListeners(){return super.removeAllListeners(),this}removeAllListeners(){return this.removeAllEventListeners()}dispatchEvent(t,...e){return super.emit(t.type,t,...e),!t.defaultPrevented}emit(t,e){return this.dispatchEvent(t,e)}release(){this.removeAllListeners()}};class Ob{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get x(){return this.canvas.x}get y(){return this.canvas.y}get canvasX(){return this.canvas.x}get canvasY(){return this.canvas.y}get viewX(){return this.viewport.x}get viewY(){return this.viewport.y}constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Ob.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={x:0,y:0},this.page={x:0,y:0},this.canvas={x:0,y:0},this.viewport={x:0,y:0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.composedDetailPath(),this.path}composedDetailPath(){return this.pickParams&&this.pickParams.graphic?(this.detailPath=this.path.slice(),this._composedDetailPath(this.pickParams)):this.detailPath=this.path.slice(),this.detailPath}_composedDetailPath(t){if(t&&t.graphic){const e=t.graphic;if(e.stage){const n=e.stage.eventSystem.manager.propagationPath(e);this.detailPath.push(n),this._composedDetailPath(t.params)}}}preventDefault(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault()}catch{this.nativeEvent.preventDefault&&it(this.nativeEvent.preventDefault)&&this.nativeEvent.preventDefault()}this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation()}catch{this.nativeEvent.stopPropagation&&it(this.nativeEvent.stopPropagation)&&this.nativeEvent.stopPropagation()}this.propagationStopped=!0}initEvent(){}initUIEvent(){}clone(){throw new Error("Method not implemented.")}}class Hw extends Ob{constructor(){super(...arguments),this.client={x:0,y:0},this.movement={x:0,y:0},this.offset={x:0,y:0},this.global={x:0,y:0},this.screen={x:0,y:0}}get clientX(){return this.client.x}get clientY(){return this.client.y}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,n,r,s,a,o,l,u,c,h,d,f,p,g){throw new Error("Method not implemented.")}}class aa extends Hw{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}clone(){var t,e,n;const r=new aa(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,(t=this.manager)===null||t===void 0||t.copyPointerData(this,r),(e=this.manager)===null||e===void 0||e.copyMouseData(this,r),(n=this.manager)===null||n===void 0||n.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();const s=this.composedDetailPath();return r.detailPath=s&&s.slice(),r.type=this.type,r}}class eh extends Hw{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}clone(){var t,e,n;const r=new eh(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,(t=this.manager)===null||t===void 0||t.copyWheelData(this,r),(e=this.manager)===null||e===void 0||e.copyMouseData(this,r),(n=this.manager)===null||n===void 0||n.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();const s=this.composedDetailPath();return r.detailPath=s&&s.slice(),r.type=this.type,r}}eh.DOM_DELTA_PIXEL=0,eh.DOM_DELTA_LINE=1,eh.DOM_DELTA_PAGE=2;let fM=class extends Ob{constructor(t,e){super(),this.type=t,this.detail=e}};const set="*",ud=typeof performance=="object"&&performance.now?performance:Date;function pc(i){return i==="mouse"||i==="pen"}class mIt{constructor(t,e){this.dispatch=new kh,this.cursorTarget=null,this.pauseNotify=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.onPointerDown=(n,r)=>{if(!(n instanceof aa))return void Ee.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const s=this.createPointerEvent(n,n.type,r);if(this.dispatchEvent(s,"pointerdown"),s.pointerType==="touch")this.dispatchEvent(s,"touchstart");else if(pc(s.pointerType)){const a=s.button===2;this.dispatchEvent(s,a?"rightdown":"mousedown")}this.trackingData(n.pointerId).pressTargetsByButton[n.button]=s.composedPath(),this.freeEvent(s)},this.onPointerMove=(n,r)=>{var s,a;if(!(n instanceof aa))return void Ee.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const o=this.createPointerEvent(n,n.type,r),l=pc(o.pointerType),u=this.trackingData(n.pointerId),c=this.findMountedTarget(u.overTargets);if(u.overTargets&&c&&c!==this.rootTarget&&c!==o.target){const h=n.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(n,h,c||void 0);if(this.dispatchEvent(d,"pointerout"),l&&this.dispatchEvent(d,"mouseout"),!o.composedPath().includes(c)){const f=this.createPointerEvent(n,"pointerleave",c||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!o.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),l&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}if(c!==o.target){const h=n.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(o,h);this.dispatchEvent(d,"pointerover"),l&&this.dispatchEvent(d,"mouseover");let f=c?.parent;for(;f&&f!==this.rootTarget.parent&&f!==o.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const p=this.clonePointerEvent(o,"pointerenter");p.eventPhase=p.AT_TARGET;let g=p.target;const m=new Set;let _=c;for(;_&&_!==this.rootTarget;)m.add(_),_=_.parent;for(;g&&g!==c&&g!==this.rootTarget.parent;)m.has(g)||(p.currentTarget=g,this.notifyTarget(p),l&&this.notifyTarget(p,"mouseenter")),g=g.parent;this.freeEvent(p)}this.freeEvent(d)}this.dispatchEvent(o,"pointermove"),o.pointerType==="touch"&&this.dispatchEvent(o,"touchmove"),l&&(this.dispatchEvent(o,"mousemove"),this.cursorTarget=o.target,this.cursor=((a=(s=o.target)===null||s===void 0?void 0:s.attribute)===null||a===void 0?void 0:a.cursor)||this.rootTarget.getCursor()),u.overTargets=o.composedPath(),this.freeEvent(o)},this.onPointerOver=(n,r)=>{var s,a;if(!(n instanceof aa))return void Ee.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const o=this.trackingData(n.pointerId),l=this.createPointerEvent(n,n.type,r),u=pc(l.pointerType);this.dispatchEvent(l,"pointerover"),u&&this.dispatchEvent(l,"mouseover"),l.pointerType==="mouse"&&(this.cursorTarget=l.target,this.cursor=((a=(s=l.target)===null||s===void 0?void 0:s.attribute)===null||a===void 0?void 0:a.cursor)||this.rootTarget.getCursor());const c=this.clonePointerEvent(l,"pointerenter");for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==this.rootTarget.parent;)c.currentTarget=c.target,this.notifyTarget(c),u&&this.notifyTarget(c,"mouseenter"),c.target=c.target.parent;o.overTargets=l.composedPath(),this.freeEvent(l),this.freeEvent(c)},this.onPointerOut=(n,r)=>{if(!(n instanceof aa))return void Ee.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const s=this.trackingData(n.pointerId);if(s.overTargets){const a=pc(n.pointerType),o=this.findMountedTarget(s.overTargets),l=this.createPointerEvent(n,"pointerout",o||void 0);this.dispatchEvent(l),a&&this.dispatchEvent(l,"mouseout");const u=this.createPointerEvent(n,"pointerleave",o||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==this.rootTarget.parent;)u.currentTarget=u.target,this.notifyTarget(u),a&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;s.overTargets=[],this.freeEvent(l),this.freeEvent(u)}this.cursorTarget=null,this.cursor=""},this.onPointerUp=(n,r)=>{var s;if(!(n instanceof aa))return void Ee.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const a=ud.now(),o=this.createPointerEvent(n,n.type,r);if(this.dispatchEvent(o,"pointerup"),o.pointerType==="touch")this.dispatchEvent(o,"touchend");else if(pc(o.pointerType)){const h=o.button===2;this.dispatchEvent(o,h?"rightup":"mouseup")}const l=this.trackingData(n.pointerId),u=this.findMountedTarget(l.pressTargetsByButton[n.button]);let c=u;if(u&&!o.composedPath().includes(u)){let h=u;for(;h&&!o.composedPath().includes(h);){if(o.currentTarget=h,this.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch")this.notifyTarget(o,"touchendoutside");else if(pc(o.pointerType)){const d=o.button===2;this.notifyTarget(o,d?"rightupoutside":"mouseupoutside")}h=h.parent}delete l.pressTargetsByButton[n.button],c=h}if(c){const h=this.clonePointerEvent(o,"click");h.target=c,h.path=[],h.detailPath=[],l.clicksByButton[n.button]||(l.clicksByButton[n.button]={clickCount:0,target:h.target,timeStamp:a});const d=l.clicksByButton[n.button];d.target===h.target&&a-d.timeStamp<((s=this._config.clickInterval)!==null&&s!==void 0?s:200)?++d.clickCount:d.clickCount=1,d.target=h.target,d.timeStamp=a,h.detail=d.clickCount,pc(h.pointerType)?(this.dispatchEvent(h,"click"),d.clickCount===2&&this.dispatchEvent(h,"dblclick")):h.pointerType==="touch"&&this._config.supportsTouchEvents&&(this.dispatchEvent(h,"tap"),d.clickCount===2&&this.dispatchEvent(h,"dbltap")),this.dispatchEvent(h,"pointertap"),this.freeEvent(h)}this.freeEvent(o)},this.onPointerUpOutside=(n,r)=>{if(!(n instanceof aa))return void Ee.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");const s=this.trackingData(n.pointerId),a=this.findMountedTarget(s.pressTargetsByButton[n.button]),o=this.createPointerEvent(n,n.type,r);if(a){let l=a;for(;l;)o.currentTarget=l,this.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch"?this.notifyTarget(o,"touchendoutside"):pc(o.pointerType)&&this.notifyTarget(o,o.button===2?"rightupoutside":"mouseupoutside"),l=l.parent;delete s.pressTargetsByButton[n.button]}this.freeEvent(o)},this.onWheel=(n,r)=>{if(!(n instanceof eh))return void Ee.getInstance().warn("EventManager cannot map a non-wheel event as a wheel event");const s=this.createWheelEvent(n,r);this.dispatchEvent(s),this.freeEvent(s)},this.rootTarget=t,this.mappingTable={},this._config=Object.assign({clickInterval:200},e),this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((n,r)=>n.priority-r.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){var e,n,r,s,a,o,l;if(!this.rootTarget)return;const u=this.mappingTable[t.type];let c;const h=`${t.canvasX}-${t.canvasY}`;if(!((e=this._prePointTargetCache)===null||e===void 0)&&e[h]&&(!((r=(n=this._prePointTargetCache)===null||n===void 0?void 0:n[h])===null||r===void 0)&&r.stage)&&((a=(s=this._prePointTargetCache)===null||s===void 0?void 0:s[h])===null||a===void 0?void 0:a.stage.renderCount)===((o=this._prePointTargetCache)===null||o===void 0?void 0:o.stageRenderCount)?c=this._prePointTargetCache[h]:(c=this.pickTarget(t.viewX,t.viewY,t),t.pickParams||(this._prePointTargetCache={[h]:c,stageRenderCount:(l=c?.stage.renderCount)!==null&&l!==void 0?l:-1})),u)for(let d=0,f=u.length;d<f;d++)u[d].fn(t,c);else Ee.getInstance().warn(`[EventManager]: Event mapping not defined for ${t.type}`)}propagate(t,e){if(!t.target)return;const n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,s=n.length-1;r<s;r++)if(t.currentTarget=n[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let r=n.length-2;r>=0;r--)if(t.currentTarget=n[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}propagationPath(t){const e=[t];for(let n=0;n<2048&&t!==this.rootTarget&&t.parent;n++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}notifyTarget(t,e){if(this.pauseNotify)return;e=e??t.type;const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let n=1;n<t.length&&t[n].parent===e;n++)e=t[n];return e}createPointerEvent(t,e,n){var r,s;const a=this.allocateEvent(aa);return this.copyPointerData(t,a),this.copyMouseData(t,a),this.copyData(t,a),a.nativeEvent=t.nativeEvent,a.originalEvent=t,a.target=n||this.pickTarget((r=a.viewX)!==null&&r!==void 0?r:a.global.x,(s=a.viewY)!==null&&s!==void 0?s:a.global.y,a),typeof e=="string"&&(a.type=e),a}createWheelEvent(t,e){var n,r;const s=this.allocateEvent(eh);return this.copyWheelData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=e||this.pickTarget((n=s.viewX)!==null&&n!==void 0?n:s.global.x,(r=s.viewY)!==null&&r!==void 0?r:s.global.y,s),s}clonePointerEvent(t,e){const n=this.allocateEvent(aa);n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice();const r=t.composedDetailPath();return n.detailPath=r&&r.slice(),n.type=e??n.type,n}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof aa&&e instanceof aa&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof Hw&&e instanceof Hw&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.metaKey=t.metaKey,["client","movement","canvas","screen","global","offset","viewport"].forEach(n=>{e[n].x=t[n].x,e[n].y=t[n].y}))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=ud.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.x=t.layer.x,e.layer.y=t.layer.y,e.page.x=t.page.x,e.page.y=t.page.y,e.pickParams=t.pickParams}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){var e;this.eventPool.has(t)||this.eventPool.set(t,[]);const n=((e=this.eventPool.get(t))===null||e===void 0?void 0:e.pop())||new t(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.detailPath=[],n.target=null,n}freeEvent(t){var e;if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventManager!");const n=t.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),(e=this.eventPool.get(n))===null||e===void 0||e.push(t)}notifyListeners(t,e){const n=t.currentTarget._events[e];if(n)if("fn"in n)n.once&&t.currentTarget.removeEventListener(e,n.fn,{once:!0}),n.fn.call(n.context,t);else for(let r=0,s=n.length;r<s&&!t.propagationImmediatelyStopped;r++)n[r].once&&t.currentTarget.removeEventListener(e,n[r].fn,{once:!0}),n[r].fn.call(n[r].context,t);this.emitDelegation(t,e)}emitDelegation(t,e){const n=t.currentTarget._events[set];if(n)if("fn"in n)n.fn.call(n.context,t,e);else for(let r=0,s=n.length;r<s&&!t.propagationImmediatelyStopped;r++)n[r].fn.call(n[r].context,t,e)}pickTarget(t,e,n){let r;const s=this.rootTarget.pick(t,e);return r=s&&s.graphic?s.graphic:s&&s.group?s.group:this.rootTarget.AABBBounds.contains(t,e)?this.rootTarget:null,n&&(n.pickParams=s.params),r}release(){this.dispatch.removeAllListeners(),this.eventPool.clear(),this.rootTarget=null,this.mappingTable=null,this.mappingState=null,this.cursorTarget=null}}const _It={dispatchEvent(i){var t;if(!(i instanceof Ob))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return i.defaultPrevented=!1,i.path=[],i.detailPath&&(i.detailPath=[]),i.target=this,(t=i?.manager)===null||t===void 0||t.dispatchEvent(i),!i.defaultPrevented},emit(i,t){return this.dispatchEvent(new fM(i,t))}},vIt={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class yIt{constructor(t){this.resolution=1,this.onPointerDown=c=>{if(this.supportsTouchEvents&&c.pointerType==="touch")return;const h=this.normalizeToPointerData(c);this.autoPreventDefault&&h[0].isNormalized&&(c.cancelable||!("cancelable"in c))&&c.preventDefault();for(let d=0,f=h.length;d<f;d++){const p=h[d],g=this.bootstrapEvent(this.rootPointerEvent,p);this.manager.mapEvent(g)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerMove=c=>{if(this.supportsTouchEvents&&c.pointerType==="touch"||this.isEventOutsideOfTargetElement(c))return;const h=this.normalizeToPointerData(c);for(let d=0,f=h.length;d<f;d++){const p=this.bootstrapEvent(this.rootPointerEvent,h[d]);this.manager.mapEvent(p)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerUp=c=>{if(this.supportsTouchEvents&&c.pointerType==="touch")return;const h=this.isEventOutsideOfTargetViewPort(c)?"outside":"",d=this.normalizeToPointerData(c);for(let f=0,p=d.length;f<p;f++){const g=this.bootstrapEvent(this.rootPointerEvent,d[f]);g.type+=h,this.manager.mapEvent(g)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerOverOut=c=>{if(this.supportsTouchEvents&&c.pointerType==="touch")return;const h=this.normalizeToPointerData(c);for(let d=0,f=h.length;d<f;d++){const p=this.bootstrapEvent(this.rootPointerEvent,h[d]);this.manager.mapEvent(p)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onWheel=c=>{const h=this.normalizeWheelEvent(c);this.manager.mapEvent(h)};const{targetElement:e,resolution:n,rootNode:r,global:s,autoPreventDefault:a=!1,clickInterval:o,supportsTouchEvents:l=s.supportsTouchEvents,supportsPointerEvents:u=s.supportsPointerEvents}=t;this.manager=new mIt(r,{clickInterval:o,supportsTouchEvents:l}),this.globalObj=s,this.supportsPointerEvents=u,this.supportsTouchEvents=l,this.supportsMouseEvents=s.supportsMouseEvents,this.applyStyles=s.applyStyles,this.autoPreventDefault=a,this.eventsAdded=!1,this.rootPointerEvent=new aa,this.rootWheelEvent=new eh,this.cursorStyles={default:"inherit",pointer:"pointer"},this.resolution=n,this.setTargetElement(e)}release(){this.removeEvents(),this.manager&&this.manager.release(),this.domElement=null,this.manager=null,this.globalObj=null}setCursor(t,e){if(!e&&!this.manager.rootTarget.window._handler.canvas.controled)return;t||(t="default");const{applyStyles:n,domElement:r}=this;if(this.currentCursor===t)return;this.currentCursor=t;const s=this.cursorStyles[t];s?typeof s=="string"&&n?r.style.cursor=s:typeof s=="function"?s(t):typeof s=="object"&&n&&Object.assign(r.style,s):n&&Ht(t)&&!kPt(this.cursorStyles,t)&&(r.style.cursor=t)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.addEventListener("pointermove",this.onPointerMove,!0),t.addEventListener("pointerup",this.onPointerUp,!0)):(e.addEventListener("pointermove",this.onPointerMove,!0),e.addEventListener("pointerup",this.onPointerUp,!0)),e.addEventListener("pointerdown",this.onPointerDown,!0),e.addEventListener("pointerleave",this.onPointerOverOut,!0),e.addEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.addEventListener("mousemove",this.onPointerMove,!0),t.addEventListener("mouseup",this.onPointerUp,!0)):(e.addEventListener("mousemove",this.onPointerMove,!0),e.addEventListener("mouseup",this.onPointerUp,!0)),e.addEventListener("mousedown",this.onPointerDown,!0),e.addEventListener("mouseout",this.onPointerOverOut,!0),e.addEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.addEventListener("touchstart",this.onPointerDown,!0),e.addEventListener("touchend",this.onPointerUp,!0),e.addEventListener("touchmove",this.onPointerMove,!0)),e.addEventListener("wheel",this.onWheel,{capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.removeEventListener("pointermove",this.onPointerMove,!0),t.removeEventListener("pointerup",this.onPointerUp,!0)):(e.removeEventListener("pointermove",this.onPointerMove,!0),e.removeEventListener("pointerup",this.onPointerUp,!0)),e.removeEventListener("pointerdown",this.onPointerDown,!0),e.removeEventListener("pointerleave",this.onPointerOverOut,!0),e.removeEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.removeEventListener("mousemove",this.onPointerMove,!0),t.removeEventListener("mouseup",this.onPointerUp,!0)):(e.removeEventListener("mousemove",this.onPointerMove,!0),e.removeEventListener("mouseup",this.onPointerUp,!0)),e.removeEventListener("mousedown",this.onPointerDown,!0),e.removeEventListener("mouseout",this.onPointerOverOut,!0),e.removeEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.removeEventListener("touchstart",this.onPointerDown,!0),e.removeEventListener("touchend",this.onPointerUp,!0),e.removeEventListener("touchmove",this.onPointerMove,!0)),e.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapToViewportPoint(t){return this.domElement.pointTransform?this.domElement.pointTransform(t.x,t.y):t}mapToCanvasPoint(t){var e,n;const r=(e=this.globalObj)===null||e===void 0?void 0:e.mapToCanvasPoint(t,this.domElement);if(r)return r;let s=0,a=0;if(t.changedTouches){const l=(n=t.changedTouches[0])!==null&&n!==void 0?n:{};s=l.clientX||0,a=l.clientY||0}else s=t.clientX||0,a=t.clientY||0;const o=this.domElement.getBoundingClientRect();return{x:s-o.left,y:a-o.top}}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t.changedTouches&&t.changedTouches.length)for(let n=0,r=t.changedTouches.length;n<r;n++){const s=t.changedTouches[n];Hi(s.button)&&(s.button=0),Hi(s.buttons)&&(s.buttons=1),Hi(s.isPrimary)&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),Hi(s.width)&&(s.width=s.radiusX||1),Hi(s.height)&&(s.height=s.radiusY||1),Hi(s.tiltX)&&(s.tiltX=0),Hi(s.tiltY)&&(s.tiltY=0),Hi(s.pointerType)&&(s.pointerType="touch"),Hi(s.pointerId)&&(s.pointerId=s.identifier||0),Hi(s.pressure)&&(s.pressure=s.force||.5),Hi(s.twist)&&(s.twist=0),Hi(s.tangentialPressure)&&(s.tangentialPressure=0),Hi(s.layerX)&&(s.layerX=s.offsetX=s.clientX),Hi(s.layerY)&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,e.push(s)}else if(this.globalObj.supportsMouseEvents&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof PointerEvent))e.push(t);else{const n=t;Hi(n.isPrimary)&&(n.isPrimary=!0),Hi(n.width)&&(n.width=1),Hi(n.height)&&(n.height=1),Hi(n.tiltX)&&(n.tiltX=0),Hi(n.tiltY)&&(n.tiltY=0),Hi(n.pointerType)&&(n.pointerType="mouse"),Hi(n.pointerId)&&(n.pointerId=1),Hi(n.pressure)&&(n.pressure=.5),Hi(n.twist)&&(n.twist=0),Hi(n.tangentialPressure)&&(n.tangentialPressure=0),n.isNormalized=!0,e.push(n)}return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;const{x:n,y:r}=this.mapToCanvasPoint(t);e.canvas.x=n,e.canvas.y=r,e.global.x=n,e.global.y=r,e.offset.x=n,e.offset.y=r;const{x:s,y:a}=this.mapToViewportPoint(e);return e.viewport.x=s,e.viewport.y=a,e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);const{x:n,y:r}=this.mapToCanvasPoint(e);t.canvas.x=n,t.canvas.y=r,t.global.x=n,t.global.y=r,t.offset.x=n,t.offset.y=r;const{x:s,y:a}=this.mapToViewportPoint(t);return t.viewport.x=s,t.viewport.y=a,t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=vIt[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=ud.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.shiftKey=e.shiftKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null}isEventOutsideOfTargetViewPort(t){if(this.isEventOutsideOfTargetElement(t))return!0;if(this.domElement.getViewBox){const e=this.mapToViewportPoint(this.mapToCanvasPoint(t)),n=this.domElement.getViewBox(),r=n.width(),s=n.height();return!(e.x<r&&e.y<s&&e.x>0&&e.y>0)}return!1}isEventOutsideOfTargetElement(t){let e=t.target;return t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]),e!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}pauseTriggerEvent(){this.manager.pauseNotify=!0}resumeTriggerEvent(){this.manager.pauseNotify=!1}}class Ai{static GetImage(t,e){var n;const r=Ai.cache.get(t);r?r.loadState==="fail"?vt.global.getRequestAnimationFrame()(()=>{e.imageLoadFail(t)}):r.loadState==="init"||r.loadState==="loading"?(n=r.waitingMark)===null||n===void 0||n.push(e):e&&e.imageLoadSuccess(t,r.data):Ai.loadImage(t,e)}static GetSvg(t,e){var n;let r=Ai.cache.get(t);r?r.loadState==="fail"?vt.global.getRequestAnimationFrame()(()=>{e.imageLoadFail(t)}):r.loadState==="init"||r.loadState==="loading"?(n=r.waitingMark)===null||n===void 0||n.push(e):e&&e.imageLoadSuccess(t,r.data):(r={type:"image",loadState:"init"},Ai.cache.set(t,r),r.dataPromise=vt.global.loadSvg(t),r.dataPromise?(r.waitingMark=[e],r.dataPromise.then(s=>{var a;r.loadState=s?.data?"success":"fail",r.data=s?.data,(a=r.waitingMark)===null||a===void 0||a.map((o,l)=>{s?.data?(r.loadState="success",r.data=s.data,o.imageLoadSuccess(t,s.data)):(r.loadState="fail",o.imageLoadFail(t))}),r.waitingMark&&(r.waitingMark=[])})):(r.loadState="fail",e.imageLoadFail(t)))}static GetFile(t,e){let n=Ai.cache.get(t);return n?n.loadState==="fail"?Promise.reject():n.loadState==="init"||n.loadState==="loading"?n.dataPromise.then(r=>r.data):Promise.resolve(n.data):(n={type:e,loadState:"init"},Ai.cache.set(t,n),e==="arrayBuffer"?n.dataPromise=vt.global.loadArrayBuffer(t):e==="blob"?n.dataPromise=vt.global.loadBlob(t):e==="json"&&(n.dataPromise=vt.global.loadJson(t)),n.dataPromise.then(r=>r.data))}static loading(){setTimeout(()=>{if(!Ai.isLoading&&Ai.toLoadAueue.length){Ai.isLoading=!0;const t=Ai.toLoadAueue.splice(0,10),e=[];t.forEach(n=>{const{url:r,marks:s}=n,a={type:"image",loadState:"init"};if(Ai.cache.set(r,a),a.dataPromise=vt.global.loadImage(r),a.dataPromise){a.waitingMark=s;const o=a.dataPromise.then(l=>{var u;a.loadState=l?.data?"success":"fail",a.data=l?.data,(u=a.waitingMark)===null||u===void 0||u.map((c,h)=>{l?.data?(a.loadState="success",a.data=l.data,c.imageLoadSuccess(r,l.data)):(a.loadState="fail",c.imageLoadFail(r))}),a.waitingMark&&(a.waitingMark=[])});e.push(o)}else a.loadState="fail",s.forEach(o=>o.imageLoadFail(r))}),Promise.all(e).then(()=>{Ai.isLoading=!1,this.onLoadSuccessCb.forEach(n=>n()),Ai.loading()}).catch(n=>{console.error(n),Ai.isLoading=!1,this.onLoadSuccessCb.forEach(r=>r()),Ai.loading()})}},0)}static loadImage(t,e){const n=g$(t,Ai.toLoadAueue);if(n!==-1)return Ai.toLoadAueue[n].marks.push(e),void Ai.loading();Ai.toLoadAueue.push({url:t,marks:[e]}),Ai.loading()}static improveImageLoading(t){const e=g$(t,Ai.toLoadAueue);if(e!==-1){const n=Ai.toLoadAueue.splice(e,1);Ai.toLoadAueue.unshift(n[0])}}static onLoadSuccess(t){this.onLoadSuccessCb.push(t)}}function g$(i,t){for(let e=0;e<t.length;e++)if(t[e].url===i)return e;return-1}Ai.cache=new Map,Ai.isLoading=!1,Ai.toLoadAueue=[],Ai.onLoadSuccessCb=[];var m$;(function(i){i[i.Top=1]="Top",i[i.Right=2]="Right",i[i.Bottom=4]="Bottom",i[i.Left=8]="Left",i[i.ALL=15]="ALL"})(m$||(m$={}));const lu=[!1,!1,!1,!1],bIt=i=>{var t;let e=!0;if(Vn(i,!0)){for(let n=0;n<4;n++)lu[n]=i,e&&(e=!((t=lu[n])!==null&&t!==void 0&&!t));e=i}else if(Array.isArray(i))for(let n=0;n<4;n++)lu[n]=!!i[n],e&&(e=!!lu[n]);else lu[0]=!1,lu[1]=!1,lu[2]=!1,lu[3]=!1;return{isFullStroke:e,stroke:lu}},w_=[0,0,0,0],CD=i=>i?J(i)?i.length===0?0:i.length===1?i[0]:i.length===2?(w_[0]=i[0],w_[2]=i[0],w_[1]=i[1],w_[3]=i[1],w_):i:i:0,$f=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],mS=[1,2,3,0,1,2,3,0];function MD(i,t,e,n){for(;i>=qt;)i-=qt;for(;i<0;)i+=qt;for(;i>t;)t+=qt;$f[0].x=e,$f[1].y=e,$f[2].x=-e,$f[3].y=-e;const r=Math.ceil(i/Ua)%4,s=Math.ceil(t/Ua)%4;if(n.add(Ri(i)*e,fi(i)*e),n.add(Ri(t)*e,fi(t)*e),r!==s||t-i>Xe){let a=!1;for(let o=0;o<mS.length;o++)if(a||r!==mS[o]){if(a&&s===mS[o])break;if(a){const l=$f[mS[o]];n.add(l.x,l.y)}}else{a=!0;const l=$f[r];n.add(l.x,l.y)}}}function Vw(i,t,e){const{x:n,y:r}=cW(i.x,i.y,t.x,t.y,e),{x:s,y:a}=cW(i.x1,i.y1,t.x1,t.y1,e),o=new ci(n,r,s,a);return o.defined=t.defined,o}function pM(i,t,e){if(!i||!t)return[];Array.isArray(i)||(i=[i]),Array.isArray(t)||(t=[t]);let n=[];if(i.length>t.length){n=t.map(r=>{const s=new ci(r.x,r.y,r.x1,r.y1);return s.defined=r.defined,s});for(let r=0;r<t.length;r++)n[r]=Vw(i[r],t[r],e)}else{n=t.map(r=>{const s=new ci(r.x,r.y,r.x1,r.y1);return s.defined=r.defined,s});for(let r=0;r<i.length;r++)n[r]=Vw(i[r],t[r],e)}return n}function _S(i,t){if(J(i)){let e;for(let n=0;n<i.length&&e===void 0;n++)e=i[n][t];return e}return i[t]}class gM{constructor(t=gM.TimeOut){this.durations=[],this.timeout=t,this.lastDate=0,this.durationsListThreshold=30}call(t){return this.lastDate=Date.now(),setTimeout(()=>{this.appendDuration(Date.now()-this.lastDate),t(0)},this.timeout,!0)}clear(t){clearTimeout(t)}appendDuration(t){this.durations.push(t),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce((e,n)=>e+n,0)/this.durations.length,1e3/60),1e3/30)}}gM.TimeOut=1e3/60;const _$=new gM,xIt=(i,t)=>Ht(i)&&i[i.length-1]==="%"?t*(Number.parseFloat(i.substring(0,i.length-1))/100):i,mM=(i,t)=>{const e=xIt(i,t);return isNaN(e)?e:Math.max(t,e)};class In{bounds(t,e){if(yt(t)){const n=t/2;e.x1=-n,e.x2=n,e.y1=-n,e.y2=n}else e.x1=-t[0]/2,e.x2=t[0]/2,e.y1=-t[1]/2,e.y2=t[1]/2}parseSize(t){return yt(t)?t:Math.min(t[0],t[1])}}function v$(i,t,e,n,r){return r?i.arc(e,n,t,0,Lr,!1,r):i.arc(e,n,t,0,Lr),!1}class SIt extends In{constructor(){super(...arguments),this.type="circle",this.pathStr="M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0"}draw(t,e,n,r,s){return v$(t,this.parseSize(e)/2,n,r,s)}drawOffset(t,e,n,r,s,a){return v$(t,this.parseSize(e)/2+s,n,r,a)}drawToSvgPath(t,e,n,r){const s=this.parseSize(t)/2;return`M ${e-s}, ${n} a ${s},${s} 0 1,0 ${2*s},0 a ${s},${s} 0 1,0 -${2*s},0`}}const wIt=new SIt;function AIt(i,t,e,n,r){return i.moveTo(-3*t+e,-t+n,r),i.lineTo(-t+e,-t+n,r),i.lineTo(-t+e,-3*t+n,r),i.lineTo(t+e,-3*t+n,r),i.lineTo(t+e,-t+n,r),i.lineTo(3*t+e,-t+n,r),i.lineTo(3*t+e,t+n,r),i.lineTo(t+e,t+n,r),i.lineTo(t+e,3*t+n,r),i.lineTo(-t+e,3*t+n,r),i.lineTo(-t+e,t+n,r),i.lineTo(-3*t+e,t+n,r),i.closePath(),!0}function kIt(i,t,e,n,r,s){return i.moveTo(-3*t+e-r,-t+n-r,s),i.lineTo(-t+e-r,-t+n-r,s),i.lineTo(-t+e-r,-3*t+n-r,s),i.lineTo(t+e+r,-3*t+n-r,s),i.lineTo(t+e+r,-t+n-r,s),i.lineTo(3*t+e+r,-t+n-r,s),i.lineTo(3*t+e+r,t+n+r,s),i.lineTo(t+e+r,t+n+r,s),i.lineTo(t+e+r,3*t+n+r,s),i.lineTo(-t+e-r,3*t+n+r,s),i.lineTo(-t+e-r,t+n+r,s),i.lineTo(-3*t+e-r,t+n+r,s),i.closePath(),!0}class CIt extends In{constructor(){super(...arguments),this.type="cross",this.pathStr="M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z"}draw(t,e,n,r,s){return AIt(t,this.parseSize(e)/6,n,r,s)}drawOffset(t,e,n,r,s,a){return kIt(t,this.parseSize(e)/6,n,r,s,a)}}const MIt=new CIt;function OE(i,t,e,n,r){return i.moveTo(e,n-t,r),i.lineTo(t+e,n,r),i.lineTo(e,n+t,r),i.lineTo(e-t,n,r),i.closePath(),!0}class TIt extends In{constructor(){super(...arguments),this.type="diamond",this.pathStr="M-0.5,0L0,-0.5L0.5,0L0,0.5Z"}draw(t,e,n,r,s){return OE(t,this.parseSize(e)/2,n,r,s)}drawFitDir(t,e,n,r,s){return OE(t,this.parseSize(e)/2,n,r,s)}drawOffset(t,e,n,r,s,a){return OE(t,this.parseSize(e)/2+s,n,r,a)}}const PIt=new TIt;function y$(i,t,e,n){const r=2*t;return i.rect(e-t,n-t,r,r),!1}class EIt extends In{constructor(){super(...arguments),this.type="square",this.pathStr="M-0.5,-0.5h1v1h-1Z"}draw(t,e,n,r){return y$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s){return y$(t,this.parseSize(e)/2+s,n,r)}}const RIt=new EIt;function b$(i,t,e,n,r=0){return i.moveTo(e+t+2*r,t+n+r),i.lineTo(e-t-2*r,t+n+r),i.lineTo(e,n-t-2*r),i.closePath(),!0}class aet extends In{constructor(){super(...arguments),this.type="triangleUp",this.pathStr="M0.5,0.5 L-0.5,0.5 L0,-0.5 Z"}draw(t,e,n,r){return b$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s){return b$(t,this.parseSize(e)/2,n,r,s)}}const OIt=new aet;class DIt extends aet{constructor(){super(...arguments),this.type="triangle"}}const IIt=new DIt,oet=Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10),LIt=Math.sin(Lr/10)*oet,BIt=-Math.cos(Lr/10)*oet;function x$(i,t,e,n){const r=LIt*t,s=BIt*t;i.moveTo(e,-t+n),i.lineTo(r+e,s+n);for(let a=1;a<5;++a){const o=Lr*a/5,l=Math.cos(o),u=Math.sin(o);i.lineTo(u*t+e,-l*t+n),i.lineTo(l*r-u*s+e,u*r+l*s+n)}return i.closePath(),!0}class FIt extends In{constructor(){super(...arguments),this.type="star",this.pathStr="M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z"}draw(t,e,n,r){return x$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s){return x$(t,this.parseSize(e)/2+s,n,r)}}const zIt=new FIt,NIt=ro(3);function S$(i,t,e,n){const r=t,s=r/NIt,a=s/5,o=t;return i.moveTo(0+e,-r+n),i.lineTo(s/2+e,n),i.lineTo(a/2+e,n),i.lineTo(a/2+e,o+n),i.lineTo(-a/2+e,o+n),i.lineTo(-a/2+e,n),i.lineTo(-s/2+e,n),i.closePath(),!0}class jIt extends In{constructor(){super(...arguments),this.type="arrow",this.pathStr="M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z"}draw(t,e,n,r){return S$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s){return S$(t,this.parseSize(e)/2+s,n,r)}}const HIt=new jIt;function w$(i,t,e,n){const r=2*t;return i.moveTo(e,-t+n),i.lineTo(r/3/2+e,t+n),i.lineTo(-r/3/2+e,t+n),i.closePath(),!0}class VIt extends In{constructor(){super(...arguments),this.type="wedge",this.pathStr="M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z"}draw(t,e,n,r){return w$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s){return w$(t,this.parseSize(e)/2+s,n,r)}}const WIt=new VIt;function A$(i,t,e,n){return i.moveTo(-t+e,n),i.lineTo(e,t+n),!1}class $It extends In{constructor(){super(...arguments),this.type="stroke",this.pathStr=""}draw(t,e,n,r){return A$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s){return A$(t,this.parseSize(e)/2+s,n,r)}}const UIt=new $It,Oa=-.5,Da=ro(3)/2,k$=1/ro(12);function C$(i,t,e,n){const r=t/2,s=t*k$,a=r,o=t*k$+t,l=-a,u=o;return i.moveTo(r+e,s+n),i.lineTo(a+e,o+n),i.lineTo(l+e,u+n),i.lineTo(Oa*r-Da*s+e,Da*r+Oa*s+n),i.lineTo(Oa*a-Da*o+e,Da*a+Oa*o+n),i.lineTo(Oa*l-Da*u+e,Da*l+Oa*u+n),i.lineTo(Oa*r+Da*s+e,Oa*s-Da*r+n),i.lineTo(Oa*a+Da*o+e,Oa*o-Da*a+n),i.lineTo(Oa*l+Da*u+e,Oa*u-Da*l+n),i.closePath(),!1}class GIt extends In{constructor(){super(...arguments),this.type="wye",this.pathStr="M0.25 0.14433756729740646L0.25 0.6443375672974064L-0.25 0.6443375672974064L-0.25 0.14433756729740643L-0.6830127018922193 -0.10566243270259357L-0.4330127018922193 -0.5386751345948129L0 -0.28867513459481287L0.4330127018922193 -0.5386751345948129L0.6830127018922193 -0.10566243270259357Z"}draw(t,e,n,r){return C$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s){return C$(t,this.parseSize(e)/2+s,n,r)}}const YIt=new GIt;function M$(i,t,e,n,r){return i.moveTo(-t+e-2*r,n),i.lineTo(t+e+r,t+n+2*r),i.lineTo(t+e+r,n-t-2*r),i.closePath(),!0}class XIt extends In{constructor(){super(...arguments),this.type="triangleLeft",this.pathStr="M-0.5,0 L0.5,0.5 L0.5,-0.5 Z"}draw(t,e,n,r){return M$(t,this.parseSize(e)/2,n,r,0)}drawOffset(t,e,n,r,s){return M$(t,this.parseSize(e)/2,n,r,s)}}const KIt=new XIt;function T$(i,t,e,n,r=0){return i.moveTo(e-t-r,t+n+2*r),i.lineTo(t+e+2*r,n),i.lineTo(e-t-r,n-t-2*r),i.closePath(),!0}class qIt extends In{constructor(){super(...arguments),this.type="triangleRight",this.pathStr="M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z"}draw(t,e,n,r){return T$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s){return T$(t,this.parseSize(e)/2,n,r,s)}}const ZIt=new qIt;function P$(i,t,e,n,r=0){return i.moveTo(e-t-2*r,n-t-r),i.lineTo(e+t+2*r,n-t-r),i.lineTo(e,n+t+2*r),i.closePath(),!0}class QIt extends In{constructor(){super(...arguments),this.type="triangleDown",this.pathStr="M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z"}draw(t,e,n,r){return P$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s){return P$(t,this.parseSize(e)/2,n,r,s)}}const JIt=new QIt,TD=ro(3);function E$(i,t,e,n){const r=t*TD;return i.moveTo(e,n+-r/3*2),i.lineTo(t+e,n+r),i.lineTo(e-t,n+r),i.closePath(),!0}class tLt extends In{constructor(){super(...arguments),this.type="thinTriangle",this.pathStr="M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z"}draw(t,e,n,r){return E$(t,this.parseSize(e)/2/TD,n,r)}drawOffset(t,e,n,r,s){return E$(t,this.parseSize(e)/2/TD+s,n,r)}}const eLt=new tLt;function R$(i,t,e,n){const r=2*t;return i.moveTo(t+e,n-r),i.lineTo(e-t,n),i.lineTo(t+e,r+n),!0}class iLt extends In{constructor(){super(...arguments),this.type="arrow2Left",this.pathStr="M 0.25 -0.5 L -0.25 0 l 0.25 0.5"}draw(t,e,n,r){return R$(t,this.parseSize(e)/4,n,r)}drawOffset(t,e,n,r,s){return R$(t,this.parseSize(e)/4+s,n,r)}}const nLt=new iLt;function O$(i,t,e,n){const r=2*t;return i.moveTo(e-t,n-r),i.lineTo(e+t,n),i.lineTo(e-t,r+n),!0}class rLt extends In{constructor(){super(...arguments),this.type="arrow2Right",this.pathStr="M -0.25 -0.5 l 0.25 0 l -0.25 0.5"}draw(t,e,n,r){return O$(t,this.parseSize(e)/4,n,r)}drawOffset(t,e,n,r,s){return O$(t,this.parseSize(e)/4+s,n,r)}}const sLt=new rLt;function D$(i,t,e,n){const r=2*t;return i.moveTo(e-r,n+t),i.lineTo(e,n-t),i.lineTo(e+r,n+t),!0}class aLt extends In{constructor(){super(...arguments),this.type="arrow2Up",this.pathStr="M -0.5 0.25 L 0 -0.25 l 0.5 0.25"}draw(t,e,n,r){return D$(t,this.parseSize(e)/4,n,r)}drawOffset(t,e,n,r,s){return D$(t,this.parseSize(e)/4+s,n,r)}}const oLt=new aLt;function I$(i,t,e,n){const r=2*t;return i.moveTo(e-r,n-t),i.lineTo(e,n+t),i.lineTo(e+r,n-t),!0}class lLt extends In{constructor(){super(...arguments),this.type="arrow2Down",this.pathStr="M -0.5 -0.25 L 0 0.25 l 0.5 -0.25"}draw(t,e,n,r){return I$(t,this.parseSize(e)/4,n,r)}drawOffset(t,e,n,r,s){return I$(t,this.parseSize(e)/4+s,n,r)}}const uLt=new lLt;function L$(i,t,e,n,r){return i.moveTo(e,n-t),i.lineTo(e,n+t),!0}class cLt extends In{constructor(){super(...arguments),this.type="lineV",this.pathStr="M0,-0.5L0,0.5"}draw(t,e,n,r,s){return L$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s,a){return L$(t,this.parseSize(e)/2+s,n,r)}drawToSvgPath(t,e,n,r){const s=this.parseSize(t)/2;return`M ${e}, ${n-s} L ${e},${n+s}`}}const hLt=new cLt;function B$(i,t,e,n,r){return i.moveTo(e-t,n),i.lineTo(e+t,n),!0}class dLt extends In{constructor(){super(...arguments),this.type="lineH",this.pathStr="M-0.5,0L0.5,0"}draw(t,e,n,r,s){return B$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s,a){return B$(t,this.parseSize(e)/2+s,n,r)}drawToSvgPath(t,e,n,r){const s=this.parseSize(t)/2;return`M ${e-s}, ${n} L ${e+s},${n}`}}const fLt=new dLt;function F$(i,t,e,n,r){return i.moveTo(e-t,n-t),i.lineTo(e+t,n+t),i.moveTo(e+t,n-t),i.lineTo(e-t,n+t),!0}class pLt extends In{constructor(){super(...arguments),this.type="close",this.pathStr="M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5"}draw(t,e,n,r,s){return F$(t,this.parseSize(e)/2,n,r)}drawOffset(t,e,n,r,s,a){return F$(t,this.parseSize(e)/2+s,n,r)}drawToSvgPath(t,e,n,r){const s=this.parseSize(t)/2;return`M ${e-s}, ${n-s} L ${e+s},${n+s} M ${e+s}, ${n-s} L ${e-s},${n+s}`}}const gLt=new pLt;function z$(i,t,e,n){return i.rect(e-t[0]/2,n-t[1]/2,t[0],t[1]),!1}function N$(i,t,e,n){const r=t,s=t/2;return i.rect(e-r/2,n-s/2,r,s),!1}class mLt extends In{constructor(){super(...arguments),this.type="rect",this.pathStr="M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z"}draw(t,e,n,r){return yt(e)?N$(t,e,n,r):z$(t,e,n,r)}drawWithClipRange(t,e,n,r,s,a,o){yt(e)&&(e=[e,e/2]);const l=2*(e[0]+e[1])*s,u=[{x:n+e[0]/2,y:r-e[1]/2},{x:n+e[0]/2,y:r+e[1]/2},{x:n-e[0]/2,y:r+e[1]/2},{x:n-e[0]/2,y:r-e[1]/2}];let c=0,h=u[3];t.moveTo(h.x,h.y);for(let d=0;d<u.length;d++){const f=u[d],p=Math.sqrt((f.x-h.x)*(f.x-h.x)+(f.y-h.y)*(f.y-h.y));if(c+p>l){const g=(f.x-h.x)*(l-c)/p,m=(f.y-h.y)*(l-c)/p;t.lineTo(h.x+g,h.y+m);break}t.lineTo(f.x,f.y),h=f,c+=p}return!1}drawOffset(t,e,n,r,s){return yt(e)?N$(t,e+2*s,n,r):z$(t,[e[0]+2*s,e[1]+2*s],n,r)}}const _Lt=new mLt,A_=new Gi;class j${constructor(t,e,n=!1){this.pathStr="",this.type=t,J(e)?this.svgCache=e:this.path=e,this.isSvg=n}drawOffset(t,e,n,r,s,a,o){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(l=>{t.beginPath(),qu(l.path.commandList,t,n,r,e,e),o&&o(l.path,l.attribute)}),!1):(qu(this.path.commandList,t,n,r,e+s,e+s),!1)}draw(t,e,n,r,s,a){return e=this.parseSize(e),this.drawOffset(t,e,n,r,0,s,a)}parseSize(t){return yt(t)?t:Math.min(t[0],t[1])}drawWithClipRange(t,e,n,r,s,a,o){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(l=>{l.path.drawWithClipRange(t,e,n,r,s),o&&o(l.path,l.attribute)}),!1):(this.path.drawWithClipRange(t,e,n,r,s),!1)}bounds(t,e){if(t=this.parseSize(t),this.isSvg)return this.svgCache?(e.clear(),void this.svgCache.forEach(({path:n})=>{A_.x1=n.bounds.x1*t,A_.y1=n.bounds.y1*t,A_.x2=n.bounds.x2*t,A_.y2=n.bounds.y2*t,e.union(A_)})):void 0;this.path.bounds&&(e.x1=this.path.bounds.x1*t,e.y1=this.path.bounds.y1*t,e.x2=this.path.bounds.x2*t,e.y2=this.path.bounds.y2*t)}}const vLt=[wIt,MIt,PIt,RIt,eLt,IIt,zIt,HIt,WIt,UIt,YIt,KIt,ZIt,OIt,JIt,nLt,sLt,oLt,uLt,_Lt,hLt,fLt,gLt],Ww={};vLt.forEach(i=>{Ww[i.type]=i});const yLt={arrowLeft:"M 0.25 -0.5 L -0.25 0 l 0.5 0.5",arrowRight:"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5",rectRound:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",roundLine:"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z"};function bLt(i,t){const e=[];let n=t.exec(i);for(;n;){const r=[];r.startIndex=t.lastIndex-n[0].length;const s=n.length;for(let a=0;a<s;a++)r.push(n[a]);e.push(r),n=t.exec(i)}return e}class DE{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}function H$(i,t,e,n){const r=i.indexOf(t,e);if(r===-1)throw new Error(n);return r+t.length-1}function xLt(i,t,e=">"){let n,r="";for(let s=t;s<i.length;s++){let a=i[s];if(n)a===n&&(n="");else if(a==='"'||a==="'")n=a;else if(a===e[0]){if(!e[1])return{data:r,index:s};if(i[s+1]===e[1])return{data:r,index:s}}else a==="	"&&(a=" ");r+=a}}function V$(i,t,e,n=">"){const r=xLt(i,t+1,n);if(!r)return;let s=r.data;const a=r.index,o=s.search(/\s/);let l=s,u=!0;return o!==-1&&(l=s.substr(0,o).replace(/\s\s*$/,""),s=s.substr(o+1)),{tagName:l,tagExp:s,closeIndex:a,attrExpPresent:u,rawTagName:l}}const SLt=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");class wLt{constructor(t){this.currentNode=null,this.options=t,this.tagsNodeStack=[],this.docTypeEntities={}}addChild(t,e,n){const r=e.tagname;typeof r=="string"&&(e.tagname=r),t.addChild(e)}buildAttributesMap(t,e,n){const r={};if(!t)return;const s=bLt(t,SLt),a=s.length;for(let o=0;o<a;o++){const l=s[o][1],u=s[o][4],c=l;l&&(r[c]=u===void 0||(isNaN(u)?u:Number(u)))}return r}parseXml(t){t=t.replace(/\r\n?/g,`
`);const e=new DE("!xml");let n=e,r="",s="";for(let a=0;a<t.length;a++)if(t[a]==="<")if(t[a+1]==="/"){const o=H$(t,">",a,"Closing Tag is not closed."),l=s.lastIndexOf(".");s=s.substring(0,l),n=this.tagsNodeStack.pop(),n&&n.child&&r&&n.child[n.child.length-1][":@"]&&(n.child[n.child.length-1][":@"].text=r),r="",a=o}else if(t[a+1]==="?")a=V$(t,a,!1,"?>").closeIndex+1;else if(t.substr(a+1,3)==="!--")a=H$(t,"-->",a+4,"Comment is not closed.");else{const o=V$(t,a);let l=o.tagName,u=o.tagExp;const c=o.attrExpPresent,h=o.closeIndex;if(l!==e.tagname&&(s+=s?"."+l:l),u.length>0&&u.lastIndexOf("/")===u.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),s=s.substr(0,s.length-1),u=l):u=u.substr(0,u.length-1);const d=new DE(l);l!==u&&c&&(d[":@"]=this.buildAttributesMap(u,s,l)),this.addChild(n,d,s),s=s.substr(0,s.lastIndexOf("."))}else{const d=new DE(l);this.tagsNodeStack.push(n),l!==u&&c&&(d[":@"]=this.buildAttributesMap(u,s,l)),this.addChild(n,d,s),n=d}r="",a=h}else r+=t[a];return e.child}}function ALt(i,t){return uet(i)}function uet(i,t){const e={};for(let n=0;n<i.length;n++){const r=i[n],s=kLt(r);if(s!==void 0&&r[s]){const a=uet(r[s]);MLt(a),r[":@"]&&CLt(a,r[":@"]),e[s]!==void 0&&e.hasOwnProperty(s)?(Array.isArray(e[s])||(e[s]=[e[s]]),e[s].push(a)):e[s]=a}}return e}function kLt(i){const t=Object.keys(i);for(let e=0;e<t.length;e++){const n=t[e];if(n!==":@")return n}}function CLt(i,t,e){if(t){const n=Object.keys(t),r=n.length;for(let s=0;s<r;s++){const a=n[s];i[a]=t[a]}}}function MLt(i){return Object.keys(i).length===0}class _M{constructor(t){this.options=Object.assign({},_M.defaultOptions,t)}valid(t){return t.startsWith("<")}parse(t){if(!this.valid)return!1;const e=new wLt(this.options).parseXml(t);return ALt(e,this.options)}}_M.defaultOptions={};function TLt(i){return i.startsWith("<svg")||i.startsWith("<?xml")}var PLt=function(i,t,e,n){return new(e||(e=Promise))(function(r,s){function a(u){try{l(n.next(u))}catch(c){s(c)}}function o(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof e?c:new e(function(h){h(c)})).then(a,o)}l((n=n.apply(i,t||[])).next())})};function ELt(i){return PLt(this,void 0,void 0,function*(){const t=[],e=i.getChildren();yield new Promise(n=>{vt.global.getRequestAnimationFrame()(()=>{n(null)})}),e.forEach(n=>{n.subLayers.size&&n.subLayers.forEach(r=>{r.drawContribution&&r.drawContribution.hooks&&r.drawContribution.rendering&&t.push(new Promise(s=>{r.drawContribution.hooks.completeDraw.tap("outWait",()=>{r.drawContribution.hooks.completeDraw.taps=r.drawContribution.hooks.completeDraw.taps.filter(a=>a.name!=="outWait"),s(null)})}))})}),yield Promise.all(t)})}function $w(i,t,e,n=0){return i.expand(t+(n/2+(e?RLt(e,t):0))),i}function RLt(i,t){return i?t:0}let OLt=0;function jr(){return OLt++}var fg;(function(i){i[i.HORIZONTAL=0]="HORIZONTAL",i[i.VERTICAL=1]="VERTICAL"})(fg||(fg={}));function DLt(i){const t=[];let e=0,n="";for(let r=0;r<i.length;r++)BLt(i[r])?e?n+=i[r]:(e=1,n=i[r]):(e&&(t.push({text:n,direction:fg.VERTICAL}),n="",e=0),t.push({text:i[r],direction:fg.HORIZONTAL}));return n&&t.push({text:n,direction:fg.VERTICAL}),t}const ILt=["","","","","","","","","",""],cet=new Map;ILt.forEach(i=>cet.set(i,!0));const LLt=[""],het=new Map;function BLt(i){if(cet.has(i))return!0;if(het.has(i))return!1;let t=!1;return i.codePointAt(0)<256&&(t=!0),t}LLt.forEach(i=>het.set(i,!0));const vM=jr(),yM=jr(),Db=jr(),bM=jr(),fF=jr(),pF=jr(),xM=jr(),Ib=jr(),SM=jr(),wM=jr(),gF=jr(),mF=jr(),_F=jr(),vF=jr();jr();const AM=jr(),kM=jr(),yF=Symbol.for("GraphicService"),det=Symbol.for("GraphicCreator"),fet={"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity",stroke:"stroke",fill:"fill"},FLt=Object.keys(fet),zLt={duration:200,easing:"cubicOut"};function bF(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function NLt(i,t,e){const n=Math.sin(e),r=Math.cos(e),s=t[4],a=t[5],o=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=s*r+u*n,i[5]=a*r+c*n,i[6]=o*r+h*n,i[7]=l*r+d*n,i[8]=u*r-s*n,i[9]=c*r-a*n,i[10]=h*r-o*n,i[11]=d*r-l*n,i}function jLt(i,t,e){const n=Math.sin(e),r=Math.cos(e),s=t[0],a=t[1],o=t[2],l=t[3],u=t[8],c=t[9],h=t[10],d=t[11];return t!==i&&(i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=s*r-u*n,i[1]=a*r-c*n,i[2]=o*r-h*n,i[3]=l*r-d*n,i[8]=s*n+u*r,i[9]=a*n+c*r,i[10]=o*n+h*r,i[11]=l*n+d*r,i}function HLt(i,t,e){const n=Math.sin(e),r=Math.cos(e),s=t[0],a=t[1],o=t[2],l=t[3],u=t[4],c=t[5],h=t[6],d=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=s*r+u*n,i[1]=a*r+c*n,i[2]=o*r+h*n,i[3]=l*r+d*n,i[4]=u*r-s*n,i[5]=c*r-a*n,i[6]=h*r-o*n,i[7]=d*r-l*n,i}function k_(i,t,e){const n=e[0],r=e[1],s=e[2];let a,o,l,u,c,h,d,f,p,g,m,_;return t===i?(i[12]=t[0]*n+t[4]*r+t[8]*s+t[12],i[13]=t[1]*n+t[5]*r+t[9]*s+t[13],i[14]=t[2]*n+t[6]*r+t[10]*s+t[14],i[15]=t[3]*n+t[7]*r+t[11]*s+t[15]):(a=t[0],o=t[1],l=t[2],u=t[3],c=t[4],h=t[5],d=t[6],f=t[7],p=t[8],g=t[9],m=t[10],_=t[11],i[0]=a,i[1]=o,i[2]=l,i[3]=u,i[4]=c,i[5]=h,i[6]=d,i[7]=f,i[8]=p,i[9]=g,i[10]=m,i[11]=_,i[12]=a*n+c*r+p*s+t[12],i[13]=o*n+h*r+g*s+t[13],i[14]=l*n+d*r+m*s+t[14],i[15]=u*n+f*r+_*s+t[15]),i}function PD(i,t){i[0]=t.a,i[1]=t.b,i[2]=0,i[3]=0,i[4]=t.c,i[5]=t.d,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=t.e,i[13]=t.f,i[14]=0,i[15]=1}function VLt(i,t,e){const n=e[0],r=e[1],s=e[2];return i[0]=t[0]*n,i[1]=t[1]*n,i[2]=t[2]*n,i[3]=t[3]*n,i[4]=t[4]*r,i[5]=t[5]*r,i[6]=t[6]*r,i[7]=t[7]*r,i[8]=t[8]*s,i[9]=t[9]*s,i[10]=t[10]*s,i[11]=t[11]*s,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i}function qd(i,t,e){const n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],g=t[12],m=t[13],_=t[14],v=t[15];let y=e[0],b=e[1],x=e[2],S=e[3];return i[0]=y*n+b*o+x*h+S*g,i[1]=y*r+b*l+x*d+S*m,i[2]=y*s+b*u+x*f+S*_,i[3]=y*a+b*c+x*p+S*v,y=e[4],b=e[5],x=e[6],S=e[7],i[4]=y*n+b*o+x*h+S*g,i[5]=y*r+b*l+x*d+S*m,i[6]=y*s+b*u+x*f+S*_,i[7]=y*a+b*c+x*p+S*v,y=e[8],b=e[9],x=e[10],S=e[11],i[8]=y*n+b*o+x*h+S*g,i[9]=y*r+b*l+x*d+S*m,i[10]=y*s+b*u+x*f+S*_,i[11]=y*a+b*c+x*p+S*v,y=e[12],b=e[13],x=e[14],S=e[15],i[12]=y*n+b*o+x*h+S*g,i[13]=y*r+b*l+x*d+S*m,i[14]=y*s+b*u+x*f+S*_,i[15]=y*a+b*c+x*p+S*v,i}function WLt(i,t,e,n){let r,s,a,o,l,u,c,h,d,f;const p=t[0],g=t[1],m=t[2],_=n[0],v=n[1],y=n[2],b=e[0],x=e[1],S=e[2];return Math.abs(p-b)<Ye&&Math.abs(g-x)<Ye&&Math.abs(m-S)<Ye?bF(i):(c=p-b,h=g-x,d=m-S,f=1/Math.hypot(c,h,d),c*=f,h*=f,d*=f,r=v*d-y*h,s=y*c-_*d,a=_*h-v*c,f=Math.hypot(r,s,a),f?(f=1/f,r*=f,s*=f,a*=f):(r=0,s=0,a=0),o=h*a-d*s,l=d*r-c*a,u=c*s-h*r,f=Math.hypot(o,l,u),f?(f=1/f,o*=f,l*=f,u*=f):(o=0,l=0,u=0),i[0]=r,i[1]=o,i[2]=c,i[3]=0,i[4]=s,i[5]=l,i[6]=h,i[7]=0,i[8]=a,i[9]=u,i[10]=d,i[11]=0,i[12]=-(r*p+s*g+a*m),i[13]=-(o*p+l*g+u*m),i[14]=-(c*p+h*g+d*m),i[15]=1,i)}function $Lt(i,t,e,n,r,s,a){const o=1/(t-e),l=1/(n-r),u=1/(s-a);return i[0]=-2*o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*l,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*u,i[11]=0,i[12]=(t+e)*o,i[13]=(r+n)*l,i[14]=(a+s)*u,i[15]=1,i}function sa(i,t,e){const n=t[0],r=t[1],s=t[2];let a=e[3]*n+e[7]*r+e[11]*s+e[15];return a=a||1,i[0]=(e[0]*n+e[4]*r+e[8]*s+e[12])/a,i[1]=(e[1]*n+e[5]*r+e[9]*s+e[13])/a,i[2]=(e[2]*n+e[6]*r+e[10]*s+e[14])/a,i}function W$(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}class ULt{constructor(){this.pools=[]}allocate(t,e,n,r,s,a){if(!this.pools.length)return new di(t,e,n,r,s,a);const o=this.pools.pop();return o.a=t,o.b=e,o.c=n,o.d=r,o.e=s,o.f=a,o}allocateByObj(t){if(!this.pools.length)return new di(t.a,t.b,t.c,t.d,t.e,t.f);const e=this.pools.pop();return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}class xF{constructor(){this.pools=[]}static identity(t){return bF(t)}allocate(){if(!this.pools.length)return W$();const t=this.pools.pop();return xF.identity(t),t}allocateByObj(t){let e;e=this.pools.length?this.pools.pop():W$();for(let n=0;n<e.length;n++)e[n]=t[n];return e}free(t){t&&this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}const wr=new ULt,Fi=new xF;var GLt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},YLt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};const XLt=new di(1,0,0,1,0,0),Uf={x:0,y:0};let ED=class{get nativeContext(){return this.path}constructor(i,t){this.matrix=new di(1,0,0,1,0,0),this.stack=[],this.dpr=t,this.applyedMatrix=new di(1,0,0,1,0,0),this.path=new Ki,this._clearMatrix=new di(1,0,0,1,0,0)}getCanvas(){throw new Error("getCanvas")}getContext(){throw new Error("getContext")}setTransformForCurrent(i=!1){!i&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix=this.cloneMatrix(this.matrix))}get currentMatrix(){return this.matrix}cloneMatrix(i){return wr.allocateByObj(i)}clear(){this.save(),this.resetTransform(),this.restore()}reset(){this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new di(1,0,0,1,0,0),this.stack.length=0}restore(){this.stack.length>0&&(wr.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent())}highPerformanceRestore(){this.stack.length>0&&(wr.free(this.matrix),this.matrix=this.stack.pop())}rotate(i,t=!0){this.matrix.rotate(i),t&&this.setTransformForCurrent()}save(){const i=this.cloneMatrix(this.matrix);this.stack.push(i)}highPerformanceSave(){const i=this.cloneMatrix(this.matrix);this.stack.push(i)}scale(i,t,e=!0){this.matrix.scale(i,t),e&&this.setTransformForCurrent()}setScale(i,t,e=!0){this.matrix.setScale(i,t),e&&this.setTransformForCurrent()}scalePoint(i,t,e,n,r=!0){this.translate(e,n,!1),this.scale(i,t,!1),this.translate(-e,-n,!1),r&&this.setTransformForCurrent()}setTransform(i,t,e,n,r,s,a=!0,o=this.dpr){this.matrix.setValue(o*i,o*t,o*e,o*n,o*r,o*s),a&&this.setTransformForCurrent()}setTransformFromMatrix(i,t=!0,e=this.dpr){this.matrix.setValue(i.a*e,i.b*e,i.c*e,i.d*e,i.e*e,i.f*e),t&&this.setTransformForCurrent()}resetTransform(i=!0,t=this.dpr){this.setTransform(t,0,0,t,0,0),i&&this.setTransformForCurrent()}transform(i,t,e,n,r,s,a=!0){this.matrix.multiply(i,t,e,n,r,s),a&&this.setTransformForCurrent()}transformFromMatrix(i,t){this.matrix.multiply(i.a,i.b,i.c,i.d,i.e,i.f),t&&this.setTransformForCurrent()}translate(i,t,e=!0){this.matrix.translate(i,t),e&&this.setTransformForCurrent()}rotateDegrees(i,t=!0){const e=i*Math.PI/180;this.rotate(e,t)}rotateAbout(i,t,e,n=!0){this.translate(t,e,!1),this.rotate(i,!1),this.translate(-t,-e,!1),n&&this.setTransformForCurrent()}rotateDegreesAbout(i,t,e,n=!0){this.translate(t,e,!1),this.rotateDegrees(i,!1),this.translate(-t,-e,!1),n&&this.setTransformForCurrent()}beginPath(){this.path.clear()}clip(i,t){}arc(i,t,e,n,r,s){this.path.arc(i,t,e,n,r,s)}arcTo(i,t,e,n,r){this.path.arcTo(i,t,e,n,r)}bezierCurveTo(i,t,e,n,r,s){this.path.bezierCurveTo(i,t,e,n,r,s)}closePath(){this.path.closePath()}ellipse(i,t,e,n,r,s,a,o){}lineTo(i,t){this.path.lineTo(i,t)}moveTo(i,t){this.path.moveTo(i,t)}quadraticCurveTo(i,t,e,n){this.path.quadraticCurveTo(i,t,e,n)}rect(i,t,e,n){this.path.rect(i,t,e,n)}createImageData(i,t){return null}createLinearGradient(i,t,e,n){throw new Error("createLinearGradient")}createPattern(i,t){throw new Error("createPattern")}createRadialGradient(i,t,e,n,r,s){throw new Error("createRadialGradient")}createConicGradient(i,t,e,n){return null}fill(i,t){}fillRect(i,t,e,n){this.path.rect(i,t,e,n)}clearRect(i,t,e,n){}fillText(i,t,e){}getImageData(i,t,e,n){return null}getLineDash(){return[]}isPointInPath(i,t){return this.matrix.transformPoint({x:i,y:t},Uf),oIt(this.path.commandList,Uf.x,Uf.y)}isPointInStroke(i,t){if(!this.lineWidth)return!1;this.matrix.transformPoint({x:i,y:t},Uf);const e=Ql(this,this.lineWidth,this.dpr);return lIt(this.path.commandList,e,Uf.x,Uf.y)}measureText(i){throw new Error("measureText")}putImageData(i,t,e){throw new Error("measureText")}setLineDash(i){}stroke(i){}strokeRect(i,t,e,n){this.path.rect(i,t,e,n)}strokeText(i,t,e){}drawImage(){}setCommonStyle(i,t,e,n,r){}_setCommonStyle(i,t,e,n){}setStrokeStyle(i,t,e,n,r){}_setStrokeStyle(i,t,e,n){}setTextStyleWithoutAlignBaseline(i,t){}setTextStyle(i,t){}draw(){}clearMatrix(i=!0,t=this.dpr){this.setTransformFromMatrix(XLt,i,t)}setClearMatrix(i,t,e,n,r,s){this._clearMatrix.setValue(i,t,e,n,r,s)}onlyTranslate(i=this.dpr){return this.matrix.a===i&&this.matrix.b===0&&this.matrix.c===0&&this.matrix.d===i}release(...i){this.stack.forEach(t=>wr.free(t)),this.stack.length=0}};ED=GLt([Rt(),YLt("design:paramtypes",[Object,Number])],ED);const IE={WIDTH:500,HEIGHT:500,DPR:1};class SF{get displayWidth(){return this._pixelWidth/this._dpr}get displayHeight(){return this._pixelHeight/this._dpr}get id(){return this._id}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get nativeCanvas(){return this._nativeCanvas}set nativeCanvas(t){this._nativeCanvas=t}get width(){return this._pixelWidth}set width(t){this._pixelWidth=t,this._displayWidth=t/(this._dpr||1)}get height(){return this._pixelHeight}set height(t){this._pixelHeight=t,this._displayHeight=t/(this._dpr||1)}getContext(t){return this._context}get visiable(){return this._visiable}set visiable(t){this._visiable=t,t?this.show():this.hide()}get dpr(){return this._dpr}set dpr(t){this._dpr=t,this.resize(this._displayWidth,this._displayHeight)}constructor(t){var e;const{nativeCanvas:n,width:r=IE.WIDTH,height:s=IE.HEIGHT,dpr:a=IE.DPR,x:o,y:l,id:u,canvasControled:c=!0}=t;this._x=o??0,this._y=l??0,this._pixelWidth=r*a,this._pixelHeight=s*a,this._visiable=t.visiable!==!1,this.controled=c,this._displayWidth=r,this._displayHeight=s,this._dpr=a,this._nativeCanvas=n,this._id=(e=n.id)!==null&&e!==void 0?e:u,u&&(n.id=u),this.init(t)}getNativeCanvas(){return this._nativeCanvas}hide(){}show(){}applyPosition(){}resetStyle(t){}resize(t,e){}toDataURL(t,e){return""}readPixels(t,e,n,r){return this._context.getImageData(t,e,n,r)}convertToBlob(t){throw new Error("")}transferToImageBitmap(){throw new Error("")}release(...t){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}}SF.env="browser";var ts;(function(i){i[i.Color255=0]="Color255",i[i.Color1=1]="Color1"})(ts||(ts={}));class Vi{static Get(t,e=ts.Color1,n=[0,0,0,1]){if(e===ts.Color1){const a=Vi.store1[t];if(a)return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n;const o=Mn.parseColorString(t);if(o){const l=[o.r/255,o.g/255,o.b/255,o.opacity];Vi.store1[t]=l,Vi.store255[t]=[o.r,o.g,o.b,o.opacity],n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3]}return n}const r=Vi.store255[t];if(r)return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n;const s=Mn.parseColorString(t);return s&&(Vi.store1[t]=[s.r/255,s.g/255,s.b/255,s.opacity],Vi.store255[t]=[s.r,s.g,s.b,s.opacity],n[0]=s.r,n[1]=s.g,n[2]=s.b,n[3]=s.opacity),n}static Set(t,e,n){if(e===ts.Color1){if(Vi.store1[t])return;Vi.store1[t]=n,Vi.store255[t]=[Math.floor(255*n[0]),Math.floor(255*n[1]),Math.floor(255*n[2]),Math.floor(255*n[3])]}else{if(Vi.store255[t])return;Vi.store255[t]=n,Vi.store1[t]=[n[0]/255,n[1]/255,n[2]/255,n[3]]}}}Vi.store255={},Vi.store1={};function vS(i,t=!1){return Array.isArray(i)&&yt(i[0])?t?`rgb(${Math.round(i[0])},${Math.round(i[1])},${Math.round(i[2])},${i[3].toFixed(2)})`:`rgb(${Math.round(i[0])},${Math.round(i[1])},${Math.round(i[2])})`:i}function Ug(i,t,e,n,r){return Array.isArray(i)&&!yt(i[0])||Array.isArray(t)&&!yt(t[0])?new Array(4).fill(0).map((s,a)=>{var o,l;return $$(J(i)?(o=i[a])!==null&&o!==void 0?o:i[0]:i,J(t)?(l=t[a])!==null&&l!==void 0?l:t[0]:t,e,n)}):$$(i,t,e,n)}function $$(i,t,e,n,r){if(!i||!t)return i&&vS(i)||t&&vS(t)||!1;let s,a,o=!1,l=!1;if(Array.isArray(i)?s=i:typeof i=="string"?s=Vi.Get(i,ts.Color255):o=!0,Array.isArray(t)?a=t:typeof t=="string"?a=Vi.Get(t,ts.Color255):l=!0,o!==l){const u=o?i:t,c=o?t:i,h=Object.assign(Object.assign({},u),{stops:u.stops.map(d=>Object.assign(Object.assign({},d),{color:vS(c)}))});return o?Ug(u,h,e,n):Ug(h,u,e,n)}if(o){if(i.gradient===t.gradient){const u=i,c=t,h=u.stops,d=c.stops;if(h.length!==d.length)return!1;if(u.gradient==="linear")return KLt(u,c,e);if(u.gradient==="radial")return qLt(u,c,e);if(u.gradient==="conical")return ZLt(u,c,e)}return!1}return vS(QLt(s,a,e),n)}function KLt(i,t,e){const n=i.stops,r=t.stops;return{gradient:"linear",x0:i.x0+(t.x0-i.x0)*e,x1:i.x1+(t.x1-i.x1)*e,y0:i.y0+(t.y0-i.y0)*e,y1:i.y1+(t.y1-i.y1)*e,stops:new Array(n.length).fill(0).map((s,a)=>({color:wF(n[a].color,r[a].color,e),offset:n[a].offset+(r[a].offset-n[a].offset)*e}))}}function qLt(i,t,e){const n=i.stops,r=t.stops;return{gradient:"radial",x0:i.x0+(t.x0-i.x0)*e,x1:i.x1+(t.x1-i.x1)*e,y0:i.y0+(t.y0-i.y0)*e,y1:i.y1+(t.y1-i.y1)*e,r0:i.r0+(t.r0-i.r0)*e,r1:i.r1+(t.r1-i.r1)*e,stops:new Array(n.length).fill(0).map((s,a)=>({color:wF(n[a].color,r[a].color,e),offset:n[a].offset+(r[a].offset-n[a].offset)*e}))}}function ZLt(i,t,e){const n=i.stops,r=t.stops;return{gradient:"conical",startAngle:i.startAngle+(t.startAngle-i.startAngle)*e,endAngle:i.endAngle+(t.endAngle-i.endAngle)*e,x:i.x+(t.x-i.x)*e,y:i.y+(t.y-i.y)*e,stops:new Array(n.length).fill(0).map((s,a)=>({color:wF(n[a].color,r[a].color,e),offset:n[a].offset+(r[a].offset-n[a].offset)*e}))}}function QLt(i,t,e){return[i[0]+(t[0]-i[0])*e,i[1]+(t[1]-i[1])*e,i[2]+(t[2]-i[2])*e,i[3]+(t[3]-i[3])*e]}function U$(i,t,e){return`rgba(${i[0]+(t[0]-i[0])*e},${i[1]+(t[1]-i[1])*e},${i[2]+(t[2]-i[2])*e},${i[3]+(t[3]-i[3])*e})`}const uu=[0,0,0,0],C_=[0,0,0,0];function wF(i,t,e){return Vi.Get(i,ts.Color255,uu),Vi.Get(t,ts.Color255,C_),`rgba(${Math.round(uu[0]+(C_[0]-uu[0])*e)},${Math.round(uu[1]+(C_[1]-uu[1])*e)},${Math.round(uu[2]+(C_[2]-uu[2])*e)},${uu[3]+(C_[3]-uu[3])*e})`}class Ba{static GetCanvas(){try{return Ba.canvas||(Ba.canvas=vt.global.createCanvas({})),Ba.canvas}catch{return null}}static GetCtx(){if(!Ba.ctx){const t=Ba.GetCanvas();Ba.ctx=t.getContext("2d")}return Ba.ctx}}class Qh extends uEt{static getInstance(){return Qh._instance||(Qh._instance=new Qh),Qh._instance}constructor(t=[],e=100){super(),this.cacheParams={CLEAN_THRESHOLD:100,L_TIME:1e3},this.dataMap=new Map;const n=Ba.GetCanvas(),r=Ba.GetCtx();if(n.width=e,n.height=1,!r)return;if(r.translate(0,0),!r)throw new Error("ctx");const s=r.createLinearGradient(0,0,e,0);t.forEach(a=>{s.addColorStop(a[0],a[1])}),r.fillStyle=s,r.fillRect(0,0,e,1),this.rgbaSet=r.getImageData(0,0,e,1).data}getColor(t){const e=this.rgbaSet.slice(4*t,4*t+4);return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]/255})`}GetOrCreate(t,e,n,r,s=[],a=100){let o=`${t}${e}${n}${r}`;s.forEach(u=>o+=u.join()),o+=a;let l=this.dataMap.get(o);return l||(l={data:new Qh(s,a),timestamp:[]},this.addLimitedTimestamp(l,Date.now(),{}),this.dataMap.set(o,l)),this.clearCache(this.dataMap,this.cacheParams),l.data}}class Kr{static GetSize(t){for(let e=0;e<Kr.ImageSize.length;e++)if(Kr.ImageSize[e]>=t)return Kr.ImageSize[e];return t}static Get(t,e,n,r,s,a,o){const l=Kr.GenKey(t,e,n,r,s),u=Kr.cache[l];if(!u||u.length===0)return null;for(let c=0;c<u.length;c++)if(u[c].width>=a&&u[c].height>=o)return u[c].pattern;return null}static Set(t,e,n,r,s,a,o,l){const u=Kr.GenKey(t,e,n,r,s);Kr.cache[u]?Kr.cache[u].push({width:o,height:l,pattern:a}):Kr.cache[u]=[{width:o,height:l,pattern:a}]}static GenKey(t,e,n,r,s){return`${e},${n},${r},${s},${t.join()}`}}Kr.cache={},Kr.ImageSize=[20,40,80,160,320,640,1280,2560];function JLt(i,t,e,n){const{stops:r,startAngle:s,endAngle:a}=n;for(;e<0;)e+=qt;for(;e>qt;)e-=qt;if(e<s||e>a)return r[0].color;let o,l,u=(e-s)/(a-s);for(let c=0;c<r.length;c++)if(r[c].offset>=u){o=r[c-1],l=r[c];break}return u=(u-o.offset)/(l.offset-o.offset),Ug(o.color,l.color,u,!1)}function t2t(i,t,e,n,r,s,a,o,l){const u=Math.floor(180*r/Math.PI),c=Ba.GetCanvas(),h=Ba.GetCtx();if(!h)return null;const d=Kr.GetSize(o),f=Kr.GetSize(l);let p=Kr.Get(t,e,n,s,a,d,f);if(p)return p;const g=Math.sqrt(Math.max(Math.max(Math.pow(e,2)+Math.pow(n,2),Math.pow(d-e,2)+Math.pow(n,2)),Math.max(Math.pow(d-e,2)+Math.pow(f-n,2),Math.pow(e,2)+Math.pow(f-n,2)))),m=u+1,_=r/Math.max(1,m-1),v=Qh.getInstance().GetOrCreate(e,n,d,f,t,m),y=2*Math.PI*g/360;c.width=d,c.height=f,h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,d,f),h.translate(e,n),h.rotate(s);for(let x=0,S=m-1;x<S&&!(s+x*_>a);x++){const w=v.getColor(x);h.beginPath(),h.rotate(_),h.moveTo(0,0),h.lineTo(g,-2*y),h.lineTo(g,0),h.fillStyle=w,h.closePath(),h.fill()}const b=h.getImageData(0,0,d,f);return c.width=b.width,c.height=b.height,h.putImageData(b,0,0),p=i.createPattern(c,"no-repeat"),p&&Kr.Set(t,e,n,s,a,p,d,f),p}const yS=new Gi,e2t=new di;new Gi;const wa=["lineWidth","scaleX","scaleY","angle","anchor","visible"],G$=["x","y"],Y$=["scaleX","scaleY"],X$=["angle"],M_=new ci,ss={strokeSeg:1,boundsPadding:2,pickMode:1,boundsMode:1,customPickShape:1,pickable:1,childrenPickable:1,visible:1,zIndex:1,layout:1,keepDirIn3d:1,globalZIndex:1,outerBorder:1,innerBorder:1,lineDash:1,lineCap:1,lineJoin:1,miterLimit:2,strokeBoundsBuffer:2,scaleCenter:1,anchor:1,anchor3d:1,postMatrix:1,backgroundMode:2,background:1,texture:1,cursor:1,html:1};class En extends gIt{static mixin(t){const e=Object.keys(t);for(let n=0;n<e.length;++n){const r=e[n];Object.defineProperty(En.prototype,r,Object.getOwnPropertyDescriptor(t,r))}}get AABBBounds(){return this.tryUpdateAABBBounds()}get OBBBounds(){return this.tryUpdateOBBBounds()}get globalAABBBounds(){return this.tryUpdateGlobalAABBBounds()}get transMatrix(){return this.tryUpdateLocalTransMatrix(!0)}get globalTransMatrix(){return this.tryUpdateGlobalTransMatrix(!0)}constructor(t={}){var e;super(),this._AABBBounds=new Gi,this._updateTag=_i.INIT,this.attribute=t,this.valid=this.isValid(),this.updateAABBBoundsStamp=0,t.background?this.loadImage((e=t.background.background)!==null&&e!==void 0?e:t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic)}getGraphicService(){var t,e;return(e=(t=this.stage)===null||t===void 0?void 0:t.graphicService)!==null&&e!==void 0?e:vt.graphicService}getAttributes(){return this.attribute}setMode(t){t==="3d"?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}getOffsetXY(t,e=!1){var n,r;const{dx:s=t.dx,dy:a=t.dy}=this.attribute;if(e&&this.parent){const o=this.parent.attribute;M_.x=s+((n=o.scrollX)!==null&&n!==void 0?n:0),M_.y=a+((r=o.scrollY)!==null&&r!==void 0?r:0)}else M_.x=s,M_.y=a;return M_}onAnimateBind(t){this._emitCustomEvent("animate-bind",t)}tryUpdateAABBBounds(){const t=this.attribute.boundsMode==="imprecise";if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;this.getGraphicService().beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);const e=this.doUpdateAABBBounds(t);return this.getGraphicService().afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),this.attribute.boundsMode==="empty"&&e.clear(),e}tryUpdateOBBBounds(){return this._OBBBounds||(this._OBBBounds=new YB),this.tryUpdateAABBBounds(),this.updateOBBBoundsStamp===this.updateAABBBoundsStamp?this._OBBBounds:(this.updateOBBBoundsStamp=this.updateAABBBoundsStamp,this.valid?this.doUpdateOBBBounds():(this._OBBBounds.clear(),this._OBBBounds))}combindShadowAABBBounds(t){if(this.shadowRoot){const e=this.shadowRoot.AABBBounds.clone();t.union(e)}}doUpdateOBBBounds(){return this._OBBBounds}getClipPath(){const{clipConfig:t}=this.attribute;if(!t)return null;this.clipPathMap||(this.clipPathMap=new Map);const{shape:e}=t;let n=this.clipPathMap.get(e)||null;return n||(this.clipPathMap.size>10&&this.clipPathMap.clear(),n=this.parsePath(e),n&&this.clipPathMap.set(e,n)),n}parsePath(t){if(!t)return null;let e=Ww[t];if(e||(e=En.userSymbolMap[t],e))return e;const n=yLt[t];if(TLt(t=n||t)===!0){const u=new _M,{svg:c}=u.parse(t);if(!c)return null;const h=J(c.path)?c.path:[c.path];yS.clear();const d=[];h.forEach(_=>{const v=new Ki().fromString(_.d),y={};FLt.forEach(b=>{_[b]&&(y[fet[b]]=_[b])}),d.push({path:v,attribute:y}),yS.union(v.bounds)});const f=yS.width(),p=yS.height(),g=1/Nn(f,p);d.forEach(_=>_.path.transform(0,0,g,g));const m=new j$(t,d,!0);return En.userSymbolMap[t]=m,m}const r=new Ki().fromString(t),s=r.bounds.width(),a=r.bounds.height(),o=1/Nn(s,a);r.transform(0,0,o,o);const l=new j$(t,r);return En.userSymbolMap[t]=l,l}doUpdateAABBBounds(t){this.updateAABBBoundsStamp++;const e=this.getGraphicTheme();this._AABBBounds.clear();const n=this.attribute,r=this.updateAABBBounds(n,e,this._AABBBounds,t),{boundsPadding:s=e.boundsPadding}=n,a=CD(s);return a&&r.expand(a),this.clearUpdateBoundTag(),r}updatePathProxyAABBBounds(t){const e=typeof this.pathProxy=="function"?this.pathProxy(this.attribute):this.pathProxy;if(!e)return!1;const n=new uF(t);return qu(e.commandList,n,0,0),!0}tryUpdateGlobalAABBBounds(){const t=this.AABBBounds;return this._globalAABBBounds?this._globalAABBBounds.setValue(t.x1,t.y1,t.x2,t.y2):this._globalAABBBounds=t.clone(),this._globalAABBBounds.empty()||this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}tryUpdateGlobalTransMatrix(t=!0){if(this._globalTransMatrix){if(this.parent){const e=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();return this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!0}tryUpdateLocalTransMatrix(t=!0){return this._transMatrix||(this._transMatrix=new di),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),t&&this.clearUpdateLocalPositionTag()),this._transMatrix}shouldUpdateAABBBounds(){return this.shadowRoot?(!!(this._updateTag&_i.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds())&&this.getGraphicService().validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this):!!(this._updateTag&_i.UPDATE_BOUNDS)&&this.getGraphicService().validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this)}shouldSelfChangeUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&_i.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&_i.UPDATE_BOUNDS)}shouldUpdateLocalMatrix(){return!!(this._updateTag&_i.UPDATE_LOCAL_MATRIX)}isValid(){var t,e;const n=this.attribute;return Number.isFinite(((t=n.x)!==null&&t!==void 0?t:0)+((e=n.y)!==null&&e!==void 0?e:0))}_validNumber(t){return t==null||Number.isFinite(t)}shouldUpdateShape(){return!!(this._updateTag&_i.UPDATE_SHAPE)}clearUpdateShapeTag(){this._updateTag&=_i.CLEAR_SHAPE}containsPoint(t,e,n,r){if(!r)return!1;if(n===a0.GLOBAL){const s=new ci(t,e);this.parent&&this.parent.globalTransMatrix.transformPoint(s,s),t=s.x,e=s.y}return r.containsPoint(this,{x:t,y:e})}setWidthHeightWithoutTransform(t){this.widthWithoutTransform=t.x2-t.x1,this.heightWithoutTransform=t.y2-t.y1}setAttributesAndPreventAnimate(t,e=!1,n,r){this.setAttributes(t,e,n),this.animates&&this.animates.forEach(s=>{(s.priority!==1/0||r)&&Object.keys(t).forEach(a=>{s.preventAttr(a)})})}setAttributes(t,e=!1,n){t&&((t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,n)||t).background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._setAttributes(t,e,n))}_setAttributes(t,e=!1,n){const r=Object.keys(t);for(let s=0;s<r.length;s++){const a=r[s];this.attribute[a]=t[a]}this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!e&&!this.needUpdateTags(r)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n)}setAttribute(t,e,n,r){var s;const a=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,r);a?this._setAttributes(a,n,r):N((s=this.normalAttrs)===null||s===void 0?void 0:s[t])?(this.attribute[t]=e,this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!n&&!this.needUpdateTag(t)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)):this.normalAttrs[t]=e,t==="background"?this.loadImage(e,!0):t==="shadowGraphic"&&this.setShadowGraphic(e)}needUpdateTags(t,e=wa){for(let n=0;n<e.length;n++){const r=e[n];if(t.indexOf(r)!==-1)return!0}return!1}needUpdateTag(t,e=wa){for(let n=0;n<e.length;n++)if(t===e[n])return!0;return!1}initAttributes(t){const e={type:Xn.INIT};t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,e)||t,this.attribute=t,t.background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._updateTag=_i.INIT,this.valid=this.isValid(),this.onAttributeUpdate(e)}translate(t,e){var n,r;if(t===0&&e===0)return this;const s={type:Xn.TRANSLATE},a=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,G$,s);a&&(t=a.x,e=a.y,delete a.x,delete a.y,this._setAttributes(a));const o=this.attribute,l=o.postMatrix;return l?vt.transformUtil.fromMatrix(l,l).translate(t,e):(o.x=((n=o.x)!==null&&n!==void 0?n:lr.x)+t,o.y=((r=o.y)!==null&&r!==void 0?r:lr.y)+e),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s),this}translateTo(t,e){const n=this.attribute;if(n.x===t&&n.y===e)return this;const r={type:Xn.TRANSLATE_TO},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,G$,r);return s?(this._setAttributes(s,!1,r),this):(n.x=t,n.y=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this)}scale(t,e,n){var r,s;if(t===1&&e===1)return this;const a={type:Xn.SCALE},o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e,scaleCenter:n},this.attribute,Y$,a);o&&(t=o.scaleX,e=o.scaleY,delete o.scaleX,delete o.scaleY,this._setAttributes(o));const l=this.attribute;if(n){let{postMatrix:u}=this.attribute;u||(u=new di,l.postMatrix=u),vt.transformUtil.fromMatrix(u,u).scale(t,e,n)}else l.scaleX=((r=l.scaleX)!==null&&r!==void 0?r:lr.scaleX)*t,l.scaleY=((s=l.scaleY)!==null&&s!==void 0?s:lr.scaleY)*e;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(a),this}scaleTo(t,e){const n=this.attribute;if(n.scaleX===t&&n.scaleY===e)return this;const r={type:Xn.SCALE_TO},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e},this.attribute,Y$,r);return s?(this._setAttributes(s,!1,r),this):(n.scaleX=t,n.scaleY=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this)}rotate(t,e){var n;if(t===0)return this;const r={type:Xn.ROTATE},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({angle:t,rotateCenter:e},this.attribute,X$,r);s&&(delete s.angle,this._setAttributes(s,!1,r));const a=this.attribute;if(e){let{postMatrix:o}=this.attribute;o||(o=new di,a.postMatrix=o),vt.transformUtil.fromMatrix(o,o).rotate(t,e)}else a.angle=((n=a.angle)!==null&&n!==void 0?n:lr.angle)+t;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this}rotateTo(t){const e=this.attribute;if(e.angle===t)return this;const n={type:Xn.ROTATE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,X$,n);return r?(this._setAttributes(r,!1,n),this):(e.angle=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n),this)}skewTo(t,e){return this}onAttributeUpdate(t){t&&t.skipUpdateCallback||(this.getGraphicService().onAttributeUpdate(this),this._emitCustomEvent("afterAttributeUpdate",t))}update(t){t?(t.bounds&&this.tryUpdateAABBBounds(),t.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds(),this.tryUpdateLocalTransMatrix())}hasState(t){return!(!this.currentStates||!this.currentStates.length)&&(!!N(t)||this.currentStates.includes(t))}getState(t){var e;return(e=this.states)===null||e===void 0?void 0:e[t]}applyStateAttrs(t,e,n,r){var s,a;if(n){const o=Object.keys(t),l=this.getNoWorkAnimateAttr(),u={};let c;o.forEach(d=>{l[d]?(c||(c={}),c[d]=t[d]):u[d]=r&&t[d]===void 0?this.getDefaultAttribute(d):t[d]});const h=(a=(s=this.context&&this.context.stateAnimateConfig)!==null&&s!==void 0?s:this.stateAnimateConfig)!==null&&a!==void 0?a:zLt;this.applyAnimationState(["state"],[{name:"state",animation:{type:"state",to:u,duration:h.duration,easing:h.easing}}]),c&&this.setAttributesAndPreventAnimate(c,!1,{type:Xn.STATE}),this.finalAttribute&&Object.assign(this.finalAttribute,t)}else this.stopStateAnimates(),this.setAttributesAndPreventAnimate(t,!1,{type:Xn.STATE}),this.finalAttribute&&Object.assign(this.finalAttribute,t);this._emitCustomEvent("afterStateUpdate",{type:Xn.STATE})}updateNormalAttrs(t){const e={};this.normalAttrs?(Object.keys(t).forEach(n=>{n in this.normalAttrs?(e[n]=this.normalAttrs[n],delete this.normalAttrs[n]):e[n]=this.getNormalAttribute(n)}),Object.keys(this.normalAttrs).forEach(n=>{t[n]=this.normalAttrs[n]})):Object.keys(t).forEach(n=>{e[n]=this.getNormalAttribute(n)}),this.normalAttrs=e}stopStateAnimates(t="end"){this.animates&&this.animates.forEach(e=>{e.stateNames&&(e.stop(t),this.animates.delete(e.id))})}getNormalAttribute(t){var e,n;const r=this.attribute[t];return this.animates&&this.animates.size?(e=this.finalAttribute)===null||e===void 0?void 0:e[t]:r??((n=this.finalAttribute)===null||n===void 0?void 0:n[t])}clearStates(t){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}removeState(t,e){if(this.currentStates){const n=J(t)?s=>!t.includes(s):s=>s!==t,r=this.currentStates.filter(n);r.length!==this.currentStates.length&&this.useStates(r,e)}}toggleState(t,e){if(this.hasState(t))this.removeState(t,e);else if((this.currentStates?this.currentStates.indexOf(t):-1)<0){const n=this.currentStates?this.currentStates.slice():[];n.push(t),this.useStates(n,e)}}addState(t,e,n){var r;if(this.currentStates&&this.currentStates.includes(t)&&(e||this.currentStates.length===1))return;const s=e&&(!((r=this.currentStates)===null||r===void 0)&&r.length)?this.currentStates.concat([t]):[t];this.useStates(s,n)}useStates(t,e){var n;if(!t.length)return void this.clearStates(e);if(!(((n=this.currentStates)===null||n===void 0?void 0:n.length)!==t.length||t.some((s,a)=>this.currentStates[a]!==s)))return;const r={};t.forEach(s=>{var a;const o=this.stateProxy?this.stateProxy(s,t):(a=this.states)===null||a===void 0?void 0:a[s];o&&Object.assign(r,o)}),this.updateNormalAttrs(r),this.currentStates=t,this.applyStateAttrs(r,t,e)}addUpdateBoundTag(){this._updateTag|=_i.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}addUpdateShapeTag(){this._updateTag|=_i.UPDATE_SHAPE}addUpdateShapeAndBoundsTag(){this._updateTag|=_i.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}updateShapeAndBoundsTagSetted(){return(this._updateTag&_i.UPDATE_SHAPE_AND_BOUNDS)===_i.UPDATE_SHAPE_AND_BOUNDS}clearUpdateBoundTag(){this._updateTag&=_i.CLEAR_BOUNDS}addUpdatePositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=_i.UPDATE_GLOBAL_LOCAL_MATRIX}addUpdateGlobalPositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=_i.UPDATE_GLOBAL_MATRIX}clearUpdateLocalPositionTag(){this._updateTag&=_i.CLEAR_LOCAL_MATRIX}clearUpdateGlobalPositionTag(){this._updateTag&=_i.CLEAR_GLOBAL_MATRIX}addUpdateLayoutTag(){this._updateTag|=_i.UPDATE_LAYOUT}clearUpdateLayoutTag(){this._updateTag&=_i.CLEAR_LAYOUT}needUpdateLayout(){return!!(this._updateTag&_i.UPDATE_LAYOUT)}getAnchor(t,e,n){const r=[0,0],s=()=>{if(e.b)return e.b;const a=this.clone();return a.attribute.angle=0,a.attribute.scaleCenter=null,n&&(a.attribute.scaleX=1,a.attribute.scaleY=1),e.b=a.AABBBounds,e.b};if(typeof t[0]=="string"){const a=parseFloat(t[0])/100,o=s();r[0]=o.x1+(o.x2-o.x1)*a}else r[0]=t[0];if(typeof t[1]=="string"){const a=parseFloat(t[1])/100,o=s();r[1]=o.y1+(o.y2-o.y1)*a}else r[1]=t[1];return r}doUpdateLocalMatrix(){const{x:t=lr.x,y:e=lr.y,scaleX:n=lr.scaleX,scaleY:r=lr.scaleY,angle:s=lr.angle,scaleCenter:a,anchor:o,postMatrix:l}=this.attribute;let u=[0,0];const c={};if(o&&s&&(u=this.getAnchor(o,c)),!a||n===1&&r===1)lEt(this._transMatrix,this._transMatrix.reset(),t,e,n,r,s,o&&u);else{const d=this._transMatrix;d.reset(),d.translate(u[0],u[1]),d.rotate(s),d.translate(-u[0],-u[1]),d.translate(t,e),u=this.getAnchor(a,c,!0),vt.transformUtil.fromMatrix(d,d).scale(n,r,{x:u[0],y:u[1]})}const h=this.getOffsetXY(lr);if(this._transMatrix.e+=h.x,this._transMatrix.f+=h.y,l){const d=e2t.setValue(l.a,l.b,l.c,l.d,l.e,l.f),f=this._transMatrix;d.multiply(f.a,f.b,f.c,f.d,f.e,f.f),f.setValue(d.a,d.b,d.c,d.d,d.e,d.f)}}doUpdateGlobalMatrix(){if(this.parent){this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f);const{scrollX:t=0,scrollY:e=0}=this.parent.attribute;this._globalTransMatrix.translate(t,e)}}setStage(t,e){if(this.stage!==t){if(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this.animates&&this.animates.size){const n=t.getTimeline();this.animates.forEach(r=>{r.timeline.isGlobal&&(r.setTimeline(n),n.addAnimate(r))})}this._onSetStage&&this._onSetStage(this,t,e),this.getGraphicService().onSetStage(this,t)}}setStageToShadowRoot(t,e){this.shadowRoot&&this.shadowRoot.setStage(t,e)}onAddStep(t){}onStop(t){t&&this.setAttributes(t,!1,{type:Xn.ANIMATE_END})}getDefaultAttribute(t){return this.getGraphicTheme()[t]}getComputedAttribute(t){var e;return(e=this.attribute[t])!==null&&e!==void 0?e:this.getDefaultAttribute(t)}onSetStage(t,e=!1){this._onSetStage=t,e&&this.stage&&t(this,this.stage)}attachShadow(t){return t&&(t.shadowHost=this),this.shadowRoot=t??vt.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}detachShadow(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot.release(!0),this.shadowRoot=null)}toJson(){return{attribute:this.attribute,_uid:this._uid,type:this.type,name:this.name,children:this.children.map(t=>t.toJson())}}createPathProxy(t){return Ht(t,!0)?this.pathProxy=new Ki().fromString(t):this.pathProxy=new Ki,this.pathProxy}loadImage(t,e=!1){if(!t||e&&i2t(t))return;const n=t;this.resources||(this.resources=new Map);const r={data:"init",state:null};this.resources.set(n,r),typeof t=="string"?(r.state="loading",t.startsWith("<svg")?(Ai.GetSvg(t,this),this.backgroundImg=this.backgroundImg||e):(rJ(t)||t.includes("/")||sJ(t))&&(Ai.GetImage(t,this),this.backgroundImg=this.backgroundImg||e)):ee(t)?(r.state="success",r.data=t,this.backgroundImg=this.backgroundImg||e):r.state="fail"}setShadowGraphic(t){t?this.attachShadow().add(t):this.detachShadow()}imageLoadSuccess(t,e,n){if(!this.resources)return;const r=this.resources.get(t);r&&(r.state="success",r.data=e,n&&n(),this.addUpdateBoundTag(),this.stage&&this.stage.renderNextFrame())}imageLoadFail(t,e){if(!this.resources)return;const n=this.resources.get(t);n&&(n.state="fail",e&&e())}_stopAnimates(t){t&&t.forEach(e=>{e.stop()})}stopAnimates(t=!1){this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&t&&this.forEachChildren(e=>{e.stopAnimates(t)})}release(){this.releaseStatus="released",this.stopAnimates(),vt.graphicService.onRelease(this)}_emitCustomEvent(t,e){var n,r;if(this._events&&t in this._events){const s=new fM(t,e);s.bubbles=!1,s.manager=(r=(n=this.stage)===null||n===void 0?void 0:n.eventSystem)===null||r===void 0?void 0:r.manager,this.dispatchEvent(s)}}toCustomPath(){var t,e,n;const r=(n=(e=((t=this.stage)===null||t===void 0?void 0:t.renderService)||vt.renderService)===null||e===void 0?void 0:e.drawContribution)===null||n===void 0?void 0:n.getRenderContribution(this);if(r){const s=new ED(null,1);return r.drawShape(this,s,0,0,{},{}),s.path}return null}}function i2t(i){return!(!i.fill&&!i.stroke)}En.userSymbolMap={},En.mixin(_It);var K$;(function(i){i[i.LESS_GROUP=0]="LESS_GROUP",i[i.MORE_GROUP=1]="MORE_GROUP"})(K$||(K$={}));let Lm=class RD extends En{constructor(t){super(t),this.type="group",this.parent=null,this.isContainer=!0,this.numberType=pF,this._childUpdateTag=_i.UPDATE_BOUNDS}setMode(t){t==="3d"?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}setTheme(t){return this.theme||(this.theme=new c0),this.theme.setTheme(t,this)}createTheme(){this.theme||(this.theme=new c0)}visibleAll(t){this.setAttribute("visible",t),this.forEachChildren(e=>{e.isContainer&&e.visibleAll?e.visibleAll(t):e.setAttribute("visible",t)})}hideAll(){this.visibleAll(!1)}showAll(){this.visibleAll(!0)}containsPoint(t,e,n){if(n===a0.GLOBAL){const r=new ci(t,e);return this.parent&&this.parent.globalTransMatrix.transformPoint(r,r),this.AABBBounds.contains(r.x,r.y)}return this.AABBBounds.contains(t,e)}shouldUpdateAABBBounds(){return!!super.shouldUpdateAABBBounds()||!!(this._childUpdateTag&_i.UPDATE_BOUNDS)}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.getGraphicService().beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);const t=this.shouldSelfChangeUpdateAABBBounds(),e=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),this.getGraphicService().afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,t),this.attribute.boundsMode==="empty"&&e.clear(),e}doUpdateLocalMatrix(){const{x:t=lr.x,y:e=lr.y,dx:n=lr.dx,dy:r=lr.dy,scaleX:s=lr.scaleX,scaleY:a=lr.scaleY,angle:o=lr.angle,postMatrix:l}=this.attribute;if(t!==0||e!==0||n!==0||r!==0||s!==1||a!==1||o!==0||l)return super.doUpdateLocalMatrix();this._transMatrix.reset()}getGraphicTheme(){return le(this).group}updateAABBBounds(t,e,n){const r=n;n=n.clone();const{width:s,height:a,path:o,clip:l=e.clip}=t;if(o&&o.length?o.forEach(u=>{n.union(u.AABBBounds)}):s!=null&&a!=null&&n.set(0,0,Math.max(0,s),Math.max(0,a)),!l){this.forEachChildren(h=>{n.union(h.AABBBounds)});const{scrollX:u=0,scrollY:c=0}=t;n.translate(u,c)}return vt.graphicService.updateTempAABBBounds(n),vt.graphicService.transformAABBBounds(t,n,e,!1,this),r.copy(n),r}doUpdateAABBBounds(){this.updateAABBBoundsStamp++;const t=super.doUpdateAABBBounds();return this.parent&&this.parent.addChildUpdateBoundTag(),this._emitCustomEvent("AAABBBoundsChange"),t}clearUpdateBoundTag(){this._updateTag&=_i.CLEAR_BOUNDS,this._childUpdateTag&=_i.CLEAR_BOUNDS}addUpdateBoundTag(){this._updateTag|=_i.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}addChildUpdateBoundTag(){this._childUpdateTag&_i.UPDATE_BOUNDS||(this._childUpdateTag|=_i.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}getTheme(){return this.theme.getTheme(this)}incrementalAppendChild(t){const e=super.appendChild(t);return this.stage&&e&&(e.stage=this.stage,e.layer=this.layer),this.addUpdateBoundTag(),this.getGraphicService().onAddIncremental(t,this,this.stage),e}incrementalClearChild(){super.removeAllChild(),this.addUpdateBoundTag(),this.getGraphicService().onClearIncremental(this,this.stage)}_updateChildToStage(t){return this.stage&&t&&t.setStage(this.stage,this.layer),this.addUpdateBoundTag(),t}appendChild(t,e=!0){const n=super.appendChild(t);return e&&this.stage&&n&&n.setStage(this.stage,this.layer),this.addUpdateBoundTag(),n}insertBefore(t,e){return this._updateChildToStage(super.insertBefore(t,e))}insertAfter(t,e){return this._updateChildToStage(super.insertAfter(t,e))}insertInto(t,e){return this._updateChildToStage(super.insertInto(t,e))}removeChild(t){const e=super.removeChild(t);return this.getGraphicService().onRemove(t),t.stage=null,this.addUpdateBoundTag(),e}removeAllChild(t=!1){this.forEachChildren(e=>{this.getGraphicService().onRemove(e),t&&e.isContainer&&e.removeAllChild(t)}),super.removeAllChild(),this.addUpdateBoundTag()}setStage(t,e){this.stage!==t&&(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this._onSetStage&&this._onSetStage(this,t,e),this.getGraphicService().onSetStage(this,t),this.forEachChildren(n=>{n.setStage(t,this.layer)}))}addUpdatePositionTag(){super.addUpdatePositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}addUpdateGlobalPositionTag(){super.addUpdateGlobalPositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){if(this._globalTransMatrix){if(this.parent){const e=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!!(this._updateTag&_i.UPDATE_GLOBAL_MATRIX)}_getChildByName(t,e){return this.find(n=>n.name===t,e)}createOrUpdateChild(t,e,n){let r=this._getChildByName(t);return r?r.setAttributes(e):(r=vt.graphicService.creator[n](e),r.name=t,this.add(r)),r}clone(){return new RD(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return RD.NOWORK_ANIMATE_ATTR}release(t){t&&this.forEachChildren(e=>{e.release(t)}),super.release()}};Lm.NOWORK_ANIMATE_ATTR=ss;function Uw(i){return new Lm(i)}class n2t extends Lm{get offscreen(){return this.layerHandler.offscreen}get layerMode(){return this.layerHandler.type}get width(){return this.stage?this.stage.width:0}get height(){return this.stage?this.stage.height:0}get viewWidth(){return this.stage?this.stage.viewWidth:0}get viewHeight(){return this.stage?this.stage.viewHeight:0}get dirtyBound(){throw new Error("")}get dpr(){return this._dpr}constructor(t,e,n,r){var s;super({}),this.stage=t,this.global=e,this.window=n,this.main=r.main,this.layerHandler=r.layerHandler,this.layerHandler.init(this,n,{main:r.main,canvasId:r.canvasId,width:this.viewWidth,height:this.viewHeight,zIndex:(s=r.zIndex)!==null&&s!==void 0?s:0}),this.layer=this,this.subLayers=new Map,this.theme=new c0,this.background="rgba(0, 0, 0, 0)",this.afterDrawCbs=[]}combineSubLayer(t=!0){const e=Array.from(this.subLayers.values()).sort((n,r)=>n.zIndex-r.zIndex);this.layerHandler.merge(e.map(n=>(n.layer.subLayers.size&&n.layer.combineSubLayer(t),n.layer.getNativeHandler()))),t&&e.forEach(n=>{n.group&&(n.group.incremental=0)}),e.forEach(n=>{vt.layerService.releaseLayer(this.stage,n.layer)}),this.subLayers.clear()}getNativeHandler(){return this.layerHandler}setStage(t,e){super.setStage(t,this)}pick(t,e){throw new Error("")}tryRenderSecondaryLayer(t,e){this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach(n=>{n.layer.renderCount=this.renderCount,n.layer.render(t,e)})}render(t,e){var n;this.layerHandler.render([this],{renderService:t.renderService,stage:this.stage,layer:this,viewBox:t.viewBox,transMatrix:t.transMatrix,background:(n=t.background)!==null&&n!==void 0?n:this.background,updateBounds:t.updateBounds},e),this.afterDrawCbs.forEach(r=>r(this)),this.tryRenderSecondaryLayer(t,e)}resize(t,e){this.layerHandler.resize(t,e)}resizeView(t,e){this.layerHandler.resizeView(t,e)}setDpr(t){this.layerHandler.setDpr(t)}afterDraw(t){this.afterDrawCbs.push(t)}startAnimate(t){throw new Error("")}setToFrame(t){throw new Error("")}prepare(t,e){}release(){super.release(),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach(t=>{vt.layerService.releaseLayer(this.stage,t.layer)})}drawTo(t,e){var n;this.layerHandler.drawTo(t,[this],Object.assign({background:(n=e.background)!==null&&n!==void 0?n:this.background,renderService:e.renderService,viewBox:e.viewBox,transMatrix:e.transMatrix,stage:this.stage,layer:this},e)),this.afterDrawCbs.forEach(r=>r(this))}}const pet=Symbol.for("TransformUtil"),get=Symbol.for("GraphicUtil"),AF=Symbol.for("LayerService"),met=Symbol.for("StaticLayerHandlerContribution"),r2t=Symbol.for("DynamicLayerHandlerContribution"),s2t=Symbol.for("VirtualLayerHandlerContribution");var tv,a2t=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},o2t=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};let ev=tv=class{static GenerateLayerId(){return`${tv.idprefix}_${tv.prefix_count++}`}constructor(){this.layerMap=new Map,this.global=vt.global}tryInit(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}getStageLayer(i){return this.layerMap.get(i)}getRecommendedLayerType(i){return i||(this.staticLayerCountInEnv!==0?"static":this.dynamicLayerCountInEnv!==0?"dynamic":"virtual")}getLayerHandler(i){let t;return t=i==="static"?te.get(met):i==="dynamic"?te.get(r2t):te.get(s2t),t}createLayer(i,t={main:!1}){var e;this.tryInit();let n=this.getRecommendedLayerType(t.layerMode);n=t.main||t.canvasId?"static":n;const r=this.getLayerHandler(n),s=new n2t(i,this.global,i.window,Object.assign(Object.assign({main:!1},t),{layerMode:n,canvasId:(e=t.canvasId)!==null&&e!==void 0?e:tv.GenerateLayerId(),layerHandler:r})),a=this.layerMap.get(i)||[];return a.push(s),this.layerMap.set(i,a),this.staticLayerCountInEnv--,s}prepareStageLayer(i){let t;i.forEachChildren(e=>{const n=e.getNativeHandler();n.type==="virtual"?(n.mainHandler=t,t.secondaryHandlers.push(n)):(t=n,t.secondaryHandlers=[])})}releaseLayer(i,t){t.release();const e=this.layerMap.get(i)||[];this.layerMap.set(i,e.filter(n=>n!==t))}layerCount(i){return(this.layerMap.get(i)||[]).length}restLayerCount(i){return this.global.env==="browser"?10:0}releaseStage(i){this.layerMap.delete(i)}};ev.idprefix="visactor_layer",ev.prefix_count=0,ev=tv=a2t([Rt(),o2t("design:paramtypes",[])],ev);const l2t=new re(i=>{i(oF).to(_D).inSingletonScope(),i(jw).to(wD),i(get).to(AD).inSingletonScope(),i(pet).to(kD).inSingletonScope(),i(AF).to(ev).inSingletonScope()});function Zd(i,t){return!(!i&&!t)}function Gg(i,t){let e;return e=J(i)?i.some(n=>n||n===void 0):!!i,e&&t>0}function Qd(i,t,e){return e&&i*t>0}function kF(i,t,e,n,r){return r&&i*t>0&&e!==0&&n!==0}function OD(i,t){return i*t>0}function CF(i,t,e,n,r){return r?i*t>0:i*t>0&&e!==0&&n!==0}function u2t(i,t,e,n,r,s,a,o){const l=e-i,u=n-t,c=a-r,h=o-s;let d=h*l-c*u;return d*d<Ye?[]:(d=(c*(t-s)-h*(i-r))/d,[i+d*l,t+d*u])}function zc(i,t,e,n,r,s,a){const o=i-e,l=t-n,u=(a?s:-s)/Math.sqrt(o*o+l*l),c=u*l,h=-u*o,d=i+c,f=t+h,p=e+c,g=n+h,m=(d+p)/2,_=(f+g)/2,v=p-d,y=g-f,b=v*v+y*y,x=r-s,S=d*g-p*f,w=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*b-S*S));let A=(S*y-v*w)/b,k=(-S*v-y*w)/b;const C=(S*y+v*w)/b,M=(-S*v+y*w)/b,R=A-m,P=k-_,O=C-m,T=M-_;return R*R+P*P>O*O+T*T&&(A=C,k=M),{cx:A,cy:k,x01:-c,y01:-h,x11:A*(r/x-1),y11:k*(r/x-1)}}function _et(i,t,e,n,r){const s=xe(e-t),a=i.getParsedCornerRadius(),o=J(a),{outerDeltaAngle:l,innerDeltaAngle:u,outerStartAngle:c,outerEndAngle:h,innerEndAngle:d,innerStartAngle:f}=i.getParsePadAngle(t,e),p=o?a[0]:a,g=o?a[1]:a,m=o?a[2]:a,_=o?a[3]:a,v=Math.max(g,p),y=Math.max(m,_);let b=v,x=y;const S=r*Ri(c),w=r*fi(c),A=n*Ri(d),k=n*fi(d);let C,M,R,P;if((y>Ye||v>Ye)&&(C=r*Ri(h),M=r*fi(h),R=n*Ri(f),P=n*fi(f),s<Xe)){const O=u2t(S,w,R,P,C,M,A,k);if(O){const T=S-O[0],D=w-O[1],B=C-O[0],I=M-O[1],F=1/fi(qPt((T*B+D*I)/(ro(T*T+D*D)*ro(B*B+I*I)))/2),j=ro(O[0]*O[0]+O[1]*O[1]);x=gn(y,(n-j)/(F-1)),b=gn(v,(r-j)/(F+1))}}return{outerDeltaAngle:l,xors:S,yors:w,xirs:R,yirs:P,xore:C,yore:M,xire:A,yire:k,limitedOcr:b,limitedIcr:x,outerCornerRadiusStart:p,outerCornerRadiusEnd:g,maxOuterCornerRadius:v,maxInnerCornerRadius:y,outerStartAngle:c,outerEndAngle:h,innerDeltaAngle:u,innerEndAngle:d,innerStartAngle:f,innerCornerRadiusStart:_,innerCornerRadiusEnd:m}}function DD(i,t,e,n,r,s,a){const{startAngle:o,endAngle:l}=i.getParsedAngle(),u=xe(l-o),c=l>o;let h=!1;if(r<s){const d=r;r=s,s=d}if(r<=Ye)t.moveTo(e,n);else if(u>=qt-Ye)t.moveTo(e+r*Ri(o),n+r*fi(o)),t.arc(e,n,r,o,l,!c),s>Ye&&(t.moveTo(e+s*Ri(l),n+s*fi(l)),t.arc(e,n,s,l,o,c));else{const{outerDeltaAngle:d,xors:f,yors:p,xirs:g,yirs:m,limitedOcr:_,outerCornerRadiusStart:v,outerCornerRadiusEnd:y,maxOuterCornerRadius:b,xore:x,yore:S,xire:w,yire:A,outerStartAngle:k,outerEndAngle:C,limitedIcr:M,innerDeltaAngle:R,innerEndAngle:P,innerStartAngle:O,innerCornerRadiusStart:T,innerCornerRadiusEnd:D,maxInnerCornerRadius:B}=_et(i,o,l,s,r);if(d<.001)a&&(a[3]||a[1])&&t.moveTo(e+f,n+p),h=!0;else if(_>Ye){const I=gn(v,_),F=gn(y,_),j=zc(g,m,f,p,r,I,Number(c)),H=zc(x,S,w,A,r,F,Number(c));_<b&&I===F?!a||a[0]?(t.moveTo(e+j.cx+j.x01,n+j.cy+j.y01),t.arc(e+j.cx,n+j.cy,_,ri(j.y01,j.x01),ri(H.y01,H.x01),!c)):t.moveTo(e+j.cx+_*Ri(ri(H.y01,H.x01)),n+j.cy+_*fi(ri(H.y01,H.x01))):!a||a[0]?(t.moveTo(e+j.cx+j.x01,n+j.cy+j.y01),I>0&&t.arc(e+j.cx,n+j.cy,I,ri(j.y01,j.x01),ri(j.y11,j.x11),!c),t.arc(e,n,r,ri(j.cy+j.y11,j.cx+j.x11),ri(H.cy+H.y11,H.cx+H.x11),!c),F>0&&t.arc(e+H.cx,n+H.cy,F,ri(H.y11,H.x11),ri(H.y01,H.x01),!c)):F>0?t.moveTo(e+H.cx+F*Ri(ri(H.y01,H.x01)),n+H.cy+F*fi(ri(H.y01,H.x01))):t.moveTo(e+x,n+r*fi(C))}else!a||a[0]?(t.moveTo(e+f,n+p),t.arc(e,n,r,k,C,!c)):t.moveTo(e+r*Ri(C),n+r*fi(C));if(!(s>Ye)||R<.001)!a||a[1]?t.lineTo(e+w,n+A):t.moveTo(e+w,n+A),h=!0;else if(M>Ye){const I=gn(T,M),F=gn(D,M),j=zc(w,A,x,S,s,-F,Number(c)),H=zc(f,p,g,m,s,-I,Number(c));if(!a||a[1]?t.lineTo(e+j.cx+j.x01,n+j.cy+j.y01):t.moveTo(e+j.cx+j.x01,n+j.cy+j.y01),M<B&&I===F){const U=ri(H.y01,H.x01);!a||a[2]?t.arc(e+j.cx,n+j.cy,M,ri(j.y01,j.x01),U,!c):t.moveTo(e+j.cx+Ri(U),n+j.cy+fi(U))}else!a||a[2]?(F>0&&t.arc(e+j.cx,n+j.cy,F,ri(j.y01,j.x01),ri(j.y11,j.x11),!c),t.arc(e,n,s,ri(j.cy+j.y11,j.cx+j.x11),ri(H.cy+H.y11,H.cx+H.x11),c),I>0&&t.arc(e+H.cx,n+H.cy,I,ri(H.y11,H.x11),ri(H.y01,H.x01),!c)):I>0?t.moveTo(e+H.cx+I*Ri(ri(H.y01,H.x01)),n+H.cy+I*fi(ri(H.y01,H.x01))):t.moveTo(e+g,n+m)}else!a||a[1]?t.lineTo(e+w,n+A):t.moveTo(e+w,n+A),!a||a[2]?t.arc(e,n,s,P,O,c):t.moveTo(e+s*Ri(O),n+s*fi(O))}return a?a[3]&&t.lineTo(e+r*Ri(o),n+r*fi(o)):t.closePath(),h}const ID=Symbol.for("ArcRenderContribution"),LD=Symbol.for("AreaRenderContribution"),BD=Symbol.for("CircleRenderContribution"),vet=Symbol.for("GroupRenderContribution"),FD=Symbol.for("ImageRenderContribution"),zD=Symbol.for("PathRenderContribution"),ND=Symbol.for("PolygonRenderContribution"),iv=Symbol.for("RectRenderContribution"),jD=Symbol.for("SymbolRenderContribution"),HD=Symbol.for("TextRenderContribution"),MF=Symbol.for("InteractiveSubRenderContribution");function h0(i,t){return i==="end"||i==="right"?-t:i==="center"?-t/2:0}function Gw(i,t,e,n=0){return i==="middle"?-t/2:i==="top"?0:i==="bottom"?n-t:i&&i!=="alphabetic"?0:(e||(e=t),-(t-e)/2-.79*e)}function c2t(i){const t={},e=n=>/^\d+(\.\d+)?$/.test(`${n}`)?`${n}px`:`${n}`;return["textAlign","fontFamily","fontVariant","fontStyle","fontWeight"].forEach(n=>{i[n]&&(t[vW(n)]=i[n])}),["fontSize","lineHeight"].forEach(n=>{const r=vW(n);N(i[n])||(t[r]=e(i[n]))}),L(i.maxLineWidth)&&(t["max-width"]=e(i.maxLineWidth)),i.underline?t["text-decoration"]="underline":i.lineThrough&&(t["text-decoration"]="line-through"),i.fill&&Ht(i.fill)&&(t.color=i.fill),t}var h2t=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},d2t=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},f2t=function(i,t){return function(e,n){t(e,n,i)}};function yet(i,t,e){var n;const{x:r=e.x,y:s=e.y,z:a=e.z,dx:o=e.dx,dy:l=e.dy,dz:u=e.dz,scaleX:c=e.scaleX,scaleY:h=e.scaleY,scaleZ:d=e.scaleZ,alpha:f=e.alpha,beta:p=e.beta,angle:g=e.angle,anchor3d:m=t.attribute.anchor,anchor:_}=t.attribute,v=[0,0,0];if(m){if(typeof m[0]=="string"){const y=parseFloat(m[0])/100,b=t.AABBBounds;v[0]=b.x1+(b.x2-b.x1)*y}else v[0]=m[0];if(typeof m[1]=="string"){const y=parseFloat(m[1])/100,b=t.AABBBounds;v[1]=b.x1+(b.x2-b.x1)*y}else v[1]=m[1];v[2]=(n=m[2])!==null&&n!==void 0?n:0}if(bF(i),k_(i,i,[r+o,s+l,a+u]),k_(i,i,[v[0],v[1],v[2]]),NLt(i,i,p),jLt(i,i,f),k_(i,i,[-v[0],-v[1],v[2]]),VLt(i,i,[c,h,d]),g){const y=Fi.allocate(),b=[0,0];if(_){if(typeof m[0]=="string"){const x=parseFloat(m[0])/100,S=t.AABBBounds;b[0]=S.x1+(S.x2-S.x1)*x}else b[0]=m[0];if(typeof m[1]=="string"){const x=parseFloat(m[1])/100,S=t.AABBBounds;b[1]=S.x1+(S.x2-S.x1)*x}else b[1]=m[1]}k_(y,y,[b[0],b[1],0]),HLt(y,y,g),k_(y,y,[-b[0],-b[1],0]),qd(i,i,y)}}function p2t(i){const{alpha:t,beta:e}=i.attribute;return t||e}let VD=class{constructor(i){this.creator=i,this.hooks={onAttributeUpdate:new Xr(["graphic"]),onSetStage:new Xr(["graphic","stage"]),onRemove:new Xr(["graphic"]),onRelease:new Xr(["graphic"]),onAddIncremental:new Xr(["graphic","group","stage"]),onClearIncremental:new Xr(["graphic","group","stage"]),beforeUpdateAABBBounds:new Xr(["graphic","stage","willUpdate","aabbBounds"]),afterUpdateAABBBounds:new Xr(["graphic","stage","aabbBounds","globalAABBBounds","selfChange"]),clearAABBBounds:new Xr(["graphic","stage","aabbBounds"])},this.tempAABBBounds1=new Gi,this.tempAABBBounds2=new Gi}onAttributeUpdate(i){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(i)}onSetStage(i,t){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(i,t)}onRemove(i){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(i)}onRelease(i){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(i)}onAddIncremental(i,t,e){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(i,t,e)}onClearIncremental(i,t){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(i,t)}beforeUpdateAABBBounds(i,t,e,n){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(i,t,e,n)}afterUpdateAABBBounds(i,t,e,n,r){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(i,t,e,n,r)}clearAABBBounds(i,t,e){this.hooks.clearAABBBounds.taps.length&&this.hooks.clearAABBBounds.call(i,t,e)}updatePathProxyAABBBounds(i,t){const e=typeof t.pathProxy=="function"?t.pathProxy(t.attribute):t.pathProxy;if(!e)return!1;const n=new uF(i);return qu(e.commandList,n,0,0),!0}updateHTMLTextAABBBounds(i,t,e,n){const{textAlign:r,textBaseline:s}=i;if(i.forceBoundsHeight!=null){const a=yt(i.forceBoundsHeight)?i.forceBoundsHeight:i.forceBoundsHeight(),o=Gw(s,a,a);e.set(e.x1,o,e.x2,o+a)}if(i.forceBoundsWidth!=null){const a=yt(i.forceBoundsWidth)?i.forceBoundsWidth:i.forceBoundsWidth(),o=h0(r,a);e.set(o,e.y1,o+a,e.y2)}}combindShadowAABBBounds(i,t){if(t&&t.shadowRoot){const e=t.shadowRoot.AABBBounds;i.union(e)}}transformAABBBounds(i,t,e,n,r){if(!t.empty()){const{scaleX:o=e.scaleX,scaleY:l=e.scaleY,stroke:u=e.stroke,shadowBlur:c=e.shadowBlur,lineWidth:h=e.lineWidth,pickStrokeBuffer:d=e.pickStrokeBuffer,strokeBoundsBuffer:f=e.strokeBoundsBuffer}=i,p=this.tempAABBBounds1,g=this.tempAABBBounds2;if(u&&h){const m=(h+d)/Math.abs(o+l);$w(p,m,n,f),t.union(p),p.setValue(g.x1,g.y1,g.x2,g.y2)}if(c){const{shadowOffsetX:m=e.shadowOffsetX,shadowOffsetY:_=e.shadowOffsetY}=i,v=c/Math.abs(o+l)*2;$w(p,v,!1,f+1),p.translate(m,_),t.union(p)}}if(this.combindShadowAABBBounds(t,r),t.empty())return;let s=!0;const a=r.transMatrix;r&&r.isContainer&&(s=!(a.a===1&&a.b===0&&a.c===0&&a.d===1&&a.e===0&&a.f===0)),s&&GB(t,t,a)}validCheck(i,t,e,n){if(!n||i.forceBoundsHeight!=null||i.forceBoundsWidth!=null||n.shadowRoot||n.isContainer)return!0;const{visible:r=t.visible}=i;return!(!n.valid||!r)||(e.empty()||(n.parent&&e.transformWithMatrix(n.parent.globalTransMatrix),this.clearAABBBounds(n,n.stage,e),e.clear()),!1)}updateTempAABBBounds(i){const t=this.tempAABBBounds1,e=this.tempAABBBounds2;return t.setValue(i.x1,i.y1,i.x2,i.y2),e.setValue(i.x1,i.y1,i.x2,i.y2),{tb1:t,tb2:e}}};VD=h2t([Rt(),f2t(0,ge(det)),d2t("design:paramtypes",[Object])],VD);const Lb=(i,t,e)=>{const{outerBorder:n,shadowBlur:r=t.shadowBlur}=i;if(n){const s=t.outerBorder,{distance:a=s.distance,lineWidth:o=s.lineWidth}=n;e.expand(a+(r+o)/2)}return e},q$=["radius","startAngle","endAngle",...wa];class d0 extends En{constructor(t={radius:1}){super(t),this.type="circle",this.numberType=bM}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{startAngle:t,endAngle:e,radius:n}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(n)}getGraphicTheme(){return le(this).circle}updateAABBBounds(t,e,n,r){this.updatePathProxyAABBBounds(n)||(r?this.updateCircleAABBBoundsImprecise(t,e,n):this.updateCircleAABBBoundsAccurate(t,e,n));const{tb1:s,tb2:a}=vt.graphicService.updateTempAABBBounds(n);return Lb(t,e,s),n.union(s),s.setValue(a.x1,a.y1,a.x2,a.y2),this.widthWithoutTransform=n.x2-n.x1,this.heightWithoutTransform=n.y2-n.y1,vt.graphicService.transformAABBBounds(t,n,e,!1,this),n}updateCircleAABBBoundsImprecise(t,e,n){const{radius:r=e.radius}=t;return n.set(-r,-r,r,r),n}updateCircleAABBBoundsAccurate(t,e,n){const{startAngle:r=e.startAngle,endAngle:s=e.endAngle,radius:a=e.radius}=t;return s-r>qt-Ye?n.set(-a,-a,a,a):MD(r,s,a,n),n}needUpdateTags(t){return super.needUpdateTags(t,q$)}needUpdateTag(t){return super.needUpdateTag(t,q$)}toCustomPath(){var t,e,n;let r=super.toCustomPath();if(r)return r;const s=this.attribute,a=(t=s.radius)!==null&&t!==void 0?t:this.getDefaultAttribute("radius"),o=(e=s.startAngle)!==null&&e!==void 0?e:this.getDefaultAttribute("startAngle"),l=(n=s.endAngle)!==null&&n!==void 0?n:this.getDefaultAttribute("endAngle");return r=new Ki,r.arc(0,0,a,o,l),r}clone(){return new d0(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d0.NOWORK_ANIMATE_ATTR}}d0.NOWORK_ANIMATE_ATTR=ss;function g2t(i){return new d0(i)}class Z${constructor(t,e,n){this.fontFamily=t,this.textOptions=e,this.textMeasure=n}LayoutBBox(t,e,n,r){if(t.xOffset=e==="left"||e==="start"?0:e==="center"?t.width/-2:e==="right"||e==="end"?-t.width:0,n==="top")t.yOffset=0;else if(n==="middle")t.yOffset=t.height/-2;else if(n==="alphabetic"){let s=.79;if(r.length===1){const a=r[0];s=a.ascent/(a.ascent+a.descent)}t.yOffset=t.height*-s}else t.yOffset=-t.height;return t}GetLayoutByLines(t,e,n,r,s="",a,o){const{lineWidth:l,suffixPosition:u="end",measureMode:c=Sd.actualBounding,keepCenterInLine:h=!1}=o??{};t=t.map(g=>g.toString());const d=[],f=[0,0];if(typeof l=="number"&&l!==1/0){let g;for(let m=0,_=t.length;m<_;m++){const v=this.textMeasure.measureTextPixelADscentAndWidth(t[m],this.textOptions,c);let y=t[m].toString();if(v.width>l){const b=this.textMeasure.clipTextWithSuffix(t[m],this.textOptions,l,s,a,u);y=b.str,g=b.width}else g=v.width;d.push({str:y,width:g,ascent:v.ascent,descent:v.descent,keepCenterInLine:h})}f[0]=l}else{let g,m,_=0;for(let v=0,y=t.length;v<y;v++){m=t[v];const b=this.textMeasure.measureTextPixelADscentAndWidth(t[v],this.textOptions,c);g=b.width,_=Math.max(_,g),d.push({str:m,width:g,ascent:b.ascent,descent:b.descent,keepCenterInLine:h})}f[0]=_}f[1]=d.length*r,f[0]=d.reduce((g,m)=>Math.max(g,m.width),0);const p={xOffset:0,yOffset:0,width:f[0],height:f[1]};return this.LayoutBBox(p,e,n,d),this.layoutWithBBox(p,d,e,n,r)}layoutWithBBox(t,e,n,r,s){const a=[0,0],o=e.length*s;r==="top"||(r==="middle"?a[1]=(t.height-o)/2:r==="bottom"&&(a[1]=t.height-o));for(let l=0;l<e.length;l++)this.lineOffset(t,e[l],n,r,s,a);return{bbox:t,lines:e,fontFamily:this.fontFamily,fontSize:this.textOptions.fontSize,fontWeight:this.textOptions.fontWeight,lineHeight:s,textAlign:n,textBaseline:r}}lineOffset(t,e,n,r,s,a){if(n==="left"||n==="start"?e.leftOffset=0:n==="center"?e.leftOffset=(t.width-e.width)/2:n!=="right"&&n!=="end"||(e.leftOffset=t.width-e.width),e.topOffset=s/2+(e.ascent-e.descent)/2+a[1],!e.keepCenterInLine){const l=e.ascent+e.descent+0;if(l<s-0&&(r==="bottom"?e.topOffset+=(s-l)/2:r==="top"&&(e.topOffset-=(s-l)/2)),r==="alphabetic"){const u=s/(e.ascent+e.descent);e.topOffset=s/2+(e.ascent-e.descent)/2*u+a[1]}}return a[1]+=s,e}}const Q$=["text","maxLineWidth","maxWidth","textAlign","textBaseline","heightLimit","lineClamp","fontSize","fontFamily","fontWeight","ellipsis","lineHeight","direction","wordBreak","heightLimit","lineClamp",...wa];class Fa extends En{get font(){const t=this.getGraphicTheme();return this._font||(this._font=bw(this.attribute,t)),this._font}get clipedText(){var t;const e=this.attribute,n=this.getGraphicTheme(),r=this.getMaxWidth(n);return Number.isFinite(r)?(this.tryUpdateAABBBounds(),this.cache.clipedText):((t=e.text)!==null&&t!==void 0?t:n.text).toString()}get clipedWidth(){return this.tryUpdateAABBBounds(),this.cache.clipedWidth}get cliped(){var t,e;const n=this.getGraphicTheme(),r=this.attribute,s=this.getMaxWidth(n);if(!Number.isFinite(s))return!1;const{text:a}=this.attribute;if(this.tryUpdateAABBBounds(),(e=(t=this.cache)===null||t===void 0?void 0:t.layoutData)===null||e===void 0?void 0:e.lines){let o="";return this.cache.layoutData.lines.forEach(l=>{o+=l.str}),(Array.isArray(a)?a.join(""):a).toString()!==o}return r.direction==="vertical"&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map(o=>o.text).join("")!==r.text.toString():this.clipedText!=null&&this.clipedText!==r.text.toString()}get multilineLayout(){return this.tryUpdateAABBBounds(),this.cache.layoutData}get isMultiLine(){return Array.isArray(this.attribute.text)||this.attribute.whiteSpace==="normal"}constructor(t={text:"",fontSize:16}){super(t),this.type="text",this.numberType=kM,this.cache={}}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{text:t}=this.attribute;return J(t)?!t.every(e=>e==null||e===""):t!=null&&t!==""}getGraphicTheme(){return le(this).text}doUpdateOBBBounds(){const t=this.getGraphicTheme();this._OBBBounds.clear();const e=this.attribute,{angle:n=t.angle}=e;if(!n){const u=this.AABBBounds;return this._OBBBounds.setValue(u.x1,u.y1,u.x2,u.y2),this._OBBBounds}this.obbText||(this.obbText=new Fa({})),this.obbText.setAttributes(Object.assign(Object.assign({},e),{angle:0}));const r=this.obbText.AABBBounds,{x:s,y:a}=e,o={x:(r.x1+r.x2)/2,y:(r.y1+r.y2)/2},l=Dl(o,n,{x:s,y:a});return this._OBBBounds.copy(r),this._OBBBounds.translate(l.x-o.x,l.y-o.y),this._OBBBounds.angle=n,this._OBBBounds}updateAABBBounds(t,e,n){const{text:r=e.text}=this.attribute;Array.isArray(r)?this.updateMultilineAABBBounds(r):this.updateSingallineAABBBounds(r);const{tb1:s}=vt.graphicService.updateTempAABBBounds(n),{scaleX:a=e.scaleX,scaleY:o=e.scaleY,shadowBlur:l=e.shadowBlur,strokeBoundsBuffer:u=e.strokeBoundsBuffer}=t;if(l){const c=l/Math.abs(a+o);$w(s,c,!0,u),n.union(s)}return vt.graphicService.combindShadowAABBBounds(n,this),t.forceBoundsHeight==null&&t.forceBoundsWidth==null||vt.graphicService.updateHTMLTextAABBBounds(t,e,n),this.widthWithoutTransform=n.x2-n.x1,this.heightWithoutTransform=n.y2-n.y1,GB(n,n,this.transMatrix),n}updateSingallineAABBBounds(t){this.updateMultilineAABBBounds([t]);const e=this.cache.layoutData;if(e&&e.lines&&e.lines.length){const n=e.lines[0];this.cache.clipedText=n.str,this.cache.clipedWidth=n.width}return this._AABBBounds}updateMultilineAABBBounds(t){const e=this.getGraphicTheme(),{direction:n=e.direction,underlineOffset:r=e.underlineOffset}=this.attribute,s=n==="horizontal"?this.updateHorizontalMultilineAABBBounds(t):this.updateVerticalMultilineAABBBounds(t);return n==="horizontal"&&r&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+r),s}guessLineHeightBuf(t){return t?.1*t:0}updateHorizontalMultilineAABBBounds(t){var e,n;const r=this.getGraphicTheme(),s=this.attribute,{fontFamily:a=r.fontFamily,textAlign:o=r.textAlign,textBaseline:l=r.textBaseline,fontSize:u=r.fontSize,fontWeight:c=r.fontWeight,ellipsis:h=r.ellipsis,maxLineWidth:d,stroke:f=r.stroke,wrap:p=r.wrap,measureMode:g=r.measureMode,lineWidth:m=r.lineWidth,whiteSpace:_=r.whiteSpace,suffixPosition:v=r.suffixPosition,ignoreBuf:y=r.ignoreBuf,keepCenterInLine:b=r.keepCenterInLine}=s,x=y?0:this.guessLineHeightBuf(u),S=this.getLineHeight(s,r,x);if(_==="normal"||p)return this.updateWrapAABBBounds(t);if(!this.shouldUpdateShape()&&(!((e=this.cache)===null||e===void 0)&&e.layoutData)){const C=this.cache.layoutData.bbox;return this._AABBBounds.set(C.xOffset,C.yOffset,C.xOffset+C.width,C.yOffset+C.height),f&&this._AABBBounds.expand(m/2),this._AABBBounds}const w=vt.graphicUtil.getTextMeasureInstance(this.textMeasureId||((n=this.stage)===null||n===void 0?void 0:n.textMeasureId)),A=new Z$(a,{fontSize:u,fontWeight:c,fontFamily:a,lineHeight:S},w).GetLayoutByLines(t,o,l,S,h===!0?r.ellipsis:h||void 0,!1,{lineWidth:d,suffixPosition:v,measureMode:g,keepCenterInLine:b}),{bbox:k}=A;return this.cache.layoutData=A,this.clearUpdateShapeTag(),this._AABBBounds.set(k.xOffset,k.yOffset,k.xOffset+k.width,k.yOffset+k.height),f&&this._AABBBounds.expand(m/2),this._AABBBounds}updateWrapAABBBounds(t){var e,n,r,s;const a=this.getGraphicTheme(),{fontFamily:o=a.fontFamily,textAlign:l=a.textAlign,textBaseline:u=a.textBaseline,fontSize:c=a.fontSize,ellipsis:h=a.ellipsis,maxLineWidth:d,stroke:f=a.stroke,lineWidth:p=a.lineWidth,wordBreak:g=a.wordBreak,fontWeight:m=a.fontWeight,ignoreBuf:_=a.ignoreBuf,measureMode:v=a.measureMode,suffixPosition:y=a.suffixPosition,heightLimit:b=0,lineClamp:x,keepCenterInLine:S=a.keepCenterInLine}=this.attribute,w=_?0:this.guessLineHeightBuf(c),A=this.getLineHeight(this.attribute,a,w);if(!this.shouldUpdateShape()&&(!((e=this.cache)===null||e===void 0)&&e.layoutData)){const I=this.cache.layoutData.bbox;return this._AABBBounds.set(I.xOffset,I.yOffset,I.xOffset+I.width,I.yOffset+I.height),f&&this._AABBBounds.expand(p/2),this._AABBBounds}const k=vt.graphicUtil.getTextMeasureInstance(this.textMeasureId||((n=this.stage)===null||n===void 0?void 0:n.textMeasureId)),C={fontSize:c,fontWeight:m,fontFamily:o,lineHeight:A},M=new Z$(o,C,k),R=J(t)?t.map(I=>I.toString()):[t.toString()],P=[],O=[0,0];let T=1/0;if(b>0&&(T=Math.max(Math.floor(b/A),1)),x&&(T=Math.min(T,x)),typeof d=="number"&&d!==1/0){if(d>0)for(let F=0;F<R.length;F++){const j=R[F];let H=!0;if(F===T-1){const Z=k.clipTextWithSuffix(j,C,d,h,!1,y,F!==R.length-1),at=k.measureTextPixelADscentAndWidth(Z.str,C,v);P.push({str:Z.str,width:Z.width,ascent:at.ascent,descent:at.descent,keepCenterInLine:S});break}const U=k.clipText(j,C,d,g!=="break-all",g==="keep-all");if(j!==""&&U.str===""||U.wordBreaked){if(h){const Z=k.clipTextWithSuffix(j,C,d,h,!1,y);U.str=(r=Z.str)!==null&&r!==void 0?r:"",U.width=(s=Z.width)!==null&&s!==void 0?s:0}else U.str="",U.width=0;H=!1}const K=k.measureTextPixelADscentAndWidth(U.str,C,v);P.push({str:U.str,width:U.width,ascent:K.ascent,descent:K.descent,keepCenterInLine:S});let q=U.str.length;if(!U.wordBreaked||j!==""&&U.str===""||(H=!0,q=U.wordBreaked),U.str.length!==j.length){if(H){let Z=j.substring(q);g==="keep-all"&&(Z=Z.replace(/^\s+/g,"")),R.splice(F+1,0,Z)}}}let I=0;P.forEach(F=>{I=Math.max(I,F.width)}),O[0]=I}else{let I,F,j=0;for(let H=0,U=R.length;H<U;H++){if(H===T-1){const q=k.clipTextWithSuffix(R[H],C,d,h,!1,y),Z=k.measureTextPixelADscentAndWidth(q.str,C,v);P.push({str:q.str,width:q.width,ascent:Z.ascent,descent:Z.descent,keepCenterInLine:S}),j=Math.max(j,q.width);break}F=R[H],I=k.measureTextWidth(F,C),j=Math.max(j,I);const K=k.measureTextPixelADscentAndWidth(F,C,v);P.push({str:F,width:I,ascent:K.ascent,descent:K.descent,keepCenterInLine:S})}O[0]=j}O[1]=P.length*A;const D={xOffset:0,yOffset:0,width:O[0],height:O[1]};M.LayoutBBox(D,l,u,P);const B=M.layoutWithBBox(D,P,l,u,A);return this.cache.layoutData=B,this.clearUpdateShapeTag(),this._AABBBounds.set(D.xOffset,D.yOffset,D.xOffset+D.width,D.yOffset+D.height),f&&this._AABBBounds.expand(p/2),this._AABBBounds}updateVerticalMultilineAABBBounds(t){var e,n,r;const s=this.getGraphicTheme(),a=vt.graphicUtil.getTextMeasureInstance(this.textMeasureId||((e=this.stage)===null||e===void 0?void 0:e.textMeasureId));let o;const l=this.attribute,{maxLineWidth:u=s.maxLineWidth,ellipsis:c=s.ellipsis,fontFamily:h=s.fontFamily,fontSize:d=s.fontSize,fontWeight:f=s.fontWeight,stroke:p=s.stroke,lineWidth:g=s.lineWidth,verticalMode:m=s.verticalMode,suffixPosition:_=s.suffixPosition}=l,v=this.getLineHeight(l,s,0);let{textAlign:y=s.textAlign,textBaseline:b=s.textBaseline}=l;if(!m){const k=y;y=(n=Fa.baselineMapAlign[b])!==null&&n!==void 0?n:"left",b=(r=Fa.alignMapBaseline[k])!==null&&r!==void 0?r:"top"}if(o=0,!this.shouldUpdateShape()&&this.cache){this.cache.verticalList.forEach(R=>{const P=R.reduce((O,T)=>O+T.width,0);o=Nn(P,o)});const k=h0(y,o),C=this.cache.verticalList.length*v,M=Gw(b,C,d);return this._AABBBounds.set(M,k,M+C,k+o),p&&this._AABBBounds.expand(g/2),this._AABBBounds}const x=t.map(k=>DLt(k.toString()));x.forEach((k,C)=>{if(Number.isFinite(u))if(c){const M=c===!0?s.ellipsis:c,R=a.clipTextWithSuffixVertical(k,{fontSize:d,fontWeight:f,fontFamily:h},u,M,!1,_);x[C]=R.verticalList,o=R.width}else{const M=a.clipTextVertical(k,{fontSize:d,fontWeight:f,fontFamily:h},u,!1);x[C]=M.verticalList,o=M.width}else o=0,k.forEach(M=>{const R=M.direction===fg.HORIZONTAL?d:a.measureTextWidth(M.text,{fontSize:d,fontWeight:f,fontFamily:h});o+=R,M.width=R})}),this.cache.verticalList=x,this.clearUpdateShapeTag(),this.cache.verticalList.forEach(k=>{const C=k.reduce((M,R)=>M+R.width,0);o=Nn(C,o)});const S=h0(y,o),w=this.cache.verticalList.length*v,A=Gw(b,w,d);return this._AABBBounds.set(A,S,A+w,S+o),p&&this._AABBBounds.expand(g/2),this._AABBBounds}getMaxWidth(t){var e,n;const r=this.attribute;return(n=(e=r.maxLineWidth)!==null&&e!==void 0?e:r.maxWidth)!==null&&n!==void 0?n:t.maxWidth}getLineHeight(t,e,n){var r;return(r=mM(t.lineHeight,t.fontSize||e.fontSize))!==null&&r!==void 0?r:(t.fontSize||e.fontSize)+n}needUpdateTags(t,e=Q$){return super.needUpdateTags(t,e)}needUpdateTag(t,e=Q$){return super.needUpdateTag(t,e)}_interpolate(t,e,n,r,s){t==="text"&&(s.text=r)}clone(){return new Fa(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Fa.NOWORK_ANIMATE_ATTR}getBaselineMapAlign(){return Fa.baselineMapAlign}getAlignMapBaseline(){return Fa.alignMapBaseline}}Fa.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,direction:1,textAlign:1,textBaseline:1,fontFamily:1,fontWeight:1},ss),Fa.baselineMapAlign={top:"left",bottom:"right",middle:"center"},Fa.alignMapBaseline={left:"top",right:"bottom",center:"middle"};function Bb(i){return new Fa(i)}const m2t=(i,t,e)=>{const{outerBorder:n,shadowBlur:r=t.shadowBlur,strokeBoundsBuffer:s=t.strokeBoundsBuffer}=i;if(n){const a=t.outerBorder,{distance:o=a.distance,lineWidth:l=a.lineWidth}=n;$w(e,o+(r+l)/2,!0,s)}return e},J$=["symbolType","size",...wa];let CM=class WD extends En{constructor(t={symbolType:"circle"}){super(t),this.type="symbol",this.numberType=AM}getParsedPath(){return this.shouldUpdateShape()&&(this._parsedPath=this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}getParsedPath2D(t=0,e=0,n=1){let r=null;try{r=new Path2D}catch{return null}const s=this.getParsedPath();if(!s)return null;s.draw(r,n,t,e)}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{size:t}=this.attribute;return J(t)?t.length===2&&t.every(this._validNumber):this._validNumber(t)}doUpdateParsedPath(){const{symbolType:t="circle"}=this.attribute;return super.parsePath(t)}getGraphicTheme(){return le(this).symbol}updateAABBBounds(t,e,n,r){this.updatePathProxyAABBBounds(n)||(r?this.updateSymbolAABBBoundsImprecise(t,e,n):this.updateSymbolAABBBoundsAccurate(t,e,n));const{tb1:s,tb2:a}=vt.graphicService.updateTempAABBBounds(n);m2t(t,e,s),n.union(s),s.setValue(a.x1,a.y1,a.x2,a.y2),this.widthWithoutTransform=n.x2-n.x1,this.heightWithoutTransform=n.y2-n.y1,this.x1WithoutTransform=n.x1,this.y1WithoutTransform=n.y1;const{lineJoin:o=e.lineJoin}=t;return vt.graphicService.transformAABBBounds(t,n,e,o==="miter",this),n}updateSymbolAABBBoundsImprecise(t,e,n){const{size:r=e.size}=t;if(J(r))n.set(-r[0]/2,-r[1]/2,r[0]/2,r[1]/2);else{const s=r/2;n.set(-s,-s,s,s)}return n}updateSymbolAABBBoundsAccurate(t,e,n){const{size:r=e.size}=t,s=this.getParsedPath();return s&&s.bounds(r,n),n}needUpdateTags(t){return super.needUpdateTags(t,J$)}needUpdateTag(t){return super.needUpdateTag(t,J$)}toCustomPath(){const t=this.getParsedPath();if(!t)return null;const e=this.attribute.size,n=J(e)?e:[e,e];return t.path?new Ki().fromCustomPath2D(t.path,0,0,n[0],n[1]):new Ki().fromString(t.pathStr,0,0,n[0],n[1])}clone(){return new WD(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return WD.NOWORK_ANIMATE_ATTR}};CM.NOWORK_ANIMATE_ATTR=Object.assign({symbolType:1},ss);function mf(i){return new CM(i)}const t5=["segments","points","curveType","curveTension",...wa];let bet=class $D extends En{constructor(t={}){super(t),this.type="line",this.numberType=Ib}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;const{points:t,segments:e}=this.attribute;return e?e.length!==0:!!t&&!(t.length<=1)}_interpolate(t,e,n,r,s){t==="points"&&(s.points=pM(n,r,e))}getGraphicTheme(){return le(this).line}updateAABBBounds(t,e,n){this.updatePathProxyAABBBounds(n)||(t.segments?this.updateLineAABBBoundsBySegments(t,e,n):this.updateLineAABBBoundsByPoints(t,e,n)),vt.graphicService.updateTempAABBBounds(n),this.widthWithoutTransform=n.x2-n.x1,this.heightWithoutTransform=n.y2-n.y1;const{lineJoin:r=e.lineJoin}=t;return vt.graphicService.transformAABBBounds(t,n,e,r==="miter",this),n}updateLineAABBBoundsByPoints(t,e,n,r){const{points:s=e.points,connectedType:a}=t,o=n;return s.forEach(l=>{l.defined===!1&&a!=="connect"||o.add(l.x,l.y)}),o}updateLineAABBBoundsBySegments(t,e,n,r){const{segments:s=e.segments,connectedType:a}=t,o=n;return s.forEach(l=>{l.points.forEach(u=>{u.defined===!1&&a!=="connect"||o.add(u.x,u.y)})}),o}needUpdateTags(t){return super.needUpdateTags(t,t5)}needUpdateTag(t){return super.needUpdateTag(t,t5)}toCustomPath(){let t=super.toCustomPath();if(t)return t;const e=this.attribute;t=new Ki;const n=e.segments,r=s=>{if(s&&s.length){let a=!0;s.forEach(o=>{o.defined!==!1&&(a?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y),a=!1)})}};return n&&n.length?n.forEach(s=>{r(s.points)}):e.points&&r(e.points),t}clone(){return new $D(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return $D.NOWORK_ANIMATE_ATTR}};bet.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},ss);function Fb(i){return new bet(i)}const xet=i=>{if(!i)return{x:0,y:0,width:0,height:0};let t=N(i.width)?i.x1-i.x:i.width,e=N(i.height)?i.y1-i.y:i.height,n=0,r=0;return t<0?(n=t,t=-t):Number.isNaN(t)&&(t=0),e<0?(r=e,e=-e):Number.isNaN(e)&&(e=0),{x:n,y:r,width:t,height:e}},e5=["width","x1","y1","height","cornerRadius",...wa];class Yg extends En{constructor(t){super(t),this.type="rect",this.numberType=mF}isValid(){return super.isValid()&&this._isValid()}_isValid(){return!0}getGraphicTheme(){return le(this).rect}updateAABBBounds(t,e,n){if(!this.updatePathProxyAABBBounds(n)){let{width:a,height:o}=t;const{x1:l,y1:u,x:c,y:h}=t;a=a??l-c,o=o??u-h,(isFinite(a)||isFinite(o)||isFinite(c)||isFinite(h))&&n.set(0,0,a||0,o||0)}const{tb1:r,tb2:s}=vt.graphicService.updateTempAABBBounds(n);return Lb(t,e,r),n.union(r),r.setValue(s.x1,s.y1,s.x2,s.y2),this.widthWithoutTransform=n.x2-n.x1,this.heightWithoutTransform=n.y2-n.y1,vt.graphicService.transformAABBBounds(t,n,e,!1,this),n}needUpdateTags(t){return super.needUpdateTags(t,e5)}needUpdateTag(t){return super.needUpdateTag(t,e5)}toCustomPath(){let t=super.toCustomPath();if(t)return t;const e=this.attribute,{x:n,y:r,width:s,height:a}=xet(e);return t=new Ki,t.moveTo(n,r),t.rect(n,r,s,a),t}clone(){return new Yg(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Yg.NOWORK_ANIMATE_ATTR}}Yg.NOWORK_ANIMATE_ATTR=ss;function _f(i){return new Yg(i)}const i5=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]];class MM extends Yg{constructor(t){super(t),this.type="rect3d",this.numberType=_F}findFace(){const t={polygons:[],vertices:[],edges:[]},e=this.getGraphicTheme(),{x1:n,y1:r,x:s,y:a,length:o=gn(e.width,e.height)}=this.attribute;let{width:l,height:u}=this.attribute;l=l??n-s,u=u??r-a;for(let c=0;c<i5.length;c++){const h=i5[c];t.vertices.push([h[0]*l,h[1]*u,h[2]*o])}return t.polygons.push({polygon:[0,1,5,4],normal:[0,-1,0]}),t.polygons.push({polygon:[2,3,7,6],normal:[0,1,0]}),t.polygons.push({polygon:[4,7,3,0],normal:[-1,0,0]}),t.polygons.push({polygon:[1,2,6,5],normal:[1,0,0]}),t.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),t.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),t.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],t}getNoWorkAnimateAttr(){return MM.NOWORK_ANIMATE_ATTR}}MM.NOWORK_ANIMATE_ATTR=ss;function wet(i){return new MM(i)}class f0 extends En{constructor(t){super(t),this.type="glyph",this.numberType=fF,this.subGraphic=[],this._onInit&&this._onInit(this),this.valid=this.isValid()}setSubGraphic(t){this.detachSubGraphic(),this.subGraphic=t,t.forEach(e=>{e.glyphHost=this,Object.setPrototypeOf(e.attribute,this.attribute)}),this.valid=this.isValid(),this.addUpdateBoundTag()}detachSubGraphic(){this.subGraphic.forEach(t=>{t.glyphHost=null,Object.setPrototypeOf(t.attribute,{})})}getSubGraphic(){return this.subGraphic}onInit(t){this._onInit=t}onUpdate(t){this._onUpdate=t}isValid(){return!0}setAttribute(t,e,n,r){super.setAttribute(t,e,n,r),this.subGraphic.forEach(s=>{s.addUpdateShapeAndBoundsTag(),s.addUpdatePositionTag()})}setAttributes(t,e=!1,n){super.setAttributes(t,e,n),this.subGraphic.forEach(r=>{r.addUpdateShapeAndBoundsTag(),r.addUpdatePositionTag()})}translate(t,e){return super.translate(t,e),this.subGraphic.forEach(n=>{n.addUpdatePositionTag(),n.addUpdateBoundTag()}),this}translateTo(t,e){return super.translateTo(t,e),this.subGraphic.forEach(n=>{n.addUpdatePositionTag(),n.addUpdateBoundTag()}),this}scale(t,e,n){return super.scale(t,e,n),this.subGraphic.forEach(r=>{r.addUpdatePositionTag(),r.addUpdateBoundTag()}),this}scaleTo(t,e){return super.scaleTo(t,e),this.subGraphic.forEach(n=>{n.addUpdatePositionTag(),n.addUpdateBoundTag()}),this}rotate(t){return super.rotate(t),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}rotateTo(t){return super.rotate(t),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}getGraphicTheme(){return le(this).glyph}updateAABBBounds(t,e,n){return this.getSubGraphic().forEach(r=>{n.union(r.AABBBounds)}),n}doUpdateAABBBounds(){this.updateAABBBoundsStamp++,this._AABBBounds.clear();const t=this.updateAABBBounds(this.attribute,this.getGraphicTheme(),this._AABBBounds);return this.clearUpdateBoundTag(),t}needUpdateTags(t){return!1}needUpdateTag(t){return!1}useStates(t,e){var n;if(!t.length)return void this.clearStates(e);if(!(((n=this.currentStates)===null||n===void 0?void 0:n.length)!==t.length||t.some((a,o)=>this.currentStates[o]!==a)))return;this.stopStateAnimates();const r={},s=this.subGraphic.map(()=>({}));t.forEach(a=>{var o;const l=this.glyphStateProxy?this.glyphStateProxy(a,t):this.glyphStates[a];l&&(Object.assign(r,l.attributes),!((o=l.subAttributes)===null||o===void 0)&&o.length&&s.forEach((u,c)=>{Object.assign(u,l.subAttributes[c])}))}),this.updateNormalAttrs(r),this.currentStates=t,this.applyStateAttrs(r,t,e)}clearStates(t){this.stopStateAnimates(),this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}clone(){const t=new f0(Object.assign({},this.attribute));return t.setSubGraphic(this.subGraphic.map(e=>e.clone())),t}getNoWorkAnimateAttr(){return f0.NOWORK_ANIMATE_ATTR}}f0.NOWORK_ANIMATE_ATTR=ss;function TF(i){return new f0(i)}class _2t{constructor(t,e,n,r,s,a,o,l,u,c,h,d,f,p){this.left=t,this.top=e,this.width=n,this.height=r,this.actualHeight=0,this.bottom=e+r,this.right=t+n,this.ellipsis=s,this.wordBreak=a,this.verticalDirection=o,this.lines=[],this.globalAlign=l,this.globalBaseline=u,this.layoutDirection=c,this.directionKey=hF[this.layoutDirection],this.isWidthMax=h,this.isHeightMax=d,this.singleLine=f,p?(p.clear(),this.icons=p):this.icons=new Map}draw(t,e){const{width:n,height:r}=this.getActualSize(),s=this.isWidthMax?Math.min(this.width,n):this.width||n||0;let a=this.isHeightMax?Math.min(this.height,r):this.height||r||0;a=Math.min(a,r);let o=0;switch(this.globalBaseline){case"top":o=0;break;case"middle":o=-a/2;break;case"bottom":o=-a}let l=0;this.globalAlign==="right"||this.globalAlign==="end"?l=-s:this.globalAlign==="center"&&(l=-s/2);let u=this[this.directionKey.height];this.singleLine&&(u=this.lines[0].height+1);let c=!1;if(this.verticalDirection==="middle")if(this.actualHeight>=u&&u!==0)for(let h=0;h<this.lines.length;h++){const{top:d,height:f}=this.lines[h];if(d+f<this[this.directionKey.top]||d+f>this[this.directionKey.top]+u)return c;let p=!1;this.ellipsis&&this.lines[h+1]&&this.lines[h+1].top+this.lines[h+1].height>this[this.directionKey.top]+u&&(p=!0,c=!0),this.lines[h].draw(t,p,this.lines[h][this.directionKey.left]+l,this.lines[h][this.directionKey.top]+o,this.ellipsis,e)}else{const h=Math.floor((u-this.actualHeight)/2);this.layoutDirection==="vertical"?l+=h:o+=h;for(let d=0;d<this.lines.length;d++)this.lines[d].draw(t,!1,this.lines[d][this.directionKey.left]+l,this.lines[d][this.directionKey.top]+o,this.ellipsis,e)}else if(this.verticalDirection==="bottom"&&this.layoutDirection!=="vertical")for(let h=0;h<this.lines.length;h++){const{top:d,height:f}=this.lines[h],p=u-this.lines[h].top-this.lines[h].height;if(u===0)this.lines[h].draw(t,!1,l,p+o,this.ellipsis,e);else{if(p+f>this[this.directionKey.top]+u||p<this[this.directionKey.top])return c;{let g=!1;this.ellipsis&&this.lines[h+1]&&p-this.lines[h+1].height<this[this.directionKey.top]&&(g=!0,c=!0),this.lines[h].draw(t,g,l,p+o,this.ellipsis,e)}}}else{this.verticalDirection==="bottom"&&this.layoutDirection==="vertical"&&this.singleLine&&this.isWidthMax&&(l+=this.lines[0].height+1);for(let h=0;h<this.lines.length;h++){this.verticalDirection==="bottom"&&this.layoutDirection==="vertical"&&(l-=this.lines[h].height+this.lines[h].top);const{top:d,height:f}=this.lines[h];if(u===0)this.lines[h].draw(t,!1,this.lines[h][this.directionKey.left]+l,this.lines[h][this.directionKey.top]+o,this.ellipsis,e);else{if(d+f<this[this.directionKey.top]||d+f>this[this.directionKey.top]+u)return c;{let p=!1;this.ellipsis&&this.lines[h+1]&&this.lines[h+1].top+this.lines[h+1].height>this[this.directionKey.top]+u&&(p=!0,c=!0),this.lines[h].draw(t,p,this.lines[h][this.directionKey.left]+l,this.lines[h][this.directionKey.top]+o,this.ellipsis,e)}}}}return c}getActualSize(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}getRawActualSize(){let t=0,e=0;for(let n=0;n<this.lines.length;n++){const r=this.lines[n];r.actualWidth>t&&(t=r.actualWidth),e+=r.height}return{width:this.layoutDirection==="vertical"?e:t,height:this.layoutDirection==="vertical"?t:e}}getActualSizeWidthEllipsis(){let t=0,e=0;const{width:n,height:r}=this.getRawActualSize();this.width,this.height;let s=this[this.directionKey.height];if(this.singleLine&&(s=this.lines[0].height+1),this.verticalDirection==="middle")if(this.actualHeight>=s&&s!==0)for(let a=0;a<this.lines.length;a++){const{top:o,height:l}=this.lines[a];if(!(o+l<this[this.directionKey.top]||o+l>this[this.directionKey.top]+s))if(this.ellipsis&&this.lines[a+1]&&this.lines[a+1].top+this.lines[a+1].height>this[this.directionKey.top]+s){const u=this.ellipsis===!0?"...":this.ellipsis||"",c=this.lines[a].getWidthWithEllips(u);c>t&&(t=c),e+=this.lines[a].height}else this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}else{Math.floor((s-this.actualHeight)/2);for(let a=0;a<this.lines.length;a++)this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}else if(this.verticalDirection==="bottom")for(let a=0;a<this.lines.length;a++){const{top:o,height:l}=this.lines[a],u=s-this.lines[a].top-this.lines[a].height;if(s===0)this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height;else if(!(u+l>this[this.directionKey.top]+s||u<this[this.directionKey.top]))if(this.ellipsis&&this.lines[a+1]&&u-this.lines[a+1].height<this[this.directionKey.top]){const c=this.ellipsis===!0?"...":this.ellipsis||"",h=this.lines[a].getWidthWithEllips(c);h>t&&(t=h),e+=this.lines[a].height}else this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}else for(let a=0;a<this.lines.length;a++){const{top:o,height:l}=this.lines[a];if(s===0)this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height;else if(!(o+l<this[this.directionKey.top]||o+l>this[this.directionKey.top]+s))if(this.ellipsis&&this.lines[a+1]&&this.lines[a+1].top+this.lines[a+1].height>this[this.directionKey.top]+s){const u=this.ellipsis===!0?"...":this.ellipsis||"",c=this.lines[a].getWidthWithEllips(u);c>t&&(t=c),e+=this.lines[a].height}else this.lines[a].actualWidth>t&&(t=this.lines[a].actualWidth),e+=this.lines[a].height}return{width:this.layoutDirection==="vertical"?e:t,height:this.layoutDirection==="vertical"?t:e}}}function T_(i,t,e,n){const r=Math.round(i),s=Math.round(e),a=Math.round(t),o=Math.round(n);return{left:i>r?r:r-.5,top:e>s?s:s-.5,right:a>t?a:a+.5,bottom:o>n?o:o+.5}}class cd{constructor(t,e,n,r){var s,a;this.fontSize=n.fontSize||16,this.textBaseline=n.textBaseline||"alphabetic",this.ascentDescentMode=r;const o=mM(n.lineHeight,this.fontSize);this.lineHeight=typeof o=="number"?o>this.fontSize?o:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight;const{ascent:l,height:u,descent:c,width:h}=Zh(t,n,this.ascentDescentMode);let d=0,f=0,p=0;this.height>u&&(d=(this.height-u)/2,f=Math.ceil(d),p=Math.floor(d)),this.textBaseline==="top"?(this.ascent=d,this.descent=u-d):this.textBaseline==="bottom"?(this.ascent=u-d,this.descent=d):this.textBaseline==="middle"?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=l+f,this.descent=c+p),this.length=t.length,this.width=h||0,this.text=t||"",this.newLine=e||!1,this.character=n,this.left=0,this.top=0,this.ellipsis="normal",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,this.space=n.space,this.dx=(s=n.dx)!==null&&s!==void 0?s:0,this.dy=(a=n.dy)!==null&&a!==void 0?a:0,n.direction==="vertical"&&(this.direction=n.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height),this.ellipsisStr="..."}updateWidth(){const{width:t}=Zh(this.text,this.character,this.ascentDescentMode);this.width=t,this.direction==="vertical"&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}drawBackground(t,e,n,r,s,a,o){if(this.text===""||this.text===`
`||!this.character.background||this.character.backgroundOpacity&&!(this.character.backgroundOpacity>0))return;let l=e+n,u=this.text,c=this.left+r;l+=this.top;let h=this.direction;if(this.verticalEllipsis)u=this.ellipsisStr,h="vertical",l-=this.ellipsisWidth/2;else{if(this.ellipsis==="hide")return;if(this.ellipsis==="add")u+=this.ellipsisStr,a!=="right"&&a!=="end"||(c-=this.ellipsisWidth);else if(this.ellipsis==="replace"){const f=d1(u,(h==="vertical"?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,u.length-1);if(u=u.slice(0,f),u+=this.ellipsisStr,(a==="right"||a==="end")&&h!=="vertical"){const{width:p}=Zh(this.text.slice(f),this.character,this.ascentDescentMode);c-=this.ellipsisWidth-p}}}const d=T_(c,c+(this.widthOrigin||this.width),e,e+o);return Object.assign(Object.assign({},d),{fillStyle:this.character.background,globalAlpha:this.character.backgroundOpacity})}draw(t,e,n,r,s,a,o){var l;let u=e+n,c=this.text,h=this.left+r+((l=this.space)!==null&&l!==void 0?l:0)/2;u+=this.top;let d=this.direction;if(this.verticalEllipsis)c=this.ellipsisStr,d="vertical",u-=this.ellipsisWidth/2;else{if(this.ellipsis==="hide")return;if(this.ellipsis==="add")c+=this.ellipsisStr,a!=="right"&&a!=="end"||(h-=this.ellipsisWidth);else if(this.ellipsis==="replace"){const p=d1(c,(d==="vertical"?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,c.length-1);if(c=c.slice(0,p),c+=this.ellipsisStr,(a==="right"||a==="end")&&d!=="vertical"){const{width:g}=Zh(this.text.slice(p),this.character,this.ascentDescentMode);h-=this.ellipsisWidth-g}}}switch(this.character.script){case"super":u-=this.ascent*(1/3);break;case"sub":u+=this.descent/2}d==="vertical"&&(t.save(),t.rotateAbout(Math.PI/2,h,u),t.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),t.translate(h,u),h=0,u=0);const{lineWidth:f=1}=this.character;if(this.character.stroke&&f&&t.strokeText(c,h+this.dx,u+this.dy),this.character.fill&&t.fillText(c,h+this.dx,u+this.dy),this.character.fill){if(this.character.lineThrough||this.character.underline){if(this.character.underline){const p=1+u,g=T_(h,h+(this.widthOrigin||this.width),p,p+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(g.left,1+u,g.right-g.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}if(this.character.lineThrough){const p=1+u-this.ascent/2,g=T_(h,h+(this.widthOrigin||this.width),p,p+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(g.left,1+u-this.ascent/2,g.right-g.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}else if(this.character.textDecoration==="underline"){const p=1+u,g=T_(h,h+(this.widthOrigin||this.width),p,p+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(g.left,1+u,g.right-g.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}else if(this.character.textDecoration==="line-through"){const p=1+u-this.ascent/2,g=T_(h,h+(this.widthOrigin||this.width),p,p+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(g.left,1+u-this.ascent/2,g.right-g.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}d==="vertical"&&t.restore()}getWidthWithEllips(t){let e=this.text;const n=t==="vertical"?this.height:this.width;if(this.ellipsis==="hide")return n;if(this.ellipsis==="add")return n+this.ellipsisWidth;if(this.ellipsis==="replace"){const r=d1(e,n-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,e.length-1);e=e.slice(0,r),e+=this.ellipsisStr;const{width:s}=Zh(this.text.slice(r),this.character,this.ascentDescentMode);return n+this.ellipsisWidth-s}return n}}function v2t(i,t){const e=i.text.slice(0,t),n=i.text.slice(t);return[new cd(e,i.newLine,i.character,i.ascentDescentMode),new cd(n,!0,i.character,i.ascentDescentMode)]}const n5=["width","height","image",...wa];class Xg extends En{constructor(t){super(t),this.type="image",this.numberType=xM,this.loadImage(this.attribute.image)}getImageElement(){const{image:t}=this.attribute;if(!t||!this.resources)return null;const e=this.resources.get(t);return e.state!=="success"?null:e.data}get width(){return this.tryUpdateAABBBounds(),this._actualWidth}get height(){return this.tryUpdateAABBBounds(),this._actualHeight}get repeatX(){var t;return(t=this.attribute.repeatX)!==null&&t!==void 0?t:"no-repeat"}set repeatX(t){this.attribute.repeatX===t&&(this.attribute.repeatX=t)}get repeatY(){var t;return(t=this.attribute.repeatY)!==null&&t!==void 0?t:"no-repeat"}set repeatY(t){this.attribute.repeatY===t&&(this.attribute.repeatY=t)}get image(){return this.attribute.image}set image(t){t!==this.attribute.image&&(this.attribute.image=t,this.loadImage(this.attribute.image))}imageLoadSuccess(t,e,n){super.imageLoadSuccess(t,e,()=>{this.successCallback&&this.successCallback()}),this.addUpdateBoundTag()}imageLoadFail(t,e){super.imageLoadFail(t,()=>{this.failCallback&&this.failCallback()})}setAttributes(t,e,n){return t.image&&this.loadImage(t.image),super.setAttributes(t,e,n)}setAttribute(t,e,n,r){return t==="image"&&this.loadImage(e),super.setAttribute(t,e,n,r)}getGraphicTheme(){return le(this).image}updateAABBBounds(t,e,n){if(!this.updatePathProxyAABBBounds(n)){const{maxWidth:a=e.maxWidth,maxHeight:o=e.maxHeight}=t;let{width:l,height:u}=t;if(l==null||u==null){const c=this.getImageElement();if(c){const h=c.width,d=c.height;if(l!=null)u=l*(d/h);else if(u!=null)l=u*(h/d);else{const f=h/d;f>a/o?(l=a,u=a/f):(u=o,l=o*f)}}else l=a,u=o}this._actualWidth=l,this._actualHeight=u,n.set(0,0,l,u)}const{tb1:r,tb2:s}=vt.graphicService.updateTempAABBBounds(n);return Lb(t,e,r),n.union(r),r.setValue(s.x1,s.y1,s.x2,s.y2),this.widthWithoutTransform=n.x2-n.x1,this.heightWithoutTransform=n.y2-n.y1,vt.graphicService.transformAABBBounds(t,n,e,!1,this),n}getDefaultAttribute(t){return l0[t]}needUpdateTags(t){return super.needUpdateTags(t,n5)}needUpdateTag(t){return super.needUpdateTag(t,n5)}clone(){return new Xg(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Xg.NOWORK_ANIMATE_ATTR}}Xg.NOWORK_ANIMATE_ATTR=Object.assign({image:1,repeatX:1,repeatY:1},ss);function PF(i){return new Xg(i)}class vl extends Xg{constructor(t){if(super(t),this._x=0,this._y=0,this._hovered=!1,this._marginArray=[0,0,0,0],t.backgroundShowMode==="always"&&(this._hovered=!0),t.margin){const e=CD(t.margin);this._marginArray=typeof e=="number"?[e,e,e,e]:e}this.onBeforeAttributeUpdate=(e,n,r)=>{if(J(r)&&r.indexOf("margin")!==-1||r==="margin")if(n.margin){const s=CD(n.margin);this._marginArray=typeof s=="number"?[s,s,s,s]:s}else this._marginArray=[0,0,0,0]}}get width(){var t;return((t=this.attribute.width)!==null&&t!==void 0?t:0)+this._marginArray[1]+this._marginArray[3]}get height(){var t;return((t=this.attribute.height)!==null&&t!==void 0?t:0)+this._marginArray[0]+this._marginArray[2]}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.doUpdateAABBBounds();const{width:t=l0.width,height:e=l0.height}=this.attribute,{backgroundWidth:n=t,backgroundHeight:r=e}=this.attribute,s=(n-t)/2,a=(r-e)/2;return this._AABBBounds.expand([0,2*s,2*a,0]),this._AABBBounds}setHoverState(t){this.attribute.backgroundShowMode==="hover"&&this._hovered!==t&&(this._hovered=t)}}let y2t=class{constructor(t,e,n,r,s,a,o,l){this.left=t,this.width=e,this.baseline=n,this.ascent=r,this.descent=s,this.top=n-r,this.paragraphs=a.map(c=>c),this.textAlign=(this.paragraphs[0]instanceof vl?this.paragraphs[0].attribute.textAlign:this.paragraphs[0].character.textAlign)||"left",this.direction=o,this.directionKey=hF[this.direction],this.actualWidth=0;let u=0;this.paragraphs.forEach((c,h)=>{if(h===0&&c instanceof cd){const d=NDt.exec(c.text);d?.index!==0&&(c.text=c.text.slice(d?.index),c.updateWidth())}this.actualWidth+=c[this.directionKey.width],u=Math.max(c[this.directionKey.height],u)}),this.height=u,this.blankWidth=l?0:this.width-this.actualWidth,this.calcOffset(e,l)}calcOffset(t,e){const n=this.directionKey,r=this.height;let s=this.left,a=0;this.actualWidth<t&&!e&&(this.textAlign==="right"||this.textAlign==="end"?s=t-this.actualWidth:this.textAlign==="center"?s=(t-this.actualWidth)/2:this.textAlign==="justify"&&(this.paragraphs.length<2?s=(t-this.actualWidth)/2:a=(t-this.actualWidth)/(this.paragraphs.length-1))),this.paragraphs.map(function(o){o instanceof vl?(o["_"+n.x]=s,s+=o[n.width]+a,o["_"+n.y]=o.attribute.textBaseline==="top"?0:o.attribute.textBaseline==="bottom"?r-o.height:(r-o.height)/2):(o[n.left]=s,s+=o[n.width]+a)})}draw(t,e,n,r,s,a){if(s&&(e||this.paragraphs.some(h=>h.overflow))){let h=!0,d=!1;for(let p=this.paragraphs.length-1;p>=0;p--){const g=this.paragraphs[p];if(g.overflow)h=h&&g.text==="";else if(h){d=!0;break}}let f=0;if(!d)for(let p=this.paragraphs.length-1;p>=0;p--){const g=this.paragraphs[p];if(g.overflow){if(g.text==="")break;continue}if(g instanceof vl)break;if(this.direction==="vertical"&&g.direction!=="vertical"){g.verticalEllipsis=!0;break}const m=s===!0?"...":s||"";g.ellipsisStr=m;const{width:_}=Zh(m,g.character,g.ascentDescentMode),v=_||0;if(v<=this.blankWidth+f){e&&(g.ellipsis="add");break}if(v<=this.blankWidth+f+g.width){g.ellipsis="replace",g.ellipsisWidth=v,g.ellipsisOtherParagraphWidth=this.blankWidth+f;break}g.ellipsis="hide",f+=g.width}}let o="",l=-1,u=[];const c=[u];this.paragraphs.forEach((h,d)=>{if(h instanceof vl)return;const f=h.drawBackground(t,r,this.ascent,n,d===0,this.textAlign,this.height);f&&(o===f.fillStyle&&l===f.globalAlpha||(u=[],c.push(u),o=f.fillStyle,l=f.globalAlpha),u.push(f))}),c.forEach(h=>{if(h.length===0)return;const d=h[0],f=h[h.length-1];t.fillStyle=d.fillStyle,t.globalAlpha=d.globalAlpha,t.fillRect(d.left,d.top,f.right-d.left,f.bottom-d.top)}),this.paragraphs.forEach((h,d)=>{if(h instanceof vl)return h.setAttributes({x:n+h._x,y:r+h._y}),void a(h,t,n+h._x,r+h._y,this.ascent);const f={x1:this.left,y1:this.top,x2:this.left+this.actualWidth,y2:this.top+this.height};HDt(t,h.character),jDt(t,h.character,f),h.draw(t,r,this.ascent,n,d===0,this.textAlign,this.height)})}getWidthWithEllips(t){let e=0;for(let r=this.paragraphs.length-1;r>=0;r--){const s=this.paragraphs[r];if(s instanceof vl)break;const{width:a}=Zh(t,s.character,s.ascentDescentMode),o=a||0;if(o<=this.blankWidth+e){s.ellipsis="add",s.ellipsisWidth=o;break}if(o<=this.blankWidth+e+s.width){s.ellipsis="replace",s.ellipsisWidth=o,s.ellipsisOtherParagraphWidth=this.blankWidth+e;break}s.ellipsis="hide",e+=s.width}let n=0;return this.paragraphs.forEach((r,s)=>{n+=r instanceof vl?r.width:r.getWidthWithEllips(this.direction)}),n}};class b2t{constructor(t){this.frame=t,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=t.layoutDirection,this.directionKey=hF[this.direction]}store(t){if(t instanceof vl){this.frame.icons.set(t.richtextId,t),this.lineBuffer.push(t),this.lineWidth+=t[this.directionKey.width];let e=0,n=0;t.attribute.textBaseline==="top"?(e=0,n=t.height):t.attribute.textBaseline==="bottom"?(e=t.height,n=0):(e=t.height/2,n=t.height/2),this.maxAscent=Math.max(this.maxAscent,e),this.maxDescent=Math.max(this.maxDescent,n)}else this.lineBuffer.push(t),t.text.length!==0?(this.lineWidth+=t[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,t.ascent),this.maxDescent=Math.max(this.maxDescent,t.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,t.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,t.descent))}send(){if(this.lineBuffer.length===0)return;const t=this.maxAscent===0?this.maxAscentForBlank:this.maxAscent,e=this.maxDescent===0?this.maxDescentForBlank:this.maxDescent,n=new y2t(this.frame.left,this[this.directionKey.width],this.y+t,t,e,this.lineBuffer,this.direction,this.direction==="horizontal"?this.frame.isWidthMax:this.frame.isHeightMax);this.frame.lines.push(n),this.frame.actualHeight+=n.height,this.y+=n.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0}deal(t,e=!1){t instanceof vl?this.direction==="horizontal"&&this.width===0||this.direction==="vertical"&&this.height===0||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):this.lineBuffer.length===0?(this.store(t),this.send()):(this.send(),this.deal(t)):typeof this.width!="number"||this.width<0||(t.newLine&&this.send(),(t.text.length!==0||this.newLine)&&(this.direction==="horizontal"&&this.width===0||this.direction==="vertical"&&this.height===0||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(t)):this.cut(t,e)))}cut(t,e){const n=this[this.directionKey.width]-this.lineWidth||0,r=Math.ceil(n/t[this.directionKey.width]*t.length)||0,s=d1(t.text,n,t.character,r,this.frame.wordBreak==="break-word");if(s!==0){const[a,o]=v2t(t,s);this.store(a),e?this.send():this.deal(o)}else this.lineBuffer.length!==0&&(this.send(),this.deal(t))}}let UD=!1;try{UD=Intl&&typeof Intl.Segmenter=="function"}catch{UD=!1}const r5=["width","height","ellipsis","wordBreak","verticalDirection","maxHeight","maxWidth","textAlign","textBaseline","textConfig","layoutDirection","fill","stroke","fontSize","fontFamily","fontStyle","fontWeight","lineWidth","opacity","fillOpacity","strokeOpacity",...wa];class yl extends En{constructor(t){super(t),this.type="richtext",this._currentHoverIcon=null,this.numberType=vF,this.onBeforeAttributeUpdate=(e,n,r)=>{for(const s in e)if(s==="hoverIconId"){if(e[s]===n[s])continue;const a=this._frameCache.icons.get(e[s]);this.updateHoverIconState(a)}}}get width(){var t;return(t=this.attribute.width)!==null&&t!==void 0?t:hu.width}set width(t){this.attribute.width!==t&&(this.attribute.width=t,this.addUpdateShapeAndBoundsTag())}get height(){var t;return(t=this.attribute.height)!==null&&t!==void 0?t:hu.height}set height(t){this.attribute.height!==t&&(this.attribute.height=t,this.addUpdateShapeAndBoundsTag())}get maxWidth(){return this.attribute.maxWidth}set maxWidth(t){this.attribute.maxWidth!==t&&(this.attribute.maxWidth=t,this.addUpdateShapeAndBoundsTag())}get maxHeight(){return this.attribute.maxHeight}set maxHeight(t){this.attribute.maxHeight!==t&&(this.attribute.maxHeight=t,this.addUpdateShapeAndBoundsTag())}get ellipsis(){var t;return(t=this.attribute.ellipsis)!==null&&t!==void 0?t:hu.ellipsis}set ellipsis(t){this.attribute.ellipsis!==t&&(this.attribute.ellipsis=t,this.addUpdateShapeAndBoundsTag())}get wordBreak(){var t;return(t=this.attribute.wordBreak)!==null&&t!==void 0?t:hu.wordBreak}set wordBreak(t){this.attribute.wordBreak!==t&&(this.attribute.wordBreak=t,this.addUpdateShapeAndBoundsTag())}get verticalDirection(){var t;return(t=this.attribute.verticalDirection)!==null&&t!==void 0?t:hu.verticalDirection}set verticalDirection(t){this.attribute.verticalDirection!==t&&(this.attribute.verticalDirection=t,this.addUpdateShapeAndBoundsTag())}get textAlign(){var t;return(t=this.attribute.textAlign)!==null&&t!==void 0?t:hu.textAlign}set textAlign(t){this.attribute.textAlign!==t&&(this.attribute.textAlign=t,this.addUpdateShapeAndBoundsTag())}get textBaseline(){var t;return(t=this.attribute.textBaseline)!==null&&t!==void 0?t:hu.textBaseline}set textBaseline(t){this.attribute.textBaseline!==t&&(this.attribute.textBaseline=t,this.addUpdateShapeAndBoundsTag())}get textConfig(){var t;return(t=this.attribute.textConfig)!==null&&t!==void 0?t:hu.textConfig}set textConfig(t){this.attribute.textConfig=t,this.addUpdateShapeAndBoundsTag()}getGraphicTheme(){return le(this).richtext}static AllSingleCharacter(t){return t.lines?t.lines.every(e=>e.paragraphs.every(n=>!(n.text&&Ht(n.text)&&yl.splitText(n.text).length>1))):t.every(e=>e.isComposing||!(e.text&&Ht(e.text)&&yl.splitText(e.text).length>1))}static splitText(t){if(UD){const e=new Intl.Segmenter(void 0,{granularity:"grapheme"}),n=[];for(const{segment:r}of e.segment(t))n.push(r);return n}return Array.from(t)}static TransformTextConfig2SingleCharacter(t){const e=[];return t.forEach(n=>{const r=yl.splitText(n.text.toString());if(Ht(n.text)&&r.length>1)for(let s=0;s<r.length;s++){const a=r[s];e.push(Object.assign(Object.assign({},n),{text:a}))}else e.push(n)}),e}updateAABBBounds(t,e,n){var r,s,a,o;const{width:l=e.width,height:u=e.height,maxWidth:c=e.maxWidth,maxHeight:h=e.maxHeight,textAlign:d=e.textAlign,textBaseline:f=(s=(r=t.textBaseline)!==null&&r!==void 0?r:e.textBaseline)!==null&&s!==void 0?s:"top",editOptions:p}=t;if(l>0&&u>0)n.set(0,0,l,u);else{const _=this.getFrameCache(),{width:v,height:y}=_.getActualSize();let b=l||v||0,x=u||y||0;x=typeof h=="number"&&x>h?h:x||0,b=typeof c=="number"&&b>c?c:b||0,n.set(0,0,b,x)}p&&p.keepHeightWhileEmpty&&!n.height()&&!(!((a=t.textConfig)===null||a===void 0)&&a.length)&&(n.y2=n.y1+((o=t.fontSize)!==null&&o!==void 0?o:12),n.x2=n.x1+2);let g=0;switch(f){case"top":g=0;break;case"middle":g=-n.height()/2;break;case"bottom":g=-n.height()}let m=0;switch(d){case"left":m=0;break;case"center":m=-n.width()/2;break;case"right":m=-n.width()}return u||(this.verticalDirection==="middle"?g-=n.height()/2:this.verticalDirection==="bottom"&&(g-=n.height())),n.translate(m,g),vt.graphicService.updateTempAABBBounds(n),t.forceBoundsHeight==null&&t.forceBoundsWidth==null||vt.graphicService.updateHTMLTextAABBBounds(t,e,n),this.widthWithoutTransform=n.x2-n.x1,this.heightWithoutTransform=n.y2-n.y1,vt.graphicService.transformAABBBounds(t,n,e,!1,this),n.width()===0&&n.height()===0&&n.clear(),n}needUpdateTags(t){return super.needUpdateTags(t,r5)}needUpdateTag(t){return super.needUpdateTag(t,r5)}getFrameCache(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}get cliped(){const t=this.getFrameCache();if(t.actualHeight>t.height)return!0;const{disableAutoWrapLine:e}=this.attribute;if(e)for(let n=0;n<t.lines.length;n++){const r=t.lines[n];for(let s=0;s<r.paragraphs.length;s++){const a=r.paragraphs[s];if(a.overflow&&a.text!=="")return!0}}return!1}combinedStyleToCharacter(t){const{fill:e,stroke:n,fontSize:r,fontFamily:s,fontStyle:a,fontWeight:o,lineWidth:l,opacity:u,fillOpacity:c,lineHeight:h,strokeOpacity:d,upgradeAttrs:f}=this.attribute,p=Object.assign({fill:e,stroke:n,fontSize:r,fontFamily:s,fontStyle:a,fontWeight:o,lineWidth:l,opacity:u,fillOpacity:c,strokeOpacity:d},t);return f?.lineHeight&&(p.lineHeight=h),p}doUpdateFrameCache(t){var e;const{maxWidth:n,maxHeight:r,width:s,height:a,ellipsis:o,wordBreak:l,verticalDirection:u,textAlign:c,textBaseline:h,layoutDirection:d,singleLine:f,disableAutoWrapLine:p,editable:g,ascentDescentMode:m,upgradeAttrs:_}=this.attribute,v=_&&_.multiBreakLine;let{textConfig:y=[]}=this.attribute;g&&y.length>0&&!yl.AllSingleCharacter(y)&&(y=yl.TransformTextConfig2SingleCharacter(y),this.attribute.textConfig=y);const b=[],x=t??y;for(let R=0;R<x.length;R++)if("image"in x[R]){const P=this.combinedStyleToCharacter(x[R]);P.lineWidth=void 0;const O=P.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(P.id);if(O)b.push(O);else{const T=new vl(P);T.successCallback=()=>{var D;this.addUpdateBoundTag(),(D=this.stage)===null||D===void 0||D.renderNextFrame()},T.richtextId=P.id,b.push(T)}}else{const P=this.combinedStyleToCharacter(x[R]);if(yt(P.text)&&(P.text=`${P.text}`),P.text&&P.text.includes(`
`)){const O=P.text.split(`
`);for(let T=0;T<O.length;T++)if(T===0)b.push(new cd(O[T],!1,P,m));else if(O[T]||R===x.length-1)b.push(new cd(O[T],!0,P,m));else{const D=this.combinedStyleToCharacter(x[R+1]);b.push(new cd(O[T],!0,D,m))}}else P.text&&b.push(new cd(P.text,!1,P,m))}const S=typeof n=="number"&&Number.isFinite(n)&&n>0,w=typeof r=="number"&&Number.isFinite(r)&&r>0,A=typeof s=="number"&&Number.isFinite(s)&&s>0&&(!S||s<=n),k=typeof a=="number"&&Number.isFinite(a)&&a>0&&(!w||a<=r),C=new _2t(0,0,(A?s:S?n:0)||0,(k?a:w?r:0)||0,o,l,u,c,h,d||"horizontal",!A&&S,!k&&w,f||!1,(e=this._frameCache)===null||e===void 0?void 0:e.icons),M=new b2t(C);if(M.newLine=v,p){let R=0,P=!1;for(let O=0;O<b.length;O++){const T=b[O];P?(T.overflow=!0,T.left=1/0,T.top=1/0,!T.newLine&&C.lines[C.lines.length-1].paragraphs.push(T)):M.deal(T,!0),C.lines.length!==R&&(R=C.lines.length,M.lineBuffer.length=0,T.overflow=!0,T.left=1e3,T.top=1e3,C.lines[C.lines.length-1].paragraphs.push(T),P=!0),T.newLine&&(P=!1,M.lineWidth=0),M.send()}}else for(let R=0;R<b.length;R++)M.deal(b[R]);if(M.send(),!(C.layoutDirection==="horizontal"?A:k)){const R=C.getActualSizeWidthEllipsis();let P=C.layoutDirection==="horizontal"?R.width:R.height;(C.layoutDirection==="horizontal"?S:w)&&(P=Math.min(P,C.layoutDirection==="horizontal"?n:r)),C.lines.forEach(function(O){O.calcOffset(P,!1)})}v&&C.lines.forEach(R=>{const P=R.paragraphs;R.paragraphs=R.paragraphs.filter(O=>O.text!==""),R.paragraphs.length===0&&P.length&&(P[0].text=`
`,R.paragraphs.push(P[0]))}),this._frameCache=C}clone(){return new yl(Object.assign({},this.attribute))}setStage(t,e){super.setStage(t,e),this.getFrameCache().icons.forEach(n=>{n.setStage(t,e)})}bindIconEvent(){this.addEventListener("pointermove",t=>{const e=this.pickIcon(t.global);e&&e===this._currentHoverIcon||(e?this.setAttribute("hoverIconId",e.richtextId):!e&&this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0))}),this.addEventListener("pointerleave",t=>{this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0)})}updateHoverIconState(t){var e,n,r,s,a;t?((e=this._currentHoverIcon)===null||e===void 0||e.setHoverState(!1),this._currentHoverIcon=t,this._currentHoverIcon.setHoverState(!0),(n=this.stage)===null||n===void 0||n.setCursor(t.attribute.cursor),(r=this.stage)===null||r===void 0||r.renderNextFrame()):(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,(s=this.stage)===null||s===void 0||s.setCursor(),(a=this.stage)===null||a===void 0||a.renderNextFrame())}pickIcon(t){const e=this.getFrameCache(),{e:n,f:r}=this.globalTransMatrix;let s;return e.icons.forEach((a,o)=>{var l,u;const c=a.AABBBounds.clone();c.translate(a._marginArray[3],a._marginArray[0]),c.containsPoint({x:t.x-n,y:t.y-r})&&(s=a,s.globalX=((l=s.attribute.x)!==null&&l!==void 0?l:0)+n+a._marginArray[3],s.globalY=((u=s.attribute.y)!==null&&u!==void 0?u:0)+r+a._marginArray[0])}),s}getNoWorkAnimateAttr(){return yl.NOWORK_ANIMATE_ATTR}}yl.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,verticalDirection:1,textAlign:1,textBaseline:1,textConfig:1,layoutDirection:1},ss);function EF(i){return new yl(i)}const s5=["path","customPath",...wa];class p0 extends En{constructor(t){super(t),this.type="path",this.numberType=SM}get pathShape(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{path:t}=this.attribute;return t!=null&&t!==""}getParsedPathShape(){const t=this.getGraphicTheme();if(!this.valid)return t.path;const e=this.attribute;return e.path instanceof Ki?e.path:(N(this.cache)&&this.doUpdatePathShape(),this.cache instanceof Ki?this.cache:t.path)}getGraphicTheme(){return le(this).path}updateAABBBounds(t,e,n){if(!this.updatePathProxyAABBBounds(n)){const o=this.getParsedPathShape();n.union(o.getBounds())}const{tb1:r,tb2:s}=vt.graphicService.updateTempAABBBounds(n);Lb(t,e,r),n.union(r),r.setValue(s.x1,s.y1,s.x2,s.y2),this.widthWithoutTransform=n.x2-n.x1,this.heightWithoutTransform=n.y2-n.y1;const{lineJoin:a=e.lineJoin}=t;return vt.graphicService.transformAABBBounds(t,n,e,a==="miter",this),n}doUpdateAABBBounds(t){return this.doUpdatePathShape(),super.doUpdateAABBBounds(t)}doUpdatePathShape(){const t=this.attribute;Ht(t.path,!0)?this.cache=new Ki().fromString(t.path):t.customPath&&(this.cache=new Ki,t.customPath(this.cache,this))}needUpdateTags(t){return super.needUpdateTags(t,s5)}needUpdateTag(t){return super.needUpdateTag(t,s5)}toCustomPath(){return new Ki().fromCustomPath2D(this.getParsedPathShape(),0,0)}clone(){return new p0(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return p0.NOWORK_ANIMATE_ATTR}}p0.NOWORK_ANIMATE_ATTR=Object.assign({path:1,customPath:1},ss);function RF(i){return new p0(i)}const a5=["segments","points","curveType","curveTension",...wa];let Aet=class GD extends En{constructor(t){super(t),this.type="area",this.numberType=Db}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;const{points:t,segments:e}=this.attribute;return e?e.length!==0:!!t&&t.length!==0}getGraphicTheme(){return le(this).area}updateAABBBounds(t,e,n){this.updatePathProxyAABBBounds(n)||(t.segments?this.updateAreaAABBBoundsBySegments(t,e,n):this.updateAreaAABBBoundsByPoints(t,e,n)),vt.graphicService.updateTempAABBBounds(n),this.setWidthHeightWithoutTransform(n);const{lineJoin:r=e.lineJoin}=t;return vt.graphicService.transformAABBBounds(t,n,e,r==="miter",this),n}updateAreaAABBBoundsByPoints(t,e,n,r){const{points:s=e.points}=t,a=n;return s.forEach(o=>{var l,u;a.add(o.x,o.y),a.add((l=o.x1)!==null&&l!==void 0?l:o.x,(u=o.y1)!==null&&u!==void 0?u:o.y)}),a}updateAreaAABBBoundsBySegments(t,e,n,r){const{segments:s=e.segments}=t,a=n;return s.forEach(o=>{o.points.forEach(l=>{var u,c;a.add(l.x,l.y),a.add((u=l.x1)!==null&&u!==void 0?u:l.x,(c=l.y1)!==null&&c!==void 0?c:l.y)})}),a}_interpolate(t,e,n,r,s){t==="points"&&(s.points=pM(n,r,e))}needUpdateTags(t){return super.needUpdateTags(t,a5)}needUpdateTag(t){return super.needUpdateTag(t,a5)}toCustomPath(){let t=super.toCustomPath();if(t)return t;t=new Ki;const e=this.attribute,n=e.segments,r=s=>{if(s&&s.length){let a=!0;const o=[];if(s.forEach(l=>{var u,c;l.defined!==!1&&(a?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y),o.push({x:(u=l.x1)!==null&&u!==void 0?u:l.x,y:(c=l.y1)!==null&&c!==void 0?c:l.y}),a=!1)}),o.length){for(let l=o.length-1;l>=0;l--)t.lineTo(o[l].x,o[l].y);t.closePath()}}};return e.points?r(e.points):n&&n.length&&n.forEach(s=>{r(s.points)}),t}clone(){return new GD(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return GD.NOWORK_ANIMATE_ATTR}};Aet.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},ss);function OF(i){return new Aet(i)}const o5=["innerRadius","outerRadius","startAngle","endAngle","cornerRadius","padAngle","padRadius","cap",...wa];class Kg extends En{constructor(t){super(t),this.type="arc",this.numberType=vM}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{startAngle:t,endAngle:e,outerRadius:n,innerRadius:r}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(n)&&this._validNumber(r)}getParsedCornerRadius(){const t=this.getGraphicTheme(),{cornerRadius:e=t.cornerRadius,innerPadding:n=t.innerPadding,outerPadding:r=t.outerPadding}=this.attribute;let{outerRadius:s=t.outerRadius,innerRadius:a=t.innerRadius}=this.attribute;if(s+=r,a-=n,e===0||e==="0%")return 0;const o=Math.abs(s-a),l=u=>Math.min(yt(u,!0)?u:o*parseFloat(u)/100,o/2);if(J(e)){const u=e.map(c=>l(c)||0);return u.length===0?[u[0],u[0],u[0],u[0]]:u.length===2?[u[0],u[1],u[0],u[1]]:(u.length===3&&u.push(0),u)}return l(e)}getParsedAngle(){const t=this.getGraphicTheme();let{startAngle:e=t.startAngle,endAngle:n=t.endAngle}=this.attribute;const{cap:r=t.cap}=this.attribute,s=n-e>=0?1:-1,a=n-e;if(e=JPt(e),n=e+a,r&&xe(a)<qt-Ye){let o=1,l=1;r.length&&(o=Number(r[0]),l=Number(r[1]));let{outerRadius:u=t.outerRadius,innerRadius:c=t.innerRadius}=this.attribute;const{outerPadding:h=t.outerPadding,innerPadding:d=t.innerPadding}=this.attribute;u+=h,c-=d;const f=Math.abs(u-c)/2,p=f/u;if(f>Ye&&u>Ye)return{startAngle:e-s*p*o,endAngle:n+s*p*l,sc:s*p*o,ec:s*p*l}}return{startAngle:e,endAngle:n}}getParsePadAngle(t,e){const n=this.getGraphicTheme(),{innerPadding:r=n.innerPadding,outerPadding:s=n.outerPadding,padAngle:a=n.padAngle}=this.attribute;let{outerRadius:o=n.outerRadius,innerRadius:l=n.innerRadius}=this.attribute;o+=s,l-=r;const{padRadius:u=ro(o*o+l*l)}=this.attribute,c=xe(e-t);let h=t,d=e,f=t,p=e;const g=a/2;let m=c,_=c;if(g>Ye&&u>Ye){const v=e>t?1:-1;let y=uW(Number(u)/l*fi(g)),b=uW(Number(u)/o*fi(g));return(m-=2*y)>Ye?(y*=v,f+=y,p-=y):(m=0,f=p=(t+e)/2),(_-=2*b)>Ye?(b*=v,h+=b,d-=b):(_=0,h=d=(t+e)/2),{outerStartAngle:h,outerEndAngle:d,innerStartAngle:f,innerEndAngle:p,innerDeltaAngle:m,outerDeltaAngle:_}}return{outerStartAngle:h,outerEndAngle:d,innerStartAngle:f,innerEndAngle:p,innerDeltaAngle:m,outerDeltaAngle:_}}getGraphicTheme(){return le(this).arc}updateAABBBounds(t,e,n,r){this.updatePathProxyAABBBounds(n)||(r?this.updateArcAABBBoundsImprecise(t,e,n):this.updateArcAABBBoundsAccurate(t,e,n));const{tb1:s,tb2:a}=vt.graphicService.updateTempAABBBounds(n);Lb(t,e,s),n.union(s),s.setValue(a.x1,a.y1,a.x2,a.y2),this.setWidthHeightWithoutTransform(n);const{lineJoin:o=e.lineJoin}=t;return vt.graphicService.transformAABBBounds(t,n,e,o==="miter",this),n}updateArcAABBBoundsImprecise(t,e,n){let{outerRadius:r=e.outerRadius,innerRadius:s=e.innerRadius}=t;const{outerPadding:a=e.outerPadding,innerPadding:o=e.innerPadding}=t;return r+=a,s-=o,r<s&&(r=s),n.set(-r,-r,r,r),n}updateArcAABBBoundsAccurate(t,e,n){let{outerRadius:r=e.outerRadius,innerRadius:s=e.innerRadius}=t;const{outerPadding:a=e.outerPadding,innerPadding:o=e.innerPadding}=t;if(r+=a,s-=o,r<s){const c=r;r=s,s=c}let{endAngle:l=e.endAngle,startAngle:u=e.startAngle}=t;if(u>l){const c=u;u=l,l=c}return r<=Ye?n.set(0,0,0,0):Math.abs(l-u)>qt-Ye?n.set(-r,-r,r,r):(MD(u,l,r,n),MD(u,l,s,n)),n}needUpdateTags(t){return super.needUpdateTags(t,o5)}needUpdateTag(t){return super.needUpdateTag(t,o5)}toCustomPath(){var t,e,n,r;let s=super.toCustomPath();if(s)return s;const a=this.attribute,{startAngle:o,endAngle:l}=this.getParsedAngle();let u=((t=a.innerRadius)!==null&&t!==void 0?t:0)-((e=a.innerPadding)!==null&&e!==void 0?e:0),c=((n=a.outerRadius)!==null&&n!==void 0?n:0)-((r=a.outerPadding)!==null&&r!==void 0?r:0);const h=xe(l-o),d=l>o;if(c<u){const f=c;c=u,u=f}if(s=new Ki,c<=Ye)s.moveTo(0,0);else if(h>=qt-Ye)s.moveTo(0+c*Ri(o),0+c*fi(o)),s.arc(0,0,c,o,l,!d),u>Ye&&(s.moveTo(0+u*Ri(l),0+u*fi(l)),s.arc(0,0,u,l,o,d));else{const f=c*Ri(o),p=c*fi(o),g=u*Ri(l),m=u*fi(l);s.moveTo(0+f,0+p),s.arc(0,0,c,o,l,!d),s.lineTo(0+g,0+m),s.arc(0,0,u,l,o,d),s.closePath()}return s}clone(){return new Kg(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Kg.NOWORK_ANIMATE_ATTR}}Kg.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},ss);function DF(i){return new Kg(i)}class TM extends Kg{constructor(t){super(t),this.type="arc3d",this.numberType=yM}updateAABBBounds(t,e,n){const r=this.stage;if(!r||!r.camera)return n;const{outerRadius:s=e.outerRadius,height:a=0}=t,o=s+a;return n.setValue(-o,-o,o,o),vt.graphicService.updateTempAABBBounds(n),vt.graphicService.transformAABBBounds(t,n,e,!1,this),n}getNoWorkAnimateAttr(){return TM.NOWORK_ANIMATE_ATTR}}TM.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},ss);function ket(i){return new TM(i)}const l5=["points","cornerRadius",...wa];class qg extends En{constructor(t){super(t),this.type="polygon",this.numberType=wM}isValid(){return super.isValid()&&this._isValid()}_isValid(){const{points:t}=this.attribute;return t&&t.length>=2}getGraphicTheme(){return le(this).polygon}updateAABBBounds(t,e,n){this.updatePathProxyAABBBounds(n)||this.updatePolygonAABBBoundsImprecise(t,e,n),vt.graphicService.updateTempAABBBounds(n),this.widthWithoutTransform=n.x2-n.x1,this.heightWithoutTransform=n.y2-n.y1;const{lineJoin:r=e.lineJoin}=t;return vt.graphicService.transformAABBBounds(t,n,e,r==="miter",this),n}updatePolygonAABBBoundsImprecise(t,e,n){const{points:r=e.points}=t;return r.forEach(s=>{n.add(s.x,s.y)}),n}_interpolate(t,e,n,r,s){t==="points"&&(s.points=pM(n,r,e))}needUpdateTags(t){return super.needUpdateTags(t,l5)}needUpdateTag(t){return super.needUpdateTag(t,l5)}toCustomPath(){let t=super.toCustomPath();if(t)return t;const e=this.attribute.points;return t=new Ki,e.forEach((n,r)=>{r===0?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y)}),t.closePath(),t}clone(){return new qg(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return qg.NOWORK_ANIMATE_ATTR}}qg.NOWORK_ANIMATE_ATTR=ss;function Cet(i){return new qg(i)}class PM extends qg{constructor(t){super(t),this.type="pyramid3d",this.numberType=gF}updateAABBBounds(t,e,n){const r=this.stage;return!r||!r.camera||(this.findFace().vertices.forEach(s=>{const a=s[0],o=s[1];n.add(a,o)}),vt.graphicService.updateTempAABBBounds(n),vt.graphicService.transformAABBBounds(t,n,e,!1,this)),n}findFace(){const{points:t}=this.attribute,e=t.map((o,l)=>{const u=l===3?t[0]:t[l+1],c=o.x-u.x;return c===0?0:(o.y-u.y)/c}),n=t.map(o=>({p:o,d:0}));let r=!1,s=0;for(let o=0;o<e.length-1;o++){for(let l=o+1;l<e.length;l++){if(e[o]===e[l]){r=!0;const u=Je.distancePP(n[o].p,n[o+1].p);n[o].d=u,n[o+1].d=u,s=Nn(s,u);const c=Je.distancePP(n[l].p,n[l+1].p);n[l].d=c,n[l+1].d=c,s=Nn(s,c)}if(r)break}if(r)break}for(let o=t.length-1;o>=0;o--){const l=t[o];n.unshift({p:l,d:0})}for(let o=0;o<t.length;o++){const l=(s-n[o+t.length].d)/2;n[o].d+=l,n[o+t.length].d+=l}const a={polygons:[],vertices:[],edges:[]};return n.forEach(o=>{a.vertices.push([o.p.x,o.p.y,o.d])}),a.polygons.push({polygon:[0,4,5,1],normal:[0,-1,0]}),a.polygons.push({polygon:[7,6,2,3],normal:[0,1,0]}),a.polygons.push({polygon:[0,4,7,3],normal:[-1,0,0]}),a.polygons.push({polygon:[1,5,6,2],normal:[1,0,0]}),a.polygons.push({polygon:[0,1,2,3],normal:[0,0,-1]}),a.polygons.push({polygon:[4,5,6,7],normal:[0,0,1]}),a.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],a}_isValid(){return super._isValid()&&this.attribute.points.length===4}getNoWorkAnimateAttr(){return PM.NOWORK_ANIMATE_ATTR}}PM.NOWORK_ANIMATE_ATTR=ss;function Met(i){return new PM(i)}let x2t=class extends Lm{constructor(t){super({x:0,y:0}),this.type="shadowroot",this.shadowHost=t}clearUpdateBoundTag(){super.clearUpdateBoundTag(),this.shadowHost&&this.shadowHost.clearUpdateBoundTag()}addUpdateBoundTag(){super.addUpdateBoundTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}addUpdateShapeAndBoundsTag(){super.addUpdateShapeAndBoundsTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){const e=this.transMatrix;this._globalTransMatrix?this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f):this._globalTransMatrix=e.clone(),this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}doUpdateGlobalMatrix(){if(this.shadowHost){const t=this.shadowHost.globalTransMatrix;this._globalTransMatrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f)}}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}};function S2t(i){return new x2t(i)}class w2t{constructor(){this.store=new Map}RegisterGraphicCreator(t,e){this.store.set(t,e),this[t]=e}CreateGraphic(t,e){const n=this.store.get(t);return n?n(e):null}}const Mt=new w2t;let bS,xS;function EM(i){return bS||(bS=Mt.CreateGraphic("text",{})),bS.initAttributes(i),bS.AABBBounds}function A2t(i){return xS||(xS=Mt.CreateGraphic("richtext",{})),xS.setAttributes(i),xS.AABBBounds}var k2t=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},C2t=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},u5=function(i,t){return function(e,n){t(e,n,i)}};class RM{constructor(){this.time=On.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,n,r,s,a,o,l,u,c,h,d,f){var p;const{background:g,backgroundOpacity:m=(p=t.attribute.fillOpacity)!==null&&p!==void 0?p:u.backgroundOpacity,opacity:_=u.opacity,backgroundMode:v=u.backgroundMode,backgroundFit:y=u.backgroundFit,backgroundKeepAspectRatio:b=u.backgroundKeepAspectRatio,backgroundScale:x=u.backgroundScale,backgroundOffsetX:S=u.backgroundOffsetX,backgroundOffsetY:w=u.backgroundOffsetY,backgroundClip:A=u.backgroundClip}=t.attribute;if(g)if(t.backgroundImg&&t.resources){const k=t.resources.get(g);if(k.state!=="success"||!k.data)return;if(e.save(),t.parent&&!t.transMatrix.onlyTranslate()){const M=le(t.parent).group,{scrollX:R=M.scrollX,scrollY:P=M.scrollY}=t.parent.attribute;e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.translate(R,P)}A&&e.clip();const C=t.AABBBounds;e.setCommonStyle(t,t.attribute,n,r,u),e.globalAlpha=m*_,this.doDrawImage(e,k.data,C,{backgroundMode:v,backgroundFit:y,backgroundKeepAspectRatio:b,backgroundScale:x,backgroundOffsetX:S,backgroundOffsetY:w}),e.restore(),t.transMatrix.onlyTranslate()||e.setTransformForCurrent()}else e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,n,r,u),e.globalAlpha=m*_,e.fillStyle=g,e.fill(),e.highPerformanceRestore()}doDrawImage(t,e,n,r){const{backgroundMode:s,backgroundFit:a,backgroundKeepAspectRatio:o,backgroundScale:l=1,backgroundOffsetX:u=0,backgroundOffsetY:c=0}=r,h=n.width(),d=n.height();let f=h,p=d;if(s==="no-repeat")if(a)if(o){const g=Math.max(h/e.width,d/e.height);t.drawImage(e,n.x1+u,n.y1+c,e.width*g*l,e.height*g*l)}else t.drawImage(e,n.x1,n.y1,n.width(),n.height());else{const g=e.width*l,m=e.height*l;t.drawImage(e,n.x1+u,n.y1+c,g,m)}else{if(a&&s!=="repeat"&&(e.width||e.height)){const _=e.width,v=e.height;s==="repeat-x"?(f=_*(d/v),p=d):s==="repeat-y"&&(p=v*(h/_),f=h);const y=t.dpr,b=wd.allocate({width:f,height:p,dpr:y}),x=b.getContext("2d");x&&(x.inuse=!0,x.clearMatrix(),x.setTransformForCurrent(!0),x.clearRect(0,0,f,p),x.drawImage(e,0,0,f,p),e=b.nativeCanvas),wd.free(b)}const g=t.dpr,m=t.createPattern(e,s);m.setTransform&&m.setTransform(new DOMMatrix([1/g,0,0,1/g,0,0])),t.fillStyle=m,t.translate(n.x1,n.y1),t.fillRect(0,0,h,d),t.translate(-n.x1,-n.y1)}}}const Ch=new RM;let uo=class{constructor(i){this.subRenderContribitions=i,this.time=On.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(i,t,e,n,r,s,a,o,l,u,c,h,d){this._subRenderContribitions||(this._subRenderContribitions=this.subRenderContribitions.getContributions()),this._subRenderContribitions.forEach(f=>{f.render(i,t,e,n,r,s,a,o,l,u,c,h,d)})}};uo=k2t([Rt(),u5(0,ge(_n)),u5(0,jn(MF)),C2t("design:paramtypes",[Object])],uo);class M2t{constructor(){this.time=On.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,n,r,s,a,o,l,u,c,h,d,f){var p,g;const{clipConfig:m}=t.attribute;if(!m)return;const _=t.getClipPath();if(!_)return;const v=!(h||d),y=t.AABBBounds,b=(p=t.attribute.width)!==null&&p!==void 0?p:y.width(),x=(g=t.attribute.height)!==null&&g!==void 0?g:y.height();v&&e.save(),e.beginPath(),_.draw(e,[b,x],n+b/2,r+x/2,0)===!1&&e.closePath(),h&&h(e,t.attribute,u,!0),v&&e.clip()}}const T2t=new M2t;class P2t{constructor(){this.time=On.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,n,r,s,a,o,l,u,c,h,d,f){const{clipConfig:p}=t.attribute;p&&t.getClipPath()&&(h||d||e.restore())}}const E2t=new P2t;function R2t(i){return i<=.5?4*i-1:-4*i+3}function O2t(i,t,e,n,r,s,a){const{fill:o="orange",percent:l=.6,frequency:u=4,opacity:c,phi:h=0}=r;let{amplitude:d=10}=r;d*=R2t(t);const f=n*(1-l),p=e,g=Math.max(Math.round(p/70),2);i.beginPath(),i.moveTo(0+s,n+a),i.lineTo(0+s,f+a);const m=p/u*t,_=p/Math.PI/(2*u);for(let v=0;v<p;v+=g){const y=d*Math.sin((v+m+h)/_+h);i.lineTo(v+s,f+y+a)}i.lineTo(p+s,n+a),i.closePath(),i.fillStyle=o,isFinite(c)&&(i.globalAlpha=c),i.fill()}class IF{constructor(){this.time=On.afterFillStroke,this.useStyle=!0,this.order=10,this._tempSymbolGraphic=null}createCommonPattern(t,e,n,r,s){const a=(t-2*e)/2,o=r.dpr,l=wd.allocate({width:t,height:t,dpr:o}),u=l.getContext("2d");if(!u)return null;u.inuse=!0,u.clearMatrix(),u.setTransformForCurrent(!0),u.clearRect(0,0,t,t),s(a,u);const c=r.createPattern(l.nativeCanvas,"repeat");return c.setTransform&&c.setTransform(new DOMMatrix([1/o,0,0,1/o,0,0])),wd.free(l),c}createCirclePattern(t,e,n,r){return this.createCommonPattern(t,e,n,r,(s,a)=>{a.fillStyle=n,a.arc(s,s,s,0,qt),a.fill()})}createDiamondPattern(t,e,n,r){return this.createCommonPattern(t,e,n,r,(s,a)=>{const o=t/2,l=o;a.fillStyle=n,a.moveTo(o,l-s),a.lineTo(s+o,l),a.lineTo(o,l+s),a.lineTo(o-s,l),a.closePath(),a.fill()})}createRectPattern(t,e,n,r){return this.createCommonPattern(t,e,n,r,(s,a)=>{const o=e,l=o;a.fillStyle=n,a.fillRect(o,l,2*s,2*s)})}createVerticalLinePattern(t,e,n,r){return this.createCommonPattern(t,e,n,r,(s,a)=>{const o=e;a.fillStyle=n,a.fillRect(o,0,2*s,t)})}createHorizontalLinePattern(t,e,n,r){return this.createCommonPattern(t,e,n,r,(s,a)=>{const o=e;a.fillStyle=n,a.fillRect(0,o,t,2*s)})}createBiasLRLinePattern(t,e,n,r){return this.createCommonPattern(t,e,n,r,(s,a)=>{a.strokeStyle=n,a.lineWidth=s,a.moveTo(0,0),a.lineTo(t,t);const o=t/2,l=-o;a.moveTo(o,l),a.lineTo(o+t,l+t),a.moveTo(-o,-l),a.lineTo(-o+t,-l+t),a.stroke()})}createBiasRLLinePattern(t,e,n,r){return this.createCommonPattern(t,e,n,r,(s,a)=>{a.strokeStyle=n,a.lineWidth=s,a.moveTo(t,0),a.lineTo(0,t);const o=t/2,l=o;a.moveTo(t+o,l),a.lineTo(o,l+t),a.moveTo(t-o,-l),a.lineTo(-o,-l+t),a.stroke()})}createGridPattern(t,e,n,r){return this.createCommonPattern(t,e,n,r,(s,a)=>{const o=e,l=o;a.fillStyle=n,a.fillRect(o,l,s,s),a.fillRect(o+s,l+s,s,s)})}initTextureMap(t,e){this.textureMap=new Map}drawShape(t,e,n,r,s,a,o,l,u,c,h,d,f){this.textureMap||this.initTextureMap(e,t.stage);const{texture:p=u.texture,textureColor:g=u.textureColor,textureSize:m=u.textureSize,texturePadding:_=u.texturePadding}=t.attribute;p&&this.drawTexture(p,t,e,n,r,u,g,m,_)}drawTexture(t,e,n,r,s,a,o,l,u){var c;const{textureRatio:h=a.textureRatio,textureOptions:d=null}=e.attribute;let f=this.textureMap.get(t);if(!f)switch(t){case"circle":f=this.createCirclePattern(l,u,o,n);break;case"diamond":f=this.createDiamondPattern(l,u,o,n);break;case"rect":f=this.createRectPattern(l,u,o,n);break;case"vertical-line":f=this.createVerticalLinePattern(l,u,o,n);break;case"horizontal-line":f=this.createHorizontalLinePattern(l,u,o,n);break;case"bias-lr":f=this.createBiasLRLinePattern(l,u,o,n);break;case"bias-rl":f=this.createBiasRLLinePattern(l,u,o,n);break;case"grid":f=this.createGridPattern(l,u,o,n)}if(d&&d.dynamicTexture){const{gridConfig:p={},useNewCanvas:g}=d,m=e.AABBBounds;r=m.x1,s=m.y1;const _=n;let v;if(g){v=wd.allocate({width:m.width(),height:m.height(),dpr:n.dpr});const O=v.getContext("2d");O.clearRect(0,0,m.width(),m.height()),r=0,s=0,n=O}if(_.save(),e.parent&&!e.transMatrix.onlyTranslate()){const{scrollX:O=0,scrollY:T=0}=e.parent.attribute;_.setTransformFromMatrix(e.parent.globalTransMatrix),_.translate(O,T,!0)}_.setCommonStyle(e,e.attribute,r,s,a),_.clip();const y=m.width(),b=m.height(),x=u,S=l,w=p.columns?p.columns:Math.ceil(y/S),A=p.rows?p.rows:Math.ceil(b/S),k=p.gutterColumn?p.gutterColumn:2*x,C=p.gutterRow?p.gutterRow:2*x;this._tempSymbolGraphic||(this._tempSymbolGraphic=mf({}));const M=p.columns?y/p.columns:S,R=p.rows?b/p.rows:S;this._tempSymbolGraphic.setAttributes({size:[M-k,R-C],symbolType:t});const P=this._tempSymbolGraphic.getParsedPath();for(let O=0;O<A;O++)for(let T=0;T<w;T++){const D=r+S/2+T*S,B=s+S/2+O*S;(c=d.beforeDynamicTexture)===null||c===void 0||c.call(d,n,O,T,A,w,h,e,m.width(),m.height()),n.beginPath(),P.draw(n,Math.min(M-k,R-C),D,B,0)===!1&&n.closePath(),n.fillStyle=o,d.dynamicTexture(n,O,T,A,w,h,e,m.width(),m.height())}g&&(_.globalAlpha=1,_.drawImage(v.nativeCanvas,0,0,v.nativeCanvas.width,v.nativeCanvas.height,m.x1,m.y1,m.width()*_.dpr,m.height()*_.dpr)),_.restore()}else if(f)n.highPerformanceSave(),n.setCommonStyle(e,e.attribute,r,s,a),n.fillStyle=f,n.fill(),n.highPerformanceRestore();else if(t==="wave"){n.save(),n.setCommonStyle(e,e.attribute,r,s,a),n.clip();const p=e.AABBBounds;O2t(n,h,p.width(),p.height(),Object.assign(Object.assign({},d||{}),{fill:o}),r+p.x1-r,s+p.y1-s),n.restore()}}}const Bm=new IF;class D2t{constructor(){this.time=On.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,n,r,s,a,o,l,u,c,h,d){const{outerBorder:f,innerBorder:p}=t.attribute,g=f&&f.visible!==!1,m=p&&p.visible!==!1;if(!g&&!m)return;const{innerPadding:_=u.innerPadding,outerPadding:v=u.outerPadding,startAngle:y=u.startAngle,endAngle:b=u.endAngle,opacity:x=u.opacity,x:S=u.x,y:w=u.y,scaleX:A=u.scaleX,scaleY:k=u.scaleY,keepStrokeScale:C=u.keepStrokeScale}=t.attribute;let{innerRadius:M=u.innerRadius,outerRadius:R=u.outerRadius}=t.attribute;R+=v,M-=_;const P=(O,T)=>{const D=!(!O||!O.stroke),{distance:B=u[T].distance}=O,I=C?B:Ql(e,B,e.dpr),F=B/R,j=T==="outerBorder"?1:-1;if(t.setAttributes({outerRadius:R+j*I,innerRadius:M-j*I,startAngle:y-j*F,endAngle:b+j*F}),e.beginPath(),DD(t,e,n,r,R+j*I,M-j*I),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,O,u[T]);else if(D){const H=u[T].opacity;u[T].opacity=x,e.setStrokeStyle(t,O,(S-n)/A,(w-r)/k,u[T]),u[T].opacity=H,e.stroke()}};g&&P(f,"outerBorder"),m&&P(p,"innerBorder"),t.setAttributes({outerRadius:R,innerRadius:M,startAngle:y,endAngle:b})}}const I2t=new D2t,L2t=Bm,B2t=Ch;class F2t{constructor(){this.time=On.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,n,r,s,a,o,l,u,c,h,d){const{outerBorder:f,innerBorder:p}=t.attribute,g=f&&f.visible!==!1,m=p&&p.visible!==!1;if(!g&&!m)return;const{radius:_=u.radius,startAngle:v=u.startAngle,endAngle:y=u.endAngle,opacity:b=u.opacity,x=u.x,y:S=u.y,scaleX:w=u.scaleX,scaleY:A=u.scaleY,keepStrokeScale:k=u.keepStrokeScale}=t.attribute,C=(M,R)=>{const P=!(!M||!M.stroke),{distance:O=u[R].distance}=M,T=k?O:Ql(e,O,e.dpr),D=R==="outerBorder"?1:-1;if(e.beginPath(),e.arc(n,r,_+D*T,v,y),e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,M,u[R]);else if(P){const B=u[R].opacity;u[R].opacity=b,e.setStrokeStyle(t,M,(x-n)/w,(S-r)/A,u[R]),u[R].opacity=B,e.stroke()}};g&&C(f,"outerBorder"),m&&C(p,"innerBorder")}}const z2t=new F2t,N2t=Bm,j2t=Ch;class H2t extends RM{constructor(){super(...arguments),this.time=On.beforeFillStroke}drawShape(t,e,n,r,s,a,o,l,u,c,h,d){const{background:f,backgroundMode:p=u.backgroundMode,backgroundFit:g=u.backgroundFit,backgroundKeepAspectRatio:m=u.backgroundKeepAspectRatio,backgroundScale:_=u.backgroundScale,backgroundOffsetX:v=u.backgroundOffsetX,backgroundOffsetY:y=u.backgroundOffsetY}=t.attribute;if(f)if(t.backgroundImg&&t.resources){const b=t.resources.get(f);if(b.state!=="success"||!b.data)return;e.highPerformanceSave(),e.setTransformFromMatrix(t.parent.globalTransMatrix,!0);const x=t.AABBBounds;this.doDrawImage(e,b.data,x,{backgroundMode:p,backgroundFit:g,backgroundKeepAspectRatio:m,backgroundScale:_,backgroundOffsetX:v,backgroundOffsetY:y}),e.highPerformanceRestore(),e.setTransformForCurrent()}else e.highPerformanceSave(),e.fillStyle=f,e.fill(),e.highPerformanceRestore()}}const c5=new H2t,SS=Xe/2;function vf(i,t,e,n,r,s,a=!0,o){let l;if(Array.isArray(a)&&(o=a,a=!0),n<0&&(t+=n,n=-n),r<0&&(e+=r,r=-r),yt(s,!0))l=[s=xe(s),s,s,s];else if(Array.isArray(s)){const w=s;let A,k;switch(w.length){case 0:l=[0,0,0,0];break;case 1:A=xe(w[0]),l=[A,A,A,A];break;case 2:case 3:A=xe(w[0]),k=xe(w[1]),l=[A,k,A,k];break;default:l=w,l[0]=xe(l[0]),l[1]=xe(l[1]),l[2]=xe(l[2]),l[3]=xe(l[3])}}else l=[0,0,0,0];if(n<0||l[0]+l[1]+l[2]+l[3]<1e-12)return i.rect(t,e,n,r);const[u,c,h,d]=[[t,e],[t+n,e],[t+n,e+r],[t,e+r]],f=Math.min(n/2,r/2),p=[Math.min(f,l[0]),Math.min(f,l[1]),Math.min(f,l[2]),Math.min(f,l[3])],g=[u[0]+p[0],u[1]],m=[u[0],u[1]+p[0]],_=[c[0]-p[1],c[1]],v=[c[0],c[1]+p[1]],y=[h[0]-p[2],h[1]],b=[h[0],h[1]-p[2]],x=[d[0]+p[3],d[1]],S=[d[0],d[1]-p[3]];if(i.moveTo(g[0],g[1]),a){if(o&&o[0]?o[0](g[0],g[1],_[0],_[1]):i.lineTo(_[0],_[1]),!Zx(_,v)){o&&o[0]&&i.moveTo(_[0],_[1]);const w=_[0],A=_[1]+p[1];i.arc(w,A,p[1],-SS,0,!1)}if(o&&o[1]?o[1](v[0],v[1],b[0],b[1]):i.lineTo(b[0],b[1]),!Zx(y,b)){const w=b[0]-p[2],A=b[1];o&&o[1]&&i.moveTo(b[0],b[1]),i.arc(w,A,p[2],0,SS,!1)}if(o&&o[2]?o[2](y[0],y[1],x[0],x[1]):i.lineTo(x[0],x[1]),!Zx(x,S)){const w=x[0],A=x[1]-p[3];o&&o[2]&&i.moveTo(x[0],x[1]),i.arc(w,A,p[3],SS,Xe,!1)}if(o&&o[3]?o[3](S[0],S[1],m[0],m[1]):i.lineTo(m[0],m[1]),!Zx(g,m)){const w=g[0],A=g[1]+p[0];o&&o[3]&&i.moveTo(m[0],m[1]),i.arc(w,A,p[0],Xe,Xe+SS,!1)}}else o&&o[0]?o[0](g[0],g[1],_[0],_[1]):i.lineTo(_[0],_[1]),o&&o[1]?o[1](_[0],_[1],y[0],y[1]):i.lineTo(y[0],y[1]),o&&o[2]?o[2](y[0],y[1],x[0],x[1]):i.lineTo(x[0],x[1]),o&&o[2]?o[2](x[0],x[1],g[0],g[1]):i.lineTo(g[0],g[1]);return!o&&i.closePath(),i}var Tet=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};class Pet{constructor(){this.time=On.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,n,r,s,a,o,l,u,c,h,d){const{outerBorder:f,innerBorder:p}=t.attribute,g=f&&f.visible!==!1,m=p&&p.visible!==!1;if(!g&&!m)return;const{cornerRadius:_=u.cornerRadius,cornerType:v=u.cornerType,opacity:y=u.opacity,x:b=u.x,y:x=u.y,scaleX:S=u.scaleX,scaleY:w=u.scaleY,x1:A,y1:k,keepStrokeScale:C=u.keepStrokeScale}=t.attribute;let{width:M,height:R}=t.attribute;M=(M??A-n)||0,R=(R??k-r)||0;const P=(O,T)=>{const D=!(!O||!O.stroke),B=T==="outerBorder"?-1:1,{distance:I=u[T].distance}=O,F=C?I:Ql(e,I,e.dpr),j=n+B*F,H=r+B*F,U=2*F;if(_===0||J(_)&&_.every(K=>K===0)?(e.beginPath(),e.rect(j,H,M-B*U,R-B*U)):(e.beginPath(),vf(e,j,H,M-B*U,R-B*U,_,v!=="bevel")),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,O,u[T]);else if(D){const K=u[T].opacity;u[T].opacity=y,e.setStrokeStyle(t,O,(b-n)/S,(x-r)/w,u[T]),u[T].opacity=K,e.stroke()}};g&&P(f,"outerBorder"),m&&P(p,"innerBorder")}}let Yw=class{constructor(){this.time=On.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(i,t,e,n,r,s,a,o,l,u,c,h,d){const{stroke:f=l.stroke}=i.attribute;Array.isArray(f)&&f.some(p=>p===!1)&&(d.doStroke=!1)}};Yw=Tet([Rt()],Yw);let Xw=class{constructor(){this.time=On.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(i,t,e,n,r,s,a,o,l,u,c,h){const{x1:d,y1:f,x:p=l.x,y:g=l.y,stroke:m=l.stroke,cornerRadius:_=l.cornerRadius,cornerType:v=l.cornerType}=i.attribute;let{width:y,height:b}=i.attribute;if(y=(y??d-p)||0,b=(b??f-g)||0,Array.isArray(m)&&m.some(x=>x===!1)){if(t.setStrokeStyle(i,i.attribute,e,n,l),!(_===0||J(_)&&_.every(x=>x===0))){let x,S=0;return vf(t,e,n,y,b,_,v!=="bevel",new Array(4).fill(0).map((w,A)=>(k,C,M,R)=>{m[A]&&(S===A-1&&m[A]===x||(t.setStrokeStyle(i,Object.assign(Object.assign({},i.attribute),{stroke:m[A]}),e,n,l),t.beginPath(),t.moveTo(k,C),x=m[A]),S=A,t.lineTo(M,R),t.stroke(),A===3&&t.beginPath())})),void t.stroke()}if(t.beginPath(),t.moveTo(e,n),m[0]?t.lineTo(e+y,n):t.moveTo(e+y,n),m[1]?t.lineTo(e+y,n+b):t.moveTo(e+y,n+b),m[2]?t.lineTo(e,n+b):t.moveTo(e,n+b),m[3]){const x=m[0]?n-t.lineWidth/2:n;t.lineTo(e,x)}else t.moveTo(e,n);t.stroke()}}};Xw=Tet([Rt()],Xw);const V2t=new Pet,W2t=Bm,$2t=Ch;class U2t extends Pet{constructor(){super(...arguments),this.time=On.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,n,r,s,a,o,l,u,c,h,d){return super.drawShape(t,e,n,r,s,a,o,l,u,c,h,d)}}const G2t=new U2t,Y2t=Ch;class X2t{constructor(){this.time=On.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,n,r,s,a,o,l,u,c,h,d){const f=t.getParsedPath();if(!f)return;const{outerBorder:p,innerBorder:g}=t.attribute,m=p&&p.visible!==!1,_=g&&g.visible!==!1;if(!m&&!_)return;const{size:v=u.size,opacity:y=u.opacity,x:b=u.x,y:x=u.y,scaleX:S=u.scaleX,scaleY:w=u.scaleY,keepStrokeScale:A=u.keepStrokeScale}=t.attribute,k=(C,M)=>{const R=!(!C||!C.stroke),{distance:P=u[M].distance}=C,O=A?P:Ql(e,P,e.dpr),T=M==="outerBorder"?1:-1;if(e.beginPath(),f.drawOffset(e,v,n,r,T*O)===!1&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),d)d(e,C,u[M]);else if(R){const D=u[M].opacity;u[M].opacity=y,e.setStrokeStyle(t,C,(b-n)/S,(x-r)/w,u[M]),u[M].opacity=D,e.stroke()}};m&&k(p,"outerBorder"),_&&k(g,"innerBorder")}}class K2t{constructor(){this.time=On.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,n,r,s,a,o,l,u,c,h,d,f){const{clipRange:p=u.clipRange,x:g=u.x,y:m=u.y,z:_=u.z,size:v=u.size,scaleX:y=u.scaleX,scaleY:b=u.scaleY}=t.attribute,x=t.getParsedPath();x&&p<1&&p>0&&(e.beginPath(),x.drawWithClipRange&&x.drawWithClipRange(e,v,n,r,p,_,(S,w)=>{var A,k,C,M;if(t._parsedPath.svgCache){const R=Object.assign({},w);R.fill=(A=w.fill)!==null&&A!==void 0?A:t.attribute.fill,R.opacity=(k=w.opacity)!==null&&k!==void 0?k:t.attribute.opacity,R.fillOpacity=t.attribute.fillOpacity,R.stroke=(C=w.stroke)!==null&&C!==void 0?C:t.attribute.stroke,R.lineWidth=(M=w.lineWidth)!==null&&M!==void 0?M:t.attribute.lineWidth,w=R}w.stroke&&(d?d(e,t.attribute,u):l&&(e.setStrokeStyle(t,w,(g-n)/y,(m-r)/b,u),e.stroke()))}),a&&!x.isSvg&&(d?d(e,t.attribute,u):l&&(e.setStrokeStyle(t,t.attribute,(g-n)/y,(m-r)/b,u),e.stroke())))}}const q2t=new X2t,Z2t=new K2t,Q2t=Bm,J2t=Ch;class tBt extends IF{constructor(){super(...arguments),this.time=On.afterFillStroke}drawShape(t,e,n,r,s,a,o,l,u,c,h,d,f){var p,g,m,_;this.textureMap||this.initTextureMap(e,t.stage);const{attribute:v=t.attribute}=f||{},{texture:y=(p=t.attribute.texture)!==null&&p!==void 0?p:_S(u,"texture"),textureColor:b=(g=t.attribute.textureColor)!==null&&g!==void 0?g:_S(u,"textureColor"),textureSize:x=(m=t.attribute.textureSize)!==null&&m!==void 0?m:_S(u,"textureSize"),texturePadding:S=(_=t.attribute.texturePadding)!==null&&_!==void 0?_:_S(u,"texturePadding")}=v;y&&this.drawTexture(y,t,e,n,r,u,b,x,S)}}const Sn={x:0,y:0,z:0,lastModelMatrix:null};class ks{init(t){t&&(this._renderContribitions=t.getContributions()),this._renderContribitions||(this._renderContribitions=[]),this.builtinContributions||(this.builtinContributions=[]),this.builtinContributions.push(T2t),this.builtinContributions.push(E2t),this.builtinContributions.forEach(e=>this._renderContribitions.push(e)),this._renderContribitions.length&&(this._renderContribitions.sort((e,n)=>n.order-e.order),this._beforeRenderContribitions=this._renderContribitions.filter(e=>e.time===On.beforeFillStroke),this._afterRenderContribitions=this._renderContribitions.filter(e=>e.time===On.afterFillStroke))}reInit(){this.init(this.graphicRenderContributions)}beforeRenderStep(t,e,n,r,s,a,o,l,u,c,h,d,f){this._beforeRenderContribitions&&this._beforeRenderContribitions.forEach(p=>{p.supportedAppName&&t.stage&&t.stage.params&&t.stage.params.context&&t.stage.params.context.appName&&!(Array.isArray(p.supportedAppName)?p.supportedAppName:[p.supportedAppName]).includes(t.stage.params.context.appName)||p.drawShape(t,e,n,r,s,a,o,l,u,c,h,d,f)})}afterRenderStep(t,e,n,r,s,a,o,l,u,c,h,d,f){this._afterRenderContribitions&&this._afterRenderContribitions.forEach(p=>{p.supportedAppName&&t.stage&&t.stage.params&&t.stage.params.context&&t.stage.params.context.appName&&!(Array.isArray(p.supportedAppName)?p.supportedAppName:[p.supportedAppName]).includes(t.stage.params.context.appName)||p.drawShape(t,e,n,r,s,a,o,l,u,c,h,d,f)})}drawPathProxy(t,e,n,r,s,a,o,l){if(!t.pathProxy)return!1;const u=le(t,a?.theme)[t.type.replace("3d","")],{fill:c=u.fill,stroke:h=u.stroke,opacity:d=u.opacity,fillOpacity:f=u.fillOpacity,lineWidth:p=u.lineWidth,strokeOpacity:g=u.strokeOpacity,visible:m=u.visible,x:_=u.x,y:v=u.y}=t.attribute,y=Qd(d,f,c),b=OD(d,g),x=Zd(c),S=Gg(h,p);if(!m||!x&&!S||!(y||b||o||l))return!0;e.beginPath();const w=typeof t.pathProxy=="function"?t.pathProxy(t.attribute):t.pathProxy;return qu(w.commandList,e,n,r),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,u),this.beforeRenderStep(t,e,n,r,x,S,y,b,u,s,o,l),S&&(l?l(e,t.attribute,u):b&&(e.setStrokeStyle(t,t.attribute,n-_,r-v,u),e.stroke())),x&&(o?o(e,t.attribute,u):y&&(e.setCommonStyle(t,t.attribute,n-_,r-v,u),e.fill())),this.afterRenderStep(t,e,n,r,x,S,y,b,u,s,o,l),!0}valid(t,e,n,r){const{fill:s=e.fill,background:a,stroke:o=e.stroke,opacity:l=e.opacity,fillOpacity:u=e.fillOpacity,lineWidth:c=e.lineWidth,strokeOpacity:h=e.strokeOpacity,visible:d=e.visible}=t.attribute,f=Qd(l,u,s),p=OD(l,h),g=Zd(s,a),m=Gg(o,c);return!(!t.valid||!d)&&!(!g&&!m)&&!!(f||p||n||r||a)&&{fVisible:f,sVisible:p,doFill:g,doStroke:m}}transform(t,e,n,r=!1){const{x:s=e.x,y:a=e.y,z:o=e.z,scaleX:l=e.scaleX,scaleY:u=e.scaleY,angle:c=e.angle,postMatrix:h}=t.attribute,d=n.modelMatrix,f=n.camera;Sn.x=s,Sn.y=a,Sn.z=o,Sn.lastModelMatrix=d;const p=f&&(r||p2t(t)),g=p?t.transMatrix.onlyTranslate()&&!h:l===1&&u===1&&c===0&&!h;if(p){const m=Fi.allocate(),_=Fi.allocate();yet(_,t,e),qd(m,d||m,_),Sn.x=0,Sn.y=0,Sn.z=0,n.modelMatrix=m,n.setTransform(1,0,0,1,0,0,!0),Fi.free(_)}if(g&&!d){const m=t.getOffsetXY(e);Sn.x+=m.x,Sn.y+=m.y,Sn.z=o,n.setTransformForCurrent()}else if(p)Sn.x=0,Sn.y=0,Sn.z=0,n.setTransform(1,0,0,1,0,0,!0);else if(f&&n.project){const m=t.getOffsetXY(e);Sn.x+=m.x,Sn.y+=m.y,this.transformWithoutTranslate(n,Sn.x,Sn.y,Sn.z,l,u,c)}else n.transformFromMatrix(t.transMatrix,!0),Sn.x=0,Sn.y=0,Sn.z=0;return Sn}transformUseContext2d(t,e,n,r){const s=r.camera;if(this.camera=s,s){const a=t.AABBBounds,o=a.x2-a.x1,l=a.y2-a.y1,u=r.project(0,0,n),c=r.project(o,0,n),h=r.project(o,l,n),d={x:0,y:0},f={x:o,y:0},p={x:o,y:l};r.camera=null;const g=1/(d.x*(p.y-f.y)-f.x*p.y+p.x*f.y+(f.x-p.x)*d.y),m=-(d.y*(h.x-c.x)-f.y*h.x+p.y*c.x+(f.y-p.y)*u.x)*g,_=(f.y*h.y+d.y*(c.y-h.y)-p.y*c.y+(p.y-f.y)*u.y)*g,v=(d.x*(h.x-c.x)-f.x*h.x+p.x*c.x+(f.x-p.x)*u.x)*g,y=-(f.x*h.y+d.x*(c.y-h.y)-p.x*c.y+(p.x-f.x)*u.y)*g,b=(d.x*(p.y*c.x-f.y*h.x)+d.y*(f.x*h.x-p.x*c.x)+(p.x*f.y-f.x*p.y)*u.x)*g,x=(d.x*(p.y*c.y-f.y*h.y)+d.y*(f.x*h.y-p.x*c.y)+(p.x*f.y-f.x*p.y)*u.y)*g;r.setTransform(m,_,v,y,b,x,!0)}}restoreTransformUseContext2d(t,e,n,r){this.camera&&(r.camera=this.camera)}transformWithoutTranslate(t,e,n,r,s,a,o){const l=t.project(e,n,r);t.translate(l.x,l.y,!1),t.scale(s,a,!1),t.rotate(o,!1),t.translate(-l.x,-l.y,!1),t.setTransformForCurrent()}_draw(t,e,n,r,s,a){const{context:o}=r;if(!o)return;const{renderable:l}=t.attribute;if(l===!1)return;o.highPerformanceSave();const u=this.transform(t,e,o,n),{x:c,y:h,z:d,lastModelMatrix:f}=u;this.z=d,this.drawPathProxy(t,o,c,h,r,s)||(this.drawShape(t,o,c,h,r,s,null,null,a),this.z=0,o.modelMatrix!==f&&Fi.free(o.modelMatrix),o.modelMatrix=f),o.highPerformanceRestore()}}var eBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},iBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},h5=function(i,t){return function(e,n){t(e,n,i)}};let Kw=class extends ks{constructor(i){super(),this.graphicRenderContributions=i,this.numberType=vM,this.builtinContributions=[I2t,B2t,L2t],this.init(i)}drawArcTailCapPath(i,t,e,n,r,s,a,o){const l=o-a,u=i.getParsedAngle(),c=u.startAngle;let h=u.endAngle;h=o;const d=h>c;let f=!1;if(r<s){const D=r;r=s,s=D}const{xors:p,yors:g,xirs:m,yirs:_,limitedOcr:v,outerCornerRadiusStart:y,outerCornerRadiusEnd:b,maxOuterCornerRadius:x,xore:S,yore:w,xire:A,yire:k,limitedIcr:C,innerDeltaAngle:M,innerStartAngle:R,innerCornerRadiusStart:P,innerCornerRadiusEnd:O,maxInnerCornerRadius:T}=_et(i,c,h,s,r);if(v>Ye){const D=gn(y,v),B=gn(b,v),I=zc(m,_,p,g,r,D,Number(d)),F=zc(S,w,A,k,r,B,Number(d));if(v<x&&D===B)t.moveTo(e+I.cx+I.x01,n+I.cy+I.y01),t.arc(e+I.cx,n+I.cy,v,ri(I.y01,I.x01),ri(F.y01,F.x01),!d);else{const j=h-l-.03,H=ri(F.y11,F.x11);t.arc(e,n,r,j,H,!d),B>0&&t.arc(e+F.cx,n+F.cy,B,ri(F.y11,F.x11),ri(F.y01,F.x01),!d)}}else t.moveTo(e+p,n+g);if(!(s>Ye)||M<.001)t.lineTo(e+A,n+k),f=!0;else if(C>Ye){const D=gn(P,C),B=gn(O,C),I=zc(A,k,S,w,s,-B,Number(d)),F=zc(p,g,m,_,s,-D,Number(d));if(t.lineTo(e+I.cx+I.x01,n+I.cy+I.y01),C<T&&D===B){const j=ri(F.y01,F.x01);t.arc(e+I.cx,n+I.cy,C,ri(I.y01,I.x01),j,!d)}else{B>0&&t.arc(e+I.cx,n+I.cy,B,ri(I.y01,I.x01),ri(I.y11,I.x11),!d);const j=ri(I.cy+I.y11,I.cx+I.x11),H=h-l-.03;t.arc(e,n,s,j,H,d)}}else t.lineTo(e+s*Ri(R),n+s*fi(R));return f}drawShape(i,t,e,n,r,s,a,o,l){l=l??le(i,s?.theme).arc;const{fill:u=l.fill,stroke:c=l.stroke,x:h=l.x,y:d=l.y,fillStrokeOrder:f=l.fillStrokeOrder}=i.attribute,p=this.valid(i,l,a,o);if(!p)return;const{fVisible:g,sVisible:m,doFill:_,doStroke:v}=p,{outerPadding:y=l.outerPadding,innerPadding:b=l.innerPadding,cap:x=l.cap,forceShowCap:S=l.forceShowCap}=i.attribute;let{outerRadius:w=l.outerRadius,innerRadius:A=l.innerRadius}=i.attribute;w+=y,A-=b;let k=0;const C=(Vn(x)&&x||x[0])&&u.gradient==="conical";if(C){const{sc:O,startAngle:T,endAngle:D}=i.getParsedAngle();xe(D-T)<qt-Ye&&(k=O||0,u.startAngle-=k,u.endAngle-=k)}let M=!1;const{isFullStroke:R,stroke:P}=bIt(c);if((_||R)&&(t.beginPath(),DD(i,t,e,n,w,A),M=!0,t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,l),this.beforeRenderStep(i,t,e,n,_,v,g,m,l,r,a,o),f?(this._runStroke(i,t,e,n,l,v,R,m,o),this._runFill(i,t,e,n,l,_,g,h,d,a)):(this._runFill(i,t,e,n,l,_,g,h,d,a),this._runStroke(i,t,e,n,l,v,R,m,o))),!R&&v&&(t.beginPath(),DD(i,t,e,n,w,A,P),M||this.beforeRenderStep(i,t,e,n,_,v,g,m,l,r,a,o),o?o(t,i.attribute,l):m&&(t.setStrokeStyle(i,i.attribute,e,n,l),t.stroke())),(Vn(x)&&x||x[1])&&S){const{startAngle:O,endAngle:T}=i.getParsedAngle();if(xe(T-O)>=qt-Ye){t.beginPath();const D=Math.abs(w-A)/2/w,{endAngle:B=l.endAngle,fill:I=l.fill}=i.attribute,F=B;this.drawArcTailCapPath(i,t,e,n,w,A,F,F+D),M||this.beforeRenderStep(i,t,e,n,_,v,g,m,l,r,a,o);const j=()=>{if(_){const U=I;if(U.gradient==="conical"){const K=JLt(0,0,B,U);a||Qd&&(t.setCommonStyle(i,i.attribute,e,n,l),t.fillStyle=K,t.fill())}}},H=()=>{v&&(o||m&&(t.setStrokeStyle(i,i.attribute,e,n,l),t.stroke()))};j(),H()}}this.afterRenderStep(i,t,e,n,_,v,g,m,l,r,a,o),C&&(u.startAngle+=k,u.endAngle+=k)}_runFill(i,t,e,n,r,s,a,o,l,u){s&&(u?u(t,i.attribute,r):a&&(t.setCommonStyle(i,i.attribute,o-e,l-n,r),t.fill()))}_runStroke(i,t,e,n,r,s,a,o,l){s&&a&&(l?l(t,i.attribute,r):o&&(t.setStrokeStyle(i,i.attribute,e,n,r),t.stroke()))}draw(i,t,e,n){const r=le(i,n?.theme).arc;this._draw(i,r,!1,e,n,r)}};Kw=eBt([Rt(),h5(0,ge(_n)),h5(0,jn(ID)),iBt("design:paramtypes",[Object])],Kw);var nBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},rBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},d5=function(i,t){return function(e,n){t(e,n,i)}};let qw=class extends ks{constructor(i){super(),this.graphicRenderContributions=i,this.numberType=bM,this.builtinContributions=[z2t,j2t,N2t],this.init(i)}drawShape(i,t,e,n,r,s,a,o){const l=le(i,s?.theme).circle,{radius:u=l.radius,startAngle:c=l.startAngle,endAngle:h=l.endAngle,x:d=l.x,y:f=l.y,fillStrokeOrder:p=l.fillStrokeOrder}=i.attribute,g=this.valid(i,l,a,o);if(!g)return;const{fVisible:m,sVisible:_,doFill:v,doStroke:y}=g;t.beginPath(),t.arc(e,n,u,c,h),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,l),this.beforeRenderStep(i,t,e,n,v,y,m,_,l,r,a,o);const b=()=>{v&&(a?a(t,i.attribute,l):m&&(t.setCommonStyle(i,i.attribute,d-e,f-n,l),t.fill()))},x=()=>{y&&(o?o(t,i.attribute,l):_&&(t.setStrokeStyle(i,i.attribute,d-e,f-n,l),t.stroke()))};p?(x(),b()):(b(),x()),this.afterRenderStep(i,t,e,n,v,y,m,_,l,r,a,o)}draw(i,t,e,n){const r=le(i,n?.theme).circle;this._draw(i,r,!1,e,n)}};qw=nBt([Rt(),d5(0,ge(_n)),d5(0,jn(BD)),rBt("design:paramtypes",[Object])],qw);function Zw(i,t,e,n){if(!t.p1)return;const{offsetX:r=0,offsetY:s=0,offsetZ:a=0}=n||{};if(e===1)t.p2&&t.p3?i.bezierCurveTo(r+t.p1.x,s+t.p1.y,r+t.p2.x,s+t.p2.y,r+t.p3.x,s+t.p3.y,a):i.lineTo(r+t.p1.x,s+t.p1.y,a);else if(t.p2&&t.p3){const[o]=Lw(t,e);i.bezierCurveTo(r+o.p1.x,s+o.p1.y,r+o.p2.x,s+o.p2.y,r+o.p3.x,s+o.p3.y,a)}else{const o=t.getPointAt(e);i.lineTo(r+o.x,s+o.y,a)}}function f5(i,t,e,n,r,s,a){var o;let l=t.p0,u=n;if(e&&e.originP1===e.originP2&&(l=e.p0),t.defined)n||(i.lineTo(l.x+r,l.y+s,a),u=!n);else{const{originP1:c,originP2:h}=t;let d;if(c&&c.defined!==!1&&!e?d=l:c&&h.defined!==!1&&(d=(o=t.p3)!==null&&o!==void 0?o:t.p1),n){u=!n;const f=d?d.x:t.p0.x,p=d?d.y:t.p0.y;i.moveTo(f+r,p+s,a)}else d&&(u=!n,i.lineTo(d.x+r,d.y+s,a))}return u}function Eet(i,t,e,n,r){const{offsetX:s=0,offsetY:a=0,offsetZ:o=0,mode:l="none",drawConnect:u=!1}=r||{};if(u&&l==="none"||!t)return;let c=!0;const{curves:h}=t;if(e>=1){if(u){let _,v=!0;h.forEach((y,b)=>{y.originP1!==y.originP2&&(v=f5(i,y,_,v,s,a,o)),_=y})}else h.forEach(_=>{_.defined?(c&&i.moveTo(_.p0.x+s,_.p0.y+a,o),Zw(i,_,1,r),c=!1):c=!0});return}if(e<=0)return;let d;n==="x"?d=hi.ROW:n==="y"?d=hi.COLUMN:n==="auto"&&(d=t.direction);const f=e*t.tryUpdateLength(d);let p=0,g=!0,m=null;for(let _=0,v=h.length;_<v;_++){const y=h[_],b=y.getLength(d),x=(f-p)/b;if(p+=b,x<0)break;if(u){if(y.originP1===y.originP2){m=y;continue}g=f5(i,y,m,g,s,a,o),m=y}else{if(!y.defined){c=!0;continue}c&&i.moveTo(y.p0.x+s,y.p0.y+a,o),Zw(i,y,gn(x,1),r),c=!1}}}function sBt(i,t,e,n){const{offsetX:r=0,offsetY:s=0}=n||{},a=t?t.points[t.points.length-1]:e.points[0];i.moveTo(a.x+r,a.y+s),e.points.forEach(o=>{o.defined!==!1?i.lineTo(o.x+r,o.y+s):i.moveTo(o.x+r,o.y+s)})}function aBt(i,t,e,n){const{offsetX:r=0,offsetY:s=0}=n||{},{points:a}=e,o=[];for(let l=0;l<a.length;l++)a[l].defined;o.push(a),o.forEach((l,u)=>{var c,h,d,f;const p=t&&u===0?t.points[t.points.length-1]:l[0];i.moveTo(p.x+r,p.y+s),l.forEach(g=>{g.defined!==!1?i.lineTo(g.x+r,g.y+s):i.moveTo(g.x+r,g.y+s)});for(let g=l.length-1;g>=0;g--){const m=l[g];i.lineTo((c=m.x1)!==null&&c!==void 0?c:m.x,(h=m.y1)!==null&&h!==void 0?h:m.y)}i.lineTo((d=p.x1)!==null&&d!==void 0?d:p.x,(f=p.y1)!==null&&f!==void 0?f:p.y),i.closePath()})}var oBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let g0=class extends ks{constructor(){super(...arguments),this.numberType=Ib}draw(i,t,e,n){const r=le(i,n?.theme).line;this._draw(i,r,!1,e,n)}drawSegmentItem(i,t,e,n,r,s,a,o,l,u,c,h,d,f,p){var g;if(!t)return;i.beginPath();const m=(g=this.z)!==null&&g!==void 0?g:0;Eet(i,t,l,u,{offsetX:c,offsetY:h,offsetZ:m}),d.cache&&!J(d.cache)&&d.cache.curves.every(y=>y.defined)&&d.attribute.curveType&&d.attribute.curveType.includes("Closed")&&i.closePath(),i.setShadowBlendStyle&&i.setShadowBlendStyle(d,a,o);const{x:_=0,x:v=0}=a;return e!==!1&&(f?f(i,a,o):r&&(i.setCommonStyle(d,a,_-c,v-h,o),i.fill())),n!==!1&&(p?p(i,a,o):s&&(i.setStrokeStyle(d,a,_-c,v-h,o),i.stroke())),!1}drawLinearLineHighPerformance(i,t,e,n,r,s,a,o,l,u,c,h,d){var f;t.beginPath();const p=(f=this.z)!==null&&f!==void 0?f:0,{points:g}=i.attribute,m=g[0];t.moveTo(m.x+a,m.y+o,p);for(let y=1;y<g.length;y++){const b=g[y];t.lineTo(b.x+a,b.y+o,p)}t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,l);const{x:_=0,x:v=0}=i.attribute;e!==!1&&(h?h(t,i.attribute,l):r&&(t.setCommonStyle(i,i.attribute,_-a,v-o,l),t.fill())),n!==!1&&(d?d(t,i.attribute,l):s&&(t.setStrokeStyle(i,i.attribute,_-a,v-o,l),t.stroke()))}drawShape(i,t,e,n,r,s,a,o){const l=le(i,s?.theme).line,{fill:u=l.fill,stroke:c=l.stroke,fillOpacity:h=l.fillOpacity,strokeOpacity:d=l.strokeOpacity,segments:f,points:p,closePath:g,curveTension:m=l.curveTension,connectedType:_=l.connectedType}=i.attribute;if(!this.valid(i,l,a,o))return;let{curveType:v=l.curveType}=i.attribute;g&&v==="linear"&&(v="linearClosed");const{clipRange:y=l.clipRange,clipRangeByDimension:b=l.clipRangeByDimension}=i.attribute;if(y===1&&!f&&!p.some(S=>S.defined===!1)&&v==="linear")return this.drawLinearLineHighPerformance(i,t,!!u,!!c,h,d,e,n,l,r,s,a,o);function x(S,w){return w==="none"?S:S.filter(A=>A.defined!==!1)}if(i.shouldUpdateShape()){const{points:S,segments:w}=i.attribute,A=S;if(w&&w.length){let k,C;if(i.cache=w.map((M,R)=>{if(M.points.length<=1&&R===0)return M.points[0]&&(C={endX:M.points[0].x,endY:M.points[0].y,curves:[{defined:M.points[0].defined!==!1}]}),null;R===1?k={x:C.endX,y:C.endY,defined:C.curves[C.curves.length-1].defined}:R>1&&(k.x=C.endX,k.y=C.endY,k.defined=C.curves[C.curves.length-1].defined);const P=ld(x(M.points,_),v,{startPoint:k,curveTension:m});return C=P,P}).filter(M=>!!M),v==="linearClosed"){let M;for(let R=0;R<i.cache.length;R++){const P=i.cache[R];for(let O=0;O<P.curves.length;O++)if(P.curves[O].defined){M=P.curves[O].p0;break}if(M)break}i.cache[i.cache.length-1]&&i.cache[i.cache.length-1].lineTo(M.x,M.y,!0)}}else{if(!S||!S.length)return i.cache=null,void i.clearUpdateShapeTag();i.cache=ld(x(A,_),v,{curveTension:m})}i.clearUpdateShapeTag()}if(Array.isArray(i.cache)){const S=i.attribute.segments.filter(w=>w.points.length);if(S[0].points.length===1&&S.shift(),y===1){let w=!1;i.cache.forEach((A,k)=>{w||(w=this.drawSegmentItem(t,A,!!u,!!c,h,d,S[k],[l,i.attribute],y,b,e,n,i,a,o))})}else{const w=i.cache.reduce((M,R)=>M+R.getLength(),0),A=y*w;let k=0,C=!1;i.cache.forEach((M,R)=>{if(C)return;const P=M.getLength(),O=(A-k)/P;k+=P,O>0&&(C=this.drawSegmentItem(t,M,!!u,!!c,h,d,S[R],[l,i.attribute],gn(O,1),b,e,n,i,a,o))})}}else this.drawSegmentItem(t,i.cache,!!u,!!c,h,d,i.attribute,l,y,b,e,n,i,a,o)}};g0=oBt([Rt()],g0);function lBt(i,t,e,n){var r;const{top:s,bottom:a}=t;if(s.curves.length!==a.curves.length)return;if(e>=1){const _=[],v=[];let y=!0;for(let b=0,x=s.curves.length;b<x;b++){const S=s.curves[b];y!==S.defined?(y?(wS(i,_,v,n),_.length=0,v.length=0):(_.push(S),v.push(a.curves[x-b-1])),y=!y):y&&(_.push(S),v.push(a.curves[x-b-1]))}return void wS(i,_,v,n)}if(e<=0)return;let{direction:o}=n||{};const{curves:l}=s,u=(r=l[l.length-1].p3)!==null&&r!==void 0?r:l[l.length-1].p1,c=xe(u.x-l[0].p0.x),h=xe(u.y-l[0].p0.y);o=o??(c>h?hi.ROW:hi.COLUMN),Number.isFinite(c)||(o=hi.COLUMN),Number.isFinite(h)||(o=hi.ROW);const d=e*(o===hi.ROW?c:h);let f=0,p=!0;const g=[],m=[];for(let _=0,v=s.curves.length;_<v;_++){const y=s.curves[_],b=y.getLength(o),x=(d-f)/b;if(x<0)break;f+=b;let S=null,w=null;p!==y.defined?(p?(wS(i,g,m,n),g.length=0,m.length=0):(S=y,w=a.curves[v-_-1]),p=!p):p&&(S=y,w=a.curves[v-_-1]),S&&w&&(x<1&&(S=S.p2&&S.p3?Lw(S,x)[0]:o$(S,x)[0],w=w.p2&&w.p3?Lw(w,1-x)[1]:o$(w,1-x)[1]),S.defined=p,w.defined=p,g.push(S),m.push(w)),S=null,w=null}wS(i,g,m,n)}function wS(i,t,e,n){const{offsetX:r=0,offsetY:s=0,offsetZ:a=0}=n||{};let o=!0;t.forEach(l=>{l.defined?(o&&i.moveTo(l.p0.x+r,l.p0.y+s,a),Zw(i,l,1,n),o=!1):o=!0}),o=!0;for(let l=e.length-1;l>=0;l--){const u=e[l];u.defined?(o&&i.lineTo(u.p0.x+r,u.p0.y+s,a),Zw(i,u,1,n),o=!1):o=!0}i.closePath()}const uBt=new tBt,cBt=Ch;var hBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},dBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},p5=function(i,t){return function(e,n){t(e,n,i)}};let m0=class extends ks{constructor(i){super(),this.graphicRenderContributions=i,this.numberType=Db,this.builtinContributions=[uBt,cBt],this.init(i)}drawLinearAreaHighPerformance(i,t,e,n,r,s,a,o,l,u,c,h,d){var f,p,g;const{points:m}=i.attribute;if(m.length<2)return;t.beginPath();const _=(f=this.z)!==null&&f!==void 0?f:0,v=m[0];t.moveTo(v.x+a,v.y+o,_);for(let x=1;x<m.length;x++){const S=m[x];t.lineTo(S.x+a,S.y+o,_)}for(let x=m.length-1;x>=0;x--){const S=m[x];t.lineTo(((p=S.x1)!==null&&p!==void 0?p:S.x)+a,((g=S.y1)!==null&&g!==void 0?g:S.y)+o,_)}t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,l),this.beforeRenderStep(i,t,a,o,!!r,!1,e,!1,l,u,h,null,{attribute:i.attribute});const{x:y=0,x:b=0}=i.attribute;e!==!1&&(h?h(t,i.attribute,l):r&&(t.setCommonStyle(i,i.attribute,y-a,b-o,l),t.fill())),this.afterRenderStep(i,t,a,o,!!r,!1,e,!1,l,u,h,null,{attribute:i.attribute}),(()=>{var x,S;if(n){const{stroke:w=l&&l.stroke}=i.attribute;if(J(w)&&(w[0]||w[2])&&w[1]===!1){if(t.beginPath(),w[0]){t.moveTo(v.x+a,v.y+o,_);for(let A=1;A<m.length;A++){const k=m[A];t.lineTo(k.x+a,k.y+o,_)}}else if(w[2]){const A=m[m.length-1];t.moveTo(A.x+a,A.y+o,_);for(let k=m.length-2;k>=0;k--){const C=m[k];t.lineTo(((x=C.x1)!==null&&x!==void 0?x:C.x)+a,((S=C.y1)!==null&&S!==void 0?S:C.y)+o,_)}}}d?d(t,i.attribute,l):(t.setStrokeStyle(i,i.attribute,y-a,b-o,l),t.stroke())}})()}drawShape(i,t,e,n,r,s,a,o){var l,u,c,h,d,f;const p=le(i,s?.theme).area,{fill:g=p.fill,stroke:m=p.stroke,fillOpacity:_=p.fillOpacity,z:v=p.z,strokeOpacity:y=p.strokeOpacity,curveTension:b=p.curveTension,connectedType:x=p.connectedType}=i.attribute,S=this.valid(i,p,a,o);if(!S)return;const{doFill:w}=S,A=S.doStroke&&S.sVisible,{clipRange:k=p.clipRange,closePath:C,points:M,segments:R}=i.attribute;let{curveType:P=p.curveType}=i.attribute;function O(T,D){return D!=="connect"?T:T.filter(B=>B.defined!==!1)}if(C&&P==="linear"&&(P="linearClosed"),k===1&&!R&&!M.some(T=>T.defined===!1)&&P==="linear")return this.drawLinearAreaHighPerformance(i,t,!!g,A,_,y,e,n,p,r,s,a,o);if(i.shouldUpdateShape()){if(R&&R.length){let T,D;const B=R.map((j,H)=>{if(j.points.length<=1&&H===0)return j.points[0]&&(D={endX:j.points[0].x,endY:j.points[0].y}),null;H===1?T={x:D.endX,y:D.endY}:H>1&&(T.x=D.endX,T.y=D.endY);const U=ld(O(j.points,x),P,{startPoint:T,curveTension:b});return D=U,U}).filter(j=>!!j);let I;const F=[];for(let j=R.length-1;j>=0;j--){const H=R[j].points,U=[];for(let K=H.length-1;K>=0;K--)U.push({x:(l=H[K].x1)!==null&&l!==void 0?l:H[K].x,y:(u=H[K].y1)!==null&&u!==void 0?u:H[K].y});if(j!==0){const K=R[j-1].points,q=K[K.length-1];q&&U.push({x:(c=q.x1)!==null&&c!==void 0?c:q.x,y:(h=q.y1)!==null&&h!==void 0?h:q.y})}U.length>1&&(I=ld(O(U,x),P==="stepBefore"?"stepAfter":P==="stepAfter"?"stepBefore":P,{curveTension:b}),F.unshift(I))}i.cacheArea=F.map((j,H)=>({top:B[H],bottom:j}))}else{if(!M||!M.length)return i.cacheArea=null,void i.clearUpdateShapeTag();{const T=O(M,x),D=[];for(let F=T.length-1;F>=0;F--)D.push({x:(d=T[F].x1)!==null&&d!==void 0?d:T[F].x,y:(f=T[F].y1)!==null&&f!==void 0?f:T[F].y});const B=ld(T,P,{curveTension:b}),I=ld(D,P==="stepBefore"?"stepAfter":P==="stepAfter"?"stepBefore":P,{curveTension:b});i.cacheArea={top:B,bottom:I}}}i.clearUpdateShapeTag()}if(Array.isArray(i.cacheArea)){const T=i.attribute.segments.filter(D=>D.points.length);if(T[0].points.length===1&&T.shift(),k===1){let D=!1;i.cacheArea.forEach((B,I)=>{D||(D=this.drawSegmentItem(t,B,w,_,A,y,T[I],[p,i.attribute],k,e,n,v,i,r,a,o))})}else{const D=i.cacheArea.reduce((j,H)=>j+H.top.getLength(),0),B=k*D;let I=0,F=!1;i.cacheArea.forEach((j,H)=>{if(F)return;const U=j.top.getLength(),K=(B-I)/U;I+=U,K>0&&(F=this.drawSegmentItem(t,j,w,_,A,y,T[H],[p,i.attribute],gn(K,1),e,n,v,i,r,a,o))})}}else this.drawSegmentItem(t,i.cacheArea,w,_,A,y,i.attribute,p,k,e,n,v,i,r,a,o)}draw(i,t,e,n){const r=le(i,n?.theme).area;this._draw(i,r,!1,e,n)}drawSegmentItem(i,t,e,n,r,s,a,o,l,u,c,h,d,f,p,g){return this._drawSegmentItem(i,t,e,n,r,s,a,o,l,u,c,h,d,f,p,g)}_drawSegmentItem(i,t,e,n,r,s,a,o,l,u,c,h,d,f,p,g){if(!(t&&t.top&&t.bottom&&t.top.curves&&t.top.curves.length&&t.bottom.curves&&t.bottom.curves.length))return;i.beginPath();const{points:m,segments:_}=d.attribute;let v,y,b=hi.ROW;if(_){const k=_[_.length-1];y=_[0].points[0],v=k.points[k.points.length-1]}else y=m[0],v=m[m.length-1];const x=xe(v.x-y.x),S=xe(v.y-y.y);b=v.x1==null?hi.ROW:v.y1==null?hi.COLUMN:Number.isFinite(x+S)?x>S?hi.ROW:hi.COLUMN:hi.ROW,lBt(i,t,l,{offsetX:u,offsetY:c,offsetZ:h,direction:b}),this.beforeRenderStep(d,i,u,c,!!n,!1,e,!1,o,f,p,null,{attribute:a}),i.setShadowBlendStyle&&i.setShadowBlendStyle(d,a,o);const{x:w=0,x:A=0}=a;return e!==!1&&(p?p(i,a,o):n&&(i.setCommonStyle(d,a,w-u,A-c,o),i.fill())),this.afterRenderStep(d,i,u,c,!!n,!1,e,!1,o,f,p,null,{attribute:a}),(()=>{if(r!==!1)if(g)g(i,a,o);else{const{stroke:k=o&&o[1]&&o[1].stroke}=a;J(k)&&(k[0]||k[2])&&k[1]===!1&&(i.beginPath(),Eet(i,k[0]?t.top:t.bottom,l,b===hi.ROW?"x":"y",{offsetX:u,offsetY:c,offsetZ:h})),i.setStrokeStyle(d,a,w-u,A-c,o),i.stroke()}})(),!1}};m0=hBt([Rt(),p5(0,ge(_n)),p5(0,jn(LD)),dBt("design:paramtypes",[Object])],m0);const fBt=Bm,pBt=Ch;var gBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},mBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},g5=function(i,t){return function(e,n){t(e,n,i)}};let Qw=class extends ks{constructor(i){super(),this.graphicRenderContributions=i,this.numberType=SM,this.builtinContributions=[pBt,fBt],this.init(i)}drawShape(i,t,e,n,r,s,a,o){var l,u,c;const h=(l=this.tempTheme)!==null&&l!==void 0?l:le(i,s?.theme).path,{x:d=h.x,y:f=h.y,fillStrokeOrder:p=h.fillStrokeOrder}=i.attribute,g=(u=this.z)!==null&&u!==void 0?u:0,m=this.valid(i,h,a,o);if(!m)return;const{fVisible:_,sVisible:v,doFill:y,doStroke:b}=m;if(t.beginPath(),i.pathShape)qu(i.pathShape.commandList,t,e,n,1,1,g);else{const w=(c=i.attribute.path)!==null&&c!==void 0?c:h.path;qu(w.commandList,t,e,n,1,1,g)}t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,h),this.beforeRenderStep(i,t,e,n,y,b,_,v,h,r,a,o);const x=()=>{b&&(o?o(t,i.attribute,h):v&&(t.setStrokeStyle(i,i.attribute,d-e,f-n,h),t.stroke()))},S=()=>{y&&(a?a(t,i.attribute,h):_&&(t.setCommonStyle(i,i.attribute,d-e,f-n,h),t.fill()))};p?(x(),S()):(S(),x()),this.afterRenderStep(i,t,e,n,y,b,_,v,h,r,a,o)}draw(i,t,e,n){const r=le(i,n?.theme).path;this.tempTheme=r,this._draw(i,r,!1,e,n),this.tempTheme=null}};Qw=gBt([Rt(),g5(0,ge(_n)),g5(0,jn(zD)),mBt("design:paramtypes",[Object])],Qw);var _Bt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},vBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},m5=function(i,t){return function(e,n){t(e,n,i)}};let Jw=class extends ks{constructor(i){super(),this.graphicRenderContributions=i,this.type="rect",this.numberType=mF,this.builtinContributions=[V2t,$2t,W2t],this.init(i)}drawShape(i,t,e,n,r,s,a,o,l){l=l??le(i,s?.theme).rect;const{fill:u=l.fill,background:c,stroke:h=l.stroke,cornerRadius:d=l.cornerRadius,cornerType:f=l.cornerType,opacity:p=l.opacity,fillOpacity:g=l.fillOpacity,lineWidth:m=l.lineWidth,strokeOpacity:_=l.strokeOpacity,visible:v=l.visible,x1:y,y1:b,x=l.x,y:S=l.y,fillStrokeOrder:w=l.fillStrokeOrder,drawStrokeWhenZeroWH:A=l.drawStrokeWhenZeroWH}=i.attribute;let{width:k,height:C}=i.attribute;k=(k??y-x)||0,C=(C??b-S)||0;const M=kF(p,g,k,C,u),R=CF(p,_,k,C,A),P=Zd(u,c),O=Gg(h,m);if(!i.valid||!v||!P&&!O||!(M||R||a||o||c))return;d===0||J(d)&&d.every(D=>D===0)?(t.beginPath(),t.rect(e,n,k,C)):(t.beginPath(),vf(t,e,n,k,C,d,f!=="bevel"));const T={doFill:P,doStroke:O};t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,l),this.beforeRenderStep(i,t,e,n,P,O,M,R,l,r,a,o,T),w?(this._runStroke(i,t,e,n,l,T,R,x,S,o),this._runFill(i,t,e,n,l,T,M,x,S,a)):(this._runFill(i,t,e,n,l,T,M,x,S,a),this._runStroke(i,t,e,n,l,T,R,x,S,o)),this.afterRenderStep(i,t,e,n,P,O,M,R,l,r,a,o)}_runFill(i,t,e,n,r,s,a,o,l,u){s.doFill&&(u?u(t,i.attribute,r):a&&(t.setCommonStyle(i,i.attribute,o-e,l-n,r),t.fill()))}_runStroke(i,t,e,n,r,s,a,o,l,u){s.doStroke&&(u?u(t,i.attribute,r):a&&(t.setStrokeStyle(i,i.attribute,o-e,l-n,r),t.stroke()))}draw(i,t,e,n){const r=le(i,n?.theme).rect;this._draw(i,r,!1,e,n,r)}};Jw=_Bt([Rt(),m5(0,ge(_n)),m5(0,jn(iv)),vBt("design:paramtypes",[Object])],Jw);var yBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},bBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},_5=function(i,t){return function(e,n){t(e,n,i)}};let tA=class extends ks{constructor(i){super(),this.graphicRenderContributions=i,this.numberType=AM,this.builtinContributions=[q2t,J2t,Q2t,Z2t],this.init(i)}drawShape(i,t,e,n,r,s,a,o,l){var u;l=l??le(i,s?.theme).symbol;const{size:c=l.size,x:h=l.x,y:d=l.y,scaleX:f=l.scaleX,scaleY:p=l.scaleY,fillStrokeOrder:g=l.fillStrokeOrder,clipRange:m=l.clipRange}=i.attribute,_=this.valid(i,l,a,o);if(!_)return;const{fVisible:v,sVisible:y,doFill:b,doStroke:x}=_,S=i.getParsedPath();if(!S)return;const{keepDirIn3d:w=l.keepDirIn3d}=i.attribute,A=(u=this.z)!==null&&u!==void 0?u:0;t.beginPath();let k=e,C=n,M=A;const R=t.camera;if(w&&R&&t.project){const P=t.project(e,n,A);t.camera=null,J(c)?(c[0]*f,c[1]*p):c*f,k=P.x,C=P.y,M=void 0}S.draw(t,c,k,C,M,(P,O)=>{var T,D,B,I;if(i._parsedPath.svgCache){const H=Object.assign({},O);H.fill=(T=O.fill)!==null&&T!==void 0?T:i.attribute.fill,H.opacity=(D=O.opacity)!==null&&D!==void 0?D:i.attribute.opacity,H.fillOpacity=i.attribute.fillOpacity,H.stroke=(B=O.stroke)!==null&&B!==void 0?B:i.attribute.stroke,H.lineWidth=(I=O.lineWidth)!==null&&I!==void 0?I:i.attribute.lineWidth,O=H}const F=()=>{O.fill&&(a?a(t,i.attribute,l):(t.setCommonStyle(i,O,h-e,d-n,l),t.fill()))},j=()=>{O.stroke&&(o?o(t,i.attribute,l):y&&m>=1&&(t.setStrokeStyle(i,O,(h-e)/f,(d-n)/p,l),t.stroke()))};g?(j(),F()):(F(),j())})===!1&&t.closePath(),t.camera=R,t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,l),this.beforeRenderStep(i,t,e,n,b,x,v,y,l,r,a,o),g?(this._runStroke(i,t,e,n,l,x,y,h,d,S,m,f,p,o),this._runFill(i,t,e,n,l,b,v,h,d,S,a)):(this._runFill(i,t,e,n,l,b,v,h,d,S,a),this._runStroke(i,t,e,n,l,x,y,h,d,S,m,f,p,o)),this.afterRenderStep(i,t,e,n,b,x,v,y,l,r,a,o)}_runFill(i,t,e,n,r,s,a,o,l,u,c){s&&!u.isSvg&&(c?c(t,i.attribute,r):a&&(t.setCommonStyle(i,i.attribute,o-e,l-n,r),t.fill()))}_runStroke(i,t,e,n,r,s,a,o,l,u,c,h,d,f){s&&!u.isSvg&&(f?f(t,i.attribute,r):a&&c>=1&&(t.setStrokeStyle(i,i.attribute,(o-e)/h,(l-n)/d,r),t.stroke()))}draw(i,t,e,n){const r=le(i,n?.theme).symbol;this._draw(i,r,!1,e,n)}};tA=yBt([Rt(),_5(0,ge(_n)),_5(0,jn(jD)),bBt("design:paramtypes",[Object])],tA);class xBt{constructor(){this.pools=[];for(let t=0;t<10;t++)this.pools.push(new Gi)}allocate(t,e,n,r){if(!this.pools.length)return new Gi().setValue(t,e,n,r);const s=this.pools.pop();return s.x1=t,s.y1=e,s.x2=n,s.y2=r,s}allocateByObj(t){if(!this.pools.length)return new Gi(t);const e=this.pools.pop();return e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}const eA=new xBt;class SBt extends RM{constructor(){super(...arguments),this.time=On.beforeFillStroke}drawShape(t,e,n,r,s,a,o,l,u,c,h,d){var f,p,g,m,_,v,y,b,x,S;const{backgroundMode:w=u.backgroundMode,backgroundFit:A=u.backgroundFit,backgroundKeepAspectRatio:k=u.backgroundKeepAspectRatio}=t.attribute;let C,{background:M}=t.attribute;if(!M)return;const R=()=>{t.type==="richtext"&&(e.restore(),e.save(),C&&e.setTransformFromMatrix(C,!0,1))};let P;t.type==="richtext"&&(C=e.currentMatrix.clone(),e.restore(),e.save(),e.setTransformForCurrent());const O=ee(M)&&M.background,T=t.transMatrix.onlyTranslate();if(O){const D=t.AABBBounds,B=((f=M.x)!==null&&f!==void 0?f:D.x1)+((p=M.dx)!==null&&p!==void 0?p:0),I=((g=M.y)!==null&&g!==void 0?g:D.y1)+((m=M.dy)!==null&&m!==void 0?m:0),F=(_=M.width)!==null&&_!==void 0?_:D.width(),j=(v=M.height)!==null&&v!==void 0?v:D.height();if(P=eA.allocate(B,I,B+F,I+j),M=M.background,!T){const H=P.width(),U=P.height();P.set(((y=M.x)!==null&&y!==void 0?y:0)+((b=M.dx)!==null&&b!==void 0?b:0),((x=M.y)!==null&&x!==void 0?x:0)+((S=M.dy)!==null&&S!==void 0?S:0),H,U)}}else P=t.AABBBounds,T||(P=EM(Object.assign(Object.assign({},t.attribute),{angle:0,scaleX:1,scaleY:1,x:0,y:0,dx:0,dy:0})).clone());if(t.backgroundImg&&t.resources){const D=t.resources.get(M);if(D.state!=="success"||!D.data)return void R();e.highPerformanceSave(),T&&e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.setCommonStyle(t,t.attribute,n,r,u),this.doDrawImage(e,D.data,P,{backgroundMode:w,backgroundFit:A,backgroundKeepAspectRatio:k}),e.highPerformanceRestore(),e.setTransformForCurrent()}else{const{backgroundCornerRadius:D}=t.attribute;e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,n,r,u),e.fillStyle=M,D?(vf(e,P.x1,P.y1,P.width(),P.height(),D,!0),e.fill()):e.fillRect(P.x1,P.y1,P.width(),P.height()),e.highPerformanceRestore()}O&&eA.free(P),R()}}const Ret=new SBt;var wBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},ABt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},v5=function(i,t){return function(e,n){t(e,n,i)}};let YD=class extends ks{constructor(i){super(),this.graphicRenderContributions=i,this.numberType=kM,this.builtinContributions=[Ret],this.init(i)}drawShape(i,t,e,n,r,s,a,o){var l,u,c;const h=le(i,s?.theme).text,{text:d,underline:f=h.underline,lineThrough:p=h.lineThrough,keepDirIn3d:g=h.keepDirIn3d,direction:m=h.direction,fontSize:_=h.fontSize,verticalMode:v=h.verticalMode,x:y=h.x,y:b=h.y}=i.attribute,x=(l=mM(i.attribute.lineHeight,_))!==null&&l!==void 0?l:_,S=this.valid(i,h,a,o);if(!S)return;const{fVisible:w,sVisible:A,doFill:k,doStroke:C}=S,M=!g,R=this.z||0;t.beginPath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,h),this.beforeRenderStep(i,t,e,n,k,C,w,A,h,r,a,o),M&&this.transformUseContext2d(i,h,R,t);const P=(O,T,D,B)=>{let I=e+T;const F=n+D;if(B){t.highPerformanceSave(),I+=_;const j=wr.allocate(1,0,0,1,0,0);j.rotateByCenter(Math.PI/2,I,F),t.transformFromMatrix(j,!0),wr.free(j)}C&&(o?o(t,i.attribute,h):A&&(t.setStrokeStyle(i,i.attribute,y-e,b-n,h),t.strokeText(O,I,F,R))),k&&(a?a(t,i.attribute,h):w&&(t.setCommonStyle(i,i.attribute,y-e,b-n,h),t.fillText(O,I,F,R))),B&&(t.highPerformanceRestore(),t.setTransformForCurrent())};if(t.setTextStyleWithoutAlignBaseline(i.attribute,h,R),m==="horizontal"){const{multilineLayout:O}=i;if(!O)return void t.highPerformanceRestore();const{xOffset:T,yOffset:D}=O.bbox;C&&(o?o(t,i.attribute,h):A&&(t.setStrokeStyle(i,i.attribute,y-e,b-n,h),O.lines.forEach(B=>{t.strokeText(B.str,(B.leftOffset||0)+T+e,(B.topOffset||0)+D+n,R)}))),k&&(a?a(t,i.attribute,h):w&&(t.setCommonStyle(i,i.attribute,y-e,b-n,h),O.lines.forEach(B=>{t.fillText(B.str,(B.leftOffset||0)+T+e,(B.topOffset||0)+D+n,R),this.drawUnderLine(f,p,i,(B.leftOffset||0)+T+e,(B.topOffset||0)+D+n,B.descent,(B.descent-B.ascent)/2,R,h,t,{width:B.width})})))}else{let{textAlign:O=h.textAlign,textBaseline:T=h.textBaseline}=i.attribute;if(!v){const U=O;O=(u=i.getBaselineMapAlign()[T])!==null&&u!==void 0?u:"left",T=(c=i.getAlignMapBaseline()[U])!==null&&c!==void 0?c:"top"}i.tryUpdateAABBBounds();const D=i.cache,{verticalList:B}=D;t.textAlign="left",t.textBaseline="top";const I=x*B.length;let F=0;B.forEach(U=>{const K=U.reduce((q,Z)=>q+(Z.width||0),0);F=Nn(K,F)});let j=0,H=0;T==="bottom"?H=-I:T==="middle"&&(H=-I/2),O==="center"?j-=F/2:O==="right"&&(j-=F),B.forEach((U,K)=>{const q=U.reduce(($,ft)=>$+(ft.width||0),0),Z=F-q;let at=j;O==="center"?at+=Z/2:O==="right"&&(at+=Z),U.forEach($=>{const{text:ft,width:pt,direction:rt}=$;P(ft,I-(K+1)*x+H,at,rt),at+=pt})})}M&&this.restoreTransformUseContext2d(i,h,R,t),this.afterRenderStep(i,t,e,n,k,C,w,A,h,r,a,o)}draw(i,t,e,n){const r=le(i,n?.theme).text,{keepDirIn3d:s=r.keepDirIn3d}=i.attribute,a=!s;this._draw(i,r,a,e,n)}drawUnderLine(i,t,e,n,r,s,a,o,l,u,c){if(t+i<=0)return;const{textAlign:h=l.textAlign,fill:d=l.fill,opacity:f=l.opacity,underlineOffset:p=l.underlineOffset,underlineDash:g=l.underlineDash,fillOpacity:m=l.fillOpacity}=e.attribute,_=!N(c),v=_?c.width:e.clipedWidth,y=_?0:h0(h,v),b={lineWidth:0,stroke:d,opacity:f,strokeOpacity:m};if(i){b.lineWidth=i,u.setStrokeStyle(e,b,n,r,l),g&&u.setLineDash(g),u.beginPath();const x=r+s+p;u.moveTo(n+y,x,o),u.lineTo(n+y+v,x,o),u.stroke()}if(t){b.lineWidth=t,u.setStrokeStyle(e,b,n,r,l),u.beginPath();const x=r+a;u.moveTo(n+y,x,o),u.lineTo(n+y+v,x,o),u.stroke()}}};YD=wBt([Rt(),v5(0,ge(_n)),v5(0,jn(HD)),ABt("design:paramtypes",[Object])],YD);function Oet(i,t,e,n){if(t&&t.length){i.moveTo(t[0].x+e,t[0].y+n);for(let r=1;r<t.length;r++)i.lineTo(t[r].x+e,t[r].y+n)}}function kBt(i,t,e,n,r,s=!0){var a;if(t.length<3)return void Oet(i,t,e,n);let o=0,l=t.length-1;s||(o+=1,l-=1,i.moveTo(t[0].x+e,t[0].y+n));for(let u=o;u<=l;u++){const c=t[u===0?l:(u-1)%t.length],h=t[u%t.length],d=t[(u+1)%t.length],f=h.x-c.x,p=h.y-c.y,g=h.x-d.x,m=h.y-d.y,_=(Math.atan2(p,f)-Math.atan2(m,g))/2,v=Math.abs(Math.tan(_));let y=Array.isArray(r)?(a=r[u%t.length])!==null&&a!==void 0?a:0:r,b=y/v;const x=AS(f,p),S=AS(g,m),w=Math.min(x,S);b>w&&(b=w,y=w*v);const A=LE(h,b,x,f,p),k=LE(h,b,S,g,m),C=2*h.x-A.x-k.x,M=2*h.y-A.y-k.y,R=AS(C,M),P=LE(h,AS(b,y),R,C,M);let O=Math.atan2(A.y-P.y,A.x-P.x);const T=Math.atan2(k.y-P.y,k.x-P.x);let D=T-O;D<0&&(O=T,D=-D),D>Math.PI&&(D-=Math.PI),u===0?i.moveTo(A.x+e,A.y+n):i.lineTo(A.x+e,A.y+n),D&&i.arcTo(h.x+e,h.y+n,k.x+e,k.y+n,y),i.lineTo(k.x+e,k.y+n)}s||i.lineTo(t[l+1].x+e,t[l+1].y+n)}function AS(i,t){return Math.sqrt(i*i+t*t)}function LE(i,t,e,n,r){const s=t/e;return{x:i.x-n*s,y:i.y-r*s}}const CBt=Bm,MBt=Ch;var TBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},PBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},y5=function(i,t){return function(e,n){t(e,n,i)}};let XD=class extends ks{constructor(i){super(),this.graphicRenderContributions=i,this.numberType=wM,this.builtinContributions=[MBt,CBt],this.init(i)}drawShape(i,t,e,n,r,s,a,o){const l=le(i,s?.theme).polygon,{points:u=l.points,cornerRadius:c=l.cornerRadius,x:h=l.x,y:d=l.y,closePath:f=l.closePath,fillStrokeOrder:p=l.fillStrokeOrder}=i.attribute,g=this.valid(i,l,a,o);if(!g)return;const{fVisible:m,sVisible:_,doFill:v,doStroke:y}=g;t.beginPath(),c<=0||J(c)&&c.every(S=>S===0)?Oet(t.camera?t:t.nativeContext,u,e,n):kBt(t.camera?t:t.nativeContext,u,e,n,c,f),f&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,l),this.beforeRenderStep(i,t,e,n,v,y,m,_,l,r,a,o);const b=()=>{v&&(a?a(t,i.attribute,l):m&&(t.setCommonStyle(i,i.attribute,h-e,d-n,l),t.fill()))},x=()=>{y&&(o?o(t,i.attribute,l):_&&(t.setStrokeStyle(i,i.attribute,h-e,d-n,l),t.stroke()))};p?(x(),b()):(b(),x()),this.afterRenderStep(i,t,e,n,v,y,m,_,l,r,a,o)}draw(i,t,e,n){const r=le(i,n?.theme).polygon;this._draw(i,r,!1,e,n)}};XD=TBt([Rt(),y5(0,ge(_n)),y5(0,jn(ND)),PBt("design:paramtypes",[Object])],XD);var EBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},RBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},b5=function(i,t){return function(e,n){t(e,n,i)}};let KD=class{constructor(i){this.groupRenderContribitions=i,this.numberType=pF}reInit(){this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(c5)}drawShape(i,t,e,n,r,s,a,o,l){const{clip:u,fill:c,stroke:h,background:d}=i.attribute;if(!(u||c||h||d))return;l=l??le(i,s?.theme).group;const{opacity:f=l.opacity,width:p=l.width,height:g=l.height,fillOpacity:m=l.fillOpacity,strokeOpacity:_=l.strokeOpacity,cornerRadius:v=l.cornerRadius,path:y=l.path,lineWidth:b=l.lineWidth,visible:x=l.visible,fillStrokeOrder:S=l.fillStrokeOrder,cornerType:w=l.cornerType,x:A=l.x,y:k=l.y}=i.attribute,C=kF(f,m,p,g,c),M=CF(f,_,p,g),R=Zd(c,d),P=Gg(h,b);if(!i.valid||!x||!u&&(!R&&!P||!(C||M||a||o||d)))return;if(y&&y.length&&r.drawContribution){const B=t.disableFill,I=t.disableStroke,F=t.disableBeginPath;t.disableFill=!0,t.disableStroke=!0,t.disableBeginPath=!0,y.forEach(j=>{r.drawContribution.getRenderContribution(j).draw(j,r.renderService,r,s)}),t.disableFill=B,t.disableStroke=I,t.disableBeginPath=F}else v===0||J(v)&&v.every(B=>B===0)?(t.beginPath(),t.rect(e,n,p,g)):(t.beginPath(),vf(t,e,n,p,g,v,w!=="bevel"));this._groupRenderContribitions||(this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(c5));const O={doFill:R,doStroke:P};t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,l),this._groupRenderContribitions.forEach(B=>{B.time===On.beforeFillStroke&&B.drawShape(i,t,e,n,R,P,C,M,l,r,a,o,O)}),u&&t.clip();const T=()=>{O.doFill&&(a?a(t,i.attribute,l):C&&(t.setCommonStyle(i,i.attribute,A-e,k-n,l),t.fill()))},D=()=>{O.doStroke&&(o?o(t,i.attribute,l):M&&(t.setStrokeStyle(i,i.attribute,A-e,k-n,l),t.stroke()))};S?(D(),T()):(T(),D()),this._groupRenderContribitions.forEach(B=>{B.time===On.afterFillStroke&&B.drawShape(i,t,e,n,R,P,C,M,l,r,a,o)})}draw(i,t,e,n){var r,s;const{context:a}=e;if(!a)return;const{clip:o,baseOpacity:l=1,drawMode:u}=i.attribute,c=a.nativeContext,h=a.canvas.nativeCanvas;if(u>0){const{x:_,y:v,width:y,height:b}=i.attribute,x=a.canvas,S=vt.global.createCanvas({width:x.width,height:x.height,dpr:1}),w=S.getContext("2d"),A=a.nativeContext.getTransform();w.setTransform(A.a,A.b,A.c,A.d,A.e,A.f),u===1&&(w.save(),w.clearRect(0,0,x.width,x.height),w.beginPath(),w.rect(_,v,y,b),w.clip(),w.drawImage(x.nativeCanvas,0,0,x.width,x.height,0,0,x.displayWidth,x.displayHeight),w.restore()),a.nativeContext=w,x.nativeCanvas=S}o?a.save():a.highPerformanceSave();const d=a.baseGlobalAlpha;a.baseGlobalAlpha*=l;const f=a.modelMatrix;if(a.camera){const _=le(i,n?.theme).group,v=Fi.allocate(),y=Fi.allocate();yet(y,i,_),qd(v,f||v,y),a.modelMatrix=v,Fi.free(y),a.setTransform(1,0,0,1,0,0,!0)}else a.transformFromMatrix(i.transMatrix,!0);a.beginPath(),n.skipDraw?this.drawShape(i,a,0,0,e,n,()=>!1,()=>!1):this.drawShape(i,a,0,0,e,null,null,null);const{scrollX:p,scrollY:g}=i.attribute;let m;if((p||g)&&a.translate(p,g),n&&n.renderInGroup&&(m=n.renderInGroup((r=n.renderInGroupParams)===null||r===void 0?void 0:r.skipSort,i,e,(s=n.renderInGroupParams)===null||s===void 0?void 0:s.nextM)),a.modelMatrix!==f&&Fi.free(a.modelMatrix),a.modelMatrix=f,a.baseGlobalAlpha=d,u>0){const{x:_,y:v,width:y,height:b}=i.attribute,x=a.nativeContext,S=a.canvas.nativeCanvas;c.save(),c.setTransform(a.dpr,0,0,a.dpr,0,0,!0),u===1&&x.rect(_,v,y,b),c.drawImage(S,0,0,S.width,S.height,0,0,a.canvas.displayWidth,a.canvas.displayHeight);const w=x.getTransform();c.setTransform(w.a,w.b,w.c,w.d,w.e,w.f),a.nativeContext=c,a.canvas.nativeCanvas=h,c.restore()}m&&m.then?m.then(()=>{o?a.restore():a.highPerformanceRestore()}):o?a.restore():a.highPerformanceRestore()}};KD=EBt([Rt(),b5(0,ge(_n)),b5(0,jn(vet)),RBt("design:paramtypes",[Object])],KD);var OBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},DBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},x5=function(i,t){return function(e,n){t(e,n,i)}};const IBt=["","repeat-x","repeat-y","repeat"];let qD=class extends ks{constructor(i){super(),this.graphicRenderContributions=i,this.numberType=xM,this.builtinContributions=[G2t,Y2t],this.init(i)}drawShape(i,t,e,n,r,s,a,o){const l=le(i).image,{repeatX:u=l.repeatX,repeatY:c=l.repeatY,x:h=l.x,y:d=l.y,cornerRadius:f=l.cornerRadius,fillStrokeOrder:p=l.fillStrokeOrder,cornerType:g=l.cornerType,image:m}=i.attribute,_=this.valid(i,l,a);if(!_)return;const{fVisible:v,sVisible:y,doFill:b,doStroke:x}=_;if(!m||!i.resources)return;const S=i.resources.get(m);if(S.state!=="success")return;const w=i.width,A=i.height;t.beginPath();let k=!1;f===0||J(f)&&f.every(R=>R===0)?t.rect(e,n,w,A):(vf(t,e,n,w,A,f,g!=="bevel"),k=!0),t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,l);const C=()=>{if(b){if(a)a(t,i.attribute,l);else if(v){t.setCommonStyle(i,i.attribute,e,n,l);let R=0;if(u==="repeat"&&(R|=1),c==="repeat"&&(R|=2),R){const P=t.createPattern(S.data,IBt[R]);t.fillStyle=P,t.translate(e,n,!0),t.fillRect(0,0,w,A),t.translate(-e,-n,!0)}else t.drawImage(S.data,e,n,w,A)}}},M=()=>{x&&(o?o(t,i.attribute,l):y&&(t.setStrokeStyle(i,i.attribute,h-e,d-n,l),t.stroke()))};p?(M(),k&&(t.save(),t.clip()),this.beforeRenderStep(i,t,e,n,b,!1,v,!1,l,r,a),C(),k&&t.restore()):(k&&(t.save(),t.clip()),this.beforeRenderStep(i,t,e,n,b,!1,v,!1,l,r,a),C(),k&&t.restore(),M()),this.afterRenderStep(i,t,e,n,b,!1,v,!1,l,r,a)}draw(i,t,e){const{image:n}=i.attribute;if(!n||!i.resources)return;const r=i.resources.get(n);if(r.state==="loading"&&Ht(n))return void Ai.improveImageLoading(n);if(r.state!=="success")return;const{context:s}=t.drawParams;if(!s)return;const a=le(i).image;this._draw(i,a,!1,e)}};qD=OBt([Rt(),x5(0,ge(_n)),x5(0,jn(FD)),DBt("design:paramtypes",[Object])],qD);const Det=Symbol.for("IncrementalDrawContribution"),iA=Symbol.for("ArcRender"),ZD=Symbol.for("Arc3dRender"),nA=Symbol.for("AreaRender"),rA=Symbol.for("CircleRender"),dr=Symbol.for("GraphicRender"),S5=Symbol.for("GroupRender"),sA=Symbol.for("LineRender"),aA=Symbol.for("PathRender"),oA=Symbol.for("PolygonRender"),lA=Symbol.for("RectRender"),QD=Symbol.for("Rect3DRender"),uA=Symbol.for("SymbolRender"),JD=Symbol.for("TextRender"),tI=Symbol.for("RichTextRender"),eI=Symbol.for("Pyramid3dRender"),cA=Symbol.for("GlyphRender"),iI=Symbol.for("ImageRender"),LF=Symbol.for("DrawContribution"),Iet=(i,t,e,n)=>{let r,s=!1,a=!1;if(t.forEachChildren(o=>(s=o.numberType===yM,!s)),t.forEachChildren(o=>(a=!!o.findFace,!a)),s){const o=t.getChildren(),l=[...o];l.sort((u,c)=>{var h,d,f,p;let g=((d=(h=u.attribute.startAngle)!==null&&h!==void 0?h:0+u.attribute.endAngle)!==null&&d!==void 0?d:0)/2,m=((p=(f=c.attribute.startAngle)!==null&&f!==void 0?f:0+c.attribute.endAngle)!==null&&p!==void 0?p:0)/2;for(;g<0;)g+=qt;for(;m<0;)m+=qt;return m-g}),l.forEach(u=>{u._next=null,u._prev=null}),t.removeAllChild(),t.update(),l.forEach(u=>{t.appendChild(u)}),n.hack_pieFace="outside",r=e(s,a),r&&r.graphic||(n.hack_pieFace="inside",r=e(s,a)),r&&r.graphic||(n.hack_pieFace="top",r=e(s,a)),t.removeAllChild(),o.forEach(u=>{u._next=null,u._prev=null}),o.forEach(u=>{t.appendChild(u)})}else if(a){const o=t.getChildren(),l=o.map(u=>({ave_z:u.findFace().vertices.map(c=>{var h;return i.view(c[0],c[1],(h=c[2]+u.attribute.z)!==null&&h!==void 0?h:0)[2]}).reduce((c,h)=>c+h,0),g:u}));l.sort((u,c)=>c.ave_z-u.ave_z),t.removeAllChild(),l.forEach(u=>{u.g._next=null,u.g._prev=null}),t.update(),l.forEach(u=>{t.add(u.g)}),r=e(s,a),t.removeAllChild(),o.forEach(u=>{u._next=null,u._prev=null}),t.update(),o.forEach(u=>{t.add(u)})}else r=e(s,a);return r};var LBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},BBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};const hA=Symbol.for("DrawItemInterceptor"),w5=new Gi,A5=new Gi;class FBt{constructor(){this.order=1}afterDrawItem(t,e,n,r,s){return t.attribute.shadowRootIdx==null&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0||(t.attribute.shadowRootIdx>0||!t.attribute.shadowRootIdx||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0)&&this.drawItem(t,e,n,r,s),!1}beforeDrawItem(t,e,n,r,s){return t.attribute.shadowRootIdx==null&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0||(t.attribute.shadowRootIdx<0||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0)&&this.drawItem(t,e,n,r,s),!1}drawItem(t,e,n,r,s){if(!t.shadowRoot)return!1;const{context:a}=n;if(a.highPerformanceSave(),a.transformFromMatrix(t.transMatrix,!0),r.dirtyBounds&&r.backupDirtyBounds){w5.copy(r.dirtyBounds),A5.copy(r.backupDirtyBounds);const o=t.globalTransMatrix.getInverse();r.dirtyBounds.copy(r.backupDirtyBounds).transformWithMatrix(o),r.backupDirtyBounds.copy(r.dirtyBounds)}return r.renderGroup(t.shadowRoot,n,wr.allocate(1,0,0,1,0,0)),a.highPerformanceRestore(),r.dirtyBounds&&r.backupDirtyBounds&&(r.dirtyBounds.copy(w5),r.backupDirtyBounds.copy(A5)),!0}}class zBt{constructor(){this.order=1}afterDrawItem(t,e,n,r,s){return t.attribute._debug_bounds&&this.drawItem(t,e,n,r,s),!1}drawItem(t,e,n,r,s){if(!t.attribute._debug_bounds)return!1;const{context:a}=n;a.highPerformanceSave(),t.parent&&a.setTransformFromMatrix(t.parent.globalTransMatrix,!0),t.glyphHost&&t.glyphHost.parent&&a.setTransformFromMatrix(t.glyphHost.parent.globalTransMatrix,!0);const o=t.AABBBounds;return t.attribute._debug_bounds!==!0&&t.attribute._debug_bounds(a,t),a.strokeRect(o.x1,o.y1,o.width(),o.height()),a.highPerformanceRestore(),!0}}let dA=class{constructor(){this.order=1,this.interceptors=[new FBt,new jBt,new NBt,new zBt]}afterDrawItem(i,t,e,n,r){if((!i.in3dMode||e.in3dInterceptor)&&!i.shadowRoot&&!i.attribute._debug_bounds&&!(i.baseGraphic||i.attribute.globalZIndex||i.interactiveGraphic))return!1;for(let s=0;s<this.interceptors.length;s++)if(this.interceptors[s].afterDrawItem&&this.interceptors[s].afterDrawItem(i,t,e,n,r))return!0;return!1}beforeDrawItem(i,t,e,n,r){if((!i.in3dMode||e.in3dInterceptor)&&!i.shadowRoot&&!i.attribute._debug_bounds&&!(i.baseGraphic||i.attribute.globalZIndex||i.interactiveGraphic))return!1;for(let s=0;s<this.interceptors.length;s++)if(this.interceptors[s].beforeDrawItem&&this.interceptors[s].beforeDrawItem(i,t,e,n,r))return!0;return!1}};dA=LBt([Rt(),BBt("design:paramtypes",[])],dA);class NBt{constructor(){this.order=1}beforeDrawItem(t,e,n,r,s){return!this.processing&&(t.baseGraphic?this.beforeDrawInteractive(t,e,n,r,s):this.beforeSetInteractive(t,e,n,r,s))}beforeSetInteractive(t,e,n,r,s){let a=t.interactiveGraphic;if(t.attribute.globalZIndex){a||(a=t.clone(),t.interactiveGraphic=a,a.baseGraphic=t),a.setAttributes({globalZIndex:0,zIndex:t.attribute.globalZIndex},!1,{skipUpdateCallback:!0}),n.stage.tryInitInteractiveLayer();const o=n.stage.getLayer("_builtin_interactive");return o&&this.getShadowRoot(o).add(a),!0}if(a){n.stage.tryInitInteractiveLayer();const o=n.stage.getLayer("_builtin_interactive");o&&this.getShadowRoot(o).removeChild(a),t.interactiveGraphic=null,a.baseGraphic=null}return!1}beforeDrawInteractive(t,e,n,r,s){const a=t.baseGraphic;let o=!!a.stage,l=a.parent;for(;o&&l&&l.stage!==l;)o=!!l.stage,l=l.parent;if(!o){const u=n.stage.getLayer("_builtin_interactive");return u&&this.getShadowRoot(u).removeChild(t),!0}if(a){this.processing=!0;const{context:u}=n;return u.highPerformanceSave(),u.setTransformFromMatrix(a.parent.globalTransMatrix,!0),a.isContainer?r.renderGroup(a,n,a.parent.globalTransMatrix):r.renderItem(a,n),u.highPerformanceRestore(),this.processing=!1,!0}return!1}getShadowRoot(t){var e;let n=t.getElementById("_interactive_group");return n||(n=Mt.CreateGraphic("group",{}),n.id="_interactive_group",t.add(n)),(e=n.shadowRoot)!==null&&e!==void 0?e:n.attachShadow()}}class jBt{constructor(){this.order=1}beforeDrawItem(t,e,n,r,s){if(!t.in3dMode||n.in3dInterceptor)return!1;n.in3dInterceptor=!0;const{context:a,stage:o}=e.drawParams;a.canvas,a.save(),this.initCanvasCtx(a),a.camera=o.camera;const l=a.currentMatrix;l.a/=a.dpr,l.b/=a.dpr,l.c/=a.dpr,l.d/=a.dpr,l.e/=a.dpr,l.f/=a.dpr;const u=Fi.allocate();PD(u,l);const c=a.modelMatrix;if(c){if(u){const h=Fi.allocate();a.modelMatrix=qd(h,c,u)}}else a.modelMatrix=u;return a.setTransform(1,0,0,1,0,0,!0),t.isContainer?Iet(a,t,(h,d)=>r.renderGroup(t,n,t.parent.globalTransMatrix,!h&&d),n):r.renderItem(t,n),a.camera=null,a.restore(),a.modelMatrix!==c&&Fi.free(a.modelMatrix),a.modelMatrix=c,n.in3dInterceptor=!1,!0}initCanvasCtx(t){t.setTransformForCurrent()}}var HBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},VBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},WBt=function(i,t){return function(e,n){t(e,n,i)}};let nI=class{constructor(i){this.drawContribution=i}prepare(i){i&&this.renderTreeRoots.forEach(t=>{this._prepare(t,i)})}_prepare(i,t){i.forEachChildren(e=>{this._prepare(e,t)}),i.update({bounds:t,trans:!0})}prepareRenderList(){}beforeDraw(i){}draw(i){this.drawContribution.draw(this,Object.assign({},this.drawParams))}afterDraw(i){this.drawContribution.afterDraw&&this.drawContribution.afterDraw(this,Object.assign({},this.drawParams))}reInit(){this.drawContribution.reInit()}render(i,t){this.renderTreeRoots=i,this.drawParams=t;const e=t.updateBounds;this.prepare(e),this.prepareRenderList(),this.beforeDraw(t),this.draw(t),this.afterDraw(t),this.drawParams=null}};nI=HBt([Rt(),WBt(0,ge(LF)),VBt("design:paramtypes",[Object])],nI);const $Bt=new re(i=>{i(lF).to(nI)}),pg=Symbol.for("PickerService"),k5=Symbol.for("GlobalPickerService"),Pp=Symbol.for("PickItemInterceptor"),fA=Symbol.for("PickServiceInterceptor");var OM=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let pA=class{constructor(){this.order=1}afterPickItem(i,t,e,n,r){if(i.graphic){let s=i.graphic;for(;s.parent;)s=s.parent;s.shadowHost&&(i.params={shadowTarget:i.graphic},i.graphic=s.shadowHost)}return i}};pA=OM([Rt()],pA);let gA=class{constructor(){this.order=1}afterPickItem(i,t,e,n,r){return i.attribute.shadowRootIdx>0||!i.attribute.shadowRootIdx?this._pickItem(i,t,e,n,r):null}beforePickItem(i,t,e,n,r){return i.attribute.shadowRootIdx<0?this._pickItem(i,t,e,n,r):null}_pickItem(i,t,e,n,r){var s;if(!i.shadowRoot)return null;const{parentMatrix:a}=r||{};if(!a)return null;const o=t.pickContext;o.highPerformanceSave();const l=(s=le(i))===null||s===void 0?void 0:s[i.type],{shadowPickMode:u=l?.shadowPickMode}=i.attribute,c=i.shadowRoot,h=wr.allocateByObj(a),d=new ci(h.a*e.x+h.c*e.y+h.e,h.b*e.x+h.d*e.y+h.f),f=t.pickGroup(c,d,h,n);return o.highPerformanceRestore(),!f.graphic&&f.group&&u==="full"&&(f.graphic=f.group),f}};gA=OM([Rt()],gA);let mA=class{constructor(){this.order=1}beforePickItem(i,t,e,n,r){const s=i.baseGraphic;if(s&&s.parent){const a=new ci(e.x,e.y),o=t.pickContext;o.highPerformanceSave();const l=s.parent.globalTransMatrix;l.transformPoint(a,a);const u=s.isContainer?t.pickGroup(s,a.clone(),l,n):t.pickItem(s,a.clone(),l,n);return o.highPerformanceRestore(),u}return null}};mA=OM([Rt()],mA);let _A=class{constructor(){this.order=1}beforePickItem(i,t,e,n,r){if(!i.in3dMode||n.in3dInterceptor)return null;const s=t.pickContext,a=i.stage;if(!s||!a)return null;if(n.in3dInterceptor=!0,s.save(),this.initCanvasCtx(s),s.camera=a.camera,i.isContainer){const o=Iet(s,i,()=>t.pickGroup(i,e,r.parentMatrix,n),n);return s.camera=null,n.in3dInterceptor=!1,s.restore(),o}return s.restore(),null}initCanvasCtx(i){i.setTransformForCurrent()}};_A=OM([Rt()],_A);const UBt=new re((i,t,e)=>{e(pg)||(i(k5).toSelf(),i(pg).toService(k5)),i(_A).toSelf().inSingletonScope(),i(Pp).toService(_A),i(gA).toSelf().inSingletonScope(),i(Pp).toService(gA),i(mA).toSelf().inSingletonScope(),i(Pp).toService(mA),Sr(i,Pp),i(pA).toSelf().inSingletonScope(),i(fA).toService(pA),Sr(i,fA)}),GBt=new re(i=>{i(yF).to(VD),i(det).toConstantValue(Mt)}),Zg=Symbol.for("AutoEnablePlugins"),Let=Symbol.for("PluginService");var YBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},XBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},C5=function(i,t){return function(e,n){t(e,n,i)}};let rI=class{constructor(i){this.autoEnablePlugins=i,this.onStartupFinishedPlugin=[],this.onRegisterPlugin=[],this.actived=!1}active(i,t){this.stage=i,this.actived=!0;const{pluginList:e}=t;e&&te.isBound(Zg)&&this.autoEnablePlugins.getContributions().forEach(n=>{e.includes(n.name)&&this.register(n)})}findPluginsByName(i){const t=[];return this.onStartupFinishedPlugin.forEach(e=>{e.name===i&&t.push(e)}),this.onRegisterPlugin.forEach(e=>{e.name===i&&t.push(e)}),t}register(i){i.activeEvent==="onStartupFinished"?this.onStartupFinishedPlugin.push(i):i.activeEvent==="onRegister"&&(this.onRegisterPlugin.push(i),i.activate(this))}unRegister(i){i.activeEvent==="onStartupFinished"?this.onStartupFinishedPlugin.splice(this.onStartupFinishedPlugin.indexOf(i),1):i.activeEvent==="onRegister"&&this.onRegisterPlugin.splice(this.onStartupFinishedPlugin.indexOf(i),1),i.deactivate(this)}release(...i){this.onStartupFinishedPlugin.forEach(t=>{t.deactivate(this)}),this.onStartupFinishedPlugin=[],this.onRegisterPlugin.forEach(t=>{t.deactivate(this)}),this.onRegisterPlugin=[]}};rI=YBt([Rt(),C5(0,ge(_n)),C5(0,jn(Zg)),XBt("design:paramtypes",[Object])],rI);const KBt=new re(i=>{i(Let).to(rI),IOt(i,Zg)}),qBt=new re(i=>{Sr(i,hM)}),ZBt=new re(i=>{i(bD).to(xD).inSingletonScope(),Sr(i,bD)});var QBt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},JBt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};let vA=class{constructor(){this.type="static",this.offscreen=!1,this.global=vt.global}setDpr(i){this.canvas.dpr=i}init(i,t,e){if(this.layer=i,this.window=t,e.main)this.main=!0,this.context=t.getContext(),this.canvas=this.context.getCanvas();else{let n;this.main=!1,e.canvasId&&(n=this.global.getElementById(e.canvasId)),n||(n=this.global.createCanvas({width:t.width,height:t.height})),n.style&&(n.style["pointer-events"]="none");const r=t.getContext().getCanvas().nativeCanvas,s=SD({nativeCanvas:n,width:t.width,height:t.height,dpr:t.dpr,id:e.canvasId,canvasControled:!0,container:t.getContainer(),x:r.offsetLeft,y:r.offsetTop});s.applyPosition(),this.canvas=s,this.context=s.getContext()}}resize(i,t){this.canvas.resize(i,t)}resizeView(i,t){}render(i,t,e){var n;if(!this.main){const r=this.window.getContext().getCanvas().nativeCanvas;!r||this.canvas.x===r.offsetLeft&&this.canvas.y===r.offsetTop||(this.canvas.x=r.offsetLeft,this.canvas.y=r.offsetTop,this.canvas.applyPosition())}t.renderService.render(i,Object.assign(Object.assign({context:this.context,clear:(n=t.background)!==null&&n!==void 0?n:"#ffffff"},t),e))}merge(i){i.forEach(t=>{const e=t.getContext().canvas.nativeCanvas;this.context.drawImage(e,0,0)})}prepare(i,t){}drawTo(i,t,e){var n;const r=i.getContext();e.renderService.render(t,Object.assign(Object.assign({context:r},e),{clear:e.clear?(n=e.background)!==null&&n!==void 0?n:"#fff":void 0}))}getContext(){return this.context}release(){this.canvas.release()}};vA=QBt([Rt(),JBt("design:paramtypes",[])],vA);const tFt=new re(i=>{i(vA).toSelf(),i(met).toService(vA)});function eFt(i){i.load(qBt),i.load(ZBt),i.load(tFt)}var iFt=function(i,t,e,n){return new(e||(e=Promise))(function(r,s){function a(u){try{l(n.next(u))}catch(c){s(c)}}function o(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof e?c:new e(function(h){h(c)})).then(a,o)}l((n=n.apply(i,t||[])).next())})};function Bet(i,t,e){const n={},r=[];return i.forEachChildren(s=>{const{zIndex:a=t}=s.attribute;n[a]?n[a].push(s):(n[a]=[s],r.push(a))},e),r.sort((s,a)=>e?a-s:s-a),{childMap:n,zIdxArray:r}}function Fet(i,t,e,n=!1,r=!1){let s=!1;if(r)s=!0;else{let a;i.forEachChildren((o,l)=>{const{zIndex:u=t}=o.attribute;if(l===0)a=u;else if(a!==u)return s=!0,!0;return!1},n)}if(s){const{childMap:a,zIdxArray:o}=Bet(i,t,n);let l=!1;for(let u=0;u<o.length&&!l;u++){const c=a[o[u]];r&&c.sort((h,d)=>{var f,p;return(n?-1:1)*(((f=d.attribute.z)!==null&&f!==void 0?f:0)-((p=h.attribute.z)!==null&&p!==void 0?p:0))});for(let h=0;h<c.length;h++)if(e(c[h],h)){l=!0;break}}}else i.forEachChildren(e,n)}function M5(i,t,e,n=!1){return iFt(this,void 0,void 0,function*(){yield i.forEachChildrenAsync(e,n)})}function nFt(i,t,e,n=!1){let r=!1;i.forEachChildren((o,l)=>{const{zIndex:u=e}=o.attribute;if(l!==0){if(u!==void 0)return r=!0,!0}return!1},n);let s=null,a=!1;if(r){const{childMap:o,zIdxArray:l}=Bet(i,e,n);let u=!1;for(let c=0;c<l.length&&!u;c++){const h=o[l[c]];for(let d=0;d<h.length;d++){if(a){u=!0,s=h[d];break}h[d]._uid!==t||(a=!0)}}}else i.forEachChildren(o=>a?(s=o,!0):(o._uid===t&&(a=!0),!1),n);return s}var rFt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},sFt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},BE=function(i,t){return function(e,n){t(e,n,i)}};let yA=class{constructor(i,t){this.contributions=i,this.drawItemInterceptorContributions=t,this._renderInGroup=(e,n,r,s)=>{var a;e?n.forEachChildren(o=>{r.break||(o.isContainer?this.renderGroup(o,r,s):this.renderItem(o,r))}):Fet(n,Ui.zIndex,o=>{r.break||(o.isContainer?this.renderGroup(o,r,s):this.renderItem(o,r))},!1,!!(!((a=r.context)===null||a===void 0)&&a.camera))},this.currentRenderMap=new Map,this.defaultRenderMap=new Map,this.styleRenderMap=new Map,this.dirtyBounds=new ir,this.backupDirtyBounds=new ir,this.global=vt.global,this.layerService=vt.layerService,J(this.contributions)||(this.contributions=[this.contributions]),this.init()}reInit(){this.init(),this.contributions.forEach(i=>{i.reInit()})}init(){this.contributions.forEach(i=>{if(i.style){const t=this.styleRenderMap.get(i.style)||new Map;t.set(i.numberType,i),this.styleRenderMap.set(i.style,t)}else this.defaultRenderMap.set(i.numberType,i)}),this.InterceptorContributions=this.drawItemInterceptorContributions.getContributions().sort((i,t)=>i.order-t.order)}prepareForDraw(i,t){t.updateBounds?this.useDirtyBounds=!0:this.useDirtyBounds=!t.stage.params.optimize.disableCheckGraphicWidthOutRange}draw(i,t){var e;this.prepareForDraw(i,t),t.drawContribution=this,this.currentRenderMap=this.styleRenderMap.get(t.renderStyle)||this.defaultRenderMap,this.currentRenderService=i;const{context:n,stage:r,viewBox:s,transMatrix:a}=t;if(!n)return;const o=this.dirtyBounds.setValue(0,0,s.width(),s.height());if(r.dirtyBounds&&!r.dirtyBounds.empty()){const u=vJ(o,r.dirtyBounds,!1);o.x1=Math.floor(u.x1),o.y1=Math.floor(u.y1),o.x2=Math.ceil(u.x2),o.y2=Math.ceil(u.y2)}const l=n.dpr%1;(l||l!==.5)&&(o.x1=Math.floor(o.x1*n.dpr)/n.dpr,o.y1=Math.floor(o.y1*n.dpr)/n.dpr,o.x2=Math.ceil(o.x2*n.dpr)/n.dpr,o.y2=Math.ceil(o.y2*n.dpr)/n.dpr),this.backupDirtyBounds.copy(o),n.reset(!1),n.save(),n.setClearMatrix(a.a,a.b,a.c,a.d,a.e,a.f),n.clearMatrix(!1),n.translate(s.x1,s.y1,!0),n.beginPath(),n.rect(o.x1,o.y1,o.width(),o.height()),n.clip(),r.camera&&(this.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),this.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0)),this.clearScreen(i,n,t),!((e=i.drawParams)===null||e===void 0)&&e.stage&&i.drawParams.stage.hooks.afterClearScreen.call(i.drawParams),i.renderTreeRoots.sort((u,c)=>{var h,d;return((h=u.attribute.zIndex)!==null&&h!==void 0?h:Ui.zIndex)-((d=c.attribute.zIndex)!==null&&d!==void 0?d:Ui.zIndex)}).forEach(u=>{u.isContainer?this.renderGroup(u,t,wr.allocate(1,0,0,1,0,0)):this.renderItem(u,t)}),n.restore(),n.draw()}doRegister(){throw new Error("")}_findNextGraphic(i){let t=i.parent,e=i._uid;for(;t;){const n=nFt(t,e,Ui.zIndex);if(n)return n;e=t._uid,t=t.parent}return null}renderGroup(i,t,e,n){if(t.break||i.attribute.visibleAll===!1)return;if(i.incremental&&(t.startAtId==null||t.startAtId===i._uid))return t.break=!0,void this._increaseRender(i,t);if(this.useDirtyBounds&&!i0(i.AABBBounds,this.dirtyBounds,!1)&&i.attribute.boundsMode!=="empty")return;let r,s=e;if(this.useDirtyBounds){r=eA.allocateByObj(this.dirtyBounds);const a=i.transMatrix;s=wr.allocateByObj(e).multiply(a.a,a.b,a.c,a.d,a.e,a.f),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(s.getInverse())}t.isGroupScroll=!(!i.attribute.scrollX&&!i.attribute.scrollY),this.renderItem(i,t,{renderInGroupParams:{skipSort:n,nextM:s},renderInGroup:this._renderInGroup}),this.useDirtyBounds&&(this.dirtyBounds.copy(r),eA.free(r),wr.free(s))}_increaseRender(i,t){const{layer:e,stage:n}=t,{subLayers:r}=e;let s=r.get(i._uid);s||(s={layer:this.layerService.createLayer(n),zIndex:r.size,group:i},r.set(i._uid,s));const a=s.layer.getNativeHandler().getContext(),o=s.drawContribution||te.get(Det);o.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:o,clear:"transparent",layer:s.layer,context:a,startAtId:i._uid,break:!1})),s.drawContribution=o;const l=this._findNextGraphic(i);if(l)if(l.isContainer&&l.incremental)this._increaseRender(l,t);else{let u=r.get(l._uid);u||(u={layer:this.layerService.createLayer(n),zIndex:r.size},r.set(l._uid,u));const c=u.layer.getNativeHandler().getContext();this.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:o,clear:"transparent",layer:u.layer,context:c,startAtId:l._uid,break:!1}))}}getRenderContribution(i){let t;return t||(t=this.selectRenderByNumberType(i.numberType,i)),t||(t=this.selectRenderByType(i.type)),t}renderItem(i,t,e){if(this.InterceptorContributions.length)for(let o=0;o<this.InterceptorContributions.length;o++){const l=this.InterceptorContributions[o];if(l.beforeDrawItem&&l.beforeDrawItem(i,this.currentRenderService,t,this,e))return}const n=this.getRenderContribution(i);if(!n)return;let r,s=!1;if(t.isGroupScroll){const{scrollX:o=0,scrollY:l=0}=i.parent.attribute;s=!0,this.scrollMatrix||(this.scrollMatrix=wr.allocate(1,0,0,1,0,0)),this.scrollMatrix.translate(-o,-l)}if(s&&(r=this.dirtyBounds.clone().transformWithMatrix(this.scrollMatrix)),this.useDirtyBounds&&!i.isContainer&&i.attribute.boundsMode!=="empty"&&!i0(i.AABBBounds,r??this.dirtyBounds,!1)){if(s&&i.parent){const{scrollX:o=0,scrollY:l=0}=i.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(o,l)}return}const a=t.startAtId!=null&&i._uid!==t.startAtId;if(i._uid===t.startAtId&&(t.startAtId=null),e&&(e.skipDraw=a),a?i.isContainer&&n.draw(i,this.currentRenderService,t,e):n.draw(i,this.currentRenderService,t,e),s&&i.parent){const{scrollX:o=0,scrollY:l=0}=i.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(o,l)}if(this.InterceptorContributions.length)for(let o=0;o<this.InterceptorContributions.length;o++){const l=this.InterceptorContributions[o];if(l.afterDrawItem&&l.afterDrawItem(i,this.currentRenderService,t,this))return}}selectRenderByType(i){return Ee.getInstance().warn(""),null}selectRenderByNumberType(i,t){let e;if(t.attribute.renderStyle){const n=this.styleRenderMap.get(t.attribute.renderStyle);e=n&&n.get(i)}return e||this.currentRenderMap.get(i)||this.defaultRenderMap.get(i)}clearScreen(i,t,e){var n,r,s;const{clear:a,viewBox:o}=e,l=o.width(),u=o.height();if(a){t.clearRect(0,0,l,u),!((n=i.drawParams)===null||n===void 0)&&n.stage&&i.drawParams.stage.hooks.afterClearRect.call(i.drawParams);const c=(r=i.drawParams)===null||r===void 0?void 0:r.stage;if(c&&(t.globalAlpha=(s=c.attribute.opacity)!==null&&s!==void 0?s:1),c&&c.backgroundImg&&c.resources){const h=c.resources.get(a);h&&h.state==="success"&&h.data&&t.drawImage(h.data,0,0,l,u)}else t.fillStyle=zw(t,a,{AABBBounds:{x1:0,y1:0,x2:0+l,y2:0+u}},0,0),t.fillRect(0,0,l,u)}}afterDraw(i,t){}};yA=rFt([Rt(),BE(0,Rtt(dr)),BE(1,ge(_n)),BE(1,jn(hA)),sFt("design:paramtypes",[Array,Object])],yA);var aFt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let bA=class extends g0{constructor(){super(...arguments),this.numberType=Ib}drawShape(i,t,e,n,r,s,a,o){if(i.incremental&&r.multiGraphicOptions){const{startAtIdx:l,length:u}=r.multiGraphicOptions,{segments:c=[]}=i.attribute;if(l>c.length)return;const h=le(i).line,{fill:d=h.fill,stroke:f=h.stroke,opacity:p=h.opacity,fillOpacity:g=h.fillOpacity,strokeOpacity:m=h.strokeOpacity,lineWidth:_=h.lineWidth,visible:v=h.visible}=i.attribute,y=Qd(p,g,d),b=OD(p,m),x=Zd(d),S=Gg(f,_);if(!i.valid||!v||!x&&!S||!(y||b||a||o))return;const{context:w}=r;for(let A=l;A<l+u;A++)this.drawIncreaseSegment(i,w,c[A-1],c[A],i.attribute.segments[A],[h,i.attribute],e,n)}else super.drawShape(i,t,e,n,r,s,a,o)}drawIncreaseSegment(i,t,e,n,r,s,a,o){n&&(t.beginPath(),sBt(t.nativeContext,e,n,{offsetX:a,offsetY:o}),t.setShadowBlendStyle&&t.setShadowBlendStyle(i,r,s),t.setStrokeStyle(i,r,a,o,s),t.stroke())}};bA=aFt([Rt()],bA);var oFt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let xA=class extends m0{constructor(){super(...arguments),this.numberType=Db}drawShape(i,t,e,n,r,s,a){if(i.incremental&&r.multiGraphicOptions){const{startAtIdx:o,length:l}=r.multiGraphicOptions,{segments:u=[]}=i.attribute;if(o>u.length)return;const c=le(i).area,{fill:h=c.fill,fillOpacity:d=c.fillOpacity,opacity:f=c.opacity,visible:p=c.visible}=i.attribute,g=Qd(f,d,h),m=Zd(h);if(!i.valid||!p||!m||!g&&!a)return;for(let _=o;_<o+l;_++)this.drawIncreaseSegment(i,t,u[_-1],u[_],i.attribute.segments[_],[c,i.attribute],e,n)}else super.drawShape(i,t,e,n,r,s,a)}drawIncreaseSegment(i,t,e,n,r,s,a,o){n&&(t.beginPath(),aBt(t.camera?t:t.nativeContext,e,n,{offsetX:a,offsetY:o}),t.setShadowBlendStyle&&t.setShadowBlendStyle(i,r,s),t.setCommonStyle(i,r,a,o,s),t.fill())}};xA=oFt([Rt()],xA);var Ep,lFt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},uFt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},P_=function(i,t){return function(e,n){t(e,n,i)}},ll=function(i,t,e,n){return new(e||(e=Promise))(function(r,s){function a(u){try{l(n.next(u))}catch(c){s(c)}}function o(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof e?c:new e(function(h){h(c)})).then(a,o)}l((n=n.apply(i,t||[])).next())})};(function(i){i[i.NORMAL=0]="NORMAL",i[i.STOP=1]="STOP"})(Ep||(Ep={}));let sI=class extends yA{constructor(i,t,e,n){super(i,n),this.contributions=i,this.lineRender=t,this.areaRender=e,this.drawItemInterceptorContributions=n,this.rendering=!1,this.currFrameStartAt=0,this.currentIdx=0,this.status=Ep.NORMAL,this.checkingForDrawPromise=null,this.hooks={completeDraw:new Xr([])},this.defaultRenderMap.set(this.lineRender.numberType,this.lineRender),this.defaultRenderMap.set(this.areaRender.numberType,this.areaRender)}draw(i,t){return ll(this,void 0,void 0,function*(){if(this.checkingForDrawPromise)return;this.lastRenderService=i,this.lastDrawContext=t,this.checkingForDrawPromise=this.checkForDraw(t);const e=yield this.checkingForDrawPromise;if(this.checkingForDrawPromise=null,e)return;this.currentRenderService=i;const{context:n,viewBox:r}=t;n&&(n.inuse=!0,n.clearMatrix(),n.setTransformForCurrent(!0),n.save(),t.restartIncremental&&this.clearScreen(this.currentRenderService,n,t),n.translate(r.x1,r.y1,!0),n.save(),i.renderTreeRoots.sort((s,a)=>{var o,l;return((o=s.attribute.zIndex)!==null&&o!==void 0?o:Ui.zIndex)-((l=a.attribute.zIndex)!==null&&l!==void 0?l:Ui.zIndex)}).forEach(s=>{this.renderGroup(s,t)}),this.hooks.completeDraw.tap("top-draw",()=>{n.restore(),n.restore(),n.draw(),n.inuse=!1,this.rendering=!1}))})}_increaseRender(i,t){return ll(this,void 0,void 0,function*(){this.rendering=!0,yield this._renderIncrementalGroup(i,t)})}_renderIncrementalGroup(i,t){return ll(this,void 0,void 0,function*(){this.count=i.count,yield new Promise(e=>{this.renderItem(i,t,{drawingCb:()=>ll(this,void 0,void 0,function*(){if(i.count!==2)yield M5(i,Ui.zIndex,(n,r)=>{if(this.status===Ep.STOP)return!0;if(n.isContainer||r<this.currentIdx)return!1;const s=this.currFrameStartAt+i.incremental;return r<s&&(this.currentIdx=r+1,this.renderItem(n,t)),r===s-1&&(this.currFrameStartAt=this.currentIdx,this.waitToNextFrame())}),e(!1);else{const n=i.getChildAt(0);if(n.incremental&&n.attribute.segments)for(n.incrementalAt||(n.incrementalAt=0);n.incrementalAt<n.attribute.segments.length;)t.multiGraphicOptions={startAtIdx:n.incrementalAt,length:n.incremental},this.renderItem(n,t),n.incrementalAt+=n.incremental,yield this.waitToNextFrame();else this.renderItem(n,t);e(!1)}})})}),this.hooks.completeDraw.call()})}waitToNextFrame(){return ll(this,void 0,void 0,function*(){return new Promise(i=>{this.global.getRequestAnimationFrame()(()=>{i(!1)})})})}checkForDraw(i){return ll(this,void 0,void 0,function*(){let t=this.rendering;return i.restartIncremental&&(t=!1,yield this.forceStop(),this.resetToInit()),t})}forceStop(){return ll(this,void 0,void 0,function*(){this.rendering&&(this.status=Ep.STOP,yield new Promise(i=>{this.hooks.completeDraw.tap("stopCb",()=>{this.status=Ep.NORMAL,this.hooks.completeDraw.taps=this.hooks.completeDraw.taps.filter(t=>t.name!=="stopCb"),i(!1)})}))})}resetToInit(){this.currFrameStartAt=0,this.currentIdx=0}renderGroup(i,t){return ll(this,void 0,void 0,function*(){if(!t.break&&i.attribute.visibleAll!==!1)return i.incremental&&t.startAtId===i._uid?(yield this._increaseRender(i,t),void(t.break=!0)):void(yield new Promise(e=>{this.renderItem(i,t,{drawingCb:()=>ll(this,void 0,void 0,function*(){yield M5(i,Ui.zIndex,n=>ll(this,void 0,void 0,function*(){t.break||n.isContainer&&(yield this.renderGroup(n,t))})),e(!1)})})}))})}};sI=lFt([Rt(),P_(0,Rtt(dr)),P_(1,ge(bA)),P_(2,ge(xA)),P_(3,ge(_n)),P_(3,jn(hA)),uFt("design:paramtypes",[Array,Object,Object,Object])],sI);const cFt=new re(i=>{i(RM).toSelf().inSingletonScope(),i(IF).toSelf().inSingletonScope(),i(LF).to(yA),i(Det).to(sI),i(S5).to(KD).inSingletonScope(),i(dr).toService(S5),Sr(i,vet),i(uo).toSelf().inSingletonScope(),Sr(i,MF),Sr(i,dr),i(dA).toSelf().inSingletonScope(),i(hA).toService(dA),Sr(i,hA)});function hFt(i){i.load(cFt)}function SA(){SA.__loaded||(SA.__loaded=!0,te.load(l2t),te.load(GBt),te.load($Bt),te.load(UBt),te.load(KBt),eFt(te),hFt(te))}SA.__loaded=!1,SA();const Qt=te.get(oF);vt.global=Qt;const dFt=te.get(get);vt.graphicUtil=dFt;const fFt=te.get(pet);vt.transformUtil=fFt;const pFt=te.get(yF);vt.graphicService=pFt;const gFt=te.get(AF);vt.layerService=gFt;class mFt{constructor(){this.name="AutoRenderPlugin",this.activeEvent="onRegister",this._uid=on.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=t=>{t.glyphHost&&(t=t.glyphHost),t.stage===this.pluginService.stage&&t.stage!=null&&t.stage.renderNextFrame()}}activate(t){this.pluginService=t;const e=this.pluginService.stage;e&&(e.graphicService.hooks.onAttributeUpdate.tap(this.key,this.handleChange),e.graphicService.hooks.onSetStage.tap(this.key,this.handleChange),e.graphicService.hooks.onRemove.tap(this.key,this.handleChange))}deactivate(t){const e=r=>r.filter(s=>s.name!==this.key),n=this.pluginService.stage;n&&(n.graphicService.hooks.onAttributeUpdate.taps=e(n.graphicService.hooks.onAttributeUpdate.taps),n.graphicService.hooks.onSetStage.taps=e(n.graphicService.hooks.onSetStage.taps),n.graphicService.hooks.onRemove.taps=e(n.graphicService.hooks.onRemove.taps))}}class _Ft{constructor(){this.name="AutoRefreshPlugin",this.activeEvent="onRegister",this._uid=on.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=t=>{t.glyphHost&&(t=t.glyphHost),t.stage===this.pluginService.stage&&t.stage!=null&&t.stage.renderNextFrame()}}activate(t){this.pluginService=t,this.dpr=vt.global.devicePixelRatio,this.refresh()}refresh(){this._refreshByMediaQuery()||this._refreshByRaf()}_refreshByRaf(){const t=vt.global.getRequestAnimationFrame();this.rafId=t(()=>{vt.global.devicePixelRatio!==this.dpr&&(this.dpr=vt.global.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0)),this.refresh()})}_refreshByMediaQuery(){try{const t=`(resolution: ${window.devicePixelRatio}dppx)`,e=()=>{window.devicePixelRatio!==this.dpr&&(this.dpr=window.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0))},n=matchMedia(t);n&&n.addEventListener("change",e),this.autoRefreshCbs||(this.autoRefreshCbs=[]),this.autoRefreshCbs.push(()=>{n&&n.removeEventListener("change",e)})}catch{return!1}return!0}deactivate(t){var e;const n=vt.global.getCancelAnimationFrame();n&&this.rafId&&n(this.rafId),(e=this.autoRefreshCbs)===null||e===void 0||e.forEach(r=>{r()}),this.autoRefreshCbs=void 0}}class vFt{constructor(){this.name="IncrementalAutoRenderPlugin",this.activeEvent="onRegister",this.nextFrameRenderGroupSet=new Set,this.willNextFrameRender=!1,this.nextUserParams={},this._uid=on.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t;const e=this.pluginService.stage;e&&(e.graphicService.hooks.onAddIncremental.tap(this.key,(n,r,s)=>{n.glyphHost&&(n=n.glyphHost),n.stage===t.stage&&n.stage!=null&&(this.nextUserParams.startAtId=r._uid,this.renderNextFrame(r))}),e.graphicService.hooks.onClearIncremental.tap(this.key,(n,r)=>{n.stage===t.stage&&n.stage!=null&&(this.nextUserParams.startAtId=n._uid,this.nextUserParams.restartIncremental=!0,this.renderNextFrame(n))}))}deactivate(t){const e=this.pluginService.stage;e&&(e.graphicService.hooks.onAddIncremental.taps=e.graphicService.hooks.onAddIncremental.taps.filter(n=>n.name!==this.key),e.graphicService.hooks.onClearIncremental.taps=e.graphicService.hooks.onClearIncremental.taps.filter(n=>n.name!==this.key))}renderNextFrame(t){this.nextFrameRenderGroupSet.add(t),this.willNextFrameRender||(this.willNextFrameRender=!0,vt.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){const t=this.pluginService.stage;this.nextFrameRenderGroupSet.size&&(this.nextFrameRenderGroupSet.forEach(e=>{const n=e.layer;if(!n||!e.layer.subLayers)return;const r=e.layer.subLayers.get(e._uid);r&&r.drawContribution&&r.drawContribution.draw(t.renderService,Object.assign({stage:t,layer:n,viewBox:t.window.getViewBox(),transMatrix:t.window.getViewBoxTransform(),clear:"transparent",renderService:t.renderService,updateBounds:!1,startAtId:e._uid,context:r.layer.getNativeHandler().getContext()},this.nextUserParams))}),this.nextUserParams={},this.nextFrameRenderGroupSet.clear())}}const T5=new Gi;class yFt{constructor(){this.name="DirtyBoundsPlugin",this.activeEvent="onRegister",this._uid=on.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t,t.stage.hooks.afterRender.tap(this.key,n=>{n&&n===this.pluginService.stage&&n.dirtyBounds.clear()});const e=this.pluginService.stage;e&&(e.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(n,r,s,a)=>{n.glyphHost&&(n=n.glyphHost),r&&r===this.pluginService.stage&&r.renderCount&&(n.isContainer&&!n.shouldSelfChangeUpdateAABBBounds()||s&&(T5.setValue(a.x1,a.y1,a.x2,a.y2),r.dirty(T5,n.parent&&n.parent.globalTransMatrix)))}),e.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(n,r,s,a,o)=>{r&&r===this.pluginService.stage&&r.renderCount&&(n.isContainer&&!o||r.dirty(a.globalAABBBounds))}),e.graphicService.hooks.clearAABBBounds.tap(this.key,(n,r,s)=>{r&&r===this.pluginService.stage&&r.renderCount&&r&&r.dirty(s)}),e.graphicService.hooks.onRemove.tap(this.key,n=>{const r=n.stage;r&&r===this.pluginService.stage&&r.renderCount&&r&&r.dirty(n.globalAABBBounds)}))}deactivate(t){const e=this.pluginService.stage;e&&(e.graphicService.hooks.beforeUpdateAABBBounds.taps=e.graphicService.hooks.beforeUpdateAABBBounds.taps.filter(n=>n.name!==this.key),e.graphicService.hooks.afterUpdateAABBBounds.taps=e.graphicService.hooks.afterUpdateAABBBounds.taps.filter(n=>n.name!==this.key),e.graphicService.hooks.clearAABBBounds.taps=e.graphicService.hooks.clearAABBBounds.taps.filter(n=>n.name!==this.key),e.hooks.afterRender.taps=e.hooks.afterRender.taps.filter(n=>n.name!==this.key),e.graphicService.hooks.onRemove.taps=e.graphicService.hooks.onRemove.taps.filter(n=>n.name!==this.key))}}let sp;function bFt(){if(sp==null)try{const i=document.createElement("canvas"),t=i.getContext("2d");sp=!!(window&&i.getBoundingClientRect&&requestAnimationFrame&&window.devicePixelRatio&&t&&t.isPointInPath&&t.isPointInStroke),sp&&(sp=!!document.createElement)}catch{sp=!1}}function BF(){bFt();const i=vt.global&&vt.global.env;return i?i==="browser":sp}let Va=class aI{static registerPlugin(t,e){aI._pluginClasses[t]=e}static getPlugin(t){return aI._pluginClasses[t]}};Va._pluginClasses={};const P5={BACKGROUND:"white"};class xFt extends Lm{set viewBox(t){this.window.setViewBox(t)}get viewBox(){return this.window.getViewBox()}get x(){return this.window.getViewBox().x1}set x(t){const e=this.window.getViewBox();e.translate(t-e.x1,0),this.window.setViewBox(e)}get y(){return this.window.getViewBox().y1}set y(t){const e=this.window.getViewBox();e.translate(0,t-e.y1),this.window.setViewBox(e)}get width(){return this.window.width}set width(t){this.resize(t,this.height)}get viewWidth(){return this.window.getViewBox().width()}set viewWidth(t){this.resizeView(t,this.viewHeight)}get viewHeight(){return this.window.getViewBox().height()}set viewHeight(t){this.resizeView(this.viewWidth,t)}get height(){return this.window.height}set height(t){this.resize(this.width,t)}get dpr(){return this.window.dpr}set dpr(t){this.setDpr(t)}get background(){var t;return(t=this._background)!==null&&t!==void 0?t:P5.BACKGROUND}set background(t){this._background=t}get defaultLayer(){return this.at(0)}get eventSystem(){return this._eventSystem}get ticker(){return this._ticker}set ticker(t){t.bindStage(this),this._ticker&&this._ticker.removeListener("tick",this.afterTickCb),t.addTimeline(this.timeline),this._ticker=t,this._ticker.on("tick",this.afterTickCb)}constructor(t={}){var e,n;super({}),this.tickedBeforeRender=!0,this._onVisibleChange=r=>{if(!(this._skipRender<0))if(r){if(this.dirtyBounds){const s=this.window.getViewBox();this.dirtyBounds.setValue(s.x1,s.y1,s.width(),s.height())}this._skipRender>1&&this.renderNextFrame(),this._skipRender=0}else this._skipRender=1},this.beforeRender=r=>{this._beforeRenderList.forEach(s=>s(r))},this.afterClearScreen=r=>{this._afterClearScreen&&this._afterClearScreen(r)},this.afterClearRect=r=>{this._afterClearRect&&this._afterClearRect(r)},this.afterRender=r=>{this.renderCount++,this._afterRenderList.forEach(s=>s(r)),this._afterNextRenderCbs&&this._afterNextRenderCbs.forEach(s=>s(r)),this._afterNextRenderCbs=null,this.tickedBeforeRender=!1},this.afterTickCb=()=>{this.tickedBeforeRender=!0,this.state!=="rendering"&&this.renderNextFrame()},this.params=t,this.theme=new c0,this.hooks={beforeRender:new Xr(["stage"]),afterRender:new Xr(["stage"]),afterClearScreen:new Xr(["stage"]),afterClearRect:new Xr(["stage"])},this.global=vt.global,!this.global.env&&BF()&&this.global.setEnv("browser"),this.window=te.get(jw),this.renderService=te.get(lF),this.pluginService=te.get(Let),this.layerService=te.get(AF),this.graphicService=te.get(yF),this.pluginService.active(this,t),this._beforeRenderList=[],this._afterRenderList=[],this.window.create({width:t.width,height:t.height,viewBox:t.viewBox,container:t.container,dpr:t.dpr||this.global.devicePixelRatio,canvasControled:t.canvasControled!==!1,title:t.title||"",canvas:t.canvas}),this.state="normal",this.renderCount=0,this.tryInitEventSystem(),this._background=(e=t.background)!==null&&e!==void 0?e:P5.BACKGROUND,this.appendChild(this.layerService.createLayer(this,{main:!0})),this.nextFrameRenderLayerSet=new Set,this.willNextFrameRender=!1,this.stage=this,this.renderStyle=t.renderStyle,t.autoRender&&this.enableAutoRender(),t.autoRefresh&&this.enableAutoRefresh(),t.disableDirtyBounds===!1&&this.enableDirtyBounds(),t.enableHtmlAttribute&&this.enableHtmlAttribute(t.enableHtmlAttribute),t.ReactDOM&&this.enableReactAttribute(t.ReactDOM),t.enableLayout&&this.enableLayout(),this.hooks.beforeRender.tap("constructor",this.beforeRender),this.hooks.afterRender.tap("constructor",this.afterRender),t.beforeRender&&this._beforeRenderList.push(t.beforeRender),t.afterRender&&this._afterRenderList.push(t.afterRender),this.hooks.afterClearScreen.tap("constructor",this.afterClearScreen),this.hooks.afterClearRect.tap("constructor",this.afterClearRect),this._afterClearScreen=t.afterClearScreen,this._afterClearRect=t.afterClearRect,this.supportInteractiveLayer=t.interactiveLayer!==!1,t.optimize||(t.optimize={tickRenderMode:"effect"}),this.optmize(t.optimize),t.background&&Ht(this._background)&&this._background.includes("/")&&this.setAttributes({background:this._background}),this.initAnimate(t),this.rafId=(n=t.rafId)!==null&&n!==void 0?n:Math.floor(6*Math.random())}initAnimate(t){var e;this.createTicker&&this.createTimeline&&(this._ticker=t.ticker||this.createTicker(this),this._ticker.bindStage(this),((e=this.params.optimize)===null||e===void 0?void 0:e.tickRenderMode)==="performance"&&this._ticker.setFPS(30),this.timeline=this.createTimeline(),this._ticker.addTimeline(this.timeline),this._ticker.on("tick",this.afterTickCb))}startAnimate(){this._ticker&&this.timeline&&(this._ticker.start(),this.timeline.resume())}pauseRender(t=-1){this._skipRender=t}resumeRender(){this._skipRender=0}tryInitEventSystem(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new yIt(Object.assign({targetElement:this.window,resolution:this.window.dpr||this.global.devicePixelRatio,rootNode:this,global:this.global,supportsPointerEvents:this.params.supportsPointerEvents,supportsTouchEvents:this.params.supportsTouchEvents},this.params.event)))}preventRender(t){t?this._skipRender=-1/0:this.params.optimize.skipRenderWithOutRange!==!1?this._skipRender=this.window.isVisible()?0:1:this._skipRender=0}optmize(t){this.optmizeRender(t.skipRenderWithOutRange),this.params.optimize=t}optmizeRender(t=!1){t&&(this._skipRender=this._skipRender<0?this._skipRender:this.window.isVisible()?0:1,this.window.onVisibleChange(this._onVisibleChange))}getTimeline(){return this.timeline}get3dOptions(t){const{center:e={x:this.width/2,y:this.height/2,z:0,dx:0,dy:0,dz:0},light:n={},alpha:r=0,beta:s=0,camera:a,fieldRatio:o=1,fieldDepth:l}=t;return Object.assign(Object.assign({},t),{center:e,light:n,alpha:r,beta:s,camera:a,fieldRatio:o,fieldDepth:l})}set3dOptions(t){var e,n,r,s,a,o;this.option3d=t;const l=this.get3dOptions(t),{light:u,center:c,camera:h,alpha:d,beta:f,fieldRatio:p,fieldDepth:g}=l,{dir:m=[1,1,-1],color:_="white",ambient:v}=u,y=((e=c.x)!==null&&e!==void 0?e:this.width/2)+((n=c.dx)!==null&&n!==void 0?n:0),b=((r=c.y)!==null&&r!==void 0?r:this.height/2)+((s=c.dy)!==null&&s!==void 0?s:0),x=[y,b,((a=c.z)!==null&&a!==void 0?a:0)+((o=c.dz)!==null&&o!==void 0?o:0)];let S=0,w=0,A=0;h||(S=Math.sin(d)+y,w=Math.sin(f)+b,A=Math.cos(d)*Math.cos(f)*1);const k=Va.getPlugin("DirectionalLight");k&&(this.light=new k(m,_,v));const C={left:0,right:this.width,top:0,bottom:this.height,fieldRatio:p,fieldDepth:g,viewParams:{pos:[S,w,A],center:x,up:[0,1,0]}};if(this.camera)this.camera.params=C;else{const M=Va.getPlugin("OrthoCamera");M&&(this.camera=new M(C))}t.enableView3dTransform&&this.enableView3dTransform()}setBeforeRender(t){this._beforeRenderList.push(t)}removeBeforeRender(t){this._beforeRenderList=this._beforeRenderList.filter(e=>e!==t)}setAfterRender(t){this._afterRenderList.push(t)}removeAfterRender(t){this._afterRenderList=this._afterRenderList.filter(e=>e!==t)}afterNextRender(t){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(t)}enableView3dTransform(){if(this.view3dTranform)return;this.view3dTranform=!0;const t=Va.getPlugin("ViewTransform3dPlugin");t&&this.pluginService.register(new t)}disableView3dTranform(){this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName("ViewTransform3dPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableAutoRender(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new mFt))}disableAutoRender(){this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName("AutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableAutoRefresh(){this.autoRefresh||this.global.env==="node"||(this.autoRefresh=!0,this.pluginService.register(new _Ft))}disableAutoRefresh(){this.autoRefresh&&(this.autoRefresh=!1,this.pluginService.findPluginsByName("AutoRefreshPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableIncrementalAutoRender(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new vFt))}disableIncrementalAutoRender(){this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName("IncrementalAutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableDirtyBounds(){if(this.dirtyBounds)return;this.dirtyBounds=new ir;let t=this.pluginService.findPluginsByName("DirtyBoundsPlugin")[0];t?t.activate(this.pluginService):(t=new yFt,this.pluginService.register(t))}disableDirtyBounds(){this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName("DirtyBoundsPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableLayout(){if(this._enableLayout)return;this._enableLayout=!0;const t=Va.getPlugin("FlexLayoutPlugin");t&&this.pluginService.register(new t)}disableLayout(){this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName("FlexLayoutPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableHtmlAttribute(t){if(this.htmlAttribute)return;const e=Va.getPlugin("HtmlAttributePlugin");e&&(this.htmlAttribute=t,this.pluginService.register(new e))}disableHtmlAttribute(){this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName("HtmlAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableReactAttribute(t){if(this.reactAttribute)return;const e=Va.getPlugin("ReactAttributePlugin");e&&(this.reactAttribute=t,this.pluginService.register(new e))}disableReactAttribute(){this.reactAttribute&&(this.reactAttribute=!1,this.pluginService.findPluginsByName("ReactAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}getPluginsByName(t){return this.pluginService.findPluginsByName(t)}tryUpdateAABBBounds(){const t=this.window.getViewBox();return this._AABBBounds.setValue(t.x1,t.y1,t.x2,t.y2),this._AABBBounds}combineLayer(t,e){throw new Error("")}createLayer(t,e){if(this.releaseStatus==="released")return;const n=this.layerService.createLayer(this,{main:!1,layerMode:e,canvasId:t});return this.appendChild(n),n}sortLayer(t){const e=this.children;e.sort(t),this.removeAllChild(),e.forEach(n=>{this.appendChild(n)})}removeLayer(t){return this.removeChild(this.findChildByUid(t))}tryInitInteractiveLayer(){this.releaseStatus!=="released"&&this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name="_builtin_interactive",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}clearViewBox(t){this.window.clearViewBox(t)}render(t,e){if(this.releaseStatus==="released")return;this.startAnimate();const n=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=e,this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=n,this._skipRender&&this._skipRender++}combineLayersToWindow(){if(this.global.env==="harmony"){const t=this.window.getContext().nativeContext;this.forEachChildren((e,n)=>{if(n>0){const r=e.getNativeHandler().getContext().canvas.nativeCanvas.nativeCanvas._c.transferToImageBitmap();t.transferFromImageBitmap(r)}})}}renderNextFrame(t,e){this.nextFrameRenderLayerSet.size!==this.childrenCount&&(t||this).forEach(n=>{this.nextFrameRenderLayerSet.add(n)}),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getSpecifiedRequestAnimationFrame(this.rafId)(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){if(this.releaseStatus==="released")return;this.startAnimate();const t=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=t,this._skipRender&&this._skipRender++}renderLayerList(t,e){const n=[];for(let r=0;r<t.length;r++){let s=t[r];s.layerMode==="virtual"&&(s=s.getNativeHandler().mainHandler.layer),n.includes(s)||n.push(s)}n.forEach(r=>{r.renderCount>this.renderCount||(r.renderCount=this.renderCount+1,r===this.interactiveLayer&&this.dirtyBounds&&this.dirtyBounds.clear(),r.render({renderService:this.renderService,background:r===this.defaultLayer?this.background:void 0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}),this.interactiveLayer&&!t.includes(this.interactiveLayer)&&(this.dirtyBounds&&this.dirtyBounds.clear(),this.interactiveLayer.render({renderService:this.renderService,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}resizeWindow(t,e,n=!0){this.window.resize(t,e),n&&this.render()}resize(t,e,n=!0){this.releaseStatus!=="released"&&(this.window.hasSubView()||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.window.resize(t,e),this.forEachChildren(r=>{r.resize(t,e)}),this.camera&&this.option3d&&this.set3dOptions(this.option3d),n&&this.render())}resizeView(t,e,n=!0){this.releaseStatus!=="released"&&(this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.forEachChildren(r=>{r.resizeView(t,e)}),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{right:this.width,bottom:this.height})),n&&this.render())}setViewBox(t,e,n,r,s){let a=!0;typeof t=="object"?(this.viewBox.setValue(t.x1,t.y1,t.x2,t.y2),e===!1&&(a=!1)):(this.viewBox.setValue(t,e,t+n,e+r),s===!1&&(a=!1)),this.forEachChildren(o=>{o.resizeView(this.viewBox.width(),this.viewBox.height())}),a&&this.render()}setDpr(t,e=!0){this.forEachChildren(n=>{n.setDpr(t)}),e&&this.render()}setOrigin(t,e){throw new Error("")}export(t){throw new Error("")}pick(t,e){if(this.releaseStatus==="released")return;const n=this.getPickerService().pick(this.children,new ci(t,e),{bounds:this.AABBBounds});return!(!n?.graphic&&!n?.group)&&n}setToFrame(t){throw new Error("")}release(){var t,e;super.release(),this.hooks.beforeRender.unTap("constructor",this.beforeRender),this.hooks.afterRender.unTap("constructor",this.afterRender),this.eventSystem&&this.eventSystem.release(),this.layerService.releaseStage(this),this.pluginService.release(),this.forEach(n=>{n.release()}),this.interactiveLayer&&(this.interactiveLayer.forEachChildren(n=>{n.setStage&&n.setStage(null,null),this.interactiveLayer.removeChild(n)}),this.interactiveLayer.release()),this.window.release(),(t=this._ticker)===null||t===void 0||t.remTimeline(this==null?void 0:this.timeline),(e=this._ticker)===null||e===void 0||e.removeListener("tick",this.afterTickCb),this.renderService.renderTreeRoots=[]}setStage(t){}dirty(t,e){this.releaseStatus!=="released"&&(e&&t.transformWithMatrix(e),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(t.x1,t.y1,t.x2,t.y2),this.dirtyBounds.union(t))}getLayer(t){return this.children.filter(e=>e.name===t)[0]}renderTo(t){this.releaseStatus!=="released"&&this.forEachChildren((e,n)=>{e.drawTo(t,{renderService:this.renderService,viewBox:t.getViewBox(),transMatrix:t.getViewBoxTransform(),background:e===this.defaultLayer?this.background:void 0,clear:n===0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())})})}renderToNewWindow(t=!0,e){if(this.releaseStatus==="released")return;const n=te.get(jw),r=e?-e.x1:0,s=e?-e.y1:0,a=e?e.x2:this.viewWidth,o=e?e.y2:this.viewHeight,l=e?e.width():this.viewWidth,u=e?e.height():this.viewHeight;return n.create({viewBox:{x1:r,y1:s,x2:a,y2:o},width:l,height:u,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:""}),this.renderTo(n),n}toCanvas(t=!0,e){if(this.releaseStatus==="released")return;const n=this.renderToNewWindow(t,e).getNativeHandler();return n.nativeCanvas?n.nativeCanvas:null}setCursor(t){this._cursor=t,this.eventSystem.setCursor(t,"ignore")}getCursor(){return this._cursor}eventPointTransform(t){const e=this.global.mapToCanvasPoint(t,this.window);return this.stage.window.pointTransform(e.x,e.y)}pauseTriggerEvent(){this._eventSystem&&this._eventSystem.pauseTriggerEvent()}resumeTriggerEvent(){this._eventSystem&&this._eventSystem.resumeTriggerEvent()}getPickerService(){return this.pickerService||(this.pickerService=te.get(pg)),this.pickerService}reInit(){this.renderService.reInit(),this.pickerService.reInit()}}var SFt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},wFt=function(i,t,e,n){return new(e||(e=Promise))(function(r,s){function a(u){try{l(n.next(u))}catch(c){s(c)}}function o(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof e?c:new e(function(h){h(c)})).then(a,o)}l((n=n.apply(i,t||[])).next())})};let wA=class{configure(i,...t){i.env===this.type&&i.setActiveEnvContribution(this)}getNativeAABBBounds(i){return new Gi}removeDom(i){return!1}createDom(i){return null}updateDom(i,t){return!1}getDynamicCanvasCount(){return 999}getStaticCanvasCount(){return 999}getElementById(i){return document.getElementById(i)}getRootElement(){return document.body}loadJson(i){const t=fetch(i).then(e=>e.json());return t.then(e=>({data:e,state:"success"})).catch(()=>({data:null,state:"fail"})),t}loadArrayBuffer(i){return fetch(i).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadBlob(i){return fetch(i).then(t=>t.blob()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}getElementTop(i,t){return 0}getElementLeft(i,t){return 0}getElementTopLeft(i,t){return{top:0,left:0}}loadFont(i,t,e){return wFt(this,void 0,void 0,function*(){return{loadState:"fail"}})}isMacOS(){return!1}copyToClipBoard(i){return Promise.resolve(null)}};wA=SFt([Rt()],wA);var AFt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},kFt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};let AA=class{constructor(){this._uid=on.GenAutoIncrementId(),this.viewBox=new Gi,this.modelMatrix=new di(1,0,0,1,0,0)}onChange(i){this._onChangeCb=i}configure(i,t){t.env===this.type&&i.setWindowHandler(this)}release(...i){this.releaseWindow()}isVisible(i){return!0}onVisibleChange(i){}getTopLeft(i){return{top:0,left:0}}setViewBox(i){this.viewBox.setValue(i.x1,i.y1,i.x2,i.y2)}getViewBox(){return this.viewBox}setViewBoxTransform(i,t,e,n,r,s){this.modelMatrix.setValue(i,t,e,n,r,s)}getViewBoxTransform(){return this.modelMatrix}};AA=AFt([Rt(),kFt("design:paramtypes",[])],AA);class CFt{constructor(t,e,n=.8){this.dir=t,this.color=e,this.colorRgb=Vi.Get(e,ts.Color1),this.ambient=n;const r=ro(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);this.formatedDir=[t[0]/r,t[1]/r,t[2]/r]}computeColor(t,e){const n=this.formatedDir,r=gn(Nn((t[0]*n[0]+t[1]*n[1]+t[2]*n[2])*(1-this.ambient/2),0)+this.ambient,1);let s;s=Ht(e)?Vi.Get(e,ts.Color1):e;const a=this.colorRgb;return`rgb(${a[0]*s[0]*r}, ${a[1]*s[1]*r}, ${a[2]*s[2]*r})`}}const FF=()=>{Va.registerPlugin("DirectionalLight",CFt)};class MFt{set params(t){this._params=Object.assign({},t),this._projectionMatrixCached=this.forceGetProjectionMatrix(),this._viewMatrixCached=this.forceGetViewMatrix()}get params(){return Object.assign({},this._params)}constructor(t){this.params=t}getViewMatrix(){return this._viewMatrixCached||(this._viewMatrixCached=Fi.allocate()),this._viewMatrixCached}forceGetViewMatrix(){this._viewMatrixCached||(this._viewMatrixCached=Fi.allocate());const{pos:t,center:e,up:n}=this.params.viewParams;return WLt(this._viewMatrixCached,t,e,n),this._vp||(this._vp=Fi.allocate()),this._vp=qd(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._viewMatrixCached}getProjectionMatrix(){return this._projectionMatrixCached||(this._projectionMatrixCached=Fi.allocate()),this._projectionMatrixCached}forceGetProjectionMatrix(){this._projectionMatrixCached||(this._projectionMatrixCached=Fi.allocate());const{left:t,top:e,right:n,bottom:r}=this._params;return $Lt(this._projectionMatrixCached,t,n,r,e,0,-2e6),this._vp||(this._vp=Fi.allocate()),this._vp=qd(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._projectionMatrixCached}getField(){const{fieldRatio:t=.8,fieldDepth:e,left:n,right:r}=this._params;return(e??r-n)*t}getProjectionScale(t){const e=this.getField();return e/(e+t)}view(t,e,n){const r=[0,0,0];return sa(r,[t,e,n],this._viewMatrixCached),r}vp(t,e,n){const r=[0,0,0],{pos:s}=this._params.viewParams;sa(r,[t,e,n],this._viewMatrixCached),t=r[0],e=r[1],n=r[2];const a=this.getProjectionScale(n);return{x:t*a+s[0],y:e*a+s[1]}}}const zF=()=>{Va.registerPlugin("OrthoCamera",MFt)};var TFt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},PFt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},kS=function(i,t){return function(e,n){t(e,n,i)}};let oI=class{constructor(i,t){this.pickItemInterceptorContributions=i,this.pickServiceInterceptorContributions=t,this.type="default",this.global=vt.global}reInit(){this._init()}_init(){this.InterceptorContributions=this.pickItemInterceptorContributions.getContributions().sort((i,t)=>i.order-t.order),this.pickerServiceInterceptorContributions=this.pickServiceInterceptorContributions.getContributions().sort((i,t)=>i.order-t.order)}pick(i,t,e){let n={graphic:null,group:null};e.pickerService=this;const r=e.bounds.width(),s=e.bounds.height();if(!new Gi().setValue(0,0,r,s).containsPoint(t))return n;this.pickContext&&(this.pickContext.inuse=!0),e.pickContext=this.pickContext,this.pickContext&&this.pickContext.clearMatrix(!0,1);const a=new di(1,0,0,1,0,0);let o;for(let l=i.length-1;l>=0&&(n=i[l].isContainer?this.pickGroup(i[l],t,a,e):this.pickItem(i[l],t,a,e),!n.graphic);l--)o||(o=n.group);if(n.graphic||(n.group=o),this.pickContext&&(this.pickContext.inuse=!1),this.pickerServiceInterceptorContributions.length)for(let l=0;l<this.pickerServiceInterceptorContributions.length;l++){const u=this.pickerServiceInterceptorContributions[l];u.afterPickItem&&(n=u.afterPickItem(n,this,t,e,{parentMatrix:a}))}return n}containsPoint(i,t,e){var n;return!!(!((n=this.pickItem(i,t,null,e??{pickContext:this.pickContext,pickerService:this}))===null||n===void 0)&&n.graphic)}pickGroup(i,t,e,n){let r={group:null,graphic:null};if(i.attribute.visibleAll===!1)return r;const s=n.pickContext,a=s.modelMatrix;if(s.camera){const f=i.transMatrix,p=Fi.allocate();if(PD(p,f),a){if(p){const g=Fi.allocate();s.modelMatrix=qd(g,a,p),Fi.free(p)}}else PD(p,i.globalTransMatrix),s.modelMatrix=p}if(this.InterceptorContributions.length)for(let f=0;f<this.InterceptorContributions.length;f++){const p=this.InterceptorContributions[f];if(p.beforePickItem){const g=p.beforePickItem(i,this,t,n,{parentMatrix:e});if(g)return s.modelMatrix!==a&&Fi.free(s.modelMatrix),s.modelMatrix=a,g}}const o=i.transMatrix,l=wr.allocateByObj(e),u=new ci(t.x,t.y);l.transformPoint(u,u);const c=i.AABBBounds.containsPoint(u);if(!c&&!i.stage.camera)return r;const h=this.pickItem(i,u.clone(),e,n);h&&h.graphic&&(r.graphic=h.graphic,r.params=h.params);const d=i.attribute.pickable!==!1&&c;return l.multiply(o.a,o.b,o.c,o.d,o.e,o.f),i.attribute.childrenPickable===!1||h&&h.graphic||Fet(i,Ui.zIndex,f=>{if(f.isContainer){const p=new ci(t.x,t.y),g=le(i).group,{scrollX:m=g.scrollX,scrollY:_=g.scrollY}=i.attribute;p.x-=m,p.y-=_,r=this.pickGroup(f,p,l,n)}else{const p=new ci(t.x,t.y);l.transformPoint(p,p);const g=le(i).group,{scrollX:m=g.scrollX,scrollY:_=g.scrollY}=i.attribute;p.x-=m,p.y-=_;const v=this.pickItem(f,p,e,n);v&&v.graphic&&(r.graphic=v.graphic,r.params=v.params)}return!!r.graphic||!!r.group},!0,!!s.camera),s.modelMatrix!==a&&Fi.free(s.modelMatrix),s.modelMatrix=a,r.graphic||r.group||!d||i.stage.camera||(r.group=i),wr.free(l),r}selectPicker(i){return this.pickerMap.get(i.numberType)||null}};oI=TFt([Rt(),kS(0,ge(_n)),kS(0,jn(Pp)),kS(1,ge(_n)),kS(1,jn(fA)),PFt("design:paramtypes",[Object,Object])],oI);function EFt(i,t){let e,n,r=i[0].x,s=i[0].y;const a=[i[0]];for(let o=1,l=i.length;o<l;o++)e=i[o].x-r,n=i[o].y-s,e*e+n*n>t&&(r=i[o].x,s=i[o].y,a.push(i[o]));return i[i.length-1].x===r&&i[i.length-1].y===s||a.push(i[i.length-1]),a}function RFt(i,t,e){return i.length<=10?i:i=EFt(i,t!==void 0?t*t:1)}function OFt(i,t,e){const n={};for(const r in t)r in i&&Ne(i[r],t[r])||(n[r]=t[r]);return n}function E5(i,t,e,n,r,s){const a=(t-i)*r+i,o=(e-t)*r+t,l=(n-e)*r+e,u=(o-a)*r+a,c=(l-o)*r+o,h=(c-u)*r+u;s[0]=i,s[1]=a,s[2]=u,s[3]=h,s[4]=h,s[5]=c,s[6]=l,s[7]=n}function DFt(i,t){const e=i.length,n=t.length;if(e===n)return[i,t];const r=[],s=[],a=e<n?i:t,o=Math.min(e,n),l=Math.abs(n-e)/6,u=(o-2)/6,c=Math.ceil(l/u),h=[a[0],a[1]];let d=l;for(let f=2;f<o;f+=6){let p=a[f-2],g=a[f-1],m=a[f],_=a[f+1],v=a[f+2],y=a[f+3];const b=a[f+4],x=a[f+5];if(d<=0){h.push(m,_,v,y,b,x);continue}const S=Math.min(d,c)+1;for(let w=1;w<=S;w++){const A=w/S;E5(p,m,v,b,A,r),E5(g,_,y,x,A,s),p=r[3],g=s[3],h.push(r[1],s[1],r[2],s[2],p,g),m=r[5],_=s[5],v=r[6],y=s[6]}d-=S-1}return a===i?[h,t]:[i,h]}function R5(i,t){const e=i||t,n=e.length,r=e[n-2],s=e[n-1],a=[];for(let o=0;o<t.length;o+=2)a[o]=r,a[o+1]=s;return a}function IFt(i){const t=[],e=i.length;for(let n=0;n<e;n+=2)t[n]=i[e-n-2],t[n+1]=i[e-n-1];return t}function O5(i){let t=0,e=0,n=0;const r=i.length;for(let s=0,a=r-2;s<r;a=s,s+=2){const o=i[a],l=i[a+1],u=i[s],c=i[s+1],h=o*c-u*l;t+=h,e+=(o+u)*h,n+=(l+c)*h}return t===0?[i[0]||0,i[1]||0,0]:[e/t/3,n/t/3,t]}function LFt(i,t,e,n){const r=(i.length-2)/6;let s=1/0,a=0;const o=i.length,l=o-2;for(let u=0;u<r;u++){const c=6*u;let h=0;for(let d=0;d<o;d+=2){const f=d===0?c:(c+d-2)%l+2,p=i[f]-e[0],g=i[f+1]-e[1],m=t[d]-n[0]-p,_=t[d+1]-n[1]-g;h+=m*m+_*_}h<s&&(s=h,a=u)}return a}function BFt(i,t,e,n){const r=[];let s;for(let a=0;a<i.length;a++){let o=i[a];const l=t[a],u=O5(o),c=O5(l);s==null&&(s=u[2]<0!=c[2]<0);const h=[],d=[];let f=0,p=1/0;const g=[],m=o.length;s&&(o=IFt(o));const _=6*LFt(o,l,u,c),v=m-2;for(let y=0;y<v;y+=2){const b=(_+y)%v+2;h[y+2]=o[b]-u[0],h[y+3]=o[b+1]-u[1]}if(h[0]=o[_]-u[0],h[1]=o[_+1]-u[1],e>0){const y=n/e;for(let b=-n/2;b<=n/2;b+=y){const x=Math.sin(b),S=Math.cos(b);let w=0;for(let A=0;A<o.length;A+=2){const k=h[A],C=h[A+1],M=l[A]-c[0],R=l[A+1]-c[1],P=M*S-R*x,O=M*x+R*S;g[A]=P,g[A+1]=O;const T=P-k,D=O-C;w+=T*T+D*D}if(w<p){p=w,f=b;for(let A=0;A<g.length;A++)d[A]=g[A]}}}r.push({from:h,to:d,fromCp:u,toCp:c,rotation:-f})}return r}function FFt(i,t){let e,n;const r=[],s=[];for(let a=0;a<Math.max(i.length,t.length);a++){const o=i[a],l=t[a];let u,c;o?l?([u,c]=DFt(o,l),e=u,n=c):(c=R5(n,o),u=o):(u=R5(e,l),c=l),r.push(u),s.push(c)}return[r,s]}function lI(i){const t=new Ki,e=i.toString();if(!e)return[];t.fromString(e);const n=t.tryBuildCurves();if(!n||n.length===0)return[];const r=[];let s=null;s=[];let a=0,o=0,l=0,u=0,c=!0;for(let d=0;d<n.length;d++){const f=n[d];if(c&&(a=f.p0.x,o=f.p0.y,l=a,u=o,s=[a,o],r.push(s),c=!1),f.p1&&f.p2&&f.p3)s.push(f.p1.x,f.p1.y,f.p2.x,f.p2.y,f.p3.x,f.p3.y),l=f.p3.x,u=f.p3.y;else if(f.p1&&f.p2){const p=f.p1.x,g=f.p1.y,m=f.p2.x,_=f.p2.y;s.push(l+2/3*(p-l),u+2/3*(g-u),m+2/3*(p-m),_+2/3*(g-_),m,_),l=m,u=_}else if(f.p1){const p=f.p1.x,g=f.p1.y;Math.abs(l-p)<1e-10&&Math.abs(u-g)<1e-10||s.push(l,u,p,g,p,g),l=p,u=g}if(d===n.length-1&&Math.abs(l-a)<1e-10&&Math.abs(u-o)<1e-10,d<n.length-1){const p=n[d+1];(Math.abs(l-p.p0.x)>1e-10||Math.abs(u-p.p0.y)>1e-10)&&(c=!0)}}const h=r.filter(d=>d.length>2);return h.length===1?[h[0]]:h}function D5(i,t){for(let e=0;e<i.length;e++){const n=i[e];for(let r=0;r<n.length;r+=2){const s=n[r],a=n[r+1],o={x:s,y:a};t.transformPoint({x:s,y:a},o),n[r]=o.x,n[r+1]=o.y}}}function zFt(i){const t=new Ki;for(let e=0;e<i.length;e++){const n=i[e];if(n.length>2){t.moveTo(n[0],n[1]);for(let r=2;r<n.length;r+=6)t.bezierCurveTo(n[r],n[r+1],n[r+2],n[r+3],n[r+4],n[r+5])}}return t}function NF(i,t,e){const n=i/t;let r,s;i>=t?(s=Math.ceil(Math.sqrt(e*n)),r=Math.floor(e/s),r===0&&(r=1,s=e)):(r=Math.ceil(Math.sqrt(e/n)),s=Math.floor(e/r),s===0&&(s=1,r=e));const a=[];for(let l=0;l<r;l++)a.push(s);const o=e-r*s;if(o>0)for(let l=0;l<o;l+=s)l+s<o?a.push(s):a.push(o-l);return a}const NFt=(i,t)=>{const{width:e,height:n}=xet(i.attribute),r=NF(e,n,t),s=[],a=n/r.length;for(let o=0,l=r.length;o<l;o++){const u=r[o],c=e/u;for(let h=0;h<u;h++)s.push({x:0+h*c,y:0+o*a,width:c,height:a})}return s},jFt=(i,t)=>{const e=i.getParsedAngle(),n=e.startAngle,r=e.endAngle,s=i.getComputedAttribute("innerRadius"),a=i.getComputedAttribute("outerRadius"),o=Math.abs(n-r),l=Math.abs(a-s),u=NF(o*(s+a)/2,l,t),c=[],h=l/u.length,d=a>=s?1:-1,f=r>=n?1:-1;for(let p=0,g=u.length;p<g;p++){const m=u[p],_=o/m;for(let v=0;v<m;v++)c.push({innerRadius:a-h*p*d,outerRadius:a-h*(p+1)*d,startAngle:n+_*v*f,endAngle:n+_*(v+1)*f})}return c},HFt=(i,t)=>{const e=i.getComputedAttribute("startAngle"),n=i.getComputedAttribute("endAngle"),r=i.getComputedAttribute("radius"),s=Math.abs(e-n),a=NF(s*r,r,t),o=[],l=s/a[0],u=r/a.length,c=n>=e?1:-1;for(let h=0,d=a.length;h<d;h++)for(let f=0,p=a[h];f<p;f++)o.push({innerRadius:u*h,outerRadius:u*(h+1),startAngle:e+l*f*c,endAngle:e+l*(f+1)*c});return o},I5=(i,t)=>{const e=i.filter(o=>o.defined!==!1&&yt(o.x)&&yt(o.y));if(e.length===0)return[];if(e.length===1)return new Array(t).fill(0).map(o=>e[0]);const n=[];if(t<=e.length){const o=e.length/t;let l=0,u=0;for(;l<t;)n.push(e[Math.floor(u)]),u+=o,l++;return n}const r=t-e.length,s=1/(r/(e.length-1)+1);let a=0;for(let o=0,l=i.length;o<l;o++)if(n.push(i[o]),o<l-1){let u=s;const c=i[o].x,h=i[o].y,d=i[o+1].x,f=i[o+1].y;for(;u<1&&a<r;)n.push({x:c+(d-c)*u,y:h+(f-h)*u}),u+=s,a+=1}return n},VFt=(i,t)=>{var e,n;const r=i.attribute;let s=r.points;const a=r.segments;s||(s=a.reduce((c,h)=>{var d;return c.concat((d=h.points)!==null&&d!==void 0?d:[])},[]));const o=s.filter(c=>c.defined!==!1&&yt(c.x)&&yt(c.y));if(!o.length)return[];const l=[];o.forEach(c=>{l.push({x:c.x,y:c.y})});for(let c=o.length-1;c>=0;c--){const h=o[c];l.push({x:(e=h.x1)!==null&&e!==void 0?e:h.x,y:(n=h.y1)!==null&&n!==void 0?n:h.y})}const u=[];return _0(l,t,u),u},WFt=(i,t)=>{const e=i.attribute,n=e.points;if(n)return I5(n,t);if(e.segments){const r=e.segments.reduce((s,a)=>{var o;return s.concat((o=a.points)!==null&&o!==void 0?o:[])},[]);return I5(r,t)}return[]};function $Ft(i,t){return i[0]*t[1]-i[1]*t[0]}const uI=i=>i.map(t=>({x:t.x,y:t.y})),L5=(i,t,e)=>{const n=i.length,r=[];for(let h=0;h<n;h++){const d=i[h],f=h===n-1?i[0]:i[h+1],p=_J([t.x,t.y],[e.x,e.y],[d.x,d.y],[f.x,f.y]);p&&typeof p!="boolean"&&r.push({dot:$Ft([p[0]-t.x,p[1]-t.x],[e.x-t.x,e.y-t.x]),point:{x:p[0],y:p[1]},edgeIndex:h})}if(r.length<2)return[uI(i),uI(i)];r.sort((h,d)=>h.dot-d.dot);let s=r[0],a=r[r.length-1];s.edgeIndex>a.edgeIndex&&([s,a]=[a,s]);const o=s.point,l=a.point,u=[{x:o.x,y:o.y}];for(let h=s.edgeIndex+1;h<=a.edgeIndex;h++)u.push({x:i[h].x,y:i[h].y});u.push({x:l.x,y:l.y});const c=[{x:l.x,y:l.y}];for(let h=a.edgeIndex+1,d=s.edgeIndex+n;h<=d;h++){const f=i[h%n];c.push({x:f.x,y:f.y})}return c.push({x:o.x,y:o.y}),[u,c]},UFt=i=>{const t=new ir;i.forEach(s=>{t.add(s.x,s.y)});const e=t.width(),n=t.height();if(e>=n){const s=t.x1+e/2;return L5(i,{x:s,y:t.y1},{x:s,y:t.y2})}const r=t.y1+n/2;return L5(i,{x:t.x1,y:r},{x:t.x2,y:r})},_0=(i,t,e)=>{if(t===1)e.push({points:i});else{const n=Math.floor(t/2),r=UFt(i);_0(r[0],n,e),_0(r[1],t-n,e)}},GFt=(i,t)=>{const e=i.attribute.points;if(!e||!e.length)return[];if(t===1)return[{points:uI(e)}];const n=[];return _0(e,t,n),n},YFt=(i,t)=>{const e=i.getParsedPathShape(),n=lI(e);if(!n.length||t<0)return[];const r=n.length;if(n.length>=t){const l=[],u=Math.floor(n.length/t);for(let c=0;c<t;c++){const h=n.slice(c*u,c===t-1?r:(c+1)*u);l.push({path:zFt(h)})}return l}const s=[],a=Math.floor(t/r);let o=t;for(let l=0;l<r;l++){const u=[];for(let c=2,h=n[l].length;c<h;c+=2)u.push({x:n[0][c],y:n[0][c+1]});_0(u,l===r-1?o:a,s),o-=a}return s};let B5=!1;const XFt=new re(i=>{B5||(B5=!0,i(Kw).toSelf().inSingletonScope(),i(iA).to(Kw).inSingletonScope(),i(dr).toService(iA),i(ID).toService(uo),Sr(i,ID))});let F5=!1;const KFt=new re(i=>{F5||(F5=!0,i(Jw).toSelf().inSingletonScope(),i(lA).to(Jw).inSingletonScope(),i(dr).toService(lA),i(Xw).toSelf(),i(Yw).toSelf(),i(iv).toService(Xw),i(iv).toService(Yw),i(iv).toService(uo),Sr(i,iv))});let z5=!1;const qFt=new re(i=>{z5||(z5=!0,i(g0).toSelf().inSingletonScope(),i(bA).toSelf().inSingletonScope(),i(sA).to(g0).inSingletonScope(),i(dr).toService(sA))});let N5=!1;const ZFt=new re(i=>{N5||(N5=!0,i(m0).toSelf().inSingletonScope(),i(nA).to(m0).inSingletonScope(),i(dr).toService(nA),i(LD).toService(uo),Sr(i,LD),i(xA).toSelf().inSingletonScope())});let j5=!1;const QFt=new re(i=>{j5||(j5=!0,i(tA).toSelf().inSingletonScope(),i(uA).to(tA).inSingletonScope(),i(dr).toService(uA),i(jD).toService(uo),Sr(i,jD))});let H5=!1;const JFt=new re(i=>{H5||(H5=!0,i(qw).toSelf().inSingletonScope(),i(rA).to(qw).inSingletonScope(),i(dr).toService(rA),i(BD).toService(uo),Sr(i,BD))});let V5=!1;const tzt=new re(i=>{V5||(V5=!0,i(JD).to(YD).inSingletonScope(),i(dr).toService(JD),i(HD).toService(uo),Sr(i,HD))});let W5=!1;const ezt=new re(i=>{W5||(W5=!0,i(Qw).toSelf().inSingletonScope(),i(aA).to(Qw).inSingletonScope(),i(dr).toService(aA),i(zD).toService(uo),Sr(i,zD))});let $5=!1;const izt=new re(i=>{$5||($5=!0,i(oA).to(XD).inSingletonScope(),i(dr).toService(oA),i(ND).toService(uo),Sr(i,ND))});var nzt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let cI=class{constructor(){this.numberType=fF}reInit(){}drawShape(i,t,e,n,r,s,a,o){r.drawContribution&&i.getSubGraphic().forEach(l=>{const u=r.drawContribution.getRenderContribution(l);u&&u.drawShape&&u.drawShape(l,t,e,n,r,s,a,o)})}draw(i,t,e,n){const{context:r}=e;if(!r||(r.highPerformanceSave(),!e.drawContribution))return;const s=le(i),a=i.getSubGraphic();a.length&&a.forEach(o=>{e.drawContribution.renderItem(o,e,{theme:s})}),r.highPerformanceRestore()}};cI=nzt([Rt()],cI);let U5=!1;const rzt=new re(i=>{U5||(U5=!0,i(cA).to(cI).inSingletonScope(),i(dr).toService(cA))});var szt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},azt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};let hI=class extends ks{constructor(){super(),this.numberType=vF,this.builtinContributions=[Ret],this.init()}drawShape(i,t,e,n,r){const s=le(i).richtext,{strokeOpacity:a=s.strokeOpacity,opacity:o=s.opacity,fillOpacity:l=s.fillOpacity,visible:u=s.visible}=i.attribute;if(!i.valid||!u)return;const c=Qd(o,l,!0),h=Qd(o,a,!0);c&&(t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,s),t.translate(e,n),this.beforeRenderStep(i,t,e,n,c,h,c,h,s,r),i.getFrameCache().draw(t,this.drawIcon),this.afterRenderStep(i,t,e,n,c,h,c,h,s,r))}drawIcon(i,t,e,n,r){var s;const a=le(i).richtextIcon,{width:o=a.width,height:l=a.height,opacity:u=a.opacity,image:c,backgroundFill:h=a.backgroundFill,backgroundFillOpacity:d=a.backgroundFillOpacity,backgroundStroke:f=a.backgroundStroke,backgroundStrokeOpacity:p=a.backgroundStrokeOpacity,backgroundRadius:g=a.backgroundRadius,margin:m}=i.attribute,{backgroundWidth:_=o,backgroundHeight:v=l}=i.attribute;if(m&&(e+=i._marginArray[3],n+=i._marginArray[0]),i._hovered){const b=(_-o)/2,x=(v-l)/2;g===0?(t.beginPath(),t.rect(e-b,n-x,_,v)):(t.beginPath(),vf(t,e-b,n-x,_,v,g,!0)),h&&(t.globalAlpha=d,t.fillStyle=h,t.fill()),f&&(t.globalAlpha=p,t.strokeStyle=f,t.stroke())}const y=c&&((s=i?.resources)===null||s===void 0?void 0:s.get(c));y&&y.state==="success"&&(t.globalAlpha=u,t.drawImage(y.data,e,n,o,l))}draw(i,t,e){const n=le(i).richtext;this._draw(i,n,!1,e)}};hI=szt([Rt(),azt("design:paramtypes",[])],hI);let G5=!1;const ozt=new re(i=>{G5||(G5=!0,i(tI).to(hI).inSingletonScope(),i(dr).toService(tI))});let Y5=!1;const lzt=new re(i=>{Y5||(Y5=!0,i(iI).to(qD).inSingletonScope(),i(dr).toService(iI),i(FD).toService(uo),Sr(i,FD))});class zet extends ks{stroke(t,e,n,r,s){const a=r.vertices;r.edges.forEach(o=>{const l=a[o[0]],u={x:t+l[0],y:e+l[1],z:n+l[2]},c=a[o[1]],h={x:t+c[0],y:e+c[1],z:n+c[2]};s.beginPath(),s.moveTo(u.x,u.y,u.z),s.lineTo(h.x,h.y,h.z),s.stroke()})}fill(t,e,n,r,s,a,o,l,u,c,h){const d=Vi.Get(a,ts.Color255),f=r.vertices,p=f.map(m=>o.view(m[0],m[1],m[2])[2]),g=[];r.polygons.forEach((m,_)=>{if(s&&!s[_])return;g.push({faceIdx:_,polygon:m});const{polygon:v}=m,y=p[v[0]],b=p[v[1]],x=p[v[2]],S=p[v[3]];m.ave_z=y+b+x+S}),g.sort((m,_)=>_.polygon.ave_z-m.polygon.ave_z),g.forEach(m=>{const{polygon:_,normal:v}=m.polygon,y=f[_[0]],b=f[_[1]],x=f[_[2]],S=f[_[3]],w={x:t+y[0],y:e+y[1],z:n+y[2]},A={x:t+b[0],y:e+b[1],z:n+b[2]},k={x:t+x[0],y:e+x[1],z:n+x[2]},C={x:t+S[0],y:e+S[1],z:n+S[2]};o.beginPath(),o.moveTo(w.x,w.y,w.z),o.lineTo(A.x,A.y,A.z),o.lineTo(k.x,k.y,k.z),o.lineTo(C.x,C.y,C.z),o.closePath(),h?h(o,u&&u.attribute,c):(o.fillStyle=l?l.computeColor(v,d):a,o.fill())})}}var uzt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let dI=class extends zet{constructor(){super(...arguments),this.type="rect3d",this.numberType=_F}drawShape(i,t,e,n,r,s,a,o){var l,u;const c=le(i,s?.theme).rect,{fill:h=c.fill,stroke:d=c.stroke,x1:f,y1:p,x:g,y:m,opacity:_=c.opacity,fillOpacity:v=c.fillOpacity,lineWidth:y=c.lineWidth,strokeOpacity:b=c.strokeOpacity,visible:x=c.visible,drawStrokeWhenZeroWH:S=(l=c.drawStrokeWhenZeroWH)!==null&&l!==void 0&&l}=i.attribute;let{width:w,height:A}=i.attribute;w=(w??f-g)||0,A=(A??p-m)||0;const k=(u=this.z)!==null&&u!==void 0?u:0,C=kF(_,v,w,A,h),M=CF(_,b,w,A,S),R=Zd(h),P=Gg(d,y);if(!i.valid||!x||!R&&!P||!(C||M||a||o))return;const{light:O}=r.stage||{},T=i.findFace();if(h!==!1){t.setCommonStyle(i,i.attribute,e,n,c);let D=h;typeof D!="string"&&(D="black"),this.fill(e,n,k,T,null,D,t,O,null,null,a)}d!==!1&&(t.setStrokeStyle(i,i.attribute,e,n,c),this.stroke(e,n,k,T,t))}draw(i,t,e){const n=le(i).rect;this._draw(i,n,!1,e)}};dI=uzt([Rt()],dI);let X5=!1;const czt=new re(i=>{X5||(X5=!0,i(QD).to(dI).inSingletonScope(),i(dr).toService(QD))});var hzt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};function dzt(i,t,e,n,r,s,a){const{startAngle:o,endAngle:l}=i.getParsedAngle(),u=xe(l-o),c=l>o;let h=!1;if(s<a){const d=s;s=a,a=d}if(s<=Ye)t.moveTo(e,n,r);else if(u>=qt-Ye)t.moveTo(e+s*Ri(o),n+s*fi(o),r),t.arc(e,n,s,o,l,!c,r),a>Ye&&(t.moveTo(e+a*Ri(l),n+a*fi(l),r),t.arc(e,n,a,l,o,c,r));else{const{outerDeltaAngle:d,innerDeltaAngle:f,outerStartAngle:p,outerEndAngle:g,innerEndAngle:m,innerStartAngle:_}=i.getParsePadAngle(o,l),v=s*Ri(p),y=s*fi(p),b=a*Ri(m),x=a*fi(m);d<.001?h=!0:(t.moveTo(e+v,n+y,r),t.arc(e,n,s,p,g,!c,r)),!(a>Ye)||f<.001?(t.lineTo(e+b,n+x,r),h=!0):(t.lineTo(e+b,n+x,r),t.arc(e,n,a,m,_,c,r))}return t.closePath(),h}function fzt(i,t,e,n,r,s,a,o){const{startAngle:l,endAngle:u}=i.getParsedAngle(),c=xe(u-l),h=u>l;let d=!1;if(a<=Ye)t.moveTo(e,n,r);else if(c>=qt-Ye)t.moveTo(e+a*Ri(l),n+a*fi(l),r),t.arc(e,n,a,l,u,!h,r),t.lineTo(e+a*Ri(u),n+a*fi(u),s),t.arc(e,n,a,u,l,h,s);else{const{innerouterDeltaAngle:f,innerouterStartAngle:p,innerouterEndAngle:g}=o(l,u),m=a*Ri(p),_=a*fi(p),v=a*Ri(g),y=a*fi(g);f<.001?d=!0:(t.moveTo(e+m,n+_,r),t.arc(e,n,a,p,g,!h,r),t.lineTo(e+v,n+y,s),t.arc(e,n,a,g,p,h,s))}return t.closePath(),d}let fI=class extends ks{constructor(){super(...arguments),this.numberType=yM}drawShape(i,t,e,n,r,s,a,o){var l;const u=le(i,s?.theme).arc,{fill:c=u.fill}=i.attribute,h=this.valid(i,u,a,o);if(!h)return;const{fVisible:d,sVisible:f,doFill:p,doStroke:g}=h,m=(l=this.z)!==null&&l!==void 0?l:0,{outerPadding:_=u.outerPadding,innerPadding:v=u.innerPadding,height:y=10}=i.attribute;let{outerRadius:b=u.outerRadius,innerRadius:x=u.innerRadius}=i.attribute;b+=_,x-=v;const S=Vi.Get(c,ts.Color255),{light:w}=r.stage||{},A=r.hack_pieFace,k={top:m,bottom:m+y},C={top:[0,1,0],bottom:[0,-1,0],outside:[1,0,-1],inside:[1,0,-1]};A==="bottom"||A==="top"?(t.beginPath(),dzt(i,t,e,n,k[A],b,x),t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,u),p&&(a?a(t,i.attribute,u):d&&(t.setCommonStyle(i,i.attribute,e,n,u),t.fillStyle=w?w.computeColor(C[A],S):c,t.fill())),g&&(o?o(t,i.attribute,u):f&&(t.setStrokeStyle(i,i.attribute,e,n,u),t.stroke()))):A!=="outside"&&A!=="inside"||(A==="inside"&&(t.save(),t.beginPath(),t.arc(e,n,x,0,qt,!0,k.top),t.clip()),t.beginPath(),fzt(i,t,e,n,k.top,k.bottom,A==="outside"?b:x,(M,R)=>{const{outerDeltaAngle:P,innerDeltaAngle:O,outerStartAngle:T,outerEndAngle:D,innerEndAngle:B,innerStartAngle:I}=i.getParsePadAngle(M,R);return A==="outside"?{innerouterDeltaAngle:P,innerouterEndAngle:D,innerouterStartAngle:T}:{innerouterDeltaAngle:O,innerouterEndAngle:B,innerouterStartAngle:I}}),t.setShadowBlendStyle&&t.setShadowBlendStyle(i,i.attribute,u),p&&(a?a(t,i.attribute,u):d&&(t.setCommonStyle(i,i.attribute,e,n,u),t.fillStyle=w?w.computeColor(C[A],S):c,t.fill())),g&&(o?o(t,i.attribute,u):f&&(t.setStrokeStyle(i,i.attribute,e,n,u),t.stroke())),A==="inside"&&t.restore())}draw(i,t,e,n){const r=le(i,n?.theme).arc;this._draw(i,r,!1,e,n)}};fI=hzt([Rt()],fI);let K5=!1;const pzt=new re(i=>{K5||(K5=!0,i(ZD).to(fI).inSingletonScope(),i(dr).toService(ZD))});var gzt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let pI=class extends zet{constructor(){super(...arguments),this.type="pyramid3d",this.numberType=gF}drawShape(i,t,e,n,r,s,a,o){var l;const u=le(i,s?.theme).polygon,{fill:c=u.fill,stroke:h=u.stroke,face:d=[!0,!0,!0,!0,!0,!0]}=i.attribute,f=(l=this.z)!==null&&l!==void 0?l:0;if(!this.valid(i,u,a,o))return;const{light:p}=r.stage||{},g=i.findFace();if(c!==!1){t.setCommonStyle(i,i.attribute,e,n,u);let m=c;typeof m!="string"&&(m="black"),this.fill(e,n,f,g,d,m,t,p,i,u,a)}h!==!1&&(t.setStrokeStyle(i,i.attribute,e,n,u),this.stroke(e,n,f,g,t))}draw(i,t,e){const n=le(i).polygon;this._draw(i,n,!1,e)}};pI=gzt([Rt()],pI);let q5=!1;const mzt=new re(i=>{q5||(q5=!0,i(eI).to(pI).inSingletonScope(),i(dr).toService(eI))});function _zt(){Mt.RegisterGraphicCreator("arc",DF)}function vzt(){Mt.RegisterGraphicCreator("arc3d",ket)}function yzt(){Mt.RegisterGraphicCreator("area",OF)}function bzt(){Mt.RegisterGraphicCreator("circle",g2t)}function xzt(){Mt.RegisterGraphicCreator("glyph",TF)}function Szt(){Mt.RegisterGraphicCreator("group",Uw)}function wzt(){Mt.RegisterGraphicCreator("image",PF)}function Azt(){Mt.RegisterGraphicCreator("line",Fb)}function kzt(){Mt.RegisterGraphicCreator("path",RF)}function Czt(){Mt.RegisterGraphicCreator("polygon",Cet)}function Mzt(){Mt.RegisterGraphicCreator("pyramid3d",Met)}function Tzt(){Mt.RegisterGraphicCreator("rect",_f)}function Pzt(){Mt.RegisterGraphicCreator("rect3d",wet)}function Ezt(){Mt.RegisterGraphicCreator("richtext",EF)}function Rzt(){Mt.RegisterGraphicCreator("symbol",mf)}function Ozt(){Mt.RegisterGraphicCreator("text",Bb)}function Dzt(){Mt.RegisterGraphicCreator("shadowRoot",S2t)}class Net{constructor(){this.name="HtmlAttributePlugin",this.activeEvent="onRegister",this._uid=on.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={},this.renderId=0,this.onWheel=t=>{try{const e=new t.constructor(t.type,t);this.pluginService.stage.window.getContext().getCanvas().nativeCanvas.dispatchEvent(e)}catch{return}}}activate(t){this.pluginService=t,t.stage.hooks.afterRender.tap(this.key,e=>{e&&e===this.pluginService.stage&&this.drawHTML([...t.stage.getChildren()])})}deactivate(t){t.stage.hooks.afterRender.taps=t.stage.hooks.afterRender.taps.filter(e=>e.name!==this.key),this.release()}getWrapContainer(t,e,n){let r;return r=e?typeof e=="string"?vt.global.getElementById(e):e:t.window.getContainer(),{wrapContainer:vt.global.createDom(Object.assign({tagName:"div",parent:r},n)),nativeContainer:r}}parseDefaultStyleFromGraphic(t){const e=t.type==="text"&&t.attribute?t.attribute:le(t).text;return c2t(e)}getTransformOfText(t){const e=le(t).text,{textAlign:n=e.textAlign,textBaseline:r=e.textBaseline}=t.attribute,s=t.globalTransMatrix.toTransformAttrs(),{rotateDeg:a,scaleX:o,scaleY:l}=s,u={left:"0",start:"0",end:"-100%",center:"-50%",right:"-100%",top:"0",middle:"-50%",bottom:"-100%",alphabetic:"-79%"},c={left:"0",start:"0",end:"100%",center:"50%",right:"100%",top:"0",middle:"50%",bottom:"100%",alphabetic:"79%"};return{textAlign:n,transform:`translate(${u[n]},${u[r]}) rotate(${a}deg) scaleX(${o}) scaleY(${l})`,transformOrigin:`${c[n]} ${c[r]}`}}updateStyleOfWrapContainer(t,e,n,r,s){const{pointerEvents:a,penetrateEventList:o=[]}=s;let l=this.parseDefaultStyleFromGraphic(t);l.display=t.attribute.visible!==!1?"block":"none",l.pointerEvents=a===!0?"all":a||"none",l.pointerEvents!=="none"&&(this.removeWrapContainerEventListener(n),o.forEach(v=>{v==="wheel"&&n.addEventListener("wheel",this.onWheel)})),n.style.position||(n.style.position="absolute",r.style.position="relative");let u=0,c=0;const h=t.globalAABBBounds;let d=s.anchorType;if(N(d)&&(d=t.type==="text"?"position":"boundsLeftTop"),d==="boundsLeftTop"&&(d="top-left"),d==="position"||h.empty()){const v=t.globalTransMatrix;u=v.e,c=v.f}else{const v=bJ(h,d);u=v.x,c=v.y}const f=vt.global.getElementTopLeft(r,!1),p=e.window.getTopLeft(!1),g=e.viewBox,m=u+p.left-f.left+g.x1,_=c+p.top-f.top+g.y1;if(l.left=`${m}px`,l.top=`${_}px`,t.type==="text"&&d==="position"&&(l=Object.assign(Object.assign({},l),this.getTransformOfText(t))),it(s.style)){const v=s.style({top:_,left:m,width:h.width(),height:h.height()},t,n);v&&(l=Object.assign(Object.assign({},l),v))}else ee(s.style)?l=Object.assign(Object.assign({},l),s.style):Ht(s.style)&&s.style&&(l=Object.assign(Object.assign({},l),mEt(s.style)));vt.global.updateDom(n,{width:s.width,height:s.height,style:l})}clearCacheContainer(){this.htmlMap&&Object.keys(this.htmlMap).forEach(t=>{this.htmlMap[t]&&this.htmlMap[t].renderId!==this.renderId&&this.removeElement(t)}),this.renderId+=1}drawHTML(t){vt.global.env==="browser"&&(t.sort((e,n)=>{var r,s;return((r=e.attribute.zIndex)!==null&&r!==void 0?r:Ui.zIndex)-((s=n.attribute.zIndex)!==null&&s!==void 0?s:Ui.zIndex)}).forEach(e=>{this.renderGroupHTML(e)}),this.clearCacheContainer())}renderGroupHTML(t){this.renderGraphicHTML(t),t.forEachChildren(e=>{e.isContainer?this.renderGroupHTML(e):this.renderGraphicHTML(e)})}removeElement(t){if(!this.htmlMap||!this.htmlMap[t])return;const{wrapContainer:e}=this.htmlMap[t];e&&vt.global.removeDom(e),this.htmlMap[t]=null}removeWrapContainerEventListener(t){t.removeEventListener("wheel",this.onWheel)}renderGraphicHTML(t){var e;const{html:n}=t.attribute;if(!n)return;const r=t.stage;if(!r)return;const{dom:s,container:a}=n;if(!s)return;const o=N(n.id)?`${(e=t.id)!==null&&e!==void 0?e:t._uid}_react`:n.id;if(this.htmlMap&&this.htmlMap[o]&&a&&a!==this.htmlMap[o].container&&this.removeElement(o),this.htmlMap&&this.htmlMap[o])typeof s=="string"?this.htmlMap[o].wrapContainer.innerHTML=s:s!==this.htmlMap[o].wrapContainer.firstChild&&(this.htmlMap[o].wrapContainer.removeChild(this.htmlMap[o].wrapContainer.firstChild),this.htmlMap[o].wrapContainer.appendChild(s));else{const{wrapContainer:c,nativeContainer:h}=this.getWrapContainer(r,a);c&&(typeof s=="string"?c.innerHTML=s:c.appendChild(s),this.htmlMap||(this.htmlMap={}),this.htmlMap[o]={wrapContainer:c,nativeContainer:h,container:a,renderId:this.renderId})}if(!this.htmlMap||!this.htmlMap[o])return;const{wrapContainer:l,nativeContainer:u}=this.htmlMap[o];this.updateStyleOfWrapContainer(t,r,l,u,n),this.htmlMap[o].renderId=this.renderId}release(){vt.global.env==="browser"&&this.removeAllDom(this.pluginService.stage.defaultLayer)}removeAllDom(t){this.htmlMap&&(Object.keys(this.htmlMap).forEach(e=>{this.removeElement(e)}),this.htmlMap=null)}}const Izt=()=>{Va.registerPlugin("HtmlAttributePlugin",Net)};class Lzt extends Net{constructor(){super(...arguments),this.name="ReactAttributePlugin",this.activeEvent="onRegister",this._uid=on.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={}}removeElement(t){if(!this.htmlMap||!this.htmlMap[t])return;const{root:e,wrapContainer:n,unmount:r}=this.htmlMap[t];e?vt.global.getRequestAnimationFrame()(()=>{e.unmount()}):r&&r(),n&&vt.global.removeDom(n),this.htmlMap[t]=null}renderGraphicHTML(t){var e;const{react:n}=t.attribute;if(!n)return;const r=t.stage;if(!r)return;const s=r.params.ReactDOM,{element:a,container:o}=n;if(!a||!s||!s.createRoot&&!s.render)return;const l=N(n.id)?`${(e=t.id)!==null&&e!==void 0?e:t._uid}_react`:n.id;if(this.htmlMap&&this.htmlMap[l]&&o&&o!==this.htmlMap[l].container&&this.removeElement(l),this.htmlMap&&this.htmlMap[l])s.createRoot?this.htmlMap[l].root.render(a):s.render(a,this.htmlMap[l].wrapContainer);else{const{wrapContainer:h,nativeContainer:d}=this.getWrapContainer(r,o);if(h)if(this.htmlMap||(this.htmlMap={}),s.createRoot){const f=s.createRoot(h);f.render(a),this.htmlMap[l]={root:f,wrapContainer:h,nativeContainer:d,container:o,renderId:this.renderId}}else s.render(a,h),this.htmlMap[l]={wrapContainer:h,nativeContainer:d,container:o,renderId:this.renderId,unmount:()=>{s.unmountComponentAtNode(h)}}}if(!this.htmlMap||!this.htmlMap[l])return;const{wrapContainer:u,nativeContainer:c}=this.htmlMap[l];this.updateStyleOfWrapContainer(t,r,u,c,n),this.htmlMap[l].renderId=this.renderId}}const DM=()=>{Va.registerPlugin("ReactAttributePlugin",Lzt)};class Bzt{constructor(){this.name="ViewTransform3dPlugin",this.activeEvent="onRegister",this._uid=on.GenAutoIncrementId(),this.key=this.name+this._uid,this.onMouseDown=t=>{this.option3d||(this.option3d=this.pluginService.stage.option3d),this.option3d&&(this.mousedown=!0,this.pageX=t.page.x,this.pageY=t.page.y)},this.onMouseUp=t=>{this.option3d||(this.option3d=this.pluginService.stage.option3d),this.option3d&&(this.mousedown=!1)},this.onMouseMove=t=>{var e,n;const r=this.pluginService.stage;if(this.option3d||(this.option3d=r.option3d),this.option3d&&this.mousedown)if(this.pageX&&this.pageY){const s=t.page.x-this.pageX,a=t.page.y-this.pageY;this.pageX=t.page.x,this.pageY=t.page.y;const o=s/100,l=a/100;this.option3d.alpha=((e=this.option3d.alpha)!==null&&e!==void 0?e:0)+o,this.option3d.beta=((n=this.option3d.beta)!==null&&n!==void 0?n:0)+l,r.set3dOptions(this.option3d),r.renderNextFrame()}else this.pageX=t.page.x,this.pageY=t.page.y}}activate(t){this.pluginService=t;const e=t.stage;this.option3d=e.option3d,e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mousemove",this.onMouseMove)}deactivate(t){const e=t.stage;e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("mousemove",this.onMouseMove)}}const Fzt=()=>{Va.registerPlugin("ViewTransform3dPlugin",Bzt)};function gI(i){const t=[];for(let e=0;e<i.length;e++){const n=i[e];e!==0&&n[0]===t[t.length-1]||t.push(n[0]),t.push(n[1])}return t}function Z5(i,t,e){const n=i.indexOf(t),r=i.indexOf(e);n>=0&&r>=0&&n<r&&(i.splice(n,1),i.splice(r,0,t))}const kA=(i,...t)=>Ee.getInstance().info(`[VChart log]: ${i}`,...t),es=(i,t)=>(it(CA.warnHandler)&&CA.warnHandler.call(null,i,t),Ee.getInstance().warn(`[VChart warn]: ${i}`)),v0=(i,t,e)=>{{if(!it(CA.errorHandler))throw new Error(i);CA.errorHandler.call(null,i,t)}},CA={warnHandler:!1,errorHandler:!1},jet=BF(),Rp=jet&&globalThis?globalThis.document:void 0;function $l(i){return(i==="desktop-browser"||i==="mobile-browser")&&jet}function uh(i){return Mh(i)||i==="mobile-browser"}function Mh(i){return i.includes("miniApp")||i==="lynx"||i==="wx"||i==="harmony"}let FE=0;function Fm(){return FE>=9999999&&(FE=0),FE++}function Qg(i){return i!=null&&i!==""&&(!!yt(i)||+i==+i)}function zzt(i){if(et(i))return i;const t=+i;return et(t)?t:0}function Op(i){return!(!i||i.length===0)&&!N(i[0])&&!N(i[0].dataId)&&J(i[0].fields)}const Nzt=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","visible","clip","pickable","childrenPickable","zIndex","cursor"];class fr extends Lm{constructor(t,e){super(t),this._skipRenderAttributes=Nzt,e?.mode&&(this.mode=e.mode,this.setMode(e.mode)),e?.skipDefault&&(this.skipDefault=!0),this.setTheme({common:{strokeBoundsBuffer:0}}),this.attribute=t,this.onSetStage(()=>{this.render(),this.bindEvents()})}setAttribute(t,e,n,r){const s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,r);if(s)return this._setAttributes(s,n);no(this.attribute[t])&&no(e)&&!it(this.attribute[t])&&!it(e)?ot(this.attribute[t],e):this.attribute[t]=e,this._skipRenderAttributes.includes(t)||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!n&&!this.needUpdateTag(t)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}setAttributes(t,e,n){return t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,n)||t,this._setAttributes(t,e)}_setAttributes(t,e){const n=Object.keys(t);this._mergeAttributes(t,n),n.every(r=>this._skipRenderAttributes.includes(r))||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!e&&!this.needUpdateTags(n)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}_mergeAttributes(t,e){N(e)&&(e=Object.keys(t));for(let n=0;n<e.length;n++){const r=e[n];!no(this.attribute[r])||it(this.attribute[r])||it(t[r])?this.attribute[r]=t[r]:ot(this.attribute[r],t[r])}}bindEvents(){}_getNodeId(t){var e;return`${(e=this.id)!==null&&e!==void 0?e:this._uid}-${this.name}-${t}`}_dispatchEvent(t,e){var n;const r=new fM(t,e);r.manager=(n=this.stage)===null||n===void 0?void 0:n.eventSystem.manager,this.dispatchEvent(r)}eventPosToStagePos(t){var e,n;const r={x:0,y:0},s=(n=(e=this.stage)===null||e===void 0?void 0:e.eventPointTransform(t))!==null&&n!==void 0?n:{x:0,y:0};return this.globalTransMatrix.transformPoint(s,r),r}}const lc=Symbol.for("MathPickerContribution"),Q5=Symbol.for("MathArcPicker"),J5=Symbol.for("MathAreaPicker"),tU=Symbol.for("MathCirclePicker"),MA=Symbol.for("MathImagePicker"),eU=Symbol.for("MathLinePicker"),iU=Symbol.for("MathPathPicker"),nU=Symbol.for("MathRectPicker"),rU=Symbol.for("MathSymbolPicker"),sU=Symbol.for("MathTextPicker"),aU=Symbol.for("MathPolygonPicker"),oU=Symbol.for("MathGlyphPicker"),lU=Symbol.for("CanvasArcPicker"),uU=Symbol.for("CanvasArc3dPicker"),cU=Symbol.for("CanvasAreaPicker"),hU=Symbol.for("CanvasCirclePicker"),dU=Symbol.for("CanvasImagePicker"),fU=Symbol.for("CanvasLinePicker"),pU=Symbol.for("CanvasPathPicker"),gU=Symbol.for("CanvasRectPicker"),mU=Symbol.for("CanvasRect3dPicker"),_U=Symbol.for("CanvasSymbolPicker"),vU=Symbol.for("CanvasTextPicker"),yU=Symbol.for("CanvasPolygonPicker"),bU=Symbol.for("CanvasPyramid3dPicker"),xU=Symbol.for("CanvasRichTextPicker"),SU=Symbol.for("CanvasGlyphPicker"),wU=Symbol.for("CanvasGroupPicker"),kr=Symbol.for("CanvasPickerContribution"),AU=(i,t)=>{const e=t.x-i.x,n=t.y-i.y;return Math.abs(e)>Math.abs(n)?e>0?"right":"left":n>0?"down":"up"},CS=(i,t)=>{const e=Math.abs(t.x-i.x),n=Math.abs(t.y-i.y);return Math.sqrt(e*e+n*n)},jzt=i=>{const t=i.length;if(t===1)return{x:Math.round(i[0].x),y:Math.round(i[0].y)};let e=0,n=0,r=0;for(;r<t;)e+=i[r].x,n+=i[r].y,r++;return{x:Math.round(e/t),y:Math.round(n/t)}};class Hzt extends kh{constructor(t,e={}){var n,r,s,a,o,l,u,c,h,d;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=f=>{this.startTime=ud.now();const{cachedEvents:p,startPoints:g}=this;f&&p.push(f.clone()),g.length=p.length;for(let m=0;m<p.length;m++){const{x:_,y:v}=p[m],y={x:_,y:v};g[m]=y}if(g.length!==1)this.startDistance=CS(g[0],g[1]),this.center=jzt([g[0],g[1]]);else{const m=p[0];this.pressTimeout=setTimeout(()=>{m.direction="none",m.deltaX=0,m.deltaY=0,m.points=g,this.triggerStartEvent("press",m),this.triggerEvent("press",m),this.eventType="press",this.direction="none",this.pressTimeout=null},this.config.press.time)}},this.onMove=f=>{this.clearPressTimeout();const{startPoints:p,cachedEvents:g}=this;if(!p.length)return;const m=f.clone(),{x:_,y:v,pointerId:y}=m;for(let k=0,C=g.length;k<C;k++)if(y===g[k].pointerId){g[k]=m;break}const b={x:_,y:v},x=g.map(k=>({x:k.x,y:k.y})),S=ud.now();if(this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=S,this.lastMovePoint=b,p.length===1){const k=p[0],C=_-k.x,M=v-k.y,R=this.direction||AU(k,b);this.direction=R;const P=this.getEventType(b);return m.direction=R,m.deltaX=C,m.deltaY=M,m.points=x,this.triggerStartEvent(P,m),void this.triggerEvent(P,m)}const{startDistance:w}=this,A=CS(x[0],x[1]);m.scale=A/w,m.center=this.center,m.points=x,this.triggerStartEvent("pinch",m),this.triggerEvent("pinch",m)},this.onEnd=f=>{const p=f.clone(),{cachedEvents:g,startPoints:m}=this,_=g.map(v=>({x:v.x,y:v.y}));if(p.points=_,this.triggerEndEvent(p),g.length===1){const v=ud.now(),y=this.lastMoveTime;if(v-y<100){const b=y-(this.prevMoveTime||this.startTime);if(b>0){const x=this.prevMovePoint||m[0],S=this.lastMovePoint||m[0],w=CS(x,S),A=w/b;if(A>this.config.swipe.velocity&&w>this.config.swipe.threshold)return p.velocity=A,p.direction=AU(x,S),this.triggerEvent("swipe",p),this.cachedEvents=[],this.startPoints=[],void this.reset()}}v-this.startTime<this.config.press.time&&(v-this.lastTapTime<this.config.tap.interval&&f.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=v,this.lastTapTarget=f.target,this.tapCount===1?this.triggerEvent("tap",p):this.tapCount===2&&(this.triggerEvent("doubletap",p),this.tapCount=0))}for(let v=0,y=g.length;v<y;v++)if(g[v].pointerId===p.pointerId){g.splice(v,1),m.splice(v,1);break}this.reset(),g.length>0&&this.onStart()},this.element=t,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:(r=(n=e?.press)===null||n===void 0?void 0:n.time)!==null&&r!==void 0?r:251,threshold:(a=(s=e?.press)===null||s===void 0?void 0:s.threshold)!==null&&a!==void 0?a:9},swipe:{threshold:(l=(o=e?.swipe)===null||o===void 0?void 0:o.threshold)!==null&&l!==void 0?l:10,velocity:(c=(u=e?.swipe)===null||u===void 0?void 0:u.velocity)!==null&&c!==void 0?c:.3},tap:{interval:(d=(h=e?.tap)===null||h===void 0?void 0:h.interval)!==null&&d!==void 0?d:300}},this.initEvents()}initEvents(){const{element:t}=this;t&&(t.addEventListener("pointerdown",this.onStart),t.addEventListener("pointermove",this.onMove),t.addEventListener("pointerup",this.onEnd),t.addEventListener("pointerleave",this.onEnd),t.addEventListener("pointerupoutside",this.onEnd))}removeEvents(){const{element:t}=this;t&&(t.removeEventListener("pointerdown",this.onStart),t.removeEventListener("pointermove",this.onMove),t.removeEventListener("pointerup",this.onEnd),t.removeEventListener("pointerleave",this.onEnd),t.removeEventListener("pointerupoutside",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(t){const{eventType:e,startTime:n,startPoints:r}=this;if(e==="press")return e;let s;return s=ud.now()-n>this.config.press.time&&CS(r[0],t)<this.config.press.threshold?"press":"pan",this.eventType=s,s}enable(t){this.processEvent[t]=!0}isProcess(t){return this.processEvent[t]}pushEvent(t,e){const{emitThrottles:n}=this,r={type:t,ev:e};for(let s=0,a=n.length;s<a;s++)if(n[s].type===t)return void n.splice(s,1,r);n.push(r)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(t,e){this.pushEvent(t,e);const{throttleTimer:n,emitThrottles:r}=this;n||(this.throttleTimer=vt.global.getRequestAnimationFrame()(()=>{vt.global.getCancelAnimationFrame()(this.throttleTimer),this.throttleTimer=null;for(let s=0,a=r.length;s<a;s++){const{type:o,ev:l}=r[s];this.emitEvent(o,l)}this.emitThrottles.length=0}))}triggerStartEvent(t,e){this.isProcess(t)||(this.enable(t),this.triggerEvent(`${t}start`,e))}triggerEndEvent(t){const e=this.processEvent;Object.keys(e).forEach(n=>{this.triggerEvent(`${n}end`,t),n==="press"&&this.triggerEvent(`${n}up`,t),delete e[n]})}emitEvent(t,e){if(!this.element)return;const n=this.element._events[set];if(n)if("fn"in n)n.fn.call(n.context,e,t);else for(let r=0,s=n.length;r<s&&!e.propagationImmediatelyStopped;r++)n[r].fn.call(n[r].context,e,t);this.emit(t,e)}}var Vzt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},Wzt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};const Te=[0,0,0],$zt=(i,t,e,n,r,s,a,o)=>{if(o)for(;e>t;)e-=qt;else for(;e<t;)e+=qt;const l=Xe/3*(e>t?1:-1);let u=t,c=u;for(;c!==e;){c=l>0?Math.min(c+l,e):Math.max(c+l,e);const h=Math.abs(c-u),d=4*Math.tan(h/4)/3,f=c<u?-1:1,p=Math.cos(u),g=Math.sin(u),m=Math.cos(c),_=Math.sin(c),v=p*s+n,y=g*a+r,b=m*s+n,x=_*a+r,S=s*d*f,w=a*d*f;i.push([v-S*g,y+w*p,b+S*_,x-w*m,b,x]),u=c}};let gg=class{set fillStyle(i){this.nativeContext.fillStyle=i}get fillStyle(){return this.nativeContext.fillStyle}set font(i){i!==this._font&&(this._font=i,this.nativeContext.font=i)}get font(){var i;return(i=this._font)!==null&&i!==void 0?i:this.nativeContext.font}set globalAlpha(i){this.nativeContext.globalAlpha=i*this.baseGlobalAlpha}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(i){this.nativeContext.lineCap=i}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(i){this.nativeContext.lineDashOffset=i}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(i){this.nativeContext.lineJoin=i}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(i){this.nativeContext.lineWidth=i}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(i){this.nativeContext.miterLimit=i}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(i){this.nativeContext.shadowBlur=i}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(i){this.nativeContext.shadowColor=i}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(i){this.nativeContext.shadowOffsetX=i}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(i){this.nativeContext.shadowOffsetY=i}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(i){this.nativeContext.strokeStyle=i}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(i){this.nativeContext.textAlign=i}get textAlign(){return this.nativeContext.textAlign}set textBaseline(i){this.nativeContext.textBaseline=i}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(i){i!==!!this._inuse&&(this._inuse=i,i?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}constructor(i,t){this.fillAttributes=Object.assign(Object.assign({},Utt),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},Gtt),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},Za),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;const e=i.nativeCanvas.getContext("2d");if(!e)throw new Error("2d");this.nativeContext=e,this.canvas=i,this.matrix=new di(1,0,0,1,0,0),this.stack=[],this.dpr=t,this.applyedMatrix=new di(1,0,0,1,0,0),this._clearMatrix=new di(1,0,0,1,0,0),this.baseGlobalAlpha=1}reset(i=!0){this.stack.length&&Ee.getInstance().warn("bugmatrix"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new di(1,0,0,1,0,0),this.stack.length=0,i&&this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(i=!1){!i&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(i){return wr.allocateByObj(i)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),this.stack.length>0&&(wr.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0)),this.font="",this._clearFilterStyle=!1,this._clearShadowStyle=!1}highPerformanceRestore(){this.stack.length>0&&(wr.free(this.matrix),this.matrix=this.stack.pop())}rotate(i,t=!0){this.matrix.rotate(i),t&&this.setTransformForCurrent()}save(){const i=this.cloneMatrix(this.matrix);this.stack.push(i),this.nativeContext.save()}highPerformanceSave(){const i=this.cloneMatrix(this.matrix);this.stack.push(i)}scale(i,t,e=!0){this.matrix.scale(i,t),e&&this.setTransformForCurrent()}setScale(i,t,e=!0){this.matrix.setScale(i,t),e&&this.setTransformForCurrent()}scalePoint(i,t,e,n,r=!0){this.translate(e,n,!1),this.scale(i,t,!1),this.translate(-e,-n,!1),r&&this.setTransformForCurrent()}setTransform(i,t,e,n,r,s,a=!0,o=this.dpr){this.matrix.setValue(o*i,o*t,o*e,o*n,o*r,o*s),a&&this.setTransformForCurrent()}setTransformFromMatrix(i,t=!0,e=this.dpr){this.matrix.setValue(i.a*e,i.b*e,i.c*e,i.d*e,i.e*e,i.f*e),t&&this.setTransformForCurrent()}resetTransform(i=!0,t=this.dpr){this.setTransform(t,0,0,t,0,0),i&&this.setTransformForCurrent()}transform(i,t,e,n,r,s,a=!0){this.matrix.multiply(i,t,e,n,r,s),a&&this.setTransformForCurrent()}transformFromMatrix(i,t){this.matrix.multiply(i.a,i.b,i.c,i.d,i.e,i.f),t&&this.setTransformForCurrent()}translate(i,t,e=!0){this.matrix.translate(i,t),e&&this.setTransformForCurrent()}rotateDegrees(i,t=!0){const e=i*Math.PI/180;this.rotate(e,t)}rotateAbout(i,t,e,n=!0){this.translate(t,e,!1),this.rotate(i,!1),this.translate(-t,-e,!1),n&&this.setTransformForCurrent()}rotateDegreesAbout(i,t,e,n=!0){this.translate(t,e,!1),this.rotateDegrees(i,!1),this.translate(-t,-e,!1),n&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(i,t){i?typeof i=="string"?this.nativeContext.clip(i):this.nativeContext.clip(i,t):this.nativeContext.clip()}arc(i,t,e,n,r,s,a){if(a=a||0,this.camera){const o=[];$zt(o,n,r,i,t,e,e,s);for(let l=0;l<o.length;++l){const u=o[l];this.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5],a)}}else this.nativeContext.arc(i,t,Math.max(0,e),n,r,s)}arcTo(i,t,e,n,r){this.nativeContext.arcTo(i,t,e,n,r)}bezierCurveTo(i,t,e,n,r,s,a){if(a=a||0,this.camera){let o=a,l=a;this.modelMatrix&&(sa(Te,[i,t,a],this.modelMatrix),i=Te[0],t=Te[1],o=Te[2],sa(Te,[e,n,a],this.modelMatrix),e=Te[0],n=Te[1],l=Te[2],sa(Te,[r,s,a],this.modelMatrix),r=Te[0],s=Te[1],a=Te[2]);let u=this.camera.vp(r,s,a);r=u.x,s=u.y,u=this.camera.vp(i,t,o),i=u.x,t=u.y,u=this.camera.vp(e,n,l),e=u.x,n=u.y}this.nativeContext.bezierCurveTo(i,t,e,n,r,s)}closePath(){this.nativeContext.closePath()}ellipse(i,t,e,n,r,s,a,o){o==null?this.nativeContext.ellipse(i,t,e,n,r,s,a):this.nativeContext.ellipse(i,t,e,n,r,s,a,o)}lineTo(i,t,e){if(e=e||0,this.camera){this.modelMatrix&&(sa(Te,[i,t,e],this.modelMatrix),i=Te[0],t=Te[1],e=Te[2]);const n=this.camera.vp(i,t,e);i=n.x,t=n.y}this.nativeContext.lineTo(i,t)}moveTo(i,t,e){if(e=e||0,this.camera){this.modelMatrix&&(sa(Te,[i,t,e],this.modelMatrix),i=Te[0],t=Te[1],e=Te[2]);const n=this.camera.vp(i,t,e);i=n.x,t=n.y}this.nativeContext.moveTo(i,t)}quadraticCurveTo(i,t,e,n,r){if(r=r||0,this.camera){let s=r;this.modelMatrix&&(sa(Te,[i,t,r],this.modelMatrix),i=Te[0],t=Te[1],s=Te[2],sa(Te,[e,n,r],this.modelMatrix),e=Te[0],n=Te[1],r=Te[2]);let a=this.camera.vp(e,n,r);e=a.x,n=a.y,a=this.camera.vp(i,t,s),i=a.x,t=a.y}this.nativeContext.quadraticCurveTo(i,t,e,n)}rect(i,t,e,n,r){r=r||0,this.camera?(this.moveTo(i,t,r),this.lineTo(i+e,t,r),this.lineTo(i+e,t+n,r),this.lineTo(i,t+n,r),this.closePath()):this.nativeContext.rect(i,t,e,n)}createImageData(){const i=arguments;return i.length===2?this.nativeContext.createImageData(i[0],i[1]):i.length===1?this.nativeContext.createImageData(i[0]):null}createLinearGradient(i,t,e,n){return isFinite(i+t+e+n)||(i=0,t=0,e=0,n=0),this.nativeContext.createLinearGradient(i,t,e,n)}createPattern(i,t){return i.width===0||i.height===0?null:this.nativeContext.createPattern(i,t)}createRadialGradient(i,t,e,n,r,s){return this.nativeContext.createRadialGradient(i,t,e,n,r,s)}createConicGradient(i,t,e,n){if(this.nativeContext.createConicGradient&&Math.abs(n-e-2*Math.PI)<.001)return this.nativeContext.createConicGradient(e,i,t);let r,s=!1;const a=this;return{stops:[],addColorStop(o,l){this.stops.push([o,l]),s=!0},GetPattern(o,l,u){return s&&(u||(u=n-e),r=t2t(a,this.stops,i,t,u,e,n,o,l),s=!1),r}}}fill(i,t){this.disableFill||(i?this.nativeContext.fill(i):this.nativeContext.fill())}fillRect(i,t,e,n){this.nativeContext.fillRect(i,t,e,n)}clearRect(i,t,e,n){this.nativeContext.clearRect(i,t,e,n)}project(i,t,e){if(e=e||0,this.camera){this.modelMatrix&&(sa(Te,[i,t,e],this.modelMatrix),i=Te[0],t=Te[1],e=Te[2]);const n=this.camera.vp(i,t,e);i=n.x,t=n.y}return{x:i,y:t}}view(i,t,e){return e=e||0,this.camera?(this.modelMatrix&&(sa(Te,[i,t,e],this.modelMatrix),i=Te[0],t=Te[1],e=Te[2]),this.camera.view(i,t,e)):[i,t,e]}fillText(i,t,e,n){if(n=n||0,this.camera){this.modelMatrix&&(sa(Te,[t,e,n],this.modelMatrix),t=Te[0],e=Te[1],n=Te[2]);const r=this.camera.vp(t,e,n);t=r.x,e=r.y}this.nativeContext.fillText(i,t,e)}getImageData(i,t,e,n){return this.nativeContext.getImageData(i,t,e,n)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(i,t){return this.nativeContext.isPointInPath(i,t)}isPointInStroke(i,t){return this.nativeContext.isPointInStroke(i,t)}measureText(i,t=vt.global.measureTextMethod){var e,n;if(!t||t==="native")return this.nativeContext.measureText(i);this.mathTextMeasure||(this.mathTextMeasure=vt.graphicUtil.createTextMeasureInstance({},{},()=>this.canvas.nativeCanvas));const r=(e=this.fontFamily)!==null&&e!==void 0?e:Za.fontFamily,s=(n=this.fontSize)!==null&&n!==void 0?n:Za.fontSize;return this.mathTextMeasure.textSpec.fontFamily===r&&this.mathTextMeasure.textSpec.fontSize===s||(this.mathTextMeasure.textSpec.fontFamily=r,this.mathTextMeasure.textSpec.fontSize=s,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(i,t)}putImageData(i,t,e){this.nativeContext.putImageData(i,t,e)}setLineDash(i){const t=arguments,e=this.nativeContext;this.nativeContext.setLineDash?t[0]&&e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])}stroke(i){this.disableStroke||(i?this.nativeContext.stroke(i):this.nativeContext.stroke())}strokeRect(i,t,e,n){this.nativeContext.strokeRect(i,t,e,n)}strokeText(i,t,e,n){if(n=n||0,this.camera){this.modelMatrix&&(sa(Te,[t,e,n],this.modelMatrix),t=Te[0],e=Te[1],n=Te[2]);const r=this.camera.vp(t,e,n);t=r.x,e=r.y}this.nativeContext.strokeText(i,t,e)}drawImage(){const i=this.nativeContext,t=arguments;t.length===3?i.drawImage(t[0],t[1],t[2]):t.length===5?i.drawImage(t[0],t[1],t[2],t[3],t[4]):t.length===9&&i.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}setCommonStyle(i,t,e,n,r){if(Array.isArray(r)){if(r.length<=1)return this._setCommonStyle(i,t,e,n,r[0]);const s=Object.create(r[0]);return r.forEach((a,o)=>{o!==0&&Object.assign(s,a)}),this._setCommonStyle(i,t,e,n,s)}return this._setCommonStyle(i,t,e,n,r)}_setCommonStyle(i,t,e,n,r){const s=this.nativeContext;r||(r=this.fillAttributes);const{fillOpacity:a=r.fillOpacity,opacity:o=r.opacity,fill:l=r.fill}=t;s.globalAlpha=a*o*this.baseGlobalAlpha,a>1e-12&&o>1e-12&&(s.fillStyle=zw(this,l,i,e,n))}setShadowBlendStyle(i,t,e){if(Array.isArray(e)){if(e.length<=1)return this._setShadowBlendStyle(i,e[0]);const n=Object.create(e[0]);return e.forEach((r,s)=>{s!==0&&Object.assign(n,r)}),this._setShadowBlendStyle(i,t,n)}return this._setShadowBlendStyle(i,t,e)}_setShadowBlendStyle(i,t,e){const n=this.nativeContext;e||(e=this.fillAttributes);const{opacity:r=e.opacity,shadowBlur:s=e.shadowBlur,shadowOffsetX:a=e.shadowOffsetX,shadowOffsetY:o=e.shadowOffsetY,blur:l=e.blur,globalCompositeOperation:u=e.globalCompositeOperation}=t;if(!(r<=1e-12)){if(a||o||s){const{shadowColor:c=e.shadowColor,shadowOffsetX:h=e.shadowOffsetX,shadowOffsetY:d=e.shadowOffsetY}=t;n.shadowBlur=s*this.dpr,n.shadowColor=c,n.shadowOffsetX=h*this.dpr,n.shadowOffsetY=d*this.dpr,this._clearShadowStyle=!0}else this._clearShadowStyle&&(n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0);l?(n.filter=`blur(${l}px)`,this._clearFilterStyle=!0):this._clearFilterStyle&&(n.filter="blur(0px)",this._clearFilterStyle=!1),u?(n.globalCompositeOperation=u,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(n.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1)}}setStrokeStyle(i,t,e,n,r){if(Array.isArray(r)){if(r.length<=1)return this._setStrokeStyle(i,t,e,n,r[0]);const s=Object.create(r[0]);return r.forEach((a,o)=>{o!==0&&Object.assign(s,a)}),this._setStrokeStyle(i,t,e,n,s)}return this._setStrokeStyle(i,t,e,n,r)}_setStrokeStyle(i,t,e,n,r){const s=this.nativeContext;r||(r=this.strokeAttributes);const{strokeOpacity:a=r.strokeOpacity,opacity:o=r.opacity}=t;if(s.globalAlpha=a*o*this.baseGlobalAlpha,a>1e-12&&o>1e-12){const{lineWidth:l=r.lineWidth,stroke:u=r.stroke,lineJoin:c=r.lineJoin,lineDash:h=r.lineDash,lineDashOffset:d=r.lineDashOffset,lineCap:f=r.lineCap,miterLimit:p=r.miterLimit,keepStrokeScale:g=r.keepStrokeScale}=t;s.lineWidth=g?l:Ql(this,l,this.dpr),s.strokeStyle=zw(this,u,i,e,n),s.lineJoin=c,h&&(s.setLineDash(h),s.lineDashOffset=d),s.lineCap=f,s.miterLimit=p}}setTextStyleWithoutAlignBaseline(i,t,e){const n=this.nativeContext;t||(t=this.textAttributes);const{scaleIn3d:r=t.scaleIn3d}=i;i.font?this.font=i.font:this.font=bw(i,t,r&&this.camera&&this.camera.getProjectionScale(e));const{fontFamily:s=t.fontFamily,fontSize:a=t.fontSize}=i;this.fontFamily=s,this.fontSize=a,n.textAlign="left",n.textBaseline="alphabetic"}setTextStyle(i,t,e){var n,r;const s=this.nativeContext;t||(t=this.textAttributes),i.font?this.font=i.font:this.font=bw(i,t,this.camera&&this.camera.getProjectionScale(e));const{fontFamily:a=t.fontFamily,fontSize:o=t.fontSize}=i;this.fontFamily=a,this.fontSize=o,s.textAlign=(n=i.textAlign)!==null&&n!==void 0?n:t.textAlign,s.textBaseline=(r=i.textBaseline)!==null&&r!==void 0?r:t.textBaseline}draw(){}clearMatrix(i=!0,t=this.dpr){this.setTransformFromMatrix(this._clearMatrix,i,t)}setClearMatrix(i,t,e,n,r,s){this._clearMatrix.setValue(i,t,e,n,r,s)}onlyTranslate(i=this.dpr){return this.matrix.a===i&&this.matrix.b===0&&this.matrix.c===0&&this.matrix.d===i}release(...i){this.stack.forEach(t=>wr.free(t)),this.stack.length=0}};gg.env="browser",gg=Vzt([Rt(),Wzt("design:paramtypes",[Object,Number])],gg);var Uzt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},Gzt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};let mg=class extends SF{constructor(i){super(i)}init(i){const{container:t}=i;if(typeof t=="string"){const e=vt.global.getElementById(t);e&&(this._container=e)}else this._container=t;this._context=new gg(this,this._dpr),this.initStyle()}initStyle(){if(!this.controled)return;const{nativeCanvas:i}=this;i.width=this._pixelWidth,i.height=this._pixelHeight,!i.style||this.setCanvasStyle(i,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(i),this.visiable||this.hide()}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}applyPosition(){const i=this._nativeCanvas;i.style.position="absolute",i.style.top=`${this._y}px`,i.style.left=`${this._x}px`}resetStyle(i){if(!this.controled)return;const{width:t=this._displayWidth,height:e=this._displayHeight,dpr:n=this._dpr,x:r=this._x,y:s=this._y}=i,{nativeCanvas:a}=this;a.width=t*n,a.height=e*n,!a.style||this.setCanvasStyle(a,r,s,t,e),i.id&&(a.id=i.id),this.visiable||this.hide()}setCanvasStyle(i,t,e,n,r){this.controled&&(i.style.width=`${n}px`,i.style.height=`${r}px`)}toDataURL(i,t){return i==="image/jpeg"?this._nativeCanvas.toDataURL(i,t):i==="image/png"?this._nativeCanvas.toDataURL(i):this._nativeCanvas.toDataURL(i,t)}resize(i,t){this.controled&&(this._pixelWidth=i*this._dpr,this._pixelHeight=t*this._dpr,this._displayWidth=i,this._displayHeight=t,this._nativeCanvas.style&&(this._nativeCanvas.style.width=`${i}px`,this._nativeCanvas.style.height=`${t}px`),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};mg.env="browser",mg=Uzt([Rt(),Gzt("design:paramtypes",[Object])],mg);function Het(i,t){return new re(e=>{e(Qtt).toDynamicValue(()=>n=>new i(n)).whenTargetNamed(i.env),e(UDt).toDynamicValue(()=>(n,r)=>new t(n,r)).whenTargetNamed(t.env)})}const Yzt=Het(mg,gg);var Xzt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},Kzt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},zh=function(i,t){return function(e,n){t(e,n,i)}};let Dp=class extends oI{constructor(i,t,e,n){super(e,n),this.contributions=i,this.drawContribution=t,this.pickItemInterceptorContributions=e,this.pickServiceInterceptorContributions=n,this.global.hooks.onSetEnv.tap("canvas-picker-service",(r,s,a)=>{this.configure(a,s)}),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach(i=>{this.pickerMap.set(i.numberType,i)}),super._init()}configure(i,t){this.pickCanvas=wd.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}pickItem(i,t,e,n){if(i.attribute.pickable===!1)return null;if(this.InterceptorContributions.length)for(let l=0;l<this.InterceptorContributions.length;l++){const u=this.InterceptorContributions[l];if(u.beforePickItem){const c=u.beforePickItem(i,this,t,n,{parentMatrix:e});if(c)return c}}const r=this.pickerMap.get(i.numberType);if(!r)return null;const s=r.contains(i,t,n),a=s?i:null,o={graphic:a,params:s};if(a)return o;if(this.InterceptorContributions.length)for(let l=0;l<this.InterceptorContributions.length;l++){const u=this.InterceptorContributions[l];if(u.afterPickItem){const c=u.afterPickItem(i,this,t,n,{parentMatrix:e});if(c)return c}}return o}};Dp=Xzt([Rt(),zh(0,ge(_n)),zh(0,jn(kr)),zh(1,ge(LF)),zh(2,ge(_n)),zh(2,jn(Pp)),zh(3,ge(_n)),zh(3,jn(fA)),Kzt("design:paramtypes",[Object,Object,Object,Object])],Dp);var qzt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let mI=class{constructor(){this.type="group",this.numberType=pF}contains(i,t,e){return!1}};mI=qzt([Rt()],mI);const TA=new re((i,t,e,n)=>{TA.__vloaded||(TA.__vloaded=!0,i(wU).to(mI).inSingletonScope(),i(kr).toService(wU),Sr(i,kr))});TA.__vloaded=!1;const Zzt=new re((i,t,e,n)=>{e(Dp)||i(Dp).toSelf().inSingletonScope(),e(pg)?n(pg).toService(Dp):i(pg).toService(Dp)});function Qzt(i){i.load(TA),i.load(Zzt)}var nv,Jzt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},tNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};let Pc=nv=class extends AA{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return`${nv.idprefix}_${nv.prefix_count++}`}constructor(){super(),this.type="browser",this._canvasIsIntersecting=!0,this.global=vt.global,this.viewBox=new Gi,this.modelMatrix=new di(1,0,0,1,0,0)}getTitle(){return this.canvas.id&&this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(i){i.canvas?this.createWindowByCanvas(i):this.createWindowByConfig(i),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch{console.error("IntersectionObserver")}}isElementVisible(i){const t=i.getBoundingClientRect(),e=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight;return!(t.right<0||t.bottom<0||t.left>e||t.top>n)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);const i=new IntersectionObserver((t,e)=>{t.forEach(n=>{this._canvasIsIntersecting!==n.isIntersecting?(this._canvasIsIntersecting=n.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(n.isIntersecting)):this._canvasIsIntersecting=n.isIntersecting})});i&&i.observe(this.canvas.nativeCanvas)}createWindowByConfig(i){const t=this.global.createCanvas({width:i.width,height:i.height});let e;if(e=typeof i.container=="string"?this.global.getElementById(i.container):i.container?i.container:this.global.getRootElement(),!e)throw new Error("containerId");i.offscreen?e=null:e.appendChild(t);const n={width:i.width,height:i.height,dpr:i.dpr,nativeCanvas:t,container:e,id:nv.GenerateCanvasId(),canvasControled:!0};this.canvas=new mg(n)}createWindowByCanvas(i){var t;let e;if(typeof i.canvas=="string"){if(e=this.global.getElementById(i.canvas),!e)throw new Error("canvasId canvasdom")}else e=i.canvas;if(!e)throw new Error("canvas");let n=i.width,r=i.height;if(n==null||r==null||!i.canvasControled){const a=e.getBoundingClientRect();n=a.width,r=a.height}let s=i.dpr;s==null&&(s=(t=e.getContext("2d").pixelRatio)!==null&&t!==void 0?t:e.width/n),this.canvas=new mg({width:n,height:r,dpr:s,nativeCanvas:e,canvasControled:i.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(i,t){this.canvas.resize(i,t)}setDpr(i){this.canvas.dpr=i}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(i,t,e){return this.canvas.nativeCanvas.addEventListener(i,t,e)}removeEventListener(i,t,e){return this.canvas.nativeCanvas.removeEventListener(i,t,e)}dispatchEvent(i){return this.canvas.nativeCanvas.dispatchEvent(i)}getStyle(){var i;return(i=this.canvas.nativeCanvas.style)!==null&&i!==void 0?i:{}}setStyle(i){this.canvas.nativeCanvas.style=i}getBoundingClientRect(){const i=this.canvas.nativeCanvas,t=this.getWH();return i.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:t.width,height:t.height,left:0,top:0,right:0,bottom:0}}clearViewBox(i){const t=this.viewBox,e=this.getContext(),n=this.getDpr();e.nativeContext.save(),e.nativeContext.setTransform(n,0,0,n,0,0),e.clearRect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1),i&&(e.fillStyle=i,e.fillRect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1)),e.nativeContext.restore()}isVisible(i){return this._canvasIsIntersecting}onVisibleChange(i){this._onVisibleChangeCb=i}getTopLeft(i){return this.global.getElementTopLeft(this.canvas.nativeCanvas,i)}};Pc.env="browser",Pc.idprefix="visactor_window",Pc.prefix_count=0,Pc=nv=Jzt([Rt(),tNt("design:paramtypes",[])],Pc);const eNt=new re(i=>{i(Pc).toSelf(),i(dF).toDynamicValue(t=>t.container.get(Pc)).whenTargetNamed(Pc.env)});var iNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},nNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},rNt=function(i,t,e,n){return new(e||(e=Promise))(function(r,s){function a(u){try{l(n.next(u))}catch(c){s(c)}}function o(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof e?c:new e(function(h){h(c)})).then(a,o)}l((n=n.apply(i,t||[])).next())})};class sNt{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(t){this.dom=t}}function kU(i,t=!1){const e=document.createElement("img");if(vt.global.isImageAnonymous&&(e.crossOrigin="anonymous"),t){const n=new Blob([i],{type:"image/svg+xml"});i=window.URL.createObjectURL(n)}return e.src=i,e.complete?Promise.resolve(e):new Promise((n,r)=>{e.onload=()=>{n(e)},e.onerror=()=>{r(new Error(""))}})}let PA=class extends wA{constructor(){super(),this.type="browser",this.supportEvent=!0;try{this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch{this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(i,t){var e,n;let r=0,s=0,a=0,o=0;if(i.changedTouches){const l=(e=i.changedTouches[0])!==null&&e!==void 0?e:{};r=l.clientX||0,s=l.clientY||0,a=r,o=s}else r=i.clientX||0,s=i.clientY||0,a=i.offsetX||0,o=i.offsetY||0;if(t){const l=r,u=s,c=t.getBoundingClientRect(),h=(n=t.getNativeHandler)===null||n===void 0?void 0:n.call(t).nativeCanvas;let d,f;return h&&(d=c.width/h.offsetWidth,f=c.height/h.offsetHeight),{x:(l-c.left)/(et(d)?d:1),y:(u-c.top)/(et(f)?f:1)}}return{x:a,y:o}}getNativeAABBBounds(i){let t=i;if(typeof i=="string"&&(t=new DOMParser().parseFromString(i,"text/html").firstChild,t.lastChild&&(t=t.lastChild.firstChild)),t.getBoundingClientRect){const e=t.getBoundingClientRect();return new sNt(e)}return new Gi}removeDom(i){return i.parentElement.removeChild(i),!0}updateDom(i,t){const{width:e,height:n,style:r}=t;return r&&(Ht(r)?i.setAttribute("style",r):Object.keys(r).forEach(s=>{i.style[s]=r[s]})),e!=null&&(i.style.width=`${e}px`),n!=null&&(i.style.height=`${n}px`),!0}createDom(i){const{tagName:t="div",parent:e}=i,n=document.createElement(t);if(this.updateDom(n,i),e){const r=Ht(e)?this.getElementById(e):e;r&&r.appendChild&&r.appendChild(n)}return n}loadImage(i){return kU(i,!1).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadSvg(i){return kU(i,!0).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}createCanvas(i){var t,e;const n=document.createElement("canvas");i.id&&(n.id=(t=i.id)!==null&&t!==void 0?t:on.GenAutoIncrementId().toString());const r=(e=i.dpr)!==null&&e!==void 0?e:window.devicePixelRatio;return i.width&&i.height&&(n.style.width=`${i.width}px`,n.style.height=`${i.height}px`,n.width=i.width*r,n.height=i.height*r),n}createOffscreenCanvas(i){var t;const e=(t=i.dpr)!==null&&t!==void 0?t:window.devicePixelRatio;return new OffscreenCanvas(i.width*e,i.height*e)}releaseCanvas(i){let t;t=typeof i=="string"?document.getElementById(i):i,t&&t.parentElement&&t.parentElement.removeChild(t)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(i,t,e){return document.addEventListener(i,t,e)}removeEventListener(i,t,e){return document.removeEventListener(i,t,e)}dispatchEvent(i){return document.dispatchEvent(i)}getElementById(i){return document.getElementById(i)}getRootElement(){return document.body}getDocument(){return document}release(...i){}getElementTop(i,t){let e=i.offsetTop,n=i.offsetParent;for(;n!==null;)e+=n.offsetTop,n=n.offsetParent;return e}getElementLeft(i,t){let e=i.offsetLeft,n=i.offsetParent;for(;n!==null;)e+=n.offsetLeft,n=n.offsetParent;return e}getElementTopLeft(i,t){let e=i.offsetTop,n=i.offsetLeft,r=i.offsetParent;for(;r!==null;)e+=r.offsetTop,n+=r.offsetLeft,r=r.offsetParent;return{top:e,left:n}}loadFont(i,t,e){return rNt(this,void 0,void 0,function*(){return new FontFace(i,Ht(t)?`url(${t})`:t,e).load().then(function(n){return document.fonts.add(n),{loadState:"success"}}).catch(function(n){return console.error("Failed to load font:",n),{loadState:"fail"}})})}isMacOS(){if(this._isMacOS===void 0)try{this._isMacOS=navigator.platform.toUpperCase().indexOf("MAC")>=0}catch{this._isMacOS=!1}return this._isMacOS}copyToClipBoard(i){return navigator.clipboard.writeText(i).then(()=>{}).catch(t=>{})}};PA=iNt([Rt(),nNt("design:paramtypes",[])],PA);const EA=new re(i=>{EA.isBrowserBound||(EA.isBrowserBound=!0,i(PA).toSelf().inSingletonScope(),i(hM).toService(PA))});EA.isBrowserBound=!1;function RA(i,t=!0){RA.__loaded||(RA.__loaded=!0,i.load(EA),i.load(Yzt),i.load(eNt),t&&Qzt(i))}RA.__loaded=!1;class go{contains(t,e,n){if(!t.AABBBounds.containsPoint(e))return!1;if(t.attribute.pickMode==="imprecise"||!this.canvasRenderer)return!0;const{pickContext:r}=n??{};if(!r)return!1;const s=t.getGraphicTheme();r.highPerformanceSave();let{x:a=s.x,y:o=s.y}=t.attribute;if(t.transMatrix.onlyTranslate()){const c=t.getOffsetXY(s);a+=c.x,o+=c.y,r.setTransformForCurrent()}else a=0,o=0,r.transformFromMatrix(t.transMatrix,!0);let l=!1,u=!1;return this.canvasRenderer.drawShape(t,r,a,o,{},null,(c,h,d,f)=>!(!l&&!u)||(l=c.isPointInPath(e.x,e.y),u=f||u,l),(c,h,d,f)=>{if(l||u)return!0;const p=h.lineWidth||d.lineWidth,g=h.pickStrokeBuffer||d.pickStrokeBuffer,m=h.keepStrokeScale||d.keepStrokeScale;return r.lineWidth=m?p+g:Ql(r,p+g,r.dpr),l=c.isPointInStroke(e.x,e.y),u=f||u,l}),r.highPerformanceRestore(),l}}var aNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},oNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},lNt=function(i,t){return function(e,n){t(e,n,i)}};let _I=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="arc",this.numberType=vM}};_I=aNt([Rt(),lNt(0,ge(iA)),oNt("design:paramtypes",[Object])],_I);let CU=!1;const uNt=new re((i,t,e,n)=>{CU||(CU=!0,i(Q5).to(_I).inSingletonScope(),i(lc).toService(Q5))});var cNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},hNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},dNt=function(i,t){return function(e,n){t(e,n,i)}};let vI=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="area",this.numberType=Db}};vI=cNt([Rt(),dNt(0,ge(nA)),hNt("design:paramtypes",[Object])],vI);let MU=!1;const fNt=new re((i,t,e,n)=>{MU||(MU=!0,i(J5).to(vI).inSingletonScope(),i(lc).toService(J5))});var pNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},gNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},mNt=function(i,t){return function(e,n){t(e,n,i)}};let yI=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="circle",this.numberType=bM}};yI=pNt([Rt(),mNt(0,ge(rA)),gNt("design:paramtypes",[Object])],yI);let TU=!1;const _Nt=new re((i,t,e,n)=>{TU||(TU=!0,i(tU).to(yI).inSingletonScope(),i(lc).toService(tU))});class Vet{constructor(){this.type="glyph",this.numberType=fF}contains(t,e,n){if(!t.AABBBounds.containsPoint(e))return!1;if(t.attribute.pickMode==="imprecise")return!0;const{pickContext:r}=n??{};if(!r)return!1;const s=n?.pickerService;if(s){let a=!1;return t.getSubGraphic().forEach(o=>{if(a)return;const l=s.pickItem(o,e,null,n);a=!(!l||!l.graphic)}),a}return!1}}var vNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},yNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},bNt=function(i,t){return function(e,n){t(e,n,i)}};let OA=class extends Vet{constructor(i){super(),this.canvasRenderer=i}};OA=vNt([Rt(),bNt(0,ge(cA)),yNt("design:paramtypes",[Object])],OA);let PU=!1;const xNt=new re((i,t,e,n)=>{PU||(PU=!0,i(oU).to(OA).inSingletonScope(),i(OA).toService(oU))});var SNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let Jg=class{constructor(){this.type="image",this.numberType=xM}contains(i,t,e){const{pickContext:n}=e??{};return!!n&&!!i.AABBBounds.containsPoint(t)}};Jg=SNt([Rt()],Jg);let EU=!1;const wNt=new re((i,t,e,n)=>{EU||(EU=!0,i(MA).to(Jg).inSingletonScope(),i(Jg).toService(MA))});var ANt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},kNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},CNt=function(i,t){return function(e,n){t(e,n,i)}};let bI=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="line",this.numberType=Ib}};bI=ANt([Rt(),CNt(0,ge(sA)),kNt("design:paramtypes",[Object])],bI);let RU=!1;const MNt=new re((i,t,e,n)=>{RU||(RU=!0,i(eU).to(bI).inSingletonScope(),i(lc).toService(eU))});var TNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},PNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},ENt=function(i,t){return function(e,n){t(e,n,i)}};let xI=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="polygon",this.numberType=wM}};xI=TNt([Rt(),ENt(0,ge(oA)),PNt("design:paramtypes",[Object])],xI);let OU=!1;const RNt=new re((i,t,e,n)=>{OU||(OU=!0,i(aU).to(xI).inSingletonScope(),i(lc).toService(aU))});var ONt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},DNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},INt=function(i,t){return function(e,n){t(e,n,i)}};let SI=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="path",this.numberType=SM}};SI=ONt([Rt(),INt(0,ge(aA)),DNt("design:paramtypes",[Object])],SI);let DU=!1;const LNt=new re((i,t,e,n)=>{DU||(DU=!0,i(iU).to(SI).inSingletonScope(),i(lc).toService(iU))}),zE=new Gi;class Wet{constructor(){this.type="rect",this.numberType=mF}contains(t,e,n){if(!t.AABBBounds.containsPoint(e))return!1;if(t.attribute.pickMode==="imprecise")return!0;const{pickContext:r}=n??{};if(!r)return!1;const s=t.getGraphicTheme(),{cornerRadius:a=s.cornerRadius}=t.attribute;let{x:o=s.x,y:l=s.y}=t.attribute;r.highPerformanceSave();let u=!0;if(t.transMatrix.onlyTranslate()){const h=t.getOffsetXY(s);o+=h.x,l+=h.y,r.setTransformForCurrent()}else o=0,l=0,u=!1,r.transformFromMatrix(t.transMatrix,!0);let c=!0;if(!u||t.shadowRoot||yt(a,!0)&&a!==0||J(a)&&a.some(h=>h!==0))c=!1,this.canvasRenderer.drawShape(t,r,o,l,{},null,(h,d,f)=>!!c||(c=h.isPointInPath(e.x,e.y),c),(h,d,f)=>{if(c)return!0;const p=d.lineWidth||f.lineWidth,g=d.pickStrokeBuffer||f.pickStrokeBuffer,m=d.keepStrokeScale||f.keepStrokeScale;return r.lineWidth=m?p+g:Ql(r,p+g,r.dpr),c=h.isPointInStroke(e.x,e.y),c});else{const{fill:h=s.fill,stroke:d=s.stroke,lineWidth:f=s.lineWidth}=t.attribute;if(h)c=!0;else if(d){const p=t.AABBBounds;zE.setValue(p.x1,p.y1,p.x2,p.y2),zE.expand(-f/2),c=!zE.containsPoint(e)}}return r.highPerformanceRestore(),c}}var BNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},FNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},zNt=function(i,t){return function(e,n){t(e,n,i)}};let wI=class extends Wet{constructor(i){super(),this.canvasRenderer=i}};wI=BNt([Rt(),zNt(0,ge(lA)),FNt("design:paramtypes",[Object])],wI);let IU=!1;const NNt=new re((i,t,e,n)=>{IU||(IU=!0,i(nU).to(wI).inSingletonScope(),i(lc).toService(nU))});let LU=!1;const jNt=new re((i,t,e,n)=>{LU||(LU=!0,i(MA).to(Jg).inSingletonScope(),i(Jg).toService(MA))});var HNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},VNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},WNt=function(i,t){return function(e,n){t(e,n,i)}};let AI=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="symbol",this.numberType=AM}};AI=HNt([Rt(),WNt(0,ge(uA)),VNt("design:paramtypes",[Object])],AI);let BU=!1;const $Nt=new re((i,t,e,n)=>{BU||(BU=!0,i(rU).to(AI).inSingletonScope(),i(lc).toService(rU))});var UNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let kI=class{constructor(){this.type="text",this.numberType=kM}contains(i,t,e){return!!i.AABBBounds.containsPoint(t)}};kI=UNt([Rt()],kI);let FU=!1;const GNt=new re((i,t,e,n)=>{FU||(FU=!0,i(sU).to(kI).inSingletonScope(),i(lc).toService(sU))});var YNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},XNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};let kv=class extends gg{constructor(i,t){super(i,t);const e=i.nativeCanvas.getContext("2d");if(!e)throw new Error("2d");this.nativeContext=e,this.canvas=i,this.matrix=new di(1,0,0,1,0,0),this.stack=[],this.dpr=t??1}release(...i){}};kv.env="node",kv=YNt([Rt(),XNt("design:paramtypes",[Object,Number])],kv);var KNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},qNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)};let _g=class extends SF{constructor(i){super(i)}init(){this._context=new kv(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(...i){this._nativeCanvas.release&&it(this._nativeCanvas.release)&&this._nativeCanvas.release()}};_g.env="node",_g=KNt([Rt(),qNt("design:paramtypes",[Object])],_g);const ZNt=Het(_g,kv);var QNt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},JNt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},tjt=function(i,t){return function(e,n){t(e,n,i)}};let vg=class extends AA{get container(){return null}constructor(i){super(),this.global=i,this.type="node"}getTitle(){return""}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(i){i.canvas?this.createWindowByCanvas(i):this.createWindowByConfig(i)}createWindowByConfig(i){const t=this.global.createCanvas({width:i.width,height:i.height}),e={width:i.width,height:i.height,dpr:i.dpr,nativeCanvas:t,id:on.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new _g(e)}createWindowByCanvas(i){var t;const e=i.canvas,n=(t=i.dpr)!==null&&t!==void 0?t:1;let r=i.width,s=i.height;r!=null&&s!=null&&i.canvasControled||(r=e.width/n,s=e.height/n),this.canvas=new _g({width:r,height:s,dpr:n,nativeCanvas:e,canvasControled:i.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(i,t){this.canvas.resize(i,t)}setDpr(i){this.canvas.dpr=i}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(i="image/png"){return this.canvas.nativeCanvas.toBuffer(i)}addEventListener(i,t,e){}dispatchEvent(i){return!0}removeEventListener(i,t,e){}getStyle(){}setStyle(i){}getBoundingClientRect(){return null}clearViewBox(i){}};vg.env="node",vg=QNt([Rt(),tjt(0,ge(oF)),JNt("design:paramtypes",[Object])],vg);const ejt=new re(i=>{i(vg).toSelf(),i(dF).toDynamicValue(t=>t.container.get(vg)).whenTargetNamed(vg.env)});var ijt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let DA=class extends wA{constructor(){super(...arguments),this.type="node",this._lastTime=0,this.supportEvent=!1}configure(i,t){i.env===this.type&&(i.setActiveEnvContribution(this),this.pkg=t)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(i){const t=fetch(i).then(e=>e.json());return t.then(e=>({data:e,state:"success"})).catch(()=>({data:null,state:"fail"})),t}loadArrayBuffer(i){return fetch(i).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadImage(i){const{loadImage:t}=this.pkg;return t?t(i).then(e=>({loadState:e?"success":"fail",data:e})).catch(()=>({loadState:"fail",data:null})):Promise.reject(new Error("node-canvas loadImage could not be found!"))}loadSvg(i){const t=this.pkg.Resvg;if(!t)return Promise.reject(new Error("@resvg/resvg-js svgParser could not be found!"));const e=new t(i).render().asPng();return this.loadImage(e)}createCanvas(i){return this.pkg.createCanvas(i.width,i.height)}releaseCanvas(i){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(i){return _$.call(i)}}getCancelAnimationFrame(){return i=>{_$.clear(i)}}addEventListener(i,t,e){}removeEventListener(i,t,e){}getElementById(i){return null}getRootElement(){return null}dispatchEvent(i){}release(...i){}createOffscreenCanvas(i){}};DA=ijt([Rt()],DA);const IA=new re(i=>{IA.isNodeBound||(IA.isNodeBound=!0,i(DA).toSelf().inSingletonScope(),i(hM).toService(DA))});IA.isNodeBound=!1;function LA(i,t=!0){LA.__loaded||(LA.__loaded=!0,i.load(IA),i.load(ZNt),i.load(ejt))}LA.__loaded=!1;var njt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},rjt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},sjt=function(i,t){return function(e,n){t(e,n,i)}};let CI=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="arc",this.numberType=vM}};CI=njt([Rt(),sjt(0,ge(iA)),rjt("design:paramtypes",[Object])],CI);let zU=!1;const ajt=new re((i,t,e,n)=>{zU||(zU=!0,i(lU).to(CI).inSingletonScope(),i(kr).toService(lU))});var ojt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},ljt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},ujt=function(i,t){return function(e,n){t(e,n,i)}};let MI=class extends Wet{constructor(i){super(),this.canvasRenderer=i}};MI=ojt([Rt(),ujt(0,ge(lA)),ljt("design:paramtypes",[Object])],MI);let NU=!1;const cjt=new re((i,t,e,n)=>{NU||(NU=!0,i(gU).to(MI).inSingletonScope(),i(kr).toService(gU))});class $et extends ks{contains(t,e,n){if(!t.AABBBounds.containsPoint(e))return!1;if(t.attribute.pickMode==="imprecise")return!0;const{pickContext:r}=n??{};if(!r)return!1;r.highPerformanceSave();const s=t.getGraphicTheme(),a=this.transform(t,s,r),{x:o,y:l,z:u,lastModelMatrix:c}=a;let h=e;if(r.camera){h=e.clone();const f=t.parent.globalTransMatrix;h.x=f.a*e.x+f.c*e.y+f.e,h.y=f.b*e.x+f.d*e.y+f.f}this.canvasRenderer.z=u;let d=!1;return this.canvasRenderer.drawShape(t,r,o,l,{},null,f=>!!d||(d=f.isPointInPath(h.x,h.y),d),(f,p,g)=>{if(d)return!0;const m=p.lineWidth||g.lineWidth,_=p.pickStrokeBuffer||g.pickStrokeBuffer,v=p.keepStrokeScale||g.keepStrokeScale;return r.lineWidth=v?m+_:Ql(r,m+_,r.dpr),d=f.isPointInStroke(h.x,h.y),d}),this.canvasRenderer.z=0,r.modelMatrix!==c&&Fi.free(r.modelMatrix),r.modelMatrix=c,r.highPerformanceRestore(),d}}var hjt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},djt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},fjt=function(i,t){return function(e,n){t(e,n,i)}};let TI=class extends $et{constructor(i){super(),this.canvasRenderer=i,this.type="line",this.numberType=Ib}};TI=hjt([Rt(),fjt(0,ge(sA)),djt("design:paramtypes",[Object])],TI);let jU=!1;const pjt=new re((i,t,e,n)=>{jU||(jU=!0,i(fU).to(TI).inSingletonScope(),i(kr).toService(fU))});var gjt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},mjt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},_jt=function(i,t){return function(e,n){t(e,n,i)}};let PI=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="area",this.numberType=Db}};PI=gjt([Rt(),_jt(0,ge(nA)),mjt("design:paramtypes",[Object])],PI);let HU=!1;const vjt=new re((i,t,e,n)=>{HU||(HU=!0,i(cU).to(PI).inSingletonScope(),i(kr).toService(cU))});class zb extends ks{contains(t,e,n){const{pickContext:r}=n??{};if(!r)return!1;const s=t.getGraphicTheme();r.highPerformanceSave();const a=this.transform(t,s,r),{x:o,y:l,z:u,lastModelMatrix:c}=a;let h=e;if(r.camera){h=e.clone();const f=t.parent.globalTransMatrix;h.x=f.a*e.x+f.c*e.y+f.e,h.y=f.b*e.x+f.d*e.y+f.f}this.canvasRenderer.z=u;let d=!1;return this.canvasRenderer.drawShape(t,r,o,l,n,null,(f,p,g)=>!!d||(d=f.isPointInPath(h.x,h.y),d)),this.canvasRenderer.z=0,r.modelMatrix!==c&&Fi.free(r.modelMatrix),r.modelMatrix=c,r.highPerformanceRestore(),d}}var yjt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},bjt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},xjt=function(i,t){return function(e,n){t(e,n,i)}};let EI=class extends zb{constructor(i){super(),this.canvasRenderer=i,this.type="symbol",this.numberType=AM}contains(i,t,e){const{pickContext:n}=e??{};if(!n)return!1;const r=i.getParsedPath();if(!n.camera){if(!i.AABBBounds.containsPoint(t))return!1;if(r.isSvg||i.attribute.pickMode==="imprecise")return!0}n.highPerformanceSave();const s=i.getGraphicTheme(),a=this.transform(i,s,n),{x:o,y:l,z:u,lastModelMatrix:c}=a;let h=t;if(n.camera){h=t.clone();const f=i.parent.globalTransMatrix;h.x=f.a*t.x+f.c*t.y+f.e,h.y=f.b*t.x+f.d*t.y+f.f}this.canvasRenderer.z=u;let d=!1;return this.canvasRenderer.drawShape(i,n,o,l,{},null,(f,p,g)=>!!d||(d=f.isPointInPath(h.x,h.y),d),(f,p,g)=>{if(d)return!0;const m=p.lineWidth||g.lineWidth,_=p.pickStrokeBuffer||g.pickStrokeBuffer,v=p.keepStrokeScale||g.keepStrokeScale;return n.lineWidth=v?m+_:Ql(n,m+_,n.dpr),d=f.isPointInStroke(h.x,h.y),d}),this.canvasRenderer.z=0,n.modelMatrix!==c&&Fi.free(n.modelMatrix),n.modelMatrix=c,n.highPerformanceRestore(),d}};EI=yjt([Rt(),xjt(0,ge(uA)),bjt("design:paramtypes",[Object])],EI);let VU=!1;const Sjt=new re((i,t,e,n)=>{VU||(VU=!0,i(_U).to(EI).inSingletonScope(),i(kr).toService(_U))});var wjt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},Ajt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},kjt=function(i,t){return function(e,n){t(e,n,i)}};let RI=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="circle",this.numberType=bM}};RI=wjt([Rt(),kjt(0,ge(rA)),Ajt("design:paramtypes",[Object])],RI);let WU=!1;const Cjt=new re((i,t,e,n)=>{WU||(WU=!0,i(hU).to(RI).inSingletonScope(),i(kr).toService(hU))});var Mjt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},Tjt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},Pjt=function(i,t){return function(e,n){t(e,n,i)}};let OI=class extends zb{constructor(i){super(),this.canvasRenderer=i,this.type="text",this.numberType=kM}contains(i,t,e){const{pickContext:n}=e??{};if(!n)return!1;const r=i.AABBBounds;if(!n.camera)return!!r.containsPoint(t);n.highPerformanceSave();const s=i.getGraphicTheme(),{keepDirIn3d:a=s.keepDirIn3d}=i.attribute,o=!a,l=this.transform(i,s,n,o),{x:u,y:c,z:h,lastModelMatrix:d}=l;this.canvasRenderer.z=h;let f=t;if(n.camera){f=t.clone();const g=i.parent.globalTransMatrix;f.x=g.a*t.x+g.c*t.y+g.e,f.y=g.b*t.x+g.d*t.y+g.f}let p=!1;return this.canvasRenderer.drawShape(i,n,u,c,{},null,(g,m,_)=>{if(p)return!0;const{fontSize:v=s.fontSize,textBaseline:y=s.textBaseline,textAlign:b=s.textAlign}=i.attribute,x=i.AABBBounds,S=x.height(),w=x.width(),A=Gw(y,S,v),k=h0(b,w);return g.rect(k+u,A+c,w,S,h),p=g.isPointInPath(f.x,f.y),p},(g,m,_)=>p),this.canvasRenderer.z=0,n.modelMatrix!==d&&Fi.free(n.modelMatrix),n.modelMatrix=d,n.highPerformanceRestore(),p}};OI=Mjt([Rt(),Pjt(0,ge(JD)),Tjt("design:paramtypes",[Object])],OI);let $U=!1;const Ejt=new re((i,t,e,n)=>{$U||($U=!0,i(vU).to(OI).inSingletonScope(),i(kr).toService(vU))});var Rjt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},Ojt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},Djt=function(i,t){return function(e,n){t(e,n,i)}};let DI=class extends $et{constructor(i){super(),this.canvasRenderer=i,this.type="path",this.numberType=SM}};DI=Rjt([Rt(),Djt(0,ge(aA)),Ojt("design:paramtypes",[Object])],DI);let UU=!1;const Ijt=new re((i,t,e,n)=>{UU||(UU=!0,i(pU).to(DI).inSingletonScope(),i(kr).toService(pU))});var Ljt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},Bjt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},Fjt=function(i,t){return function(e,n){t(e,n,i)}};let II=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="polygon",this.numberType=wM}};II=Ljt([Rt(),Fjt(0,ge(oA)),Bjt("design:paramtypes",[Object])],II);let GU=!1;const zjt=new re((i,t,e,n)=>{GU||(GU=!0,i(yU).to(II).inSingletonScope(),i(kr).toService(yU))});var Njt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},jjt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},Hjt=function(i,t){return function(e,n){t(e,n,i)}};let LI=class extends Vet{constructor(i){super(),this.canvasRenderer=i}};LI=Njt([Rt(),Hjt(0,ge(cA)),jjt("design:paramtypes",[Object])],LI);let YU=!1;const Vjt=new re((i,t,e,n)=>{YU||(YU=!0,i(SU).to(LI).inSingletonScope(),i(kr).toService(SU))});var Wjt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},$jt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},Ujt=function(i,t){return function(e,n){t(e,n,i)}};let BI=class{constructor(i){this.canvasRenderer=i,this.type="richtext",this.numberType=vF}contains(i,t,e){return!!i.AABBBounds.containsPoint(t)}};BI=Wjt([Rt(),Ujt(0,ge(tI)),$jt("design:paramtypes",[Object])],BI);let XU=!1;const Gjt=new re((i,t,e,n)=>{XU||(XU=!0,i(xU).to(BI).inSingletonScope(),i(kr).toService(xU))});var Yjt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},Xjt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},Kjt=function(i,t){return function(e,n){t(e,n,i)}};let FI=class extends go{constructor(i){super(),this.canvasRenderer=i,this.type="image",this.numberType=xM}};FI=Yjt([Rt(),Kjt(0,ge(iI)),Xjt("design:paramtypes",[Object])],FI);let KU=!1;const qjt=new re((i,t,e,n)=>{KU||(KU=!0,i(dU).to(FI).inSingletonScope(),i(kr).toService(dU))});var Zjt=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},Qjt=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},Jjt=function(i,t){return function(e,n){t(e,n,i)}};let zI=class extends zb{constructor(i){super(),this.canvasRenderer=i,this.type="rect3d",this.numberType=_F,this.themeType="rect"}};zI=Zjt([Rt(),Jjt(0,ge(QD)),Qjt("design:paramtypes",[Object])],zI);let qU=!1;const t3t=new re((i,t,e,n)=>{qU||(qU=!0,i(mU).to(zI).inSingletonScope(),i(kr).toService(mU))});var e3t=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},i3t=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},n3t=function(i,t){return function(e,n){t(e,n,i)}};let NI=class extends zb{constructor(i){super(),this.canvasRenderer=i,this.type="arc3d",this.numberType=yM,this.themeType="arc"}};NI=e3t([Rt(),n3t(0,ge(ZD)),i3t("design:paramtypes",[Object])],NI);let ZU=!1;const r3t=new re((i,t,e,n)=>{ZU||(ZU=!0,i(uU).to(NI).inSingletonScope(),i(kr).toService(uU))});var s3t=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a},a3t=function(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)},o3t=function(i,t){return function(e,n){t(e,n,i)}};let jI=class extends zb{constructor(i){super(),this.canvasRenderer=i,this.type="pyramid3d",this.numberType=gF,this.themeType="polygon"}};jI=s3t([Rt(),o3t(0,ge(eI)),a3t("design:paramtypes",[Object])],jI);let QU=!1;const l3t=new re((i,t,e,n)=>{QU||(QU=!0,i(bU).to(jI).inSingletonScope(),i(kr).toService(bU))}),mo=BF();function BA(){BA.__loaded||(BA.__loaded=!0,_zt(),te.load(XFt),te.load(mo?ajt:uNt))}BA.__loaded=!1;const zm=BA;function FA(){FA.__loaded||(FA.__loaded=!0,vzt(),FF(),zF(),te.load(pzt),te.load(r3t))}FA.__loaded=!1;const u3t=FA;function zA(){zA.__loaded||(zA.__loaded=!0,yzt(),te.load(ZFt),te.load(mo?vjt:fNt))}zA.__loaded=!1;const jF=zA;function NA(){NA.__loaded||(NA.__loaded=!0,bzt(),te.load(JFt),te.load(mo?Cjt:_Nt))}NA.__loaded=!1;const c3t=NA;function jA(){jA.__loaded||(jA.__loaded=!0,xzt(),te.load(rzt),te.load(mo?Vjt:xNt))}jA.__loaded=!1;const h3t=jA;function HA(){HA.__loaded||(HA.__loaded=!0,Szt())}HA.__loaded=!1;const ln=HA;function VA(){VA.__loaded||(VA.__loaded=!0,wzt(),te.load(lzt),te.load(mo?qjt:wNt))}VA.__loaded=!1;const Uet=VA;function WA(){WA.__loaded||(WA.__loaded=!0,Azt(),te.load(qFt),te.load(mo?pjt:MNt))}WA.__loaded=!1;const Jl=WA;function $A(){$A.__loaded||($A.__loaded=!0,kzt(),te.load(ezt),te.load(mo?Ijt:LNt))}$A.__loaded=!1;const Nm=$A;function UA(){UA.__loaded||(UA.__loaded=!0,Czt(),te.load(izt),te.load(mo?zjt:RNt))}UA.__loaded=!1;const IM=UA;function GA(){GA.__loaded||(GA.__loaded=!0,Mzt(),FF(),zF(),te.load(mzt),te.load(l3t))}GA.__loaded=!1;const d3t=GA;function YA(){YA.__loaded||(YA.__loaded=!0,Tzt(),te.load(KFt),te.load(mo?cjt:NNt))}YA.__loaded=!1;const tu=YA;function XA(){XA.__loaded||(XA.__loaded=!0,Pzt(),te.load(czt),te.load(t3t))}XA.__loaded=!1;const f3t=XA;function KA(){KA.__loaded||(KA.__loaded=!0,Ezt(),te.load(ozt),te.load(mo?Gjt:jNt))}KA.__loaded=!1;const yf=KA;function qA(){qA.__loaded||(qA.__loaded=!0,Dzt())}qA.__loaded=!1;const as=qA;function ZA(){ZA.__loaded||(ZA.__loaded=!0,Rzt(),te.load(QFt),te.load(mo?Sjt:$Nt))}ZA.__loaded=!1;const Ta=ZA;function QA(){QA.__loaded||(QA.__loaded=!0,Ozt(),te.load(tzt),te.load(mo?Ejt:GNt))}QA.__loaded=!1;const eu=QA;function Get(){ln(),tu()}const tm=-.5*Math.PI,em=1.5*Math.PI,Cv="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",p3t=14;var pn;(function(i){i.selected="selected",i.selectedReverse="selected_reverse",i.hover="hover",i.hoverReverse="hover_reverse"})(pn||(pn={}));const Pe={[pn.selectedReverse]:{},[pn.selected]:{},[pn.hover]:{},[pn.hoverReverse]:{}},JA={container:"",width:30,height:30,style:{}},g3t="scrollDown",Yet="scrollDrag",m3t="scrollUp";function Ad(){return Qt.env==="browser"?["pointerup","pointerleave","pointercancel"]:["pointerup","pointerleave","pointerupoutside"]}const JU={debounce:pf,throttle:ac};Get();let y0=class Xet extends fr{constructor(t,e){super(e?.skipDefault?t:ot({},Xet.defaultAttributes,t)),this.name="scrollbar",this._handleTouchMove=n=>{L(this._prePos)&&n.preventDefault()},this._onRailPointerDown=n=>{const{viewX:r,viewY:s}=n,{direction:a,width:o,height:l,range:u}=this.attribute,c=this._sliderSize,[h,d]=this._getScrollRange();let f;if(a==="vertical"){const p=s-this._viewPosition.y,g=Ke(p-c/2,h,d);f=p/l,this._slider.setAttribute("y",g,!0)}else{const p=r-this._viewPosition.x,g=Ke(p-c/2,h,d);f=p/o,this._slider.setAttribute("x",g,!0)}this.setScrollRange([f-(u[1]-u[0])/2,f+(u[1]-u[0])/2],!1),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()},this._onSliderPointerDown=n=>{this._clearDragEvents();const{stopSliderDownPropagation:r=!0}=this.attribute;r&&n.stopPropagation();const{direction:s}=this.attribute,{x:a,y:o}=this.stage.eventPointTransform(n);this._prePos=s==="horizontal"?a:o,this._dispatchEvent(g3t,{pos:this._prePos,event:n});const l=Ad(),u=Qt.env==="browser"?Qt:this.stage;u.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),l.forEach(c=>{u.addEventListener(c,this._onSliderPointerUp)})},this._computeScrollValue=n=>{const{direction:r}=this.attribute,{x:s,y:a}=this.stage.eventPointTransform(n);let o,l,u=0;const{width:c,height:h}=this.getSliderRenderBounds();return r==="vertical"?(l=a,u=l-this._prePos,o=u/h):(l=s,u=l-this._prePos,o=u/c),[l,o]},this._onSliderPointerMove=n=>{const{stopSliderMovePropagation:r=!0}=this.attribute;r&&n.stopPropagation();const s=this.getScrollRange(),[a,o]=this._computeScrollValue(n);this.setScrollRange([s[0]+o,s[1]+o],!0),this._prePos=a},this._onSliderPointerMoveWithDelay=this.attribute.delayTime===0?this._onSliderPointerMove:JU[this.attribute.delayType](this._onSliderPointerMove,this.attribute.delayTime),this._onSliderPointerUp=n=>{const{range:r,limitRange:s=[0,1]}=this.attribute,a=this.getScrollRange(),[o,l]=this._computeScrollValue(n),u=[a[0]+l,a[1]+l];this._prePos=null,this._dispatchEvent(m3t,{pre:r,value:Yh(u,s[0],s[1])}),this._clearDragEvents()}}setScrollRange(t,e=!0){const{direction:n="horizontal",limitRange:r=[0,1],range:s,realTime:a=!0}=this.attribute,o=Yh(t,r[0],r[1]);if(e){const l=this._getSliderPos(o);if(this._slider){const u=l[1]-l[0];this._sliderSize=u,n==="horizontal"?this._slider.setAttributes({x:l[0],width:u},!0):this._slider.setAttributes({y:l[0],height:u},!0),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()}}this.attribute.range=o,a&&this._dispatchEvent(Yet,{pre:s,value:o})}getScrollRange(){return this.attribute.range}bindEvents(){if(this.attribute.disableTriggerEvent)return;const{delayType:t="throttle",delayTime:e=0}=this.attribute;this._rail&&this._rail.addEventListener("pointerdown",JU[t](this._onRailPointerDown,e)),this._slider&&this._slider.addEventListener("pointerdown",this._onSliderPointerDown),(Qt.env==="browser"?Qt:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1})}render(){this._reset();const{direction:t="horizontal",width:e,height:n,range:r,limitRange:s=[0,1],railStyle:a,sliderStyle:o,padding:l=2}=this.attribute,u=this.createOrUpdateChild("scrollbar-container",{},"group"),c=u.createOrUpdateChild("scrollbar-rail",Object.assign({x:0,y:0,width:e,height:n},a),"rect");this._rail=c;const h=this.getSliderRenderBounds(),d=this._getSliderPos(Yh(r,s[0],s[1])),f=d[1]-d[0];let p;this._sliderSize=f,p=t==="horizontal"?{x:d[0],y:h.y1,width:f,height:h.height}:{x:h.x1,y:d[0],width:h.width,height:f};const g=u.createOrUpdateChild("slider",Object.assign(Object.assign(Object.assign(Object.assign({},p),{cornerRadius:this._getDefaultSliderCornerRadius()}),o),{boundsPadding:zr(l),pickMode:"imprecise"}),"rect");this._slider=g,this._container=u;const m=this._container.AABBBounds;this._viewPosition={x:m.x1,y:m.y1}}getSliderRenderBounds(){if(this._sliderRenderBounds)return this._sliderRenderBounds;const{width:t,height:e,padding:n=2}=this.attribute,[r,s,a,o]=zr(n),l={x1:o,y1:r,x2:t-s,y2:e-a,width:Math.max(0,t-(o+s)),height:Math.max(0,e-(r+a))};return this._sliderRenderBounds=l,l}_getDefaultSliderCornerRadius(){const{direction:t,round:e}=this.attribute;if(e){const{width:n,height:r}=this.getSliderRenderBounds();return t==="horizontal"?r:n}return 0}_getSliderPos(t){const{direction:e}=this.attribute,{width:n,height:r,x1:s,y1:a}=this.getSliderRenderBounds();return e==="horizontal"?[n*t[0]+s,n*t[1]+s]:[r*t[0]+a,r*t[1]+a]}_getScrollRange(){if(this._sliderLimitRange)return this._sliderLimitRange;const{limitRange:t=[0,1],direction:e}=this.attribute,[n,r]=Yh(t,0,1),{width:s,height:a,x1:o,y1:l}=this.getSliderRenderBounds(),u=this._sliderSize;return e==="horizontal"?Yh([o+n*s,o+r*s],o,s-u):Yh([l+n*a,l+r*a],l,a-u)}_clearDragEvents(){const t=Ad(),e=Qt.env==="browser"?Qt:this.stage;e.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),t.forEach(n=>{e.removeEventListener(n,this._onSliderPointerUp)})}_reset(){this._sliderRenderBounds=null,this._sliderLimitRange=null}release(t){super.release(t),(Qt.env==="browser"?Qt:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}),this._clearDragEvents()}};y0.defaultAttributes={direction:"horizontal",round:!0,sliderSize:20,sliderStyle:{fill:"rgba(0, 0, 0, .5)"},railStyle:{fill:"rgba(0, 0, 0, .0)"},padding:2,scrollRange:[0,1],delayType:"throttle",delayTime:0,realTime:!0};var HI,_3t=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};let yg=HI=class{constructor(){this.name="scrollbar",this.activeEvent="onRegister",this._uid=on.GenAutoIncrementId(),this.key=this.name+this._uid,this.scroll=i=>{var t,e;const n=i.target,r=this.getScrollContainer(n);if(!r&&!this.scrollContainer)return;if(!r&&this.scrollContainer){if(!this.scrollContainer.g.stage||this.scrollContainer.g.stage!==n.stage)return;const m=this.formatScrollContainer(this.scrollContainer.g);if(!m)return void this.clearScrollbar(this.scrollContainer.g,"all");this.scrollContainer.showH&&!m.showH&&this.clearScrollbar(this.scrollContainer.g,"horizontal"),this.scrollContainer.showV&&!m.showV&&this.clearScrollbar(this.scrollContainer.g,"vertical"),this.scrollContainer=m}else r&&this.scrollContainer&&r.g!==this.scrollContainer.g&&this.clearScrollbar(this.scrollContainer.g,"all");if(this.scrollContainer=r??this.scrollContainer,!r)return;const s=r.g;if(!s)return;const{width:a,height:o,scrollX:l=0,scrollY:u=0}=s.attribute;let c=l,h=u,{showH:d,showV:f}=r;this.scrollContainerBounds=new ir().set(0,0,s.attribute.width,s.attribute.height),d&&d&&(xe(i.deltaX)>xe(i.deltaY)?(d=d&&!0,f=f&&!1):(d=d&&!1,f=f&&!0));const p=this.childrenBounds.width(),g=this.childrenBounds.height();d&&(c=l-((t=i.deltaX)!==null&&t!==void 0?t:0),c>0?c=0:c<a-p&&(c=a-p)),f&&(h=u-((e=i.deltaY)!==null&&e!==void 0?e:0),h>0?h=0:h<o-g&&(h=o-g)),s.setAttributes({scrollX:c,scrollY:h}),this.addOrUpdateScroll(d,f,s.parent,s)},this.handleScrollBarChange=i=>{if(!(this.scrollContainer&&this.scrollContainerBounds&&this.childrenBounds&&i&&i.target&&i.detail&&i.detail.value))return;const t=i.target,e=i.detail.value;if(t.attribute.direction==="horizontal"){const n=this.childrenBounds.width();this.scrollContainer.g.setAttributes({scrollX:-e[0]*n})}else{const n=this.childrenBounds.height();this.scrollContainer.g.setAttributes({scrollY:-e[0]*n})}}}activate(i){this.pluginService=i;const{stage:t}=this.pluginService;this.childrenBounds=new Gi,t.addEventListener("wheel",this.scroll),this.params=HI.defaultParams}initEventOfScrollbar(i,t,e){i.addEventListener("pointerover",()=>{t.setAttribute("visibleAll",!0)}),i.addEventListener("pointermove",()=>{t.setAttribute("visibleAll",!0)}),i.addEventListener("pointerout",()=>{t.setAttribute("visibleAll",!1)}),t.addEventListener("pointerover",()=>{t.setAttribute("visibleAll",!0)}),t.addEventListener("pointerout",()=>{t.setAttribute("visibleAll",!0)}),t.addEventListener("scrollUp",this.handleScrollBarChange),t.addEventListener(Yet,this.handleScrollBarChange)}addOrUpdateScroll(i,t,e,n){if(i){const{scrollBar:r,isUpdate:s}=this.addOrUpdateHScroll(n,e,!0);s||this.initEventOfScrollbar(n,r,!0)}else this.clearScrollbar(n,"horizontal");if(t){const{scrollBar:r,isUpdate:s}=this.addOrUpdateHScroll(n,e,!1);s||this.initEventOfScrollbar(n,r,!1)}else this.clearScrollbar(n,"vertical")}getDirection(i){return i?"horizontal":"vertical"}addOrUpdateHScroll(i,t,e){var n,r;const s=this.getDirection(e),a=`${(n=i.name)!==null&&n!==void 0?n:i._uid}_${this.getDirection(e)}_${this.name}`,o=t.children.filter(x=>x.name===a);let l=!0,u=o[0];const{y:c=0,dy:h=0,x:d=0,dx:f=0,height:p,width:g,zIndex:m=0}=this.scrollContainer.g.attribute,_={x:0,y:0,direction:s,zIndex:m+1,visibleAll:!0,padding:[2,0],railStyle:{fill:"rgba(0, 0, 0, .1)"},range:[0,.05]};e?(_.width=this.scrollContainerBounds.width(),_.height=12):(_.height=this.scrollContainerBounds.height(),_.width=12),u?o.length>1&&o.forEach((x,S)=>{var w;S&&((w=x.parent)===null||w===void 0||w.removeChild(x))}):(l=!1,u=new y0(_),u.name=a,t.add(u),u.isScrollBar=!0);const v=this.childrenBounds,{scrollX:y,scrollY:b}=i.attribute;if(e){const x=Math.min(this.scrollContainerBounds.width()/v.width(),1),S=Math.max(Math.min(y/this.childrenBounds.width(),0),x-1);_.x=d+f,_.y=c+h+p-((r=_.height)!==null&&r!==void 0?r:0),_.range=[-S,-S+x]}else{const x=Math.min(this.scrollContainerBounds.height()/v.height(),1),S=Math.max(Math.min(b/this.childrenBounds.height(),0),x-1);_.x=d+f+g-this.scrollContainerBounds.width(),_.y=c+h,_.range=[-S,-S+x]}return u.setAttributes(_),{scrollBar:u,isUpdate:l}}clearScrollbar(i,t){i.parent&&i.parent.children.filter(e=>e.isScrollBar&&(t==="all"||e.attribute.direction===t)).forEach(e=>{e.parent.removeChild(e)})}formatScrollContainer(i){if(!i||i.type!=="group"||!i.attribute)return null;const{overflow:t,width:e,height:n}=i.attribute;if(!t||t==="hidden")return null;let r=!1,s=!1;t==="scroll"?(r=!0,s=!0):(r=t==="scroll-x",s=!r);const a=this.childrenBounds;return a.clear(),i.forEachChildren(o=>{a.union(o.AABBBounds)}),i.AABBBounds.empty()||(r&&(r=e<a.width()),s&&(s=n<a.height())),r||s?{g:i,showH:r,showV:s}:null}getScrollContainer(i){let t=i;for(;t;){const e=this.formatScrollContainer(t);if(e)return e;t=t.parent}return null}deactivate(i){const{stage:t}=this.pluginService;t.removeEventListener("wheel",this.scroll)}};yg.defaultParams={timeout:500},yg=HI=_3t([Rt()],yg);const v3t=new re((i,t,e,n)=>{e(yg)||(i(yg).toSelf(),i(Zg).toService(yg))});function y3t(){te.load(v3t)}function jo(i,t){i.forEachChildren(e=>{const n=t(e);e.isContainer&&!n&&jo(e,t)})}const Qi=i=>!N(i)&&i.visible!==!1;function b3t(i,t){if(!t)return[];const e=i.find(n=>n.name===t,!0);return e?e.getChildren():[]}function x3t(i,t){if(!t)return[];const e=i.find(n=>n.name===t,!0);return e?e.findAll(n=>n.type!=="group",!0):[]}function S3t(i){const t=[i[0]];for(let e=1;e<i.length;e++)i[e].x===i[e-1].x&&i[e].y===i[e-1].y||t.push(i[e]);return t}function tk(i){return i>=0&&i<Math.PI/2||i>3*Math.PI/2&&i<=2*Math.PI}function pl(i,t,e){return Math.abs(i-t)<e}function Ket(i,t,e){return i?{textAlign:"right",textBaseline:"middle"}:{textAlign:t<Math.PI&&e.toLocaleLowerCase().includes("top")||t>Math.PI&&e.toLocaleLowerCase().includes("bottom")?"left":t<Math.PI&&e.toLocaleLowerCase().includes("bottom")||t>Math.PI&&e.toLocaleLowerCase().includes("top")?"right":"center",textBaseline:t<Math.PI&&e.includes("inside")||t>Math.PI&&!e.includes("inside")?"bottom":"top"}}const w3t=["#ffffff","#000000"];function VI(i,t,e,n,r,s){if(typeof i!="string"||typeof t!="string")return i;const a=new Mn(i).toHex(),o=new Mn(t).toHex();return HF(a,o,e,n,s)?a:A3t(a,o,e,n,r,s)}function A3t(i,t,e,n,r,s){const a=[];r&&(r instanceof Array?a.push(...r):a.push(r)),a.push(...w3t);for(const o of a)if(i!==o&&HF(o,t,e,n,s))return o}function HF(i,t,e,n,r){if(r==="lightness"){const s=Mn.getColorBrightness(new Mn(t));return Mn.getColorBrightness(new Mn(i))<.5?s>=.5:s<.5}return n?NE(i,t)>n:e==="largeText"?NE(i,t)>3:NE(i,t)>4.5}function NE(i,t){const e=t4(i),n=t4(t);return((e>n?e:n)+.05)/((e>n?n:e)+.05)}function t4(i){const t=SJ(i),e=t[0]/255,n=t[1]/255,r=t[2]/255;let s,a,o;return s=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),a=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),o=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o}function MS(i,t,e,n){let r;switch(i){case"base":r=t;break;case"invertBase":r=e;break;case"similarBase":r=n}return r}function qet(i,t){return[i[0]*t,i[1]*t]}function Zet(i){const[t,e]=i;return Math.sqrt(t*t+e*e)}function k3t(i){let t=Zet(i);return t>0&&(t=1/t),[i[0]*t,i[1]*t]}function C3t(i,t){const[e,n]=i,[r,s]=t,a=Math.sqrt((e*e+n*n)*(r*r+s*s)),o=a&&(e*r+n*s)/a;return Math.acos(Math.min(Math.max(o,-1),1))}function e4(i,t,e){const n=C3t(i,t),r=yw(i,t)>=0;return e?r?2*Math.PI-n:n:r?n:2*Math.PI-n}const bg=(i,t,e,n)=>new Zr(Object.assign({defaultFontParams:Object.assign({fontFamily:Cv,fontSize:p3t},n),getTextBounds:e?void 0:EM,specialCharSet:`-/: .,@%'"~`+Zr.ALPHABET_CHAR_SET+Zr.ALPHABET_CHAR_SET.toUpperCase()},t??{}),i);function LM(i,t,e={}){if(!i)return{width:0,height:0};const n=EM({text:i,fontFamily:t.fontFamily||e.fontFamily||Cv,fontSize:t.fontSize||e.fontSize||12,fontWeight:t.fontWeight||e.fontWeight,textAlign:t.textAlign||"center",textBaseline:t.textBaseline,ellipsis:!!t.ellipsis,maxLineWidth:t.maxLineWidth||1/0,lineHeight:t.fontSize||e.fontSize||12});return{width:n.width(),height:n.height()}}function M3t(i,t="type"){return Qet(i,t)==="rich"}function Qet(i,t="type"){var e,n;return ee(i.text)&&"type"in i.text?(e=i.text.type)!==null&&e!==void 0?e:"text":t in i&&(n=i[t])!==null&&n!==void 0?n:"text"}function Jet(i){var t,e;return L(i.maxLineWidth)&&(i.maxWidth=i.maxLineWidth,delete i.maxLineWidth),i.width=(t=i.width)!==null&&t!==void 0?t:0,i.height=(e=i.height)!==null&&e!==void 0?e:0,i.textConfig=i.text.text||i.text,i}function T3t(i){const{text:t,_originText:e}=i,{text:n}=t;return i.html=n,i.text=e,i.renderable=!1,i}function P3t(i){const{text:t,_originText:e}=i,{text:n}=t;return i.react=n,i.text=e,i.renderable=!1,i}function b0(i,t="type"){const e=Qet(i,t);return e==="rich"?Mt.richtext(Jet(i)):(e==="html"?i=T3t(i):e==="react"&&(i=P3t(i)),Mt.text(i))}function i4(i,t,e,n,r){i==="right"?e==="center"?t.setAttribute("x",n-r/2):e==="right"||e==="end"?t.setAttribute("x",n):t.setAttribute("x",n-r):e==="center"?t.setAttribute("x",n+r/2):e==="right"||e==="end"?t.setAttribute("x",n+r):t.setAttribute("x",n)}const Gf=(i,t)=>{const e=Math.atan2(i,t);return e<0?e+2*Math.PI:e};function tit(i,t){const{x1:e,y1:n,x2:r,y2:s}=t,{x1:a,y1:o,x2:l,y2:u}=i.AABBBounds;let c=0,h=0;return a<e&&(c=e-a),o<n&&(h=n-o),l>r&&(c=r-l),u>s&&(h=s-u),{dx:c,dy:h}}function VF(i,t){const{dx:e,dy:n}=tit(i,t),{dx:r=0,dy:s=0}=i.attribute;e&&i.setAttribute("dx",e+r),n&&i.setAttribute("dy",n+s)}function BM(){ln(),tu(),Ta(),yf(),eu()}var n4=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};BM();class qo extends fr{getBgRect(){return this._bgRect}getTextShape(){return this._textShape}constructor(t,e){super(e?.skipDefault?t:ot({},qo.defaultAttributes,t)),this.name="tag",this._tagStates=[],this._rectStates=[],this._symbolStates=[],this._textStates=[]}render(){var t,e,n;this.cacheStates();const{text:r="",textStyle:s={},shape:a={},panel:o={},space:l=4,minWidth:u,maxWidth:c,padding:h=4,visible:d,state:f,type:p,textAlwaysCenter:g,containerTextAlign:m}=this.attribute,_=zr(h),v=this.createOrUpdateChild("tag-content",{x:0,y:0,zIndex:1},"group");let y,b=-_[3],x=-_[0],S=_[1]+_[3],w=_[0]+_[2],A=0,k=0;const{visible:C}=a,M=n4(a,["visible"]);if(Vn(C)){const Z=M?.size||10,at=yt(Z)?Z:Math.max(Z[0],Z[1]);y=v.createOrUpdateChild("tag-shape",Object.assign(Object.assign({symbolType:"circle",size:Z,strokeBoundsBuffer:0},M),{visible:C,x:at/2,y:at/2}),"symbol"),Lt(f?.shape)||(y.states=f.shape),C&&(k=at+l)}let R,P,O;if(S+=k,A+=k,M3t({text:r})||p==="rich"){const Z=Object.assign(Object.assign(Object.assign({},Jet(Object.assign({type:p,text:r},s))),s),{visible:L(r)&&d!==!1,x:A,y:0});N(Z.lineHeight)&&(Z.lineHeight=s.fontSize),R=v.createOrUpdateChild("tag-text",Z,"richtext"),P=R.AABBBounds.width(),O=R.AABBBounds.height()}else{const Z=Object.assign(Object.assign({text:ee(r)&&"type"in r&&r.type==="text"?r.text:r,visible:L(r)&&d!==!1,lineHeight:s?.fontSize},s),{x:A,y:0});N(Z.lineHeight)&&(Z.lineHeight=s.fontSize),R=v.createOrUpdateChild("tag-text",Z,"text");const at=LM(Z.text,s,(e=(t=this.stage)===null||t===void 0?void 0:t.getTheme())===null||e===void 0?void 0:e.text);P=at.width,O=at.height}S+=P;const T=(n=a.size)!==null&&n!==void 0?n:10,D=yt(T)?T:Math.max(T[0],T[1]);w+=Math.max(O,a.visible?D:0);const{textAlign:B,textBaseline:I}=s;(L(u)||L(c))&&(L(u)&&S<u&&(S=u),L(c)&&S>c&&(S=c,R.setAttribute("maxLineWidth",c-_[1]-_[2]))),b=0,x=0;let F=0;B==="left"||B==="start"?F=1:B==="right"||B==="end"?F=-1:B==="center"&&(F=0),F?F<0?(b-=S,y&&y.setAttribute("x",(y.attribute.x||0)-P),v.setAttribute("x",-_[1]-k)):F>0&&v.setAttribute("x",_[3]):(b-=S/2,y&&y.setAttribute("x",(y.attribute.x||0)-P/2),v.setAttribute("x",-k/2));const j=m==="right"||m==="end",H=m==="left"||m==="start",U=(Z,at)=>{R.type==="richtext"?R.setAttributes({x:Z,textAlign:at,textConfig:X(R.attribute.textConfig).map($=>Object.assign(Object.assign({},$),{textAlign:at}))}):R.setAttributes({x:Z,textAlign:at})};if((m?m==="center":g)&&F){const Z=S-_[1]-_[3],at=P+k,$=F===1?(Z-at)/2+k+P/2:_[0]+k-(S/2+at/2-k)+P/2;if(U($,"center"),y){const ft=$-P/2-k+D/2;y.setAttributes({x:ft})}}if(H&&F!==1){const Z=S-_[1]-_[3],at=F===0?-Z/2+k/2:-S+_[3]+_[1]+k;if(U(at+k,"left"),y){const $=at+D/2;y.setAttributes({x:$})}}if(j&&F!==-1){const Z=S-_[1]-_[3],at=F===0?Z/2+k/2:Z;if(U(at,"right"),y){const $=at-P-k+D/2;y.setAttributes({x:$})}}I==="middle"?(x-=w/2,y&&y.setAttribute("y",0)):I==="bottom"?(x-=w,y&&y.setAttribute("y",-O/2),v.setAttribute("y",-_[2])):I==="top"&&(v.setAttribute("y",_[0]),y&&y.setAttribute("y",O/2)),Lt(f?.text)||(R.states=f.text);const{visible:K}=o,q=n4(o,["visible"]);if(d&&Vn(K)){const Z=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},q),{visible:K&&!!r,width:S,height:w,x:b,y:x}),"rect");if(Lt(f?.panel)||(Z.states=f.panel),q.customShape){const at=q.customShape;Z.pathProxy=$=>at(this,$,new Ki)}this._bgRect=Z}this._textShape=R,this._symbol=y,this.resetStates()}initAttributes(t,e){t=e?.skipDefault?t:ot({},qo.defaultAttributes,t),super.initAttributes(t),this.render()}addState(t,e,n){super.addState(t,e,n),this._textShape&&this._textShape.addState(t,e,n),this._bgRect&&this._bgRect.addState(t,e,n),this._symbol&&this._symbol.addState(t,e,n)}removeState(t,e){super.removeState(t,e),this._textShape&&this._textShape.removeState(t,e),this._bgRect&&this._bgRect.removeState(t,e),this._symbol&&this._symbol.removeState(t,e)}cacheStates(){var t,e,n,r,s,a,o,l,u,c,h,d,f,p;this._tagStates=(e=(t=this.currentStates)===null||t===void 0?void 0:t.slice())!==null&&e!==void 0?e:[],this._rectStates=(s=(r=(n=this._bgRect)===null||n===void 0?void 0:n.currentStates)===null||r===void 0?void 0:r.slice())!==null&&s!==void 0?s:[],this._symbolStates=(l=(o=(a=this._symbol)===null||a===void 0?void 0:a.currentStates)===null||o===void 0?void 0:o.slice())!==null&&l!==void 0?l:[],this._textStates=(h=(c=(u=this._textShape)===null||u===void 0?void 0:u.currentStates)===null||c===void 0?void 0:c.slice())!==null&&h!==void 0?h:[],this.clearStates(),(d=this._bgRect)===null||d===void 0||d.clearStates(),(f=this._symbol)===null||f===void 0||f.clearStates(),(p=this._textShape)===null||p===void 0||p.clearStates()}resetStates(){var t,e,n;this._tagStates.length&&this.useStates(this._tagStates),this._rectStates.length&&((t=this._bgRect)===null||t===void 0||t.useStates(this._rectStates)),this._symbolStates.length&&((e=this._symbol)===null||e===void 0||e.useStates(this._symbolStates)),this._textStates.length&&((n=this._textShape)===null||n===void 0||n.useStates(this._textStates))}}qo.defaultAttributes={visible:!0,textStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},space:4,padding:4,shape:{fill:"#000"}};const eit={visible:!0,position:"auto",titleStyle:{fontSize:16,fill:"#08979c"},contentStyle:{fontSize:12,fill:"green"},panel:{visible:!0,fill:"#e6fffb",size:12,space:0,stroke:"#87e8de",lineWidth:1,cornerRadius:4}},iit={poptip:ot({},eit)};function E3t(){ln(),eu(),Ta(),tu()}function R3t(i){ot(iit.poptip,eit,i)}var O3t=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};const r4=new Gi;E3t();const s4="M -0.5 -0.5, L -0.5 0.5, L 0.5 -0.5, Z",a4="M -0.5 -0.5, L -0.5 0.5, L 0.5 0.5, Z",o4="M -0.5 -0.5, L 0.5 -0.5, L 0.5 0.5, Z",l4="M 0.5 -0.5, L 0.5 0.5, L -0.5 0.5, Z",D3t={tl:s4,tr:o4,bl:a4,br:l4,lt:s4,lb:a4,rt:o4,rb:l4};class x0 extends fr{constructor(t,e){super(e?.skipDefault?t:ot({},x0.defaultAttributes,t)),this.name="poptip",this.positionList=["top","tl","tr","bottom","bl","br","left","lt","lb","right","rt","rb"]}render(){var t,e,n,r,s,a,o,l,u;const{titleStyle:c={},position:h,contentStyle:d={},panel:f,logoSymbol:p,poptipAnchor:g="position",logoText:m,logoTextStyle:_={},triangleMode:v="default",space:y=4,minWidth:b=0,maxWidth:x=1/0,padding:S=4,maxWidthPercent:w,visible:A,state:k,dx:C=0,dy:M=0,positionBounds:R}=this.attribute;let{title:P="",content:O=""}=this.attribute;P=this.attribute.titleFormatMethod?this.attribute.titleFormatMethod(P):P,O=this.attribute.contentFormatMethod?this.attribute.contentFormatMethod(O):O;const T=zr(S),D=this.createOrUpdateChild("poptip-content",{x:0,y:0,zIndex:1},"group");this.group=D;const B=x-T[1]-T[3],I=L(P)&&A!==!1,F=Object.assign(Object.assign({text:J(P)?P:[P],visible:I,wrap:!0},c),{x:T[3],y:T[0],maxLineWidth:B,textAlign:"left",textBaseline:"top"}),j=D.createOrUpdateChild("poptip-title",F,"text");Lt(k?.title)||(j.states=k.title);const H=j.AABBBounds,U=H.height(),K=H.width();let q=U+y;I||(q=0);const Z=L(O)&&A!==!1,at=Object.assign(Object.assign({text:J(O)?O:[O],visible:Z,wrap:!0},d),{x:T[3],y:T[0]+q,maxLineWidth:B,textAlign:"left",textBaseline:"top"}),$=D.createOrUpdateChild("poptip-content",at,"text");Lt(k?.content)||($.states=k.content);const ft=$.AABBBounds,pt=ft.height(),rt=ft.width();Z&&(q+=pt),this.titleShape=j,this.contentShape=$;let gt=Nn(K+T[1]+T[3],rt+T[1]+T[3]);gt>x?gt=x:gt<b&&(gt=b);let mt=T[0]+T[2]+q;const{visible:Dt,square:St}=f,Ot=O3t(f,["visible","square"]);if(St){const xt=Nn(gt,mt);gt=xt;const dt=xt-mt;mt=xt,j.setAttributes({dy:dt/2}),$.setAttributes({dy:dt/2})}const Pt=(t=Ot.size)!==null&&t!==void 0?t:12,_e=J(Pt)?[Pt[0]+((e=Ot.space)!==null&&e!==void 0?e:0),Pt[1]+((n=Ot.space)!==null&&n!==void 0?n:0)]:Pt+((r=Ot.space)!==null&&r!==void 0?r:0),Ze=(s=Ot.lineWidth)!==null&&s!==void 0?s:1,It=this.stage?[(a=this.stage.viewWidth)!==null&&a!==void 0?a:this.stage.width,(o=this.stage.viewHeight)!==null&&o!==void 0?o:this.stage.height]:void 0;if(It){const xt=this.AABBBounds,dt=(l=this.attribute.x)!==null&&l!==void 0?l:xt.x1,jt=It[0]-xt.x1;let pe=Math.max(dt,jt);const me=(J(Pt)?Pt[0]:12)+3;if(pe=Math.min(pe-me,pe*w),pe<gt){gt=pe;const We=T[1]+T[3];j.setAttribute("maxLineWidth",pe-We),$.setAttribute("maxLineWidth",pe-We),mt=T[0]+T[2],I&&(mt+=j.AABBBounds.height()+y),mt+=$.AABBBounds.height()}}const W=h==="auto"||J(h),Q=J(h)?h:this.positionList;let nt,wt=-1/0;for(let xt=0;xt<Q.length+1;xt++){const dt=W?Q[xt===Q.length?nt:xt]:h;let jt="arrow2Left",pe=(J(Pt)?Pt[0]:Pt)/4,me=0;dt==="top"||dt==="bottom"||dt==="left"||dt==="right"?jt="arrow2Left":v==="concise"&&(jt=D3t[dt],pe=["tl","bl","rt","rb"].includes(dt)?(J(Pt)?Pt[0]:Pt)/2:-(J(Pt)?Pt[0]:Pt)/2,me=["tl","tr","lb","rb"].includes(dt)?-(J(Pt)?Pt[1]:Pt)/2:(J(Pt)?Pt[1]:Pt)/2);const{angle:We,offset:Si}=this.getAngleAndOffset(dt,gt,mt,J(_e)?_e:[_e,_e-Ze],jt);let ai,Ln={x:0,y:0};if(g==="bounds"&&R&&(Ln=this.calculateAnchorPoint(dt,R)),Vn(Dt)){let Se;ai=D.createOrUpdateChild("poptip-symbol-panel",Object.assign(Object.assign({},Ot),{visible:Dt&&(Z||I),x:pe,y:me,strokeBoundsBuffer:-1,boundsPadding:-2,anchor:[0,0],symbolType:jt,angle:We,dx:Si[0],dy:Si[1]-((u=Ot.space)!==null&&u!==void 0?u:0),size:Pt,zIndex:9}),"symbol"),Lt(k?.panel)||(ai.states=k.panel),Se=f.panelSymbolType?D.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},Ot),{visible:Dt&&(Z||I),x:0,y:0,symbolType:"rect",size:[gt,mt],zIndex:-8}),"symbol"):D.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},Ot),{visible:Dt&&(Z||I),x:0,y:0,width:gt,height:mt,zIndex:-8}),"rect"),Lt(k?.panel)||(Se.states=k.panel)}if(D.setAttributes({x:-Si[0]+C+Ln.x,y:-Si[1]+M+Ln.y,anchor:[pe,me]}),p){const{size:Se=12}=p,Ni=J(Se)?Se:[Se,Se];Ni[1]==="auto"&&(Ni[1]=mt),Ni[0]==="auto"&&(Ni[0]=mt);const _r=Ni[0];D.createOrUpdateChild("poptip-logo",Object.assign(Object.assign({},p),{x:0,y:mt/2,visible:Dt&&(Z||I),zIndex:10,size:Ni}),"symbol"),D.setAttributes({x:-Si[0]+C+_r/2,y:-Si[1]+M}),m&&D.createOrUpdateChild("poptip-logo-text",Object.assign(Object.assign({},_),{x:0,y:mt/2,visible:Dt&&(Z||I),text:m,textAlign:"center",textBaseline:"middle",zIndex:10}),"text")}if(!It)break;{r4.setValue(0,0,gt,mt).transformWithMatrix(D.globalTransMatrix);const Se=r4,Ni=new ir().setValue(0,0,It[0],It[1]);if(W){if(iEt(Se,Ni,!1))break;{const _r=vJ(Se,Ni,!1),us=(_r.x2-_r.x1)*(_r.y2-_r.y1);us>wt&&(wt=us,nt=xt)}}if(["top","bottom","left","right"].includes(dt)){const _r=dt==="top"||dt==="bottom",us=dt==="left"||dt==="right";let Pa=!1;if(_r?Pa=dt==="top"&&Se.y1<0||dt==="bottom"&&Se.y2>Ni.y2:us&&(Pa=dt==="left"&&Se.x1<0||dt==="right"&&Se.x2>Ni.x2),!Pa){let vr=0;const kt=(J(Pt)?Pt[1]:Pt)/2;_r?(Se.x1<0?vr=-Se.x1:Se.x2>Ni.x2&&(vr=Ni.x2-Se.x2),D.setAttribute("x",D.attribute.x+vr),ai.setAttribute("dx",gn(Nn(ai.attribute.dx-vr,kt),Se.width()-kt))):us&&(Se.y1<0?vr=-Se.y1:Se.y2>Ni.y2&&(vr=Ni.y2-Se.y2),D.setAttribute("y",D.attribute.y+vr),ai.setAttribute("dy",gn(Nn(ai.attribute.dy-vr,kt),Se.height()-kt)));break}}if(!W)break}}}calculateAnchorPoint(t,e){if(!e)return{x:0,y:0};const{x:n,y:r}=this.attribute,{x1:s,y1:a,x2:o,y2:l}=e,u=o-s,c=l-a;switch(t){case"top":case"tl":case"tr":return{x:s+u/2-n,y:a-r};case"bottom":case"bl":case"br":return{x:s+u/2-n,y:l-r};case"left":case"lt":case"lb":return{x:s-n,y:a+c/2-r};case"right":case"rt":case"rb":return{x:o-n,y:a+c/2-r};default:return{x:0,y:0}}}getAngleAndOffset(t,e,n,r,s){const a=s==="arrow2Left"?r[1]/2:r[1];switch(t){case"tl":return{angle:s==="arrow2Left"?Xe/2*3:0,offset:s==="arrow2Left"?[e/4,n+a]:[0,n+a]};case"top":return{angle:Xe/2*3,offset:[e/2,n+a]};case"tr":return{angle:s==="arrow2Left"?Xe/2*3:0,offset:s==="arrow2Left"?[e/4*3,n+a]:[e,n+a]};case"rt":return{angle:0,offset:s==="arrow2Left"?[-a,n/5]:[-a,0]};case"right":return{angle:0,offset:[-a,n/2]};case"rb":return{angle:0,offset:s==="arrow2Left"?[-a,n/5*4]:[-a,n]};case"bl":return{angle:s==="arrow2Left"?Xe/2:0,offset:s==="arrow2Left"?[e/4,-a]:[0,-a]};case"bottom":return{angle:Xe/2,offset:[e/2,-a]};case"br":return{angle:s==="arrow2Left"?Xe/2:0,offset:s==="arrow2Left"?[e/4*3,-a]:[e,-a]};case"lt":return{angle:s==="arrow2Left"?Xe:0,offset:s==="arrow2Left"?[e+a,n/5]:[e+a,0]};case"left":return{angle:Xe,offset:[e+a,n/2]};case"lb":return{angle:s==="arrow2Left"?Xe:0,offset:s==="arrow2Left"?[e+a,n/5*4]:[e+a,n]}}}}x0.defaultAttributes={position:"rt",visible:!0,title:null,content:null,titleStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},contentStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},panel:{},maxWidthPercent:.8,space:8,padding:10};var I3t=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};function L3t(i,t){return ot(i,iit.poptip,t),i}let Mv=class{render(i,t,e,n,r,s,a,o,l,u,c,h,d){var f,p;if(i._showPoptip===1){const{visible:g,visibleCb:m}=i.attribute.poptip||{};if(g===!1||m&&m(i)===!1)return;const _={};ot(_,x0.defaultAttributes,i.attribute.poptip?i.attribute.poptip:{}),this.poptipComponent?this.poptipComponent.initAttributes(_):this.poptipComponent=new x0(_);let v=i.attribute.poptip||{};if(i.type==="text"&&v.title==null&&v.content==null){const x={};L3t(x,v),v=x,v.content=(f=v.content)!==null&&f!==void 0?f:i.attribute.text}const y=i.globalTransMatrix;this.poptipComponent.setAttributes(Object.assign(Object.assign({visibleAll:!0,pickable:!1,childrenPickable:!1,poptipAnchor:"bounds"},v),{x:y.e,y:y.f,positionBounds:i.globalAABBBounds})),u.stage.tryInitInteractiveLayer();const b=u.stage.getLayer("_builtin_interactive");b&&b.add(this.poptipComponent)}else i._showPoptip===2&&(i._showPoptip=0,this.poptipComponent&&(this.poptipComponent.setAttributes({visibleAll:!1}),(p=this.poptipComponent.parent)===null||p===void 0||p.removeChild(this.poptipComponent),this.poptipComponent=null))}};Mv=I3t([Rt()],Mv);var nit=function(i,t,e,n){var r,s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,t,e,n);else for(var o=i.length-1;o>=0;o--)(r=i[o])&&(a=(s<3?r(a):s>3?r(t,e,a):r(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a};class rit{constructor(){this.activeEvent="onRegister",this._uid=on.GenAutoIncrementId(),this.poptip=t=>{const e=t.target;this.needHide(e)?this.unpoptip(t):e!==this.activeGraphic&&(this.needShow(e)&&(e.setAttributes({}),e._showPoptip=1),this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2),this.setActiveGraphic(e,!0))},this.unpoptip=t=>{this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2,this.setActiveGraphic(null,!0))}}activate(t){this.pluginService=t;const{stage:e}=this.pluginService;e.addEventListener("pointerover",this.poptip)}needHide(t){return t.isContainer||!t.attribute}needShow(t){return!!t.attribute.poptip}setActiveGraphic(t,e){this.activeGraphic=t,this.pluginService.stage.renderNextFrame()}deactivate(t){const{stage:e}=this.pluginService;e.removeEventListener("pointerover",this.poptip)}}let Tv=class extends rit{constructor(){super(...arguments),this.name="poptip",this.key=this.name+this._uid}};Tv=nit([Rt()],Tv);let Pv=class extends rit{constructor(){super(...arguments),this.name="poptipForText",this.key=this.name+this._uid,this.pointerlave=i=>{const{stage:t}=this.pluginService;i.target===t&&this.unpoptip(i)}}activate(i){super.activate(i);const{stage:t}=this.pluginService;t.addEventListener("pointerleave",this.pointerlave)}needHide(i){return i.type!=="text"||!i.cliped||i.isContainer||!i.attribute||i.attribute.disableAutoClipedPoptip}needShow(i){return!0}deactivate(i){const{stage:t}=this.pluginService;super.deactivate(i),t.removeEventListener("pointerleave",this.pointerlave)}};Pv=nit([Rt()],Pv);const B3t=new re((i,t,e,n)=>{e(Mv)||(i(Mv).toSelf().inSingletonScope(),i(MF).toService(Mv)),e(Tv)||(i(Tv).toSelf(),i(Zg).toService(Tv)),e(Pv)||(i(Pv).toSelf(),i(Zg).toService(Pv))});function F3t(){te.load(B3t)}class Nb extends fr{constructor(){super(...arguments),this.name="crosshair"}render(){this.renderCrosshair(this)}}function z3t(){ln(),Jl()}function N3t(){ln(),zm()}function j3t(){ln(),Nm()}function H3t(){ln(),tu()}function V3t(){ln(),zm()}z3t();class jb extends Nb{constructor(t,e){super(e?.skipDefault?t:ot({},jb.defaultAttributes,t))}renderCrosshair(t){const{start:e,end:n,lineStyle:r}=this.attribute;return t.createOrUpdateChild("crosshair-line",Object.assign({points:[e,n]},r),"line")}setLocation(t){const{start:e,end:n}=t;this.setAttributes({start:e,end:n})}}jb.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}};H3t();class FM extends Nb{constructor(t,e){super(e?.skipDefault?t:ot({},FM.defaultAttributes,t))}renderCrosshair(t){const{start:e,end:n,rectStyle:r}=this.attribute;return t.createOrUpdateChild("crosshair-rect",Object.assign({x:e.x,y:e.y,width:n.x-e.x,height:n.y-e.y},r),"rect")}setLocation(t){const{start:e,end:n}=t;this.setAttributes({start:e,end:n})}}FM.defaultAttributes={rectStyle:{fill:"#b2bacf",opacity:.2}};N3t();class zM extends Nb{constructor(t,e){super(e?.skipDefault?t:ot({},zM.defaultAttributes,t))}renderCrosshair(t){const{center:e,radius:n,lineStyle:r}=this.attribute;return t.createOrUpdateChild("crosshair-circle",Object.assign(Object.assign(Object.assign(Object.assign({},e),{outerRadius:n}),this.attribute),r),"arc")}setLocation(t){const{center:e}=this.attribute,n=Je.distancePP(t,e);this.setAttribute("radius",n)}}zM.defaultAttributes={lineStyle:{stroke:["#b2bacf",!1,!1,!1],lineWidth:1,lineDash:[2]}};V3t();class NM extends Nb{constructor(t,e){super(e?.skipDefault?t:ot({},NM.defaultAttributes,t))}renderCrosshair(t){const{center:e,radius:n,innerRadius:r=0,sectorStyle:s}=this.attribute,{startAngle:a,endAngle:o}=this.attribute;return t.createOrUpdateChild("crosshair-sector",Object.assign(Object.assign(Object.assign({},e),{outerRadius:n,innerRadius:r,startAngle:a,endAngle:o}),s),"arc")}setLocation(t){const{center:e,startAngle:n=tm,endAngle:r=em}=this.attribute,s=r-n,a=t0(pJ(e,t));this.setAttributes({startAngle:a-s/2,endAngle:a+s/2})}}NM.defaultAttributes={sectorStyle:{fill:"#b2bacf",opacity:.2}};j3t();class jM extends Nb{constructor(t,e){super(e?.skipDefault?t:ot({},jM.defaultAttributes,t))}renderCrosshair(t){const{center:e,radius:n,sides:r=6,lineStyle:s}=this.attribute,{startAngle:a,endAngle:o}=this.attribute,l=(o-a)%(2*Math.PI)==0,u=(o-a)/r;let c;for(let h=0;h<=r;h++){const d=yi(e,n,a+u*h);h===0?c=`M${d.x},${d.y}`:c+=`L${d.x},${d.y}`,h===r&&l&&(c+="Z")}return t.createOrUpdateChild("crosshair-polygon",Object.assign({path:c},s),"path")}setLocation(t){const{center:e}=this.attribute,n=Je.distancePP(t,e);this.setAttribute("radius",n)}}jM.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}};function WF(){ln(),Jl(),IM(),Ta()}function $F(){ln(),Jl(),zm(),Ta()}WF();class Zu extends fr{getStartAngle(){return oh(this._startAngle)}getEndAngle(){return oh(this._endAngle)}getMainSegmentPoints(){return this._mainSegmentPoints}constructor(t,e){super(e?.skipDefault?t:ot({},Zu.defaultAttributes,t)),this.name="segment",this.key="segment",this.lines=[]}render(){this.removeAllChild(!0),this._reset();const{startSymbol:t,endSymbol:e,lineStyle:n,state:r,visible:s=!0,multiSegment:a,mainSegmentIndex:o}=this.attribute;if(!s)return;this._computeLineAngle();const l=this._getMainSegmentPoints(),u=this._renderSymbol(t,l,"start"),c=this._renderSymbol(e,l,"end");if(this.startSymbol=u,this.endSymbol=c,a){const h=[...this.attribute.points];if(et(o))h[o]=this._clipPoints(h[o]);else{const d=this._clipPoints(XO(h));h[0][0]=d[0],h[h.length-1][h[h.length-1].length-1]=d[d.length-1]}h.forEach((d,f)=>{var p,g;const m=Mt.line(Object.assign(Object.assign({points:d},J(n)?(p=n[f])!==null&&p!==void 0?p:n[n.length-1]:n),{fill:!1}));m.name=`${this.name}-line`,m.id=this._getNodeId("line"+f),Lt(r?.line)||(m.states=J(r.line)?(g=r.line[f])!==null&&g!==void 0?g:r.line[r.line.length-1]:r.line),this.add(m),this.lines.push(m)})}else{let h=Mt.line;X(n)[0].cornerRadius&&(h=Mt.polygon);const d=h(Object.assign(Object.assign({points:this._clipPoints(this.attribute.points)},X(n)[0]),{fill:!1,closePath:!1}));d.name=`${this.name}-line`,d.id=this._getNodeId("line"),Lt(r?.line)||(d.states=[].concat(r.line)[0]),this.add(d),this.lines.push(d)}}_computeStartRotate(t){return t+Math.PI/2}_computeEndRotate(t){return t+Math.PI/2}_renderSymbol(t,e,n){if(!e.length)return;const{autoRotate:r=!0}=t;let s;if(t&&t.visible){const a=this.getStartAngle(),o=this.getEndAngle(),{state:l}=this.attribute,u=e[0],c=e[e.length-1],{refX:h=0,refY:d=0,refAngle:f=0,style:p,symbolType:g,size:m=12}=t;let _,v;n==="start"?(_={x:u.x+(et(a)?h*Math.cos(a)+d*Math.cos(a-Math.PI/2):0),y:u.y+(et(a)?h*Math.sin(a)+d*Math.sin(a-Math.PI/2):0)},v=this._computeStartRotate(this._startAngle)):(_={x:c.x+(et(o)?h*Math.cos(o)+d*Math.cos(o-Math.PI/2):0),y:c.y+(et(o)?h*Math.sin(o)+d*Math.sin(o-Math.PI/2):0)},v=this._computeEndRotate(this._endAngle)),s=Mt.symbol(Object.assign(Object.assign(Object.assign({},_),{symbolType:g,size:m,angle:r?v+f:0,strokeBoundsBuffer:0}),p)),s.name=`${this.name}-${n}-symbol`,s.id=this._getNodeId(`${n}-symbol`),Lt(l?.symbol)||(s.states=l.symbol),n==="start"?Lt(l?.startSymbol)||(s.states=l.startSymbol):Lt(l?.endSymbol)||(s.states=l.endSymbol),this.add(s)}return s}_getMainSegmentPoints(){if(this._mainSegmentPoints)return this._mainSegmentPoints;const{points:t,multiSegment:e,mainSegmentIndex:n}=this.attribute;let r;return r=e?et(n)?t[n]:XO(t):t,this._mainSegmentPoints=r,r}_clipPoints(t){const{startSymbol:e={},endSymbol:n={}}=this.attribute;let r=t;if(e.visible){const s=e.clip?e.size||10:0;r=[{x:t[0].x-s/2*(Math.cos(this._startAngle)||0),y:t[0].y-s/2*(Math.sin(this._startAngle)||0)},...r.slice(1)]}if(n.visible){const s=n.clip?n.size||10:0,a={x:t[t.length-1].x-s/2*(Math.cos(this._endAngle)||0),y:t[t.length-1].y-s/2*(Math.sin(this._endAngle)||0)};r=[...r.slice(0,r.length-1),a]}return r}_computeLineAngle(){const t=this._getMainSegmentPoints();if(t.length<=1)return;const e=t[0],n=t[1],r=t[t.length-2],s=t[t.length-1],a=[e.x-n.x,e.y-n.y],o=Math.atan2(a[1],a[0]),l=[s.x-r.x,s.y-r.y],u=Math.atan2(l[1],l[0]);this._startAngle=o,this._endAngle=u}_reset(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}}Zu.defaultAttributes={visible:!0,lineStyle:{lineWidth:1,stroke:"#000"},startSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}},endSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}}};$F();class WI extends Zu{constructor(t,e){super(e?.skipDefault?t:ot({},Zu.defaultAttributes,t)),this.name="arc-segment",this.key="arc-segment",this.isReverseArc=!1}getStartAngle(){const t=this.isReverseArc?this._startAngle+Math.PI/2:this._startAngle-Math.PI/2;return t<0?t+2*Math.PI:t>2*Math.PI?t-2*Math.PI:t}getEndAngle(){const t=this.isReverseArc?this._endAngle-Math.PI/2:this._endAngle+Math.PI/2;return t<0?t+2*Math.PI:t>2*Math.PI?t-2*Math.PI:t}getMainSegmentPoints(){return this._mainSegmentPoints}_computeStartRotate(t){return this.isReverseArc?t+Math.PI:t}_computeEndRotate(t){return this.isReverseArc?t:t+Math.PI}render(){this.removeAllChild(!0),this._reset();const{startSymbol:t,endSymbol:e,lineStyle:n,state:r,visible:s=!0,radius:a,startAngle:o,endAngle:l,center:u}=this.attribute;if(!s)return;this._startAngle=o,this._endAngle=l,this.isReverseArc=o>l;const c={x:u.x+a*Math.cos(this._startAngle),y:u.y+a*Math.sin(this._startAngle)},h={x:u.x+a*Math.cos(this._endAngle),y:u.y+a*Math.sin(this._endAngle)};this._mainSegmentPoints=[c,h];const d=this._renderSymbol(t,this._mainSegmentPoints,"start"),f=this._renderSymbol(e,this._mainSegmentPoints,"end");this.startSymbol=d,this.endSymbol=f;const p=Mt.arc(Object.assign({x:u.x,y:u.y,startAngle:o,endAngle:l,innerRadius:a,outerRadius:a},n));p.name=`${this.name}-line`,p.id=this._getNodeId("arc"),Lt(r?.line)||(p.states=[].concat(r.line)[0]),this.add(p),this.line=p}}var Cn;(function(i){i.innerView="inner-view",i.axisContainer="axis-container",i.labelContainer="axis-label-container",i.tickContainer="axis-tick-container",i.tick="axis-tick",i.subTick="axis-sub-tick",i.label="axis-label",i.title="axis-title",i.labelHoverOnAxis="axis-label-hover-on-axis",i.gridContainer="axis-grid-container",i.grid="axis-grid",i.gridRegion="axis-grid-region",i.line="axis-line",i.background="axis-background",i.axisLabelBackground="axis-label-background",i.axisBreak="axis-break",i.axisBreakSymbol="axis-break-symbol"})(Cn||(Cn={}));var Ip;(function(i){i.selected="selected",i.selectedReverse="selected_reverse",i.hover="hover",i.hoverReverse="hover_reverse"})(Ip||(Ip={}));const bl={[Ip.selectedReverse]:{},[Ip.selected]:{},[Ip.hover]:{},[Ip.hoverReverse]:{}},W3t=999,ek={title:{space:4,padding:0,textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1}},label:{visible:!0,inside:!1,space:4,padding:0,style:{fontSize:12,fill:"#333",fontWeight:"normal",fillOpacity:1}},labelHoverOnAxis:{visible:!1,space:7,padding:2,position:0,autoRotate:!1,textStyle:{fontSize:12,fill:"red",fontWeight:"normal",fillOpacity:1},background:{visible:!0,style:{cornerRadius:2,fill:"black"}}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#999",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}}},u4={size:8,stroke:"#000",lineWidth:1,zIndex:1};function $3t(i){const t=i.AABBBounds;return{x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,centerX:i.attribute.x,centerY:i.attribute.y,angle:i.attribute.angle}}function U3t(i){i.forEach(t=>{if(t.rotatedBounds||!t.attribute.angle)return;const e=$3t(t),n=Dl({x:t.attribute.x,y:t.attribute.y},e.angle,{x:e.centerX,y:e.centerY}),r=n.x-e.centerX,s=n.y-e.centerY;e.x1+=r,e.x2+=r,e.y1+=s,e.y2+=s,e.centerX+=r,e.centerY+=s,t.rotatedBounds=e})}function G3t(i,t){var e,n;return!((e=i.OBBBounds)===null||e===void 0)&&e.empty()||!((n=t.OBBBounds)===null||n===void 0)&&n.empty()?i0(i.AABBBounds,t.AABBBounds,!1)&&(!i.rotatedBounds||!t.rotatedBounds||yJ(i.rotatedBounds,t.rotatedBounds,!0)):i.OBBBounds.intersects(t.OBBBounds)}const sit=Math.sin(Math.PI/10);function ait(i,t=sit){const e=!N(i)&&i!==0,n=e?Math.cos(i):1;return e&&Math.abs(n)<=t}function UF(i,t=sit){const e=!N(i)&&i!==0,n=e?Math.sin(i):0;return!e||Math.abs(n)<=t}function Y3t(i,t){return{x:i.x+t[0],y:i.y+t[1]}}function X3t(i={}){var t,e;const{style:n={},angle:r=.5*Math.PI}=i,s=ot({},u4,n),a=(t=s.size)!==null&&t!==void 0?t:u4.size;return Object.assign(Object.assign({},s),{symbolType:(e=s.symbolType)!==null&&e!==void 0?e:`M ${-a/2} ${a*Math.sin(r)} L ${a/2} ${-a*Math.sin(r)}`,symbolSize:a})}function oit(i){const t={};return jo(i,e=>{e.type!=="group"&&e.id&&(t[e.id]=e)}),t}function GF(i,t){return{x:i.x+t[0],y:i.y+t[1]}}function $I(i,t,e,n=!1,r=!1){const s=[t.x-e.x,t.y-e.y];return qet(s,(n?-1:1)*(r?-1:1)*i/Zet(s))}function K3t(i){let t="center",e="middle";return t=(i=oh(i))>=Math.PI*(5/3)||i<=Math.PI*(1/3)?"left":i>=Math.PI*(2/3)&&i<=Math.PI*(4/3)?"right":"center",e=i>=Math.PI*(7/6)&&i<=Math.PI*(11/6)?"bottom":i>=Math.PI*(1/6)&&i<=Math.PI*(5/6)?"top":"middle",{align:t,baseline:e}}function q3t(i,t,e,n,r){const s=yi({x:0,y:0},e,i),a=GF(s,$I(n,s,t,r));return Y3t(a,$I(n||1,a,t,r))}function lit(i,t,e,n,r){const s=[],a=r-n;for(let o=0;o<t;o++){const l=n+o*a/t;s.push(yi(i,e,l))}return s}function hd(i,t){let e="";return i.length===0||(i.forEach((n,r)=>{r===0?e=`M${n.x},${n.y}`:e+=`L${n.x},${n.y}`}),t&&(e+="Z")),e}function Ho(i,t,e){var n;const r=(n=i.attribute)===null||n===void 0?void 0:n.angle;if(UF(r,Number.EPSILON))return e>pW(i.AABBBounds,t.AABBBounds);const s=i.OBBBounds,a=t.OBBBounds;return!s||!a||s.empty()||a.empty()?e>pW(i.AABBBounds,t.AABBBounds):s.intersects(a)||e>oEt(s,a)}function UI(i,t){for(let e,n=1,r=i.length,s=i[0];n<r;s=e,++n)if(e=i[n],Ho(s,e,t))return!0;return!1}const uit=(i,t,e)=>{const n=i.target;return n!==e&&n.name&&!Lt(n.states)?(n.addState(pn.hover,!0),jo(t,r=>{r!==n&&r.name&&!Lt(r.states)&&r.addState(pn.hoverReverse,!0)}),n):e},cit=(i,t,e)=>e&&(jo(t,n=>{n.name&&!Lt(n.states)&&(n.removeState(pn.hoverReverse),n.removeState(pn.hover))}),null),hit=(i,t,e)=>{const n=i.target;return e===n&&n.hasState(pn.selected)?(jo(t,r=>{r.name&&!Lt(r.states)&&(r.removeState(pn.selectedReverse),r.removeState(pn.selected))}),null):n.name&&!Lt(n.states)?(n.addState(pn.selected,!0),jo(t,r=>{r!==n&&r.name&&!Lt(r.states)&&r.addState(pn.selectedReverse,!0)}),n):e};class dit extends fr{_prepareAnimate(t){if(this.attribute.animation!==!1){const{animation:e,animationEnter:n,animationExit:r,animationUpdate:s}=this.attribute,a=ee(e)?e:{};this._animationConfig={enter:n!==!1&&ot({},t,a,n??{}),exit:r!==!1&&ot({},t,a,r??{}),update:s!==!1&&(J(s)?s:ot({},t,a,s??{}))}}else this._animationConfig={enter:!1,exit:!1,update:!1}}}const Z3t={type:"default",duration:300,easing:"linear"};class fit extends dit{constructor(){super(...arguments),this.name="axis",this.data=[],this.tickLineItems=[],this.subTickLineItems=[],this.axisLabelLayerSize={},this.axisLabelsContainer=null,this._onHover=t=>{this._lastHover=uit(t,this.axisContainer,this._lastHover)},this._onUnHover=t=>{this._lastHover=cit(t,this.axisContainer,this._lastHover)},this._onClick=t=>{this._lastSelect=hit(t,this.axisContainer,this._lastSelect)}}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}getBoundsWithoutRender(t){const e=Jr(this.attribute);e.scale=this.attribute.scale,this.attribute=t;const n=Mt.group({x:this.attribute.x,y:this.attribute.y});return this.add(n),this._renderInner(n),this.removeChild(n),this.attribute=e,n.AABBBounds}render(){this._prepare(),this._prevInnerView=this._innerView&&oit(this._innerView),this.removeAllChild(!0),this._innerView=Mt.group({x:0,y:0,pickable:!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent(),this.runAnimation()}_prepare(){this._prepareAnimate(Z3t)}_bindEvent(){if(this.attribute.disableTriggerEvent)return;const{hover:t,select:e}=this.attribute;t&&(this._innerView.addEventListener("pointermove",this._onHover),this._innerView.addEventListener("pointerout",this._onUnHover)),e&&this._innerView.addEventListener("pointerdown",this._onClick)}_renderInner(t){const{title:e,label:n,tick:r,line:s,items:a}=this.attribute,o=Mt.group({x:0,y:0,zIndex:1,pickable:!1});if(o.name=Cn.axisContainer,o.id=this._getNodeId("container"),o.setMode(this.mode),this.axisContainer=o,t.add(o),s&&s.visible&&this.renderLine(o),a&&a.length&&(this.data=this._transformItems(a[0]),r&&r.visible&&this.renderTicks(o),n&&n.visible)){const l=Mt.group({x:0,y:0,pickable:!1});l.name=Cn.labelContainer,l.id=this._getNodeId("label-container"),this.axisLabelsContainer=l,o.add(l),a.forEach((u,c)=>{const h=this.renderLabels(l,u,c),d=h.getChildren();this.beforeLabelsOverlap(d,u,h,c,a.length),this.handleLabelsOverlap(d,u,h,c,a.length),this.afterLabelsOverlap(d,u,h,c,a.length);let f=0,p=0,g="center",m="middle",_=0;d.forEach((v,y)=>{var b;const x=v.attribute,S=(b=x.angle)!==null&&b!==void 0?b:0,w=v.AABBBounds;let A=w.width(),k=w.height();S&&(A=Math.abs(A*Math.cos(S)),k=Math.abs(k*Math.sin(S))),f=Math.max(f,A),p=Math.max(p,k),g=x.textAlign,m=x.textBaseline,y===0&&(_=x.x)}),this.axisLabelLayerSize[c]={width:f,height:p,labelPos:_,textAlign:g,textBaseline:m}})}e&&e.visible&&this.renderTitle(o)}renderTicks(t){const e=this.getTickLineItems(),n=Mt.group({x:0,y:0,pickable:!1});n.name=Cn.tickContainer,n.id=this._getNodeId("tick-container"),t.add(n),e.forEach((s,a)=>{var o;const l=Mt.line(Object.assign({},this._getTickLineAttribute("tick",s,a,e)));if(l.name=Cn.tick,l.id=this._getNodeId(s.id),Lt((o=this.attribute.tick)===null||o===void 0?void 0:o.state))l.states=Pe;else{const u=this.data[a],c=ot({},Pe,this.attribute.tick.state);Object.keys(c).forEach(h=>{it(c[h])&&(c[h]=c[h](u.rawValue,a,u,this.data))}),l.states=c}n.add(l)}),this.tickLineItems=e;const{subTick:r}=this.attribute;if(r&&r.visible){const s=this.getSubTickLineItems();s.length&&s.forEach((a,o)=>{const l=Mt.line(Object.assign({},this._getTickLineAttribute("subTick",a,o,e)));if(l.name=Cn.subTick,l.id=this._getNodeId(`${o}`),Lt(r.state))l.states=Pe;else{const u=ot({},Pe,r.state);Object.keys(u).forEach(c=>{it(u[c])&&(u[c]=u[c](a.value,o,a,e))}),l.states=u}n.add(l)}),this.subTickLineItems=s}}renderLabels(t,e,n){const{dataFilter:r}=this.attribute.label;r&&it(r)&&(e=r(e,n));const s=this._transformItems(e),a=Mt.group({x:0,y:0,pickable:!1});return a.name=`${Cn.labelContainer}-layer-${n}`,a.id=this._getNodeId(`label-container-layer-${n}`),t.add(a),s.forEach((o,l)=>{var u;const c=this._getLabelAttribute(o,l,s,n),h=b0(c);if(h.name=Cn.label,h.id=this._getNodeId(`layer${n}-label-${o.id}`),Lt((u=this.attribute.label)===null||u===void 0?void 0:u.state))h.states=Pe;else{const d=ot({},Pe,this.attribute.label.state);Object.keys(d).forEach(f=>{it(d[f])&&(d[f]=d[f](o,l,s,n))}),h.states=d}h.data=Object.assign(Object.assign({},o),{index:l,layer:n}),a.add(h)}),a}renderTitle(t){const e=this.getTitleAttribute(),n=new qo(Object.assign({},e));n.name=Cn.title,n.id=this._getNodeId("title"),t.add(n)}getVerticalCoord(t,e,n){return GF(t,this.getVerticalVector(e,n,t))}getTickLineItems(){const{tick:t}=this.attribute,e=this.data,n=[],{alignWithLabel:r,inside:s=!1,length:a,dataFilter:o}=t;let l=1;return e.length>=2&&(l=e[1].value-e[0].value),(o&&it(o)?o(e):e).forEach(u=>{let c=u.point,h=u.value;if(!r){const f=u.value-l/2;if(this.isInValidValue(f))return;c=this.getTickCoord(f),h=f}const d=this.getVerticalCoord(c,a,s);if(this.mode==="3d"){const f=this.getVerticalVector(a,s,c);let p=0,g=0;xe(f[0])>xe(f[1])?p=Xe/2*(d.x>c.x?1:-1):g=Xe/2*(d.y>c.y?-1:1),n.push({start:c,end:d,value:h,id:`tick-${u.id}`,anchor:[c.x,c.y],alpha:p,beta:g})}else n.push({start:c,end:d,value:h,id:`tick-${u.id}`})}),n}getSubTickLineItems(){const{subTick:t}=this.attribute,e=[],{count:n=4,inside:r=!1,length:s=2}=t,a=this.tickLineItems,o=a.length;if(o>=2)for(let l=0;l<o-1;l++){const u=a[l],c=a[l+1];for(let h=0;h<n;h++){const d=(h+1)/(n+1),f=(1-d)*u.value+d*c.value,p=this.getTickCoord(f),g=this.getVerticalCoord(p,s,r);e.push({start:p,end:g,value:f,id:`sub-tick-${f}`})}}return e}_getTickLineAttribute(t,e,n,r){let s=be(this.attribute,`${t}.style`);const a=this.data[n];s=it(s)?ot({},be(ek,`${t}.style`),t==="tick"?s(a.rawValue,n,a,this.data):s(e.value,n,e,r)):s;const{start:o,end:l,anchor:u,alpha:c,beta:h}=e;return Object.assign({points:[o,l],anchor:u,alpha:c,beta:h},s)}_getLabelAttribute(t,e,n,r){var s,a;const{space:o=4,inside:l=!1,formatMethod:u,type:c="text",text:h}=this.attribute.label;let d=o,f=0;!((s=this.attribute.tick)===null||s===void 0)&&s.visible&&this.attribute.tick.inside===l&&(f=this.attribute.tick.length||4),!((a=this.attribute.subTick)===null||a===void 0)&&a.visible&&this.attribute.subTick.inside===l&&(f=Math.max(f,this.attribute.subTick.length||2)),d+=f;const p=this.getRelativeVector(t.point);r>0&&(p[1]===0?d+=(this.axisLabelLayerSize[r-1].height+be(this.attribute,"label.space",4))*r:d+=(this.axisLabelLayerSize[r-1].width+be(this.attribute,"label.space",4))*r);const g=this.getVerticalCoord(t.point,d,l),m=this.getVerticalVector(d||1,l,g),_=u?u(`${t.label}`,t,e,n,r):t.label;let{style:v}=this.attribute.label;v=it(v)?ot({},ek.label.style,v(t,e,n,r)):v;const y=this.getLabelAlign(m,l,v.angle);return v=ot(y,v),it(v.text)&&(v.text=v.text({label:t.label,value:t.rawValue,index:t.index,layer:r})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(g,m,_,v)),{text:h??_,_originText:t.label,lineHeight:v?.fontSize,type:c}),v)}getLabelPosition(t,e,n,r){return t}_transformItems(t){const e=[];return t.forEach(n=>{var r;e.push(Object.assign(Object.assign({},n),{point:this.getTickCoord(n.value),id:(r=n.id)!==null&&r!==void 0?r:n.label}))}),e}runAnimation(){const t=this.lastScale;if(this.attribute.scale){const e=this.attribute.scale;this.lastScale=e.clone(),this.lastScale.range([0,1])}if(this.attribute.animation&&this.applyAnimationState){const e=this.getInnerView(),n=this.getPrevInnerView();if(!n)return;const r=this._animationConfig;this._newElementAttrMap={},jo(e,s=>{var a;if(s.type!=="group"&&s.id){const o=n[s.id];if(s.setFinalAttributes(s.attribute),o){o.release();const l=o.attribute,u=s.getFinalAttribute(),c=OFt(l,u);let h=Object.keys(c).length>0;if("opacity"in l&&u.opacity!==l.opacity&&(c.opacity=(a=u.opacity)!==null&&a!==void 0?a:1,h=!0),r.update&&h){this._newElementAttrMap[s.id]={state:"update",node:s,attrs:s.attribute};const d=o.attribute;s.setAttributes(d),s.applyAnimationState(["update"],[{name:"update",animation:Object.assign(Object.assign({selfOnly:!0},r.update),{type:"axisUpdate",customParameters:{config:r.update,diffAttrs:c,lastScale:t}})}])}}else r.enter&&(this._newElementAttrMap[s.id]={state:"enter",node:s,attrs:s.attribute},s.applyAnimationState(["enter"],[{name:"enter",animation:Object.assign(Object.assign({},r.enter),{type:"axisEnter",selfOnly:!0,customParameters:{config:r.enter,lastScale:t,getTickCoord:this.getTickCoord.bind(this)}})}]))}})}}release(){super.release(),this._prevInnerView=null,this._innerView=null}}const c4={parity:function(i){return i.filter((t,e)=>e%2?t.setAttribute("opacity",0):1)},greedy:function(i,t){let e;return i.filter((n,r)=>r&&Ho(e,n,t)?n.setAttribute("opacity",0):(e=n,1))}};function Q3t(i){let t;return t=i.OBBBounds.empty()?i.AABBBounds:i.OBBBounds,t.width()>1&&t.height()>1}function J3t(i){return i.forEach(t=>t.setAttribute("opacity",1)),i}function h4(i,t,e,n,r=!1){if(e&&!i.attribute.opacity){const s=t.length;if(s>1){i.setAttribute("opacity",1);for(let a=0;a<s;a++){const o=r?t[s-1-a]:t[a];if(!n(o))break;o.setAttribute("opacity",0)}}}}function pit(i,t){if(Lt(i))return;const e=i.filter(Q3t);if(Lt(e))return;let n;n=J3t(e);const{method:r="parity",separation:s=0}=t,a=it(r)?r:c4[r]||c4.parity;if(n.length>=3&&UI(n,s)){do n=a(n,s);while(n.length>=3&&UI(n,s));const o=(d,f,p=!0)=>p&&d<3||f,l=o(n.length,t.firstVisible,!1);let u=o(n.length,t.lastVisible);const c=e[0],h=ke(e);Ho(c,h,s)&&l&&u&&(h.setAttribute("opacity",0),u=!1),h4(c,n,l,d=>Ho(d,c,s)),h4(h,n,u,d=>Ho(d,h,s)||!(!l||d===c)&&Ho(d,c,s),!0)}e.forEach(o=>{o.setAttribute("visible",!!o.attribute.opacity)})}function tHt(i,t){if(Lt(i))return;const{orient:e,labelRotateAngle:n=[0,45,90]}=t;if(n.length===0||i.some(o=>!!o.attribute.angle))return;let r=0,s=0,a=n;for(i.length>2&&(e==="bottom"||e==="top"?Math.abs(i[1].attribute.x-i[0].attribute.x)<i[0].attribute.fontSize/2&&(a=[n[n.length-1]]):Math.abs(i[1].attribute.y-i[0].attribute.y)<i[0].attribute.fontSize/2&&(a=[n[n.length-1]])),a&&a.length>0&&(s=a.length);r<s;){const o=a[r++];if(i.forEach(l=>{l.attribute.angle=ii(o)}),iHt(e,i),!eHt(i))break}}function eHt(i){for(let t=1;t<i.length;t++)if(G3t(i[t-1],i[t]))return!0;return!1}function iHt(i,t){i!=="bottom"&&i!=="top"||rHt(i,t),i!=="left"&&i!=="right"||nHt(i,t),U3t(t)}function HM(i=0){if(i<0)for(;i<0;)i+=2*Math.PI;if(i>0)for(;i>=2*Math.PI;)i-=2*Math.PI;return i}function nHt(i,t){t.forEach((e,n)=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},mit(i,e.attribute.angle)),{angle:HM(e.attribute.angle)}))})}function rHt(i,t){t.forEach(e=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},git(i,e.attribute.angle)),{angle:HM(e.attribute.angle)}))})}function git(i,t=0){let e=["center","left","left","left","center","right","right","right","left"],n=["top","top","middle","bottom","bottom","bottom","middle","top","top"];i==="top"&&(e=["center","right","right","right","center","left","left","left","right"],n=["bottom","bottom","middle","top","top","top","middle","bottom","bottom"]);const r=(t=HM(t))/(.5*Math.PI);let s;return s=r===Math.floor(r)?2*Math.floor(r):2*Math.floor(r)+1,{textAlign:e[s],textBaseline:n[s]}}function mit(i,t=0){let e=["right","right","center","left","left","left","center","right","right"],n=["middle","middle","top","top","middle","middle","bottom","bottom","middle"];i==="right"&&(e=["left","left","center","right","right","right","center","left","left"],n=["middle","middle","bottom","bottom","middle","middle","top","middle","middle"]);const r=(t=HM(t))/(.5*Math.PI);let s;return s=r===Math.floor(r)?2*Math.floor(r):2*Math.floor(r)+1,{textAlign:e[s],textBaseline:n[s]}}function sHt(i){return et(i)?{left:i,right:i}:ee(i)?{left:i.left||0,right:i.right||0}:{left:0,right:0}}function aHt(i,t){const{limitLength:e,verticalLimitLength:n,ellipsis:r="...",orient:s,axisLength:a}=t;if(Lt(i)||!et(e))return;const o=sHt(t.overflowLimitLength),l=i[0],u=l.attribute.angle,c=!N(u),h=c?Math.cos(u):1,d=c?Math.sin(u):0,f=UF(u),p=ait(u),g=s==="top"||s==="bottom",m=l.attribute.direction,_=!f&&!p&&g&&(i.length<2||i.some(v=>Math.abs(v.AABBBounds.width()-l.AABBBounds.width())>=2))&&l.AABBBounds.width()>Math.abs(e/d);i.forEach(v=>{var y;if(g&&(p&&Math.floor(v.AABBBounds.height())<=e||f&&Math.floor(v.AABBBounds.width())<=n)||!g&&(m==="vertical"&&Math.floor(v.AABBBounds.height())<=n||m!=="vertical"&&(f&&Math.floor(v.AABBBounds.width())<=e||p&&Math.floor(v.AABBBounds.height())<=n)))return;let b=null;if(f||p)b=g?f?n:e:m==="vertical"||p?n:e;else if(g){const{x1:x,x2:S}=v.AABBBounds,w=d/h,A=Math.abs(e/d);if(_&&w>0&&x<=a+o.right&&e/w+x>a+o.right){const k=(a-x+o.right)/Math.abs(h);b=Math.min(k,A)}else if(_&&w<0&&S>=-o.left&&e/w+S<-o.left){const k=(S+o.left)/Math.abs(h);b=Math.min(k,A)}else b=A}else b=Math.abs(e/h);et(v.attribute.maxLineWidth)&&(b=et(b)?Math.min(v.attribute.maxLineWidth,b):v.attribute.maxLineWidth),v.setAttributes({maxLineWidth:b,ellipsis:(y=v.attribute.ellipsis)!==null&&y!==void 0?y:r})})}function oHt(i,t){const{limitLength:e,axisLength:n,ellipsis:r="...",orient:s}=t;if(Lt(i)||!et(e))return;const a=i[0].attribute.angle,o=UF(a),l=ait(a),u=s==="top"||s==="bottom";let c=n/i.length;i.forEach((h,d)=>{var f,p,g,m,_;if(u){if(l&&Math.floor(h.AABBBounds.height())<=e)return;if(o){const b=d4(h.attribute.x,(f=i[d+1])===null||f===void 0?void 0:f.attribute.x,(p=i[d-1])===null||p===void 0?void 0:p.attribute.x);et(b)&&(c=gn(c,b))}}else{if(l){const b=d4(h.attribute.y,(g=i[d+1])===null||g===void 0?void 0:g.attribute.y,(m=i[d-1])===null||m===void 0?void 0:m.attribute.y);et(b)&&(c=gn(c,b))}if(o&&Math.floor(h.AABBBounds.width())<=e)return}let v=null,y=null;u?l?(v=e,y=c):(v=c,y=e):l?(v=c,y=e):(v=e,y=c),h.setAttributes({maxLineWidth:v,ellipsis:(_=h.attribute.ellipsis)!==null&&_!==void 0?_:r,whiteSpace:"normal",heightLimit:y})})}function d4(i,t,e){let n;return et(t)&&(n=Math.abs(t-i)),et(e)&&(n=et(n)?Math.min(Math.abs(i-e),n):Math.abs(i-e)),n}function lHt(i,t,e,n,r){n==="left"||n==="right"?r==="left"?i.forEach(s=>{var a;s.setAttributes({dx:((a=s.attribute.dx)!==null&&a!==void 0?a:0)+t-s.AABBBounds.x1})}):r==="right"?i.forEach(s=>{var a;s.setAttributes({dx:((a=s.attribute.dx)!==null&&a!==void 0?a:0)+t+e-s.AABBBounds.x2})}):r==="center"&&i.forEach(s=>{var a;s.setAttributes({dx:((a=s.attribute.dx)!==null&&a!==void 0?a:0)+t+e/2-(s.AABBBounds.x1+s.AABBBounds.x2)/2})}):n!=="bottom"&&n!=="top"||(r==="top"?i.forEach(s=>{var a;s.setAttributes({dy:((a=s.attribute.dy)!==null&&a!==void 0?a:0)+t-s.AABBBounds.y1})}):r==="bottom"?i.forEach(s=>{var a;s.setAttributes({dy:((a=s.attribute.dy)!==null&&a!==void 0?a:0)+t+e-s.AABBBounds.y2})}):r==="middle"&&i.forEach(s=>{var a;s.setAttributes({dy:((a=s.attribute.dy)!==null&&a!==void 0?a:0)+t+e/2-(s.AABBBounds.y1+s.AABBBounds.y2)/2})}))}class _it{isInValidValue(t){return t<0||t>1}getTickCoord(t){const{start:e}=this.attribute,n=this.getRelativeVector();return{x:e.x+n[0]*t,y:e.y+n[1]*t}}getRelativeVector(t){const{start:e,end:n}=this.attribute;return[n.x-e.x,n.y-e.y]}getVerticalVector(t,e=!1,n){const{verticalFactor:r=1}=this.attribute,s=this.getRelativeVector(),a=k3t(s),o=[a[1],-1*a[0]];return qet(o,t*(e?1:-1)*r)}}class ve{constructor(){}static linear(t){return t}static none(){return this.linear}static get(t){return t<-1?t=-1:t>1&&(t=1),function(e){return t===0?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}}static getPowIn(t){return function(e){return Math.pow(e,t)}}static getPowOut(t){return function(e){return 1-Math.pow(1-e,t)}}static getPowInOut(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}static getBackIn(t){return function(e){return e*e*((t+1)*e-t)}}static getBackOut(t){return function(e){return--e*e*((t+1)*e+t)+1}}static getBackInOut(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}static sineIn(t){return 1-Math.cos(t*Math.PI/2)}static sineOut(t){return Math.sin(t*Math.PI/2)}static sineInOut(t){return-(Math.cos(Math.PI*t)-1)/2}static expoIn(t){return t===0?0:Math.pow(2,10*t-10)}static expoOut(t){return t===1?1:1-Math.pow(2,-10*t)}static expoInOut(t){return t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}static circIn(t){return-(Math.sqrt(1-t*t)-1)}static circOut(t){return Math.sqrt(1- --t*t)}static circInOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static bounceOut(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}static bounceIn(t){return 1-ve.bounceOut(1-t)}static bounceInOut(t){return t<.5?.5*ve.bounceIn(2*t):.5*ve.bounceOut(2*t-1)+.5}static getElasticIn(t,e){return function(n){if(n===0||n===1)return n;const r=e/qt*Math.asin(1/t);return-t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*qt/e)}}static getElasticOut(t,e){return function(n){if(n===0||n===1)return n;const r=e/qt*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-r)*qt/e)+1}}static getElasticInOut(t,e){return function(n){const r=e/qt*Math.asin(1/t);return(n*=2)<1?t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*qt/e)*-.5:t*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*qt/e)*.5+1}}static registerFunc(t,e){ve[t]=e}}function uHt(i,t){const e=1/t;let n=1;for(;i>e;)i-=e,n*=-1;const r=n*i/e;return r>0?r:1+r}ve.quadIn=ve.getPowIn(2),ve.quadOut=ve.getPowOut(2),ve.quadInOut=ve.getPowInOut(2),ve.cubicIn=ve.getPowIn(3),ve.cubicOut=ve.getPowOut(3),ve.cubicInOut=ve.getPowInOut(3),ve.quartIn=ve.getPowIn(4),ve.quartOut=ve.getPowOut(4),ve.quartInOut=ve.getPowInOut(4),ve.quintIn=ve.getPowIn(5),ve.quintOut=ve.getPowOut(5),ve.quintInOut=ve.getPowInOut(5),ve.backIn=ve.getBackIn(1.7),ve.backOut=ve.getBackOut(1.7),ve.backInOut=ve.getBackInOut(1.7),ve.elasticIn=ve.getElasticIn(1,.3),ve.elasticOut=ve.getElasticOut(1,.3),ve.elasticInOut=ve.getElasticInOut(1,.3*1.5),ve.easeInOutQuad=i=>(i/=.5)<1?.5*Math.pow(i,2):-.5*((i-=2)*i-2),ve.easeOutElastic=i=>{const t=2*Math.PI/3;return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((10*i-.75)*t)+1},ve.easeInOutElastic=i=>{const t=2*Math.PI/4.5;return i===0?0:i===1?1:i<.5?-Math.pow(2,20*i-10)*Math.sin((20*i-11.125)*t)/2:Math.pow(2,-20*i+10)*Math.sin((20*i-11.125)*t)/2+1};for(let i=0;i<10;i++)ve[`flicker${i}`]=t=>uHt(t,i);for(let i=2;i<10;i++)ve[`aIn${i}`]=t=>i*t*t+(1-i)*t;function Yi(i,t,e){return i+(t-i)*e}class cHt{constructor(){this.opacity=(t,e,n,r,s,a)=>{a.attribute.opacity=Yi(e,n,r)},this.baseOpacity=(t,e,n,r,s,a)=>{a.attribute.baseOpacity=Yi(e,n,r)},this.fillOpacity=(t,e,n,r,s,a)=>{a.attribute.fillOpacity=Yi(e,n,r)},this.strokeOpacity=(t,e,n,r,s,a)=>{a.attribute.strokeOpacity=Yi(e,n,r)},this.zIndex=(t,e,n,r,s,a)=>{a.attribute.zIndex=Yi(e,n,r)},this.backgroundOpacity=(t,e,n,r,s,a)=>{a.attribute.backgroundOpacity=Yi(e,n,r)},this.shadowOffsetX=(t,e,n,r,s,a)=>{a.attribute.shadowOffsetX=Yi(e,n,r)},this.shadowOffsetY=(t,e,n,r,s,a)=>{a.attribute.shadowOffsetY=Yi(e,n,r)},this.shadowBlur=(t,e,n,r,s,a)=>{a.attribute.shadowBlur=Yi(e,n,r)},this.fill=(t,e,n,r,s,a)=>{a.attribute.fill=Ug(e,n,r,!1)},this.fillPure=(t,e,n,r,s,a)=>{a.attribute.fill=s.fromParsedProps.fill?U$(s.fromParsedProps.fill,s.toParsedProps.fill,r):s.toParsedProps.fill},this.stroke=(t,e,n,r,s,a)=>{a.attribute.stroke=Ug(e,n,r,!1)},this.strokePure=(t,e,n,r,s,a)=>{a.attribute.stroke=s.fromParsedProps.stroke?U$(s.fromParsedProps.stroke,s.toParsedProps.stroke,r):s.toParsedProps.stroke},this.width=(t,e,n,r,s,a)=>{a.attribute.width=Yi(e,n,r),a.addUpdateBoundTag()},this.height=(t,e,n,r,s,a)=>{a.attribute.height=Yi(e,n,r),a.addUpdateBoundTag()},this.x=(t,e,n,r,s,a)=>{a.attribute.x=Yi(e,n,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.y=(t,e,n,r,s,a)=>{a.attribute.y=Yi(e,n,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.dx=(t,e,n,r,s,a)=>{a.attribute.dx=Yi(e,n,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.dy=(t,e,n,r,s,a)=>{a.attribute.dy=Yi(e,n,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.angle=(t,e,n,r,s,a)=>{a.attribute.angle=Yi(e,n,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.scaleX=(t,e,n,r,s,a)=>{a.attribute.scaleX=Yi(e,n,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.scaleY=(t,e,n,r,s,a)=>{a.attribute.scaleY=Yi(e,n,r),a.addUpdateBoundTag(),a.addUpdatePositionTag()},this.lineWidth=(t,e,n,r,s,a)=>{a.attribute.lineWidth=Yi(e,n,r),a.addUpdateBoundTag()},this.startAngle=(t,e,n,r,s,a)=>{a.attribute.startAngle=Yi(e,n,r),a.addUpdateBoundTag()},this.endAngle=(t,e,n,r,s,a)=>{a.attribute.endAngle=Yi(e,n,r),a.addUpdateBoundTag()},this.radius=(t,e,n,r,s,a)=>{a.attribute.radius=Yi(e,n,r),a.addUpdateBoundTag()},this.outerRadius=(t,e,n,r,s,a)=>{a.attribute.outerRadius=Yi(e,n,r),a.addUpdateBoundTag()},this.innerRadius=(t,e,n,r,s,a)=>{a.attribute.innerRadius=Yi(e,n,r),a.addUpdateBoundTag()},this.size=(t,e,n,r,s,a)=>{a.attribute.size=Yi(e,n,r),a.addUpdateBoundTag()},this.points=(t,e,n,r,s,a)=>{a.attribute.points=pM(e,n,r),a.addUpdateBoundTag()}}}const E_=new cHt;function f4(i,t,e,n,r,s){if(Number.isFinite(e)&&Number.isFinite(t))return s.attribute[i]=t+(e-t)*n,!0;if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){const a=[];let o=!0;for(let l=0;l<e.length;l++){const u=t[l],c=u+(e[l]-u)*n;if(!Number.isFinite(c)){o=!1;break}a.push(c)}return o&&(s.attribute[i]=a),!0}return!1}function p4(){}class ik{constructor(t,e,n,r){var s;this._startTime=0,this._hasFirstRun=!1,this._syncAttributeUpdate=()=>{this.target.setAttributes(this.target.attribute)},this.type=t,this.props=e,this.duration=n,this.easing=r?typeof r=="function"?r:(s=ve[r])!==null&&s!==void 0?s:ve.linear:ve.linear,t==="wait"&&(this.onUpdate=p4),this.id=on.GenAutoIncrementId(),this.syncAttributeUpdate=p4}bind(t,e){this.target=t,this.animate=e,this.onBind(),this.syncAttributeUpdate()}append(t){this.next=t,t.prev=this,t.setStartTime(this.getStartTime()+this.duration,!1)}updateDownstreamStartTimes(){let t=this.next,e=this._startTime+this.duration;for(;t;)t.setStartTime(e,!1),e+=t.duration,t=t.next;this.animate.updateDuration()}getLastProps(){return this.prev?this.prev.props||{}:this.animate.getStartProps()}setDuration(t,e=!0){this.duration=t,e&&this.updateDownstreamStartTimes()}getDuration(){return this.duration}determineInterpolateUpdateFunction(){if(!this.props)return;const t=[];this.propKeys.forEach(e=>{if(e==="fill"||e==="stroke"){const n=this.fromProps[e],r=this.props[e];if(Ht(n)&&Ht(r)){const s=Vi.Get(n,ts.Color255),a=Vi.Get(r,ts.Color255);this.fromParsedProps||(this.fromParsedProps={}),this.toParsedProps||(this.toParsedProps={}),this.fromParsedProps[e]=s,this.toParsedProps[e]=a,t.push(E_[e==="fill"?"fillPure":"strokePure"])}else E_[e]?t.push(E_[e]):t.push(f4)}else E_[e]?t.push(E_[e]):t.push(f4)}),this.interpolateUpdateFunctions=t}setStartTime(t,e=!0){this._startTime=t,e&&this.updateDownstreamStartTimes()}getStartTime(){return this._startTime}onBind(){this.target.type==="glyph"&&(this.syncAttributeUpdate=this._syncAttributeUpdate)}onFirstRun(){}onStart(){if(!this._hasFirstRun){this._hasFirstRun=!0,this.fromProps=this.getLastProps();const t=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach(e=>{var n;this.fromProps[e]=(n=this.fromProps[e])!==null&&n!==void 0?n:t[e]}),this.determineInterpolateUpdateFunction(),this.tryPreventConflict(),this.trySyncStartProps(),this.onFirstRun()}}tryPreventConflict(){const t=this.animate;this.target.animates.forEach(e=>{if(e===t||e.priority>t.priority||e.priority===1/0)return;const n=e.getStartProps();this.propKeys.forEach(r=>{n[r]!=null&&e.preventAttr(r)})})}deleteSelfAttr(t){var e;delete this.props[t],this.fromProps&&delete this.fromProps[t];const n=this.propKeys.indexOf(t);n!==-1&&(this.propKeys.splice(n,1),(e=this.interpolateUpdateFunctions)===null||e===void 0||e.splice(n,1))}trySyncStartProps(){this.propKeys.forEach(t=>{this.fromProps[t]=this.animate.target.getComputedAttribute(t)})}update(t,e,n){if(this.onStart(),!this.props||!this.propKeys)return;const r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((s,a)=>{if(!this.animate.validAttr(this.propKeys[a]))return;const o=this.propKeys[a];s(o,this.fromProps[o],this.props[o],r,this,this.target)}),this.onUpdate(t,r,n),this.syncAttributeUpdate()}onUpdate(t,e,n){}onEnd(t){this.target.setAttributes(this.props),t?this._endCb=t:this._endCb&&this._endCb(this.animate,this)}getEndProps(){return this.props}getFromProps(){return this.fromProps}getMergedEndProps(){return this.getEndProps()}stop(){}release(){}}class hHt extends ik{constructor(t,e,n,r){super(t,e,n,r)}onStart(){super.onStart();const t=this.getFromProps();this.target.setAttributes(t)}update(t,e,n){this.onStart()}determineInterpolateUpdateFunction(){}}class vit extends kh{get animateCount(){return this._animateCount}constructor(){super(),this.head=null,this.tail=null,this.animateMap=new Map,this._animateCount=0,this._playSpeed=1,this._totalDuration=0,this._startTime=0,this._currentTime=0,this._animationEndFlag=!0,this.id=on.GenAutoIncrementId(),this.paused=!1}isRunning(){return!this.paused&&this._animateCount>0}forEachAccessAnimate(t){let e=this.head,n=0;for(;e;){const r=e.next;t(e.animate,n),n++,e=r}}addAnimate(t){const e={animate:t,next:null,prev:null};this.head?this.tail&&(this.tail.next=e,e.prev=this.tail,this.tail=e):(this.head=e,this.tail=e),this.animateMap.set(t,e),this._animateCount++,this._totalDuration=Math.max(this._totalDuration,t.getStartTime()+t.getDuration())}pause(){this.paused=!0}resume(){this.paused=!1}tick(t){if(this.paused)return;this._animationEndFlag&&(this._animationEndFlag=!1,this.emit("animationStart"));const e=t*this._playSpeed;this._currentTime+=e,this.forEachAccessAnimate((n,r)=>{n.status===Dr.END?this.removeAnimate(n,!0):n.status!==Dr.RUNNING&&n.status!==Dr.INITIAL||n.advance(e)}),this._animateCount===0&&(this._animationEndFlag=!0,this.emit("animationEnd"))}clear(){this.forEachAccessAnimate(t=>{t.release()}),this.head=null,this.tail=null,this.animateMap.clear(),this._animateCount=0,this._totalDuration=0}removeAnimate(t,e=!0){const n=this.animateMap.get(t);n&&(e&&(t._onRemove&&t._onRemove.forEach(r=>r()),t.release()),n.prev?n.prev.next=n.next:this.head=n.next,n.next?n.next.prev=n.prev:this.tail=n.prev,this.animateMap.delete(t),this._animateCount--,t.getStartTime()+t.getDuration()>=this._totalDuration&&this.recalculateTotalDuration())}recalculateTotalDuration(){this._totalDuration=0,this.forEachAccessAnimate(t=>{this._totalDuration=Math.max(this._totalDuration,t.getStartTime()+t.getDuration())})}getTotalDuration(){return this._totalDuration}getPlaySpeed(){return this._playSpeed}setPlaySpeed(t){this._playSpeed=t}getPlayState(){return this.paused?"paused":this.animateCount===0?"stopped":"playing"}setStartTime(t){this._startTime=t}getStartTime(){return this._startTime}getCurrentTime(){return this._currentTime}setCurrentTime(t){this._currentTime=t}}const YF=new vit;YF.isGlobal=!0;class dHt{constructor(t=on.GenAutoIncrementId(),e=YF,n){this.id=t,this.status=Dr.INITIAL,this._timeline=e,e.addAnimate(this),this.slience=n,this._startTime=0,this._duration=0,this._totalDuration=0,this._loopCount=0,this._currentLoop=0,this._bounce=!1,this._firstStep=null,this._lastStep=null,this._startProps={},this._endProps={},this._preventAttrs=new Set,this.currentTime=0,this.interpolateUpdateFunction=null,this.priority=0}getStartProps(){return this._startProps}getEndProps(){return this._endProps}setTimeline(t){this._timeline=t}getTimeline(){return this._timeline}get timeline(){return this._timeline}bind(t){return this.target=t,this.target.animates||(this.target.animates=new Map),this.target.animates.set(this.id,this),this.onRemove(()=>{this.stop(),this.target.animates.delete(this.id)}),this.target.onAnimateBind&&!this.slience&&this.target.onAnimateBind(this),this.target.animationAttribute||(this.target.animationAttribute={}),this}to(t,e=300,n="linear"){const r=new ik(Av.to,t,e,n);return r.bind(this.target,this),this.updateStepAfterAppend(r),this}wait(t){const e=new hHt(Av.wait,{},t,"linear");return e.bind(this.target,this),this.updateStepAfterAppend(e),this}updateStepAfterAppend(t){this._firstStep?(this._lastStep.append(t),this._lastStep=t):(this._firstStep=t,this._lastStep=t),this.parseStepProps(t),this.updateDuration()}parseStepProps(t){this._lastStep&&(t.propKeys=t.propKeys||Object.keys(t.props),Object.keys(this._endProps).forEach(e=>{var n;t.props[e]=(n=t.props[e])!==null&&n!==void 0?n:this._endProps[e]}),t.propKeys.forEach(e=>{this._endProps[e]=t.props[e]}))}reSyncProps(){if(!this._lastStep)return;this._endProps={};let t=this._firstStep;for(;t;)Object.keys(this._endProps).forEach(e=>{var n;t.props[e]=(n=t.props[e])!==null&&n!==void 0?n:this._endProps[e]}),t.propKeys.forEach(e=>{this._endProps[e]=t.props[e]}),t=t.next}from(t,e=300,n="linear"){const r=new ik(Av.from,t,e,n);return this._firstStep?(this._lastStep.append(r),this._lastStep=r):(this._firstStep=r,this._lastStep=r),this.updateDuration(),this}play(t){return t.bind(this.target,this),this.updateStepAfterAppend(t),this}pause(){this.status===Dr.RUNNING&&(this.status=Dr.PAUSED)}resume(){this.status===Dr.PAUSED&&(this.status=Dr.RUNNING)}onStart(t){var e;t?(this._onStart||(this._onStart=[]),this._onStart.push(t)):((e=this._onStart)===null||e===void 0||e.forEach(n=>n()),Object.keys(this._endProps).forEach(n=>{this._startProps[n]=this.target.getComputedAttribute(n)}))}onEnd(t){var e;t?(this._onEnd||(this._onEnd=[]),this._onEnd.push(t)):(e=this._onEnd)===null||e===void 0||e.forEach(n=>n())}onFrame(t){t&&(this._onFrame||(this._onFrame=[]),this._onFrame.push(t))}onRemove(t){var e;t?(this._onRemove||(this._onRemove=[]),this._onRemove.push(t)):(e=this._onRemove)===null||e===void 0||e.forEach(n=>n())}preventAttr(t){this._preventAttrs.add(t),delete this._startProps[t],delete this._endProps[t];let e=this._firstStep;for(;e;)e.deleteSelfAttr(t),e=e.next}preventAttrs(t){t.forEach(e=>this._preventAttrs.add(e))}validAttr(t){return!this._preventAttrs.has(t)}runCb(t){var e;return(e=this._lastStep)===null||e===void 0||e.onEnd(t),this}startAt(t){return this._startTime=t,this}customInterpolate(t,e,n,r,s,a){return!1}getFromValue(){return this._startProps}getToValue(){return this._endProps}stop(t){let e=this._firstStep;for(;e;)e.stop(),e=e.next;this.status!==Dr.END&&this.onEnd(),this.status=Dr.END,this.target&&(t==="start"?this.target.setAttributes(this._startProps):t==="end"?this.target.setAttributes(this._endProps):t&&this.target.setAttributes(t))}release(){this.status=Dr.END,this._onRemove&&this._onRemove.forEach(t=>t()),this._onStart=[],this._onFrame=[],this._onEnd=[],this._onRemove=[],this.forEachStep(t=>{t.release()})}getDuration(){return this._duration}getStartTime(){return this._startTime}afterAll(t){if(!t||t.length===0)return this;let e=0;return t.forEach(n=>{const r=n.getStartTime()+n.getTotalDuration();e=Math.max(e,r)}),this.startAt(e)}after(t){if(!t)return this;const e=t.getStartTime()+t.getTotalDuration();return this.startAt(e)}parallel(t){return t?(this.startAt(t.getStartTime()),this):this}loop(t){return t===!0?t=1/0:t===!1&&(t=0),this._loopCount=t,this.updateDuration(),this}bounce(t){return this._bounce=t,this}advance(t){var e,n,r;if(this.status===Dr.END)return void console.warn("aaa ");const s=this.currentTime+t;if(s<this._startTime)return void(this.currentTime=s);if(s>=this._startTime+this._totalDuration)return(e=this._lastStep)===null||e===void 0||e.onUpdate(!0,1,{}),(n=this._lastStep)===null||n===void 0||n.onEnd(),this.onEnd(),void(this.status=Dr.END);this.status=Dr.RUNNING,this.currentTime<=this._startTime&&this.onStart(),this.currentTime=s;let a=s-this._startTime,o=!1,l=!1;if(this._loopCount>0){a=(s-this._startTime)%this._duration;const d=Math.floor((s-this._startTime)/this._duration);o=d>this._currentLoop,this._currentLoop=d,l=this._bounce&&d%2==1,l&&(a=this._duration-a)}o&&!l&&this.target.setAttributes(this._startProps);let u=null;if(this._lastStep===this._firstStep)u=this._firstStep;else{let d=this._firstStep;for(;d;){const f=d.getStartTime(),p=d.getDuration();if(a>=f&&a<=f+p){u=d;break}d=d.next}}if(!u)return;u!==this.lastRunStep&&((r=this.lastRunStep)===null||r===void 0||r.onEnd()),this.lastRunStep=u;const c=(a-u.getStartTime())/u.getDuration(),h=c>=1;u.update(h,c,{}),h&&(u.onEnd(),this.lastRunStep=null)}updateDuration(){this._lastStep?(this._duration=this._lastStep.getStartTime()+this._lastStep.getDuration(),this._totalDuration=this._duration*(this._loopCount+1)):this._duration=0}getTotalDuration(){return this._totalDuration}getLoop(){return this._loopCount}forEachStep(t){let e=this._firstStep;for(;e;)t(e),e=e.next}}const fHt=new Itt;class pHt{constructor(){this.released=!1}tick(t,e){fHt.addAnimationFrameCb(()=>{if(!this.released)return e(this)})}release(){this.released=!0}getTime(){return Date.now()}}class gHt extends kh{constructor(t){super(),this.timelines=[],this.frameTimeHistory=[],this.handleTick=(e,n)=>{const{once:r=!1}=n??{};if(this.ifCanStop())return this.stop(),!1;const s=e.getTime();this._lastTickTime=s,this.lastFrameTime<0&&(this.lastFrameTime=s-this.interval+this.timeOffset,this.frameTimeHistory.push(this.lastFrameTime));const a=s-this.lastFrameTime,o=this.checkSkip(a);return o||(this._handlerTick(a),this.lastFrameTime=s,this.frameTimeHistory.push(this.lastFrameTime)),r||e.tick(this.interval,this.handleTick),!o},this._handlerTick=e=>{this.status===Ds.RUNNING&&(this.tickCounts++,this.timelines.forEach(n=>{n.tick(e)}),this.emit("tick",e))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.stage=t,this.autoStop=!0,this.interval=16,this.computeTimeOffsetAndJitter()}bindStage(t){this.stage=t}computeTimeOffsetAndJitter(){this.timeOffset=Math.floor(Math.random()*this.interval),this._jitter=Math.min(Math.max(.2*this.interval,6),.7*this.interval)}init(){this.interval=16,this.status=Ds.INITIAL,vt.global.hooks.onSetEnv.tap("graph-ticker",()=>{this.initHandler(!1)}),vt.global.env&&this.initHandler(!1)}addTimeline(t){this.timelines.push(t)}remTimeline(t){this.timelines=this.timelines.filter(e=>e!==t)}getTimelines(){return this.timelines}initHandler(t=!1){this.setupTickHandler(t)}setupTickHandler(t=!1){if(!t&&this.tickerHandler)return!0;const e=new pHt;return this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=e,!0}setInterval(t){this.interval=t,this.computeTimeOffsetAndJitter()}getInterval(){return this.interval}setFPS(t){this.setInterval(Math.floor(1e3/t))}getFPS(){return 1e3/this.interval}tick(t){this.tickerHandler.tick(t,e=>this.handleTick(e,{once:!0}))}tickTo(t){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(t,e=>{this.handleTick(e,{once:!0})})}pause(){return this.status!==Ds.INITIAL&&(this.status=Ds.PAUSE,!0)}resume(){return this.status!==Ds.INITIAL&&(this.status=Ds.RUNNING,!0)}ifCanStop(){return!!(this.autoStop&&(!this.timelines.length||this.timelines.every(t=>!t.isRunning())))}start(t=!1){return this.status===Ds.RUNNING||!this.tickerHandler||!t&&(this.status===Ds.PAUSE||this.ifCanStop())?!1:(this.status=Ds.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0)}stop(){this.status=Ds.INITIAL,this.setupTickHandler(!0),this.lastFrameTime=-1}trySyncTickStatus(){this.status===Ds.INITIAL&&this.timelines.some(t=>t.isRunning())?this.start():this.status===Ds.RUNNING&&this.timelines.every(t=>!t.isRunning())&&this.stop()}release(){var t;this.stop(),this.timelines=[],(t=this.tickerHandler)===null||t===void 0||t.release(),this.tickerHandler=null,this.lastFrameTime=-1}checkSkip(t){var e,n,r;return((r=(n=(e=this.stage)===null||e===void 0?void 0:e.params)===null||n===void 0?void 0:n.optimize)===null||r===void 0?void 0:r.tickRenderMode)==="performance"?!1:t<this.interval+2*(Math.random()-.5)*this._jitter}}class dd{constructor(){this.transitions=new Map,this.registerDefaultTransitions()}static getInstance(){return dd.instance||(dd.instance=new dd),dd.instance}registerDefaultTransitions(){this.registerTransition("appear","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("appear","appear",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("appear","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("appear","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("normal","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("normal","normal",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("normal","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("normal","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","*",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("exit","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","enter",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","exit",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("enter","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("enter","enter",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("enter","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("enter","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("disappear","*",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("disappear","appear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("update","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("update","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("update","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("state","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("state","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("state","exit",()=>({allowTransition:!0,stopOriginalTransition:!0}))}isTransitionAllowed(t,e,n){var r,s,a,o;let l=(r=this.transitions.get(t))===null||r===void 0?void 0:r.get(e);return l?l(n,t):(l=(s=this.transitions.get(t))===null||s===void 0?void 0:s.get("*"),l?l(n,t):(l=(a=this.transitions.get("*"))===null||a===void 0?void 0:a.get(e),l?l(n,t):(l=(o=this.transitions.get("*"))===null||o===void 0?void 0:o.get("*"),l?l(n,t):{allowTransition:!0,stopOriginalTransition:!0})))}registerTransition(t,e,n){let r=this.transitions.get(t);r||(r=new Map,this.transitions.set(t,r)),r.set(e,n)}}dd.getInstance();class se{static registerBuiltInAnimate(t,e){se.builtInAnimateMap[t]=e}constructor(t){this._animates=[],this._startCallbacks=[],this._endCallbacks=[],this._started=!1,this._activeCount=0,this._target=t}get started(){return this._started}onStart(t){t?(this._startCallbacks.push(t),this._started&&this._activeCount>0&&t()):this._startCallbacks.forEach(e=>{e()})}onEnd(t){t?this._endCallbacks.push(t):this._endCallbacks.forEach(e=>{e()})}_trackAnimation(t){this._animates.push(t),this._activeCount++,this._activeCount!==1||this._started||(this._started=!0,this.onStart()),t.onEnd(()=>{this._activeCount--;const e=this._animates.indexOf(t);e>=0&&this._animates.splice(e,1),this._activeCount===0&&this._started&&(this._started=!1,this.onEnd())})}parseParams(t,e,n){var r,s;const a=this.resolveValue(t.totalTime,void 0,void 0),o=this.resolveValue(t.startTime,void 0,0),l=Object.assign({},t);l.oneByOneDelay=0,l.startTime=o,l.totalTime=a;const u=this.resolveValue(t.oneByOne,n,!1);if(e){const c=l.timeSlices;J(c)||(l.timeSlices=[c]);let h=0;l.timeSlices=l.timeSlices.map(p=>{const g=this.resolveValue(p.delay,n,0),m=this.resolveValue(p.delayAfter,n,0),_=this.resolveValue(p.duration,n,300);return h+=g+_+m,Object.assign(Object.assign({},p),{delay:g,delayAfter:m,duration:_})});let d=0;u&&(d=typeof u=="number"?u:u?h:0),l.oneByOneDelay=d;let f=1;if(a){const p=h+d*(this._target.count-2);f=a?a/p:1}l.timeSlices=l.timeSlices.map(p=>{let g=p.effects;return Array.isArray(g)||(g=[g]),Object.assign(Object.assign({},p),{delay:p.delay*f,delayAfter:p.delayAfter*f,duration:p.duration*f,effects:g.map(m=>{var _,v;const y=(_=m.custom)!==null&&_!==void 0?_:se.builtInAnimateMap[(v=m.type)!==null&&v!==void 0?v:"fromTo"],b=y&&it(y)?/^class\s/.test(Function.prototype.toString.call(y))?1:2:0;return Object.assign(Object.assign({},m),{custom:y,customType:b})})})}),l.oneByOneDelay=d*f,l.startTime=o*f}else{const c=this.resolveValue(t.delay,n,0),h=this.resolveValue(t.delayAfter,n,0),d=this.resolveValue(t.duration,n,300);let f=0;u&&(f=typeof u=="number"?u:u?c+h+d:0),l.oneByOneDelay=f,l.custom=(r=t.custom)!==null&&r!==void 0?r:se.builtInAnimateMap[(s=t.type)!==null&&s!==void 0?s:"fromTo"];const p=l.custom&&it(l.custom)?/^class\s/.test(Function.prototype.toString.call(l.custom))?1:2:0;if(l.customType=p,a){const g=c+h+d+f*(this._target.count-2),m=a?a/g:1;l.delay=c*m,l.delayAfter=h*m,l.duration=d*m,l.oneByOneDelay=f*m,l.startTime=o}}return l}execute(t){Array.isArray(t)?t.forEach(e=>this._execute(e)):this._execute(t)}_execute(t){if(t.selfOnly)return this._executeItem(t,this._target,0,1);const e="timeSlices"in t;let n;e&&t.partitioner&&(n=(n??this._target.getChildren()).filter(s=>{var a,o;return t.partitioner((o=(a=s.context)===null||a===void 0?void 0:a.data)===null||o===void 0?void 0:o[0],s,{})})),e&&t.sort&&(n=n??this._target.getChildren(),n.sort((s,a)=>{var o,l,u,c;return t.sort((l=(o=s.context)===null||o===void 0?void 0:o.data)===null||l===void 0?void 0:l[0],(c=(u=a.context)===null||u===void 0?void 0:u.data)===null||c===void 0?void 0:c[0],s,a,{})}));const r=e?(s,a,o)=>{const l=this.parseParams(t,e,s),u=this.executeTimelineItem(l,s,a,o);u&&this._trackAnimation(u)}:(s,a,o)=>{const l=this.parseParams(t,e,s),u=this.executeTypeConfigItem(l,s,a,o);u&&this._trackAnimation(u)};n?n.forEach((s,a)=>r(s,a,n.length)):this._target.count<=1?r(this._target,0,1):this._target.forEachChildren((s,a)=>r(s,a,this._target.count-1))}executeTypeConfigItem(t,e,n,r){var s,a,o,l,u,c,h,d;const{type:f="fromTo",channel:p,customParameters:g,easing:m="linear",delay:_=0,delayAfter:v=0,duration:y=300,startTime:b=0,oneByOneDelay:x=0,loop:S,bounce:w,priority:A=0,options:k,custom:C,customType:M,controlOptions:R}=t,P=e.animate();P.priority=A;const O=it(_)?_((a=(s=e.context)===null||s===void 0?void 0:s.data)===null||a===void 0?void 0:a[0],e,{}):_,T=(l=(o=e.context)===null||o===void 0?void 0:o.data)===null||l===void 0?void 0:l[0],D=(u=e.context)===null||u===void 0?void 0:u.indexKey;T&&D&&(n=(c=T[D])!==null&&c!==void 0?c:n),P.startAt(b);const B=n*x+O;B>0&&P.wait(B);let I=null,F=t.to,j=t.from;F||(I||(I=this.createPropsFromChannel(p,e)),F=I.props),j||(I||(I=this.createPropsFromChannel(p,e)),j=I.from),this._handleRunAnimate(P,C,M,j,F,y,m,g,R,k,f,e);let H=0;x&&(H=x*(r-n-1));const U=it(v)?v((d=(h=e.context)===null||h===void 0?void 0:h.data)===null||d===void 0?void 0:d[0],e,{}):v;return U>0&&(H+=U),H>0&&P.wait(H),S&&S>0&&P.loop(S),w&&P.bounce(!0),P}_handleRunAnimate(t,e,n,r,s,a,o,l,u,c,h,d){var f,p,g,m,_,v,y,b;if(e&&n){let x=this.resolveValue(l,d);typeof x=="function"&&(x=x((p=(f=d.context)===null||f===void 0?void 0:f.data)===null||p===void 0?void 0:p[0],d,{})),x=Object.assign({width:((g=d.stage)===null||g===void 0?void 0:g.width)||0,height:((m=d.stage)===null||m===void 0?void 0:m.height)||0,group:this._target.parent},x);const S=it(c)?c.call(null,(v=x&&((_=x.data)===null||_===void 0?void 0:_[0]))!==null&&v!==void 0?v:(b=(y=d.context)===null||y===void 0?void 0:y.data)===null||b===void 0?void 0:b[0],d,x):c;x.options=S,x.controlOptions=u,n===1?this.createCustomAnimation(t,e,r,s,a,o,x):n===2&&this.createCustomInterpolatorAnimation(t,e,s,a,o,x)}else h==="to"?t.to(s,a,o):h==="from"&&t.from(s,a,o)}executeTimelineItem(t,e,n,r){var s,a,o,l;const{timeSlices:u,startTime:c=0,loop:h,bounce:d,oneByOneDelay:f,priority:p,controlOptions:g}=t,m=(a=(s=e.context)===null||s===void 0?void 0:s.data)===null||a===void 0?void 0:a[0],_=(o=e.context)===null||o===void 0?void 0:o.indexKey;m&&_&&(n=(l=m[_])!==null&&l!==void 0?l:n);const v=e.animate();return v.priority=p,v.startAt(c),v.wait(n*f),h&&h>0&&v.loop(h),d&&v.bounce(!0),(Array.isArray(u)?u:[u]).forEach(y=>{this.applyTimeSliceToAnimate(y,v,e,g)}),f&&v.wait(f*(r-n-1)),v}applyTimeSliceToAnimate(t,e,n,r){var s,a,o,l;const{effects:u,duration:c=300,delay:h=0,delayAfter:d=0}=t,f=it(h)?h((a=(s=n.context)===null||s===void 0?void 0:s.data)===null||a===void 0?void 0:a[0],n,{}):h,p=it(d)?d((l=(o=n.context)===null||o===void 0?void 0:o.data)===null||l===void 0?void 0:l[0],n,{}):d;f>0&&e.wait(f),(Array.isArray(u)?u:[u]).forEach(g=>{var m;const{type:_="fromTo",channel:v,customParameters:y,easing:b="linear",options:x}=g;let S=null,w=g.to,A=g.from;w||(S||(S=this.createPropsFromChannel(v,n)),w=S.props),A||(S||(S=this.createPropsFromChannel(v,n)),A=S.from);const k=(m=g.custom)!==null&&m!==void 0?m:se.builtInAnimateMap[_],C=g.customType;this._handleRunAnimate(e,k,C,A,w,c,b,y,r,x,_,n)}),p>0&&e.wait(p)}createCustomInterpolatorAnimation(t,e,n,r,s,a){Object.keys(n).forEach(l=>{t.target.getComputedAttribute(l)}),t.interpolateUpdateFunction=(l,u,c,h,d)=>{e(c,l,u,h,d,t.target,a)},t.to(n,r,s)}createCustomAnimation(t,e,n,r,s,a,o){const l=new e(n,r,s,a,o);t.play(l)}createPropsFromChannel(t,e){const n={};let r=null;return t?(Array.isArray(t)?t.forEach(s=>{var a,o;const l=(o=(a=e.context)===null||a===void 0?void 0:a.diffAttrs)===null||o===void 0?void 0:o[s];l!==void 0&&(n[s]=l)}):Object.keys(t).forEach(s=>{var a,o,l,u;const c=t[s];c.to!==void 0&&(typeof c.to=="function"?n[s]=c.to((o=(a=e.context)===null||a===void 0?void 0:a.data)===null||o===void 0?void 0:o[0],e,{}):n[s]=c.to),c.from!==void 0&&(r||(r={}),typeof c.from=="function"?r[s]=c.from((u=(l=e.context)===null||l===void 0?void 0:l.data)===null||u===void 0?void 0:u[0],e,{}):r[s]=c.from)}),{from:r,props:n}):{from:r,props:n}}resolveValue(t,e,n){var r,s;return t===void 0?n:typeof t=="function"&&e?t((s=(r=e.context)===null||r===void 0?void 0:r.data)===null||s===void 0?void 0:s[0],e,{}):t}executeItem(t,e,n=0,r=1){return Array.isArray(t)?t.map(s=>this._executeItem(s,e,n,r)).filter(Boolean):[this._executeItem(t,e,n,r)].filter(Boolean)}_executeItem(t,e,n=0,r=1){if(!e)return null;const s="timeSlices"in t;let a=null;const o=this.parseParams(t,s);return a=s?this.executeTimelineItem(o,e,n,r):this.executeTypeConfigItem(o,e,n,r),a&&this._trackAnimation(a),a}stop(t,e=!0){for(;this._animates.length>0;){const n=this._animates.pop();e===!1&&(n.status=Dr.END),n?.stop(t)}this._animates=[],this._activeCount=0,this._started&&(this._started=!1,e&&this.onEnd())}}se.builtInAnimateMap={};const ul={APPEAR:"appear",DISAPPEAR:"disappear",UPDATE:"update",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight"};class mHt{constructor(t){this.graphic=t}registerState(t){this.states||(this.states=new Map),this.states.set(t.name,t)}clearStates(){var t;(t=this.states)===null||t===void 0||t.clear()}}class _Ht{constructor(t){this.stateList=null,this.graphic=t}applyState(t,e,n){const r=dd.getInstance(),s=[],a=[];if(this.stateList&&this.stateList.length?t.forEach((o,l)=>{const u={allowTransition:!0};this.stateList.forEach(c=>{const h=r.isTransitionAllowed(c.state,o,this.graphic);u.allowTransition=u.allowTransition&&h.allowTransition}),u.allowTransition&&(a.push({state:o,animationConfig:J(e[l])?e[l].map(c=>c.animation):e[l].animation,executor:new se(this.graphic)}),this.stateList.forEach(c=>{r.isTransitionAllowed(c.state,o,this.graphic).stopOriginalTransition&&s.push(c)}))}):t.forEach((o,l)=>{a.push({state:o,animationConfig:J(e[l])?e[l].map(u=>u.animation):e[l].animation,executor:new se(this.graphic)})}),s.forEach(o=>{o.executor.stop(null,!1)}),a.length){a[0].executor.execute(a[0].animationConfig);for(let o=0;o<a.length;o++){const l=a[o+1],u=a[o];u.executor.onEnd(()=>{l&&l.executor.execute(l.animationConfig),this.stateList=this.stateList.filter(c=>c!==u),o===a.length-1&&n&&n(!1)})}}else n&&n(!0);this.stateList?this.stateList=this.stateList.filter(o=>!s.includes(o)):this.stateList=[],this.stateList.push(...a)}applyAppearState(t,e){this.applyState([ul.APPEAR],[{name:ul.APPEAR,animation:t}],e)}applyDisappearState(t,e){this.applyState([ul.DISAPPEAR],[{name:ul.DISAPPEAR,animation:t}],e)}applyUpdateState(t,e){this.applyState([ul.UPDATE],[{name:ul.UPDATE,animation:t}],e)}applyHighlightState(t,e){this.applyState([ul.HIGHLIGHT],[{name:ul.HIGHLIGHT,animation:t}],e)}applyUnhighlightState(t,e){this.applyState([ul.UNHIGHLIGHT],[{name:ul.UNHIGHLIGHT,animation:t}],e)}stopState(t,e){var n;const r=(n=this.stateList)===null||n===void 0?void 0:n.find(s=>s.state===t);r&&r.executor.stop(e)}clearState(){var t;(t=this.stateList)===null||t===void 0||t.forEach(e=>{e.executor.stop(null,!1)}),this.stateList=null}reApplyState(t){var e;const n=(e=this.stateList)===null||e===void 0?void 0:e.find(r=>r.state===t);if(n&&n.executor.started){const r=this.stateList.slice();n.executor.stop(),this.stateList=r,n.executor.execute(n.animationConfig)}}}class XF{_getAnimationStateManager(t){return t._animationStateManager||(t._animationStateManager=new _Ht(t)),t._animationStateManager}_getAnimationStateStore(t){return t._animationStateStore||(t._animationStateStore=new mHt(t)),t._animationStateStore}registerAnimationState(t){return this._getAnimationStateStore(this).registerState(t),this}applyAnimationState(t,e,n){return this._getAnimationStateManager(this).applyState(t,e,n),this}applyAppearState(t,e){return this._getAnimationStateManager(this).applyAppearState(t,e),this}applyDisappearState(t,e){return this._getAnimationStateManager(this).applyDisappearState(t,e),this}applyUpdateState(t,e){return this._getAnimationStateManager(this).applyUpdateState(t,e),this}applyHighlightState(t,e){return this._getAnimationStateManager(this).applyHighlightState(t,e),this}applyUnhighlightState(t,e){return this._getAnimationStateManager(this).applyUnhighlightState(t,e),this}stopAnimationState(t,e,n=!1){return this._getAnimationStateManager(this).stopState(t,e),n&&this.isContainer&&this.forEachChildren(r=>{r.stopAnimationState(t,e,n)}),this}clearAnimationStates(){const t=this._animationStateManager;return t&&t.clearState(),this}reApplyAnimationState(t,e=!1){const n=this._animationStateManager;return n&&n.reApplyState(t),e&&this.isContainer&&this.forEachChildren(r=>{r.reApplyAnimationState(t,e)}),this}static extend(t){return new XF()._getAnimationStateManager(t),t}}class vHt{getAttributes(t=!1){return t&&this.finalAttribute?this.finalAttribute:this.attribute}animate(t){var e,n,r;const s=new dHt(t?.id,(n=(e=t?.timeline)!==null&&e!==void 0?e:this.stage&&this.stage.getTimeline())!==null&&n!==void 0?n:YF,t?.slience);if(s.bind(this),t){const{onStart:a,onEnd:o,onRemove:l}=t;a!=null&&s.onStart(a),o!=null&&s.onEnd(o),l!=null&&s.onRemove(l)}return(r=this.stage)===null||r===void 0||r.ticker.start(),s}createTimeline(){return new vit}createTicker(t){return new gHt(t)}setFinalAttributes(t){this.finalAttribute||(this.finalAttribute={}),Object.assign(this.finalAttribute,t)}initFinalAttributes(t){this.finalAttribute=t}initAnimateExecutor(){this._animateExecutor||(this._animateExecutor=new se(this))}executeAnimation(t){return this.initAnimateExecutor(),this._animateExecutor.execute(t),this}executeAnimations(t){return this.initAnimateExecutor(),t.forEach(e=>{this._animateExecutor.execute(e)}),this}getFinalAttribute(){return this.finalAttribute}getGraphicAttribute(t,e=!1){return!e&&this.finalAttribute?this.finalAttribute[t]:this.attribute[t]}pauseAnimation(t=!1){this.animates&&this.animates.forEach(e=>e.pause()),t&&this.isContainer&&this.forEachChildren(e=>{e.pauseAnimation(t)})}resumeAnimation(t=!1){this.animates&&this.animates.forEach(e=>e.resume()),t&&this.isContainer&&this.forEachChildren(e=>{e.resumeAnimation(t)})}stopAnimation(t=!1){this.animates&&this.animates.forEach(e=>e.stop()),t&&this.isContainer&&this.forEachChildren(e=>{e.stopAnimation(t)})}}function bf(){Be(En,XF),Be(En,vHt)}class bi extends ik{constructor(t,e,n,r,s){super("customAnimate",e,n,r),this.type="customAnimate",this.customFrom=t,this.params=s,this.from=t,this.to=e}update(t,e,n){if(this.onStart(),!this.props||!this.propKeys)return;const r=this.easing(e);this.onUpdate(t,r,n),this.syncAttributeUpdate()}setProps(t){this.props=t,this.propKeys=Object.keys(t),this.animate.reSyncProps()}}class VM extends bi{completeBind(t){this.setStartTime(0),this._animator&&this._animator.start(),this.setDuration(t.getDuration())}stop(){this._animator&&this._animator.stop()}}class yit extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s),this.willCallBeforeStageRender=!0,this.willCallAfterStageRender=!0,this._beforeStageRender=()=>{if(!this.willCallBeforeStageRender)return;this.willCallBeforeStageRender=!1;const a=this.target.stage,o=a.window.getContext().canvas.nativeCanvas,l=this.beforeStageRender(a,o);l&&this.renderToStage(a,l)},this._afterStageRender=()=>{if(!this.willCallAfterStageRender)return;this.willCallAfterStageRender=!1;const a=this.target.stage,o=a.window.getContext().canvas.nativeCanvas,l=this.afterStageRender(a,o);l&&this.renderToStage(a,l)},this.props={}}beforeStageRender(t,e){return!1}afterStageRender(t,e){return!1}onFirstRun(){super.onFirstRun(),this.target.stage.setBeforeRender(this._beforeStageRender),this.target.stage.setAfterRender(this._afterStageRender),this.target.stage.disableDirtyBounds()}stop(){super.stop(),this.target.stage.removeBeforeRender(this._beforeStageRender),this.target.stage.removeAfterRender(this._afterStageRender)}onUpdate(t,e,n){super.onUpdate(t,e,n),this.willCallBeforeStageRender=!0,this.willCallAfterStageRender=!0}renderToStage(t,e){const n=t.window.getContext().canvas.nativeCanvas,r=n.getContext("2d");return!!r&&(r.clearRect(0,0,n.width,n.height),r.drawImage(e,0,0),n)}}class yHt{constructor(t){this.tasks=[],this.started=!1,this.completed=0,this.totalDuration=0,this.onStartCallbacks=[],this.onEndCallbacks=[],this.onUpdateCallbacks=[],this.component=t}animate(t,e){return this.started?(console.warn("Cannot add animations after animation has started"),this):(this.tasks.push({graphic:t,config:e}),this)}onStart(t){return this.onStartCallbacks.push(t),this}onEnd(t){return this.onEndCallbacks.push(t),this}onUpdate(t){return this.onUpdateCallbacks.push(t),this}start(){return this.started?(console.warn("Animation has already started"),this):(this.started=!0,this.completed=0,this.onStartCallbacks.forEach(t=>t()),this.tasks.length===0?(setTimeout(()=>{this.onEndCallbacks.forEach(t=>t())},0),this):(this.tasks.forEach(t=>{const e=new se(t.graphic);e.onEnd(()=>{this.completed++,this.completed===this.tasks.length&&this.onEndCallbacks.forEach(r=>r())});const n=e.executeItem(t.config,t.graphic);t.animate=n,n.forEach(r=>{this.totalDuration=Math.max(this.totalDuration,r.getStartTime()+r.getDuration())})}),this))}deleteSelfAttr(t){this.tasks.forEach(e=>{e.animate&&e.animate.forEach(n=>n.preventAttr(t))})}stop(t){return this.tasks.forEach(e=>{e.animate&&e.animate.forEach(n=>n.stop(t))}),this.started&&this.completed!==this.tasks.length&&(this.onEndCallbacks.forEach(e=>e()),this.completed=this.tasks.length),this}getDuration(){return this.totalDuration}}function WM(i){return new yHt(i)}class bHt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s),this.formatTemplate=null,this.decimalLength=s?.decimalLength,s?.formatTemplate&&s.formatTemplate.includes("{{var}}")&&(this.formatTemplate=s.formatTemplate)}onFirstRun(){var t,e,n;const r=this.getLastProps(),s=this.getEndProps(),a=(t=r.text)!==null&&t!==void 0?t:0,o=(e=s.text)!==null&&e!==void 0?e:0;this.valid=!0;let l=0,u=0,c="",h="",d=0;if(typeof a=="number"){l=a;const f=a.toString().split(".")[1]||"";d=Math.max(d,f.length)}else{if(typeof a!="string")return void(this.valid=!1);if(a.endsWith("%")){c="%";const f=a.substring(0,a.length-1).replace(/,/g,"");if(l=parseFloat(f)/100,isNaN(l))return void(this.valid=!1);const p=f.split(".")[1]||"";d=Math.max(d,p.length+2)}else{const f=a.replace(/,/g,"");if(l=parseFloat(f),isNaN(l))return void(this.valid=!1);a.includes(",")&&(c=",");const p=f.split(".")[1]||"";d=Math.max(d,p.length)}}if(typeof o=="number"){u=o;const f=o.toString().split(".")[1]||"";d=Math.max(d,f.length)}else{if(typeof o!="string")return void(this.valid=!1);if(o.endsWith("%")){h="%";const f=o.substring(0,o.length-1).replace(/,/g,"");if(u=parseFloat(f)/100,isNaN(u))return void(this.valid=!1);const p=f.split(".")[1]||"";d=Math.max(d,p.length+2)}else{const f=o.replace(/,/g,"");if(u=parseFloat(f),isNaN(u))return void(this.valid=!1);o.includes(",")&&(h=",");const p=f.split(".")[1]||"";d=Math.max(d,p.length)}}if(!((n=this.params)===null||n===void 0)&&n.format){switch(this.params.format){case"percent":this.format="%";break;case"thousandth":this.format=",";break;case"none":this.format="";break;default:this.format=h||c}this.format==="%"&&h!=="%"&&c!=="%"&&this.decimalLength===void 0&&(this.decimalLength=2),this.format==="%"||h!=="%"&&c!=="%"||(l*=100,u*=100)}else this.format=h||c;this.fromNumber=l,this.toNumber=u,this.decimalLength===void 0&&(this.decimalLength=d)}onEnd(t){super.onEnd(t),t||this.props&&this.target.setAttributes(this.props)}onUpdate(t,e,n){if(!this.valid)return;const r=this.fromNumber+(this.toNumber-this.fromNumber)*e;let s="";const a=this.format,o=(a==="%"?100*r:r).toFixed(this.decimalLength);let l,u=o;if(parseFloat(o)===Math.floor(parseFloat(o))&&(u=Math.floor(parseFloat(o))),a==="%")l=`${u}%`;else if(a===","){const c=u.toString().split(".");c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),l=c.join(".")}else l=u;s=this.formatTemplate?this.formatTemplate.replace("{{var}}",l.toString()):l,this.target.setAttribute("text",s)}}const Lp={duration:1e3,easing:"quadInOut"},xHt=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","scrollX","scrollY"],SHt=i=>xHt.includes(i),bit=(i,t,e)=>{i.forEach(n=>{if(Number.isFinite(n.to))t[n.key]=n.from+(n.to-n.from)*e;else if(n.key==="fill"||n.key==="stroke"){const r=Ug(n.from,n.to,e,!1);r&&(t[n.key]=r)}})},xit=(i,t,e)=>{const n=[],r=[];t.clear();for(let s=0;s<i.length;s++){const a=i[s],o=a.from,l=a.to,u=a.rotation*e,c=a.fromCp,h=a.toCp,d=Math.sin(u),f=Math.cos(u);r[0]=c[0]+(h[0]-c[0])*e,r[1]=c[1]+(h[1]-c[1])*e;for(let m=0;m<o.length;m+=2){const _=o[m],v=o[m+1],y=_*(1-e)+l[m]*e,b=v*(1-e)+l[m+1]*e;n[m]=y*f-b*d+r[0],n[m+1]=y*d+b*f+r[1]}let p=n[0],g=n[1];t.moveTo(p,g);for(let m=2;m<o.length;m+=6){const _=n[m],v=n[m+1],y=n[m+2],b=n[m+3],x=n[m+4],S=n[m+5];p===_&&g===v&&y===x&&b===S?t.lineTo(x,S):t.bezierCurveTo(_,v,y,b,x,S),p=x,g=S}}},Sit=(i,t,e)=>{const n=i?lI(i):[],r=lI(t);e&&n&&(e.fromTransform&&D5(n,e.fromTransform.clone().getInverse()),D5(n,e.toTransfrom));const[s,a]=FFt(n,r);return i?BFt(s,a,10,Math.PI):a.map((o,l)=>({from:s[l],to:o,fromCp:[0,0],toCp:[0,0],rotation:0}))},wHt=["fill","fillOpacity","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","lineDashOffset"],wit=(i,t)=>{if(!i||!t)return null;const e=[];let n=!1;return Object.keys(i).forEach(r=>{if(!wHt.includes(r))return;const s=t[r];if(!N(s)&&!N(i[r])&&s!==i[r]){if(r==="fill"||r==="stroke"){const a=o=>typeof o=="string"?Vi.Get(o,ts.Color255):o;e.push({from:J(i[r])?i[r].map(a):a(i[r]),to:J(s)?s.map(a):a(s),key:r})}else e.push({from:i[r],to:s,key:r});n=!0}}),n?e:null};class Ait extends bi{constructor(t,e,n){super({},{},e,n),this.morphingData=t.morphingData,this.otherAttrs=t.otherAttrs,this.saveOnEnd=t.saveOnEnd}getEndProps(){return{}}onBind(){this.target.createPathProxy(),this.onUpdate(!1,0,this.target.attribute)}onEnd(){}onUpdate(t,e,n){const r=this.target,s=typeof r.pathProxy=="function"?r.pathProxy(r.attribute):r.pathProxy;xit(this.morphingData,s,e),this.otherAttrs&&this.otherAttrs.length&&bit(this.otherAttrs,n,e),this.target.setAttributes(n),t&&!this.saveOnEnd&&(this.target.pathProxy=null)}}const kit=(i,t,e,n)=>{var r,s,a;if(i&&(!i.valid||!i.toCustomPath))return __DEV__&&console.error(i," is not validate"),null;if(!t.valid||!t.toCustomPath)return __DEV__&&console.error(t," is not validate"),null;let o=i?.globalTransMatrix;n&&o&&(o=n.clone().multiply(o.a,o.b,o.c,o.d,o.e,o.f));const l=Sit((r=i?.toCustomPath)===null||r===void 0?void 0:r.call(i),t.toCustomPath(),{fromTransform:o,toTransfrom:t.globalTransMatrix}),u=wit(i?.attribute,t.attribute),c=t.animate(e);e?.delay&&c.wait(e.delay);const h=new Ait({morphingData:l,otherAttrs:u},(s=e?.duration)!==null&&s!==void 0?s:Lp.duration,(a=e?.easing)!==null&&a!==void 0?a:Lp.easing);return c.play(h),c},AHt=(i,t,e)=>{var n;const r=t.filter(u=>u&&u.toCustomPath&&u.valid);r.length||__DEV__&&console.error(r," is not validate"),i.valid&&i.toCustomPath||__DEV__&&console.error(i," is not validate");const s=(e?.splitPath==="clone"?Mit:(n=e?.splitPath)!==null&&n!==void 0?n:Tit)(i,r.length,!1),a=e?.onEnd;let o=r.length;const l=()=>{o--,o===0&&a&&a()};r.forEach((u,c)=>{var h;const d=s[c],f=((h=e?.delay)!==null&&h!==void 0?h:0)+(e?.individualDelay?e.individualDelay(c,r.length,d,u):0);kit(d,u,Object.assign({},e,{onEnd:l,delay:f}),i.globalTransMatrix)})};class kHt extends bi{constructor(t,e,n){super({},{},e,n),this.morphingData=t.morphingData,this.otherAttrs=t.otherAttrs}getEndProps(){return{}}onBind(){this.addPathProxy()}addPathProxy(){this.target.shadowRoot.forEachChildren(t=>{t.createPathProxy()}),this.onUpdate(!1,0,this.target.attribute)}clearPathProxy(){this.target.shadowRoot.forEachChildren(t=>{t.pathProxy=null})}onEnd(){}onUpdate(t,e,n){this.target.shadowRoot.forEachChildren((r,s)=>{var a;xit(this.morphingData[s],typeof r.pathProxy=="function"?r.pathProxy(r.attribute):r.pathProxy,e),!((a=this.otherAttrs)===null||a===void 0)&&a[s]&&this.otherAttrs[s].length&&bit(this.otherAttrs[s],r.attribute,e)}),t&&(this.clearPathProxy(),this.morphingData=null)}}const KF=i=>{const t={};return Object.keys(i).forEach(e=>{SHt(e)||(t[e]=i[e])}),t},Cit=(i,t,e)=>{const n=KF(i.attribute),r=i.attachShadow();if(t.length)r.setTheme({[t[0].type]:n}),t.forEach(s=>{s.setAttributes({pickable:!1}),r.appendChild(s)});else{const s=i.AABBBounds,a=s.width(),o=s.height();r.setTheme({rect:n}),new Array(e).fill(0).forEach(l=>{const u=vt.graphicService.creator.rect({x:0,y:0,width:a,height:o,pickable:!1});r.appendChild(u),t.push(u)})}},Mit=(i,t,e)=>{const n=[],r=e?null:KF(i.attribute),s=i.toCustomPath();for(let a=0;a<t;a++){const o={path:new Ki().fromCustomPath2D(s)};n.push(vt.graphicService.creator.path(e?o:Object.assign({},r,o)))}return e&&Cit(i,n,t),n},Tit=(i,t,e)=>{const n=[],r=e?null:KF(i.attribute);if(i.type==="rect")NFt(i,t).forEach(s=>{n.push(vt.graphicService.creator.rect(e?s:Object.assign({},r,s)))});else if(i.type==="arc")jFt(i,t).forEach(s=>{n.push(vt.graphicService.creator.arc(e?s:Object.assign({},r,s)))});else if(i.type==="circle")HFt(i,t).forEach(s=>{n.push(vt.graphicService.creator.arc(e?s:Object.assign({},r,s)))});else if(i.type==="line"){const s=WFt(i,t),a={size:10,symbolType:"circle"};s.forEach(o=>{n.push(vt.graphicService.creator.symbol(e?Object.assign({},o,a):Object.assign({},r,o,a)))})}else i.type==="polygon"?GFt(i,t).forEach(s=>{n.push(vt.graphicService.creator.polygon(e?s:Object.assign({},r,s)))}):i.type==="area"?VFt(i,t).forEach(s=>{n.push(vt.graphicService.creator.polygon(e?s:Object.assign({},r,s)))}):i.type==="path"&&YFt(i,t).forEach(s=>{"path"in s?n.push(vt.graphicService.creator.path(e?s:Object.assign({},r,s))):n.push(vt.graphicService.creator.polygon(e?s:Object.assign({},r,s)))});return e&&Cit(i,n,t),n},CHt=(i,t,e)=>{var n,r,s;const a=i.filter(h=>h.toCustomPath&&h.valid);a.length||__DEV__&&console.error(i," is not validate"),t.valid&&t.toCustomPath||__DEV__&&console.error(t," is not validate");const o=(e?.splitPath==="clone"?Mit:(n=e?.splitPath)!==null&&n!==void 0?n:Tit)(t,a.length,!0),l=t.attribute;t.setAttribute("visible",!1);const u=a.map((h,d)=>Sit(h.toCustomPath(),o[d].toCustomPath(),{fromTransform:h.globalTransMatrix,toTransfrom:o[d].globalTransMatrix})),c=a.map((h,d)=>wit(h.attribute,l));if(e?.individualDelay){const h=e.onEnd;let d=a.length;const f=()=>{d--,d===0&&(t.setAttributes({visible:!0,ratio:null},!1,{type:Xn.ANIMATE_END}),t.detachShadow(),h&&h())};o.forEach((p,g)=>{var m,_,v;const y=((m=e.delay)!==null&&m!==void 0?m:0)+e.individualDelay(g,a.length,i[g],p),b=p.animate(Object.assign({},e,{onEnd:f}));b.wait(y),b.play(new Ait({morphingData:u[g],saveOnEnd:!0,otherAttrs:c[g]},(_=e.duration)!==null&&_!==void 0?_:Lp.duration,(v=e.easing)!==null&&v!==void 0?v:Lp.easing))})}else{const h=e?.onEnd,d=e?Object.assign({},e):{};d.onEnd=()=>{t.setAttribute("visible",!0,!1,{type:Xn.ANIMATE_END}),t.detachShadow(),h&&h()};const f=t.animate(d);e?.delay&&f.wait(e.delay),f.play(new kHt({morphingData:u,otherAttrs:c},(r=e?.duration)!==null&&r!==void 0?r:Lp.duration,(s=e?.easing)!==null&&s!==void 0?s:Lp.easing))}};class Pit extends bi{constructor(t,e,n,r,s){super(null,{},n,r,s),this.clipFromAttribute=t,this.clipToAttribute=e,this._group=s?.group,this._clipGraphic=s?.clipGraphic}onBind(){super.onBind(),this._group&&this._clipGraphic&&(this._lastClip=this._group.attribute.clip,this._lastPath=this._group.attribute.path,this._group.setAttributes({clip:!0,path:[this._clipGraphic]},!1,{type:Xn.ANIMATE_BIND}))}onEnd(){this._group&&this._group.setAttributes({clip:this._lastClip,path:this._lastPath},!1,{type:Xn.ANIMATE_END})}onUpdate(t,e,n){if(!this._clipGraphic)return;const r={};Object.keys(this.clipFromAttribute).forEach(s=>{r[s]=this.clipFromAttribute[s]+(this.clipToAttribute[s]-this.clipFromAttribute[s])*e}),this._clipGraphic.setAttributes(r,!1,{type:Xn.ANIMATE_UPDATE,animationState:{ratio:e,end:t}})}}class MHt extends Pit{constructor(t,e,n,r,s){var a,o,l,u,c,h,d,f,p,g,m,_;const v=(o=(a=s?.group)===null||a===void 0?void 0:a.attribute)!==null&&o!==void 0?o:{},y=(l=v.width)!==null&&l!==void 0?l:0,b=(u=v.height)!==null&&u!==void 0?u:0,x=(c=s?.animationType)!==null&&c!==void 0?c:"in",S=(h=s?.startAngle)!==null&&h!==void 0?h:0,w=(d=s?.orient)!==null&&d!==void 0?d:"clockwise";let A=0,k=0;w==="anticlockwise"?(k=x==="in"?S+2*Math.PI:S,k=S+2*Math.PI):(A=S,k=x==="out"?S+2*Math.PI:S);const C=vt.graphicService.creator.arc({x:(p=(f=s?.center)===null||f===void 0?void 0:f.x)!==null&&p!==void 0?p:y/2,y:(m=(g=s?.center)===null||g===void 0?void 0:g.y)!==null&&m!==void 0?m:b/2,outerRadius:(_=s?.radius)!==null&&_!==void 0?_:(y+b)/2,innerRadius:0,startAngle:A,endAngle:k,fill:!0});let M,R;w==="anticlockwise"?(M={startAngle:S+2*Math.PI},R={startAngle:S}):(M={endAngle:S},R={endAngle:S+2*Math.PI}),super(x==="in"?M:R,x==="in"?R:M,n,r,{group:s?.group,clipGraphic:C})}}class g4 extends Pit{constructor(t,e,n,r,s){var a,o,l,u,c,h,d,f,p;const g=(o=(a=s?.group)===null||a===void 0?void 0:a.attribute)!==null&&o!==void 0?o:{},m=(u=(l=s?.width)!==null&&l!==void 0?l:g.width)!==null&&u!==void 0?u:0,_=(h=(c=s?.height)!==null&&c!==void 0?c:g.height)!==null&&h!==void 0?h:0,v=(d=s?.animationType)!==null&&d!==void 0?d:"in",y=(f=s?.direction)!==null&&f!==void 0?f:"x",b=(p=s?.orient)!==null&&p!==void 0?p:"positive",x=vt.graphicService.creator.rect({x:0,y:0,width:v==="in"&&y==="x"?0:m,height:v==="in"&&y==="y"?0:_,fill:!0});let S={},w={};y==="y"?b==="negative"?(S={y:_,height:0},w={y:0,height:_}):(S={height:0},w={height:_}):b==="negative"?(S={x:m,width:0},w={x:0,width:m}):(S={width:0},w={width:m}),super(v==="in"?S:w,v==="in"?w:S,n,r,{group:s?.group,clipGraphic:x})}}class Eit extends bi{constructor(t,e,n,r,s){var a,o;super(t,e,n,r,s),this.newPointAnimateType=(a=s?.newPointAnimateType)!==null&&a!==void 0?a:"grow",this.clipRangeByDimension=(o=s?.clipRangeByDimension)!==null&&o!==void 0?o:"x"}getPoints(t,e=!1){if(t.points)return t.points;if(t.segments){const n=[];return this.segmentsCache||(this.segmentsCache=[]),t.segments.map(r=>{var s,a;r.points&&n.push(...r.points),e&&this.segmentsCache.push((a=(s=r.points)===null||s===void 0?void 0:s.length)!==null&&a!==void 0?a:0)}),n}return[]}onBind(){super.onBind();const{points:t,segments:e}=this.target.attribute,{points:n,segments:r}=this.target.getFinalAttribute();this.from={points:t,segments:e},this.to={points:n,segments:r},this.props=this.to;const s=this.getPoints(this.from),a=this.getPoints(this.to,!0);this.fromPoints=s?Array.isArray(s)?s:[s]:[],this.toPoints=a?Array.isArray(a)?a:[a]:[];const o=new Map;this.fromPoints.forEach(f=>{f.context&&o.set(f.context,f)});let l,u,c=1/0,h=-1/0;for(let f=0;f<this.toPoints.length;f+=1)if(o.has(this.toPoints[f].context)){c=f,l=o.get(this.toPoints[f].context);break}for(let f=this.toPoints.length-1;f>=0;f-=1)if(o.has(this.toPoints[f].context)){h=f,u=o.get(this.toPoints[f].context);break}this.newPointAnimateType==="clip"&&this.toPoints.length!==0&&(Number.isFinite(h)?(this.clipRange=this.toPoints[h][this.clipRangeByDimension]/this.toPoints[this.toPoints.length-1][this.clipRangeByDimension],this.clipRange===1&&(this.shrinkClipRange=this.toPoints[h][this.clipRangeByDimension]/this.fromPoints[this.fromPoints.length-1][this.clipRangeByDimension]),et(this.clipRange)?this.clipRange=Ke(this.clipRange,0,1):this.clipRange=0):this.clipRange=0);let d=this.toPoints[0];this.interpolatePoints=this.toPoints.map((f,p)=>{const g=o.get(f.context);return g?(d=g,[g,f]):this.newPointAnimateType==="appear"||this.newPointAnimateType==="clip"?[f,f]:p<c&&l?[l,f]:p>h&&u?[u,f]:[d,f]}),this.points=this.interpolatePoints.map(f=>{const p=f[0],g=f[1],m=new ci(p.x,p.y,p.x1,p.y1);return m.defined=g.defined,m.context=g.context,m})}onFirstRun(){const t=this.target.attribute.clipRange;et(t*this.clipRange)&&(this.clipRange*=t)}onUpdate(t,e,n){if(t)return Object.keys(this.to).forEach(r=>{this.target.attribute[r]=this.to[r]}),this.target.addUpdatePositionTag(),void this.target.addUpdateShapeAndBoundsTag();if(this.points=this.points.map((r,s)=>{const a=Vw(this.interpolatePoints[s][0],this.interpolatePoints[s][1],e);return a.context=r.context,a}),this.clipRange){if(this.shrinkClipRange)return void(t?(n.points=this.toPoints,n.clipRange=1):(n.points=this.fromPoints,n.clipRange=this.clipRange-(this.clipRange-this.shrinkClipRange)*e));this.target.setAttributes({clipRange:this.clipRange+(1-this.clipRange)*e})}if(this.segmentsCache&&this.to.segments){let r=0;const s=this.to.segments.map((a,o)=>{const l=r+this.segmentsCache[o],u=this.points.slice(r,l);return r=l,Object.assign(Object.assign({},a),{points:u})});this.target.attribute.segments=s}else this.target.attribute.points=this.points;this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class Rit extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){var t,e,n;super.onBind();const r=this.target.getFinalAttribute(),s=(t=this.target.attribute)!==null&&t!==void 0?t:{},a={},o=(e=this.from)!==null&&e!==void 0?e:{};this.keys.forEach(u=>{var c,h,d;a[u]=(c=r?.[u])!==null&&c!==void 0?c:1,o[u]=(d=(h=o[u])!==null&&h!==void 0?h:s[u])!==null&&d!==void 0?d:0});const l=this.target.getFinalAttribute();l&&this.target.setAttributes(l),this.props=a,this.propKeys=this.keys,this.from=o,this.to=a,((n=this.params.controlOptions)===null||n===void 0?void 0:n.immediatelyApply)!==!1&&this.target.setAttributes(o)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class Oit extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){super.onBind();const t=this.target.attribute,e={},n={};this.keys.forEach(r=>{var s;e[r]=0,n[r]=(s=t[r])!==null&&s!==void 0?s:1}),this.props=e,this.propKeys=this.keys,this.from=n,this.to=e,Object.assign(this.target.attribute,n),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}onEnd(t){super.onEnd(t)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class THt extends bi{onBind(){super.onBind(),this.propKeys=["x","y","z","alpha","zIndex"]}onFirstRun(){super.onFirstRun();const t=this.target.getFinalAttribute();t&&this.target.setAttributes(t)}onStart(){super.onStart();const{center:t,r:e}=typeof this.params=="function"?this.params():this.params,n=this.target.finalAttribute.x,r=this.target.finalAttribute.y,s=this.target.finalAttribute.z,a=Math.acos((r-t.y)/e);let o=Math.acos((n-t.x)/e/Math.sin(a));s-t.z<0&&(o=qt-o),this.theta=o,this.phi=a}onEnd(){}onUpdate(t,e,n){if(this.phi==null||this.theta==null)return;const r=this.target,{center:s,r:a,cb:o}=typeof this.params=="function"?this.params():this.params,l=2*Math.PI*e,u=this.theta+l,c=this.phi,h=a*Math.sin(c)*Math.cos(u)+s.x,d=a*Math.cos(c)+s.y,f=a*Math.sin(c)*Math.sin(u)+s.z;for(r.attribute.x=h,r.attribute.y=d,r.attribute.z=f,r.attribute.alpha=u+Xe/2;r.attribute.alpha>qt;)r.attribute.alpha-=qt;r.attribute.alpha=qt-r.attribute.alpha,r.attribute.zIndex=-1e4*r.attribute.z,o&&o(n)}}class PHt extends Rit{constructor(t,e,n,r,s){super(t,e,n,r,s),this.keys=["clipRange"],this.from={clipRange:0}}onFirstRun(){var t;super.onFirstRun();const{clipDimension:e}=((t=this.params)===null||t===void 0?void 0:t.options)||{};e&&(this.target.attribute.clipRangeByDimension=e)}}class EHt extends Oit{constructor(t,e,n,r,s){super(t,e,n,r,s),this.keys=["clipRange"]}}class RHt extends Rit{constructor(t,e,n,r,s){super(t,e,n,r,s),this.keys=["opacity","fillOpacity","strokeOpacity"],this.from={opacity:0,fillOpacity:0,strokeOpacity:0}}}class OHt extends Oit{constructor(t,e,n,r,s){super(t,e,n,r,s),this.keys=["opacity","fillOpacity","strokeOpacity"]}}const DHt=(i,t,e)=>{const n=i.getFinalAttribute();return t&&t.orient==="anticlockwise"?{from:{startAngle:n?.endAngle},to:{startAngle:n?.startAngle}}:{from:{endAngle:n?.startAngle},to:{endAngle:n?.endAngle}}},IHt=(i,t,e)=>{const n=i.getFinalAttribute();if(t&&t.orient==="anticlockwise"){const s=yt(t.overall)?t.overall:2*Math.PI;return{from:{startAngle:s,endAngle:s},to:{startAngle:n?.startAngle,endAngle:n?.endAngle}}}const r=yt(t?.overall)?t.overall:0;return{from:{startAngle:r,endAngle:r},to:{startAngle:n?.startAngle,endAngle:n?.endAngle}}},LHt=(i,t,e)=>{var n;return((n=t?.overall)!==null&&n!==void 0&&n)!==!1?IHt(i,t):DHt(i,t)},BHt=(i,t,e)=>{const n=i.attribute;return t&&t.orient==="anticlockwise"?{from:{startAngle:n.startAngle},to:{startAngle:n?.endAngle}}:{from:{endAngle:n.endAngle},to:{endAngle:n?.startAngle}}},FHt=(i,t,e)=>{const n=i.attribute;if(t&&t.orient==="anticlockwise"){const s=yt(t.overall)?t.overall:2*Math.PI;return{from:{startAngle:n.startAngle,endAngle:n.endAngle},to:{startAngle:s,endAngle:s}}}const r=yt(t?.overall)?t.overall:0;return{from:{startAngle:n.startAngle,endAngle:n.endAngle},to:{startAngle:r,endAngle:r}}};class Dit extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}determineUpdateFunction(){this.propKeys?this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:this.propKeys[0]==="startAngle"?this._updateFunction=this.updateStartAngle:this.propKeys[0]==="endAngle"?this._updateFunction=this.updateEndAngle:this.valid=!1:this.valid=!1}deleteSelfAttr(t){delete this.props[t],this.fromProps&&delete this.fromProps[t];const e=this.propKeys.indexOf(t);e!==-1&&this.propKeys.splice(e,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:this.propKeys[0]==="startAngle"?this._updateFunction=this.updateStartAngle:this.propKeys[0]==="endAngle"?this._updateFunction=this.updateEndAngle:this._updateFunction=null}updateStartAngle(t){this.target.attribute.startAngle=this.from.startAngle+(this.to.startAngle-this.from.startAngle)*t}updateEndAngle(t){this.target.attribute.endAngle=this.from.endAngle+(this.to.endAngle-this.from.endAngle)*t}updateAngle(t){this.updateStartAngle(t),this.updateEndAngle(t)}onUpdate(t,e,n){this._updateFunction&&(this._updateFunction(e),this.target.addUpdateShapeAndBoundsTag())}}class zHt extends Dit{onBind(){var t,e,n;super.onBind();const{from:r,to:s}=LHt(this.target,this.params.options,this.params),a=(e=(t=this.target.context)===null||t===void 0?void 0:t.lastAttrs)!==null&&e!==void 0?e:r;this.props=s,this.propKeys=Object.keys(s).filter(l=>s[l]!=null),this.from=a,this.to=s;const o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),((n=this.params.controlOptions)===null||n===void 0?void 0:n.immediatelyApply)!==!1&&this.target.setAttributes(a),this.determineUpdateFunction()}}class NHt extends Dit{onBind(){super.onBind();const{from:t,to:e}=(n=this.target,r=this.params.options,this.params,((s=r?.overall)!==null&&s!==void 0&&s)!==!1?FHt(n,r):BHt(n,r));var n,r,s;const a=t;this.props=e,this.propKeys=Object.keys(e).filter(o=>e[o]!=null),this.from=a??this.target.attribute,this.to=e,this.determineUpdateFunction()}}const jHt=(i,t,e)=>{const n=i.getFinalAttribute();switch(t?.direction){case"x":{const r=n.x,s=n.x1,a=n.width;return{from:L(a)?{x:r+a/2,x1:void 0,width:0}:{x:(r+s)/2,x1:(r+s)/2,width:void 0},to:{x:r,x1:s,width:a}}}case"y":{const r=n.y,s=n.y1,a=n.height;return{from:L(a)?{y:r+a/2,y1:void 0,height:0}:{y:(r+s)/2,y1:(r+s)/2,height:void 0},to:{y:r,y1:s,height:a}}}default:{const r=n.x,s=n.x1,a=n.width,o=n.y,l=n.y1,u=n.height,c={};return L(a)?(c.x=r+a/2,c.width=0,c.x1=void 0):(c.x=(r+s)/2,c.x1=(r+s)/2,c.width=void 0),L(u)?(c.y=o+u/2,c.height=0,c.y1=void 0):(c.y=(o+l)/2,c.y1=(o+l)/2,c.height=void 0),{from:c,to:{x:r,y:o,x1:s,y1:l,width:a,height:u}}}}},HHt=(i,t,e)=>{const n=i.attribute;switch(t?.direction){case"x":{const r=n.x,s=n.x1,a=n.width;return{to:L(a)?{x:r+a/2,x1:void 0,width:0}:{x:(r+s)/2,x1:(r+s)/2,width:void 0}}}case"y":{const r=n.y,s=n.y1,a=n.height;return{to:L(a)?{y:r+a/2,y1:void 0,height:0}:{y:(r+s)/2,y1:(r+s)/2,height:void 0}}}default:{const r=n.x,s=n.y,a=n.x1,o=n.y1,l=n.width,u=n.height,c={};return L(l)?(c.x=r+l/2,c.width=0,c.x1=void 0):(c.x=(r+a)/2,c.x1=(r+a)/2,c.width=void 0),L(u)?(c.y=s+u/2,c.height=0,c.y1=void 0):(c.y=(s+o)/2,c.y1=(s+o)/2,c.height=void 0),{to:c}}}};class VHt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){var t,e,n;super.onBind();const{from:r,to:s}=jHt(this.target,this.params.options,this.params),a=(e=(t=this.target.context)===null||t===void 0?void 0:t.lastAttrs)!==null&&e!==void 0?e:r;this.props=s,this.propKeys=Object.keys(s).filter(l=>s[l]!=null),this.from=a,this.to=s;const o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),((n=this.params.controlOptions)===null||n===void 0?void 0:n.immediatelyApply)!==!1&&this.target.setAttributes(a)}onEnd(t){super.onEnd(t)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class WHt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){super.onBind();const{from:t,to:e}=HHt(this.target,this.params.options,this.params);this.props=e,this.propKeys=Object.keys(e).filter(n=>e[n]!=null),this.from=t??this.target.attribute,this.to=e}onEnd(t){super.onEnd(t)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}function $Ht(i,t,e){const n=i.getFinalAttribute(),r=n.y,s=n.y1,a=n.height;if(t&&t.orient==="negative"){const l=L(a)?Math.max(r,r+a):Math.max(r,s);return{from:{y:l,y1:N(s)?void 0:l,height:N(a)?void 0:0},to:{y:r,y1:s,height:a}}}const o=L(a)?Math.min(r,r+a):Math.min(r,s);return{from:{y:o,y1:N(s)?void 0:o,height:N(a)?void 0:0},to:{y:r,y1:s,height:a}}}function UHt(i,t,e){var n,r,s;const a=i.getFinalAttribute(),o=a.y,l=a.y1,u=a.height;let c;return t&&t.orient==="negative"?yt(t.overall)?c=t.overall:e.group?(c=(s=(n=e.groupHeight)!==null&&n!==void 0?n:(r=t.layoutRect)===null||r===void 0?void 0:r.height)!==null&&s!==void 0?s:e.group.getBounds().height(),e.groupHeight=c):c=e.height:c=yt(t?.overall)?t.overall:0,{from:{y:c,y1:N(l)?void 0:c,height:N(u)?void 0:0},to:{y:o,y1:l,height:u}}}const GHt=(i,t,e)=>{var n;return((n=t?.overall)!==null&&n!==void 0&&n)!==!1?UHt(i,t,e):$Ht(i,t)};class YHt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){var t,e,n;super.onBind();const{from:r,to:s}=GHt(this.target,this.params.options,this.params),a=(e=(t=this.target.context)===null||t===void 0?void 0:t.lastAttrs)!==null&&e!==void 0?e:r;this.props=s,this.propKeys=Object.keys(s).filter(l=>s[l]!=null),this.from=a,this.to=s;const o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),((n=this.params.controlOptions)===null||n===void 0?void 0:n.immediatelyApply)!==!1&&this.target.setAttributes(a)}onEnd(t){super.onEnd(t)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}function XHt(i,t,e){const n=i.getFinalAttribute(),r=n.y,s=n.y1,a=n.height;if(t&&t.orient==="negative"){const l=L(a)?Math.max(r,r+a):Math.max(r,s);return{to:{y:l,y1:N(s)?void 0:l,height:N(a)?void 0:0}}}const o=L(a)?Math.min(r,r+a):Math.min(r,s);return{to:{y:o,y1:N(s)?void 0:o,height:N(a)?void 0:0}}}function KHt(i,t,e){var n,r,s;const a=i.getFinalAttribute(),o=a.y1,l=a.height;let u;return t&&t.orient==="negative"?yt(t.overall)?u=t.overall:e.group?(u=(s=(n=e.groupHeight)!==null&&n!==void 0?n:(r=t.layoutRect)===null||r===void 0?void 0:r.height)!==null&&s!==void 0?s:e.group.getBounds().height(),e.groupHeight=u):u=e.height:u=yt(t?.overall)?t.overall:0,{to:{y:u,y1:N(o)?void 0:u,height:N(l)?void 0:0}}}class qHt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){super.onBind();const{from:t,to:e}=(n=this.target,r=this.params.options,s=this.params,((a=r?.overall)!==null&&a!==void 0&&a)!==!1?KHt(n,r,s):XHt(n,r));var n,r,s,a;this.props=e,this.propKeys=Object.keys(e).filter(o=>e[o]!=null),this.from=t??this.target.attribute,this.to=e}onEnd(t){super.onEnd(t)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}const Iit=(i,t,e)=>{const n=i.getFinalAttribute().points,r={x:0,y:0};return n.forEach(s=>{r.x+=s.x,r.y+=s.y}),r.x/=n.length,r.y/=n.length,t&&t.center&&(et(t.center.x)&&(r.x=t.center.x),et(t.center.y)&&(r.y=t.center.y)),i.type==="area"&&(r.x1=r.x,r.y1=r.y),n.map(s=>Object.assign({},s,r))},ZHt=(i,t,e)=>{const n=i.getFinalAttribute();return{from:{points:Iit(i,t)},to:{points:n.points}}};class jm extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onUpdate(t,e,n){var r,s;const a=(r=this.from)===null||r===void 0?void 0:r.points,o=(s=this.to)===null||s===void 0?void 0:s.points;a&&o&&(this.target.attribute.points=a.map((l,u)=>Vw(a[u],o[u],e)),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag())}}class QHt extends jm{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){const{from:e,to:n}=ZHt(this.target,this.params.options,this.params);this.props=n,this.propKeys=Object.keys(n).filter(s=>n[s]!=null),this.from=e,this.to=n;const r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),((t=this.params.controlOptions)===null||t===void 0?void 0:t.immediatelyApply)!==!1&&this.target.setAttributes(e)}else this.valid=!1}}class Lit extends jm{onBind(){if(super.onBind(),["area","line"].includes(this.target.type)){const n=this.target.getFinalAttribute(),{from:r,to:s}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:Iit(t,e)}});this.props=s,this.propKeys=Object.keys(s).filter(a=>s[a]!=null),this.from=r||n,this.to=s}else this.valid=!1;var t,e}}const Bit=(i,t,e)=>i.getFinalAttribute().points.map(n=>{if(t&&t.orient==="negative"){let r=i.stage.viewWidth;return i.parent.parent.parent&&(r=i.parent.parent.parent.AABBBounds.width()),Object.assign(Object.assign({},n),{x:r,y:n.y,x1:r,y1:n.y1,defined:n.defined!==!1})}return Object.assign(Object.assign({},n),{x:0,y:n.y,x1:0,y1:n.y1,defined:n.defined!==!1})}),JHt=(i,t,e)=>{const n=i.getFinalAttribute();return{from:{points:Bit(i,t)},to:{points:n.points}}};class tVt extends jm{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){const{from:e,to:n}=JHt(this.target,this.params.options,this.params);this.props=n,this.propKeys=Object.keys(n).filter(s=>n[s]!=null),this.from=e,this.to=n;const r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),((t=this.params.controlOptions)===null||t===void 0?void 0:t.immediatelyApply)!==!1&&this.target.setAttributes(e)}else this.valid=!1}}class eVt extends jm{onBind(){if(super.onBind(),["area","line"].includes(this.target.type)){const n=this.target.getFinalAttribute(),{from:r,to:s}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:Bit(t,e)}});this.props=s,this.propKeys=Object.keys(s).filter(a=>s[a]!=null),this.from=r||n,this.to=s}else this.valid=!1;var t,e}}const Fit=(i,t,e)=>i.getFinalAttribute().points.map(n=>{if(t&&t.orient==="negative"){let r=i.stage.viewHeight;return i.parent.parent.parent&&(r=i.parent.parent.parent.AABBBounds.height()),Object.assign(Object.assign({},n),{x:n.x,y:r,x1:n.x1,y1:r,defined:n.defined!==!1})}return Object.assign(Object.assign({},n),{x:n.x,y:0,x1:n.x1,y1:0,defined:n.defined!==!1})}),iVt=(i,t,e)=>{const n=i.getFinalAttribute();return{from:{points:Fit(i,t)},to:{points:n.points}}};class nVt extends jm{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){const{from:e,to:n}=iVt(this.target,this.params.options,this.params);this.props=n,this.propKeys=Object.keys(n).filter(s=>n[s]!=null),this.from=e,this.to=n;const r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),((t=this.params.controlOptions)===null||t===void 0?void 0:t.immediatelyApply)!==!1&&this.target.setAttributes(e)}else this.valid=!1}}class rVt extends jm{onBind(){if(super.onBind(),["area","line","polygon"].includes(this.target.type)){const{from:n,to:r}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:Fit(t,e)}});this.props=r,this.propKeys=Object.keys(r).filter(s=>r[s]!=null),this.from=n??this.target.attribute,this.to=r}else this.valid=!1;var t,e}}const sVt=(i,t,e)=>{const n=i.getFinalAttribute();return t&&t.orient==="inside"?{from:{innerRadius:n?.outerRadius},to:{innerRadius:n?.innerRadius}}:{from:{outerRadius:n?.innerRadius},to:{outerRadius:n?.outerRadius}}},aVt=(i,t,e)=>{const n=i.getFinalAttribute(),r=yt(t?.overall)?t.overall:0;return{from:{innerRadius:r,outerRadius:r},to:{innerRadius:n?.innerRadius,outerRadius:n?.outerRadius}}},oVt=(i,t,e)=>{var n;return((n=t?.overall)!==null&&n!==void 0&&n)!==!1?aVt(i,t):sVt(i,t)},lVt=(i,t,e)=>{const n=i.getFinalAttribute();return t&&t.orient==="inside"?{from:{innerRadius:n?.innerRadius},to:{innerRadius:n?.outerRadius}}:{from:{outerRadius:n?.outerRadius},to:{outerRadius:n?.innerRadius}}},uVt=(i,t,e)=>{const n=i.getFinalAttribute(),r=yt(t?.overall)?t.overall:0;return{from:{innerRadius:n?.innerRadius,outerRadius:n?.outerRadius},to:{innerRadius:r,outerRadius:r}}};class zit extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class cVt extends zit{onBind(){var t,e,n;super.onBind();const{from:r,to:s}=oVt(this.target,this.params.options,this.params),a=(e=(t=this.target.context)===null||t===void 0?void 0:t.lastAttrs)!==null&&e!==void 0?e:r;this.props=s,this.propKeys=Object.keys(s).filter(l=>s[l]!=null),this.from=a,this.to=s;const o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),((n=this.params.controlOptions)===null||n===void 0?void 0:n.immediatelyApply)!==!1&&this.target.setAttributes(a)}}class hVt extends zit{onBind(){super.onBind();const{to:t}=(e=this.target,n=this.params.options,this.params,((r=n?.overall)!==null&&r!==void 0&&r)!==!1?uVt(e,n):lVt(e,n));var e,n,r;this.props=t,this.propKeys=Object.keys(t).filter(s=>t[s]!=null),this.from=this.target.attribute,this.to=t}}function dVt(i,t,e){const n=i.getFinalAttribute(),r=n.x,s=n.x1,a=n.width;if(t&&t.orient==="negative"){const l=L(a)?Math.max(r,r+a):Math.max(r,s);return{from:{x:l,x1:N(s)?void 0:l,width:N(a)?void 0:0},to:{x:r,x1:s,width:a}}}const o=L(a)?Math.min(r,r+a):Math.min(r,s);return{from:{x:o,x1:N(s)?void 0:o,width:N(a)?void 0:0},to:{x:r,x1:s,width:a}}}function fVt(i,t,e){var n;const r=i.getFinalAttribute(),s=r.x,a=r.x1,o=r.width;let l;return t&&t.orient==="negative"?yt(t.overall)?l=t.overall:e.group?(l=(n=e.groupWidth)!==null&&n!==void 0?n:e.group.getBounds().width(),e.groupWidth=l):l=e.width:l=yt(t?.overall)?t?.overall:0,{from:{x:l,x1:N(a)?void 0:l,width:N(o)?void 0:0},to:{x:s,x1:a,width:o}}}const pVt=(i,t,e)=>{var n;return((n=t?.overall)!==null&&n!==void 0&&n)!==!1?fVt(i,t,e):dVt(i,t)};function gVt(i,t,e){const n=i.getFinalAttribute(),r=n.x,s=n.x1,a=n.width;if(t&&t.orient==="negative"){const l=L(a)?Math.max(r,r+a):Math.max(r,s);return{to:{x:l,x1:N(s)?void 0:l,width:N(a)?void 0:0}}}const o=L(a)?Math.min(r,r+a):Math.min(r,s);return{to:{x:o,x1:N(s)?void 0:o,width:N(a)?void 0:0}}}function mVt(i,t,e){var n;const r=i.getFinalAttribute(),s=r.x1,a=r.width;let o;return t&&t.orient==="negative"?yt(t.overall)?o=t.overall:e.group?(o=(n=e.groupWidth)!==null&&n!==void 0?n:e.group.getBounds().width(),e.groupWidth=o):o=e.width:o=yt(t?.overall)?t.overall:0,{to:{x:o,x1:N(s)?void 0:o,width:N(a)?void 0:0}}}class _Vt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){var t,e,n;super.onBind();const{from:r,to:s}=pVt(this.target,this.params.options,this.params),a=(e=(t=this.target.context)===null||t===void 0?void 0:t.lastAttrs)!==null&&e!==void 0?e:r;this.props=s,this.propKeys=Object.keys(s).filter(l=>s[l]!=null),this.from=a,this.to=s;const o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),((n=this.params.controlOptions)===null||n===void 0?void 0:n.immediatelyApply)!==!1&&this.target.setAttributes(a)}onEnd(t){super.onEnd(t)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class vVt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){super.onBind();const{from:t,to:e}=(n=this.target,r=this.params.options,s=this.params,((a=r?.overall)!==null&&a!==void 0&&a)!==!1?mVt(n,r,s):gVt(n,r));var n,r,s,a;this.props=e,this.propKeys=Object.keys(e).filter(o=>e[o]!=null),this.from=t??this.target.attribute,this.to=e}onEnd(t){super.onEnd(t)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class yVt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){var t,e,n,r,s,a,o,l,u,c,h;let d,f;super.onBind();const p=this.target.getFinalAttribute(),g=(t=this.target.attribute)!==null&&t!==void 0?t:{};switch((e=this.params)===null||e===void 0?void 0:e.direction){case"x":d={scaleX:(n=g.scaleX)!==null&&n!==void 0?n:0},f={scaleX:(r=p?.scaleX)!==null&&r!==void 0?r:1},this._updateFunction=this.updateX;break;case"y":d={scaleY:(s=g.scaleY)!==null&&s!==void 0?s:0},f={scaleY:(a=p?.scaleY)!==null&&a!==void 0?a:1},this._updateFunction=this.updateY;break;default:d={scaleX:(o=g.scaleX)!==null&&o!==void 0?o:0,scaleY:(l=g.scaleY)!==null&&l!==void 0?l:0},f={scaleX:(u=p?.scaleX)!==null&&u!==void 0?u:1,scaleY:(c=p?.scaleY)!==null&&c!==void 0?c:1},this._updateFunction=this.updateXY}const m=this.target.getFinalAttribute();m&&this.target.setAttributes(m),this.props=f,this.from=d,this.to=f,((h=this.params.controlOptions)===null||h===void 0?void 0:h.immediatelyApply)!==!1&&this.target.setAttributes(d)}onEnd(t){super.onEnd(t)}updateX(t){this.target.attribute.scaleX=this.from.scaleX+(this.to.scaleX-this.from.scaleX)*t}updateY(t){this.target.attribute.scaleY=this.from.scaleY+(this.to.scaleY-this.from.scaleY)*t}updateXY(t){this.updateX(t),this.updateY(t)}deleteSelfAttr(t){delete this.props[t],this.fromProps&&delete this.fromProps[t];const e=this.propKeys.indexOf(t);e!==-1&&this.propKeys.splice(e,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateXY:this.propKeys[0]==="scaleX"?this._updateFunction=this.updateX:this.propKeys[0]==="scaleY"?this._updateFunction=this.updateY:this._updateFunction=null}onUpdate(t,e,n){this._updateFunction&&(this._updateFunction(e),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag())}}class bVt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){var t,e,n,r,s;let a,o;super.onBind();const l=this.target.attribute;switch((t=this.params)===null||t===void 0?void 0:t.direction){case"x":a={scaleX:(e=l?.scaleX)!==null&&e!==void 0?e:1},o={scaleX:0};break;case"y":a={scaleY:(n=l?.scaleY)!==null&&n!==void 0?n:1},o={scaleY:0};break;default:a={scaleX:(r=l?.scaleX)!==null&&r!==void 0?r:1,scaleY:(s=l?.scaleY)!==null&&s!==void 0?s:1},o={scaleX:0,scaleY:0}}this.props=o,this.from=a,this.to=o}onEnd(t){super.onEnd(t)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}}class xVt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}update(t,e,n){if(this.onStart(),!this.props||!this.propKeys)return;const r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((s,a)=>{if(!this.animate.validAttr(this.propKeys[a]))return;const o=this.propKeys[a];s(o,this.fromProps[o],this.props[o],r,this,this.target)}),this.onUpdate(t,r,n),this.syncAttributeUpdate()}}class SVt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){var t,e;super.onBind();let{diffAttrs:n={}}=(t=this.target.context)!==null&&t!==void 0?t:{};const{options:r}=this.params;n=Object.assign({},n),!((e=r?.excludeChannels)===null||e===void 0)&&e.length&&r.excludeChannels.forEach(s=>{delete n[s]}),this.props=n}update(t,e,n){if(this.onStart(),!this.props||!this.propKeys)return;const r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((s,a)=>{if(!this.animate.validAttr(this.propKeys[a]))return;const o=this.propKeys[a];s(o,this.fromProps[o],this.props[o],r,this,this.target)}),this.onUpdate(t,r,n)}}const wVt=(i,t,e)=>{var n,r,s,a;const{offset:o=0,orient:l,direction:u,point:c,excludeChannels:h=[],layoutRect:d={}}=t??{};let f=0,p=0;l==="negative"&&(f=(n=d.width)!==null&&n!==void 0?n:i.stage.viewWidth,p=(r=d.height)!==null&&r!==void 0?r:i.stage.viewHeight),f+=o,p+=o;const g=it(c)?c.call(null,(a=(s=i.context)===null||s===void 0?void 0:s.data)===null||a===void 0?void 0:a[0],i,e):c,m=i.getGraphicAttribute("x"),_=i.getGraphicAttribute("y"),v=h.includes("x")?m:g&&et(g.x)?g.x:f,y=h.includes("y")?_:g&&et(g.y)?g.y:p;switch(u){case"x":return{from:{x:h.includes("x")?m:v},to:{x:m}};case"y":return{from:{y},to:{y:_}};default:return{from:{x:v,y},to:{x:m,y:_}}}},AVt=(i,t,e)=>{var n,r,s,a;const{offset:o=0,orient:l,direction:u,point:c}=t??{},h=e.group?e.group.AABBBounds:null,d=(n=h.width())!==null&&n!==void 0?n:e.width,f=(r=h.height())!==null&&r!==void 0?r:e.height,p=(l==="negative"?d:0)+o,g=(l==="negative"?f:0)+o,m=it(c)?c.call(null,(a=(s=i.context)===null||s===void 0?void 0:s.data)===null||a===void 0?void 0:a[0],i,e):c,_=m&&et(m.x)?m.x:p,v=m&&et(m.y)?m.y:g;switch(u){case"x":return{from:{x:i.getGraphicAttribute("x")},to:{x:_}};case"y":return{from:{y:i.getGraphicAttribute("y")},to:{y:v}};default:return{from:{x:i.getGraphicAttribute("x"),y:i.getGraphicAttribute("y")},to:{x:_,y:v}}}};class Nit extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class kVt extends Nit{onBind(){var t;super.onBind();const{from:e,to:n}=wVt(this.target,this.params.options,this.params);this.props=n,this.propKeys=Object.keys(n).filter(s=>n[s]!=null),this.from=e,this.to=n;const r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),((t=this.params.controlOptions)===null||t===void 0?void 0:t.immediatelyApply)!==!1&&this.target.setAttributes(e)}}class CVt extends Nit{onBind(){super.onBind();const{from:t,to:e}=AVt(this.target,this.params.options,this.params);this.props=e,this.propKeys=Object.keys(e).filter(n=>e[n]!=null),this.from=t,this.to=e}}const MVt=(i,t)=>{var e;const n=(e=i.getFinalAttribute().angle)!==null&&e!==void 0?e:0;let r=0;return r=sn(n/(2*Math.PI),0)?Math.round(n/(2*Math.PI))*Math.PI*2:et(t?.angle)?t.angle:t?.orient==="anticlockwise"?Math.ceil(n/(2*Math.PI))*Math.PI*2:Math.floor(n/(2*Math.PI))*Math.PI*2,{from:{angle:r},to:{angle:n}}},TVt=(i,t)=>{var e;const n=(e=i.getFinalAttribute().angle)!==null&&e!==void 0?e:0;let r=0;return r=sn(n/(2*Math.PI),0)?Math.round(n/(2*Math.PI))*Math.PI*2:et(t?.angle)?t.angle:t?.orient==="anticlockwise"?Math.ceil(n/(2*Math.PI))*Math.PI*2:Math.floor(n/(2*Math.PI))*Math.PI*2,{from:{angle:n},to:{angle:r}}};class jit extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class PVt extends jit{onBind(){var t;super.onBind();const{from:e,to:n}=MVt(this.target,this.params.options);this.props=n,this.propKeys=["angle"],this.from=e,this.to=n;const r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),((t=this.params.controlOptions)===null||t===void 0?void 0:t.immediatelyApply)!==!1&&this.target.setAttributes(e)}}class EVt extends jit{onBind(){super.onBind();const{from:t,to:e}=TVt(this.target,this.params.options);this.props=e,this.propKeys=["angle"],this.from=t,this.to=e}}class RVt extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s),this.from=t??{}}onBind(){var t,e;super.onBind(),Object.keys(this.from).forEach(r=>{this.props[r]==null&&(this.props[r]=this.target.getGraphicAttribute(r))});const n=this.target.getFinalAttribute();((t=this.target.context)===null||t===void 0?void 0:t.animationState)==="appear"&&n&&this.target.setAttributes(n),((e=this.params.controlOptions)===null||e===void 0?void 0:e.immediatelyApply)!==!1&&this.target.setAttributes(this.from)}onFirstRun(){this.from=Object.assign(Object.assign({},this.getLastProps()),this.from);const t=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach(e=>{var n;this.from[e]=(n=this.from[e])!==null&&n!==void 0?n:t[e]}),this.target.setAttributes(this.from)}deleteSelfAttr(t){super.deleteSelfAttr(t),delete this.from[t]}update(t,e,n){if(this.onStart(),!this.props||!this.propKeys)return;const r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.from,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((s,a)=>{if(!this.animate.validAttr(this.propKeys[a]))return;const o=this.propKeys[a];s(o,this.from[o],this.props[o],r,this,this.target)}),this.onUpdate(t,r,n),this.syncAttributeUpdate()}}class Hb extends yit{constructor(t,e,n,r,s){super(t,e,n,r,s),this.webglCanvas=null,this.gl=null,this.program=null,this.currentAnimationRatio=0,this.animationTime=0}onUpdate(t,e,n){super.onUpdate(t,e,n),this.currentAnimationRatio=e,this.animationTime=e*Math.PI*2}getAnimationTime(){return this.currentAnimationRatio>0?this.animationTime:Date.now()/1e3}getDurationFromParent(){return this.duration||1e3}initWebGL(t){try{if(this.webglCanvas=Qt.createCanvas({width:t.width,height:t.height,dpr:Qt.devicePixelRatio}),!this.webglCanvas)return console.warn("WebGL canvas creation failed"),!1;this.webglCanvas.style.width=t.style.width||`${t.width}px`,this.webglCanvas.style.height=t.style.height||`${t.height}px`;let e=null;try{e=this.webglCanvas.getContext("webgl"),e||(e=this.webglCanvas.getContext("experimental-webgl"))}catch(r){console.warn("Failed to get WebGL context:",r)}if(this.gl=e,!this.gl)return console.warn("WebGL not supported"),!1;const n=this.getShaderSources();return this.program=this.createShaderProgram(n.vertex,n.fragment),this.program!==null}catch(e){return console.warn("Failed to initialize WebGL:",e),!1}}createShaderProgram(t,e){if(!this.gl)return null;const n=this.createShader(this.gl.VERTEX_SHADER,t),r=this.createShader(this.gl.FRAGMENT_SHADER,e);if(!n||!r)return null;const s=this.gl.createProgram();return s?(this.gl.attachShader(s,n),this.gl.attachShader(s,r),this.gl.linkProgram(s),this.gl.getProgramParameter(s,this.gl.LINK_STATUS)?s:(console.error("Shader program link error:",this.gl.getProgramInfoLog(s)),null)):null}createShader(t,e){if(!this.gl)return null;const n=this.gl.createShader(t);return n?(this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:(console.error("Shader compile error:",this.gl.getShaderInfoLog(n)),this.gl.deleteShader(n),null)):null}setupWebGLState(t){this.gl&&this.webglCanvas&&(this.webglCanvas.width===t.width&&this.webglCanvas.height===t.height||(this.webglCanvas.width=t.width,this.webglCanvas.height=t.height),this.gl.viewport(0,0,this.webglCanvas.width,this.webglCanvas.height),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT))}createFullScreenQuad(){if(!this.gl)return null;const t=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]),e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW),e}createTextureFromCanvas(t){if(!this.gl)return null;const e=this.gl.createTexture();return this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),e}setupVertexAttributes(){if(!this.gl||!this.program)return;const t=this.gl.getAttribLocation(this.program,"a_position"),e=this.gl.getAttribLocation(this.program,"a_texCoord");this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,2,this.gl.FLOAT,!1,16,8)}createOutputCanvas(t){const e=Qt.createCanvas({width:t.width,height:t.height,dpr:Qt.devicePixelRatio}),n=e.getContext("2d");return n?(n.clearRect(0,0,t.width,t.height),n.drawImage(t,0,0),{canvas:e,ctx:n}):null}getShaderSources(){return null}applyWebGLEffect(t){return null}applyCanvas2DEffect(t){return null}supportsWebGL(){return this.getShaderSources()!==null}supportsCanvas2D(){return this.applyCanvas2DEffect!==Hb.prototype.applyCanvas2DEffect}release(){super.release(),this.gl&&(this.program&&(this.gl.deleteProgram(this.program),this.program=null),this.gl=null),this.webglCanvas&&(this.webglCanvas=null),this.currentAnimationRatio=0,this.animationTime=0}afterStageRender(t,e){let n=null;if(this.supportsWebGL()&&(this.gl||this.initWebGL(e)||console.warn("WebGLCanvas 2D"),this.gl)){if(n=this.applyWebGLEffect(e),n)return n;console.warn("WebGLCanvas 2D")}if(this.supportsCanvas2D()){if(n=this.applyCanvas2DEffect(e),n)return n;console.warn("Canvas 2D")}return this.supportsWebGL()||this.supportsCanvas2D()||console.error(` ${this.constructor.name}  applyWebGLEffect  applyCanvas2DEffect `),e}}class OVt extends Hb{constructor(t,e,n,r,s){super(t,e,n,r,s)}getShaderSources(){return null}applyWebGLEffect(t){return null}}class Jd extends Hb{constructor(t,e,n,r,s){super(t,e,n,r,s)}getShaderSources(){return null}applyWebGLEffect(t){return null}applyCanvas2DEffect(t){return null}supportsWebGL(){return this.getShaderSources!==Jd.prototype.getShaderSources&&this.getShaderSources()!==null}supportsCanvas2D(){return this.applyCanvas2DEffect!==Jd.prototype.applyCanvas2DEffect}afterStageRender(t,e){var n,r;let s=null;if(((r=(n=this.params)===null||n===void 0?void 0:n.options)===null||r===void 0?void 0:r.useWebGL)!==!1){if(this.supportsWebGL()&&(this.gl||this.initWebGL(e)||console.warn("WebGLCanvas 2D"),this.gl)){if(s=this.applyWebGLEffect(e),s)return s;console.warn("WebGLCanvas 2D")}if(this.supportsCanvas2D()){if(s=this.applyCanvas2DEffect(e),s)return s;console.warn("Canvas 2D")}}else if(this.supportsCanvas2D()){if(s=this.applyCanvas2DEffect(e),s)return s;console.warn("Canvas 2D")}else console.warn(`${this.constructor.name}: useWebGL=false Canvas 2D`);return this.supportsWebGL()||this.supportsCanvas2D()||console.error(` ${this.constructor.name}  applyWebGLEffect  applyCanvas2DEffect `),e}}class Pi{static createTempCanvas(t,e,n){return Qt.createCanvas({width:t,height:e,dpr:n||Qt.devicePixelRatio})}static cloneImageData(t){const e=new Uint8ClampedArray(t.data);return new ImageData(e,t.width,t.height)}static lerp(t,e,n){return t*(1-n)+e*n}static smoothstep(t,e,n){const r=Math.max(0,Math.min(1,(n-t)/(e-t)));return r*r*(3-2*r)}static distance(t,e,n,r){const s=n-t,a=r-e;return Math.sqrt(s*s+a*a)}static normalizeAngle(t){return(t+Math.PI)/(2*Math.PI)}static pixelNoise(t,e,n){if(n<=0)return 0;const r=Math.floor(t/n)*n,s=Math.floor(e/n)*n,a=43758.5453*Math.sin(12.9898*r+78.233*s);return a-Math.floor(a)}static generateNoiseTexture(t,e){const n=new Uint8Array(t*e);for(let r=0;r<n.length;r++)n[r]=Math.floor(256*Math.random());return n}static applyCSSFilter(t,e){const n=this.createTempCanvas(t.width,t.height),r=n.getContext("2d");return r?(r.filter=e,r.drawImage(t,0,0),r.filter="none",n):t}static extractChannel(t,e){const{data:n,width:r,height:s}=t,a=new Uint8ClampedArray(n.length);for(let o=0;o<n.length;o+=4)a[o]=0,a[o+1]=0,a[o+2]=0,a[o+3]=n[o+3],e>=0&&e<=2&&(a[o+e]=n[o+e]);return new ImageData(a,r,s)}static blendImageData(t,e,n){const{data:r,width:s,height:a}=t,{data:o}=e,l=new Uint8ClampedArray(r.length);for(let u=0;u<r.length;u+=4)l[u]=Math.round(this.lerp(r[u],o[u],n)),l[u+1]=Math.round(this.lerp(r[u+1],o[u+1],n)),l[u+2]=Math.round(this.lerp(r[u+2],o[u+2],n)),l[u+3]=Math.round(this.lerp(r[u+3],o[u+3],n));return new ImageData(l,s,a)}static getLuminance(t,e,n){return .299*t+.587*e+.114*n}static applySepiaToPixel(t,e,n){return[Math.min(255,.393*t+.769*e+.189*n),Math.min(255,.349*t+.686*e+.168*n),Math.min(255,.272*t+.534*e+.131*n)]}static calculateDynamicStrength(t,e){return t*(e/(2*Math.PI))}}class im{}im.STANDARD_VERTEX_SHADER=`
    attribute vec2 a_position;
    attribute vec2 a_texCoord;
    varying vec2 v_texCoord;

    void main() {
      gl_Position = vec4(a_position, 0.0, 1.0);
      v_texCoord = a_texCoord;
    }
  `,im.SHADER_FUNCTIONS=`
    // 
    float luminance(vec3 color) {
      return dot(color, vec3(0.299, 0.587, 0.114));
    }

    // 
    vec3 sepia(vec3 color) {
      float r = color.r * 0.393 + color.g * 0.769 + color.b * 0.189;
      float g = color.r * 0.349 + color.g * 0.686 + color.b * 0.168;
      float b = color.r * 0.272 + color.g * 0.534 + color.b * 0.131;
      return vec3(r, g, b);
    }

    // 
    float lerp(float a, float b, float t) {
      return a * (1.0 - t) + b * t;
    }


    // 
    float pixelNoise(vec2 coord, float pixelSize) {
      vec2 gridCoord = floor(coord / pixelSize) * pixelSize;
      return fract(sin(dot(gridCoord, vec2(12.9898, 78.233))) * 43758.5453123);
    }

    // 
    float calculateDynamicStrength(float baseStrength, float time) {
      return baseStrength * (time / 6.28318531); // 2
    }
  `;class DVt extends Jd{constructor(t,e,n,r,s){var a,o,l,u;super(t,e,n,r,s),this.noiseData=null;const c=(a=s?.options)===null||a===void 0?void 0:a.noiseScale,h=c!==void 0?Math.max(0,Math.floor(c)):8;this.dissolveConfig={dissolveType:((o=s?.options)===null||o===void 0?void 0:o.dissolveType)||"outward",useWebGL:((l=s?.options)===null||l===void 0?void 0:l.useWebGL)===void 0||s.options.useWebGL,noiseScale:h,fadeEdge:((u=s?.options)===null||u===void 0?void 0:u.fadeEdge)===void 0||s.options.fadeEdge}}getShaderSources(){return{vertex:im.STANDARD_VERTEX_SHADER,fragment:`
      precision mediump float;
      uniform sampler2D u_texture;
      uniform sampler2D u_noiseTexture;
      uniform float u_time;
      uniform int u_dissolveType;
      uniform vec2 u_resolution;
      uniform float u_noiseScale;
      uniform bool u_fadeEdge;
      varying vec2 v_texCoord;

      ${im.SHADER_FUNCTIONS}

      // 
      float outwardDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float distFromCenter = length(uv - center);
        float maxDist = length(vec2(0.5, 0.5));

        //  (01)
        float normalizedDist = distFromCenter / maxDist;

        // time
        // 
        float edgeThreshold = 1.2 - time * 1.5;

        // pixelSize > 0
        if (pixelSize > 0.0) {
          // 
          vec2 pixelCoord = uv * resolution; // 
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.4; // 
          edgeThreshold += noiseInfluence;
          return normalizedDist > edgeThreshold ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.15; // 
            return 1.0 - smoothstep(edgeThreshold - fadeWidth, edgeThreshold, normalizedDist);
          } else {
            // 01
            return normalizedDist > edgeThreshold ? 0.0 : 1.0;
          }
        }
      }

      // 
      float inwardDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float distFromCenter = length(uv - center);
        float maxDist = length(vec2(0.5, 0.5));

        float normalizedDist = distFromCenter / maxDist;

        // time
        // 
        float centerThreshold = time * 1.4;

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.4;
          centerThreshold += noiseInfluence;
          return normalizedDist < centerThreshold ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.15; // 
            return smoothstep(centerThreshold, centerThreshold + fadeWidth, normalizedDist);
          } else {
            // 01
            return normalizedDist < centerThreshold ? 0.0 : 1.0;
          }
        }
      }

      // 
      float radialDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float angle = atan(uv.y - center.y, uv.x - center.x);
        float normalizedAngle = (angle + 3.14159) / (2.0 * 3.14159);

        // time
        // 
        float angleThreshold = time * 1.2;

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          angleThreshold += noiseInfluence;
          return normalizedAngle < angleThreshold ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.08; // 
            return smoothstep(angleThreshold, angleThreshold + fadeWidth, normalizedAngle);
          } else {
            // 01
            return normalizedAngle < angleThreshold ? 0.0 : 1.0;
          }
        }
      }

      // 
      float leftToRightDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // x=0x=1
        float dissolvePosition = time * 1.2; // 

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.x < dissolvePosition ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.08; // 
            return smoothstep(dissolvePosition, dissolvePosition + fadeWidth, uv.x);
          } else {
            // 01
            return uv.x < dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // 
      float rightToLeftDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // x=1x=0
        float dissolvePosition = 1.0 - time * 1.2; // 

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.x > dissolvePosition ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.08; // 
            return smoothstep(dissolvePosition - fadeWidth, dissolvePosition, uv.x);
          } else {
            // 01
            return uv.x > dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // 
      float topToBottomDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // y=0y=1
        float dissolvePosition = time * 1.2; // 

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.y < dissolvePosition ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.08; // 
            return smoothstep(dissolvePosition, dissolvePosition + fadeWidth, uv.y);
          } else {
            // 01
            return uv.y < dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // 
      float bottomToTopDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // y=1y=0
        float dissolvePosition = 1.0 - time * 1.2; // 

        // pixelSize > 0
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.y > dissolvePosition ? 0.0 : 1.0;
        } else {
          // fadeEdge
          if (u_fadeEdge) {
            // 
            float fadeWidth = 0.08; // 
            return smoothstep(dissolvePosition - fadeWidth, dissolvePosition, uv.y);
          } else {
            // 01
            return uv.y > dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      void main() {
        vec2 uv = v_texCoord;
        vec4 texColor = texture2D(u_texture, uv);

        float alpha = 1.0;

        // 
        if (u_dissolveType == 0) {
          alpha = outwardDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 1) {
          alpha = inwardDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 2) {
          alpha = radialDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 3) {
          alpha = leftToRightDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 4) {
          alpha = rightToLeftDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 5) {
          alpha = topToBottomDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 6) {
          alpha = bottomToTopDissolve(uv, u_time, u_noiseScale, u_resolution);
        }

        gl_FragColor = vec4(texColor.rgb, texColor.a * alpha);
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return t;this.setupWebGLState(t);const e=this.createTextureFromCanvas(t);if(!e)return t;this.noiseData||(this.noiseData=Pi.generateNoiseTexture(256,256));const n=this.gl.createTexture();this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,n),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,256,256,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,this.noiseData),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);const r=this.createFullScreenQuad();return r?(this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setUniforms(),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.deleteTexture(e),this.gl.deleteTexture(n),this.gl.deleteBuffer(r),this.webglCanvas):t}setUniforms(){if(!this.gl||!this.program||!this.webglCanvas)return;const t=this.gl.getUniformLocation(this.program,"u_texture"),e=this.gl.getUniformLocation(this.program,"u_noiseTexture"),n=this.gl.getUniformLocation(this.program,"u_time"),r=this.gl.getUniformLocation(this.program,"u_dissolveType"),s=this.gl.getUniformLocation(this.program,"u_resolution"),a=this.gl.getUniformLocation(this.program,"u_noiseScale"),o=this.gl.getUniformLocation(this.program,"u_fadeEdge");this.gl.uniform1i(t,0),this.gl.uniform1i(e,1),this.gl.uniform1f(n,this.currentAnimationRatio),this.gl.uniform2f(s,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1f(a,this.dissolveConfig.noiseScale),this.gl.uniform1i(o,this.dissolveConfig.fadeEdge?1:0),this.gl.uniform1i(r,{outward:0,inward:1,radial:2,leftToRight:3,rightToLeft:4,topToBottom:5,bottomToTop:6}[this.dissolveConfig.dissolveType]||0)}applyCanvas2DEffect(t){const e=this.createOutputCanvas(t);if(!e)return t;const{canvas:n,ctx:r}=e,s=r.getImageData(0,0,t.width,t.height),a=this.currentAnimationRatio;let o;switch(this.dissolveConfig.dissolveType){case"outward":o=this.applyOutwardDissolve(s,a);break;case"inward":o=this.applyInwardDissolve(s,a);break;case"radial":o=this.applyRadialDissolve(s,a);break;case"leftToRight":o=this.applyLeftToRightDissolve(s,a);break;case"rightToLeft":o=this.applyRightToLeftDissolve(s,a);break;case"topToBottom":o=this.applyTopToBottomDissolve(s,a);break;case"bottomToTop":o=this.applyBottomToTopDissolve(s,a);break;default:o=s}return r.putImageData(o,0,0),n}applyOutwardDissolve(t,e){const{data:n,width:r,height:s}=t,a=new Uint8ClampedArray(n.length);a.set(n);const o=r/2,l=s/2,u=Math.sqrt(o*o+l*l),c=this.dissolveConfig.noiseScale;for(let h=0;h<s;h++)for(let d=0;d<r;d++){const f=d-o,p=h-l,g=Math.sqrt(f*f+p*p)/u;let m=1.2-1.4*e,_=1;if(c>0)m+=.4*(Pi.pixelNoise(d,h,c)-.5),_=g>m?0:1;else if(this.dissolveConfig.fadeEdge){const y=m-.15;_=g<y?1:g>m?0:1-(g-y)/(m-y)}else _=g>m?0:1;const v=4*(h*r+d);a[v+3]=Math.floor(a[v+3]*_)}return new ImageData(a,r,s)}applyInwardDissolve(t,e){const{data:n,width:r,height:s}=t,a=new Uint8ClampedArray(n.length);a.set(n);const o=r/2,l=s/2,u=Math.sqrt(o*o+l*l),c=this.dissolveConfig.noiseScale;for(let h=0;h<s;h++)for(let d=0;d<r;d++){const f=d-o,p=h-l,g=Math.sqrt(f*f+p*p)/u;let m=1.4*e,_=1;if(c>0)m+=.4*(Pi.pixelNoise(d,h,c)-.5),_=g<m?0:1;else if(this.dissolveConfig.fadeEdge){const y=m+.15;_=g<m?0:g>y?1:(g-m)/(y-m)}else _=g<m?0:1;const v=4*(h*r+d);a[v+3]=Math.floor(a[v+3]*_)}return new ImageData(a,r,s)}applyRadialDissolve(t,e){const{data:n,width:r,height:s}=t,a=new Uint8ClampedArray(n.length);a.set(n);const o=r/2,l=s/2,u=this.dissolveConfig.noiseScale;for(let c=0;c<s;c++)for(let h=0;h<r;h++){const d=h-o,f=c-l,p=(Math.atan2(f,d)+Math.PI)/(2*Math.PI);let g=1.2*e,m=1;if(u>0)g+=.3*(Pi.pixelNoise(h,c,u)-.5),m=p<g?0:1;else if(this.dissolveConfig.fadeEdge){const v=g+.08;m=p<g?0:p>v?1:(p-g)/(v-g)}else m=p<g?0:1;const _=4*(c*r+h);a[_+3]=Math.floor(a[_+3]*m)}return new ImageData(a,r,s)}applyLeftToRightDissolve(t,e){const{data:n,width:r,height:s}=t,a=new Uint8ClampedArray(n.length);a.set(n);const o=this.dissolveConfig.noiseScale;for(let l=0;l<s;l++)for(let u=0;u<r;u++){const c=u/r;let h=1.2*e,d=1;if(o>0)h+=.3*(Pi.pixelNoise(u,l,o)-.5),d=c<h?0:1;else if(this.dissolveConfig.fadeEdge){const p=h+.08;d=c<h?0:c>p?1:(c-h)/(p-h)}else d=c<h?0:1;const f=4*(l*r+u);a[f+3]=Math.floor(a[f+3]*d)}return new ImageData(a,r,s)}applyRightToLeftDissolve(t,e){const{data:n,width:r,height:s}=t,a=new Uint8ClampedArray(n.length);a.set(n);const o=this.dissolveConfig.noiseScale;for(let l=0;l<s;l++)for(let u=0;u<r;u++){const c=u/r;let h=1-1.2*e,d=1;if(o>0)h+=.3*(Pi.pixelNoise(u,l,o)-.5),d=c>h?0:1;else if(this.dissolveConfig.fadeEdge){const p=h-.08;d=c<p?1:c>h?0:1-(c-p)/(h-p)}else d=c>h?0:1;const f=4*(l*r+u);a[f+3]=Math.floor(a[f+3]*d)}return new ImageData(a,r,s)}applyTopToBottomDissolve(t,e){const{data:n,width:r,height:s}=t,a=new Uint8ClampedArray(n.length);a.set(n);const o=this.dissolveConfig.noiseScale;for(let l=0;l<s;l++)for(let u=0;u<r;u++){const c=l/s;let h=1.2*e,d=1;if(o>0)h+=.3*(Pi.pixelNoise(u,l,o)-.5),d=c<h?0:1;else if(this.dissolveConfig.fadeEdge){const p=h+.08;d=c<h?0:c>p?1:(c-h)/(p-h)}else d=c<h?0:1;const f=4*(l*r+u);a[f+3]=Math.floor(a[f+3]*d)}return new ImageData(a,r,s)}applyBottomToTopDissolve(t,e){const{data:n,width:r,height:s}=t,a=new Uint8ClampedArray(n.length);a.set(n);const o=this.dissolveConfig.noiseScale;for(let l=0;l<s;l++)for(let u=0;u<r;u++){const c=l/s;let h=1-1.2*e,d=1;if(o>0)h+=.3*(Pi.pixelNoise(u,l,o)-.5),d=c>h?0:1;else if(this.dissolveConfig.fadeEdge){const p=h-.08;d=c<p?1:c>h?0:1-(c-p)/(h-p)}else d=c>h?0:1;const f=4*(l*r+u);a[f+3]=Math.floor(a[f+3]*d)}return new ImageData(a,r,s)}}class IVt extends Jd{constructor(t,e,n,r,s){var a,o,l;super(t,e,n,r,s);const u=((a=s?.options)===null||a===void 0?void 0:a.strength)!==void 0?s.options.strength:1,c=Math.max(0,Math.min(1,u));this.colorConfig={effectType:((o=s?.options)===null||o===void 0?void 0:o.effectType)||"grayscale",strength:c,useWebGL:((l=s?.options)===null||l===void 0?void 0:l.useWebGL)===void 0||s.options.useWebGL}}getShaderSources(){return{vertex:im.STANDARD_VERTEX_SHADER,fragment:`
      precision mediump float;
      uniform sampler2D u_texture;
      uniform float u_time;
      uniform float u_strength;
      uniform int u_effectType;
      uniform vec2 u_resolution;
      varying vec2 v_texCoord;

      ${im.SHADER_FUNCTIONS}

      void main() {
        vec2 uv = v_texCoord;
        vec4 originalColor = texture2D(u_texture, uv);
        vec3 color = originalColor.rgb;

        // 
        float dynamicStrength = calculateDynamicStrength(u_strength, u_time);

        if (u_effectType == 0) {
          // 
          float gray = luminance(color);
          vec3 grayColor = vec3(gray);
          color = mix(color, grayColor, dynamicStrength);
        } else if (u_effectType == 1) {
          // 
          vec3 sepiaColor = sepia(color);
          color = mix(color, sepiaColor, dynamicStrength);
        }

        gl_FragColor = vec4(color, originalColor.a);
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t);const e=this.createTextureFromCanvas(t);if(!e)return null;const n=this.createFullScreenQuad();if(!n)return this.gl.deleteTexture(e),null;try{return this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setColorUniforms(),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.webglCanvas}finally{this.gl.deleteTexture(e),this.gl.deleteBuffer(n)}}setColorUniforms(){if(!this.gl||!this.program)return;const t=this.getAnimationTime(),e=this.gl.getUniformLocation(this.program,"u_time"),n=this.gl.getUniformLocation(this.program,"u_strength"),r=this.gl.getUniformLocation(this.program,"u_effectType"),s=this.gl.getUniformLocation(this.program,"u_resolution");this.gl.uniform1f(e,t),this.gl.uniform1f(n,this.colorConfig.strength),this.gl.uniform2f(s,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1i(r,{grayscale:0,sepia:1}[this.colorConfig.effectType]||0)}applyCanvas2DEffect(t){if(this.colorConfig.strength<=0){const r=this.createOutputCanvas(t);return r?r.canvas:null}if(this.canUseCSSFilter())return this.applyCSSFilter(t);const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:n}=e;try{const r=n.getImageData(0,0,t.width,t.height),s=this.getAnimationTime();let a;switch(this.colorConfig.effectType){case"grayscale":default:a=this.applyGrayscaleEffect(r,this.colorConfig.strength,s);break;case"sepia":a=this.applySepiaEffect(r,this.colorConfig.strength,s)}return n.clearRect(0,0,t.width,t.height),n.putImageData(a,0,0),e.canvas}catch(r){return console.warn("Canvas 2D color effect failed:",r),null}}canUseCSSFilter(){var t;return!!window.useFilterAPI&&typeof CSS<"u"&&((t=CSS.supports)===null||t===void 0?void 0:t.call(CSS,"filter","grayscale(1)"))}applyCSSFilter(t){try{const e=Pi.createTempCanvas(t.width,t.height),n=e.getContext("2d");if(!n)return null;const r=this.getAnimationTime(),s=Pi.calculateDynamicStrength(this.colorConfig.strength,r);let a="";return this.colorConfig.effectType==="grayscale"?a=`grayscale(${Math.min(1,s)})`:this.colorConfig.effectType==="sepia"&&(a=`sepia(${Math.min(1,s)})`),n.filter=a,n.drawImage(t,0,0),n.filter="none",e}catch(e){return console.warn("CSS Filter API failed, falling back to pixel processing:",e),null}}applyGrayscaleEffect(t,e,n){const{data:r,width:s,height:a}=t,o=new Uint8ClampedArray(r.length),l=Pi.calculateDynamicStrength(e,n);for(let u=0;u<r.length;u+=4){const c=r[u],h=r[u+1],d=r[u+2],f=r[u+3],p=Pi.getLuminance(c,h,d);o[u]=Math.round(Pi.lerp(c,p,l)),o[u+1]=Math.round(Pi.lerp(h,p,l)),o[u+2]=Math.round(Pi.lerp(d,p,l)),o[u+3]=f}return new ImageData(o,s,a)}applySepiaEffect(t,e,n){const{data:r,width:s,height:a}=t,o=new Uint8ClampedArray(r.length),l=Pi.calculateDynamicStrength(e,n);for(let u=0;u<r.length;u+=4){const c=r[u],h=r[u+1],d=r[u+2],f=r[u+3],[p,g,m]=Pi.applySepiaToPixel(c,h,d);o[u]=Math.round(Pi.lerp(c,p,l)),o[u+1]=Math.round(Pi.lerp(h,g,l)),o[u+2]=Math.round(Pi.lerp(d,m,l)),o[u+3]=f}return new ImageData(o,s,a)}afterStageRender(t,e){if(this.canUseCSSFilter()&&this.colorConfig.strength>0){const n=this.applyCSSFilter(e);if(n)return n}return super.afterStageRender(t,e)}}class LVt extends Jd{constructor(t,e,n,r,s){var a,o,l;super(t,e,n,r,s),this.distortionConfig={distortionType:((a=s?.options)===null||a===void 0?void 0:a.distortionType)||"wave",strength:((o=s?.options)===null||o===void 0?void 0:o.strength)||.3,useWebGL:((l=s?.options)===null||l===void 0?void 0:l.useWebGL)===void 0||s.options.useWebGL}}getShaderSources(){return{vertex:`
      attribute vec2 a_position;
      attribute vec2 a_texCoord;
      varying vec2 v_texCoord;

      void main() {
        gl_Position = vec4(a_position, 0.0, 1.0);
        v_texCoord = a_texCoord;
      }
    `,fragment:`
      precision mediump float;
      uniform sampler2D u_texture;
      uniform float u_time;
      uniform float u_strength;
      uniform int u_distortionType;
      uniform vec2 u_resolution;
      varying vec2 v_texCoord;

      // 
      vec2 wave(vec2 uv, float time, float strength) {
        float waveX = sin(uv.y * 10.0 + time * 3.0) * strength * 0.1;
        float waveY = sin(uv.x * 10.0 + time * 2.0) * strength * 0.1;
        return uv + vec2(waveX, waveY);
      }

      // 
      vec2 ripple(vec2 uv, float time, float strength) {
        vec2 center = vec2(0.5, 0.5);
        float distance = length(uv - center);
        float ripple = sin(distance * 20.0 - time * 5.0) * strength * 0.1;
        vec2 direction = normalize(uv - center);
        return uv + direction * ripple;
      }

      // 
      vec2 swirl(vec2 uv, float time, float strength) {
        vec2 center = vec2(0.5, 0.5);
        vec2 delta = uv - center;
        float dist = length(delta);
        float originalAngle = atan(delta.y, delta.x);
        float rotationAngle = dist * strength * time * 2.0;
        float finalAngle = originalAngle + rotationAngle;
        return center + dist * vec2(cos(finalAngle), sin(finalAngle));
      }

      void main() {
        vec2 uv = v_texCoord;

        // 
        if (u_distortionType == 0) {
          uv = wave(uv, u_time, u_strength);
        } else if (u_distortionType == 1) {
          uv = ripple(uv, u_time, u_strength);
        } else if (u_distortionType == 2) {
          uv = swirl(uv, u_time, u_strength);
        }

        // 
        if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        } else {
          gl_FragColor = texture2D(u_texture, uv);
        }
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t);const e=this.createTextureFromCanvas(t);if(!e)return null;const n=this.createFullScreenQuad();if(!n)return this.gl.deleteTexture(e),null;try{return this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setDistortionUniforms(),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.webglCanvas}finally{this.gl.deleteTexture(e),this.gl.deleteBuffer(n)}}setDistortionUniforms(){if(!this.gl||!this.program)return;const t=this.getAnimationTime(),e=this.gl.getUniformLocation(this.program,"u_time"),n=this.gl.getUniformLocation(this.program,"u_strength"),r=this.gl.getUniformLocation(this.program,"u_distortionType"),s=this.gl.getUniformLocation(this.program,"u_resolution");this.gl.uniform1f(e,t),this.gl.uniform1f(n,this.distortionConfig.strength),this.gl.uniform2f(s,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1i(r,{wave:0,ripple:1,swirl:2}[this.distortionConfig.distortionType]||0)}applyCanvas2DEffect(t){const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:n}=e;try{const r=n.getImageData(0,0,t.width,t.height),s=this.getAnimationTime();let a;switch(this.distortionConfig.distortionType){case"wave":a=this.applyWaveDistortion(r,this.distortionConfig.strength,s);break;case"ripple":a=this.applyRippleDistortion(r,this.distortionConfig.strength,s);break;case"swirl":a=this.applySwirlDistortion(r,this.distortionConfig.strength,s);break;default:a=r}return n.clearRect(0,0,t.width,t.height),n.putImageData(a,0,0),e.canvas}catch(r){return console.warn("Canvas 2D distortion effect failed:",r),null}}applyWaveDistortion(t,e,n){const{data:r,width:s,height:a}=t,o=new Uint8ClampedArray(r.length);for(let l=0;l<a;l++)for(let u=0;u<s;u++){const c=Math.sin(.1*l+3*n)*e*20,h=Math.sin(.1*u+2*n)*e*20,d=Math.round(u-c),f=Math.round(l-h),p=4*(l*s+u);if(d>=0&&d<s&&f>=0&&f<a){const g=4*(f*s+d);o[p]=r[g],o[p+1]=r[g+1],o[p+2]=r[g+2],o[p+3]=r[g+3]}else o[p+3]=0}return new ImageData(o,s,a)}applyRippleDistortion(t,e,n){const{data:r,width:s,height:a}=t,o=new Uint8ClampedArray(r.length),l=s/2,u=a/2;for(let c=0;c<a;c++)for(let h=0;h<s;h++){const d=h-l,f=c-u,p=Math.sqrt(d*d+f*f),g=Math.sin(.2*p-5*n)*e*10,m=Math.atan2(f,d),_=Math.round(h-Math.cos(m)*g),v=Math.round(c-Math.sin(m)*g),y=4*(c*s+h);if(_>=0&&_<s&&v>=0&&v<a){const b=4*(v*s+_);o[y]=r[b],o[y+1]=r[b+1],o[y+2]=r[b+2],o[y+3]=r[b+3]}else o[y+3]=0}return new ImageData(o,s,a)}applySwirlDistortion(t,e,n){const{data:r,width:s,height:a}=t,o=new Uint8ClampedArray(r.length),l=s/2,u=a/2;for(let c=0;c<a;c++)for(let h=0;h<s;h++){const d=h-l,f=c-u,p=Math.sqrt(d*d+f*f),g=Math.atan2(f,d)+p*e*n*.02,m=Math.round(l+p*Math.cos(g)),_=Math.round(u+p*Math.sin(g)),v=4*(c*s+h);if(m>=0&&m<s&&_>=0&&_<a){const y=4*(_*s+m);o[v]=r[y],o[v+1]=r[y+1],o[v+2]=r[y+2],o[v+3]=r[y+3]}else o[v+3]=0}return new ImageData(o,s,a)}afterStageRender(t,e){return this.distortionConfig.strength<=0?e:super.afterStageRender(t,e)}}class BVt extends Jd{constructor(t,e,n,r,s){var a,o,l,u,c;super(t,e,n,r,s),this.particles=[],this.positionBuffer=null,this.colorBuffer=null,this.particleConfig={effectType:((a=s?.options)===null||a===void 0?void 0:a.effectType)||"gravity",count:((o=s?.options)===null||o===void 0?void 0:o.count)||4e3,size:((l=s?.options)===null||l===void 0?void 0:l.size)||20,strength:((u=s?.options)===null||u===void 0?void 0:u.strength)||1.5,useWebGL:((c=s?.options)===null||c===void 0?void 0:c.useWebGL)===void 0||s.options.useWebGL}}getShaderSources(){return{vertex:`
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_size;

      uniform vec2 u_resolution;
      uniform float u_time;
      uniform float u_forceStrength;
      uniform int u_effectType;

      varying vec4 v_color;

      void main() {
        // 
        vec2 clipSpace = ((a_position / u_resolution) * 2.0) - 1.0;
        clipSpace.y = -clipSpace.y; // Y

        gl_Position = vec4(clipSpace, 0.0, 1.0);
        gl_PointSize = a_size;
        v_color = a_color;
      }
    `,fragment:`
      precision mediump float;
      varying vec4 v_color;

      void main() {
        // 
        vec2 coord = gl_PointCoord - vec2(0.5);
        float distance = length(coord);

        if (distance > 0.5) {
          discard;
        }

        // 
        gl_FragColor = vec4(v_color.rgb, v_color.a);
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t),this.particles.length===0&&this.extractParticles(t),this.updateParticles(t);const e=this.gl;return e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.program),this.prepareAndDrawParticles(e),this.webglCanvas}applyCanvas2DEffect(t){const e=this.createOutputCanvas(t);if(!e)return null;const{canvas:n,ctx:r}=e,s=this.currentAnimationRatio;switch(this.particleConfig.effectType){case"explode":this.applyCanvas2DExplode(r,t,s);break;case"gravity":this.applyCanvas2DGravity(r,t,s);break;case"vortex":this.applyCanvas2DVortex(r,t,s);break;default:r.globalAlpha=Math.max(0,1-s),r.drawImage(t,0,0)}return n}extractParticles(t){const e=Pi.createTempCanvas(t.width,t.height,1),n=e.getContext("2d");if(!n)return;n.drawImage(t,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height).data;this.particles=[];const s=Math.max(1,Math.floor(Math.sqrt(e.width*e.height/(1.5*this.particleConfig.count))));for(let a=0;a<e.height;a+=s)for(let o=0;o<e.width;o+=s){const l=4*(a*e.width+o),u=r[l],c=r[l+1],h=r[l+2],d=r[l+3];if(d>5){const f=o/e.width*t.width,p=a/e.height*t.height,g={x:f,y:p,originX:f,originY:p,vx:0,vy:0,r:u/255,g:c/255,b:h/255,a:Math.max(.6,d/255),life:1,size:this.particleConfig.size*(1+.5*Math.random())};this.particles.push(g)}}}updateParticles(t){const e=t.width/2,n=t.height/2,r=this.currentAnimationRatio,s=this.getDurationFromParent(),a=s<2e3,o=a?Math.max(1.5,3e3/s):1,l=a?Math.min(2,2e3/s):1;this.particles.forEach(u=>{const c=u.x-e,h=u.y-n,d=Math.sqrt(c*c+h*h),f=Math.atan2(h,c);this.applyParticleForces(u,f,d,r,l,t),this.updateParticleProperties(u,r,a,o,l)})}applyParticleForces(t,e,n,r,s,a){const o=this.getAnimationTime();switch(this.particleConfig.effectType){case"explode":const l=r*this.particleConfig.strength*s*5;t.vx+=Math.cos(e)*l,t.vy+=Math.sin(e)*l;break;case"gravity":this.applyGravityEffect(t,r,s,a,o);break;case"vortex":this.applyVortexEffect(t,r,s,a,e,n)}}applyGravityEffect(t,e,n,r,s){const a=(t.originX+.7*t.originY)/(r.width+r.height)*.8;if(e>a){const o=(e-a)/(1-a),l=this.particleConfig.strength*o*o*12*n;t.vy+=l;const u=Math.sin(3*s+.02*t.originX)*Math.cos(2*s+.015*t.originY);t.vx+=u*this.particleConfig.strength*2*n}}applyVortexEffect(t,e,n,r,s,a){const o=r.width/2,l=r.height/2,u=s+e*Math.PI*.8,c=a+e*Math.max(r.width,r.height)*.7*1.8,h=o+Math.cos(u)*c,d=l+Math.sin(u)*c,f=e*this.particleConfig.strength*.08*n;t.vx+=(h-t.x)*f,t.vy+=(d-t.y)*f}updateParticleProperties(t,e,n,r,s){const a=n?.99:.98;if(t.vx*=a,t.vy*=a,t.x+=t.vx,t.y+=t.vy,n){const o=Math.max(.1,.5/r);t.life=Math.max(0,1-e*o),t.a=Math.max(.2,t.life*Math.min(1,1.2*t.a)),t.size=Math.max(.7*this.particleConfig.size,this.particleConfig.size*(.5+.5*t.life))}else t.life=Math.max(0,1-.2*e),t.a=Math.max(.1,t.life*Math.min(1,1.5*t.a)),t.size=Math.max(.5*this.particleConfig.size,this.particleConfig.size*(.3+.7*t.life))}prepareAndDrawParticles(t){const e=new Float32Array(2*this.particles.length),n=new Float32Array(4*this.particles.length),r=new Float32Array(this.particles.length);this.particles.forEach((s,a)=>{e[2*a]=s.x,e[2*a+1]=s.y,n[4*a]=s.r,n[4*a+1]=s.g,n[4*a+2]=s.b,n[4*a+3]=Math.max(.1,s.a),r[a]=Math.max(6,1.5*s.size)}),this.updateParticleBuffers(t,e,n,r),this.setParticleUniforms(t),t.drawArrays(t.POINTS,0,this.particles.length),this.cleanupTempBuffers(t)}updateParticleBuffers(t,e,n,r){this.positionBuffer||(this.positionBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW);const s=t.getAttribLocation(this.program,"a_position");t.enableVertexAttribArray(s),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),this.colorBuffer||(this.colorBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,n,t.DYNAMIC_DRAW);const a=t.getAttribLocation(this.program,"a_color");t.enableVertexAttribArray(a),t.vertexAttribPointer(a,4,t.FLOAT,!1,0,0);const o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,r,t.DYNAMIC_DRAW);const l=t.getAttribLocation(this.program,"a_size");t.enableVertexAttribArray(l),t.vertexAttribPointer(l,1,t.FLOAT,!1,0,0),this._tempSizeBuffer=o}setParticleUniforms(t){const e=t.getUniformLocation(this.program,"u_resolution"),n=t.getUniformLocation(this.program,"u_time"),r=t.getUniformLocation(this.program,"u_forceStrength"),s=t.getUniformLocation(this.program,"u_effectType");t.uniform2f(e,this.webglCanvas.width,this.webglCanvas.height),t.uniform1f(n,this.getAnimationTime()),t.uniform1f(r,this.particleConfig.strength),t.uniform1i(s,{explode:0,vortex:1,gravity:2}[this.particleConfig.effectType]||0)}cleanupTempBuffers(t){const e=this._tempSizeBuffer;e&&(t.deleteBuffer(e),delete this._tempSizeBuffer)}applyCanvas2DExplode(t,e,n){const r=e.width/2,s=e.height/2;t.save(),t.globalAlpha=Math.max(0,1-n),t.translate(r,s);const a=1+.5*n;t.scale(a,a),t.translate(-r,-s),t.drawImage(e,0,0),t.restore()}applyCanvas2DGravity(t,e,n){t.save(),t.globalAlpha=Math.max(0,1-n);const r=n*e.height*.3;t.drawImage(e,0,r),t.restore()}applyCanvas2DVortex(t,e,n){const r=e.width/2,s=e.height/2;t.save(),t.globalAlpha=Math.max(0,1-n),t.translate(r,s),t.rotate(n*Math.PI*2),t.translate(-r,-s),t.drawImage(e,0,0),t.restore()}}class FVt extends OVt{constructor(t,e,n,r,s){var a,o;super(t,e,n,r,s),this.glitchConfig={effectType:((a=s?.options)===null||a===void 0?void 0:a.effectType)||"rgb-shift",intensity:((o=s?.options)===null||o===void 0?void 0:o.intensity)!==void 0?s.options.intensity:.5}}applyCanvas2DEffect(t){if(this.glitchConfig.intensity<=0){const e=this.createOutputCanvas(t);return e?e.canvas:null}try{switch(this.glitchConfig.effectType){case"rgb-shift":default:return this.applyRGBShiftGlitch(t);case"digital-distortion":return this.applyDigitalDistortionGlitch(t);case"scan-lines":return this.applyScanLineGlitch(t);case"data-corruption":return this.applyDataCorruptionGlitch(t)}}catch(e){return console.warn("Glitch effect failed:",e),null}}applyRGBShiftGlitch(t){const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:n}=e;try{n.clearRect(0,0,t.width,t.height);const r=Pi.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),s=Math.floor(20*r),a=this.generateRandomOffset(s),o=this.generateRandomOffset(s,.3),l=this.generateRandomOffset(-s),u=Pi.createTempCanvas(t.width,t.height),c=u.getContext("2d");c.drawImage(t,0,0);const h=c.getImageData(0,0,t.width,t.height),d=Pi.extractChannel(h,0),f=Pi.extractChannel(h,1),p=Pi.extractChannel(h,2);return n.globalCompositeOperation="screen",c.clearRect(0,0,t.width,t.height),c.putImageData(d,0,0),n.drawImage(u,a.x,a.y),c.clearRect(0,0,t.width,t.height),c.putImageData(f,0,0),n.drawImage(u,o.x,o.y),c.clearRect(0,0,t.width,t.height),c.putImageData(p,0,0),n.drawImage(u,l.x,l.y),n.globalCompositeOperation="source-over",e.canvas}catch(r){return console.warn("RGB shift glitch failed:",r),null}}applyDigitalDistortionGlitch(t){const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:n}=e;try{const r=n.getImageData(0,0,t.width,t.height),s=Pi.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),a=this.processDigitalDistortion(r,s);return n.clearRect(0,0,t.width,t.height),n.putImageData(a,0,0),e.canvas}catch(r){return console.warn("Digital distortion glitch failed:",r),null}}applyScanLineGlitch(t){const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:n}=e;try{const r=Pi.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),s=Math.max(2,Math.floor(10-8*r));n.globalCompositeOperation="multiply";for(let o=0;o<t.height;o+=s)if(Math.random()<r){const l=.1+.4*r;n.fillStyle=`rgba(0, 0, 0, ${l})`,n.fillRect(0,o,t.width,1)}n.globalCompositeOperation="screen";const a=Math.floor(20*r);for(let o=0;o<a;o++){const l=Math.random()*t.height,u=.3*r;n.fillStyle=`rgba(255, 255, 255, ${u})`,n.fillRect(0,Math.floor(l),t.width,1)}return n.globalCompositeOperation="source-over",e.canvas}catch(r){return console.warn("Scan line glitch failed:",r),null}}applyDataCorruptionGlitch(t){const e=this.createOutputCanvas(t);if(!e)return null;const{ctx:n}=e;try{const r=n.getImageData(0,0,t.width,t.height),s=Pi.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),a=this.processDataCorruption(r,s);return n.clearRect(0,0,t.width,t.height),n.putImageData(a,0,0),e.canvas}catch(r){return console.warn("Data corruption glitch failed:",r),null}}generateRandomOffset(t,e=1){return{x:(Math.random()-.5)*t,y:(Math.random()-.5)*t*e}}processDigitalDistortion(t,e){const{data:n,width:r,height:s}=t,a=new Uint8ClampedArray(n),o=Math.floor(20*e)+5,l=Math.floor(s/o);for(let c=0;c<o;c++)if(Math.random()<e){const h=c*l,d=Math.min(h+l,s),f=Math.floor((Math.random()-.5)*r*e*.1);this.shiftSliceHorizontal(a,r,s,h,d,f)}const u=.3*e;for(let c=0;c<n.length;c+=4)Math.random()<u&&(a[c]=255*Math.random(),a[c+1]=255*Math.random(),a[c+2]=255*Math.random());return new ImageData(a,r,s)}shiftSliceHorizontal(t,e,n,r,s,a){const o=new Uint8ClampedArray(4*e);for(let l=r;l<s;l++){const u=l*e*4;for(let c=0;c<4*e;c++)o[c]=t[u+c];for(let c=0;c<e;c++){const h=u+4*c,d=4*((c-a+e)%e);t[h]=o[d],t[h+1]=o[d+1],t[h+2]=o[d+2],t[h+3]=o[d+3]}}}processDataCorruption(t,e){const{data:n,width:r,height:s}=t,a=new Uint8ClampedArray(n),o=Math.floor(15*e)+5;for(let u=0;u<o;u++)if(Math.random()<e){const c=Math.floor(Math.random()*r),h=Math.floor(5*Math.random())+1,d=Math.random()<.5?0:255;for(let f=0;f<s;f++)for(let p=0;p<h&&c+p<r;p++){const g=4*(f*r+c+p);a[g]=d,a[g+1]=d,a[g+2]=d}}const l=Math.floor(20*e);for(let u=0;u<l;u++){const c=Math.floor(Math.random()*r),h=Math.floor(Math.random()*s),d=Math.floor(20*Math.random())+5,f=Math.floor(10*Math.random())+2;this.corruptBlock(a,r,s,c,h,d,f)}return new ImageData(a,r,s)}corruptBlock(t,e,n,r,s,a,o){for(let l=0;l<o&&s+l<n;l++)for(let u=0;u<a&&r+u<e;u++){const c=4*((s+l)*e+(r+u));Math.random()<.7&&(t[c]=255*Math.random(),t[c+1]=255*Math.random(),t[c+2]=255*Math.random())}}}class zVt extends yit{constructor(t,e,n,r,s){var a,o;super(t,e,n,r,s),this.blurConfig={blurRadius:((a=s?.options)===null||a===void 0?void 0:a.blurRadius)||8,useOptimizedBlur:((o=s?.options)===null||o===void 0?void 0:o.useOptimizedBlur)===void 0||s.options.useOptimizedBlur}}applyCSSBlur(t,e){const n=Qt.createCanvas({width:t.width,height:t.height,dpr:Qt.devicePixelRatio}),r=n.getContext("2d");return r?(r.filter=`blur(${e}px)`,r.drawImage(t,0,0),r.filter="none",n):t}applyDownsampleBlur(t,e){const{width:n,height:r}=t,s=Math.max(1,Math.floor(e/2)),a=Math.floor(n/s),o=Math.floor(r/s),l=Qt.createCanvas({width:a,height:o,dpr:1}),u=l.getContext("2d");if(!u)return t;const c=Qt.createCanvas({width:n,height:r,dpr:1}),h=c.getContext("2d");return h?(h.putImageData(t,0,0),u.drawImage(c,0,0,a,o),u.filter=`blur(${e/s}px)`,u.drawImage(l,0,0),u.filter="none",h.clearRect(0,0,n,r),h.drawImage(l,0,0,n,r),h.getImageData(0,0,n,r)):t}afterStageRender(t,e){if(this.blurConfig.blurRadius<=0)return e;let n;if(this.blurConfig.useOptimizedBlur)n=this.applyCSSBlur(e,this.blurConfig.blurRadius);else{const s=Qt.createCanvas({width:e.width,height:e.height,dpr:Qt.devicePixelRatio}),a=s.getContext("2d");if(!a)return!1;a.clearRect(0,0,e.width,e.height),a.drawImage(e,0,0);const o=a.getImageData(0,0,e.width,e.height),l=this.applyDownsampleBlur(o,this.blurConfig.blurRadius);a.putImageData(l,0,0),n=s}const r=n.getContext("2d");return r&&(r.globalCompositeOperation="overlay",r.fillStyle="rgba(255, 255, 255, 0.1)",r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="source-over"),n}}class NVt extends Hb{constructor(t,e,n,r,s){var a,o;super(t,e,n,r,s),this.pixelationConfig={maxPixelSize:((a=s?.options)===null||a===void 0?void 0:a.maxPixelSize)||20,method:((o=s?.options)===null||o===void 0?void 0:o.method)||"out"}}applyDownsamplePixelation(t,e){if(e<=1)return t;const{width:n,height:r}=t,s=Math.ceil(n/e),a=Math.ceil(r/e),o=Qt.createCanvas({width:s,height:a,dpr:1}),l=o.getContext("2d");if(!l)return t;const u=Qt.createCanvas({width:n,height:r,dpr:Qt.devicePixelRatio}),c=u.getContext("2d");return c?(l.imageSmoothingEnabled=!1,c.imageSmoothingEnabled=!1,l.drawImage(t,0,0,s,a),c.drawImage(o,0,0,n,r),u):t}updateAnimationProgress(){return this.pixelationConfig.method==="in"?this.pixelationConfig.maxPixelSize-this.currentAnimationRatio*(this.pixelationConfig.maxPixelSize-1):1+this.currentAnimationRatio*(this.pixelationConfig.maxPixelSize-1)}afterStageRender(t,e){const n=this.updateAnimationProgress();return n<=1?e:this.applyDownsamplePixelation(e,n)}}class jVt extends VM{onBind(){var t;const e=WM(this.target);this._animator=e;const n=this.duration,r=this.easing,{config:s,lastScale:a,getTickCoord:o}=this.params;let l=1;const u=this.target.data;if(a&&o&&u){l=.7;const c=o(a.scale(u.rawValue)),h=this.target.attribute.x,d=this.target.attribute.y;this.target.setAttributes({x:c.x,y:c.y}),e.animate(this.target,{type:"to",to:{x:h,y:d},duration:n,easing:r})}e.animate(this.target,{type:(t=s.type)!==null&&t!==void 0?t:"fadeIn",to:s.to,duration:n*l,easing:r}),this.completeBind(e)}}class HVt extends VM{onBind(){const t=WM(this.target);this._animator=t;const e=this.duration,n=this.easing,{config:r,diffAttrs:s}=this.params;t.animate(this.target,{type:"to",to:Object.assign({},s),duration:e,easing:n,customParameters:{diffAttrs:Object.assign({},s)}}),this.completeBind(t)}deleteSelfAttr(t){super.deleteSelfAttr(t),this._animator.deleteSelfAttr(t)}tryPreventConflict(){}}function VVt(){se.registerBuiltInAnimate("axisEnter",jVt),se.registerBuiltInAnimate("axisUpdate",HVt)}function Hit(){ln(),Jl(),yf(),eu(),VVt()}function WVt(){Hit(),tu()}function $Vt(){Hit(),c3t()}function UVt(){ln(),Nm()}function GVt(){ln(),Nm()}var jE=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};WVt();class co extends fit{constructor(t,e){var n;if(t.labelHoverOnAxis&&(t.labelHoverOnAxis.textStyle=Object.assign({},t.label.style,t.labelHoverOnAxis.textStyle),t.labelHoverOnAxis.space===void 0)){const{padding:r=2}=t.labelHoverOnAxis,s=zr(r),a=t.orient==="bottom"?s[0]:t.orient==="left"?s[1]:t.orient==="top"?s[2]:s[3],o=((n=t.label.space)!==null&&n!==void 0?n:co.defaultAttributes.label.space)-a;t.labelHoverOnAxis.space=o}super(e?.skipDefault?t:ot({},co.defaultAttributes,t),e),this.labelHoverOnAxisGroup=null}_renderInner(t){var e;if(this._breaks=null,this.attribute.breaks&&this.attribute.breaks.length){const s=[];for(let a=0;a<this.attribute.breaks.length;a++){const o=this.attribute.breaks[a],{range:l,breakSymbol:u,rawRange:c}=o;s.push({startPoint:this.getTickCoord(l[0]),endPoint:this.getTickCoord(l[1]),range:l,breakSymbol:u,rawRange:c})}this._breaks=s}super._renderInner(t),this._breaks&&this._breaks.length&&this._breaks.forEach((s,a)=>{const{startPoint:o,endPoint:l,breakSymbol:u,rawRange:c}=s;if(u?.visible!==!1){const h=Mt.group({zIndex:W3t});h.name=Cn.axisBreak,h.id=this._getNodeId(`${Cn.axisBreak}-${a}`),h.data=c;const d=X3t(u),f=Mt.symbol(Object.assign({x:o.x,y:o.y},d));f.name=Cn.axisBreakSymbol;const p=Mt.symbol(Object.assign({x:l.x,y:l.y},d));p.name=Cn.axisBreakSymbol,h.add(f),h.add(p),t.add(h)}});const{panel:n}=this.attribute;if(n&&n.visible){const s=this.axisContainer,a=s.AABBBounds,o=Mt.rect(Object.assign({x:a.x1,y:a.y1,width:a.width(),height:a.height()},n.style));o.name=Cn.background,o.id=this._getNodeId("background"),o.states=ot({},bl,(e=n.state)!==null&&e!==void 0?e:{}),s.insertBefore(o,s.firstChild)}const{labelHoverOnAxis:r}=this.attribute;r&&r.visible&&this.renderLabelHoverOnAxis()}renderLabelHoverOnAxis(){const t=this.getLabelHoverOnAxisAttribute(),e=new qo(Object.assign({},t));e.name=Cn.title,e.id=this._getNodeId("hover-on-label"),this.labelHoverOnAxisGroup=e,this.axisContainer.add(e)}renderLine(t){const{start:e,end:n,line:r}=this.attribute,s=r,{startSymbol:a,endSymbol:o,style:l,state:u}=s,c=jE(s,["startSymbol","endSymbol","style","state"]),h=Object.assign({startSymbol:a,endSymbol:o,lineStyle:l},c);if(this._breaks&&this._breaks.length){const f=[];let p=e;this._breaks.forEach(g=>{const{startPoint:m,endPoint:_}=g;f.push([p,m]),p=_}),f.push([p,n]),h.points=f,h.multiSegment=!0}else h.points=[e,n];Lt(u)||(h.state={line:ot({},bl,u),symbol:ot({},bl,u)});const d=new Zu(h);d.name=Cn.line,d.id=this._getNodeId("line"),t.add(d)}getTextAlign(t){let e="center";return sn(t[0],0)?sn(t[1],0)?Object.is(t[1],-0)?e="start":Object.is(t[0],-0)&&(e="end"):e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e}getTitleAttribute(){var t,e,n;const r=this.attribute.title,{position:s="middle",space:a=4,textStyle:o={},autoRotate:l=!0,shape:u,background:c,state:h={},maxWidth:d}=r,f=jE(r,["position","space","textStyle","autoRotate","shape","background","state","maxWidth"]);let p=.5;s==="start"?p=0:s==="end"&&(p=1);const{verticalFactor:g=1}=this.attribute,m=-1*g,_=this.getTickCoord(p),v=this.getRelativeVector();let y=0;if(!((t=this.attribute.label)===null||t===void 0)&&t.visible&&this.attribute.label.inside===!1){const P=+be(this.attribute,"label.space",4);y+=P;const O=Object.keys(this.axisLabelLayerSize).length;if(v[1]===0){const T=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0;isFinite(T)?y+=T+(O-1)*P:y=0}else if(v[0]===0)if(this.axisLabelsContainer&&this.axisLabelsContainer.AABBBounds&&!this.axisLabelsContainer.AABBBounds.empty()){const T=this.axisLabelLayerSize[0].labelPos,D=this.axisLabelsContainer.AABBBounds;y+=(m===1?D.x2>T?Math.min(D.x2-T,D.width()):0:D.x1<T?Math.min(T-D.x1,D.width()):0)+(O-1)*P}else y=0;else Object.keys(this.axisLabelLayerSize).forEach((T,D)=>{y+=this.axisLabelLayerSize[T].width+(D>0?P:0)})}let b=0;!((e=this.attribute.tick)===null||e===void 0)&&e.visible&&this.attribute.tick.inside===!1&&(b=this.attribute.tick.length||4),!((n=this.attribute.subTick)===null||n===void 0)&&n.visible&&this.attribute.subTick.inside===!1&&(b=Math.max(b,this.attribute.subTick.length||2));const x=b+y+a,S=this.getVerticalCoord(_,x,!1),w=this.getVerticalVector(x,!1,{x:0,y:0});let A,k,{angle:C}=f;if(A=s==="start"?"start":s==="end"?"end":"center",N(C)&&l){C=e4(v,[1,0],!0);const{verticalFactor:P=1}=this.attribute;k=-1*P===1?"bottom":"top"}else A=this.getTextAlign(w),k=this.getTextBaseline(w,!1);let M=d;if(N(M)){const{verticalLimitSize:P,verticalMinSize:O,orient:T}=this.attribute,D=Math.min(P||1/0,O||1/0);if(et(D))if(T==="bottom"||T==="top")if(C!==Math.PI/2){const B=Math.abs(Math.cos(C??0));M=B<1e-6?1/0:this.attribute.end.x/B}else M=D-x;else if(C&&C!==0){const B=Math.abs(Math.sin(C));M=B<1e-6?1/0:this.attribute.end.y/B}else M=D-x}const R=Object.assign(Object.assign(Object.assign({},S),f),{maxWidth:M,textStyle:Object.assign({textAlign:A,textBaseline:k},o),state:{text:ot({},bl,h.text),shape:ot({},bl,h.shape),panel:ot({},bl,h.background)}});return R.angle=C,u&&u.visible&&(R.shape=Object.assign({visible:!0},u.style),u.space&&(R.space=u.space)),c&&c.visible&&(R.panel=Object.assign({visible:!0},c.style)),R}getLabelHoverOnAxisAttribute(){var t,e;const{orient:n}=this.attribute,r=this.attribute.labelHoverOnAxis,{position:s=0,space:a=4,autoRotate:o=!0,textStyle:l={},background:u={},formatMethod:c,text:h="",maxWidth:d}=r,f=jE(r,["position","space","autoRotate","textStyle","background","formatMethod","text","maxWidth"]),p=this.getTickCoord(0);n==="bottom"||n==="top"?p.x=s:p.y=s;let g=0;!((t=this.attribute.tick)===null||t===void 0)&&t.visible&&this.attribute.tick.inside===!1&&(g=this.attribute.tick.length||4),!((e=this.attribute.subTick)===null||e===void 0)&&e.visible&&this.attribute.subTick.inside===!1&&(g=Math.max(g,this.attribute.subTick.length||2));const m=g+0+a,_=this.getVerticalCoord(p,m,!1),v=this.getVerticalVector(m,!1,{x:0,y:0});let y,{angle:b}=f,x="center";if(N(b)&&o){const k=this.getRelativeVector();b=e4(k,[1,0],!0);const{verticalFactor:C=1}=this.attribute;y=-1*C===1?"bottom":"top"}else{const{textAlign:k,textBaseline:C}=this.getLabelAlign(v,!1,l.angle);x=k,y=C}const S=d,w=c?c(h):h,A=Object.assign(Object.assign(Object.assign({},_),f),{maxWidth:S,textStyle:Object.assign({textAlign:x,textBaseline:y},l),text:w});return A.angle=b,u&&u.visible&&(A.panel=Object.assign(Object.assign({visible:!0},f.panel),u.style)),A}getTextBaseline(t,e){let n="middle";const{verticalFactor:r=1}=this.attribute,s=(e?1:-1)*r;return sn(t[1],0)?n=!sn(t[0],0)||Object.is(t[0],-0)||Object.is(t[1],-0)?"middle":s===1?"bottom":"top":t[1]>0?n="top":t[1]<0&&(n="bottom"),n}getLabelAlign(t,e,n){const r=this.attribute.orient;if(["top","bottom","right","left"].includes(r)||t[0]===0&&t[1]===0){if(r==="top"||r==="bottom")return git(e?r==="bottom"?"top":"bottom":r,n);if(r==="left"||r==="right")return mit(e?r==="left"?"right":"left":r,n)}return{textAlign:this.getTextAlign(t),textBaseline:this.getTextBaseline(t,e)}}beforeLabelsOverlap(t,e,n,r,s){var a,o,l,u;const{flush:c=!1}=this.attribute.label||{};if(c&&t.length){const{orient:h,start:d,end:f}=this.attribute,p=h==="bottom"||h==="top",g=t[0],m=ke(t),_=p?g.attribute.x>m.attribute.x:g.attribute.y<m.attribute.y;if(p){const v=_?m:g,y=_?g:m,b=d.x,x=f.x,S=v.AABBBounds.x1,w=y.AABBBounds.x2;S<b&&(v.attribute.angle?v.setAttributes({dx:((a=v.attribute.dx)!==null&&a!==void 0?a:0)+b-S}):v.setAttributes({x:b,textAlign:"left"})),w>x&&(y.attribute.angle?y.setAttributes({dx:((o=y.attribute.dx)!==null&&o!==void 0?o:0)+x-w}):y.setAttributes({x,textAlign:"right"}))}else{const v=_?m:g,y=_?g:m,b=v.AABBBounds.y2,x=y.AABBBounds.y1,S=d.y,w=f.y;x<S&&(y.attribute.angle?y.setAttributes({dy:((l=y.attribute.dy)!==null&&l!==void 0?l:0)+S-x}):y.setAttributes({y:S,textBaseline:"top"})),b>w&&(v.attribute.angle?v.setAttributes({dy:((u=v.attribute.dy)!==null&&u!==void 0?u:0)+w-b}):v.setAttributes({y:w,textBaseline:"bottom"}))}}}handleLabelsOverlap(t,e,n,r,s){if(Lt(t))return;const{verticalLimitSize:a,label:o,orient:l}=this.attribute,u=this._getAxisLabelLimitLength(a,s),{layoutFunc:c,autoRotate:h,autoRotateAngle:d,autoLimit:f,limitEllipsis:p,autoHide:g,autoHideMethod:m,autoHideSeparation:_,lastVisible:v,firstVisible:y,autoWrap:b,overflowLimitLength:x}=o;if(it(c))c(t,e,r,this);else{if(h)tHt(t,{labelRotateAngle:d,orient:l});else if(b){const S=Math.abs(l==="left"||l==="right"?this.attribute.start.y-this.attribute.end.y:this.attribute.start.x-this.attribute.end.x);oHt(t,{orient:l,limitLength:u,axisLength:S,ellipsis:p})}if(!b&&f&&et(u)&&u>0){const S=l==="left"||l==="right",w=Math.abs(S?this.attribute.start.y-this.attribute.end.y:this.attribute.start.x-this.attribute.end.x),A=S?w/t.length:g||h?1/0:w/t.length;aHt(t,{limitLength:u,verticalLimitLength:A,ellipsis:p,orient:l,axisLength:w,overflowLimitLength:x})}g&&pit(t,{method:m,separation:_,lastVisible:v,firstVisible:y})}}afterLabelsOverlap(t,e,n,r,s){const{verticalLimitSize:a,orient:o}=this.attribute,l=o==="bottom"||o==="top",u=n.AABBBounds;let c=l?u.height():u.width();const{verticalMinSize:h}=this.attribute;if(et(h)&&(!et(a)||h<=a)){const d=this._getAxisLabelLimitLength(h,s);let f,p;c=Math.max(c,d),o==="left"?(f=u.x2-c,p=u.y1):o==="right"?(f=u.x1,p=u.y1):o==="top"?(f=u.x1,p=u.y2-c):o==="bottom"&&(f=u.x1,p=u.y1);const g=Mt.rect({x:f,y:p,width:l?u.width():c,height:l?c:u.height(),pickable:!1});g.name=Cn.axisLabelBackground,g.id=this._getNodeId("axis-label-background"),n.insertBefore(g,n.firstChild)}if(L(this.attribute.label.containerAlign)){let d;o==="left"?d=u.x2-c:o==="right"?d=u.x1:o==="top"?d=u.y2-c:o==="bottom"&&(d=u.y1),lHt(t,d,c,o,this.attribute.label.containerAlign)}}_getAxisLabelLimitLength(t,e){var n,r,s,a,o;const{label:l,title:u,line:c,tick:h}=this.attribute,d=(n=l.space)!==null&&n!==void 0?n:4;let f=t,p=0,g=0;const m=c&&c.visible?(r=c.style.lineWidth)!==null&&r!==void 0?r:1:0,_=h&&h.visible?(s=h.length)!==null&&s!==void 0?s:4:0;if(u&&u.visible&&typeof u.text=="string"){p=LM(u.text,u.textStyle,(o=(a=this.stage)===null||a===void 0?void 0:a.getTheme())===null||o===void 0?void 0:o.text).height;const v=zr(u.padding);g=u.space+v[0]+v[2]}return f&&(f=(f-d-g-p-m-_)/e),f}showLabelHoverOnAxis(t,e,n=!0){if(this.attribute.labelHoverOnAxis){const r=this.axisContainer.AABBBounds,s=r.width(),a=r.height(),o=r.x1,l=r.y1,u=r.x2,c=r.y2;if(this.labelHoverOnAxisGroup){const{formatMethod:h}=this.attribute.labelHoverOnAxis,d=h?h(e):e;this.labelHoverOnAxisGroup.setAttribute("text",d),this.labelHoverOnAxisGroup.setAttribute("visible",!0),this.labelHoverOnAxisGroup.setAttribute("visibleAll",!0),this.attribute.orient==="left"||this.attribute.orient==="right"?this.labelHoverOnAxisGroup.setAttributes({y:t}):this.labelHoverOnAxisGroup.setAttributes({x:t})}else this.attribute.labelHoverOnAxis.visible=!0,this.attribute.labelHoverOnAxis.position=t,this.attribute.labelHoverOnAxis.text=e,this.renderLabelHoverOnAxis();if(n){const h=this.axisContainer.AABBBounds,d=h.width()-s,f=h.height()-a;d>0&&(this.attribute.orient==="top"||this.attribute.orient==="bottom")&&(h.x1<o?this.showLabelHoverOnAxis(t+d,e,!1):h.x2>u&&this.showLabelHoverOnAxis(t-d,e,!1)),f>0&&(this.attribute.orient==="left"||this.attribute.orient==="right")&&(h.y1<l?this.showLabelHoverOnAxis(t+f,e,!1):h.y2>c&&this.showLabelHoverOnAxis(t-f,e,!1))}}}hideLabelHoverOnAxis(){this.attribute.labelHoverOnAxis&&this.labelHoverOnAxisGroup&&this.labelHoverOnAxisGroup.setAttributes({visible:!1,visibleAll:!1})}release(){super.release(),this._breaks=null}}co.defaultAttributes=ek,Be(co,_it);class Vit{isInValidValue(t){const{startAngle:e=tm,endAngle:n=em}=this.attribute;return Math.abs(n-e)%(2*Math.PI)==0?t>1:t<0||t>1}getTickCoord(t){const{startAngle:e=tm,endAngle:n=em,center:r,radius:s,inside:a=!1,innerRadius:o=0}=this.attribute;return yi(r,a&&o>0?o:s,e+(n-e)*t)}getVerticalVector(t,e=!1,n){return $I(t,n,this.attribute.center,e,this.attribute.inside)}getRelativeVector(t){const{center:e}=this.attribute;return[t.y-e.y,-1*(t.x-e.x)]}}function Wit(i,t){const e=i.length;return{prevLabel:t>=1?i[t-1]:i[e-1],nextLabel:t<e-1?i[t+1]:i[0]}}function R_(i,t,e){var n;i.setAttributes({maxLineWidth:t,ellipsis:(n=i.attribute.ellipsis)!==null&&n!==void 0?n:e})}function m4(i,t,e){const n=[];if(i.length>=3){const{prevLabel:a,nextLabel:o}=Wit(i,t);n.push(a,o)}else i.length===2&&n.push(i[t===0?1:0]);const r=i[t];let s=Math.min(Math.abs(r.attribute.y-e.y1),Math.abs(r.attribute.y-e.y2));n.forEach(a=>{s=Math.min(s,Math.abs(a.attribute.y-r.attribute.y))}),s>0&&r.setAttributes({whiteSpace:"normal",heightLimit:s})}function YVt(i,t){const{ellipsis:e,inside:n,bounds:r,autoWrap:s,center:a}=t;n||i.forEach((o,l)=>{const{x:u,y:c}=o.attribute,h=o.AABBBounds;if(sn(u,a.x)){if(c>r.y2||c<r.y1)return void R_(o,0,e);const d=r.x2-r.x1;if(i.length>=3){const{prevLabel:f,nextLabel:p}=Wit(i,l);let g=f.attribute.x,m=p.attribute.x;g>m&&(g=p.attribute.x,m=f.attribute.x);const _=g===m?d:u>=g&&u<=m?m-g:Math.min(Math.abs(g-u),Math.abs(m-u));o.AABBBounds.width()>_&&R_(o,_,e)}else o.AABBBounds.width()>d&&R_(o,d,e)}else u>a.x&&h.x2>r.x2?(R_(o,r.x2-u,e),s&&m4(i,l,r)):u<a.x&&h.x1<r.x1&&(R_(o,u-r.x1,e),s&&m4(i,l,r))})}var XVt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};$Vt();class nm extends fit{constructor(t,e){super(e?.skipDefault?t:ot({},nm.defaultAttributes,t))}renderLine(t){const{startAngle:e=tm,endAngle:n=em,radius:r,center:s,innerRadius:a=0,line:o={},inside:l=!1,sides:u}=this.attribute;let c,h=r,d=a;if(l&&a>0&&(h=a,d=0),et(u)&&u>=3){const f=lit(s,u,h,e,n);c=Mt.path(Object.assign(Object.assign({},o.style),{path:hd(f,!0)}))}else{const f=Object.assign(Object.assign(Object.assign({},s),{startAngle:e,endAngle:n,radius:h,innerRadius:d}),o.style);c=Mt.circle(f)}c.name=Cn.line,c.id=this._getNodeId("line"),Lt(o.state)||(c.states=ot({},bl,o.state)),t.add(c)}getTitleAttribute(){var t,e,n;const{center:r,radius:s,innerRadius:a=0}=this.attribute,o=this.attribute.title,{space:l=4,textStyle:u={},shape:c,background:h,state:d={}}=o,f=XVt(o,["space","textStyle","shape","background","state"]);let p=r,g=0;!((t=this.attribute.label)===null||t===void 0)&&t.visible&&this.attribute.label.inside===!1&&(g=be(this.attribute.label,"style.fontSize",12)+be(this.attribute.label,"space",4));let m=0;!((e=this.attribute.tick)===null||e===void 0)&&e.visible&&this.attribute.tick.inside===!1&&(m=this.attribute.tick.length||4),!((n=this.attribute.subTick)===null||n===void 0)&&n.visible&&this.attribute.subTick.inside===!1&&(m=Math.max(m,this.attribute.subTick.length||2));const _=s+m+g+l;let v="middle",{position:y}=this.attribute.title;N(y)&&(y=a===0?"end":"middle"),y==="start"?(v="bottom",p={x:r.x,y:r.y-_}):y==="end"&&(v="top",p={x:r.x,y:r.y+_});const b=Object.assign(Object.assign(Object.assign({},p),f),{textStyle:Object.assign({textBaseline:v,textAlign:"center"},u),state:{text:ot({},bl,d.text),shape:ot({},bl,d.shape),panel:ot({},bl,d.background)}}),{angle:x}=f;return b.angle=x,c&&c.visible&&(b.shape=Object.assign({visible:!0},c.style),c.space&&(b.space=c.space)),h&&h.visible&&(b.panel=Object.assign({visible:!0},h.style)),b}getSubTickLineItems(){var t,e;const{subTick:n}=this.attribute,r=[],{count:s=4,inside:a=!1,length:o=2}=n,l=this.tickLineItems,u=l.length;if(u>=2){const c=this.data[1].value-this.data[0].value,h=(e=(t=this.attribute)===null||t===void 0?void 0:t.tick)===null||e===void 0?void 0:e.alignWithLabel;for(let d=0;d<u;d++){const f=l[d],p=l[d+1];for(let g=0;g<s;g++){const m=(g+1)/(s+1),_=(1-m)*f.value+m*(p?p.value:h?1:f.value+c),v=this.getTickCoord(_),y=this.getVerticalCoord(v,o,a);r.push({start:v,end:y,value:_})}}}return r}beforeLabelsOverlap(t,e,n,r,s){}handleLabelsOverlap(t,e,n,r,s){if(Lt(t))return;const{inside:a,radius:o,center:l,size:u,label:c,orient:h}=this.attribute,d=u?{x1:0,y1:0,x2:u.width,y2:u.height}:{x1:l.x-o,y1:l.y-o,x2:l.x+o,y2:l.y+o},{layoutFunc:f,autoLimit:p,limitEllipsis:g,autoHide:m,autoHideMethod:_,autoHideSeparation:v,autoWrap:y}=c;it(f)?f(t,e,r,this):((p||y)&&YVt(t,{inside:a,autoWrap:y,bounds:d,ellipsis:g,center:l}),m&&pit(t,{method:_,separation:v}))}afterLabelsOverlap(t,e,n,r,s){}getTextBaseline(t){return Math.abs(t[1]/t[0])<.3?"middle":t[1]<0?"bottom":t[1]>0?"top":"middle"}getLabelAlign(t,e,n){return sn(t[0],0)?{textAlign:"center",textBaseline:t[1]>0?"top":"bottom"}:t[0]<0?{textAlign:"right",textBaseline:this.getTextBaseline(t)}:t[0]>0?{textAlign:"left",textBaseline:this.getTextBaseline(t)}:{textAlign:"center",textBaseline:"middle"}}getLabelPosition(t,e,n,r){return t}}nm.defaultAttributes=ek,Be(nm,Vit);const Vu=i=>i.map((t,e)=>({index:e,value:t})),_4=(i,t,e=0)=>{const n=new Gi(i).expand(e/2),r=new Gi(t).expand(e/2);return n.intersects(r)},v4=12,TS=(i,t,e,n)=>e<i?Math.max(i-t/2,e):e>i?Math.min(i-t/2,e-t):e<n?e:e-t,GI=(i,t,e)=>{var n,r,s;const{labelStyle:a,axisOrientType:o,labelFlush:l,labelFormatter:u,startAngle:c=0}=e;let h=(n=a.angle)!==null&&n!==void 0?n:0;a.direction==="vertical"&&(h+=ii(90));const d=["bottom","top"].includes(o),f=["left","right"].includes(o);let p=1,g=0;d||(f?(p=0,g=1):c&&(p=Math.cos(c),g=-Math.sin(c)));const m=bg(a),_=i.range();let v=[];for(let y=0;y<t.length;y++){const b=t[y],x=u?u(b):`${b}`;if(no(x)){v=void 0;break}const{width:S,height:w}=m.quickMeasure(x),A=Math.max(S,12),k=Math.max(w,12),C=i.scale(b),M=p*C,R=g*C;let P,O,T=M,D=R;l&&d&&y===0?T=TS(M,A,_[0],_[_.length-1]):l&&d&&y===t.length-1?T=TS(M,A,_[_.length-1],_[0]):P=(r=a.textAlign)!==null&&r!==void 0?r:"center",P==="right"?T-=A:P==="center"&&(T-=A/2),l&&f&&y===0?D=TS(R,k,_[0],_[_.length-1]):l&&f&&y===t.length-1?D=TS(R,k,_[_.length-1],_[0]):O=(s=a.textBaseline)!==null&&s!==void 0?s:"middle",O==="bottom"?D-=k:O==="middle"&&(D-=k/2);const B=new Gi().set(T,D,T+A,D+k);h&&B.rotate(h,M,R),v.push(B)}return v},KVt=i=>["bottom","top","z"].includes(i);var Tn;(function(i){i.Identity="identity",i.Linear="linear",i.Log="log",i.Pow="pow",i.Sqrt="sqrt",i.Symlog="symlog",i.Time="time",i.Quantile="quantile",i.Quantize="quantize",i.Threshold="threshold",i.Ordinal="ordinal",i.Point="point",i.Band="band"})(Tn||(Tn={}));const $it={};Object.values(Tn).forEach(i=>{$it[i]=!0});function Ge(i){switch(i){case Tn.Linear:case Tn.Log:case Tn.Pow:case Tn.Sqrt:case Tn.Symlog:case Tn.Time:return!0;default:return!1}}function YI(i){return!!$it[i]}function Nr(i){switch(i){case Tn.Ordinal:case Tn.Point:case Tn.Band:return!0;default:return!1}}function ap(i){return i}const qVt=i=>i<0?-Math.sqrt(-i):Math.sqrt(i),ZVt=i=>i<0?-i*i:i*i,QVt=i=>-Math.log(-i),JVt=i=>-Math.exp(-i),tWt=i=>isFinite(i)?Math.pow(10,i):i<0?0:i,y4=i=>i===10?tWt:i===Math.E?Math.exp:t=>Math.pow(i,t),b4=i=>i===Math.E?Math.log:i===10?Math.log10:i===2?Math.log2:(i=Math.log(i),t=>Math.log(t)/i),x4=i=>t=>Math.sign(t)*Math.log1p(Math.abs(t/i)),S4=i=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*i;function XI(i,t){if(i=Number(i),t=Number(t),t-=i)return n=>(n-i)/t;const e=Number.isNaN(t)?NaN:.5;return()=>e}function w4(i,t,e){const n=i[0],r=i[1],s=t[0],a=t[1];let o,l;return r<n?(o=XI(r,n),l=e(a,s)):(o=XI(n,r),l=e(s,a)),u=>l(o(u))}function qF(i,t,e){let n;return n=i===1?i+2*e:i-t+2*e,i?n>0?n:1:0}function KI(i,t,e,n){return e===1&&(e=0),qF(i,e,n)*(t/(1-e))}function eWt(i,t,e,n,r){const s=qF(i,e,n);let a=t/Math.max(1,s||1);r&&(a=Math.floor(a));let o=a*(1-e);return r&&(o=Math.round(o)),o}function Uit(i,t){const e=(i[1]-i[0])/(t[1]-t[0]),n=i[0]-e*t[0];return[n,e+n]}function iWt(i,t,e){const n=Math.min(i.length,t.length)-1,r=new Array(n),s=new Array(n);let a=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),t=t.slice().reverse());++a<n;)r[a]=XI(i[a],i[a+1]),s[a]=e(t[a],t[a+1]);return function(o){const l=cJ(i,o,1,n)-1;return s[l](r[l](o))}}const nWt=(i,t)=>{const e=i.slice();let n=0,r=e.length-1,s=e[n],a=e[r];return a<s&&([n,r]=[r,n],[s,a]=[a,s]),e[n]=t.floor(s),e[r]=t.ceil(a),e},Git=(i,t=!1)=>{const e=Math.floor(Math.log10(i)),n=i/Math.pow(10,e);let r;return r=t?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10,r*Math.pow(10,e)},rWt=(i,t)=>{let e,n;return t[0]<t[1]?(e=t[0],n=t[1]):(e=t[1],n=t[0]),Math.min(Math.max(i,e),n)};class Yit{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(t){return this._wholeRange?this._wholeRange:L(this._rangeFactorStart)&&L(this._rangeFactorEnd)&&t.length===2?(this._wholeRange=Uit(t,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):t}rangeFactor(t,e,n){return t?(t.length===2&&t.every(r=>r>=0&&r<=1)&&(this._wholeRange=null,t[0]===0&&t[1]===1?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t[0],this._rangeFactorEnd=t[1])),this):n?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):L(this._rangeFactorStart)&&L(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(t,e){var n;return N(t)?this._rangeFactorStart:(t>=0&&t<=1&&(this._wholeRange=null,t!==0||!N(this._rangeFactorEnd)&&this._rangeFactorEnd!==1?(this._rangeFactorStart=t,this._rangeFactorEnd=(n=this._rangeFactorEnd)!==null&&n!==void 0?n:1):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}rangeFactorEnd(t,e){var n;return N(t)?this._rangeFactorEnd:(t>=0&&t<=1&&(this._wholeRange=null,t!==0||!N(this._rangeFactorStart)&&this._rangeFactorStart!==0?(this._rangeFactorEnd=t,this._rangeFactorStart=(n=this._rangeFactorStart)!==null&&n!==void 0?n:0):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}generateFishEyeTransform(){var t;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);const{distortion:e=2,radiusRatio:n=.1,radius:r}=this._fishEyeOptions,s=this.range(),a=s[0],o=s[s.length-1],l=Math.min(a,o),u=Math.max(a,o),c=Ke((t=this._fishEyeOptions.focus)!==null&&t!==void 0?t:0,l,u),h=N(r)?(u-l)*n:r;let d=Math.exp(e);d=d/(d-1)*h;const f=e/h;this._fishEyeTransform=p=>{const g=Math.abs(p-c);if(g>=h)return p;if(g<=1e-6)return c;const m=d*(1-Math.exp(-g*f))/g*.75+.25;return c+(p-c)*m}}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}get(t,e){var n;return(n=this==null?void 0:this[t])!==null&&n!==void 0?n:e}}const qI=Symbol("implicit");class tf extends Yit{specified(t){var e;return t?(this._specified=Object.assign((e=this._specified)!==null&&e!==void 0?e:{},t),this):Object.assign({},this._specified)}_getSpecifiedValue(t){if(this._specified)return this._specified[t]}constructor(){super(),this.type=Tn.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=qI}clone(){const t=new tf().domain(this._domain).range(this._ordinalRange).unknown(this._unknown);return this._specified&&t.specified(this._specified),t}calculateVisibleDomain(t){return L(this._rangeFactorStart)&&L(this._rangeFactorEnd)&&t.length===2?[this.invert(t[0]),this.invert(t[1])]:this._domain}scale(t){const e=`${t}`,n=this._getSpecifiedValue(e);if(n!==void 0)return n;let r=this._index.get(e);if(!r){if(this._unknown!==qI)return this._unknown;r=this._domain.push(t),this._index.set(e,r)}const s=this._ordinalRange[(r-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(s):s}invert(t){let e=0;for(;e<this._ordinalRange.length&&this._ordinalRange[e]!==t;)e++;return this._domain[(e-1)%this._domain.length]}domain(t){if(!t)return this._domain.slice();this._domain=[],this._index=new Map;for(const e of t){const n=`${e}`;this._index.has(n)||this._index.set(n,this._domain.push(e))}return this}range(t){if(!t)return this._ordinalRange.slice();const e=Array.from(t);return this._ordinalRange=e,this}index(t){var e;return this._index&&(e=this._index.get(`${t}`))!==null&&e!==void 0?e:-1}}function Xit(i,t,e,n){const r=[];let s=i;for(;s<=t;)r.push(s),s+=e;return n&&r.reverse(),r}function A4(i,t,e,n){let r,s;if(t=Math.floor(+t),i=Math.floor(+i),!(e=Math.floor(+e)))return[];if(i===t)return[i];if(r=t<i){const o=i;i=t,t=o}let a=jg(1,t-i+1)(e);if(s=Math.floor((t-i+1)/a),!n)for(;Math.ceil((t-i+1)/s)>e&&a>1;)a-=1,s=Math.floor((t-i)/a);return Xit(i,t,s,r)}function sWt(i,t,e){let n;if(t=Math.floor(+t),i=Math.floor(+i),e=jg(1,t-i+1)(Math.floor(+e)),n=t<i){const r=i;i=t,t=r}return Xit(i,t,e,n)}class xf extends tf{constructor(t){super(),this.type=Tn.Band,this._range=[0,1],this._step=void 0,this._bandwidth=void 0,this._isFixed=!1,this._round=!1,this._paddingInner=0,this._paddingOuter=0,this._align=.5,this._unknown=void 0,delete this.unknown,this.rescale(t)}rescale(t,e){if(t)return this;this._wholeRange=null;const n=this._calculateWholeRange(this._range,e),r=super.domain().length,s=n[1]<n[0];let a=n[Number(s)-0];const o=n[1-Number(s)],l=qF(r,this._paddingInner,this._paddingOuter);return this._step=(o-a)/Math.max(1,l||1),this._round&&(this._step=Math.floor(this._step)),a+=(o-a-this._step*(r-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(a=Math.round(a),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={reverse:s,start:s?Ke(a+this._step*(r-1),n[1],n[0]):Ke(a,n[0],n[1]),min:s?n[1]:n[0],max:o,count:r},this.generateFishEyeTransform(),this}scale(t){if(!this._bandRangeState)return;const e=`${t}`,n=this._getSpecifiedValue(e);if(n!==void 0)return n;let r=this._index.get(e);if(!r){if(this._unknown!==qI)return this._unknown;r=this._domain.push(t),this._index.set(e,r)}const{count:s,start:a,reverse:o,min:l,max:u}=this._bandRangeState,c=a+(o?-1:1)*((r-1)%s)*this._step;return Ke(this._fishEyeTransform?this._fishEyeTransform(c):c,l,u)}_calculateWholeRange(t,e){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){let n;if(L(this._rangeFactorStart)&&L(this._rangeFactorEnd)&&t.length===2){const s=Uit(t,[this._rangeFactorStart,this._rangeFactorEnd]);n=Math.abs(s[1]-s[0])}else n=Math.abs(t[1]-t[0]);const r=eWt(super.domain().length,n,this._paddingInner,this._paddingOuter,this._round);r<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):r>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=r,this._isFixed=!1)}if(this.isBandwidthFixed()){const n=KI(super.domain().length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(t[1]-t[0]),r=Math.min((t[1]-t[0])/n,1);if(L(this._rangeFactorStart)&&L(this._rangeFactorEnd)){const s=this._rangeFactorStart+r<=1,a=this._rangeFactorEnd-r>=0;if(e==="rangeFactorStart"&&s?this._rangeFactorEnd=this._rangeFactorStart+r:e==="rangeFactorEnd"&&a?this._rangeFactorStart=this._rangeFactorEnd-r:t[0]<=t[1]?s?this._rangeFactorEnd=this._rangeFactorStart+r:a?this._rangeFactorStart=this._rangeFactorEnd-r:(this._rangeFactorStart=0,this._rangeFactorEnd=r):a?this._rangeFactorStart=this._rangeFactorEnd-r:s?this._rangeFactorEnd=this._rangeFactorStart+r:(this._rangeFactorStart=1-r,this._rangeFactorEnd=1),n>0){const o=t[0]-n*this._rangeFactorStart,l=o+n;this._wholeRange=[o,l]}else{const o=t[1]+n*(1-this._rangeFactorEnd),l=o-n;this._wholeRange=[l,o]}}else this._rangeFactorStart=0,this._rangeFactorEnd=r,this._wholeRange=[t[0],t[0]+n];return this._wholeRange}return super._calculateWholeRange(t)}calculateWholeRangeSize(){const t=this._calculateWholeRange(this._range);return Math.abs(t[1]-t[0])}calculateVisibleDomain(t){const e=this._domain;if(L(this._rangeFactorStart)&&L(this._rangeFactorEnd)&&e.length){const n=this._getInvertIndex(t[0]),r=this._getInvertIndex(t[1]);return e.slice(Math.min(n,r),Math.max(n,r)+1)}return e}domain(t,e){return t?(super.domain(t),this.rescale(e)):super.domain()}range(t,e){return t?(this._range=[Lc(t[0]),Lc(t[1])],this.rescale(e)):this._range}rangeRound(t,e){return this._range=[Lc(t[0]),Lc(t[1])],this._round=!0,this.rescale(e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return t===-1?e:A4(0,e.length-1,t,!1).map(n=>e[n])}tickData(t=10){return this.ticks(t).map((e,n)=>({index:n,tick:e,value:(this.scale(e)-this._range[0]+this._bandwidth/2)/(this._range[1]-this._range[0])}))}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return A4(0,e.length-1,t,!0).filter(n=>n<e.length).map(n=>e[n])}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return sWt(0,e.length-1,t).map(n=>e[n])}_getInvertIndex(t){let e=0;const n=this.step()/2,r=this.bandwidth()/2,s=this._domain.length,a=this.range(),o=a[0]>a[a.length-1];for(e=0;e<s;e++){const l=this.scale(this._domain[e])+r;if(e===0&&(!o&&!pu(t,l+n)||o&&!fl(t,l-n))||e===s-1||!fl(t,l-n)&&!pu(t,l+n))break}return e>=0&&e<=s-1?e:s-1}invert(t){return this._domain[this._getInvertIndex(t)]}padding(t,e){return t!==void 0?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(t)?Math.min.apply(null,t):t)),this._paddingInner=this._paddingOuter,this.rescale(e)):this._paddingInner}paddingInner(t,e){return t!==void 0?(this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingInner}paddingOuter(t,e){return t!==void 0?(this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingOuter}step(){return this._step}round(t,e){return t!==void 0?(this._round=t,this.rescale(e)):this._round}align(t,e){return t!==void 0?(this._align=Math.max(0,Math.min(1,t)),this.rescale(e)):this._align}rangeFactor(t,e){return t?(super.rangeFactor(t),this.rescale(e)):super.rangeFactor()}rangeFactorStart(t,e){return N(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this.rescale(e,"rangeFactorStart"))}rangeFactorEnd(t,e){return N(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this.rescale(e,"rangeFactorEnd"))}bandwidth(t,e){return t?(t==="auto"?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=t,this._isFixed=!0),this._userBandwidth=t,this.rescale(e)):this._bandwidth}maxBandwidth(t,e){return t?(this._maxBandwidth=t==="auto"?void 0:t,this.rescale(e)):this._maxBandwidth}minBandwidth(t,e){return t?(this._minBandwidth=t==="auto"?void 0:t,this.rescale(e)):this._minBandwidth}fishEye(t,e,n){return t||n?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}isBandwidthFixed(){return this._isFixed&&!!this._bandwidth}_isBandwidthFixedByUser(){return this._isFixed&&this._userBandwidth&&yt(this._userBandwidth)}clone(){var t,e,n;return new xf(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth((t=this._userBandwidth)!==null&&t!==void 0?t:"auto",!0).maxBandwidth((e=this._maxBandwidth)!==null&&e!==void 0?e:"auto",!0).minBandwidth((n=this._maxBandwidth)!==null&&n!==void 0?n:"auto")}}const{interpolateRgb:HE}=pEt;function aWt(i,t){const e=typeof t;let n;if(N(t)||e==="boolean")return()=>t;if(e==="number")return l1(i,t);if(e==="string"){if(n=Mn.parseColorString(t)){const r=HE(Mn.parseColorString(i),n);return s=>r(s).formatRgb()}return l1(Number(i),Number(t))}return t instanceof ps?HE(i,t):t instanceof Mn?HE(i.color,t.color):t instanceof Date?FPt(i,t):l1(Number(i),Number(t))}class Kit extends Yit{constructor(t=ap,e=ap){super(),this._unknown=void 0,this.transformer=t,this.untransformer=e,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=ap,this._piecewise=w4,this._interpolate=aWt}calculateVisibleDomain(t){var e;return L(this._rangeFactorStart)&&L(this._rangeFactorEnd)&&t.length===2?[this.invert(t[0]),this.invert(t[1])]:(e=this._niceDomain)!==null&&e!==void 0?e:this._domain}fishEye(t,e,n){return t||n?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}scale(t){var e;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise(((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const n=this._output(this.transformer(this._clamp(t)));return this._fishEyeTransform?this._fishEyeTransform(n):n}invert(t){var e;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this.transformer),l1)),this._clamp(this.untransformer(this._input(t)))}domain(t,e){var n;if(!t)return((n=this._niceDomain)!==null&&n!==void 0?n:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;const r=Array.from(t,Lc);return this._domain=r,this.rescale(e)}range(t,e){if(!t)return this._range.slice();const n=Array.from(t);return this._range=n,this.rescale(e)}rangeRound(t,e){const n=Array.from(t);return this._range=n,this._interpolate=BPt,this.rescale(e)}rescale(t){var e;if(t)return this;const n=(e=this._niceDomain)!==null&&e!==void 0?e:this._domain,r=n.length,s=this._range.length;let a=Math.min(r,s);if(r&&r<s&&this._forceAlign){const o=s-r+1,l=n[r-1],u=r>=2?(l-n[r-2])/o:0;for(let c=1;c<=o;c++)n[r-2+c]=l-u*(o-c);a=s}return this._autoClamp&&(this._clamp=jg(n[0],n[a-1])),this._piecewise=a>2?iWt:w4,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(t,e,n){return arguments.length?(e?(this._autoClamp=!1,this._clamp=e):(this._autoClamp=!!t,this._clamp=t?void 0:ap),this.rescale(n)):this._clamp!==ap}interpolate(t,e){return arguments.length?(this._interpolate=t,this.rescale(e)):this._interpolate}ticks(t=10){return[]}tickData(t=10){const e=this.ticks(t);return(e??[]).map((n,r)=>({index:r,tick:n,value:(this.scale(n)-this._range[0])/(this._range[1]-this._range[0])}))}rangeFactor(t,e){return t?(super.rangeFactor(t),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(t,e){return N(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this._output=this._input=null,this)}rangeFactorEnd(t,e){return N(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this._output=this._input=null,this)}forceAlignDomainRange(t){return arguments.length?(this._forceAlign=t,this):this._forceAlign}}const oWt=Math.sqrt(50),lWt=Math.sqrt(10),uWt=Math.sqrt(2),PS=[1,2,5,10],k4=(i,t,e)=>{let n=1,r=i;const s=Math.floor((t-1)/2),a=Math.abs(i);return i>=0&&i<=Number.MIN_VALUE?r=0:i<0&&i>=-Number.MIN_VALUE?r=-(t-1):!e&&a<1?n=qit(a).step:(e||a>1)&&(r=Math.floor(i)-s*n),n>0?(i>0?r=Math.max(r,0):i<0&&(r=Math.min(r,-(t-1)*n)),lJ(0,t).map(o=>r+o*n)):i>0?nk(0,-(t-1)/n,n):nk((t-1)/n,0,n)},cWt=Tb((i,t,e,n)=>{let r,s,a,o,l=-1;if(e=+e,(i=+i)==(t=+t))return[i];if(Math.abs(i-t)<=Number.MIN_VALUE&&e>0)return[i];if((r=t<i)&&(s=i,i=t,t=s),o=ZF(i,t,e).step,!isFinite(o))return[];if(o>0){let u=Math.round(i/o),c=Math.round(t/o);for(u*o<i&&++u,c*o>t&&--c,a=new Array(s=c-u+1);++l<s;)a[l]=(u+l)*o}else if(o<0&&n?.noDecimals){o=1;const u=Math.ceil(i),c=Math.floor(t);if(!(u<=c))return[];for(a=new Array(s=c-u+1);++l<s;)a[l]=u+l}else{o=-o;let u=Math.round(i*o),c=Math.round(t*o);for(u/o<i&&++u,c/o>t&&--c,a=new Array(s=c-u+1);++l<s;)a[l]=(u+l)/o}return r&&a.reverse(),a}),nk=(i,t,e)=>{let n,r,s=-1;if(e>0){let a=Math.floor(i/e),o=Math.ceil(t/e);for((a+1)*e<i&&++a,(o-1)*e>t&&--o,r=new Array(n=o-a+1);++s<n;)r[s]=(a+s)*e}else{e=-e;let a=Math.floor(i*e),o=Math.ceil(t*e);for((a+1)/e<i&&++a,(o-1)/e>t&&--o,r=new Array(n=o-a+1);++s<n;)r[s]=(a+s)/e}return r},hWt=(i,t,e)=>{let n;const r=i[0],s=i[i.length-1],a=t-i.length;if(s<=0){const u=[];for(n=a;n>=1;n--)u.push(r-n*e);return u.concat(i)}if(r>=0){for(n=1;n<=a;n++)i.push(s+n*e);return i}let o=[];const l=[];for(n=1;n<=a;n++)n%2==0?o=[r-Math.floor(n/2)*e].concat(o):l.push(s+Math.ceil(n/2)*e);return o.concat(i).concat(l)},rk=Tb((i,t,e,n)=>{let r,s,a;if(e=+e,(i=+i)==(t=+t)||Math.abs(i-t)<=Number.MIN_VALUE&&e>0)return k4(i,e,n?.noDecimals);(r=t<i)&&(a=i,i=t,t=a);const o=ZF(i,t,e);let l=o.step;if(!isFinite(l))return[];if(l>0){let u=1;const{power:c,gap:h}=o,d=h===10?2*10**c:1*10**c;for(;u<=5&&(s=nk(i,t,l),s.length>e+1)&&e>2;)l+=d,u+=1;e>2&&s.length<e-1&&(s=hWt(s,e,l))}else n?.noDecimals&&l<0&&(l=1),s=nk(i,t,l);return r&&s.reverse(),s}),qit=i=>{const t=Math.floor(Math.log(i)/Math.LN10),e=i/10**t;let n=PS[0];return e>=oWt?n=PS[3]:e>=lWt?n=PS[2]:e>=uWt&&(n=PS[1]),t>=0?{step:n*10**t,gap:n,power:t}:{step:-(10**-t)/n,gap:n,power:t}};function ZF(i,t,e){const n=(t-i)/Math.max(0,e);return qit(n)}function Zit(i,t,e){let n;if(e=+e,(i=+i)==(t=+t)&&e>0)return[i];if(e<=0||(n=dWt(i,t,e))===0||!isFinite(n))return[];const r=new Array(e);for(let s=0;s<e;s++)r[s]=i+s*n;return r}function dWt(i,t,e){return(t-i)/Math.max(1,e-1)}function fWt(i,t,e){let n,r,s=-1;if(e=+e,(r=(t=+t)<(i=+i))&&(n=i,i=t,t=n),!isFinite(e)||t-i<=e)return[i];const a=Math.floor((t-i)/e+1),o=new Array(a);for(;++s<a;)o[s]=i+s*e;return r&&o.reverse(),o}function VE(i,t=10){let e,n,r=0,s=i.length-1,a=i[r],o=i[s],l=10;for(o<a&&(n=a,a=o,o=n,n=r,r=s,s=n);l-- >0;){if(n=ZF(a,o,t).step,n===e)return i[r]=a,i[s]=o,i;if(n>0)a=Math.floor(a/n)*n,o=Math.ceil(o/n)*n;else{if(!(n<0))break;a=Math.ceil(a*n)/n,o=Math.floor(o*n)/n}e=n}}function Qit(i,t){const e=yt(t.forceMin),n=yt(t.forceMax);let r=null;const s=[];let a=null;const o=e&&n?l=>l>=t.forceMin&&l<=t.forceMax:e?l=>l>=t.forceMin:n?l=>l<=t.forceMax:null;return e?s[0]=t.forceMin:yt(t.min)&&t.min<=Math.min(i[0],i[i.length-1])&&(s[0]=t.min),n?s[1]=t.forceMax:yt(t.max)&&t.max>=Math.max(i[0],i[i.length-1])&&(s[1]=t.max),yt(s[0])&&yt(s[1])?(a=i.slice(),a[0]=s[0],a[a.length-1]=s[1]):r=yt(s[0])||yt(s[1])?yt(s[0])?"max":"min":"all",{niceType:r,niceDomain:a,niceMinMax:s,domainValidator:o}}const WE=(i,t,e)=>Math.abs(t-i)<1?+e.toFixed(1):Math.round(+e),Jit=Tb((i,t,e,n,r,s,a)=>{let o=i,l=t;const u=l<o;u&&([o,l]=[l,o]);let c,h,d=r(o),f=r(l),p=[];if(!(n%1)&&f-d<e){if(d=Math.floor(d),f=Math.ceil(f),o>0){for(;d<=f;++d)for(c=1;c<n;++c)if(h=d<0?c/s(-d):c*s(d),!(h<o)){if(h>l)break;p.push(h)}}else for(;d<=f;++d)for(c=n-1;c>=1;--c)if(h=d>0?c/s(-d):c*s(d),!(h<o)){if(h>l)break;p.push(h)}2*p.length<e&&(p=rk(o,l,e))}else p=rk(d,f,Math.min(f-d,e)).map(s);return p=p.filter(g=>g!==0),a?.noDecimals&&(p=Array.from(new Set(p.map(g=>Math.floor(g))))),u?p.reverse():p}),tnt=Tb((i,t,e,n,r,s)=>{const a=[],o={},l=r(i),u=r(t);let c=[];if(Number.isInteger(n))c=rk(l,u,e);else{const h=(u-l)/(e-1);for(let d=0;d<e;d++)c.push(l+d*h)}return c.forEach(h=>{const d=s(h),f=Number.isInteger(n)?WE(i,t,d):WE(i,t,Git(d)),p=WE(i,t,rWt(f,[i,t]));!o[p]&&!isNaN(p)&&c.length>1&&(o[p]=1,a.push(p))}),a}),sk=Tb((i,t,e,n,r)=>Zit(n(i),n(t),e).map(s=>Git(r(s))));class vs extends Kit{constructor(){super(...arguments),this.type=Tn.Linear}clone(){var t;const e=new vs;return e.domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate),this._niceType&&(e._niceType=this._niceType,e._domainValidator=this._domainValidator,e._niceDomain=(t=this._niceDomain)===null||t===void 0?void 0:t.slice()),e}tickFormat(){return()=>{}}d3Ticks(t=10,e){const n=this.calculateVisibleDomain(this._range);return cWt(n[0],n[n.length-1],t,e)}ticks(t=10,e){var n;if(it(e?.customTicks))return e.customTicks(this,t);if(L(this._rangeFactorStart)&&L(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&this._range.length===2||!this._niceType)return this.d3Ticks(t,e);const r=(n=this._niceDomain)!==null&&n!==void 0?n:this._domain,s=this._domain,a=r[0],o=r[r.length-1];let l=rk(s[0],s[s.length-1],t,e);if(!l.length)return l;if(this._domainValidator)l=l.filter(this._domainValidator);else if((l[0]!==a||l[l.length-1]!==o)&&this._niceType){const u=r.slice();if(this._niceType==="all"?(u[0]=l[0],u[u.length-1]=l[l.length-1],this._niceDomain=u,this.rescale()):this._niceType==="min"&&l[0]!==a?(u[0]=l[0],this._niceDomain=u,this.rescale()):this._niceType==="max"&&l[l.length-1]!==o&&(u[u.length-1]=l[l.length-1],this._niceDomain=u,this.rescale()),this._niceType!=="all"){const c=Math.min(u[0],u[u.length-1]),h=Math.max(u[0],u[u.length-1]);l=l.filter(d=>d>=c&&d<=h)}}return l}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return Zit(e[0],e[e.length-1],t)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return fWt(e[0],e[e.length-1],t)}nice(t=10,e){var n,r;const s=this._domain;let a=[];if(e){const o=Qit(s,e);if(a=o.niceMinMax,this._domainValidator=o.domainValidator,this._niceType=o.niceType,o.niceDomain)return this._niceDomain=o.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){const o=VE(s.slice(),t);this._niceType==="min"?o[o.length-1]=(n=a[1])!==null&&n!==void 0?n:o[o.length-1]:this._niceType==="max"&&(o[0]=(r=a[0])!==null&&r!==void 0?r:o[0]),this._niceDomain=o,this.rescale()}return this}niceMin(t=10){this._niceType="min";const e=this._domain[this._domain.length-1],n=VE(this.domain(),t);return n&&(n[n.length-1]=e,this._niceDomain=n,this.rescale()),this}niceMax(t=10){this._niceType="max";const e=this._domain[0],n=VE(this._domain.slice(),t);return n&&(n[0]=e,this._niceDomain=n,this.rescale()),this}}class ent{nice(t=10,e){var n,r,s,a;const o=this._domain;let l=[],u=null;if(e){const c=Qit(o,e);if(l=c.niceMinMax,this._domainValidator=c.domainValidator,u=c.niceType,c.niceDomain)return this._niceDomain=c.niceDomain,this.rescale(),this}else u="all";if(u){const c=nWt(o.slice(),(r=(n=this.getNiceConfig)===null||n===void 0?void 0:n.call(this))!==null&&r!==void 0?r:{floor:h=>Math.floor(h),ceil:h=>Math.ceil(h)});return u==="min"?c[c.length-1]=(s=l[1])!==null&&s!==void 0?s:c[c.length-1]:u==="max"&&(c[0]=(a=l[0])!==null&&a!==void 0?a:c[0]),this._niceDomain=c,this.rescale(),this}return this}niceMin(){const t=this._domain[this._domain.length-1];this.nice();const e=this._domain.slice();return this._domain&&(e[e.length-1]=t,this._niceDomain=e,this.rescale()),this}niceMax(){const t=this._domain[0];this.nice();const e=this._domain.slice();return this._domain&&(e[0]=t,this._niceDomain=e,this.rescale()),this}}function C4(i){return t=>-i(-t)}function M4(i=Number.EPSILON){return t=>Math.max(t,i)}function pWt(i=Number.EPSILON){return t=>Math.min(t,-i)}class $M extends Kit{constructor(){super(b4(10),y4(10)),this.type=Tn.Log,this._limit=M4(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return new $M().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(t){var e;if(t)return this;super.rescale();const n=b4(this._base),r=y4(this._base);return((e=this._niceDomain)!==null&&e!==void 0?e:this._domain)[0]<0?(this._logs=C4(n),this._pows=C4(r),this._limit=pWt(),this.transformer=QVt,this.untransformer=JVt):(this._logs=n,this._pows=r,this._limit=M4(),this.transformer=this._logs,this.untransformer=r),this}scale(t){var e;if(t=Number(t),Number.isNaN(t)||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise(((e=this._niceDomain)!==null&&e!==void 0?e:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));const n=this._output(this.transformer(this._limit(this._clamp(t))));return this._fishEyeTransform?this._fishEyeTransform(n):n}base(t,e){return arguments.length?(this._base=t,this.rescale(e)):this._base}tickFormat(){return ap}d3Ticks(t=10,e){const n=this.domain(),r=this._limit(n[0]),s=this._limit(n[n.length-1]);return Jit(r,s,t,this._base,this.transformer,this.untransformer,e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return tnt(this._limit(e[0]),this._limit(e[e.length-1]),t,this._base,this.transformer,this.untransformer)}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return sk(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return sk(this._limit(e[0]),this._limit(e[e.length-1]),t,this.transformer,this.untransformer)}getNiceConfig(){return{floor:t=>this._pows(Math.floor(this._logs(this._limit(t)))),ceil:t=>Math.abs(t)>=1?Math.ceil(t):this._pows(Math.ceil(this._logs(this._limit(t))))}}}Be($M,ent);class gWt extends xf{constructor(t){super(!1),this.type=Tn.Point,this._padding=0,this.paddingInner(1,t),this.padding=this.paddingOuter,this.paddingInner=void 0,this.paddingOuter=void 0}}class ak extends vs{constructor(){super(qVt,ZVt),this.type=Tn.Sqrt}clone(){return new ak().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}}class UM extends vs{constructor(){super(x4(1),S4(1)),this.type=Tn.Symlog,this._const=1}clone(){return new UM().domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).constant(this._const)}constant(t,e){return arguments.length?(this._const=t,this.transformer=x4(t),this.untransformer=S4(t),this.rescale(e)):this._const}d3Ticks(t=10,e){const n=this.domain(),r=n[0],s=n[n.length-1];return Jit(r,s,t,this._const,this.transformer,this.untransformer,e)}ticks(t=10){const e=this.calculateVisibleDomain(this._range);return tnt(e[0],e[e.length-1],t,this._const,this.transformer,this.untransformer)}forceTicks(t=10){const e=this.calculateVisibleDomain(this._range);return sk(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){const e=this.calculateVisibleDomain(this._range);return sk(e[0],e[e.length-1],t,this.transformer,this.untransformer)}}Be(UM,ent);class QF{constructor(){this.type=Tn.Threshold,this._range=[0,1],this._domain=[.5],this.n=1}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}scale(t){return!N(t)&&et(+t)?this._range[cJ(this._domain,t,0,this.n)]:this._unknown}invertExtent(t){const e=this._range.indexOf(t);return[this._domain[e-1],this._domain[e]]}domain(t){return t?(this._domain=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._domain.slice()}range(t){return t?(this._range=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._range.slice()}clone(){return new QF().domain(this._domain).range(this._range).unknown(this._unknown)}}function $E(i,t,e,n){let r;const{breakData:s}=i;if(s&&s()){const{breakDomains:a}=s(),o=t.domain();r=[];for(let l=0;l<o.length-1;l++)n(e,[o[l],o[l+1]]).forEach(u=>{a.some(c=>u>=c[0]&&u<=c[1])||r.push(u)});t.domain(o)}else r=n(e);return r}function T4(i,t,e,n,r=!1){if(e&&!t.includes(i)){let s=t.length;if(s>1){r?t.push(i):t.unshift(i);for(let a=0;a<s;a++){const o=r?s-1-a:a;if(!n(t[o]))break;t.splice(o,1),a--,s--}}}}const Vb=(i,t)=>{var e,n,r,s;if(!Ge(i.type))return Vu(i.domain());const a=i.range(),o=Math.abs(a[a.length-1]-a[0]);if(o<2)return Vu([i.domain()[0]]);const{tickCount:l,forceTickCount:u,tickStep:c,noDecimals:h=!1,labelStyle:d,breakData:f}=t;let p;if(L(c))g=i.stepTicks(c),m=f&&f()?f().breakDomains:null,p=m&&m.length?g.filter(v=>m.every(y=>v<y[0]||v>y[1])):g;else if(L(u))p=$E(t,i,u,(v,y)=>y&&y.length?i.domain(y,!0).forceTicks(v):i.forceTicks(v));else if(t.tickMode==="d3"){const v=(e=it(l)?l({axisLength:o,labelStyle:d}):l)!==null&&e!==void 0?e:5;p=$E(t,i,v,(y,b)=>b&&b.length?i.domain(b,!0).d3Ticks(y,{noDecimals:h}):i.d3Ticks(y,{noDecimals:h}))}else{const v=(n=it(l)?l({axisLength:o,labelStyle:d}):l)!==null&&n!==void 0?n:5,y=it(t.tickMode)?t.tickMode:void 0;p=$E(t,i,v,(b,x)=>x&&x.length?i.domain(x,!0).ticks(b,{noDecimals:h,customTicks:y}):i.ticks(b,{noDecimals:h,customTicks:y}))}var g,m;const _=i.domain();if(t.labelFirstVisible&&_[0]!==p[0]&&!p.includes(_[0])&&p.unshift(_[0]),t.labelLastVisible&&_[_.length-1]!==p[p.length-1]&&!p.includes(_[_.length-1])&&p.push(_[_.length-1]),t.sampling&&p.length>1&&(t.coordinateType==="cartesian"||t.coordinateType==="polar"&&t.axisOrientType==="radius")){const{labelGap:v=4,labelFlush:y}=t,b=6;let x;if(p.length*b>o){const S=[],w=Math.floor(p.length*b/o);p.forEach((A,k)=>{k%w!=0&&k!==p.length-1||S.push(A)}),x=(r=GI(i,S,t))===null||r===void 0?void 0:r.map((A,k)=>({AABBBounds:A,value:S[k]}))}else x=(s=GI(i,p,t))===null||s===void 0?void 0:s.map((S,w)=>({AABBBounds:S,value:p[w]}));if(x){const S=x[0],w=ke(x),A=f&&f()?P4.greedy:P4.parity;for(;x.length>=3&&UI(x,v);)x=A(x,v);const k=t.labelFirstVisible;let C=t.labelLastVisible;Ho(S,w,v)&&x.includes(w)&&x.length>1&&k&&C&&(x.splice(x.indexOf(w),1),C=!1),T4(S,x,k,R=>Ho(R,S,v)),T4(w,x,C,R=>Ho(R,w,v)||!(!k||R===S)&&Ho(R,S,v),!0);const M=x.map(R=>R.value);M.length<3&&y&&(M.length>1&&M.pop(),ke(M)!==ke(p)&&M.push(ke(p))),p=M}}return Vu(p)},P4={parity:function(i){return i.filter((t,e)=>e%2==0)},greedy:function(i,t){let e;return i.filter((n,r)=>(!r||!Ho(e,n,t))&&(e=n,!0))}},E4=(i,t,e,n)=>{const r=GI(i,t,e);return r&&r.map(s=>n?[s.x1,s.x2,s.width()]:[s.y1,s.y2,s.height()])},R4=(i,t,e=0)=>Math.max(i[0],t[0])-e/2<=Math.min(i[1],t[1])+e/2,O4=(i,t)=>i[1]<t[0]?t[0]-i[1]:t[1]<i[0]?i[0]-t[1]:0,mWt=(i,t)=>{var e;const n=i.domain();if(!n.length)return[];const{tickCount:r,forceTickCount:s,tickStep:a,labelGap:o=4,axisOrientType:l,labelStyle:u}=t,c=KVt(l),h=i.range(),d=i.calculateWholeRangeSize();if(d<2)return t.labelLastVisible?Vu([n[n.length-1]]):Vu([n[0]]);let f;if(L(a))f=i.stepTicks(a);else if(L(s))f=i.forceTicks(s);else if(L(r)){const p=it(r)?r({axisLength:d,labelStyle:u}):r;f=i.ticks(p)}else if(t.sampling){const p=((e=t.labelStyle.fontSize)!==null&&e!==void 0?e:12)+2,g=Rn(h),m=rn(h);if(n.length<=d/p){const _=E4(i,n,t,c);if(_){const v=Math.min(..._.map(x=>x[2])),y=(m-g)/n.length,b=_Wt(n,_,o,t.labelLastVisible,Math.floor(v/y));f=i.stepTicks(b.step),t.labelLastVisible&&(b.delCount&&(f=f.slice(0,f.length-b.delCount)),f.push(n[n.length-1]))}}else{const _=[n[0],n[Math.floor(n.length/2)],n[n.length-1]],v=E4(i,_,t,c);if(v){let y=null;v.forEach(x=>{y?y[2]<x[2]&&(y=x):y=x});const b=m-g-o>0?Math.ceil(n.length*(o+y[2])/(m-g-o)):n.length-1;f=i.stepTicks(b),!t.labelLastVisible||f.length&&f[f.length-1]===n[n.length-1]||(f.length&&Math.abs(i.scale(f[f.length-1])-i.scale(n[n.length-1]))<y[2]&&(f=f.slice(0,-1)),f.push(n[n.length-1]))}}}return N(f)&&(f=i.domain()),Vu(f)},_Wt=(i,t,e,n,r,s)=>{let a=0,o=0,l=-1,u=Number.MAX_VALUE;const c=f=>{let p=!0,g=0;do g+f<i.length&&R4(t[g],t[g+f],e)&&(p=!1),g+=f;while(p&&g<i.length);return p},h=hJ(r,i.length,f=>c(f)?1:-1);let d=h;do if(d>h&&!c(d))d++;else{if(!n){o=d;break}{const f=i.length-1;let p,g=0;p=i.length%d>0?i.length-i.length%d+d:i.length;do{if(p-=d,p!==f&&!R4(t[p],t[f],e))break;g++}while(p>0);if(p===f){o=d,a=g;break}{const m=Math.floor(i.length/d)-g+1;if(m<l)break;{l=m;const _=O4(t[p],t[f]),v=p-d>=0?O4(t[p-d],t[p]):_,y=Math.abs(_-v);if(y<u&&(u=y,o=d,a=g),_<=v)break}}}d++}while(d<=i.length);return{step:o,delCount:a}},vWt=(i,t,e)=>{var n;const{labelStyle:r,getRadius:s,labelOffset:a,labelFormatter:o,inside:l}=e,u=s?.(),c=(n=r.angle)!==null&&n!==void 0?n:0,h=bg(r);return t.map(d=>{const f=o?o(d):`${d}`,{width:p,height:g}=h.quickMeasure(f),m=Math.max(p,v4),_=Math.max(g,v4),v=i.scale(d),y={x:0,y:0};let b=0,x=0;const S={align:r.textAlign,baseline:r.textBaseline},{x:w,y:A}=q3t(v,y,u,a,l);return S.align||(sn(w,y.x)?S.baseline||(S.baseline=A>y.y?"top":"bottom"):w>y.x?S.align="left":w<y.x&&(S.align="right")),b=w+(S.align==="right"?-m:S.align==="left"?0:-m/2),x=A+(S.baseline==="bottom"?-_:S.baseline==="top"?0:-_/2),new Gi().set(b,x,b+m,x+_).rotate(c,b+m/2,x+_/2)})},yWt=(i,t)=>{const{tickCount:e,forceTickCount:n,tickStep:r,getRadius:s,labelOffset:a,labelGap:o=0,labelStyle:l}=t,u=s?.();if(!u||u<=0)return Vu(i.domain());let c;if(L(r))c=i.stepTicks(r);else if(L(n))c=i.forceTicks(n);else if(L(e)){const h=i.range(),d=Math.abs(h[h.length-1]-h[0]),f=it(e)?e({axisLength:d,labelStyle:l}):e;c=i.ticks(f)}else if(t.sampling){const h=i.domain(),d=i.range(),f=vWt(i,h,t),p=Rn(d),g=rn(d),m=Math.abs(g-p)*(u+a)/h.length,{step:_,delCount:v}=bWt(h,f,o,Math.floor(f.reduce((y,b)=>Math.min(y,b.width(),b.height()),Number.MAX_VALUE)/m));c=i.stepTicks(_),c=c.slice(0,c.length-v)}else c=i.domain();return Vu(c)},bWt=(i,t,e,n)=>{let r=n;do{let a=!0;r++;let o=0;do o+r<i.length&&_4(t[o],t[o+r],e)&&(a=!1),o+=r;while(a&&o<i.length);if(a)break}while(r<=i.length);let s=0;if(i.length>2){let a=i.length-i.length%r;for(a>=i.length&&(a-=r);a>0&&_4(t[0],t[a]);)s++,a-=r}return{step:r,delCount:s}},wc=new Uint32Array(33),Eo=new Uint32Array(33);Eo[0]=0,wc[0]=~Eo[0];for(let i=1;i<=32;++i)Eo[i]=Eo[i-1]<<1|1,wc[i]=~Eo[i];function xWt(i,t){const e=new Uint32Array(~~((i*t+32)/32));function n(s,a){e[s]|=a}function r(s,a){e[s]&=a}return{array:e,get:(s,a)=>{const o=a*i+s;return e[o>>>5]&1<<(31&o)},set:(s,a)=>{const o=a*i+s;n(o>>>5,1<<(31&o))},clear:(s,a)=>{const o=a*i+s;r(o>>>5,~(1<<(31&o)))},getRange:({x1:s,y1:a,x2:o,y2:l})=>{if(o<0||l<0||s>i||a>t)return!0;let u,c,h,d,f=l;for(;f>=a;--f)if(u=f*i+s,c=f*i+o,h=u>>>5,d=c>>>5,h===d){if(e[h]&wc[31&u]&Eo[1+(31&c)])return!0}else{if(e[h]&wc[31&u]||e[d]&Eo[1+(31&c)])return!0;for(let p=h+1;p<d;++p)if(e[p])return!0}return!1},setRange:({x1:s,y1:a,x2:o,y2:l})=>{if(o<0||l<0||s>i||a>t)return;let u,c,h,d,f;for(;a<=l;++a)if(u=a*i+s,c=a*i+o,h=u>>>5,d=c>>>5,h===d)n(h,wc[31&u]&Eo[1+(31&c)]);else for(n(h,wc[31&u]),n(d,Eo[1+(31&c)]),f=h+1;f<d;++f)n(f,4294967295)},clearRange:({x1:s,y1:a,x2:o,y2:l})=>{let u,c,h,d,f;for(;a<=l;++a)if(u=a*i+s,c=a*i+o,h=u>>>5,d=c>>>5,h===d)r(h,Eo[31&u]|wc[1+(31&c)]);else for(r(h,Eo[31&u]),r(d,wc[1+(31&c)]),f=h+1;f<d;++f)r(f,0)},outOfBounds:({x1:s,y1:a,x2:o,y2:l})=>s<0||a<0||l>=t||o>=i,toImageData:s=>{const a=s.createImageData(i,t),o=a.data;for(let l=0;l<t;++l)for(let u=0;u<i;++u){const c=l*i+u,h=4*c,d=e[c>>>5]&1<<(31&c);o[h+0]=255*d,o[h+1]=255*d,o[h+2]=255*d,o[h+3]=31}return a}}}function int(i,t,e={top:0,left:0,right:0,bottom:0}){const{top:n=0,left:r=0,right:s=0,bottom:a=0}=e,o=Math.max(1,Math.sqrt(i*t/1e6)),l=~~((i+r+s+o)/o),u=~~((t+n+a+o)/o),c=h=>~~(h/o);return c.bitmap=()=>xWt(l,u),c.x=h=>~~((h+r)/o),c.y=h=>~~((h+n)/o),c.ratio=o,c.padding=e,c.width=i,c.height=t,c}function nnt(i,t){const{x1:e,x2:n,y1:r,y2:s}=t,{top:a=0,left:o=0,right:l=0,bottom:u=0}=i.padding,c=Ke(e,-o,i.width+l),h=Ke(n,-o,i.width+l),d=Ke(r,-a,i.height+u),f=Ke(s,-a,i.height+u);return{x1:i.x(c),x2:i.x(h),y1:i.y(d),y2:i.y(f)}}function gl(i,t,e=!1){return e?nnt(i,t):{x1:i.x(t.x1),x2:i.x(t.x2),y1:i.y(t.y1),y2:i.y(t.y2)}}function rv(i,t,e,n=!0,r=0){let s=e;r>0&&(s={x1:e.x1-r,x2:e.x2+r,y1:e.y1-r,y2:e.y2+r}),s=gl(i,s);const a=t.outOfBounds(s);return(!n||!a)&&(a&&(s=nnt(i,s)),!t.getRange(s))}function UE(i,t,e,n=[],r=!0,s=0,a=!1){var o,l,u,c;const h=n.filter(_=>L(_)),d=(o=e.attribute.x)!==null&&o!==void 0?o:0,f=(l=e.attribute.y)!==null&&l!==void 0?l:0,p=e.AABBBounds,g={x1:p.x1,x2:p.x2,y1:p.y1,y2:p.y2};let m;for(let _=0;_<h.length;_++){const v=h[_];m=v;const y=((u=v.x)!==null&&u!==void 0?u:d)-d,b=((c=v.y)!==null&&c!==void 0?c:f)-f;if(g.x1=p.x1+y,g.x2=p.x2+y,g.y1=p.y1+b,g.y2=p.y2+b,rv(i,t,g,r,s))return t.setRange(gl(i,g,!0)),v}return a&&m&&e.setAttributes(m),!1}function SWt(i,t,e,n,r,s,a){var o,l;const u=(o=n.overlap)===null||o===void 0?void 0:o.clampForce,c=(l=n.overlap)===null||l===void 0?void 0:l.overlapPadding;if(e.type==="bound"||e.type==="position"){if(it(a)){const h=((it(e.position)?e.position(r.attribute):e.position)||kWt(n.type)).map(f=>a(r.AABBBounds,s,f,n.offset)),d=e.restorePosition===!1;return UE(i,t,r,h,u,c,d)}return!1}if(e.type==="moveY"){const h=(e.offset?it(e.offset)?e.offset(r.attribute):e.offset:[]).map(d=>({x:r.attribute.x,y:r.attribute.y+d}));return UE(i,t,r,h,u,c)}if(e.type==="moveX"){const h=(e.offset?it(e.offset)?e.offset(r.attribute):e.offset:[]).map(d=>({x:r.attribute.x+d,y:r.attribute.y}));return UE(i,t,r,h,u,c)}return!1}const wWt=["top","bottom","right","left","top-right","bottom-right","top-left","bottom-left"],AWt=["top","inside-top","inside"];function kWt(i){return i==="rect"?AWt:wWt}function GE(i,t,e,n={}){const{x1:r,x2:s,y1:a,y2:o}=i.AABBBounds,{top:l=0,left:u=0,right:c=0,bottom:h=0}=n,d=Math.min(r,s),f=Math.max(r,s),p=Math.min(a,o),g=Math.max(a,o),m=t+c,_=e+h;let v=0,y=0;return d<0-u?v=-d:f>m&&(v=m-f),p<0-l?y=-p:g>_&&(y=_-g),{dx:v,dy:y}}const CWt={mode:"same-time",duration:300,easing:"linear"};function Nh(i){return i===3||i===4}function MWt(i){return i===1||i===2}function TWt(i,t,e,n,r,s){if(i===0&&t===0||s<=0)return[];if(i===0){const d=-e/t,f=s**2-(d-r)**2;return f<0?[]:f===0?[{x:n,y:d}]:[{x:Math.sqrt(f)+n,y:d},{x:-Math.sqrt(f)+n,y:d}]}if(t===0){const d=-e/i,f=s**2-(d-n)**2;return f<0?[]:f===0?[{x:d,y:r}]:[{x:d,y:Math.sqrt(f)+r},{x:d,y:-Math.sqrt(f)+r}]}const a=(t/i)**2+1,o=2*((e/i+n)*(t/i)-r),l=o**2-4*a*((e/i+n)**2+r**2-s**2);if(l<0)return[];const u=(-o+Math.sqrt(l))/(2*a),c=(-o-Math.sqrt(l))/(2*a),h=-(t*u+e)/i;return l===0?[{x:h,y:u}]:[{x:h,y:u},{x:-(t*c+e)/i,y:c}]}function PWt(i,t){return t>2*i?NaN:2*Math.asin(t/2/i)}function EWt(i,t){const{x1:e,y1:n,x2:r,y2:s}=i,{x1:a,y1:o,x2:l,y2:u}=t;return!(e<=a&&r<=a||e>=l&&r>=l||n<=o&&s<=o||n>=u&&s>=u)}const RWt=(i,t,e="top",n=0)=>{if(!i)return;const{x1:r,y1:s,x2:a,y2:o}=i,l=Math.abs(a-r),u=Math.abs(o-s),c=(t.x1+t.x2)/2,h=(t.y1+t.y2)/2;let d=0,f=0,p=0,g=0;t&&(p=Math.abs(t.x1-t.x2)/2,g=Math.abs(t.y1-t.y2)/2);const m={"top-right":-235,"top-left":235,"bottom-right":45,"bottom-left":-45};switch(e){case"top":f=-1;break;case"bottom":f=1;break;case"left":d=-1;break;case"right":d=1;break;case"bottom-left":case"bottom-right":case"top-left":case"top-right":d=Math.sin(m[e]*(Math.PI/180)),f=Math.cos(m[e]*(Math.PI/180));break;case"center":d=0,f=0}return{x:c+d*(n+p)+Math.sign(d)*(l/2),y:h+f*(n+g)+Math.sign(f)*(u/2)}},OWt=i=>{if(!i||!i.attribute)return[];const{points:t,segments:e}=i.attribute;if(e&&e.length){const n=[];return e.forEach(r=>{r.points.forEach(s=>{n.push(s)})}),n}return t};function DWt(i,t,e="end",n=0){if(!i||!t)return{x:1/0,y:1/0};const{x1:r,x2:s}=i,a=Math.abs(s-r),o=t.x1;let l=o;return e==="end"?l=o+a/2+n:e==="start"&&(l=o-a/2-n),{x:l,y:t.y1}}function IWt(i,t){if(!i||!t||i0(i,t,!0))return;const e=Math.min(i.x1,i.x2),n=Math.min(i.y1,i.y2),r=Math.min(t.x1,t.x2),s=Math.min(t.y1,t.y2),a=Math.abs(i.x2-e)/2,o=Math.abs(i.y2-n)/2,l=Math.abs(t.x2-r)/2,u=Math.abs(t.y2-s)/2,c=e+a,h=n+o,d=r+l,f=s+u,p=d-c,g=f-h;return[D4(p,g,c,h,a,o),D4(-p,-g,d,f,l,u)]}function D4(i,t,e,n,r,s){return Math.abs(t/i)<s/r?{x:e+(i>0?r:-r),y:n+t*r/Math.abs(i)}:{x:e+i*s/Math.abs(t),y:n+(t>0?s:-s)}}function LWt(i){return i==="left"?0:i==="right"?1:.5}var BWt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class FWt extends VM{onBind(){const t=WM(this.target);this._animator=t;const e=this.duration,n=this.easing,{prevText:r,curText:s,prevLabelLine:a,curLabelLine:o,increaseEffect:l=!0}=this.params,u={};for(const d in s.attribute)r.attribute[d]!==s.attribute[d]&&(u[d]=s.attribute[d]);const{text:c}=u,h=BWt(u,["text"]);t.animate(r,{type:"to",to:h,duration:e,easing:n}),l!==!1&&t.animate(r,{type:"increaseCount",to:{text:s.attribute.text},duration:e,easing:n}),a&&t.animate(a,{type:"to",to:o.attribute,duration:e,easing:n}),this.completeBind(t)}tryPreventConflict(){}}class zWt extends VM{onBind(){const t=WM(this.target);this._animator=t;const e=this.duration,n=this.easing,{relatedGraphic:r,relatedGraphics:s,config:a}=this.params,{mode:o,type:l="fadeIn"}=a,u=this.target;let c=0;o==="after"?r.animates&&r.animates.forEach(h=>{c=Math.max(c,h.getStartTime()+h.getTotalDuration())}):o==="after-all"?s&&s.forEach(h=>{h.animates&&h.animates.forEach(d=>{c=Math.max(c,d.getStartTime()+d.getTotalDuration())})}):r.animates&&r.animates.forEach(h=>{c=Math.max(c,h.getStartTime())}),t.animate(u,Object.assign(Object.assign({},a),{duration:e,easing:n,startTime:c,type:l})),this.completeBind(t)}tryPreventConflict(){}}function NWt(){se.registerBuiltInAnimate("increaseCount",bHt),se.registerBuiltInAnimate("labelUpdate",FWt),se.registerBuiltInAnimate("labelEnter",zWt)}function jWt(){ln(),eu(),yf(),Jl(),NWt()}const I4=(i,t)=>Math.ceil(i)>Math.floor(t),HWt=([i,t],[e,n])=>n>i&&t>e;function VWt(i,t){const[e,n]=i,[r,s]=t,a=Math.max(e,r),o=Math.min(n,s);return Math.max(0,o-a)}function WWt(i,t){const{maxY:e=Number.MAX_VALUE,labelling:n,globalShiftY:r={enable:!0,maxIterations:10,maxError:.1,padding:1}}=t,s=i.length;if(s<=1)return i;const a=new Map,o=new Map,l=x=>o.get(x).y1Initial,u=x=>o.get(x).height,c=x=>o.get(x).y1,h=x=>o.get(x).x,d=x=>o.get(x).x1,f=x=>o.get(x).x2,p=x=>o.get(x).attempts,g=(x,S)=>{o.get(x).y1=S},m=(x,S)=>{o.get(x).attempts=S};function _(x){for(let w=x.length-1;w>=0;w--){const A=x[w],k=x[w-1],C=x[w+1];if(k&&I4(c(k)+u(k),c(A))||c(A)===0&&A._isClamped){const{y:M}=n(A);C&&I4(M+u(A)/2,c(C))||M+u(A)/2<=e&&g(A,c(A)+M-(S=A,o.get(S).y))}}var S}i.sort((x,S)=>x.attribute.x-S.attribute.x);for(const x of i){const{y1:S,y2:w,x1:A,x2:k}=x.AABBBounds,{x:C,y:M}=x.attribute;o.set(x,{y1Initial:S,y1:S,y2:w,y:M,height:w-S,x1:A,x2:k,x:C,attempts:0});let R=!1;for(const[P,O]of a){const{start:T,end:D}=P;if(A>=T&&k<=D)O.push(x),R=!0;else if(sn(C,h(O[0]),void 0,5)){const B={start:Math.min(T,A),end:Math.max(D,k)};O.push(x),a.set(B,O),a.delete(P),R=!0}else if(VWt([T,D],[A,k])/(D-T)>.5){const B={start:Math.min(T,A),end:Math.max(D,k)};O.push(x),a.set(B,O),a.delete(P),R=!0}if(R)break}R||a.set({start:A,end:k},[x])}for(const x of a.values())x.sort((S,w)=>l(S)-l(w)),_(x);if(r.enable!==!1){const{maxIterations:x=10,maxError:S=.1,padding:w=1,maxAttempts:A=1e3,deltaYTolerance:k=Number.MAX_VALUE}=r;for(let C=0;C<x;C++){i.sort((R,P)=>l(R)-l(P));let M=0;for(let R=0;R<s-1;R++){const P=i[R];if(p(P)>=A)continue;let O,T=R+1;for(;(O=i[T])&&!HWt([d(P),f(P)],[d(O),f(O)]);)T+=1;if(O){const D=c(P),B=u(P),I=c(O),F=I-(D+B);if(F<w){const j=(w-F)/2;if(M=Math.max(M,j),D+j+u(O)>e){const H=D-(w-F),U=l(P)-H;Math.abs(U)<=k&&(g(P,H),m(P,p(P)+1))}else if(D-j<0){const H=I+(w-F),U=l(O)-H;Math.abs(U)<=k&&(g(O,H),m(O,p(O)+1))}else{const H=D-j,U=l(P)-H,K=I+j,q=l(O)-K;Math.abs(U)<=k&&Math.abs(q)<=k&&(g(P,H),g(O,K),m(P,p(P)+1),m(O,p(O)+1))}}}}if(M<S)break}}for(const x of i){const S=x.attribute.y+c(x)-l(x);x.setAttribute("y",S)}const v=[];i.sort((x,S)=>x.attribute.x-S.attribute.x);let y=0,b=i.length-1;for(;y<=b;)y===b?v.push(i[y]):(v.push(i[y]),v.push(i[b])),y++,b--;return v}var $Wt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};jWt();class Th extends dit{setBitmap(t){this._bitmap=t}setBitmapTool(t){this._bmpTool=t}constructor(t,e){const{data:n}=t,r=$Wt(t,["data"]);super(e?.skipDefault?t:Object.assign({data:n},ot({},Th.defaultAttributes,r))),this.name="label",this._onHover=s=>{const a=s.target;a===this._lastHover||Lt(a.states)||(a.addState(pn.hover,!0),jo(this,o=>{o===a||Lt(o.states)||o.addState(pn.hoverReverse,!0)}),this._lastHover=a)},this._onUnHover=s=>{this._lastHover&&(jo(this,a=>{Lt(a.states)||(a.removeState(pn.hoverReverse),a.removeState(pn.hover))}),this._lastHover=null)},this._onClick=s=>{const a=s.target;if(this._lastSelect===a&&a.hasState("selected"))return this._lastSelect=null,void jo(this,o=>{Lt(o.states)||(o.removeState(pn.selectedReverse),o.removeState(pn.selected))});Lt(a.states)||(a.addState(pn.selected,!0),jo(this,o=>{o===a||Lt(o.states)||o.addState(pn.selectedReverse,!0)}),this._lastSelect=a)},this._handleRelatedGraphicSetState=s=>{var a,o,l,u,c;if(((a=s.detail)===null||a===void 0?void 0:a.type)===Xn.STATE||((o=s.detail)===null||o===void 0?void 0:o.type)===Xn.ANIMATE_UPDATE&&(!((l=s.detail.animationState)===null||l===void 0)&&l.isFirstFrameOfStep)){const h=(c=(u=s.target)===null||u===void 0?void 0:u.currentStates)!==null&&c!==void 0?c:[],d=this._isCollectionBase?[...this._graphicToText.values()]:[this._graphicToText.get(s.target)];this.updateStatesOfLabels(d,h)}}}labeling(t,e,n,r){}_getLabelLinePoints(t,e){return IWt(t.AABBBounds,e?.AABBBounds)}_createLabelLine(t,e){const n=this._getLabelLinePoints(t,e);if(n){const r=Mt.line({points:n}),{line:s={}}=t.attribute;if(s.customShape){const a=s.customShape;r.pathProxy=o=>a({text:t,baseMark:e},o,new Ki)}return e&&e.getAttributes(!0).fill&&r.setAttribute("stroke",e.getAttributes(!0).fill),this.attribute.line&&!Lt(this.attribute.line.style)&&r.setAttributes(this.attribute.line.style),this._setStatesOfLabelLine(r),r}}render(){if(this._prepare(),N(this._idToGraphic)||this._isCollectionBase&&N(this._idToPoint))return;const t=[];this._enableAnimation!==!1&&this._baseMarks.forEach(h=>{t.push(h.attribute),h.initAttributes(h.getAttributes(!0))});const{overlap:e,smartInvert:n,dataFilter:r,customLayoutFunc:s,customOverlapFunc:a}=this.attribute;let o=this.attribute.data;if(it(r)&&(o=r(o)),o&&o.length){const h=new Set;o=o.filter(d=>!h.has(d.id)&&h.add(d.id))}let l=this._initText(o);l=it(s)?s(o,l,this.getRelatedGraphic.bind(this),this._isCollectionBase?h=>this._idToPoint.get(h.id):null,this):this._layout(l);const u=[],c=l;if(!Vn(e)&&it(e?.filterBeforeOverlap)){const h=this.getRelatedGraphic.bind(this);l.forEach(d=>{e.filterBeforeOverlap(d,h,this)?c.push(d):u.push(d)})}it(a)?l=a(c,this.getRelatedGraphic.bind(this),this._isCollectionBase?h=>this._idToPoint.get(h.id):null,this).concat(u):e!==!1&&(l=this._overlapping(c).concat(u)),it(this.attribute.onAfterOverlapping)&&this.attribute.onAfterOverlapping(l,this.getRelatedGraphic.bind(this),this._isCollectionBase?h=>this._idToPoint.get(h.id):null,this),l&&l.length&&l.forEach(h=>{this._bindEvent(h),this._setStatesOfText(h)}),n!==!1&&this._smartInvert(l),this._renderLabels(l),this._enableAnimation!==!1&&this._baseMarks.forEach((h,d)=>{h.initAttributes(t[d])})}_bindEvent(t){if(this.attribute.disableTriggerEvent||!t)return;const{hover:e,select:n}=this.attribute;e&&(t.addEventListener("pointermove",this._onHover),t.addEventListener("pointerout",this._onUnHover)),n&&t.addEventListener("pointerdown",this._onClick)}_setStatesOfText(t){if(!t)return;const e=this.attribute.state;e&&!Lt(e)&&(t.states=e)}_setStatesOfLabelLine(t){if(!t)return;const e=this.attribute.labelLineState;e&&!Lt(e)&&(t.states=e)}_createLabelText(t){var e,n;const r=Object.assign(Object.assign({},(n=(e=this.stage)===null||e===void 0?void 0:e.getTheme())===null||n===void 0?void 0:n.text),t);return b0(r,"textType")}_prepare(){var t,e;const n=[];let r;if(r=it(this.attribute.getBaseMarks)?this.attribute.getBaseMarks():b3t(this.getRootNode(),this.attribute.baseMarkGroupName),r.forEach(a=>{a.releaseStatus!=="willRelease"&&n.push(a)}),(t=this._idToGraphic)===null||t===void 0||t.clear(),(e=this._idToPoint)===null||e===void 0||e.clear(),this._baseMarks=n,this._isCollectionBase=this.attribute.type==="line-data",!n||n.length===0)return;const{data:s}=this.attribute;if(s&&s.length!==0){if(this._idToGraphic||(this._idToGraphic=new Map),this._isCollectionBase){this._idToPoint||(this._idToPoint=new Map);let a=0;for(let o=0;o<n.length;o++){const l=n[o],u=OWt(l);if(u&&u.length)for(let c=0;c<u.length;c++){const h=s[a];h&&u[c]&&(L(h.id)||(h.id=`vrender-component-${this.name}-${a}`),this._idToPoint.set(h.id,u[c]),this._idToGraphic.set(h.id,l)),a++}}}else for(let a=0;a<n.length;a++){const o=s[a],l=n[a];o&&l&&(L(o.id)||(o.id=`vrender-component-${this.name}-${a}`),this._idToGraphic.set(o.id,l))}this._prepareAnimate(CWt)}}getRelatedGraphic(t){return this._idToGraphic.get(t.id)}_initText(t=[]){const{textStyle:e={}}=this.attribute,n=[];for(let r=0;r<t.length;r++){const s=t[r],a=this.getRelatedGraphic(s);if(!a)continue;const o=a.getAttributes(!0),l=Object.assign(Object.assign({fill:this._isCollectionBase?J(o.stroke)?o.stroke.find(c=>!!c&&c!==!0):o.stroke:o.fill},e),s),u=this._createLabelText(l);n.push(u)}return n}_layout(t){const{position:e,offset:n}=this.attribute;for(let r=0;r<t.length;r++){const s=t[r];if(!s)return[];const a=s.attribute,o=this.getRelatedGraphic(a);if(!o)continue;s.attachedThemeGraphic=this;const l=this.getGraphicBounds(s);s.attachedThemeGraphic=null;const u=it(e)?e(a):e,c=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(a.id),u):this.getGraphicBounds(o,{x:a.x,y:a.y},u),h=this.labeling(l,c,u,n);h&&s.setAttributes(h)}return t}_overlapping(t){var e,n,r;if(t.length===0)return[];const s=ee(this.attribute.overlap)?this.attribute.overlap:{},a=this.getBaseMarkGroup(),o=(e=s.size)!==null&&e!==void 0?e:{width:(n=a?.AABBBounds.width())!==null&&n!==void 0?n:0,height:(r=a?.AABBBounds.height())!==null&&r!==void 0?r:0};if(o.width===0||o.height===0)return t;const{strategy:l,priority:u}=s,c=this._bmpTool||int(o.width,o.height),h=this._bitmap||c.bitmap();return u&&(t=t.sort((d,f)=>u(f.attribute.data)-u(d.attribute.data))),l?.type==="shiftY"?this._overlapGlobal(t,s,c,h):this._overlapByStrategy(t,s,c,h)}_overlapGlobal(t,e,n,r){let s=t.filter(h=>h.attribute.visible&&h.attribute.opacity!==0&&this.isMarkInsideRect(this.getRelatedGraphic(h.attribute),n));const{clampForce:a=!0,hideOnHit:o=!0,hideOnOverflow:l=!1,overlapPadding:u,strategy:c}=e;if(a||l)for(let h=0;h<s.length;h++){const d=t[h],{dx:f=0,dy:p=0}=GE(d,n.width,n.height,n.padding);f===0&&p===0||(l?d.setAttributes({visible:!1}):(d.setAttributes({x:d.attribute.x+f,y:d.attribute.y+p}),d._isClamped=!0))}s=WWt(s,Object.assign(Object.assign({maxY:n.height},c),{labelling:h=>{const d=this.getRelatedGraphic(h.attribute),f=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(h.attribute.id)):this.getGraphicBounds(d,h);return this.labeling(h.AABBBounds,f,"bottom",this.attribute.offset)}}));for(let h=0;h<s.length;h++){const d=s[h],f=d.AABBBounds,p=gl(n,f,!0);if(rv(n,r,f,a||l,u))r.setRange(p);else{if(l){if(this._processHideOnOverflow(d,n))continue}else if(a&&this._processClampForce(d,n,r,u))continue;o?d.setAttributes({visible:!1}):r.setRange(p)}}return s}_processHideOnOverflow(t,e){const{dy:n=0,dx:r=0}=GE(t,e.width,e.height,e.padding);return r===0&&n===0||(t.setAttributes({visible:!1}),!1)}_processClampForce(t,e,n,r=0){const{dy:s=0,dx:a=0}=GE(t,e.width,e.height,e.padding);if(a===0&&s===0){if(rv(e,n,t.AABBBounds,!1,r))return n.setRange(gl(e,t.AABBBounds,!0)),!0}else if(rv(e,n,{x1:t.AABBBounds.x1+a,x2:t.AABBBounds.x2+a,y1:t.AABBBounds.y1+s,y2:t.AABBBounds.y2+s}))return t.setAttributes({x:t.attribute.x+a,y:t.attribute.y+s}),n.setRange(gl(e,t.AABBBounds,!0)),!0;return!1}_overlapByStrategy(t,e,n,r){var s;const{avoidBaseMark:a,strategy:o=[],hideOnHit:l=!0,clampForce:u=!0,avoidMarks:c=[],overlapPadding:h,hideOnOverflow:d=!1}=e,f=[],p=o.some(g=>g.type==="bound");a&&((s=this._baseMarks)===null||s===void 0||s.forEach(g=>{g.AABBBounds&&r.setRange(gl(n,g.AABBBounds,!0))})),c.length>0&&c.forEach(g=>{Ht(g)?x3t(this.getRootNode(),g).forEach(m=>{m.AABBBounds&&r.setRange(gl(n,m.AABBBounds,!0))}):g.AABBBounds&&r.setRange(gl(n,g.AABBBounds,!0))});for(let g=0;g<t.length;g++){if(t[g].attribute.visible===!1)continue;const m=t[g],_=this.getRelatedGraphic(m.attribute);if(m.update(),!this.isMarkInsideRect(_,n))continue;if(rv(n,r,m.AABBBounds,u||d,h)){if(!p){r.setRange(gl(n,m.AABBBounds,!0)),f.push(m);continue}if(p&&_&&_.AABBBounds&&this._canPlaceInside(m.AABBBounds,_.AABBBounds)){r.setRange(gl(n,m.AABBBounds,!0)),f.push(m);continue}}let v=!1;for(let y=0;y<o.length;y++)if(v=SWt(n,r,o[y],this.attribute,m,this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(t[g].attribute.id)):this.getGraphicBounds(_,t[g].attribute),this.labeling),v!==!1&&(m.setAttributes({x:v.x,y:v.y}),!d||this._processHideOnOverflow(m,n))){f.push(m);break}if(!v){if(d&&!this._processHideOnOverflow(m,n))continue;if(u&&this._processClampForce(m,n,r,h)){f.push(m);continue}}!v&&!l&&f.push(m)}return f}isMarkInsideRect(t,e){const{left:n,right:r,top:s,bottom:a}=e.padding,o={x1:-n,x2:e.width+r,y1:-s,y2:e.height+a},l=t.AABBBounds;if(l.width()!==0&&l.height()!==0)return i0(t.AABBBounds,o,!0);const{attribute:u}=t;if(t.type==="rect"){const{x:c,x1:h,y:d,y1:f}=u;return ug({x:c??h,y:d??f},o,!0)}return"x"in u&&"y"in u&&ug({x:u.x,y:u.y},o,!0)}getBaseMarkGroup(){const{baseMarkGroupName:t}=this.attribute;if(t)return this.getRootNode().find(e=>e.name===t,!0)}getGraphicBounds(t,e={},n){var r;if(t){if(t.attribute.visible!==!1){if(!((r=t.context)===null||r===void 0)&&r.animationState){const u=t.clone();return Object.assign(u.attribute,t.getAttributes(!0)),u.AABBBounds}return t.AABBBounds}const{x:o,y:l}=t.attribute;return{x1:o,x2:o,y1:l,y2:l}}if(e&&n&&n==="inside-middle"){const{x:o,y:l,x1:u=o,y1:c=l}=e;return{x1:(o+u)/2,x2:(o+u)/2,y1:(l+c)/2,y2:(l+c)/2}}const{x:s,y:a}=e;return{x1:s,x2:s,y1:a,y2:a}}_renderLabels(t){var e;const{syncState:n}=this.attribute,r=new Map,s=this._graphicToText||new Map,a=[],o=[],{visible:l}=(e=this.attribute.line)!==null&&e!==void 0?e:{};t&&t.forEach((u,c)=>{var h;const d=this.getRelatedGraphic(u.attribute),f=this._isCollectionBase?u.attribute.id:d,p=s?.get(f)?"update":"enter";let g;l&&(g=this._createLabelLine(u,d));const m=g?{text:u,labelLine:g}:{text:u};if(n&&this.updateStatesOfLabels([m],(h=d.currentStates)!==null&&h!==void 0?h:[]),p==="enter")a.push(u),r.set(f,m),this._addLabel(m,a,o,c);else if(p==="update"){const _=s.get(f);s.delete(f),r.set(f,_),this._updateLabel(_,m)}}),this._removeLabel(s),this._graphicToText=r}runEnterAnimation(t,e){if(this._enableAnimation===!1||!this._animationConfig.enter)return;const n=this.getRelatedGraphic(t.attribute),{enter:r}=this._animationConfig;[t,e].filter(Boolean).forEach(s=>{var a;(a=s.setFinalAttributes)===null||a===void 0||a.call(s,s.attribute),s.applyAnimationState(["enter"],[{name:"enter",animation:Object.assign(Object.assign({},r),{type:"labelEnter",selfOnly:!0,customParameters:{relatedGraphic:n,relatedGraphics:this._idToGraphic,config:Object.assign(Object.assign({},r),{type:s===t?r.type:"fadeIn"})}})}])})}_runUpdateAnimation(t,e){const{text:n,labelLine:r}=t,{text:s,labelLine:a}=e;n.applyAnimationState(["update"],[{name:"update",animation:{type:"labelUpdate",customParameters:Object.assign(Object.assign({},this._animationConfig.update),{prevText:n,curText:s,prevLabelLine:r,curLabelLine:a})}}])}_syncStateWithRelatedGraphic(t){this.attribute.syncState&&t&&t.on("afterStateUpdate",this._handleRelatedGraphicSetState)}_addLabel(t,e,n,r){const{text:s,labelLine:a}=t,o=this.getRelatedGraphic(s.attribute);this._syncStateWithRelatedGraphic(o),s&&this.add(s),a&&this.add(a),this.runEnterAnimation(s,a)}_updateLabel(t,e){const{text:n,labelLine:r}=t,{text:s,labelLine:a}=e;this._enableAnimation===!1||this._animationConfig.update===!1?(t.text.setAttributes(s.attribute),r&&a&&t.labelLine.setAttributes(a.attribute)):this._runUpdateAnimation(t,e)}_removeLabel(t){const e=n=>{this.removeChild(n.text),n.labelLine&&this.removeChild(n.labelLine)};this._enableAnimation!==!1&&this._animationConfig.exit!==!1?t.forEach(n=>{var r;n.text.applyAnimationState(["exit"],[{name:"exit",animation:Object.assign(Object.assign({},this._animationConfig.exit),{type:"fadeOut"})}],()=>{e(n)}),(r=n.labelLine)===null||r===void 0||r.applyAnimationState(["exit"],[{name:"exit",animation:Object.assign(Object.assign({},this._animationConfig.exit),{type:"fadeOut"})}],()=>{})}):t.forEach(n=>{e(n)})}updateStatesOfLabels(t,e){t.forEach(n=>{n&&(n.text&&n.text.useStates(e),n.labelLine&&n.labelLine.useStates(e))})}_smartInvert(t){var e,n,r,s,a,o,l;const u=ee(this.attribute.smartInvert)?this.attribute.smartInvert:{},{textType:c,contrastRatiosThreshold:h,alternativeColors:d,mode:f,interactInvertType:p}=u,g=(e=u.fillStrategy)!==null&&e!==void 0?e:"invertBase",m=(n=u.strokeStrategy)!==null&&n!==void 0?n:"base",_=(r=u.brightColor)!==null&&r!==void 0?r:"#ffffff",v=(s=u.darkColor)!==null&&s!==void 0?s:"#000000",y=(a=u.outsideEnable)!==null&&a!==void 0&&a;if(g!=="null"||m!=="null")for(let b=0;b<t.length;b++){const x=t[b];if(!x)continue;const S=this.getRelatedGraphic(x.attribute);let w=S.getAttributes(!0).fill,A=x.attribute.fill;if(ee(w)&&w.gradient){const P=(l=(o=w.stops)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.color;P&&(w=P,A=P)}const k=VI(A,w,c,h,d,f),C=HF(k,_)?_:v,M=this._canPlaceInside(x.AABBBounds,S.AABBBounds),R=!M&&x.AABBBounds&&S.AABBBounds&&S.AABBBounds.intersects(x.AABBBounds);if(M||y||R&&p==="inside"){const P=MS(g,w,k,C);if(P&&x.setAttributes({fill:P}),x.attribute.lineWidth===0||x.attribute.strokeOpacity===0)continue;const O=MS(m,w,k,C);O&&x.setAttributes({stroke:O})}else if(R&&p!=="none"){if(x.attribute.lineWidth===0||x.attribute.strokeOpacity===0)continue;if(x.attribute.stroke){x.setAttributes({fill:VI(x.attribute.fill,x.attribute.stroke,c,h,d,f)});continue}const P=MS(g,w,k,C);P&&x.setAttributes({fill:P});const O=MS(m,w,k,C);O&&x.setAttributes({stroke:O})}}}_canPlaceInside(t,e){return!(!t||!e)&&e.encloses(t)}setLocation(t){this.translateTo(t.x,t.y)}disableAnimation(){this._enableAnimation=!1}enableAnimation(){this._enableAnimation=!0}}Th.defaultAttributes={textStyle:{fontSize:12,textAlign:"center",textBaseline:"middle",boundsPadding:[-2,-1,-2,-1]},offset:0,pickable:!1};const rnt={},rm=(i,t)=>{rnt[i]=t},UWt=i=>rnt[i];var GWt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class S0 extends Th{constructor(t,e){const{data:n}=t,r=GWt(t,["data"]);super(e?.skipDefault?t:Object.assign({data:n},ot({},S0.defaultAttributes,r))),this.name="symbol-label"}labeling(t,e,n="top",r=0){return RWt(t,e,n,r)}}S0.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};const GM=()=>{rm("symbol",S0),rm("line-data",S0)};var YWt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class w0 extends Th{constructor(t,e){const{data:n}=t,r=YWt(t,["data"]);super(e?.skipDefault?t:Object.assign({data:n},ot({},w0.defaultAttributes,r)))}labeling(t,e,n="top",r=0){if(!t||!e)return;const{x1:s,y1:a,x2:o,y2:l}=t,u=Math.abs(o-s),c=Math.abs(l-a),{x:h,y:d}=bJ(e,n);let f=0,p=0;const g=n.includes("inside");switch(n.includes("top")?p=g?1:-1:n.includes("bottom")?p=g?-1:1:n.includes("left")?f=g?1:-1:n.includes("right")&&(f=g?-1:1),n){case"top-right":case"bottom-right":f=-1;break;case"top-left":case"bottom-left":f=1}return{x:h+f*r+f*u/2,y:d+p*r+p*c/2}}}w0.tag="rect-label",w0.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};const XWt=()=>{rm("rect",w0)};var KWt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};let ZI=class snt extends Th{constructor(t,e){const{data:n}=t,r=KWt(t,["data"]);super(e?.skipDefault?t:Object.assign({data:n},ot({},snt.defaultAttributes,r))),this.name="line-label"}getGraphicBounds(t,e={},n="end"){if(!t||t.type!=="line"&&t.type!=="area")return super.getGraphicBounds(t,e);let r=t.attribute.points;const s=t.attribute.segments;!r&&s&&s.length&&(r=s.reduce((o,l)=>{var u;return o.concat((u=l.points)!==null&&u!==void 0?u:[])},[])),r&&r.length!==0||(r=[e]);const a=n==="start"?0:r.length-1;return r[a]?{x1:r[a].x,x2:r[a].x,y1:r[a].y,y2:r[a].y}:void 0}labeling(t,e,n="end",r=0){return DWt(t,e,n,r)}};ZI.defaultAttributes={textStyle:{fill:"#000"},position:"end",offset:6};const ant=()=>{rm("line",ZI),rm("area",ZI)};var qWt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class ZWt{constructor(t,e,n,r,s,a,o,l,u){this.refDatum=t,this.center=e,this.outerCenter=n,this.quadrant=r,this.radian=s,this.middleAngle=a,this.innerRadius=o,this.outerRadius=l,this.circleCenter=u,this.labelVisible=!0}getLabelBounds(){return this.labelPosition&&this.labelSize?{x1:this.labelPosition.x-this.labelSize.width/2,y1:this.labelPosition.y-this.labelSize.height/2,x2:this.labelPosition.x+this.labelSize.width/2,y2:this.labelPosition.y+this.labelSize.height/2}:{x1:0,x2:0,y1:0,y2:0}}}class YM extends Th{constructor(t,e){const{data:n}=t,r=qWt(t,["data"]);super(e?.skipDefault?t:Object.assign({data:n},ot({},YM.defaultAttributes,r))),this.name="arc-label",this._ellipsisWidth=0,this._arcLeft=new Map,this._arcRight=new Map,this._line2MinLength=0,this._alignOffset=0}_overlapping(t){return["inside","inside-center"].includes(this.attribute.position)?super._overlapping(t):t}labeling(t,e,n="outside",r=0){if(t&&e)return{x:0,y:0}}_layout(t){var e,n,r;if(!t||!t.length)return[];const s=super._layout(t),a=s.map(d=>this.getGraphicBounds(d)),o=Object.assign(Object.assign({},this.attribute.textStyle),{text:""});let l=1/0;if(o.ellipsis!==!1){const d=this._createLabelText(o),f=this.getGraphicBounds(d);l=f.x2-f.x1}const u=s.map(d=>d.attribute),c=Array.from(this._idToGraphic.values());this._line2MinLength=it(this.attribute.line.line2MinLength)?this.attribute.line.line2MinLength(t,c,this.attribute):this.attribute.line.line2MinLength,this._alignOffset=(e=it(this.attribute.layout.alignOffset)?this.attribute.layout.alignOffset(t,c,this.attribute):this.attribute.layout.alignOffset)!==null&&e!==void 0?e:0;const h=this.layoutArcLabels(this.attribute.position,this.attribute,c,u,a,l);for(let d=0;d<u.length;d++){const f=u[d],p=h.find(g=>{var m;return((m=g.refDatum)===null||m===void 0?void 0:m.id)===f.id});if(p){const g={visible:p.labelVisible,x:p.labelPosition.x,y:p.labelPosition.y,angle:p.angle,points:p.pointA&&p.pointB&&p.pointC?[p.pointA,p.pointB,p.pointC]:void 0,line:p.labelLine};s[d].type==="richtext"?g.width=(n=p.labelLimit)!==null&&n!==void 0?n:s[d].attribute.width:g.maxLineWidth=(r=p.labelLimit)!==null&&r!==void 0?r:s[d].attribute.maxLineWidth,p.refArc&&p.refArc.type==="arc3d"&&(g.anchor3d=[p.circleCenter.x-g.x,p.circleCenter.y-g.y],g.beta=p.refArc.attribute.beta),s[d].setAttributes(g)}}return s}layoutArcLabels(t,e,n,r,s,a){this._arcLeft.clear(),this._arcRight.clear(),this._ellipsisWidth=a;let o=0;n.forEach(h=>{h.attribute.outerRadius>o&&(o=h.attribute.outerRadius)}),r.forEach((h,d)=>{var f,p;const g=this._idToGraphic.get(h.id),m=g.getAttributes(!0),_={x:(f=m?.x)!==null&&f!==void 0?f:0,y:(p=m?.y)!==null&&p!==void 0?p:0};if(!N(r[d])&&!N(s[d])){const v=r[d]?r[d]:null,y=s[d]?s[d]:{x1:0,x2:0,y1:0,y2:0},b=(m.startAngle+m.endAngle)/2,x=m.endAngle-m.startAngle,S=gJ(m.endAngle-x/2),w=yi(_,m.outerRadius,b),A=yi(_,o+e.line.line1MinLength,b),k=new ZWt(v,w,A,S,x,b,m.innerRadius,m.outerRadius,_);k.refArc=g,k.pointA=yi(_,this.computeDatumRadius(2*_.x,2*_.y,m.outerRadius),k.middleAngle),k.labelSize={width:y.x2-y.x1,height:y.y2-y.y1},MWt(k.quadrant)?this._arcRight.set(k.refDatum,k):Nh(k.quadrant)&&this._arcLeft.set(k.refDatum,k)}});const l=Array.from(this._arcLeft.values()),u=Array.from(this._arcRight.values()),c=[];switch(t){case"inside":case"inside-inner":case"inside-outer":case"inside-center":c.push(...this._layoutInsideLabels(u,e,n)),c.push(...this._layoutInsideLabels(l,e,n));break;default:c.push(...this._layoutOutsideLabels(u,e,n)),c.push(...this._layoutOutsideLabels(l,e,n))}return c}_layoutInsideLabels(t,e,n){var r,s;const a=e,o=a.spaceWidth,l=(r=a.position)!==null&&r!==void 0?r:"inside",u=(s=a.offsetRadius)!==null&&s!==void 0?s:-o;return t.forEach(c=>{var h,d,f;const{labelSize:p,radian:g}=c,m=c.innerRadius,_=c.outerRadius;let v;if(g<PWt(_,p.height))v=0;else{let A;A=g>=Math.PI?m:Math.max(m,p.height/2/Math.tan(g/2)),v=_-A-o}a.rotate!==!0&&(v=_-o);const y=this._getFormatLabelText(c.refDatum,v);c.labelText=y;const b=Math.min(v,c.labelSize.width),x=this._computeAlign(c,e);let S,w=0;if(l==="inside"&&(w=x==="left"?b:x==="right"?0:b/2),S=l==="inside-inner"?m-u+w:l==="inside-center"?m+(_-m)/2:_+u-w,c.labelPosition=yi(c.circleCenter,S,c.middleAngle),c.labelLimit=b,pu(b,0)||(c.labelVisible=!1),a.rotate!==!1){c.angle=(d=(h=e.textStyle)===null||h===void 0?void 0:h.angle)!==null&&d!==void 0?d:c.middleAngle;let A=(f=a.offsetAngle)!==null&&f!==void 0?f:0;["inside-inner","inside-outer"].includes(l)&&(A+=Math.PI/2),c.angle+=A}}),t}_layoutOutsideLabels(t,e,n){var r,s,a;const o=(r=n[0].attribute.x)!==null&&r!==void 0?r:0,l=2*((s=n[0].attribute.y)!==null&&s!==void 0?s:0),u=e.layout,c=e.spaceWidth;if(t.forEach(d=>{const f=Nh(d.quadrant)?-1:1;d.labelPosition={x:d.outerCenter.x+f*(d.labelSize.width/2+this._line2MinLength+c),y:d.outerCenter.y}}),t.sort((d,f)=>d.labelPosition.y-f.labelPosition.y),e.coverEnable!==!1||u.strategy==="none"){for(const d of t){const{labelPosition:f,labelSize:p}=d;d.labelLimit=p.width,d.pointB=Nh(d.quadrant)?{x:f.x+p.width/2+this._line2MinLength+c,y:f.y}:{x:f.x-p.width/2-this._line2MinLength-c,y:f.y},this._computeX(d,e,n)}e.coverEnable===!1&&u.strategy==="none"&&this._coverLabels(t)}else{const d=l/(((a=e.textStyle)===null||a===void 0?void 0:a.fontSize)||16);this._adjustY(t,d,e,n);const{minY:f,maxY:p}=t.reduce((_,v)=>{const{y1:y,y2:b}=v.getLabelBounds();return _.minY=Math.max(0,Math.min(y,_.minY)),_.maxY=Math.min(l,Math.max(b,_.maxY)),_},{minY:1/0,maxY:-1/0}),g=Math.max(Math.abs(l/2-f),Math.abs(p-l/2)),m=this._computeLayoutRadius(g,e,n);for(const _ of t)this._computePointB(_,m,e,n),this._computeX(_,e,n)}const h=2*o;return t.forEach(d=>{var f,p;d.labelVisible&&(fl(d.pointB.x,this._line2MinLength+c)||pu(d.pointB.x,h-this._line2MinLength-c))&&(d.labelVisible=!1),d.angle=(p=(f=e.textStyle)===null||f===void 0?void 0:f.angle)!==null&&p!==void 0?p:0,e.offsetAngle&&(d.angle+=e.offsetAngle),d.labelLine=Object.assign(Object.assign({},e.line),{visible:d.labelVisible})}),t}_computeX(t,e,n){var r;const s=t.circleCenter,a=0,o=this.attribute.width;this.attribute.height;let l=0;n.forEach(k=>{k.getAttributes(!0).outerRadius>l&&(l=k.getAttributes(!0).outerRadius)});const u=this.computeLayoutOuterRadius(l,e.width,e.height),c=e.line.line1MinLength,h=(r=e.layout)===null||r===void 0?void 0:r.align,d=e.spaceWidth,{labelPosition:f,quadrant:p,pointB:g}=t;et(g.x*g.y)||(t.pointC={x:NaN,y:NaN},f.x=NaN,t.labelLimit=0);const m=this.computeRadius(u,e.width,e.height),_=Nh(p)?-1:1;let v=0,y=(_>0?o-g.x:g.x-a)+this._alignOffset-this._line2MinLength-d;h==="labelLine"&&(v=(m+c+this._line2MinLength)*_+s.x,y=(_>0?o-v:v-a)-d);const b=this._getFormatLabelText(t.refDatum,y);t.labelText=b;let x=Math.min(y,t.labelSize.width);switch(h){case"labelLine":break;case"edge":v=_>0?o-x-d:a+x+d;break;default:v=g.x+_*this._line2MinLength}x=Math.max(this._ellipsisWidth,x);const S=x<t.labelSize.width-1;t.labelLimit=S?x:null,t.pointC={x:v,y:f.y};const w=this._computeAlign(t,e),A=LWt(w)*(S?x:t.labelSize.width);h==="edge"?(f.x=(_>0?o:a)-_*A+_*this._alignOffset,t.pointC.x+=_*this._alignOffset):f.x=v+_*(this._alignOffset+d+A)}_computeAlign(t,e){var n,r,s,a,o,l;const u=e,c=(r=(n=u.textStyle)===null||n===void 0?void 0:n.textAlign)!==null&&r!==void 0?r:(s=u.textStyle)===null||s===void 0?void 0:s.align,h=(o=(a=u.layout)===null||a===void 0?void 0:a.textAlign)!==null&&o!==void 0?o:(l=u.layout)===null||l===void 0?void 0:l.align;return u.position!=="inside"?N(c)||c==="auto"?h==="edge"?Nh(t.quadrant)?"left":"right":Nh(t.quadrant)?"right":"left":c:N(c)||c==="auto"?"center":c}_getFormatLabelText(t,e){var n;return(n=t?.text)!==null&&n!==void 0?n:""}_adjustY(t,e,n,r){var s;r[0].attribute.x;const a=2*((s=r[0].attribute.y)!==null&&s!==void 0?s:0),o=n.layout;if(o.strategy==="vertical"){let l,u=0;const c=t.length;if(c<=0)return;for(let d=0;d<c;d++){const{y1:f}=t[d].getLabelBounds();if(l=f-u,fl(l,0)){const g=this._shiftY(t,d,c-1,-l);this._shiftY(t,g,0,l/2)}const{y2:p}=t[d].getLabelBounds();u=p}const{y1:h}=t[0].getLabelBounds();l=h-0,fl(l,0)&&this._shiftY(t,0,c-1,-l);for(let d=t.length-1;d>=0&&t[d].getLabelBounds().y2>a;d--)t[d].labelVisible=!1}else if(o.strategy!=="none"){const l=t.map((h,d)=>({arc:h,originIndex:d,priorityIndex:0}));l.sort((h,d)=>d.arc.radian-h.arc.radian),l.forEach((h,d)=>{h.priorityIndex=d,h.arc.labelVisible=!1});let u=1/0,c=-1/0;for(let h=0;h<e&&h<t.length;h++){this._storeY(t);const d=l[h].arc;this._computeYRange(d,n,r),d.labelVisible=!0;const f=d.labelPosition.y,{lastIndex:p,nextIndex:g}=this._findNeighborIndex(t,l[h]),m=t[p],_=t[g];if(p===-1&&g!==-1){const x=_.labelPosition.y;f>x?d.labelPosition.y=x-_.labelSize.height/2-d.labelSize.height/2:this._twoWayShift(t,d,_,g)}else if(p!==-1&&g===-1){const x=m.labelPosition.y;f<x?d.labelPosition.y=x+m.labelSize.height/2+d.labelSize.height/2:this._twoWayShift(t,m,d,l[h].originIndex)}else if(p!==-1&&g!==-1){const x=m.labelPosition.y,S=_.labelPosition.y;f>S?(d.labelPosition.y=S-_.labelSize.height/2-d.labelSize.height/2,this._twoWayShift(t,m,d,l[h].originIndex)):f<x?(d.labelPosition.y=x+m.labelSize.height/2+d.labelSize.height/2,this._twoWayShift(t,d,_,g)):(this._twoWayShift(t,m,d,l[h].originIndex),this._twoWayShift(t,d,_,g))}const v=Math.min(u,l[h].originIndex),y=Math.max(c,l[h].originIndex);let b;if(b=t[y].getLabelBounds().y2-a,pu(b,0)&&this._shiftY(t,y,0,-b),b=t[v].getLabelBounds().y1-0,fl(b,0)&&this._shiftY(t,v,t.length-1,-b),b=t[y].getLabelBounds().y2-a,pu(b,0)){d.labelVisible=!1,this._restoreY(t);break}o.tangentConstraint&&!this._checkYRange(t)?(d.labelVisible=!1,this._restoreY(t)):(u=v,c=y)}}}_shiftY(t,e,n,r){const s=e<n?1:-1;let a=e;for(;a!==-1;){t[a].labelPosition.y+=r;const o=this._findNextVisibleIndex(t,a,n,s);if(o>=0&&o<t.length){const{y1:l,y2:u}=t[a].getLabelBounds(),{y1:c,y2:h}=t[o].getLabelBounds();if(s>0&&u<c||s<0&&l>h)return a}a=o}return n}_findNextVisibleIndex(t,e,n,r){const s=(n-e)*r;for(let a=1;a<=s;a++){const o=e+a*r;if(t[o].labelVisible)return o}return-1}_computePointB(t,e,n,r){const s=n;let a=0;r.forEach(u=>{u.getAttributes(!0).outerRadius>a&&(a=u.getAttributes(!0).outerRadius)});const o=this.computeLayoutOuterRadius(a,n.width,n.height),l=s.line.line1MinLength;if(s.layout.strategy==="none")t.pointB={x:t.outerCenter.x,y:t.outerCenter.y};else{const u=t.circleCenter,c=this.computeRadius(o,n.width,n.height),{labelPosition:h,quadrant:d}=t,f=e-Math.max(c+l,t.outerRadius),p=Math.sqrt(e**2-Math.abs(u.y-h.y)**2)-f;et(p)?t.pointB={x:u.x+p*(Nh(d)?-1:1),y:h.y}:t.pointB={x:NaN,y:NaN}}}_storeY(t){for(const e of t)e.labelVisible&&(e.lastLabelY=e.labelPosition.y)}_computeYRange(t,e,n){const r=t.circleCenter,s={width:2*r.x,height:2*r.y};let a=0;n.forEach(x=>{x.getAttributes(!0).outerRadius>a&&(a=x.getAttributes(!0).outerRadius)});const o=this.computeLayoutOuterRadius(a,e.width,e.height),l=e.line.line1MinLength,{width:u,height:c}=s,h=this.computeRadius(o,e.width,e.height),d=this._computeLayoutRadius(c/2,e,n),f=Math.abs(t.center.x-u/2),p=t.center.y-c/2;let g,m,_;if(sn(u/2,f))g=0,m=1,_=-p;else if(sn(c/2,p))g=1,m=0,_=-f;else{const x=-1/(p/f);g=x,m=-1,_=p-x*f}const v=TWt(g,m,_,l+h-d,0,d);if(v.length<2)return;let y,b;v[0].x>v[1].x&&v.reverse(),v[0].x<0?sn(v[0].y,v[1].y)?pu(t.middleAngle,-Math.PI)&&fl(t.middleAngle,0)||pu(t.middleAngle,Math.PI)&&fl(t.middleAngle,2*Math.PI)?(y=0,b=v[1].y+c/2):(y=v[1].y+c/2,b=c):v[0].y<v[1].y?(y=0,b=v[1].y+c/2):(y=v[1].y+c/2,b=s.height):(y=Math.min(v[0].y,v[1].y)+c/2,b=Math.max(v[0].y,v[1].y)+c/2),t.labelYRange=[y,b]}_computeLayoutRadius(t,e,n){const r=e,s=r.layoutArcGap,a=r.line.line1MinLength;let o=0;n.forEach(h=>{h.getAttributes(!0).outerRadius>o&&(o=h.getAttributes(!0).outerRadius)});const l=this.computeLayoutOuterRadius(o,e.width,e.height),u=this.computeRadius(l,e.width,e.height)+a,c=u-s;return Math.max((c**2+t**2)/(2*c),u)}_findNeighborIndex(t,e){const n=e.originIndex;let r=-1,s=-1;for(let a=n-1;a>=0;a--)if(t[a].labelVisible){r=a;break}for(let a=n+1;a<t.length;a++)if(t[a].labelVisible){s=a;break}return{lastIndex:r,nextIndex:s}}_twoWayShift(t,e,n,r){const s=n.getLabelBounds().y1-e.getLabelBounds().y2;if(fl(s,0)){const a=this._shiftY(t,r,t.length-1,-s);this._shiftY(t,a,0,s/2)}}_restoreY(t){for(const e of t)e.labelVisible&&(e.labelPosition.y=e.lastLabelY)}_checkYRange(t){for(const e of t){const{labelYRange:n,labelPosition:r}=e;if(e.labelVisible&&n&&(fl(r.y,n[0])||pu(r.y,n[1])))return!1}return!0}_coverLabels(t){if(t.length<=1)return;let e=t[0].getLabelBounds();for(let n=1;n<t.length;n++){const r=t[n].getLabelBounds();EWt(e,r)?t[n].labelVisible=!1:e=r}}_getLabelLinePoints(t,e){return t.attribute.points}_createLabelLine(t,e){var n,r,s,a,o;const{line:l={},visible:u}=t.attribute,c=super._createLabelLine(t,e);if(c&&(c.setAttributes({visible:(s=(n=l.visible&&u)!==null&&n!==void 0?n:(r=t.attribute)===null||r===void 0?void 0:r.visible)===null||s===void 0||s,lineWidth:(o=(a=l.style)===null||a===void 0?void 0:a.lineWidth)!==null&&o!==void 0?o:1}),l.smooth&&c.setAttributes({curveType:"basis"}),e.type==="arc3d"&&e)){const{beta:h,x:d,y:f}=e.getAttributes(!0);c.setAttributes({beta:h,anchor3d:[d,f]})}return c}computeRadius(t,e,n,r){return this.computeLayoutRadius(e||0,n||0)*t*(N(r)?1:r)}computeLayoutRadius(t,e){return Math.min(t/2,e/2)}_canPlaceInside(t,e){return this.attribute.position==="inside"||this.attribute.position==="inside-center"}computeLayoutOuterRadius(t,e,n){return t/(Math.min(e,n)/2)}computeDatumRadius(t,e,n){const r=this.computeLayoutOuterRadius(n,t,e);return this.computeLayoutRadius(t||0,e||0)*r}}YM.defaultAttributes={coverEnable:!1,spaceWidth:5,layoutArcGap:6,textStyle:{visible:!0,fontSize:14,fontWeight:"normal",fillOpacity:1,boundsPadding:[-1,0,-1,0],ellipsis:!0},position:"outside",line:{visible:!0,line1MinLength:20,line2MinLength:10},layout:{align:"arc",strategy:"priority",tangentConstraint:!0}};const QWt=()=>{rm("arc",YM)};var JWt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class Wb extends fr{constructor(t,e){const{dataLabels:n}=t,r=JWt(t,["dataLabels"]);super(e?.skipDefault?t:Object.assign({dataLabels:n},ot({},Wb.defaultAttributes,r))),this.name="data-label"}render(){var t;const{dataLabels:e,size:n}=this.attribute;if(!e||e.length===0)return;const{width:r=0,height:s=0,padding:a}=n||{};if(!r||!s||!et(s*r))return;this._componentMap||(this._componentMap=new Map);const o=int(r,s,a),l=o.bitmap(),u=new Map,c=this._componentMap;for(let h=0;h<e.length;h++){const d=e[h],f=UWt(d.type)||Th;if(f){const{baseMarkGroupName:p,type:g}=d,m=(t=d.id)!==null&&t!==void 0?t:`${p}-${g}-${h}`;d.type==="arc"&&(d.width=n.width,d.height=n.height);let _=this._componentMap.get(m);_?(_.setBitmapTool(o),_.setBitmap(l),_.setAttributes(d),u.set(m,_)):(_=new f(d),_.setBitmap(l),_.setBitmapTool(o),this.add(_),u.set(m,_))}}c.forEach((h,d)=>{u.get(d)||this.removeChild(h)}),this._componentMap=u}setLocation(t){this.translateTo(t.x,t.y)}disableAnimation(){this._componentMap.forEach(t=>{t.disableAnimation()})}enableAnimation(){this._componentMap.forEach(t=>{t.enableAnimation()})}}Wb.defaultAttributes={pickable:!1};function QI(i,t,e,n){let r="";if(!i||t.length===0)return r;const s=t[0],a=Je.distancePP(i,s),o=e?0:1;return n?r+=`M${i.x},${i.y-a}A${a},${a},0,0,${o},${i.x},${i.y+a}A${a},${a},0,0,${o},${i.x},${i.y-a}Z`:t.forEach((l,u)=>{u===0?r=`M${l.x},${l.y}`:r+=`A${a},${a},0,0,${o},${l.x},${l.y}`}),r}function t$t(i,t,e){const{type:n,closed:r}=e,s=t.slice(0).reverse();let a="",o="";if(n==="line"&&e.smoothLink&&e.center){const l=i[0],u=s[0],c=e.center;a=hd(i,!!r),o=hd(s,!!r);const h=Je.distancePP(u,c),d=Je.distancePP(l,c);a+=`A${h},${h},0,0,1,${u.x},${u.y}L${u.x},${u.y}`,o+=`A${d},${d},0,0,0,${l.x},${l.y}`}else if(n==="circle"){const{center:l}=e;a=QI(l,i,!1,!!r),o=QI(l,s,!0,!!r)}else n!=="line"&&n!=="polygon"||(a=hd(i,!!r),o=hd(s,!!r));return r?a+=o:(o="L"+o.substring(1),a+=o,a+="Z"),a}class ch extends fr{constructor(){super(...arguments),this.name="axis-grid",this.data=[]}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}render(){this._prevInnerView=this._innerView&&oit(this._innerView),this.removeAllChild(!0),this._innerView=Mt.group({x:0,y:0,pickable:!1}),this.add(this._innerView);const{items:t,visible:e}=this.attribute;t&&t.length&&e!==!1&&(this.data=this._transformItems(t),this._renderGrid(this._innerView))}getVerticalCoord(t,e,n){return GF(t,this.getVerticalVector(e,n,t))}_transformItems(t){const e=[];return t.forEach(n=>{var r;e.push(Object.assign(Object.assign({},n),{point:this.getTickCoord(n.value),id:(r=n.id)!==null&&r!==void 0?r:n.label}))}),e}_renderGrid(t){const{visible:e}=this.attribute.subGrid||{};e&&this._renderGridByType(!0,t),this._renderGridByType(!1,t)}_renderGridByType(t,e){const n=ot({},this.attribute,this.getGridAttribute(t)),{type:r,items:s,style:a,closed:o,alternateColor:l,depth:u=0}=n,c=t?`${Cn.grid}-sub`:`${Cn.grid}`;if(s.forEach((h,d)=>{const{id:f,points:p}=h;let g="";if(r==="line"||r==="polygon")g=hd(p,!!o);else if(r==="circle"){const{center:_}=this.attribute;g=QI(_,p,!1,!!o)}const m=Mt.path(Object.assign({path:g,z:u},it(a)?ot({},this.skipDefault?null:ch.defaultAttributes.style,a(h,d)):a));m.name=`${c}-line`,m.id=this._getNodeId(`${c}-path-${f}`),e.add(m)}),u&&r==="line"&&s.forEach((h,d)=>{const{id:f,points:p}=h,g=[];g.push(p[0]);const m=p[1].x-p[0].x,_=p[1].y-p[0].y,v=Math.sqrt(m*m+_*_),y=u/v;g.push({x:p[0].x+m*y,y:p[0].y+_*y});const b=hd(g,!!o),x=xe(g[0].x-g[1].x),S=xe(g[0].y-g[1].y),w=Mt.path(Object.assign({path:b,z:0,alpha:x>S?(p[1].x-p[0].x>0?-1:1)*Xe/2:0,beta:x<S?-Xe/2:0,anchor3d:x>S?[g[0].x,0]:[0,g[0].y]},it(a)?ot({},this.skipDefault?null:ch.defaultAttributes.style,a(h,d)):a));w.name=`${c}-line`,w.id=this._getNodeId(`${c}-path-${f}`),e.add(w)}),s.length>1&&l){const h=J(l)?l:[l,"transparent"],d=b=>h[b%h.length],f=this.attribute.items,p=f[0],g=f[f.length-1],m=!sn(p.value,0)&&!sn(g.value,0),_=!sn(p.value,1)&&!sn(g.value,1),v=[],y=p.value>g.value;(y&&_||!y&&m)&&v.push(this.getGridPointsByValue(y?1:0)),s.forEach(b=>{v.push(b.points)}),(y&&m||!y&&_)&&v.push(this.getGridPointsByValue(y?0:1));for(let b=0;b<v.length-1;b++){const x=t$t(v[b],v[b+1],n),S=Mt.path({path:x,fill:d(b)});S.name=`${c}-region`,S.id=this._getNodeId(`${c}-region-${b}`),e.add(S)}}}_getNodeId(t){return`${this.id}-${t}`}_parseTickSegment(){let t=1;return this.data.length>=2&&(t=this.data[1].value-this.data[0].value),t}_getPointsOfSubGrid(t,e){const n=this.data.length,r=[];return n>=2&&this.data.forEach(s=>{let a=s.value;if(!e){const o=s.value-t/2;if(this.isInValidValue(o))return;a=o}r.push({value:a})}),r}release(){super.release(),this._prevInnerView=null,this._innerView=null}}ch.defaultAttributes={style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]},subGrid:{visible:!1,style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]}}};UVt();class Ph extends ch{constructor(t,e){super(e?.skipDefault?t:ot({},ch.defaultAttributes,t),e)}_getGridPoint(t,e){let n;if(t==="line"){const{length:r}=this.attribute;n=[e,this.getVerticalCoord(e,r,!0)]}else if(t==="circle"||t==="polygon"){const{center:r,sides:s=6,startAngle:a=tm,endAngle:o=em}=this.attribute,l=Je.distancePP(r,e);n=lit(r,s,l,a,o)}return n}getGridPointsByValue(t){const e=this.getTickCoord(t);return this._getGridPoint(this.attribute.type,e)}getGridAttribute(t){const{type:e,alignWithLabel:n=!0}=this.attribute,r=this._parseTickSegment();let s,a=[];if(t){s=ot({},this.attribute,this.attribute.subGrid);const o=[],{count:l=4}=s;if(this.data.length>=2){const u=this._getPointsOfSubGrid(r,n);for(let c=0;c<u.length-1;c++){const h=u[c],d=u[c+1];o.push({id:`sub-${c}-0`,points:this.getGridPointsByValue(h.value),datum:{}});for(let f=0;f<l;f++){const p=(f+1)/(l+1),g=(1-p)*h.value+p*d.value;o.push({id:`sub-${c}-${f+1}`,points:this.getGridPointsByValue(g),datum:{}})}c===u.length-2&&o.push({id:`sub-${c}-${l+1}`,points:this.getGridPointsByValue(d.value),datum:{}})}a=o}}else{s=this.attribute;const o=[];this.data.forEach(l=>{let{point:u}=l;if(!n){const c=l.value-r/2;if(this.isInValidValue(c))return;u=this.getTickCoord(c)}o.push({id:l.label,datum:l,points:this._getGridPoint(e,u)})}),a=o}return Object.assign(Object.assign({},s),{items:a})}}Be(Ph,_it);var e$t=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};GVt();class JF extends ch{constructor(t,e){super(e?.skipDefault?t:ot({},ch.defaultAttributes,t),e)}getGridPointsByValue(t){const e=this.getTickCoord(t),{radius:n,innerRadius:r=0}=this.attribute;return[e,this.getVerticalCoord(e,n-r,!0)]}getGridAttribute(t){let e,n=[];const r=this.attribute,{radius:s,innerRadius:a=0,startAngle:o=tm,endAngle:l=em,center:u,subGrid:c}=r,h=e$t(r,["radius","innerRadius","startAngle","endAngle","center","subGrid"]),{alignWithLabel:d=!0}=h||{},f=s-a,p=this._parseTickSegment();if(t){e=ot({},h,c);const g=[],{count:m=4}=c||{},_=this.data.length;if(_>=2){const v=this._getPointsOfSubGrid(p,d);for(let y=0;y<_;y++){const b=v[y],x=v[y+1];g.push({id:`sub-${y}-0`,points:[this.getTickCoord(b.value),this.getVerticalCoord(this.getTickCoord(b.value),f,!0)],datum:{}});for(let S=0;S<m;S++){const w=(S+1)/(m+1),A=(1-w)*b.value+w*(x?x.value:d?1:b.value+p),k=this.getTickCoord(A),C=this.getVerticalCoord(k,f,!0);g.push({id:`sub-${y}-${S+1}`,points:[k,C],datum:{}})}}Math.abs(l-o)%(2*Math.PI)==0&&g.push(g[0]),n=g}}else{e=h;const g=[];let m;m=Math.abs(l-o)%(2*Math.PI)==0?[...this.data].concat(this.data[0]):this.data,m.forEach(_=>{let{point:v}=_;if(!d){const b=_.value-p/2;if(this.isInValidValue(b))return;v=this.getTickCoord(b)}const y=this.getVerticalCoord(v,f,!0);g.push({id:_.id,points:[v,y],datum:_})}),n=g}return Object.assign(Object.assign({},e),{items:n,center:u,type:"line"})}}Be(JF,Vit);var Is;(function(i){i.startHandler="startHandler",i.endHandler="endHandler",i.middleHandler="middleHandler",i.background="background"})(Is||(Is={}));var Cl;(function(i){i.stateUpdate="stateUpdate",i.maskUpdate="maskUpdate",i.dataZoomUpdate="dataZoomUpdate"})(Cl||(Cl={}));var ok;(function(i){i.dataZoomChange="dataZoomChange"})(ok||(ok={}));const L4="M -0.0544 0.25 C -0.0742 0.25 -0.0901 0.234 -0.0901 0.2143 L -0.0901 -0.1786 C -0.0901 -0.1983 -0.0742 -0.2143 -0.0544 -0.2143 L -0.0187 -0.2143 L -0.0187 -0.5 L 0.017 -0.5 L 0.017 -0.2143 L 0.0527 -0.2143 C 0.0724 -0.2143 0.0884 -0.1983 0.0884 -0.1786 L 0.0884 0.2143 C 0.0884 0.234 0.0724 0.25 0.0527 0.25 L 0.017 0.25 L 0.017 0.5 L -0.0187 0.5 L -0.0187 0.25 L -0.0544 0.25 Z M -0.0187 -0.1429 L -0.0544 -0.1429 L -0.0544 0.1786 L -0.0187 0.1786 L -0.0187 -0.1429 Z M 0.0527 -0.1429 L 0.017 -0.1429 L 0.017 0.1786 L 0.0527 0.1786 L 0.0527 -0.1429 Z",i$t={orient:"bottom",showDetail:"auto",brushSelect:!0,zoomLock:!1,minSpan:0,maxSpan:1,delayType:"throttle",delayTime:0,realTime:!0,backgroundStyle:{fill:"white",stroke:"#D1DBEE",lineWidth:1,cornerRadius:2},dragMaskStyle:{fill:"#B0C8F9",fillOpacity:.2},backgroundChartStyle:{area:{visible:!0,stroke:"#D1DBEE",lineWidth:1,fill:"#F6F8FC"},line:{visible:!0,stroke:"#D1DBEE",lineWidth:1}},selectedBackgroundStyle:{fill:"#B0C8F9",fillOpacity:.5},selectedBackgroundChartStyle:{area:{visible:!0,stroke:"#B0C8F9",lineWidth:1,fill:"#fbb934"},line:{visible:!0,stroke:"#fbb934",lineWidth:1}},middleHandlerStyle:{visible:!0,background:{size:8,style:{fill:"white",stroke:"#B0C8F9",cornerRadius:2}},icon:{size:6,fill:"white",stroke:"#B0C8F9",symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}},startHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:L4,fill:"white",stroke:"#B0C8F9",lineWidth:.5},endHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:L4,fill:"white",stroke:"#B0C8F9",lineWidth:.5},startTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}},endTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}}},gc={horizontal:{angle:0,strokeBoundsBuffer:0,boundsPadding:2,pickMode:"imprecise",cursor:"ew-resize"},vertical:{angle:Math.PI/180*90,cursor:"ns-resize",boundsPadding:2,pickMode:"imprecise",strokeBoundsBuffer:0}},ES=(i,t,e,n)=>{if(!t)return!1;if(n){if(e==="start"){if(t.x1<i.x1)return!0}else if(t.x2>i.x2)return!0}else if(e==="start"){if(t.y1<i.y1)return!0}else if(t.y2>i.y2)return!0;return!1};var B4=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class n$t{get startHandlerMask(){return this._startHandlerMask}get middleHandlerSymbol(){return this._middleHandlerSymbol}get middleHandlerRect(){return this._middleHandlerRect}get endHandlerMask(){return this._endHandlerMask}get selectedBackground(){return this._selectedBackground}get dragMask(){return this._dragMask}get startText(){return this._startText}get endText(){return this._endText}get startValue(){return this._startValue}get endValue(){return this._endValue}set showText(t){this._showText=t}get background(){return this._background}set previewData(t){this._previewData=t}get previewGroup(){return this._previewGroup}get selectedPreviewGroup(){return this._selectedPreviewGroup}set previewPointsX(t){this._previewPointsX=t}set previewPointsY(t){this._previewPointsY=t}set previewPointsX1(t){this._previewPointsX1=t}set previewPointsY1(t){this._previewPointsY1=t}set statePointToData(t){this._statePointToData=t}_initAttrs(t){this.attribute=t.attribute,this._isHorizontal=this.attribute.orient==="top"||this.attribute.orient==="bottom";const{previewData:e,previewPointsX:n,previewPointsY:r,previewPointsX1:s,previewPointsY1:a}=this.attribute;e&&(this._previewData=e),it(n)&&(this._previewPointsX=n),it(r)&&(this._previewPointsY=r),it(s)&&(this._previewPointsX1=s),it(a)&&(this._previewPointsY1=a),this._getState=t.getState,this._getLayoutAttrFromConfig=t.getLayoutAttrFromConfig,this._getContainer=t.getContainer}constructor(t){this._previewData=[],this._statePointToData=n=>n;const{showDetail:e}=t.attribute;this._showText=e!=="auto"&&e,this._initAttrs(t)}setAttributes(t){this._initAttrs(t)}renderDataZoom(t=!1){var e,n,r,s,a,o;const{backgroundChartStyle:l={},selectedBackgroundChartStyle:u={},brushSelect:c}=this.attribute;this._renderBackground(),!((e=l.line)===null||e===void 0)&&e.visible&&!t&&this._setPreviewAttributes("line",this._getContainer()),!((n=l.area)===null||n===void 0)&&n.visible&&!t&&this._setPreviewAttributes("area",this._getContainer()),c&&this.renderDragMask(),this._renderSelectedBackground(),!((r=u.line)===null||r===void 0)&&r.visible&&this._setSelectedPreviewClipAttributes("line",this._getContainer()),!((s=u.line)===null||s===void 0)&&s.visible&&!t&&this._setSelectedPreviewAttributes("line"),!((a=u.line)===null||a===void 0)&&a.visible&&this._setSelectedPreviewClipAttributes("area",this._getContainer()),!((o=u.area)===null||o===void 0)&&o.visible&&!t&&this._setSelectedPreviewAttributes("area"),this._renderHandler(),this._showText&&this.renderText()}renderDragMask(){const{dragMaskStyle:t}=this.attribute,{position:e,width:n,height:r}=this._getLayoutAttrFromConfig(),{start:s,end:a}=this._getState();return this._isHorizontal?this._dragMask=this._getContainer().createOrUpdateChild("dragMask",Object.assign({x:e.x+s*n,y:e.y,width:(a-s)*n,height:r},t),"rect"):this._dragMask=this._getContainer().createOrUpdateChild("dragMask",Object.assign({x:e.x,y:e.y+s*r,width:n,height:(a-s)*r},t),"rect"),{start:s,end:a}}_renderBackground(){var t;const{backgroundStyle:e,brushSelect:n,zoomLock:r}=this.attribute,{position:s,width:a,height:o}=this._getLayoutAttrFromConfig(),l=this._getContainer();this._background=l.createOrUpdateChild("background",Object.assign(Object.assign({x:s.x,y:s.y,width:a,height:o,cursor:n?"crosshair":"auto"},e),{pickable:!r&&((t=e.pickable)===null||t===void 0||t)}),"rect")}_renderHandler(){var t,e,n,r,s,a,o,l,u,c,h,d,f,p,g,m,_,v,y,b,x,S,w,A,k,C,M;const{orient:R,middleHandlerStyle:P={},startHandlerStyle:O={},endHandlerStyle:T={},zoomLock:D}=this.attribute,{start:B,end:I}=this._getState(),{position:F,width:j,height:H}=this._getLayoutAttrFromConfig(),U=(t=O.triggerMinSize)!==null&&t!==void 0?t:40,K=(e=T.triggerMinSize)!==null&&e!==void 0?e:40,q=this._getContainer();if(this._isHorizontal){if(P.visible){const pt=((n=P.background)===null||n===void 0?void 0:n.size)||10;this._middleHandlerRect=q.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:F.x+B*j,y:F.y-pt,width:(I-B)*j,height:pt},(r=P.background)===null||r===void 0?void 0:r.style),{pickable:!D&&((o=(a=(s=P.background)===null||s===void 0?void 0:s.style)===null||a===void 0?void 0:a.pickable)===null||o===void 0||o)}),"rect"),this._middleHandlerSymbol=q.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:F.x+(B+I)/2*j,y:F.y-pt/2,strokeBoundsBuffer:0,angle:0,symbolType:(u=(l=P.icon)===null||l===void 0?void 0:l.symbolType)!==null&&u!==void 0?u:"square"},P.icon),{pickable:!D&&((c=P.icon.pickable)===null||c===void 0||c)}),"symbol")}this._startHandler=q.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:F.x+B*j,y:F.y+H/2,size:H,symbolType:(h=O.symbolType)!==null&&h!==void 0?h:"square"},gc.horizontal),O),{pickable:!D&&((d=O.pickable)===null||d===void 0||d)}),"symbol"),this._endHandler=q.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:F.x+I*j,y:F.y+H/2,size:H,symbolType:(f=T.symbolType)!==null&&f!==void 0?f:"square"},gc.horizontal),T),{pickable:!D&&((p=T.pickable)===null||p===void 0||p)}),"symbol");const Z=Math.max(this._startHandler.AABBBounds.width(),U),at=Math.max(this._startHandler.AABBBounds.height(),U),$=Math.max(this._endHandler.AABBBounds.width(),K),ft=Math.max(this._endHandler.AABBBounds.height(),K);this._startHandlerMask=q.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:F.x+B*j-Z/2,y:F.y+H/2-at/2,width:Z,height:at,fill:"white",fillOpacity:0,zIndex:999},gc.horizontal),{pickable:!D}),"rect"),this._endHandlerMask=q.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:F.x+I*j-$/2,y:F.y+H/2-ft/2,width:$,height:ft,fill:"white",fillOpacity:0,zIndex:999},gc.horizontal),{pickable:!D}),"rect")}else{if(P.visible){const pt=((g=P.background)===null||g===void 0?void 0:g.size)||10;this._middleHandlerRect=q.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:R==="left"?F.x-pt:F.x+j,y:F.y+B*H,width:pt,height:(I-B)*H},(m=P.background)===null||m===void 0?void 0:m.style),{pickable:!D&&((y=(v=(_=P.background)===null||_===void 0?void 0:_.style)===null||v===void 0?void 0:v.pickable)===null||y===void 0||y)}),"rect"),this._middleHandlerSymbol=q.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:R==="left"?F.x-pt/2:F.x+j+pt/2,y:F.y+(B+I)/2*H,angle:Math.PI/180*90,symbolType:(x=(b=P.icon)===null||b===void 0?void 0:b.symbolType)!==null&&x!==void 0?x:"square",strokeBoundsBuffer:0},P.icon),{pickable:!D&&((w=(S=P.icon)===null||S===void 0?void 0:S.pickable)===null||w===void 0||w)}),"symbol")}this._startHandler=q.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:F.x+j/2,y:F.y+B*H,size:j,symbolType:(A=O.symbolType)!==null&&A!==void 0?A:"square"},gc.vertical),O),{pickable:!D&&((k=O.pickable)===null||k===void 0||k)}),"symbol"),this._endHandler=q.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:F.x+j/2,y:F.y+I*H,size:j,symbolType:(C=T.symbolType)!==null&&C!==void 0?C:"square"},gc.vertical),T),{pickable:!D&&((M=T.pickable)===null||M===void 0||M)}),"symbol");const Z=Math.max(this._startHandler.AABBBounds.width(),U),at=Math.max(this._startHandler.AABBBounds.height(),U),$=Math.max(this._endHandler.AABBBounds.width(),K),ft=Math.max(this._endHandler.AABBBounds.height(),K);this._startHandlerMask=q.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:F.x+j/2+Z/2,y:F.y+B*H-at/2,width:ft,height:$,fill:"white",fillOpacity:0,zIndex:999},gc.vertical),{pickable:!D}),"rect"),this._endHandlerMask=q.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:F.x+j/2+$/2,y:F.y+I*H-ft/2,width:ft,height:$,fill:"white",fillOpacity:0,zIndex:999},gc.vertical),{pickable:!D}),"rect")}}_renderSelectedBackground(){var t,e;const{selectedBackgroundStyle:n={},selectedBackgroundChartStyle:r={},brushSelect:s,zoomLock:a}=this.attribute,{start:o,end:l}=this._getState(),{position:u,width:c,height:h}=this._getLayoutAttrFromConfig(),d=this._getContainer();this._isHorizontal?this._selectedBackground=d.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:u.x+o*c,y:u.y,width:(l-o)*c,height:h,cursor:s?"crosshair":"move"},n),{pickable:!a&&((t=r.pickable)===null||t===void 0||t)}),"rect"):this._selectedBackground=d.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:u.x,y:u.y+o*h,width:c,height:(l-o)*h,cursor:s?"crosshair":"move"},n),{pickable:!a&&((e=n.pickable)===null||e===void 0||e)}),"rect")}_setPreviewAttributes(t,e){this._previewGroup||(this._previewGroup=e.createOrUpdateChild("previewGroup",{pickable:!1},"group")),t==="line"?this._previewLine=this._previewGroup.createOrUpdateChild("previewLine",{},"line"):this._previewArea=this._previewGroup.createOrUpdateChild("previewArea",{curveType:"basis"},"area");const{backgroundChartStyle:n={}}=this.attribute;t==="line"&&this._previewLine.setAttributes(Object.assign({points:this._getPreviewLinePoints(),curveType:"basis",pickable:!1},n.line)),t==="area"&&this._previewArea.setAttributes(Object.assign({points:this._getPreviewAreaPoints(),curveType:"basis",pickable:!1},n.area))}_setSelectedPreviewClipAttributes(t,e){this._selectedPreviewGroupClip||(this._selectedPreviewGroupClip=e.createOrUpdateChild("selectedPreviewGroupClip",{pickable:!1},"group"),this._selectedPreviewGroup=this._selectedPreviewGroupClip.createOrUpdateChild("selectedPreviewGroup",{},"group"));const{start:n,end:r}=this._getState(),{position:s,width:a,height:o}=this._getLayoutAttrFromConfig();this._selectedPreviewGroupClip.setAttributes({x:this._isHorizontal?s.x+n*a:s.x,y:this._isHorizontal?s.y:s.y+n*o,width:this._isHorizontal?(r-n)*a:a,height:this._isHorizontal?o:(r-n)*o,clip:!0,pickable:!1}),this._selectedPreviewGroup.setAttributes({x:-(this._isHorizontal?s.x+n*a:s.x),y:-(this._isHorizontal?s.y:s.y+n*o),width:this._isHorizontal?(r-n)*a:a,height:this._isHorizontal?o:(r-n)*o,pickable:!1})}_setSelectedPreviewAttributes(t){const{selectedBackgroundChartStyle:e={}}=this.attribute;t==="line"?this._selectedPreviewLine=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewLine",{},"line"):this._selectedPreviewArea=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewArea",{curveType:"basis"},"area"),t==="line"&&this._selectedPreviewLine.setAttributes(Object.assign({points:this._getPreviewLinePoints(),curveType:"basis",pickable:!1},e.line)),t==="area"&&this._selectedPreviewArea.setAttributes(Object.assign({points:this._getPreviewAreaPoints(),curveType:"basis",pickable:!1},e.area))}_computeBasePoints(t){const{orient:e}=this.attribute,n=e==="bottom"||e==="top"?"x":"y";let r=Math.sign(t[t.length-1][n]-t[0][n]);r===0&&(r=1);const{position:s,width:a,height:o}=this._getLayoutAttrFromConfig();let l,u;return this._isHorizontal?(l=[{x:s.x,y:s.y+o}],u=[{x:s.x+a,y:s.y+o}]):e==="left"?(l=[{x:s.x+a,y:s.y}],u=[{x:s.x+a,y:s.y+o}]):(l=[{x:s.x,y:s.y+o}],u=[{x:s.x,y:s.y}]),Math.sign(u[0][n]-l[0][n])!==r?{basePointStart:u,basePointEnd:l}:{basePointStart:l,basePointEnd:u}}_simplifyPoints(t){var e;if(t.length>1e4){const n=(e=this.attribute.tolerance)!==null&&e!==void 0?e:this._previewData.length/1e4;return RFt(t,n)}return t}_getPreviewLinePoints(){let t=this._previewData.map(r=>({x:this._previewPointsX&&this._previewPointsX(r),y:this._previewPointsY&&this._previewPointsY(r)}));if(t.length===0)return t;t=this._simplifyPoints(t);const{basePointStart:e,basePointEnd:n}=this._computeBasePoints(t);return e.concat(t).concat(n)}_getPreviewAreaPoints(){let t=this._previewData.map(r=>({x:this._previewPointsX&&this._previewPointsX(r),y:this._previewPointsY&&this._previewPointsY(r),x1:this._previewPointsX1&&this._previewPointsX1(r),y1:this._previewPointsY1&&this._previewPointsY1(r)}));if(t.length===0)return t;t=this._simplifyPoints(t);const{basePointStart:e,basePointEnd:n}=this._computeBasePoints(t);return e.concat(t).concat(n)}renderText(){let t=null,e=null;if(this._setTextAttr(t,e),this._showText){t=this._startText.AABBBounds,e=this._endText.AABBBounds,this._setTextAttr(t,e),t=this._startText.AABBBounds,e=this._endText.AABBBounds;const{x1:n,x2:r,y1:s,y2:a}=t,{dx:o=0,dy:l=0}=this.attribute.startTextStyle;if(new ir().set(n,s,r,a).intersects(e)){const u=this.attribute.orient==="bottom"||this.attribute.orient==="right"?-1:1;this._isHorizontal?this._startText.setAttribute("dy",l+u*Math.abs(e.y1-e.y2)):this._startText.setAttribute("dx",o+u*Math.abs(e.x1-e.x2))}else this._isHorizontal?this._startText.setAttribute("dy",l):this._startText.setAttribute("dx",o)}}_setTextAttr(t,e){var n,r,s,a,o,l,u,c;const{startTextStyle:h,endTextStyle:d}=this.attribute,{formatMethod:f}=h,p=B4(h,["formatMethod"]),{formatMethod:g}=d,m=B4(d,["formatMethod"]),{start:_,end:v}=this._getState();this._startValue=this._statePointToData(_),this._endValue=this._statePointToData(v);const{position:y,width:b,height:x}=this._getLayoutAttrFromConfig(),S=f?f(this._startValue):this._startValue,w=g?g(this._endValue):this._endValue,A={x1:y.x,y1:y.y,x2:y.x+b,y2:y.y+x};let k,C,M,R;this._isHorizontal?(k={x:y.x+_*b,y:y.y+x/2},C={x:y.x+v*b,y:y.y+x/2},M={textAlign:ES(A,t,"start",this._isHorizontal)?"left":"right",textBaseline:(r=(n=p?.textStyle)===null||n===void 0?void 0:n.textBaseline)!==null&&r!==void 0?r:"middle"},R={textAlign:ES(A,e,"end",this._isHorizontal)?"right":"left",textBaseline:(a=(s=m?.textStyle)===null||s===void 0?void 0:s.textBaseline)!==null&&a!==void 0?a:"middle"}):(k={x:y.x+b/2,y:y.y+_*x},C={x:y.x+b/2,y:y.y+v*x},M={textAlign:(l=(o=p?.textStyle)===null||o===void 0?void 0:o.textAlign)!==null&&l!==void 0?l:"center",textBaseline:ES(A,t,"start",this._isHorizontal)?"top":"bottom"},R={textAlign:(c=(u=m?.textStyle)===null||u===void 0?void 0:u.textAlign)!==null&&c!==void 0?c:"center",textBaseline:ES(A,e,"end",this._isHorizontal)?"bottom":"top"}),this._startText=this._maybeAddLabel(this._getContainer(),ot({},p,{text:S,x:k.x,y:k.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:M}),"data-zoom-start-text"),this._endText=this._maybeAddLabel(this._getContainer(),ot({},m,{text:w,x:C.x,y:C.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:R}),"data-zoom-end-text")}_maybeAddLabel(t,e,n){let r=t.find(s=>s.name===n,!0);return r?r.setAttributes(e):(r=new qo(e),r.name=n,t.add(r)),r}}const r$t={debounce:pf,throttle:ac};class s$t extends kh{constructor(t){super(),this._activeState=!1,this._activeCache={startPos:{x:0,y:0},lastPos:{x:0,y:0}},this._layoutCache={attPos:"x",attSize:"width",size:0},this._handleTouchMove=e=>{this._activeState&&e.preventDefault()},this._onHandlerPointerDown=(e,n)=>{this.clearDragEvents(),n==="start"?(this._activeTag=Is.startHandler,this._activeItem=this._startHandlerMask):n==="end"?(this._activeTag=Is.endHandler,this._activeItem=this._endHandlerMask):n==="middleRect"?(this._activeTag=Is.middleHandler,this._activeItem=this._middleHandlerRect):n==="middleSymbol"?(this._activeTag=Is.middleHandler,this._activeItem=this._middleHandlerSymbol):n==="background"&&(this._activeTag=Is.background,this._activeItem=this._background),this._activeState=!0,this._activeCache.startPos=this._eventPosToStagePos(e),this._activeCache.lastPos=this._eventPosToStagePos(e);const r=Qt.env==="browser"?Qt:this.stage,s=Ad();r.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.on("pointermove",this._onHandlerPointerMove,{capture:!0}),s.forEach(a=>{r.addEventListener(a,this._onHandlerPointerUp)})},this._pointerMove=e=>{const{brushSelect:n}=this.attribute,{position:r}=this._getLayoutAttrFromConfig(),s=this._eventPosToStagePos(e),{attPos:a,size:o,attSize:l}=this._layoutCache,u=(s[a]-this._activeCache.lastPos[a])/o,c=(s[a]-r[a])/this._getLayoutAttrFromConfig()[l];let{start:h,end:d}=this._getState(),f=!0;this._activeState&&(this._activeTag===Is.middleHandler?{start:h,end:d}=this._moveZoomWithMiddle(u):this._activeTag===Is.startHandler?{start:h,end:d}=this._moveZoomWithHandler(c,"start"):this._activeTag===Is.endHandler?{start:h,end:d}=this._moveZoomWithHandler(c,"end"):this._activeTag===Is.background&&n&&({start:h,end:d}=this._moveZoomWithBackground(c),f=!1,this._dispatchEvent(Cl.maskUpdate)),this._activeCache.lastPos=s),this._getState().start===h&&this._getState().end===d||(this._setStateAttr(h,d),this._dispatchEvent(Cl.stateUpdate,{start:this._getState().start,end:this._getState().end,shouldRender:f,tag:this._activeTag}),this.attribute.realTime&&this._dispatchEvent(Cl.dataZoomUpdate,{start:this._getState().start,end:this._getState().end,shouldRender:!0,tag:this._activeTag}))},this._onHandlerPointerUp=e=>{this._activeState&&this._activeTag===Is.background&&(this._setStateAttr(this._getState().start,this._getState().end),this._dispatchEvent(Cl.stateUpdate,{start:this._getState().start,end:this._getState().end,shouldRender:!0,tag:this._activeTag})),this._activeState=!1,this._dispatchEvent(Cl.dataZoomUpdate,{start:this._getState().start,end:this._getState().end,shouldRender:!0,tag:this._activeTag}),this.clearDragEvents()},this._initAttrs(t)}setAttributes(t){var e,n,r,s,a,o;this._initAttrs(t),this._onHandlerPointerMove=((n=(e=this.attribute)===null||e===void 0?void 0:e.delayTime)!==null&&n!==void 0?n:0)===0?this._pointerMove:r$t[(s=(r=this.attribute)===null||r===void 0?void 0:r.delayType)!==null&&s!==void 0?s:"debounce"](this._pointerMove,(o=(a=this.attribute)===null||a===void 0?void 0:a.delayTime)!==null&&o!==void 0?o:0)}_initAttrs(t){this.stage=t.stage,this.attribute=t.attribute,this._startHandlerMask=t.startHandlerMask,this._endHandlerMask=t.endHandlerMask,this._middleHandlerSymbol=t.middleHandlerSymbol,this._middleHandlerRect=t.middleHandlerRect,this._selectedBackground=t.selectedBackground,this._background=t.background,this._previewGroup=t.previewGroup,this._selectedPreviewGroup=t.selectedPreviewGroup,this._getLayoutAttrFromConfig=t.getLayoutAttrFromConfig,this._getState=t.getState,this._setState=t.setState;const{width:e,height:n}=this._getLayoutAttrFromConfig();this._spanCache=this._getState().end-this._getState().start;const r=this.attribute.orient==="top"||this.attribute.orient==="bottom";this._layoutCache.size=r?e:n,this._layoutCache.attPos=r?"x":"y",this._layoutCache.attSize=r?"width":"height",this._getGlobalTransMatrix=t.getGlobalTransMatrix}clearDragEvents(){const t=Qt.env==="browser"?Qt:this.stage,e=Ad();t.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),e.forEach(n=>{t.removeEventListener(n,this._onHandlerPointerUp)}),this.off("pointermove",this._onHandlerPointerMove,{capture:!0})}clearVGlobalEvents(){(Qt.env==="browser"?Qt:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1})}bindEvents(){var t,e,n,r,s,a,o,l;const{brushSelect:u}=this.attribute;(t=this._startHandlerMask)===null||t===void 0||t.addEventListener("pointerdown",h=>this._onHandlerPointerDown(h,"start")),(e=this._endHandlerMask)===null||e===void 0||e.addEventListener("pointerdown",h=>this._onHandlerPointerDown(h,"end")),(n=this._middleHandlerSymbol)===null||n===void 0||n.addEventListener("pointerdown",h=>this._onHandlerPointerDown(h,"middleSymbol")),(r=this._middleHandlerRect)===null||r===void 0||r.addEventListener("pointerdown",h=>this._onHandlerPointerDown(h,"middleRect"));const c=u?"background":"middleRect";(s=this._selectedBackground)===null||s===void 0||s.addEventListener("pointerdown",h=>this._onHandlerPointerDown(h,c)),u&&((a=this._background)===null||a===void 0||a.addEventListener("pointerdown",h=>this._onHandlerPointerDown(h,"background"))),u&&((o=this._previewGroup)===null||o===void 0||o.addEventListener("pointerdown",h=>this._onHandlerPointerDown(h,"background"))),(l=this._selectedPreviewGroup)===null||l===void 0||l.addEventListener("pointerdown",h=>this._onHandlerPointerDown(h,c)),(Qt.env==="browser"?Qt:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1})}_setStateAttr(t,e){const{zoomLock:n=!1,minSpan:r=0,maxSpan:s=1}=this.attribute,a=e-t;a!==this._spanCache&&(n||a<r||a>s)||(this._spanCache=a,this._setState({start:t,end:e}))}_moveZoomWithMiddle(t){const{start:e,end:n}=this._getState();return t>0&&n+t>1?t=1-n:t<0&&e+t<0&&(t=-e),{start:Ke(e+t,0,1),end:Ke(n+t,0,1)}}_moveZoomWithHandler(t,e){const{start:n,end:r}=this._getState();let s=n,a=r;return e==="start"?t>r?(s=r,a=t,this._activeTag=Is.endHandler):s=t:e==="end"&&(t<n?(a=n,s=t,this._activeTag=Is.startHandler):a=t),{start:Ke(s,0,1),end:Ke(a,0,1)}}_moveZoomWithBackground(t){const{position:e}=this._getLayoutAttrFromConfig(),{attSize:n}=this._layoutCache,r=(this._activeCache.startPos[this._layoutCache.attPos]-e[this._layoutCache.attPos])/this._getLayoutAttrFromConfig()[n],s=t;let a=Ke(r,0,1),o=Ke(s,0,1);return a>o&&([a,o]=[o,a]),{start:a,end:o}}_eventPosToStagePos(t){var e,n;const r={x:0,y:0},s=(n=(e=this.stage)===null||e===void 0?void 0:e.eventPointTransform(t))!==null&&n!==void 0?n:{x:0,y:0};return this._getGlobalTransMatrix().transformPoint(s,r),r}_dispatchEvent(t,e){this.emit(t,e)}}function a$t(){BM(),tu(),Ta(),jF(),Jl()}a$t();let ont=class lnt extends fr{constructor(t,e){super(e?.skipDefault?t:ot({},lnt.defaultAttributes,t)),this.name="dataZoom",this._state={start:0,end:1},this.getLayoutAttrFromConfig=()=>{var a,o,l,u,c,h;if(this._layoutCacheFromConfig)return this._layoutCacheFromConfig;const{position:d,size:f,orient:p,middleHandlerStyle:g={},startHandlerStyle:m={},endHandlerStyle:_={},backgroundStyle:v={}}=this.attribute,{width:y,height:b}=f,x=(o=(a=g.background)===null||a===void 0?void 0:a.size)!==null&&o!==void 0?o:10;let S,w,A;g.visible?this._isHorizontal?(S=y,w=b-x,A={x:d.x,y:d.y+x}):(S=y-x,w=b,A={x:d.x+(p==="left"?x:0),y:d.y}):(S=y,w=b,A=d);const k=(l=m.size)!==null&&l!==void 0?l:this._isHorizontal?w:S,C=(u=_.size)!==null&&u!==void 0?u:this._isHorizontal?w:S;return m.visible&&(this._isHorizontal?(S-=(k+C)/2,A={x:A.x+k/2,y:A.y}):(w-=(k+C)/2,A={x:A.x,y:A.y+k/2})),w+=((c=v.lineWidth)!==null&&c!==void 0?c:2)/2,S+=((h=v.lineWidth)!==null&&h!==void 0?h:2)/2,this._layoutCacheFromConfig={position:A,width:S,height:w},this._layoutCacheFromConfig};const{start:n,end:r,orient:s}=this.attribute;this._isHorizontal=s==="top"||s==="bottom",n&&(this._state.start=n),r&&(this._state.end=r),this._renderer=new n$t(this._getRendererAttrs()),this._interaction=new s$t(this._getInteractionAttrs())}_getRendererAttrs(){return{attribute:this.attribute,getLayoutAttrFromConfig:this.getLayoutAttrFromConfig,setState:t=>{this._state=t},getState:()=>this._state,getContainer:()=>this._container}}_getInteractionAttrs(){return{stage:this.stage,attribute:this.attribute,startHandlerMask:this._renderer.startHandlerMask,endHandlerMask:this._renderer.endHandlerMask,middleHandlerSymbol:this._renderer.middleHandlerSymbol,middleHandlerRect:this._renderer.middleHandlerRect,selectedBackground:this._renderer.selectedBackground,background:this._renderer.background,previewGroup:this._renderer.previewGroup,selectedPreviewGroup:this._renderer.selectedPreviewGroup,getLayoutAttrFromConfig:this.getLayoutAttrFromConfig,setState:t=>{this._state=t},getState:()=>this._state,getGlobalTransMatrix:()=>this.globalTransMatrix}}bindEvents(){this.attribute.disableTriggerEvent?this.setAttribute("childrenPickable",!1):(this._interaction.bindEvents(),this._interaction.on(Cl.stateUpdate,({shouldRender:t})=>{t&&this._renderer.renderDataZoom(!0)}),this._interaction.on(Cl.dataZoomUpdate,({start:t,end:e,tag:n})=>{this._dispatchEvent(ok.dataZoomChange,{start:t,end:e,tag:n})}),this._interaction.on(Cl.maskUpdate,()=>{this._renderer.renderDragMask()}),this.attribute.showDetail==="auto"&&(this._container.addEventListener("pointerenter",()=>{this._renderer.showText=!0,this._renderer.renderText()}),this._container.addEventListener("pointerleave",()=>{this._renderer.showText=!1,this._renderer.renderText()})))}setAttributes(t,e){var n,r;const{start:s,end:a}=this.attribute;s&&(this._state.start=(n=t.start)!==null&&n!==void 0?n:s),a&&(this._state.end=(r=t.end)!==null&&r!==void 0?r:a),this._renderer.setAttributes(this._getRendererAttrs()),this._interaction.setAttributes(this._getInteractionAttrs()),super.setAttributes(t,e)}render(){this._layoutCacheFromConfig=null,this._container=this.createOrUpdateChild("datazoom-container",{},"group"),this._renderer.renderDataZoom(),this._interaction.setAttributes(this._getInteractionAttrs())}release(t){super.release(t),this._interaction.clearDragEvents()}setStartAndEnd(t,e){const{start:n,end:r}=this._state;L(t)&&L(e)&&(t!==n||e!==r)&&(this._state={start:t,end:e},this._renderer.renderDataZoom(!0),this._dispatchEvent(ok.dataZoomChange,{start:t,end:e}))}setPreviewData(t){this._renderer.previewData=t}setText(t,e){e==="start"?this._renderer.startText.setAttribute("text",t):this._renderer.endText.setAttribute("text",t)}getStartValue(){return this._renderer.startValue}getEndTextValue(){return this._renderer.endValue}getMiddleHandlerSize(){var t,e,n,r;const{middleHandlerStyle:s={}}=this.attribute,a=(e=(t=s.background)===null||t===void 0?void 0:t.size)!==null&&e!==void 0?e:10,o=(r=(n=s.icon)===null||n===void 0?void 0:n.size)!==null&&r!==void 0?r:10;return Math.max(a,...X(o))}setPreviewPointsX(t){it(t)&&(this._renderer.previewPointsX=t)}setPreviewPointsY(t){it(t)&&(this._renderer.previewPointsY=t)}setPreviewPointsX1(t){it(t)&&(this._renderer.previewPointsX1=t)}setPreviewPointsY1(t){it(t)&&(this._renderer.previewPointsY1=t)}setStatePointToData(t){it(t)&&(this._renderer.statePointToData=t)}};ont.defaultAttributes=i$t;var JI;(function(i){i.start="start",i.startTop="startTop",i.startBottom="startBottom",i.insideStart="insideStart",i.insideStartTop="insideStartTop",i.insideStartBottom="insideStartBottom",i.middle="middle",i.insideMiddleTop="insideMiddleTop",i.insideMiddleBottom="insideMiddleBottom",i.end="end",i.endTop="endTop",i.endBottom="endBottom",i.insideEnd="insideEnd",i.insideEndTop="insideEndTop",i.insideEndBottom="insideEndBottom"})(JI||(JI={}));var tL;(function(i){i.left="left",i.right="right",i.top="top",i.bottom="bottom",i.topLeft="topLeft",i.topRight="topRight",i.bottomLeft="bottomLeft",i.bottomRight="bottomRight",i.middle="middle",i.insideLeft="insideLeft",i.insideRight="insideRight",i.insideTop="insideTop",i.insideBottom="insideBottom",i.insideTopLeft="insideTopLeft",i.insideTopRight="insideTopRight",i.insideBottomLeft="insideBottomLeft",i.insideBottomRight="insideBottomRight"})(tL||(tL={}));var xr;(function(i){i.arcInnerStart="arcInnerStart",i.arcInnerEnd="arcInnerEnd",i.arcInnerMiddle="arcInnerMiddle",i.arcOuterStart="arcOuterStart",i.arcOuterEnd="arcOuterEnd",i.arcOuterMiddle="arcOuterMiddle",i.center="center"})(xr||(xr={}));var eL;(function(i){i.top="top",i.bottom="bottom",i.middle="middle",i.insideTop="insideTop",i.insideBottom="insideBottom",i.insideMiddle="insideMiddle"})(eL||(eL={}));function $b(){ln(),BM(),bf()}function o$t(){$b(),WF(),bf()}function l$t(){$b(),$F(),bf()}function u$t(){$b(),IM(),bf()}function c$t(){$b(),zm(),bf()}function h$t(){$b(),WF(),$F(),Ta(),Uet(),Jl(),bf()}class XM extends fr{constructor(){super(...arguments),this.name="marker",this._onHover=t=>{this._lastHover=uit(t,this._container,this._lastHover)},this._onUnHover=t=>{this._lastHover=cit(t,this._container,this._lastHover)},this._onClick=t=>{this._lastSelect=hit(t,this._container,this._lastSelect)}}transAnimationConfig(){var t,e,n;if(this.attribute.animation!==!1){const r=ee(this.attribute.animation)?this.attribute.animation:{};this._animationConfig={enter:ot({},this.defaultUpdateAnimation,r,(t=this.attribute.animationEnter)!==null&&t!==void 0?t:{}),exit:ot({},this.defaultExitAnimation,r,(e=this.attribute.animationExit)!==null&&e!==void 0?e:{}),update:ot({},this.defaultUpdateAnimation,r,(n=this.attribute.animationUpdate)!==null&&n!==void 0?n:{})}}}setAttribute(t,e,n){super.setAttribute(t,e,n),t==="visible"&&this.render()}_bindEvent(){var t,e,n;if(!this.attribute.interactive)return;const{hover:r,select:s}=this.attribute;r&&((t=this._container)===null||t===void 0||t.addEventListener("pointermove",this._onHover),(e=this._container)===null||e===void 0||e.addEventListener("pointerout",this._onUnHover)),s&&((n=this._container)===null||n===void 0||n.addEventListener("pointerdown",this._onClick))}_releaseEvent(){var t,e,n;(t=this._container)===null||t===void 0||t.removeEventListener("pointermove",this._onHover),(e=this._container)===null||e===void 0||e.removeEventListener("pointerout",this._onUnHover),(n=this._container)===null||n===void 0||n.removeEventListener("pointerdown",this._onClick)}_initContainer(){var t,e;const{limitRect:n={},clipInRange:r}=this.attribute;let s;if(r){const a=Mt.group(Object.assign(Object.assign({},n),{clip:!0,pickable:!1}));s=Mt.group({x:-((t=n.x)!==null&&t!==void 0?t:0),y:-((e=n.y)!==null&&e!==void 0?e:0),pickable:!1}),a.add(s),this._containerClip=a,this.add(a)}else s=Mt.group({x:0,y:0,pickable:!1}),this.add(s);s.name="marker-container",this._container=s}_updateContainer(){var t,e;const{limitRect:n={},clipInRange:r}=this.attribute;this._containerClip&&this._containerClip.setAttributes(Object.assign({},n)),this._container.setAttributes({x:r?-((t=n.x)!==null&&t!==void 0?t:0):0,y:r?-((e=n.y)!==null&&e!==void 0?e:0):0})}render(){var t;this.transAnimationConfig(),this.setAttribute("pickable",!1);const e=(t=this.attribute.visible)===null||t===void 0||t;this.attribute.interactive===!1&&this.setAttribute("childrenPickable",!1),e&&this.isValidPoints()?this._container?(this._updateContainer(),this.updateMarker(),this.markerAnimate("update")):(this._initContainer(),this.initMarker(this._container),this.markerAnimate("enter")):(this.markerAnimate("exit"),this._container=null,this.removeAllChild(!0)),this._releaseEvent(),this._bindEvent()}release(){this.markerAnimate("exit"),super.release(),this._releaseEvent(),this._container=null}}function Zn(i,t,e,n){var r,s,a,o,l;if(!i)return;(r=i?.animates)===null||r===void 0||r.forEach(h=>h.stop("end"));const u=(a=(s=i.attribute)===null||s===void 0?void 0:s.fillOpacity)!==null&&a!==void 0?a:1,c=(l=(o=i.attribute)===null||o===void 0?void 0:o.strokeOpacity)!==null&&l!==void 0?l:1;i.setAttributes({fillOpacity:0,strokeOpacity:0}),i.animate().wait(t).to({fillOpacity:u,strokeOpacity:c},e,n)}function unt(i,t,e,n){i&&(Zn(i.startSymbol,t,e,n),i.lines.forEach(r=>Zn(r,t,e,n)),Zn(i.line,t,e,n),Zn(i.endSymbol,t,e,n))}function KM(i,t,e,n){i&&(Zn(i.getTextShape(),t,e,n),Zn(i.getBgRect(),t,e,n))}function Il(i,t,e,n){var r,s,a,o;i&&(i.setAttributes({fillOpacity:(s=(r=i.attribute)===null||r===void 0?void 0:r.fillOpacity)!==null&&s!==void 0?s:1,strokeOpacity:(o=(a=i.attribute)===null||a===void 0?void 0:a.strokeOpacity)!==null&&o!==void 0?o:1}),i.animate().wait(t).to({fillOpacity:0,strokeOpacity:0},e,n))}function cnt(i,t,e,n){i&&(Il(i.startSymbol,t,e,n),i.lines.forEach(r=>Il(r,t,e,n)),Il(i.line,t,e,n),Il(i.endSymbol,t,e,n))}function qM(i,t,e,n){i&&(Il(i.getTextShape(),t,e,n),Il(i.getBgRect(),t,e,n))}function F4(i,t,e,n,r){const s=.1*e,a=.7*e,o=.1*e,l=.1*e;Zn(i.startSymbol,n,s,r),i.lines.forEach(u=>u.setAttribute("clipRange",0)),i.lines.forEach((u,c)=>{const h=a/i.lines.length;u.animate().wait(n+s+c*h).to({clipRange:1},h,r)}),Zn(i.endSymbol,n+s+a,o,r),X(t).forEach(u=>{const c=n+s+a+o;Zn(u.getTextShape(),c,l,r),Zn(u.getBgRect(),c,l,r)})}function z4(i,t,e,n,r){unt(i,n,e,r),X(t).forEach(s=>{KM(s,n,e,r)})}function N4(i,t,e,n,r){Zn(i,n,e,r),X(t).forEach(s=>{KM(s,n,e,r)})}function j4(i,t,e,n,r){Zn(i,n,e,r),X(t).forEach(s=>{KM(s,n,e,r)})}function H4(i,t,e,n,r,s){var a;unt(i,r,n,s),Zn(t,r,n,s),!((a=e.getTextShape)===null||a===void 0)&&a.call(e)?KM(e,r,n,s):Zn(e,r,n,s)}function d$t(i,t,e,n,r){cnt(i,n,e,r),X(t).forEach(s=>{qM(s,n,e,r)})}function f$t(i,t,e,n,r){Il(i,n,e,r),X(t).forEach(s=>{qM(s,n,e,r)})}function p$t(i,t,e,n,r){Il(i,n,e,r),X(t).forEach(s=>{qM(s,n,e,r)})}function g$t(i,t,e,n,r,s){var a;cnt(i,r,n,s),Il(t,r,n,s),!((a=e.getTextShape)===null||a===void 0)&&a.call(e)?qM(e,r,n,s):Il(e,r,n,s)}function V4(i,t,e,n,r,s){var a;const o=.1*n,l=.65*n,u=.05*n,c=.1*n,h=.1*n;Zn(i.startSymbol,r,o,s),i.lines.forEach(d=>d.setAttribute("clipRange",0)),i.lines.forEach((d,f)=>{const p=l/i.lines.length;d.animate().wait(r+o+f*p).to({clipRange:1},p,s)}),Zn(t,r+o+l,u,s),Zn(i.endSymbol,r+o+l+u,c,s),!((a=e.getTextShape)===null||a===void 0)&&a.call(e)?(Zn(e.getTextShape(),r+o+l+u+c,h,s),Zn(e.getBgRect(),r+o+l+c,h,s)):Zn(e,r+o+l+c,h,s)}function hnt(i,t,e,n){const{enter:r,update:s,exit:a}=e;if(n==="enter"){const{type:o,duration:l,delay:u,easing:c}=r;o==="clipIn"?F4(i,t,l,u,c):o==="fadeIn"&&z4(i,t,l,u,c)}else if(n==="update"){const{type:o,duration:l,delay:u,easing:c}=s;o==="clipIn"?F4(i,t,l,u,c):o==="fadeIn"&&z4(i,t,l,u,c)}else if(n==="exit"){const{duration:o,delay:l,easing:u}=a;d$t(i,t,o,l,u)}}function m$t(i,t,e,n){const{enter:r,update:s,exit:a}=e;if(n==="enter"){const{type:o,duration:l,delay:u,easing:c}=r;o==="fadeIn"&&N4(i,t,l,u,c)}else if(n==="update"){const{type:o,duration:l,delay:u,easing:c}=s;o==="fadeIn"&&N4(i,t,l,u,c)}else if(n==="exit"){const{duration:o,delay:l,easing:u}=a;f$t(i,t,o,l,u)}}function _$t(i,t,e,n){const{enter:r,update:s,exit:a}=e;if(n==="enter"){const{type:o,duration:l,delay:u,easing:c}=r;o==="fadeIn"&&j4(i,t,l,u,c)}else if(n==="update"){const{type:o,duration:l,delay:u,easing:c}=s;o==="fadeIn"&&j4(i,t,l,u,c)}else if(n==="exit"){const{duration:o,delay:l,easing:u}=a;p$t(i,t,o,l,u)}}function v$t(i,t,e,n){const[r,s]=i,{enter:a,update:o,exit:l}=e;if(n==="enter"){const{type:u,duration:c,delay:h,easing:d}=a;u==="fadeIn"?H4(r,s,t,c,h,d):u==="callIn"&&V4(r,s,t,c,h,d)}else if(n==="update"){const{type:u,duration:c,delay:h,easing:d}=o;u==="fadeIn"?H4(r,s,t,c,h,d):u==="callIn"&&V4(r,s,t,c,h,d)}else if(n==="exit"){const{duration:u,delay:c,easing:h}=l;g$t(r,s,t,u,c,h)}}const y$t={type:"clipIn",duration:500,easing:"linear",delay:0},dnt={type:"fadeIn",duration:500,easing:"linear",delay:0},b$t={type:"callIn",duration:500,easing:"linear",delay:0},ZM={type:"fadeOut",duration:500,easing:"linear",delay:0};class tz{getLabel(){return this._label}_addMarkLabels(t,e,n){const{label:r,state:s}=this.attribute,a=X(s?.label),o=X(s?.labelBackground),l=X(r).map((u,c)=>{var h,d;const f=ot({},n,u),p=new qo(Object.assign(Object.assign({},f),{state:{panel:ot({},Pe,(h=o[c])!==null&&h!==void 0?h:ke(o)),text:ot({},Pe,(d=a[c])!==null&&d!==void 0?d:ke(a))}}));return p.name=e,t.add(p),this.setLabelPos(p,f),p});this._label=X(l).length===1?l[0]:l}_updateMarkLabels(t){const{label:e,state:n}=this.attribute,r=X(this._label),s=X(n?.label),a=X(n?.labelBackground);if(r.length){const o=X(e);r.forEach((l,u)=>{var c,h;const d=ot({},t,o[u]);l.setAttributes(Object.assign(Object.assign({dx:0,dy:0},d),{state:{panel:ot({},Pe,(c=a[u])!==null&&c!==void 0?c:ke(a)),text:ot({},Pe,(h=s[u])!==null&&h!==void 0?h:ke(s))}})),this.setLabelPos(l,d)})}}}class ez extends XM{constructor(){super(...arguments),this.name="markCommonLine",this.defaultUpdateAnimation=y$t,this.defaultExitAnimation=ZM}getLine(){return this._line}setLabelPos(t,e){const{limitRect:n}=this.attribute,{position:r,confine:s,autoRotate:a}=e,o=this.getPointAttrByPosition(r,e),l=r.toString().toLocaleLowerCase().includes("start")?this._line.getStartAngle()||0:this._line.getEndAngle()||0;if(t.setAttributes(Object.assign(Object.assign({},o.position),{angle:a?this.getRotateByAngle(o.angle,e):0,textStyle:Object.assign(Object.assign({},this.getTextStyle(r,l,a)),e.textStyle)})),n&&s){const{x:u,y:c,width:h,height:d}=n;VF(t,{x1:u,y1:c,x2:u+h,y2:c+d})}}initMarker(t){const e=this.createSegment();e.name="mark-common-line-line",this._line=e,t.add(e),this.addMarkLineLabels(t)}updateMarker(){this.setLineAttributes(),this.updateMarkLineLabels()}}Be(ez,tz);const ml=.001,x$t={interactive:!0,startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{position:JI.end,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},W4={postiveXAxis:{start:{textAlign:"left",textBaseline:"middle"},startTop:{textAlign:"left",textBaseline:"bottom"},startBottom:{textAlign:"left",textBaseline:"top"},insideStart:{textAlign:"right",textBaseline:"middle"},insideStartTop:{textAlign:"right",textBaseline:"bottom"},insideStartBottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"left",textBaseline:"middle"},endTop:{textAlign:"left",textBaseline:"bottom"},endBottom:{textAlign:"left",textBaseline:"top"},insideEnd:{textAlign:"right",textBaseline:"middle"},insideEndTop:{textAlign:"right",textBaseline:"bottom"},insideEndBottom:{textAlign:"right",textBaseline:"top"}},negativeXAxis:{start:{textAlign:"right",textBaseline:"middle"},startTop:{textAlign:"right",textBaseline:"bottom"},startBottom:{textAlign:"right",textBaseline:"top"},insideStart:{textAlign:"left",textBaseline:"middle"},insideStartTop:{textAlign:"left",textBaseline:"bottom"},insideStartBottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"right",textBaseline:"middle"},endTop:{textAlign:"right",textBaseline:"bottom"},endBottom:{textAlign:"right",textBaseline:"top"},insideEnd:{textAlign:"left",textBaseline:"middle"},insideEndTop:{textAlign:"left",textBaseline:"bottom"},insideEndBottom:{textAlign:"left",textBaseline:"top"}}},S$t={interactive:!0,startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{autoRotate:!0,position:xr.arcOuterMiddle,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},w$t={interactive:!0,label:{position:tL.right,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}},A$t={interactive:!0,label:{autoRotate:!0,position:xr.arcOuterMiddle,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}},fnt={arcInnerStart:{textAlign:"center",textBaseline:"bottom"},arcInnerEnd:{textAlign:"center",textBaseline:"bottom"},arcInnerMiddle:{textAlign:"center",textBaseline:"bottom"},arcOuterStart:{textAlign:"center",textBaseline:"top"},arcOuterEnd:{textAlign:"center",textBaseline:"top"},arcOuterMiddle:{textAlign:"center",textBaseline:"top"},center:{textAlign:"center",textBaseline:"middle"}},k$t={left:{textAlign:"right",textBaseline:"middle"},insideLeft:{textAlign:"left",textBaseline:"middle"},right:{textAlign:"left",textBaseline:"middle"},insideRight:{textAlign:"right",textBaseline:"middle"},top:{textAlign:"center",textBaseline:"bottom"},insideTop:{textAlign:"center",textBaseline:"top"},bottom:{textAlign:"center",textBaseline:"top"},insideBottom:{textAlign:"center",textBaseline:"bottom"},middle:{textAlign:"center",textBaseline:"middle"},topLeft:{textAlign:"right",textBaseline:"top"},insideTopLeft:{textAlign:"left",textBaseline:"top"},topRight:{textAlign:"left",textBaseline:"top"},insideTopRight:{textAlign:"right",textBaseline:"top"},bottomLeft:{textAlign:"right",textBaseline:"bottom"},insideBottomLeft:{textAlign:"left",textBaseline:"bottom"},bottomRight:{textAlign:"left",textBaseline:"bottom"},insideBottomRight:{textAlign:"right",textBaseline:"bottom"}},C$t={interactive:!0,targetSymbol:{visible:!1,offset:0,style:{symbolType:"circle",size:20,fill:!1,stroke:"rgba(46, 47, 50)"}},itemLine:{visible:!0,decorativeLine:{visible:!1,length:30},startSymbol:{visible:!0,clip:!0,symbolType:"circle",size:20,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},endSymbol:{visible:!1,clip:!0,symbolType:"triangle",size:12,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},lineStyle:{stroke:"#000",lineWidth:1}},itemContent:{type:"text",position:"middle",refX:10}},$4={postiveXAxis:{top:{textAlign:"left",textBaseline:"bottom"},bottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"left",textBaseline:"middle"},insideTop:{textAlign:"right",textBaseline:"bottom"},insideBottom:{textAlign:"right",textBaseline:"top"},insideMiddle:{textAlign:"right",textBaseline:"middle"}},negativeXAxis:{top:{textAlign:"right",textBaseline:"bottom"},bottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"right",textBaseline:"middle"},insideTop:{textAlign:"left",textBaseline:"bottom"},insideBottom:{textAlign:"left",textBaseline:"top"},insideMiddle:{textAlign:"left",textBaseline:"middle"}}};o$t();function pnt(){QM._animate=hnt}let QM=class op extends ez{markerAnimate(t){op._animate&&this._animationConfig&&op._animate(this._line,this._label,this._animationConfig,t)}constructor(t,e){super(e?.skipDefault?t:ot({},op.defaultAttributes,t)),this.name="markLine"}getPointAttrByPosition(t,e){var n;const{refX:r=0,refY:s=0}=e,a=this._line.getMainSegmentPoints(),o=(n=this._line.getEndAngle())!==null&&n!==void 0?n:0,l=o,u=r*Math.cos(l)+s*Math.cos(l-Math.PI/2),c=r*Math.sin(l)+s*Math.sin(l-Math.PI/2);return t.includes("start")||t.includes("Start")?{position:{x:a[0].x+u,y:a[0].y+c},angle:l}:t.includes("middle")||t.includes("Middle")?{position:{x:(a[0].x+a[a.length-1].x)/2+u,y:(a[0].y+a[a.length-1].y)/2+c},angle:l}:{position:{x:a[a.length-1].x+u,y:a[a.length-1].y+c},angle:l}}getRotateByAngle(t,e){var n;return(tk(t)?t:t-Math.PI)+((n=e.refAngle)!==null&&n!==void 0?n:0)}getTextStyle(t,e,n){return pl(Math.abs(e),Math.PI/2,ml)||pl(Math.abs(e),3*Math.PI/2,ml)?Ket(n,e,t):tk(e)?W4.postiveXAxis[t]:W4.negativeXAxis[t]}createSegment(){const{points:t,startSymbol:e,endSymbol:n,lineStyle:r,mainSegmentIndex:s,multiSegment:a,state:o}=this.attribute;return new Zu({points:t,startSymbol:e,endSymbol:n,lineStyle:r,mainSegmentIndex:s,multiSegment:a,pickable:!1,state:{line:ot({},Pe,o?.line),startSymbol:ot({},Pe,o?.lineStartSymbol),endSymbol:ot({},Pe,o?.lineEndSymbol)}})}setLineAttributes(){const{points:t,startSymbol:e,endSymbol:n,lineStyle:r,mainSegmentIndex:s,multiSegment:a,state:o}=this.attribute;this._line&&this._line.setAttributes({points:t,startSymbol:e,endSymbol:n,lineStyle:r,mainSegmentIndex:s,multiSegment:a,state:{line:ot({},Pe,o?.line),startSymbol:ot({},Pe,o?.lineStartSymbol),endSymbol:ot({},Pe,o?.lineEndSymbol)}})}isValidPoints(){const{points:t}=this.attribute;if(!t||t.length<2)return!1;let e=!0;return t.forEach(n=>{if(n.length)n.forEach(r=>{et(r.x)&&et(r.y)||(e=!1)});else if(!et(n.x)||!et(n.y))return void(e=!1)}),e}addMarkLineLabels(t){this._addMarkLabels(t,"mark-common-line-label",op.defaultAttributes.label)}updateMarkLineLabels(){this._updateMarkLabels(op.defaultAttributes.label)}};QM.defaultAttributes=x$t;u$t();function gnt(){A0._animate=m$t}let A0=class lp extends XM{markerAnimate(t){lp._animate&&this._animationConfig&&lp._animate(this._area,this._label,this._animationConfig,t)}getArea(){return this._area}constructor(t,e){super(e?.skipDefault?t:ot({},lp.defaultAttributes,t)),this.name="markArea",this.defaultUpdateAnimation=dnt,this.defaultExitAnimation=ZM}getPointAttrByPosition(t){const{x1:e,x2:n,y1:r,y2:s}=this._area.AABBBounds,a={x:(e+n)/2,y:(r+s)/2};return(t.includes("left")||t.includes("Left"))&&(a.x=e),(t.includes("right")||t.includes("Right"))&&(a.x=n),(t.includes("top")||t.includes("Top"))&&(a.y=r),(t.includes("bottom")||t.includes("Bottom"))&&(a.y=s),a}setLabelPos(t,e){var n;if(this._area){const r=(n=e.position)!==null&&n!==void 0?n:"middle",s=this.getPointAttrByPosition(r);if(t.setAttributes(Object.assign(Object.assign({},s),{textStyle:Object.assign(Object.assign({},k$t[r]),e.textStyle)})),this.attribute.limitRect&&e.confine){const{x:a,y:o,width:l,height:u}=this.attribute.limitRect;VF(t,{x1:a,y1:o,x2:a+l,y2:o+u})}}}initMarker(t){const{points:e,areaStyle:n,state:r}=this.attribute,s=Mt.polygon(Object.assign({points:e},n));s.states=ot({},Pe,r?.area),s.name="mark-area-polygon",this._area=s,t.add(s),this._addMarkLabels(t,"mark-area-label",lp.defaultAttributes.label)}updateMarker(){const{points:t,areaStyle:e,state:n}=this.attribute;this._area&&(this._area.setAttributes(Object.assign({points:t},e)),this._area.states=ot({},Pe,n?.area)),this._updateMarkLabels(lp.defaultAttributes.label)}isValidPoints(){const{points:t}=this.attribute;if(!t||t.length<3)return!1;let e=!0;return t.forEach(n=>{et(n.x)&&et(n.y)||(e=!1)}),e}};A0.defaultAttributes=w$t,Be(A0,tz);l$t();function M$t(){Su._animate=hnt}class Su extends ez{markerAnimate(t){Su._animate&&this._animationConfig&&Su._animate(this._line,this._label,this._animationConfig,t)}constructor(t,e){super(e?.skipDefault?t:ot({},Su.defaultAttributes,t)),this.name="markArcLine"}getPointAttrByPosition(t,e){const{center:n,radius:r,startAngle:s,endAngle:a}=this.attribute,{refX:o=0,refY:l=0}=e;let u;switch(t){case xr.arcInnerStart:u=s;case xr.arcOuterStart:u=s;break;case xr.arcInnerEnd:u=a;case xr.arcOuterEnd:u=a;break;case xr.center:case xr.arcInnerMiddle:case xr.arcOuterMiddle:default:u=(s+a)/2}return{position:{x:n.x+(r+l)*Math.cos(u)+o*Math.cos(u-Math.PI/2),y:n.y+(r+l)*Math.sin(u)+o*Math.sin(u-Math.PI/2)},angle:u}}getTextStyle(t){return fnt[t]}getRotateByAngle(t,e){var n;return t-Math.PI/2+((n=e.refAngle)!==null&&n!==void 0?n:0)}createSegment(){const{center:t,radius:e,startAngle:n,endAngle:r,startSymbol:s,endSymbol:a,lineStyle:o,state:l}=this.attribute;return new WI({center:t,radius:e,startAngle:n,endAngle:r,startSymbol:s,endSymbol:a,lineStyle:o,state:{line:ot({},Pe,l?.line),startSymbol:ot({},Pe,l?.lineStartSymbol),endSymbol:ot({},Pe,l?.lineEndSymbol)}})}setLineAttributes(){const{center:t,radius:e,startAngle:n,endAngle:r,startSymbol:s,endSymbol:a,lineStyle:o,state:l}=this.attribute;this._line&&this._line.setAttributes({center:t,radius:e,startAngle:n,endAngle:r,startSymbol:s,endSymbol:a,lineStyle:o,state:{line:ot({},Pe,l?.line),startSymbol:ot({},Pe,l?.lineStartSymbol),endSymbol:ot({},Pe,l?.lineEndSymbol)}})}isValidPoints(){return!0}addMarkLineLabels(t){this._addMarkLabels(t,"mark-common-line-label",Su.defaultAttributes.label)}updateMarkLineLabels(){this._updateMarkLabels(Su.defaultAttributes.label)}}Su.defaultAttributes=S$t;c$t();function T$t(){Ml._animate=_$t}class Ml extends XM{markerAnimate(t){Ml._animate&&this._animationConfig&&Ml._animate(this._area,this._label,this._animationConfig,t)}getArea(){return this._area}constructor(t,e){super(e?.skipDefault?t:ot({},Ml.defaultAttributes,t)),this.name="markArcArea",this.defaultUpdateAnimation=dnt,this.defaultExitAnimation=ZM}getPointAttrByPosition(t,e){const{center:n,innerRadius:r,outerRadius:s,startAngle:a,endAngle:o}=this.attribute,{refX:l=0,refY:u=0}=e;let c,h;switch(t){case xr.center:c=(r+s)/2,h=(a+o)/2;break;case xr.arcInnerStart:c=r,h=a;break;case xr.arcOuterStart:c=s,h=a;break;case xr.arcInnerEnd:c=r,h=o;break;case xr.arcOuterEnd:c=s,h=o;break;case xr.arcInnerMiddle:c=r,h=(a+o)/2;break;case xr.arcOuterMiddle:c=s,h=(a+o)/2;break;default:c=r,h=(a+o)/2}return{position:{x:n.x+(c+u)*Math.cos(h)+l*Math.cos(h-Math.PI/2),y:n.y+(c+u)*Math.sin(h)+l*Math.sin(h-Math.PI/2)},angle:h}}setLabelPos(t,e){var n;if(this._area){const{position:r="arcInnerMiddle",autoRotate:s}=e,a=this.getPointAttrByPosition(r,e);if(t.setAttributes(Object.assign(Object.assign({},a.position),{angle:s?a.angle-Math.PI/2+((n=e.refAngle)!==null&&n!==void 0?n:0):0,textStyle:Object.assign(Object.assign({},fnt[r]),e.textStyle)})),this.attribute.limitRect&&e.confine){const{x:o,y:l,width:u,height:c}=this.attribute.limitRect;VF(t,{x1:o,y1:l,x2:o+u,y2:l+c})}}}initMarker(t){const{center:e,innerRadius:n,outerRadius:r,startAngle:s,endAngle:a,areaStyle:o,state:l}=this.attribute,u=Mt.arc(Object.assign({x:e.x,y:e.y,innerRadius:n,outerRadius:r,startAngle:s,endAngle:a},o));u.states=ot({},Pe,l?.area),u.name="polar-mark-area-area",this._area=u,t.add(u),this._addMarkLabels(t,"mark-area-label",Ml.defaultAttributes.label)}updateMarker(){const{center:t,innerRadius:e,outerRadius:n,startAngle:r,endAngle:s,areaStyle:a,label:o,state:l}=this.attribute;this._area&&(this._area.setAttributes(Object.assign({x:t.x,y:t.y,innerRadius:e,outerRadius:n,startAngle:r,endAngle:s},a)),this._area.states=ot({},Pe,l?.area)),this._updateMarkLabels(Ml.defaultAttributes.label)}isValidPoints(){return!0}}Ml.defaultAttributes=A$t,Be(Ml,tz);h$t();function iz(){JM._animate=v$t}let JM=class p1 extends XM{markerAnimate(t){p1._animate&&this._animationConfig&&p1._animate([this._line,this._decorativeLine],this._item,this._animationConfig,t)}constructor(t,e){super(e?.skipDefault?t:ot({},p1.defaultAttributes,t)),this.name="markPoint",this.defaultUpdateAnimation=b$t,this.defaultExitAnimation=ZM,this._isArcLine=!1,this._isStraightLine=!1}setLabelPos(){}getTextAlignAttr(t,e,n,r,s){return pl(Math.abs(r),Math.PI/2,ml)||pl(Math.abs(r),3*Math.PI/2,ml)?Ket(t,r,s):tk(r)?$4.postiveXAxis[s]:$4.negativeXAxis[s]}setItemAttributes(t,e,n,r,s){var a,o;if(!t)return;const{autoRotate:l=!0,refX:u=0,refY:c=0,refAngle:h=0,style:d,position:f=eL.middle}=e,{state:p}=this.attribute,g=((a=this._line)===null||a===void 0?void 0:a.getEndAngle())||0,m=u*Math.cos(g)+c*Math.cos(g-Math.PI/2),_=u*Math.sin(g)+c*Math.sin(g-Math.PI/2);if(s==="text"){const y=r.x-n.x,b=r.y-n.y;t.setAttributes(Object.assign(Object.assign({},d),{textStyle:Object.assign(Object.assign({},this.getTextAlignAttr(l,y,b,g,(o=e.position)!==null&&o!==void 0?o:"end")),d.textStyle),state:{panel:ot({},Pe,p?.textBackground),text:ot({},Pe,p?.itemContent)}}))}else(s==="richText"||s==="image")&&(t.setAttributes({dx:this.getItemDx(t,f,d)+(d.dx||0),dy:this.getItemDy(t,f,d)+(d.dy||0)}),t.states=ot({},Pe,p?.itemContent));const v=tk(g)?g:g-Math.PI;t.setAttributes({x:r.x+(m||0),y:r.y+(_||0),angle:l&&v+h})}getItemDx(t,e,n){var r,s;const a=(s=(r=t?.AABBBounds)===null||r===void 0?void 0:r.width())!==null&&s!==void 0?s:n?.width||0;return e.includes("inside")?-a:0}getItemDy(t,e,n){var r,s;const a=(s=(r=t?.AABBBounds)===null||r===void 0?void 0:r.height())!==null&&s!==void 0?s:n?.height||0;return e.includes("top")||e.includes("Top")?-a:e.includes("middle")||e.includes("Middle")?-a/2:0}initItem(t,e,n){const{state:r}=this.attribute,{type:s="text",style:a,renderCustomCallback:o}=t;let l;return s==="symbol"?(l=Mt.symbol(Object.assign(Object.assign({},n),a)),l.states=ot({},Pe,r?.itemContent)):s==="text"?l=new qo(Object.assign(Object.assign({},n),{state:{panel:ot({},Pe,r?.textBackground),text:ot({},Pe,r?.itemContent)}})):s==="richText"?(l=Mt.richtext(Object.assign(Object.assign({},n),a)),l.states=ot({},Pe,r?.itemContent)):s==="image"?(l=Mt.image(Object.assign(Object.assign({},n),a)),l.states=ot({},Pe,r?.itemContent)):s==="custom"&&o&&(l=o(),l.states=ot({},Pe,r?.itemContent)),l.name=`mark-point-${s}`,this.setItemAttributes(l,t,e,n,s),l}getItemLineAttr(t,e,n){let r=[],s={x:0,y:0},a=0,o=0,l=0;const{type:u="type-s",arcRatio:c=.8}=t,h=n.x-e.x,d=n.y-e.y;if(this._isStraightLine=pl(h,0,ml)||pl(d,0,ml),this._isArcLine){const{x:f,y:p}=this.attribute.position,{x:g,y:m}=n,_=(f+g)/2,v=(p+m)/2,y=p===m?0:-(f-g)/(p-m),b=_+c*(m>p?-1:1)*_,x=(A=>y*(A-_)+v)(b);o=Gf(p-x,f-b),l=Gf(m-x,g-b),s={x:b,y:x};const S=Math.sqrt((b-f)*(b-f)+(x-p)*(x-p)),w=this.attribute.targetSymbol.style.size/2;o+=2*Math.acos(Math.sqrt(1-w*w/(4*S*S))),c>0?l<o&&(l+=2*Math.PI):o<l&&(o+=2*Math.PI),a=Math.sqrt((b-f)*(b-f)+(x-p)*(x-p))}else r=u!=="type-do"||this._isStraightLine?u!=="type-po"||this._isStraightLine?u!=="type-op"||this._isStraightLine?[e,n]:[e,{x:e.x,y:n.y},n]:[e,{x:n.x,y:e.y},n]:[e,{x:(e.x+n.x)/2,y:n.y},n];return r=S3t(r),{points:r,center:s,radius:a,startAngle:o,endAngle:l}}reDrawLine(t,e){this._line.release();const{startSymbol:n,endSymbol:r,lineStyle:s,type:a="type-s"}=t,{state:o}=this.attribute,l=this._isArcLine?WI:Zu;this._container.removeChild(this._line),this._line=new l(Object.assign(Object.assign({},e),{pickable:!1,startSymbol:n,endSymbol:r,lineStyle:s,visible:t.visible,state:{line:ot({},Pe,o?.line),startSymbol:ot({},Pe,o?.lineStartSymbol),endSymbol:ot({},Pe,o?.lineEndSymbol)}})),this._container.add(this._line)}setItemLineAttr(t,e,n){if(this._line){const{startSymbol:r,endSymbol:s,lineStyle:a,type:o="type-s"}=t,{state:l}=this.attribute,u=this.getItemLineAttr(t,e,n);this._isArcLine&&this._line.key==="arc-segment"||!this._isArcLine&&this._line.key==="segment"?this._line.setAttributes(Object.assign(Object.assign({},u),{startSymbol:r,endSymbol:s,lineStyle:a,visible:t.visible,state:{line:ot({},Pe,l?.line),startSymbol:ot({},Pe,l?.lineStartSymbol),endSymbol:ot({},Pe,l?.lineEndSymbol)}})):this.reDrawLine(t,u)}}getDecorativeLineAttr(t){var e;const n=((e=t?.decorativeLine)===null||e===void 0?void 0:e.length)||10,r=this._line.getEndAngle()||0;return{startPointOffsetX:n/2*Math.cos(r-Math.PI/2),startPointOffsetY:n/2*Math.sin(r-Math.PI/2),endPointOffsetX:-n/2*Math.cos(r-Math.PI/2),endPointOffsetY:-n/2*Math.sin(r-Math.PI/2)}}setDecorativeLineAttr(t,e,n){var r;if(this._decorativeLine){const{lineStyle:s}=t,{startPointOffsetX:a,startPointOffsetY:o,endPointOffsetX:l,endPointOffsetY:u}=this.getDecorativeLineAttr(t);this._decorativeLine.setAttributes(Object.assign(Object.assign({points:[{x:e.x+a,y:e.y+o},{x:e.x+l,y:e.y+u}]},s),{visible:n})),this._decorativeLine.states=ot({},Pe,(r=this.attribute.state)===null||r===void 0?void 0:r.line)}}setTargetItemAttributes(t,e){var n,r;this._targetItem&&(this._targetItem.setAttributes(Object.assign({x:e.x,y:e.y,visible:(n=t.visible)!==null&&n!==void 0&&n,size:t.size},t.style)),this._targetItem.states=ot({},Pe,(r=this.attribute.state)===null||r===void 0?void 0:r.targetItem))}setAllOfItemsAttr(t,e){var n;const{position:r,itemLine:s={},itemContent:a={},limitRect:o,targetSymbol:l}=this.attribute,{type:u="text",confine:c}=a;if(o&&c){const{x:h,y:d,width:f,height:p}=o,{dx:g,dy:m}=tit(this._item,{x1:h,y1:d,x2:h+f,y2:d+p});e.x=e.x+g,e.y=e.y+m}this.setTargetItemAttributes(l,r),this.setItemLineAttr(s,t,e),this.setItemAttributes(this._item,a,t,e,u),this.setDecorativeLineAttr(s,e,(n=s.decorativeLine)===null||n===void 0?void 0:n.visible)}computeNewPositionAfterTargetItem(t){var e,n;const{itemContent:r={},targetSymbol:s,itemLine:a}=this.attribute,{offsetX:o=0,offsetY:l=0}=r,{offset:u=0,style:c,visible:h=!1,size:d}=s,f=h?(n=(e=c.size)!==null&&e!==void 0?e:d)!==null&&n!==void 0?n:20:0;let p;return p=a.type==="type-do"?Gf(l,o/2):a.type==="type-po"?Gf(0,o):a.type==="type-op"?Gf(l,0):Gf(l,o),{newPosition:{x:t.x+(f/2+u)*Math.cos(p),y:t.y+(f/2+u)*Math.sin(p)},newItemPosition:{x:t.x+(f/2+u)*Math.cos(p)+o,y:t.y+(f/2+u)*Math.sin(p)+l}}}initMarker(t){const{position:e,itemContent:n={},itemLine:r}=this.attribute,{type:s="type-s",arcRatio:a=.8}=r,{offsetX:o=0,offsetY:l=0}=n;this._isStraightLine=pl(o,0,ml)||pl(l,0,ml),this._isArcLine=s==="type-arc"&&a!==0&&!this._isStraightLine;const{newPosition:u,newItemPosition:c}=this.computeNewPositionAfterTargetItem(e),h=new(this._isArcLine?WI:Zu)({points:[],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0});h.name="mark-point-line",this._line=h,t.add(h);const d=Mt.line({points:[]});d.name="mark-point-decorativeLine",this._decorativeLine=d,t.add(d);const f=Mt.symbol({});f.name="mark-point-targetItem",this._targetItem=f,t.add(this._targetItem);const p=this.initItem(n,u,c);this._item=p,t.add(p),this.setAllOfItemsAttr(u,c)}updateMarker(){const{position:t,itemContent:e={},itemLine:n}=this.attribute,{type:r="text"}=e,{type:s="type-s",arcRatio:a=.8}=n,{offsetX:o=0,offsetY:l=0}=e;this._isStraightLine=pl(o,0,ml)||pl(l,0,ml);const u=s==="type-arc"&&a!==0&&!this._isStraightLine,{newPosition:c,newItemPosition:h}=this.computeNewPositionAfterTargetItem(t);u!==this._isArcLine?(this._isArcLine=u,this.reDrawLine(n,{points:[{x:0,y:0}],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0})):this._isArcLine=u,this.setItemAttributes(this._item,e,c,h,r),this.setAllOfItemsAttr(c,h)}isValidPoints(){const{position:t}=this.attribute;return!(!et(t.x)||!et(t.y))}};JM.defaultAttributes=C$t;function mnt(){ln(),Ta(),eu()}const _nt={space:8,style:{fill:"rgb(47, 69, 84)",cursor:"pointer",size:15},state:{disable:{fill:"rgb(170, 170, 170)",cursor:"not-allowed"},hover:{}}};mnt();class k0 extends fr{getCurrent(){return this._current}constructor(t,e){super(e?.skipDefault?t:ot({},k0.defaultAttributes,t)),this.name="pager",this._current=1,this._onHover=n=>{const r=n.target;r.hasState("disable")||r.addState("hover")},this._onUnHover=n=>{n.target.removeState("hover")},this._onClick=n=>{const r=n.target;if(r.name==="preHandler"){if(this._current===1)return;this._current-=1,this._current===1?r.addState("disable"):r.removeState("disable"),this._dispatchEvent("toPrev",{current:this._current,total:this._total,direction:"pre",event:n})}if(r.name==="nextHandler"){if(this._current===this._total)return;this._current+=1,this._current===this._total?r.addState("disable"):r.removeState("disable"),this._dispatchEvent("toNext",{current:this._current,total:this._total,direction:"next",event:n})}this._current>1&&this.preHandler.removeState("disable"),this._current<this._total&&this.nextHandler.removeState("disable"),this.text.setAttribute("text",this._getPageText(this._current))}}render(){var t,e,n;this._reset();const{layout:r="horizontal",handler:s=_nt,total:a,defaultCurrent:o=1,textStyle:l,padding:u=0}=this.attribute;this._current=o;const c=zr(u),h=r==="horizontal",d=Mt.group({x:0,y:0}),f=s.style||{},p=f.size||15,g=(t=s.space)!==null&&t!==void 0?t:8,m=s.state||{};let{preShape:_,nextShape:v}=s;_||(_=h?"triangleLeft":"triangleUp"),v||(v=h?"triangleRight":"triangleDown");const y=Mt.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},f),{x:0,y:0,symbolType:_,size:p}));y.states=m,y.name="preHandler",this.preHandler=y,d.add(y);const{width:b,height:x}=LM(this._getPageText(a),Object.assign({textAlign:"center",textBaseline:"middle"},l),(n=(e=this.stage)===null||e===void 0?void 0:e.getTheme())===null||n===void 0?void 0:n.text),S=yt(p)?p:p[0],w=yt(p)?p:p[1],A=Mt.text(Object.assign({x:h?S/2+g+b/2:0,y:h?0:w/2+g+x/2,text:this._getPageText(o),textAlign:"center",textBaseline:"middle",lineHeight:l?.fontSize},l));this.text=A,d.add(A);const k=Mt.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},f),{x:h?S+2*g+b:0,y:h?0:w+2*g+x,symbolType:v,size:p}));k.name="nextHandler",k.states=m,this.nextHandler=k,d.add(k),this._total===1?(y.addState("disable"),k.addState("disable")):this._current===1?y.addState("disable"):this._current===a&&k.addState("disable");const C=d.AABBBounds,M=C.width(),R=C.height();d.translateTo(0-C.x1+c[3],0-C.y1+c[0]),this.add(d),this.attribute.width=M+c[1]+c[3],this.attribute.height=R+c[0]+c[2],this._bindEvents()}_bindEvents(){this.attribute.disableTriggerEvent||(this.preHandler&&(this.preHandler.addEventListener("pointerenter",this._onHover),this.preHandler.addEventListener("pointerleave",this._onUnHover),this.preHandler.addEventListener("pointerdown",this._onClick)),this.nextHandler&&(this.nextHandler.addEventListener("pointerenter",this._onHover),this.nextHandler.addEventListener("pointerleave",this._onUnHover),this.nextHandler.addEventListener("pointerdown",this._onClick)))}_reset(){this.removeAllChild(!0),this._current=1,this._total=this.attribute.total,this.preHandler=this.nextHandler=this.text=null}_getPageText(t){const{pageFormatter:e}=this.attribute;return e?it(e)?e(t,this._total):`${e}`.replace("{current}",`${t}`).replace("{total}",`${this._total}`):`${t}/${this._total}`}setTotal(t){t!==this.attribute.total&&(this._total=t,this._current!==1&&this._current<=t?this.setAttributes({total:t,defaultCurrent:this._current}):this.setAttribute("total",t))}}k0.defaultAttributes={handler:_nt,textStyle:{fill:"rgb(51, 51, 51)",fontSize:12}};const lk=10,vnt=8,ynt=8,P$t=8,g1=16,m1=8,Ub=12,iL=12;var ie;(function(i){i.selected="selected",i.unSelected="unSelected",i.selectedHover="selectedHover",i.unSelectedHover="unSelectedHover",i.focus="focus"})(ie||(ie={}));var za;(function(i){i.legendItemHover="legendItemHover",i.legendItemUnHover="legendItemUnHover",i.legendItemClick="legendItemClick",i.legendItemAttributeUpdate="legendItemAttributeUpdate"})(za||(za={}));var Rr;(function(i){i.innerView="innerView",i.title="legendTitle",i.item="legendItem",i.itemShape="legendItemShape",i.itemLabel="legendItemLabel",i.itemValue="legendItemValue",i.focus="legendItemFocus"})(Rr||(Rr={}));class nz extends fr{constructor(){super(...arguments),this.name="legend",this._title=null}render(){this.removeAllChild(!0);const{interactive:t=!0,title:e,padding:n=0}=this.attribute;this._parsedPadding=zr(n);const r=Mt.group({x:this._parsedPadding[3],y:this._parsedPadding[0],pickable:t,childrenPickable:t});r.name=Rr.innerView,this.add(r),this._innerView=r,e?.visible&&this._renderTitle(e),this._renderContent(),this._adjustLayout(),t&&this._bindEvents();const s=this._innerView.AABBBounds;this.attribute.width=s.width()+this._parsedPadding[1]+this._parsedPadding[3],this.attribute.height=s.height()+this._parsedPadding[0]+this._parsedPadding[2]}_renderTitle(t){const{text:e="",textStyle:n,padding:r=0,background:s,minWidth:a,maxWidth:o,shape:l}=t,u={x:0,y:0,text:e,textStyle:n,padding:zr(r),minWidth:a,maxWidth:o};l&&l.visible&&(u.shape=Object.assign({visible:!0},l.style),L(l.space)&&(u.space=l.space)),s&&s.visible&&(u.panel=Object.assign({visible:!0},s.style));const c=new qo(u);c.name=Rr.title,this._title=c,this._innerView.add(c)}_adjustLayout(){var t;if(this._title){const e=this._innerView.AABBBounds.width(),n=this._title.AABBBounds.width(),r=(t=this.attribute.title)===null||t===void 0?void 0:t.align;r==="center"?this._title.setAttribute("x",(e-n)/2):r==="end"&&this._title.setAttribute("x",e-n)}}}function tT(){ln(),eu(),tu(),Ta()}function rz(){ln(),BM()}function E$t(){rz(),mnt(),Get()}function R$t(){rz(),tT()}function O$t(){rz(),tT(),Nm()}var U4=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};const D$t={[ie.focus]:{},[ie.selected]:{},[ie.selectedHover]:{},[ie.unSelected]:{},[ie.unSelectedHover]:{}};E$t();let bnt=class xnt extends nz{constructor(t,e){super(e?.skipDefault?t:ot({},xnt.defaultAttributes,t)),this.name="discreteLegend",this._itemsContainer=null,this._itemHeightByUser=void 0,this._itemHeight=0,this._itemMaxWidth=0,this._contentMaxHeight=0,this._onHover=n=>{const r=n.target;if(r&&r.name&&r.name.startsWith(Rr.item)){const s=r.delegate;if(this._lastActiveItem){if(this._lastActiveItem.id===s.id)return;this._unHover(this._lastActiveItem,n)}this._hover(s,n)}else this._lastActiveItem&&(this._unHover(this._lastActiveItem,n),this._lastActiveItem=null)},this._onUnHover=n=>{this._lastActiveItem&&(this._unHover(this._lastActiveItem,n),this._lastActiveItem=null)},this._onClick=n=>{var r,s,a,o;const l=n.target;if(l&&l.name&&l.name.startsWith(Rr.item)){const u=l.delegate,{selectMode:c="multiple"}=this.attribute;if(l.name===Rr.focus||c==="focus"){const h=u.hasState(ie.focus);u.toggleState(ie.focus),h?(r=this._itemsContainer)===null||r===void 0||r.getChildren().forEach(d=>{this._removeLegendItemState(d,[ie.unSelected,ie.unSelectedHover,ie.focus],n),this._setLegendItemState(d,ie.selected,n)}):(this._setLegendItemState(u,ie.selected,n),this._removeLegendItemState(u,[ie.unSelected,ie.unSelectedHover],n),(s=this._itemsContainer)===null||s===void 0||s.getChildren().forEach(d=>{u!==d&&(this._removeLegendItemState(d,[ie.selected,ie.selectedHover,ie.focus],n),this._setLegendItemState(d,ie.unSelected,n))}))}else{(a=this._itemsContainer)===null||a===void 0||a.getChildren().forEach(p=>{p.removeState(ie.focus)});const{allowAllCanceled:h=!0}=this.attribute,d=u.hasState(ie.selected),f=this._getSelectedLegends();if(c==="multiple"){if(h===!1&&d&&f.length===1)return void this._dispatchLegendEvent(za.legendItemClick,u,n);d?(this._removeLegendItemState(u,[ie.selected,ie.selectedHover],n),this._setLegendItemState(u,ie.unSelected,n)):(this._setLegendItemState(u,ie.selected,n),this._removeLegendItemState(u,[ie.unSelected,ie.unSelectedHover],n))}else this._setLegendItemState(u,ie.selected,n),this._removeLegendItemState(u,[ie.unSelected,ie.unSelectedHover],n),(o=this._itemsContainer)===null||o===void 0||o.getChildren().forEach(p=>{u!==p&&(this._removeLegendItemState(p,[ie.selected,ie.selectedHover],n),this._setLegendItemState(p,ie.unSelected,n))})}this._dispatchLegendEvent(za.legendItemClick,u,n)}}}render(){super.render(),this._lastActiveItem=null}setSelected(t){var e;((e=this._itemsContainer)===null||e===void 0?void 0:e.getChildren()).forEach(n=>{const r=n.data;t.includes(r.label)?(this._setLegendItemState(n,ie.selected),this._removeLegendItemState(n,[ie.unSelected,ie.unSelectedHover])):(this._removeLegendItemState(n,[ie.selected,ie.selectedHover]),this._setLegendItemState(n,ie.unSelected))})}_renderItems(){const{item:t={},maxCol:e=1,maxRow:n=2,maxWidth:r,defaultSelected:s,lazyload:a,autoPage:o}=this.attribute,{spaceCol:l=g1,spaceRow:u=m1,verticalAlign:c="middle"}=t,h=this._itemsContainer,{items:d,isHorizontal:f,startIndex:p,isScrollbar:g}=this._itemContext,m=g?1:f?n:e,_=this._contentMaxHeight;let v,{doWrap:y,maxWidthInCol:b,startX:x,startY:S,pages:w}=this._itemContext,A=0,k=0;const C=[];for(let M=p,R=d.length;M<R&&!(a&&w>this._itemContext.currentPage*m);M++){a&&(this._itemContext.startIndex=M+1),v=d[M],v.id||(v.id=v.label),v.index=M;let P=!0;J(s)&&(P=s.includes(v.label));const O=this._renderEachItem(v,P,M,d),T=O.attribute.width,D=O.attribute.height;this._itemHeight=Math.max(this._itemHeight,D),b=Math.max(T,b),this._itemMaxWidth=Math.max(T,this._itemMaxWidth),f?(L(r)&&(g&&o?(w=Math.ceil((x+T)/r),y=w>1):x+T>r&&(y=!0,x>0&&(c!=="middle"&&c!=="bottom"||C.forEach(B=>{B.setAttributes({y:B.attribute.y+(k-B.attribute.height)/(c==="middle"?2:1)})}),w+=1,x=0,S+=k+u,k=0,C.length=0))),x===0&&S===0||O.setAttributes({x,y:S}),x+=l+T,k=Math.max(k,D),C.push(O)):(L(_)&&(g&&o?(w=Math.ceil((S+D)/_),y=w>1):_<=D?(w+=1,y=!0,S=0,M>0&&(x+=A+l)):_<S+D&&(w+=1,y=!0,S=0,x+=b+l,b=0)),x===0&&S===0||O.setAttributes({x,y:S}),S+=u+D),h.add(O),A=T}return!f||c!=="middle"&&c!=="bottom"||C.forEach(M=>{M.setAttributes({y:M.attribute.y+(k-M.attribute.height)/(c==="middle"?2:1)})}),this._itemContext.doWrap=y,this._itemContext.startX=x,this._itemContext.startY=S,this._itemContext.maxWidthInCol=b,this._itemContext.pages=w,this._itemContext.maxPages=m,g&&(this._itemContext.totalPage=w),a||(this._itemContext.startIndex=d.length),this._itemContext}_renderContent(){const{item:t={},items:e,reversed:n,maxWidth:r,maxHeight:s}=this.attribute;if(t.visible===!1||Lt(e))return;let a=e;n&&(a=e?.reverse()),this._contentMaxHeight=Math.max(0,s-this._parsedPadding[0]-this._parsedPadding[2]);const o=Mt.group({x:0,y:0});this._itemsContainer=o;const{layout:l,autoPage:u}=this.attribute,c=l==="horizontal",{maxWidth:h,width:d,height:f}=t,p=[];L(h)&&p.push(h),L(d)&&p.push(d),p.length&&(L(r)&&p.push(r),this._itemWidthByUser=Rn(p)),L(f)&&(this._itemHeightByUser=f);const g=this.attribute.pager;this._itemContext={currentPage:g&&g.defaultCurrent||1,doWrap:!1,maxWidthInCol:0,maxPages:1,pages:1,startX:0,startY:0,startIndex:0,items:a,isHorizontal:c,totalPage:1/0,isScrollbar:g&&g.type==="scrollbar",clipContainer:void 0},this._itemContext=this._renderItems();let m=!1;this._itemContext.doWrap&&u&&this._itemContext.pages>this._itemContext.maxPages&&(m=this._renderPagerComponent()),m||(o.setAttribute("y",this._title?this._title.AABBBounds.height()+be(this.attribute,"title.space",8):0),this._innerView.add(o))}_bindEvents(){if(this.attribute.disableTriggerEvent||!this._itemsContainer)return;const{hover:t=!0,select:e=!0}=this.attribute;if(t){let n="pointermove",r="pointerleave";ee(t)&&(t.trigger&&(n=t.trigger),t.triggerOff&&(r=t.triggerOff)),this._itemsContainer.addEventListener(n,this._onHover),this._itemsContainer.addEventListener(r,this._onUnHover)}if(e){let n="pointerdown";ee(e)&&e.trigger&&(n=e.trigger),this._itemsContainer.addEventListener(n,this._onClick)}}_autoEllipsis(t,e,n,r){var s,a;const{label:o,value:l}=this.attribute.item,u=r.AABBBounds,c=n.AABBBounds,h=u.width(),d=c.width();let f=!1;t==="labelFirst"?d>e?f=!0:r.setAttribute("maxLineWidth",e-d):t==="valueFirst"?h>e?f=!0:n.setAttribute("maxLineWidth",e-h):h+d>e&&(f=!0),f&&(r.setAttribute("maxLineWidth",Math.max(e*((s=o.widthRatio)!==null&&s!==void 0?s:.5),e-d)),n.setAttribute("maxLineWidth",Math.max(e*((a=l.widthRatio)!==null&&a!==void 0?a:.5),e-h)))}_renderEachItem(t,e,n,r){var s,a;const{id:o,label:l,value:u,shape:c}=t,{padding:h=0,focus:d,focusIconStyle:f,align:p,autoEllipsisStrategy:g}=this.attribute.item,{shape:m,label:_,value:v,background:y}=this.attribute.item,b=this._handleStyle(m,t,e,n,r),x=this._handleStyle(_,t,e,n,r),S=this._handleStyle(v,t,e,n,r),w=this._handleStyle(y,t,e,n,r),A=zr(h);let k;y.visible===!1?(k=Mt.group({x:0,y:0,cursor:(s=w.style)===null||s===void 0?void 0:s.cursor}),this._appendDataToShape(k,Rr.item,t,k)):(k=Mt.group(Object.assign({x:0,y:0},w.style)),this._appendDataToShape(k,Rr.item,t,k,w.state)),k.id=`${o??l}-${n}`,k.addState(e?ie.selected:ie.unSelected);const C=Mt.group({x:0,y:0,pickable:!1});k.add(C);let M,R=0,P=0,O=0;if(m&&m.visible!==!1){const Z=be(b,"style.size",lk);P=J(Z)?Z[0]||0:Z,O=be(m,"space",vnt);const at=Mt.symbol(Object.assign(Object.assign({x:0,y:0,symbolType:"circle",strokeBoundsBuffer:0},c),b.style));Object.keys(b.state||{}).forEach($=>{const ft=b.state[$].fill||b.state[$].stroke;c.fill&&N(b.state[$].fill)&&ft&&(b.state[$].fill=ft),c.stroke&&N(b.state[$].stroke)&&ft&&(b.state[$].stroke=ft)}),this._appendDataToShape(at,Rr.itemShape,t,k,b.state),at.addState(e?ie.selected:ie.unSelected),C.add(at)}let T=0;if(d){const Z=be(f,"size",lk);M=Mt.symbol(Object.assign(Object.assign({x:0,y:-Z/2-1,strokeBoundsBuffer:0,boundsPadding:A},f),{visible:!0,pickMode:"imprecise"})),this._appendDataToShape(M,Rr.focus,t,k),T=Z}const D=_.formatMethod?_.formatMethod(l,t,n):l,B=Object.assign(Object.assign({x:P/2+O,y:0,textAlign:"start",textBaseline:"middle",lineHeight:(a=x.style)===null||a===void 0?void 0:a.fontSize},x.style),{text:D,_originText:_.formatMethod?l:void 0}),I=b0(B);this._appendDataToShape(I,Rr.itemLabel,t,k,x.state),I.addState(e?ie.selected:ie.unSelected),C.add(I);const F=be(_,"space",ynt);if(L(u)){const Z=be(v,"space",d?P$t:0),at=v.formatMethod?v.formatMethod(u,t,n):u,$=Object.assign(Object.assign({x:0,y:0,textAlign:"start",textBaseline:"middle",lineHeight:S.style.fontSize},S.style),{text:at,_originText:v.formatMethod?u:void 0}),ft=b0($);if(this._appendDataToShape(ft,Rr.itemValue,t,k,S.state),ft.addState(e?ie.selected:ie.unSelected),this._itemWidthByUser){const pt=this._itemWidthByUser-A[1]-A[3]-P-O-F-T-Z;this._autoEllipsis(g,pt,I,ft),v.alignRight?ft.setAttributes({textAlign:"right",x:this._itemWidthByUser-P/2-A[1]-A[3]-T-Z}):ft.setAttribute("x",F+(I.AABBBounds.empty()?0:I.AABBBounds.x2))}else ft.setAttribute("x",F+(I.AABBBounds.empty()?0:I.AABBBounds.x2));R=Z+(ft.AABBBounds.empty()?0:ft.AABBBounds.x2),C.add(ft)}else this._itemWidthByUser&&I.setAttribute("maxLineWidth",this._itemWidthByUser-A[1]-A[3]-P-O-T),R=F+(I.AABBBounds.empty()?0:I.AABBBounds.x2);M&&(M.setAttribute("x",R),C.add(M));const j=C.AABBBounds,H=j.width();if(p==="right"){const Z=j.x2,at=j.x1;C.forEachChildren(($,ft)=>{$.type!=="symbol"&&$.attribute.textAlign!=="right"||$===M?$.setAttribute("x",at+Z-$.attribute.x-$.AABBBounds.width()):$.type!=="symbol"?$.setAttributes({x:at+Z-$.attribute.x,textAlign:"left"}):$.setAttribute("x",at+Z-$.attribute.x)})}const U=j.height(),K=L(this.attribute.item.width)?this.attribute.item.width:H+A[1]+A[3],q=this._itemHeightByUser||U+A[0]+A[2];return k.attribute.width=K,k.attribute.height=q,M&&M.setAttribute("visible",!1),C.translateTo(-j.x1+A[3],-j.y1+A[0]),k}_createPager(t){var e,n;const{disableTriggerEvent:r,maxRow:s}=this.attribute,a=o=>o<=99?99:o<=999?999:9999;return this._itemContext.isHorizontal?new k0(Object.assign(Object.assign({layout:s===1?"horizontal":"vertical",total:a(this._itemContext.pages)},ot({handler:{preShape:"triangleUp",nextShape:"triangleDown"}},t)),{defaultCurrent:(e=this.attribute.pager)===null||e===void 0?void 0:e.defaultCurrent,disableTriggerEvent:r})):new k0(Object.assign({layout:"horizontal",total:a(this._itemContext.pages),disableTriggerEvent:r,defaultCurrent:(n=this.attribute.pager)===null||n===void 0?void 0:n.defaultCurrent},t))}_createScrollbar(t,e){const{disableTriggerEvent:n}=this.attribute;return this._itemContext.isHorizontal?new y0(Object.assign(Object.assign({direction:"horizontal",disableTriggerEvent:n,range:[0,.5],height:t.visible===!1?0:12},t),{width:e})):new y0(Object.assign(Object.assign({direction:"vertical",width:t.visible===!1?0:12,range:[0,.5]},t),{height:e,disableTriggerEvent:n}))}_updatePositionOfPager(t,e,n){const{pager:r}=this.attribute,{totalPage:s,isHorizontal:a}=this._itemContext,o=r&&r.position||"middle";if(this._pagerComponent.setTotal(s),a){let l;l=o==="start"?t:o==="end"?t+n-this._pagerComponent.AABBBounds.height()/2:t+n/2-this._pagerComponent.AABBBounds.height()/2,this._pagerComponent.setAttributes({x:e-this._pagerComponent.AABBBounds.width(),y:l})}else{let l;l=o==="start"?0:o==="end"?e-this._pagerComponent.AABBBounds.width():(e-this._pagerComponent.AABBBounds.width())/2,this._pagerComponent.setAttributes({x:l,y:n-this._pagerComponent.AABBBounds.height()})}}_computeScrollbarDelta(){const{isHorizontal:t,clipContainer:e}=this._itemContext,n=this._itemsContainer.AABBBounds,r=e.AABBBounds;let s,a;return t?(a=r.width(),s=a/n.width()):(a=r.height(),s=a/n.height()),s}_updatePositionOfScrollbar(t,e,n){const{isHorizontal:r,currentPage:s,totalPage:a}=this._itemContext,o=(s-1)/a;this._pagerComponent.setScrollRange([o,o+this._computeScrollbarDelta()]),r?this._pagerComponent.setAttributes({x:0,y:n+e}):this._pagerComponent.setAttributes({x:t,y:n})}_bindEventsOfPager(t,e){const n=this.attribute.pager||{},{animation:r=!0,animationDuration:s=450,animationEasing:a="quadIn"}=n,o=this._itemContext.isScrollbar?c=>{const{value:h}=c.detail;let d;return d=h[0]===0?1:h[1]===1?this._itemContext.totalPage:h[0]*this._itemContext.totalPage+1,d}:c=>c.detail.current,l=c=>{const h=this._pagerComponent,d=h.getScrollRange(),{direction:f}=h.attribute,{width:p,height:g}=h.getSliderRenderBounds(),m=f==="vertical"?c.deltaY/g:c.deltaX/p;h.setScrollRange([d[0]+m,d[1]+m],!0),this.updateScrollMask()},u=c=>{const h=o(c);if(h!==this._itemContext.currentPage){if(this._itemContext.currentPage=h,this._itemContext&&this._itemContext.startIndex<this._itemContext.items.length){this._renderItems();const d=Math.ceil(this._itemContext.pages/this._itemContext.maxPages);if(this._itemContext.totalPage=d,this._itemContext.isScrollbar&&this._pagerComponent){const f=this._computeScrollbarDelta(),[p]=this._pagerComponent.getScrollRange();this._pagerComponent.setScrollRange([p,p+f])}}if(this._itemContext.isScrollbar){const[d]=this._pagerComponent.getScrollRange();let f;f=this._itemContext.isHorizontal?this._itemsContainer.AABBBounds.width():this._itemsContainer.AABBBounds.height();const p=f*d;this.updateScrollMask(),r?this._itemsContainer.animate().to({[e]:-p},s,a):this._itemsContainer.setAttribute(e,-p)}else r?this._itemsContainer.animate().to({[e]:-(h-1)*t},s,a):this._itemsContainer.setAttribute(e,-(h-1)*t)}};this._itemContext.isScrollbar?(this._pagerComponent.addEventListener("scrollDrag",u),this._pagerComponent.addEventListener("scrollUp",u),this.attribute.pager.roamScroll&&(this.addEventListener("wheel",h=>h.nativeEvent.preventDefault()),this.addEventListener("wheel",ac(l,50)))):(this._pagerComponent.addEventListener("toPrev",u),this._pagerComponent.addEventListener("toNext",u))}_renderPager(){const t=this._title?this._title.AABBBounds.height()+be(this.attribute,"title.space",8):0,{maxWidth:e,maxCol:n=1,maxRow:r=2,item:s={},pager:a={}}=this.attribute,{spaceCol:o=g1,spaceRow:l=m1}=s,u=this._itemsContainer,{space:c=iL,defaultCurrent:h=1}=a,d=U4(a,["space","defaultCurrent"]),{isHorizontal:f}=this._itemContext,p=this._contentMaxHeight;let g,m=0,_=0,v=0,y=0,b=0,x=0,S=1;if(f){if(_=(r-1)*l+this._itemHeight*r,m=e,g=this._createPager(d),this._pagerComponent=g,this._innerView.add(g),v=e-g.AABBBounds.width()-c,v<=0)return this._innerView.removeChild(g),!1;u.getChildren().forEach((k,C)=>{const{width:M,height:R}=k.attribute;v<b+M&&C>0&&(b=0,x+=R+l,S+=1),C>0&&k.setAttributes({x:b,y:x}),b+=o+M}),this._itemContext.startX=b,this._itemContext.startY=x,this._itemContext.pages=S;const A=Math.ceil(S/r);this._itemContext.totalPage=A,this._updatePositionOfPager(t,m,_)}else{if(m=this._itemMaxWidth*n+(n-1)*o,_=p,v=m,g=this._createPager(d),this._pagerComponent=g,this._innerView.add(g),y=p-g.AABBBounds.height()-c-t,y<=0)return this._innerView.removeChild(g),!1;u.getChildren().forEach((k,C)=>{const{width:M,height:R}=k.attribute;y<x+R&&C>0&&(x=0,b+=this._itemMaxWidth+o,S+=1),C>0&&k.setAttributes({x:b,y:x}),x+=l+R});const A=Math.ceil(S/n);this._itemContext.totalPage=A,this._updatePositionOfPager(t,m,_)}h>1&&(f?u.setAttribute("y",-(h-1)*(_+l)):u.setAttribute("x",-(h-1)*(m+o)));const w=Mt.group({x:0,y:t,width:f?v:m,height:f?_:y,clip:!0,pickable:!1});return w.add(u),this._innerView.add(w),this._itemContext.clipContainer=w,this._bindEventsOfPager(f?_+l:m+o,f?"y":"x"),!0}_renderScrollbar(){var t;const e=this._title?this._title.AABBBounds.height()+be(this.attribute,"title.space",8):0,{maxWidth:n,item:r={},pager:s={}}=this.attribute,{spaceCol:a=g1,spaceRow:o=m1}=r,l=this._itemsContainer,{space:u=iL,defaultCurrent:c=1}=s,h=U4(s,["space","defaultCurrent"]),{isHorizontal:d}=this._itemContext,f=this._contentMaxHeight;let p,g=0,m=0,_=0,v=1;if(d)g=n,m=this._itemHeight,p=this._createScrollbar(h,g),this._pagerComponent=p,this._innerView.add(p);else{if(m=f-e,g=this._itemMaxWidth,p=this._createScrollbar(h,m),this._pagerComponent=p,this._innerView.add(p),m<=0)return this._innerView.removeChild(p),!1;const b=l.getChildren(),x=b.map(S=>S.attribute.height);if(x.length===1||x.every(S=>S===x[0])){const S=x[0],w=m,A=Math.floor(w/(o+S));m=A*(o+S),v=Math.ceil(b.length/A)}else b.forEach((S,w)=>{const{height:A}=S.attribute,k=v,C=_;v=Math.floor((_+A)/m)+1,_+=o+A,k!==v&&w===l.getChildren().length-1&&_-m>=1/3*A&&(m=C+A,v-=1)});this._itemContext.totalPage=v,this._itemContext.pages=v}if(c>1)if(d){const b=this._itemsContainer.AABBBounds.width()-g;l.setAttribute("x",-Math.min((c-1)*(g+a),b))}else{const b=this._itemsContainer.AABBBounds.height()-m;l.setAttribute("y",-Math.min((c-1)*(m+o),b))}const y=Mt.group({x:0,y:e,width:g,height:m,clip:!0,pickable:!1});return y.add(l),this._innerView.add(y),this._itemContext.clipContainer=y,this._updatePositionOfScrollbar(g,m,e),!((t=s.scrollMask)===null||t===void 0)&&t.visible&&this.renderScrollMask(y),this._bindEventsOfPager(d?g:m,d?"x":"y"),!0}renderScrollMask(t){const{scrollMask:e={}}=this.attribute.pager,{visible:n=!0,gradientLength:r=16,gradientStops:s}=e;if(!n||!s)return;const a=t.AABBBounds.width(),o=t.AABBBounds.height(),l=this._itemContext.isHorizontal?a:o,u=s.map(d=>({offset:r*d.offset/l,color:d.color})),c=s.map(d=>({offset:(l-r*d.offset)/l,color:d.color})),h=Mt.rect({x:0,y:0,width:a,height:o});this._scrollMask=h,this._scrollMaskContext={startStops:u,endStops:c},this.updateScrollMask(),t.add(h)}updateScrollMask(){if(!this._scrollMask||!this._pagerComponent||!this._itemContext.isScrollbar)return;const[t,e]=this._pagerComponent.getScrollRange(),n=[];sn(Ke(e,0,1),1)||n.push(...this._scrollMaskContext.endStops),sn(Ke(t,0,1),0)||n.push(...this._scrollMaskContext.startStops),n.length&&(this._itemContext.isHorizontal?this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:n}}):this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:0,y1:1,stops:n}}))}_renderPagerComponent(){return this._itemContext.isScrollbar?this._renderScrollbar():this._renderPager(),!0}_hover(t,e){this._lastActiveItem=t,t.hasState(ie.selected)?this._setLegendItemState(t,ie.selectedHover,e):this._setLegendItemState(t,ie.unSelectedHover,e);const n=t.getChildren()[0].find(r=>r.name===Rr.focus,!1);n&&n.setAttribute("visible",!0),this._dispatchLegendEvent(za.legendItemHover,t,e)}_unHover(t,e){let n=!1;(t.hasState(ie.unSelectedHover)||t.hasState(ie.selectedHover))&&(n=!0),t.removeState(ie.unSelectedHover),t.removeState(ie.selectedHover),t.getChildren()[0].getChildren().forEach(s=>{n||!s.hasState(ie.unSelectedHover)&&!s.hasState(ie.selectedHover)||(n=!0),s.removeState(ie.unSelectedHover),s.removeState(ie.selectedHover)});const r=t.getChildren()[0].find(s=>s.name===Rr.focus,!1);r&&r.setAttribute("visible",!1),n&&this._dispatchLegendEvent(za.legendItemAttributeUpdate,t,e),this._dispatchLegendEvent(za.legendItemUnHover,t,e)}_setLegendItemState(t,e,n){let r=!1;t.hasState(e)||(r=!0),t.addState(e,!0),t.getChildren()[0].getChildren().forEach(s=>{s.name!==Rr.focus&&(r||s.hasState(e)||(r=!0),s.addState(e,!0))}),r&&this._dispatchLegendEvent(za.legendItemAttributeUpdate,t,n)}_removeLegendItemState(t,e,n){let r=!1;e.forEach(s=>{!r&&t.hasState(s)&&(r=!0),t.removeState(s)}),t.getChildren()[0].getChildren().forEach(s=>{s.name!==Rr.focus&&e.forEach(a=>{!r&&s.hasState(a)&&(r=!0),s.removeState(a)})}),r&&this._dispatchLegendEvent(za.legendItemAttributeUpdate,t,n)}_getSelectedLegends(){var t;const e=[];return(t=this._itemsContainer)===null||t===void 0||t.getChildren().forEach(n=>{n.hasState(ie.selected)&&e.push(n.data)}),e}_appendDataToShape(t,e,n,r,s={}){t.name=e,t.data=n,t.delegate=r,t.states=ot({},D$t,s)}_dispatchLegendEvent(t,e,n){const r=this._getSelectedLegends();r.sort((a,o)=>a.index-o.index);const s=r.map(a=>a.label);this._dispatchEvent(t,{item:e,data:e.data,selected:e.hasState(ie.selected),currentSelectedItems:r,currentSelected:s,event:n})}_handleStyle(t,e,n,r,s){const a={};return t.style&&(it(t.style)?a.style=t.style(e,n,r,s):a.style=t.style),t.state&&(a.state={},Object.keys(t.state).forEach(o=>{t.state[o]&&(it(t.state[o])?a.state[o]=t.state[o](e,n,r,s):a.state[o]=t.state[o])})),a}release(){super.release(),this.removeAllEventListeners()}};bnt.defaultAttributes={layout:"horizontal",title:{align:"start",space:Ub,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:g1,spaceRow:m1,shape:{space:vnt,style:{size:lk,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{opacity:.5}}},label:{space:ynt,style:{fontSize:12,fill:"#2C3542",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"}},focus:!1,focusIconStyle:{size:lk,symbolType:"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8.75044 2.55077L8.75 3.75H7.25L7.25006 2.5507C4.81247 2.88304 2.88304 4.81247 2.5507 7.25006L3.75 7.25V8.75L2.55077 8.75044C2.8833 11.1878 4.81264 13.117 7.25006 13.4493L7.25 12.25H8.75L8.75044 13.4492C11.1876 13.1167 13.1167 11.1876 13.4492 8.75044L12.25 8.75V7.25L13.4493 7.25006C13.117 4.81264 11.1878 2.8833 8.75044 2.55077ZM8 5.5C9.38071 5.5 10.5 6.61929 10.5 8C10.5 9.38071 9.38071 10.5 8 10.5C6.61929 10.5 5.5 9.38071 5.5 8C5.5 6.61929 6.61929 5.5 8 5.5ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"#333",cursor:"pointer"}},autoPage:!0,pager:{space:iL,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!0};var Er;(function(i){i.innerView="innerView",i.railContainer="sliderRailContainer",i.rail="sliderRail",i.startText="sliderStartText",i.endText="sliderEndText",i.startHandler="sliderStartHandler",i.startHandlerText="startHandlerText",i.endHandler="sliderEndHandler",i.endHandlerText="sliderEndHandlerText",i.track="sliderTrack",i.trackContainer="sliderTrackContainer"})(Er||(Er={}));function YE(i){return J(i)?i:[i,i]}function RS(i){return i?"ew-resize":"ns-resize"}tT();class Hm extends fr{get track(){return this._track}get currentValue(){return this._currentValue}get startHandler(){return this._startHandler}get endHandler(){return this._endHandler}get tooltipShape(){return this._tooltipShape}constructor(t,e){super(e?.skipDefault?t:ot({},Hm.defaultAttributes,t)),this.name="slider",this._isHorizontal=!0,this._startHandler=null,this._endHandler=null,this._startHandlerText=null,this._endHandlerText=null,this._currentHandler=null,this._currentValue={},this._onTooltipShow=n=>{this._isChanging||this._tooltipState&&this._tooltipState.isActive||(this._tooltipState?this._tooltipState.isActive=!0:this._tooltipState={isActive:!0},this._onTooltipUpdate(n),this._dispatchTooltipEvent("sliderTooltipShow"))},this._onTooltipUpdate=n=>{if(this._isChanging||!this._tooltipState||!this._tooltipState.isActive)return;const r=this._isHorizontal?this._rail.globalAABBBounds.width():this._rail.globalAABBBounds.height(),s=Ke(this._isHorizontal?(n.viewX-this._rail.globalAABBBounds.x1)/r:(n.viewY-this._rail.globalAABBBounds.y1)/r,0,1);s!==this._tooltipState.pos&&(this._tooltipState.pos=s,this._tooltipState.value=this.calculateValueByPos(s*r),this._updateTooltip(),this._dispatchTooltipEvent("sliderTooltipUpdate"))},this._onTooltipHide=()=>{const{tooltip:n}=this.attribute;n&&n.alwaysShow||(this._tooltipState=null,this._tooltipShape&&this._tooltipShape.setAttribute("visible",!1),this._tooltipText&&this._tooltipText.setAttribute("visible",!1),this._dispatchTooltipEvent("sliderTooltipHide"))},this._onHandlerPointerdown=n=>{this._clearAllDragEvents(),this._isChanging=!0;const{x:r,y:s}=this.stage.eventPointTransform(n);this._currentHandler=n.target,this._prePos=this._isHorizontal?r:s;const a=Ad(),o=Qt.env==="browser"?Qt:this.stage;o.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),a.forEach(l=>{o.addEventListener(l,this._onHandlerPointerUp)})},this._onHandlerPointerMove=n=>{var r,s;this._isChanging=!0;const{railWidth:a,railHeight:o,min:l,max:u}=this.attribute;if(u===l)return;const{x:c,y:h}=this.stage.eventPointTransform(n);let d,f,p,g=0;this._isHorizontal?(d=c,g=d-this._prePos,f=(s=this._currentHandler)===null||s===void 0?void 0:s.attribute.x,p=a):(d=h,g=d-this._prePos,f=(r=this._currentHandler)===null||r===void 0?void 0:r.attribute.y,p=o);const m=Ke(f+g,0,p),_=this.calculateValueByPos(m);this._currentHandler.type==="text"?this._updateHandlerText(this._currentHandler,m,_):this._updateHandler(this._currentHandler,m,_),this._updateTrack(),this._prePos=d,this._dispatchChangeEvent()},this._onHandlerPointerUp=n=>{this._isChanging=!1,this._currentHandler=null,this._clearAllDragEvents()},this._handleTouchMove=n=>{this._isChanging&&n.preventDefault()},this._onTrackPointerdown=n=>{this._clearAllDragEvents(),this._isChanging=!0;const{x:r,y:s}=this.stage.eventPointTransform(n);this._prePos=this._isHorizontal?r:s;const a=Ad(),o=Qt.env==="browser"?Qt:this.stage;o.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),a.forEach(l=>{o.addEventListener(l,this._onTrackPointerUp)})},this._onTrackPointerMove=n=>{this._isChanging=!0;const{railWidth:r,railHeight:s,min:a,max:o,inverse:l}=this.attribute;if(o===a)return;const{startHandler:u,endHandler:c}=this._getHandlers();let h,d,f;const{x:p,y:g}=this.stage.eventPointTransform(n);this._isHorizontal?(h=p,d=this._track.attribute.width,f=r):(h=g,d=this._track.attribute.height,f=s);const m=h-this._prePos;if(u){const _=this._isHorizontal?u.attribute.x:u.attribute.y,v=l?Ke(_+m,d,f):Ke(_+m,0,f-d),y=this.calculateValueByPos(v);this._updateHandler(u,v,y)}if(c){const _=this._isHorizontal?c.attribute.x:c.attribute.y,v=l?Ke(_+m,0,f-d):Ke(_+m,d,f),y=this.calculateValueByPos(v),b=u?.attribute;this._updateHandler(c,v,y),this._track.setAttributes(this._isHorizontal?{x:Math.min(b.x,c.attribute.x),width:Math.abs(b.x-c.attribute.x)}:{y:Math.min(b.y,c.attribute.y),height:Math.abs(b.y-c.attribute.y)})}this._prePos=h,this._dispatchChangeEvent()},this._onTrackPointerUp=n=>{this._isChanging=!1,this._clearAllDragEvents()},this._onRailPointerDown=n=>{this._clearAllDragEvents(),this._isChanging=!0;const{railWidth:r,railHeight:s,min:a,max:o}=this.attribute;if(o===a)return;const l=this._startHandler,u=this._endHandler;let c,h,d;this._isHorizontal?(c=n.viewX-this._rail.globalAABBBounds.x1,h=l?.attribute.x,d=u?.attribute.x):(c=n.viewY-this._rail.globalAABBBounds.y1,h=l?.attribute.y,d=u?.attribute.y);const f=this.calculateValueByPos(c);if(L(d)){const p=Math.abs(c-h)>Math.abs(c-d)?u:l;this._updateHandler(p,c,f)}else this._updateHandler(l,c,f);this._updateTrack(),this._dispatchChangeEvent()}}calculatePosByValue(t,e){const{layout:n,railWidth:r,railHeight:s,min:a,max:o,inverse:l}=this.attribute;let u=0;return u=a===o?e==="start"?0:e==="end"?1:0:(t-a)/(o-a),(l?1-u:u)*(n==="vertical"?s:r)}calculateValueByPos(t){const{layout:e,railWidth:n,railHeight:r,min:s,max:a,inverse:o}=this.attribute,l=e==="vertical"?r:n;return s+(a-s)*(o?1-t/l:t/l)}setValue(t){const{min:e,max:n}=this.attribute;if(n===e)return;const[r,s]=X(t),{startHandler:a,endHandler:o}=this._getHandlers();a&&this._updateHandler(a,this.calculatePosByValue(r),r),o&&this._updateHandler(o,this.calculatePosByValue(s),s),this._updateTrack()}render(){var t,e;this.removeAllChild(!0);const{layout:n="horizontal",railWidth:r,railHeight:s,startText:a,endText:o,min:l,max:u,showHandler:c=!0,showTooltip:h}=this.attribute;let{value:d}=this.attribute;N(d)&&(d=[l,u]),this._currentValue={startValue:YE(d)[0],endValue:YE(d)[1]};const f=n==="horizontal";this._isHorizontal=f;const p=Mt.group({x:0,y:0});p.name=Er.innerView,this.add(p),this._innerView=p;let g,m=0;if(a&&a.visible){g=Mt.text(Object.assign({x:f?0:r/2,y:f?s/2:0,textAlign:f?"start":"center",textBaseline:f?"middle":"top",text:a.text,lineHeight:(t=a.style)===null||t===void 0?void 0:t.fontSize},a.style)),g.name=Er.startText,p.add(g);const b=L(a.space)?a.space:0;m+=(f?g.AABBBounds.width():g.AABBBounds.height())+b}const _=Mt.group({x:f?m:0,y:f?0:m});p.add(_);const v=Mt.group({x:0,y:0});let y;if(v.name=Er.railContainer,this._railContainer=v,_.add(v),this._mainContainer=_,this._renderRail(v),m+=f?r:s,o&&o.visible){const b=L(o.space)?o.space:0;y=Mt.text(Object.assign({x:f?m+b:r/2,y:f?s/2:m+b,textAlign:f?"start":"center",textBaseline:f?"middle":"top",text:o.text,lineHeight:(e=o.style)===null||e===void 0?void 0:e.fontSize},o.style)),y.name=Er.endText,p.add(y)}this._renderTrack(v),c&&(this._renderHandlers(_),this._bindEvents()),h&&(this._renderTooltip(),this._bindTooltipEvents())}_renderRail(t){const{railWidth:e,railHeight:n,railStyle:r,slidable:s}=this.attribute;let a="default";s!==!1&&(a="pointer");const o=Mt.rect(Object.assign({x:0,y:0,width:e,height:n,cursor:a},r));return o.name=Er.rail,t.add(o),this._rail=o,o}_renderHandlers(t){const{range:e,min:n,max:r,handlerSize:s=14,handlerStyle:a,handlerText:o,railHeight:l,railWidth:u,slidable:c}=this.attribute;let{value:h}=this.attribute;N(h)&&(h=[n,r]);const d=o&&o.visible,f=this._isHorizontal,[p,g]=YE(h),m=this.calculatePosByValue(p,e?"start":"end"),_=this._renderHandler(Object.assign({x:f?m:u/2,y:f?l/2:m,size:s,strokeBoundsBuffer:0,cursor:c===!1?"default":RS(f)},a));if(_.name=Er.startHandler,this._startHandler=_,t.add(_),this._currentValue.startPos=m,d){const v=this._renderHandlerText(p,e?"start":"end");v.name=Er.startHandlerText,t.add(v),this._startHandlerText=v}if(e){const v=this.calculatePosByValue(g,"end"),y=this._renderHandler(Object.assign({x:f?v:u/2,y:f?l/2:v,size:s,strokeBoundsBuffer:0,cursor:c===!1?"default":RS(f)},a));if(y.name=Er.endHandler,this._endHandler=y,t.add(y),this._currentValue.endPos=v,d){const b=this._renderHandlerText(g,"end");b.name=Er.endHandlerText,t.add(b),this._endHandlerText=b}}}_renderTrack(t){const{range:e,min:n,max:r,railHeight:s,railWidth:a,trackStyle:o,railStyle:l,slidable:u,value:c}=this.attribute;let h,d;if(N(c))e?(h=n,d=r):h=d=n;else if(e){const b=Yh(c,n,r);h=b[0],d=b[1]}else h=n,d=Ke(c,n,r);const f=this._isHorizontal;e||(h=n);const p=Mt.group({x:0,y:0,width:a,height:s,cornerRadius:l?.cornerRadius,clip:!0,pickable:!1});p.name=Er.trackContainer;const g=ee(e)&&e.draggableTrack===!0;let m;m=u===!1?"default":e===!1||g===!1?"pointer":RS(f);const _=this.calculatePosByValue(h,"start"),v=this.calculatePosByValue(d,e?"end":"start"),y=Mt.rect(Object.assign({x:f?Math.min(_,v):0,y:f?0:Math.min(_,v),width:f?Math.abs(v-_):a,height:f?s:Math.abs(v-_),cursor:m},o));y.name=Er.track,this._track=y,p.add(y),t.add(p)}_renderHandler(t){return Mt.symbol(t)}_renderHandlerText(t,e){var n,r,s;const{align:a,handlerSize:o=14,handlerText:l={},railHeight:u,railWidth:c,slidable:h}=this.attribute,d=this._isHorizontal,f=this.calculatePosByValue(t,e),p=(n=l.space)!==null&&n!==void 0?n:4,g={text:l.formatter?l.formatter(t):t.toFixed((r=l.precision)!==null&&r!==void 0?r:0),lineHeight:(s=l.style)===null||s===void 0?void 0:s.lineHeight,cursor:h===!1?"default":RS(d)};return d?a==="top"?(g.textBaseline="bottom",g.textAlign="center",g.x=f,g.y=(u-o)/2-p):(g.textBaseline="top",g.textAlign="center",g.x=f,g.y=(u+o)/2+p):a==="left"?(g.textBaseline="middle",g.textAlign="end",g.x=(c-o)/2-p,g.y=f):(g.textBaseline="middle",g.textAlign="start",g.x=(c+o)/2+p,g.y=f),Mt.text(Object.assign(Object.assign({},g),l.style))}_renderTooltip(){var t;const{tooltip:e,railHeight:n,railWidth:r,align:s}=this.attribute;e&&e.alwaysShow?this._tooltipState={value:this._currentValue.startValue,pos:this._currentValue.startPos}:this._tooltipState=null;const a=this._isHorizontal?0:r/2,o=this._isHorizontal?n/2:0;if(e&&e.shape){const d=Mt.symbol(Object.assign({pickable:!1,visible:!!this._tooltipState,x:a,y:o,symbolType:"circle"},e.shapeStyle));this._tooltipShape=d,this._mainContainer.add(d)}const l=e&&e.text||{},u=(t=l.space)!==null&&t!==void 0?t:6,c={pickable:!1,visible:!!this._tooltipState,text:""};this._isHorizontal?(c.x=a,c.y=s==="top"?o-n/2-u:o+n/2+u,c.textAlign="center",c.textBaseline=s==="top"?"bottom":"top"):(c.y=o,c.x=s==="left"?a-r/2-u:o+r/2+u,c.textAlign=s==="left"?"end":"start",c.textBaseline="middle");const h=Mt.text(Object.assign(Object.assign({},c),l.style));this._mainContainer.add(h),this._tooltipText=h,this._tooltipState&&this._updateTooltip()}_updateTooltip(){var t,e;if(!this._tooltipShape&&!this._tooltipText||!this._tooltipState)return;const{railWidth:n,railHeight:r}=this.attribute,s=this._isHorizontal?n:r,a=this._tooltipState.pos*s,o=this._isHorizontal?"x":"y";this._tooltipShape&&this._tooltipShape.setAttributes({visible:!0,[o]:a});const{align:l}=this.attribute;if(this._tooltipText){const u=this.attribute.tooltip&&this.attribute.tooltip.text||{};this._tooltipText.setAttributes({visible:!0,[o]:a,text:u.formatter?u.formatter(this._tooltipState.value):this._isHorizontal||l!=="left"?` ${this._tooltipState.value.toFixed((e=u.precision)!==null&&e!==void 0?e:0)}`:`${this._tooltipState.value.toFixed((t=u.precision)!==null&&t!==void 0?t:0)} `})}}_bindEvents(){if(this.attribute.disableTriggerEvent)return;const{slidable:t,range:e}=this.attribute;t&&(this._startHandler&&this._startHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._startHandlerText&&this._startHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandler&&this._endHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandlerText&&this._endHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),ee(e)&&e.draggableTrack&&this._track.addEventListener("pointerdown",this._onTrackPointerdown),this._railContainer.addEventListener("pointerdown",this._onRailPointerDown),(Qt.env==="browser"?Qt:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}))}_bindTooltipEvents(){this.attribute.disableTriggerEvent||(this._mainContainer.addEventListener("pointerenter",this._onTooltipShow),this._mainContainer.addEventListener("pointermove",this._onTooltipUpdate),this._mainContainer.addEventListener("pointerleave",this._onTooltipHide))}_clearAllDragEvents(){const t=Ad(),e=Qt.env==="browser"?Qt:this.stage;e.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),t.forEach(n=>{e.removeEventListener(n,this._onHandlerPointerUp)}),e.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),t.forEach(n=>{e.removeEventListener(n,this._onTrackPointerUp)})}_updateTrack(){const{inverse:t,railWidth:e,railHeight:n}=this.attribute,r=this._startHandler,s=this._endHandler;if(this._isHorizontal){const a=r?.attribute.x;if(s){const o=s?.attribute.x;this._track.setAttributes({x:Math.min(a,o),width:Math.abs(a-o)})}else t?this._track.setAttributes({x:a,width:e-a}):this._track.setAttributes({width:a})}else{const a=r?.attribute.y;if(s){const o=s?.attribute.y;this._track.setAttributes({y:Math.min(a,o),height:Math.abs(a-o)})}else t?this._track.setAttributes({y:a,height:n-a}):this._track.setAttributes({height:a})}}_updateHandler(t,e,n){var r;const s=this._isHorizontal;t.setAttribute(s?"x":"y",e);const a=t.name===Er.startHandler?this._startHandlerText:this._endHandlerText;if(a){const{handlerText:o={}}=this.attribute;a.setAttributes({text:o.formatter?o.formatter(n):n.toFixed((r=o.precision)!==null&&r!==void 0?r:0),[s?"x":"y"]:e})}t.name===Er.startHandler?(this._currentValue.startValue=n,this._currentValue.startPos=e):(this._currentValue.endValue=n,this._currentValue.endPos=e)}_updateHandlerText(t,e,n){var r;const s=this._isHorizontal,{handlerText:a={}}=this.attribute;t.setAttributes({[s?"x":"y"]:e,text:a.formatter?a.formatter(n):n.toFixed((r=a.precision)!==null&&r!==void 0?r:0)});const o=t.name===Er.startHandlerText?this._startHandler:this._endHandler;o&&o.setAttributes({[s?"x":"y"]:e}),t.name===Er.startHandlerText?(this._currentValue.startValue=n,this._currentValue.startPos=e):(this._currentValue.endValue=n,this._currentValue.endPos=e)}_dispatchChangeEvent(){const t=!!this.attribute.range,e=this._currentValue;this._dispatchEvent("change",{value:t?[Math.min(e.endValue,e.startValue),Math.max(e.endValue,e.startValue)]:e.startValue,position:t?[Math.min(e.endPos,e.startPos),Math.max(e.endPos,e.startPos)]:e.startPos})}_dispatchTooltipEvent(t){this._dispatchEvent("sliderTooltip",{type:t,position:this._tooltipState&&this._tooltipState.pos,value:this._tooltipState&&this._tooltipState.value})}_getHandlers(){const{inverse:t}=this.attribute;let e=this._startHandler,n=this._endHandler;return n?(this._isHorizontal?(!t&&n.attribute.x<e?.attribute.x||t&&n.attribute.x>e?.attribute.x)&&([e,n]=[n,e]):(!t&&n.attribute.y<e?.attribute.y||t&&n.attribute.y>e?.attribute.y)&&([e,n]=[n,e]),{startHandler:e,endHandler:n}):{startHandler:e,endHandler:n}}release(t){super.release(t),(Qt.env==="browser"?Qt:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}),this._clearAllDragEvents()}}Hm.defaultAttributes={slidable:!0,layout:"horizontal",align:"bottom",height:8,showHandler:!0,handlerSize:14,handlerStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},tooltip:{shapeStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},text:{style:{fill:"#2C3542",fontSize:12}}},railStyle:{fill:"rgba(0,0,0,.04)"},trackStyle:{fill:"#91caff"},showValue:!0,valueStyle:{fill:"#2C3542",fontSize:12},startText:{style:{fill:"#2C3542",fontSize:12}},endText:{style:{fill:"#2C3542",fontSize:12}},handlerText:{visible:!0,space:4,precision:0,style:{fill:"#2C3542",fontSize:12}}};R$t();class eT extends nz{constructor(t,e){super(e?.skipDefault?t:ot({},eT.defaultAttributes,t)),this.name="colorLegend",this._onSliderToolipChange=n=>{const r=this._slider.tooltipShape;if(r&&n.detail&&!N(n.detail.value)){const s=this._colorScale.scale(n.detail.value);r.setAttribute("fill",s)}this.dispatchEvent(n)},this._onSliderChange=n=>{this._updateColor(),this.dispatchEvent(n)}}setSelected(t){this._slider&&(this._slider.setValue(t),this._updateColor())}_renderContent(){const{colors:t,slidable:e,layout:n,align:r,min:s,max:a,value:o,railWidth:l,railHeight:u,showHandler:c=!0,handlerSize:h,handlerStyle:d,railStyle:f,trackStyle:p,startText:g,endText:m,handlerText:_,showTooltip:v,tooltip:y,inverse:b,disableTriggerEvent:x}=this.attribute,S=[],w=(a-s)/(t.length-1);for(let k=0;k<t.length;k++)S.push(s+w*k);this._colorScale=new vs().domain(S,!0).range(t),this._color=this._getTrackColor();const A=new Hm({x:0,y:0,range:{draggableTrack:!0},slidable:e,layout:n,align:r,min:s,max:a,value:o,railWidth:l,railHeight:u,showHandler:c,handlerSize:h,handlerStyle:d,railStyle:f,trackStyle:Object.assign({fill:this._color},p),startText:g,endText:m,handlerText:_,showTooltip:v,tooltip:y,disableTriggerEvent:x,inverse:b});this._innerView.add(A),this._slider=A,A.translateTo(0-A.AABBBounds.x1,(this._title?this._title.AABBBounds.height()+be(this.attribute,"title.space",Ub):0)-A.AABBBounds.y1),this._updateColor()}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}_getTrackColor(){const{colors:t,layout:e,inverse:n}=this.attribute;if(Lt(t))return;const r=t.length;if(r===1)return t[0];const s=[];for(let l=0;l<r;l++){const u=l/(r-1);s.push({offset:u,color:t[l]})}const a=e==="horizontal",o={gradient:"linear",stops:s,x0:0,y0:0,x1:a?1:0,y1:a?0:1};return n&&(a?(o.x0=1,o.x1=0):(o.y0=1,o.y1=0)),o}_updateColor(){var t;const{layout:e="horizontal",colors:n,railWidth:r,railHeight:s}=this.attribute,{startHandler:a,endHandler:o,track:l,attribute:u}=this._slider,{startValue:c,endValue:h,startPos:d,endPos:f}=this._slider.currentValue,p=(t=u.handlerStyle)===null||t===void 0?void 0:t.fill;if(a&&!p){const m=this._colorScale.scale(c);a.setAttribute("fill",m)}if(o&&!p){const m=this._colorScale.scale(h);o.setAttribute("fill",m)}const g=e==="horizontal"?r:s;if(Math.abs(d-f)!==g&&n&&n.length>1){const m=this._color.stops,_=Math.min(d,f),v=Math.max(d,f),y=_/g,b=v/g,x=b-y,S=m.filter(R=>R.offset>y&&R.offset<b),w=Math.min(c,h),A=Math.max(c,h),k=this._colorScale.scale(w),C=this._colorScale.scale(A),M=[{offset:0,color:k}];S.forEach(R=>{M.push({offset:(R.offset-y)/x,color:R.color})}),M.push({offset:1,color:C}),l.setAttribute("fill",Object.assign(Object.assign({},this._color),{stops:M}))}}}eT.defaultAttributes={layout:"horizontal",title:{align:"start",space:Ub,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{fill:null,lineWidth:4,stroke:"#fff",outerBorder:{distance:2,lineWidth:1,stroke:"#ccc"}},tooltip:{shapeStyle:{lineWidth:4,stroke:"#fff"}}};function I$t(i="bottom"){let t=0;return i==="top"?`
    M${t},-6L${t-3.5},-2.5
    v5
    h7
    v-5
    Z
`:i==="left"?(t=1,`
    M${t-6},0L${t-6+2.5},-3.5
    h5
    v7
    h-5
    Z
`):i==="right"?(t=-1,`
    M${t+6},0L${t+6-2.5},-3.5
    h-5
    v7
    h5
    Z
  `):`
    M${t},6L${t-3.5},2.5
    v-5
    h7
    v5
    Z
`}O$t();class iT extends nz{constructor(t,e){super(e?.skipDefault?t:ot({},iT.defaultAttributes,t)),this.name="sizeLegend",this._onSliderChange=n=>{this.dispatchEvent(n)},this._onSliderToolipChange=n=>{this.dispatchEvent(n)}}setSelected(t){this._slider&&this._slider.setValue(t)}_renderContent(){const{slidable:t,layout:e,align:n,min:r,max:s,value:a,railWidth:o,railHeight:l,showHandler:u=!0,handlerSize:c,handlerStyle:h,railStyle:d,trackStyle:f,startText:p,endText:g,handlerText:m,showTooltip:_,tooltip:v,sizeBackground:y,disableTriggerEvent:b,inverse:x}=this.attribute,S=Mt.group({x:0,y:0});this._innerView.add(S);const w=new Hm({x:0,y:0,zIndex:1,range:{draggableTrack:!0},slidable:t,layout:e,align:n,min:r,max:s,value:a,railWidth:o,railHeight:l,showHandler:u,handlerSize:c,handlerStyle:Object.assign({symbolType:I$t(n)},h),railStyle:d,trackStyle:f,startText:p,endText:g,handlerText:m,showTooltip:_,tooltip:v,disableTriggerEvent:b,inverse:x});S.add(w);let A,k=0;e==="horizontal"?n==="top"?(A=`M0,0L${o},0L${x?0:o},12Z`,k=l):(A=`M0,12L${o},12L${x?0:o},0Z`,w.setAttribute("y",12)):n==="left"?A=`M${o},0L${o+12},${x?0:l}L${o},${l}Z`:(A=`M0,${x?0:l}L12,${l}L12,0Z`,w.setAttribute("x",12));const C=Mt.path(Object.assign(Object.assign({x:0,y:k,path:A},y),{zIndex:0}));S.add(C);const M=this._title?this._title.AABBBounds.height()+be(this.attribute,"title.space",Ub):0;S.translate(0-S.AABBBounds.x1,M-S.AABBBounds.y1),this._slider=w}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}}iT.defaultAttributes={layout:"horizontal",title:{align:"start",space:Ub,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{lineWidth:1,stroke:"#ccc",fill:"#fff"},sizeBackground:{fill:"rgba(20,20,20,0.1)"}};function L$t(){ln(),eu(),yf()}L$t();let Snt=class wnt extends fr{constructor(t,e){super(e?.skipDefault?t:ot({},wnt.defaultAttributes,t)),this.name="title"}render(){var t,e,n,r,s,a,o,l,u,c,h,d,f,p,g,m,_,v,y,b;const{textType:x,text:S,subtextType:w,textStyle:A={},subtext:k,subtextStyle:C={},width:M,height:R,minWidth:P,maxWidth:O,minHeight:T,maxHeight:D,align:B,verticalAlign:I,padding:F=0}=this.attribute,j=zr(F),H=this.createOrUpdateChild("title-container",{x:j[3],y:j[0],zIndex:1},"group"),U=(t=A.height)!==null&&t!==void 0?t:R;if(this.attribute.visible!==!1&&A.visible!==!1){const{width:pt,maxHeight:rt,maxWidth:gt,x:mt=0,y:Dt=0,ellipsis:St=!0,wordBreak:Ot="break-word",maxWidth:Pt,lineClamp:_e}=A;if(x==="rich"||L(A.character)){const Ze=Object.assign({x:mt,y:Dt,width:(e=pt??M)!==null&&e!==void 0?e:0,height:U??0,ellipsis:St==null||St,wordBreak:Ot??"break-word",maxHeight:rt??D,maxWidth:gt??Pt,textConfig:(n=A.character)!==null&&n!==void 0?n:S},A);this._mainTitle=H.createOrUpdateChild("mainTitle",Ze,"richtext")}else if(x==="html"){const Ze=Object.assign({html:Object.assign(Object.assign({dom:S},JA),A),x:mt,y:Dt,width:(r=pt??M)!==null&&r!==void 0?r:0,height:U??0,ellipsis:St,wordBreak:Ot,maxHeight:rt??D,maxWidth:gt??Pt,textConfig:[]},A);this._mainTitle=H.createOrUpdateChild("mainTitle",Ze,"richtext")}else L(S)&&(this._mainTitle=H.createOrUpdateChild("mainTitle",Object.assign(Object.assign({text:J(S)?S:[S],whiteSpace:"normal"},A),{maxLineWidth:(a=(s=A.maxLineWidth)!==null&&s!==void 0?s:pt)!==null&&a!==void 0?a:M,heightLimit:(o=A.height)!==null&&o!==void 0?o:D,lineClamp:_e,ellipsis:St,x:mt,y:Dt}),"text"))}const K=this._mainTitle?this._mainTitle.AABBBounds.height():0,q=this._mainTitle?this._mainTitle.AABBBounds.width():0;if(this.attribute.visible!==!1&&C.visible!==!1){const{width:pt,height:rt,maxWidth:gt,maxHeight:mt,x:Dt=0,y:St=0,ellipsis:Ot=!0,wordBreak:Pt="break-word",lineClamp:_e}=C,Ze=Math.max(Number.MIN_VALUE,D-K);if(w==="rich"||L(C.character)){const It=Object.assign({x:Dt,y:St,width:(l=pt??M)!==null&&l!==void 0?l:0,height:(u=rt??R)!==null&&u!==void 0?u:0,ellipsis:Ot,wordBreak:Pt,maxHeight:mt??Ze,maxWidth:gt??O,textConfig:(c=C.character)!==null&&c!==void 0?c:k},C);this._subTitle=H.createOrUpdateChild("subTitle",It,"richtext")}else if(w==="html"){const It=Object.assign({html:Object.assign(Object.assign({dom:k},JA),C),x:Dt,y:St,width:(h=pt??M)!==null&&h!==void 0?h:0,height:(d=rt??R)!==null&&d!==void 0?d:0,ellipsis:Ot,wordBreak:Pt,maxHeight:mt??Ze,maxWidth:gt??O,textConfig:[]},C);this._subTitle=H.createOrUpdateChild("subTitle",It,"richtext")}else L(k)&&(this._subTitle=H.createOrUpdateChild("subTitle",Object.assign(Object.assign({text:J(k)?k:[k],whiteSpace:"normal"},C),{maxLineWidth:(f=C.maxLineWidth)!==null&&f!==void 0?f:M,heightLimit:(p=C.heightLimit)!==null&&p!==void 0?p:Ze,lineClamp:_e,ellipsis:Ot,x:0,y:K}),"text"))}const Z=this._subTitle?this._subTitle.AABBBounds.height():0,at=this._subTitle?this._subTitle.AABBBounds.width():0;let $=Math.max(q,at),ft=K+((g=C.height)!==null&&g!==void 0?g:Z);if(L(M)&&($=M),L(R)&&(ft=R),L(P)&&$<P&&($=P),L(O)&&$>O&&($=O),L(T)&&ft<T&&(ft=T),L(D)&&ft>D&&(ft=D),H.attribute.width=$,H.attribute.height=ft,H.attribute.boundsPadding=j,this._mainTitle){if(L(B)||L(A.align)){const gt=A.align?A.align:B,mt=(m=A.width)!==null&&m!==void 0?m:$;gt==="center"?(this._mainTitle.setAttribute("x",mt/2),this._mainTitle.setAttribute("textAlign","center")):gt==="right"?(this._mainTitle.setAttribute("x",mt),this._mainTitle.setAttribute("textAlign","right")):(this._mainTitle.setAttribute("x",0),this._mainTitle.setAttribute("textAlign","left"))}const pt=A.verticalAlign?A.verticalAlign:I,rt=U??(this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height());pt==="middle"?(this._mainTitle.setAttribute("y",rt/2),this._mainTitle.setAttribute("textBaseline","middle")):pt==="bottom"?(this._mainTitle.setAttribute("y",rt),this._mainTitle.setAttribute("textBaseline","bottom")):(this._mainTitle.setAttribute("y",0),this._mainTitle.setAttribute("textBaseline","top"))}if(this._subTitle){if(L(B)||L(C.align)){const mt=C.align?C.align:B,Dt=(v=(_=C.width)!==null&&_!==void 0?_:A.width)!==null&&v!==void 0?v:$;mt==="center"?(this._subTitle.setAttribute("x",Dt/2),this._subTitle.setAttribute("textAlign","center")):mt==="right"?(this._subTitle.setAttribute("x",Dt),this._subTitle.setAttribute("textAlign","right")):(this._subTitle.setAttribute("x",0),this._subTitle.setAttribute("textAlign","left"))}const pt=C.verticalAlign?C.verticalAlign:I,rt=this._mainTitle?L(U)?this._mainTitle.AABBBounds.y1+Math.max(this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height(),U):this._mainTitle.AABBBounds.y2:0,gt=(b=(y=C.height)!==null&&y!==void 0?y:R)!==null&&b!==void 0?b:this._subTitle.AABBBounds.empty()?0:this._subTitle.AABBBounds.height();pt==="middle"?(this._subTitle.setAttribute("y",rt+gt/2),this._subTitle.setAttribute("textBaseline","middle")):pt==="bottom"?(this._subTitle.setAttribute("y",rt+gt),this._subTitle.setAttribute("textBaseline","bottom")):(this._subTitle.setAttribute("y",rt),this._subTitle.setAttribute("textBaseline","top"))}}};Snt.defaultAttributes={textStyle:{ellipsis:"...",fill:"#333",fontSize:20,fontWeight:"bold",textAlign:"left",textBaseline:"top"},subtextStyle:{ellipsis:"...",fill:"#6F6F6F",fontSize:16,fontWeight:"normal",textAlign:"left",textBaseline:"top"}};const B$t={title:{style:{text:"",fontSize:20,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}},content:{style:{text:"",fontSize:16,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}}};function F$t(){ln(),eu(),yf()}F$t();let z$t=class extends fr{constructor(){super(...arguments),this.name="indicator"}_renderText(t,e,n,r,s,a){if(e.visible!==!1){const o=ot({},be(B$t,s),e.style,{visible:e.visible});o.lineHeight=L(o.lineHeight)?o.lineHeight:o.fontSize,e.formatMethod&&(o._originText=o.text,o.text=e.formatMethod(o.text,o));const l=b0(o);return l.name=a,t.appendChild(l),e.autoFit&&et(n)&&this._setLocalAutoFit(n,l,e),e.autoLimit&&et(r)&&l.setAttribute("maxLineWidth",n),l}}render(){var t,e;if(this.removeAllChild(!0),this.attribute.visible!==!0)return;const{title:n={},content:r,size:s,limitRatio:a=1/0}=this.attribute,o=Math.min(s.width,s.height)*a,l=this.createOrUpdateChild("indicator-container",{x:0,y:0,zIndex:1,pickable:(t=this.attribute.pickable)===null||t===void 0||t},"group");if(L(n)&&(this._title=this._renderText(l,n,o,a,"title.style","indicator-title")),L(r)){const c=X(r),h=[];c.forEach((d,f)=>{d.visible!==!1&&h.push(this._renderText(l,d,o,a,"content.style","indicator-content-"+f))}),this._content=h}this._setGlobalAutoFit(o),this._setYPosition();const u=(e=l?.AABBBounds.height())!==null&&e!==void 0?e:0;l.setAttribute("y",s.height/2-u/2),l.setAttribute("x",s.width/2)}_setLocalAutoFit(t,e,n){var r,s,a,o,l,u,c,h,d;if(((r=n.fitStrategy)!==null&&r!==void 0?r:"default")!=="default")return;const f=LM((a=(s=n.style)===null||s===void 0?void 0:s.text)!==null&&a!==void 0?a:"",(o=n.style)!==null&&o!==void 0?o:{},(u=(l=this.stage)===null||l===void 0?void 0:l.getTheme())===null||u===void 0?void 0:u.text).width;if(f>0){const p=t*((c=n.fitPercent)!==null&&c!==void 0?c:.5)/f,g=Math.floor(((d=(h=n.style)===null||h===void 0?void 0:h.fontSize)!==null&&d!==void 0?d:20)*p);e.setAttribute("fontSize",g),e.setAttribute("lineHeight",L(n.style.lineHeight)?n.style.lineHeight:g)}}_setGlobalAutoFit(t){var e,n,r,s,a,o,l;const u=t/2,c=[];let h=0;const d=(e=this.attribute.title)!==null&&e!==void 0?e:{};d.autoFit&&d.fitStrategy==="inscribed"?(this._title.setAttribute("fontSize",12),c.push({text:this._title,spec:(n=this.attribute.title)!==null&&n!==void 0?n:{}})):h+=(o=(a=(s=(r=this._title)===null||r===void 0?void 0:r.AABBBounds)===null||s===void 0?void 0:s.height)===null||a===void 0?void 0:a.call(s))!==null&&o!==void 0?o:0;const f=(l=d.space)!==null&&l!==void 0?l:0;if(h+=f,X(this.attribute.content).filter(x=>x.visible!==!1).forEach((x,S)=>{var w,A,k,C;const M=this._content[S];x.autoFit&&x.fitStrategy==="inscribed"?(M.setAttribute("fontSize",12),c.push({text:M,spec:x})):h+=(k=(A=(w=M?.AABBBounds)===null||w===void 0?void 0:w.height)===null||A===void 0?void 0:A.call(w))!==null&&k!==void 0?k:0;const R=(C=x.space)!==null&&C!==void 0?C:0;h+=R}),c.length<=0)return;const p=12/c.reduce((x,S)=>Math.max(x,S.text.AABBBounds.width()),0)*c.length,g=h/2,m=p**2+1,_=2*g*p,v=g**2-u**2,y=2*(p*((-_+Math.sqrt(_**2-4*m*v))/(2*m))+g),b=(y-h)/c.length;et(y)&&c.forEach(x=>{var S;const w=(S=x.spec.style)===null||S===void 0?void 0:S.lineHeight;x.text.setAttribute("fontSize",b),x.text.setAttribute("lineHeight",L(w)?w:b)})}_setYPosition(){var t,e,n,r,s,a;let o=0;const l=(r=(n=(e=(t=this._title)===null||t===void 0?void 0:t.AABBBounds)===null||e===void 0?void 0:e.height)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:0,u=(a=(s=this.attribute.title)===null||s===void 0?void 0:s.space)!==null&&a!==void 0?a:0;X(this.attribute.content).filter(c=>c.visible!==!1).forEach((c,h)=>{var d;const f=this._content[h];f.setAttribute("y",l+u+o);const p=(d=c.space)!==null&&d!==void 0?d:0;o+=f.AABBBounds.height()+p})}};const N$t="M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -73.1429 161.4994 a 48.7619 48.7619 0 0 1 25.9901 7.5093 l 201.7524 127.1223 a 48.7619 48.7619 0 0 1 0.3657 82.2613 l -201.7524 129.6335 A 48.7619 48.7619 0 0 1 292.5952 540.1838 v -256.7314 a 48.7619 48.7619 0 0 1 48.7619 -48.7619 z m 24.381 92.9402 v 167.9116 l 131.9497 -84.7726 L 365.7381 327.6063 z",j$t="M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -48.7619 195.0476 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z m 158.4762 0 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z",H$t="M 521.29 734.276 L 230.929 448.019 L 521.29 161.762 c 37.685 -37.153 38.003 -97.625 0.707 -134.384 c -37.297 -36.758 -98.646 -36.435 -136.331 0.718 l -357.43 352.378 c -0.155 0.153 -0.297 0.314 -0.451 0.468 c -0.084 0.082 -0.172 0.157 -0.256 0.239 c -18.357 18.092 -27.581 41.929 -27.743 65.902 c -0.004 0.311 -0.017 0.623 -0.018 0.934 c 0.001 0.316 0.014 0.632 0.018 0.948 c 0.165 23.97 9.389 47.803 27.743 65.892 c 0.083 0.082 0.171 0.157 0.255 0.239 c 0.154 0.154 0.296 0.315 0.452 0.468 l 357.43 352.378 c 37.685 37.153 99.034 37.476 136.331 0.718 c 37.297 -36.758 36.979 -97.231 -0.707 -134.384 z",V$t="M 734.276 28.71 L 448.019 319.071 L 161.762 28.71 c -37.153 -37.685 -97.625 -38.003 -134.384 -0.707 c -36.758 37.297 -36.435 98.646 0.718 136.331 l 352.378 357.43 c 0.153 0.155 0.314 0.297 0.468 0.451 c 0.082 0.084 0.157 0.172 0.239 0.256 c 18.092 18.357 41.929 27.581 65.902 27.743 c 0.311 0.004 0.623 0.017 0.934 0.018 c 0.316 -0.001 0.632 -0.014 0.948 -0.018 c 23.97 -0.165 47.803 -9.389 65.892 -27.743 c 0.082 -0.083 0.157 -0.171 0.239 -0.255 c 0.154 -0.154 0.315 -0.296 0.468 -0.452 l 352.378 -357.43 c 37.153 -37.685 37.476 -99.034 0.718 -136.331 c -36.758 -37.297 -97.231 -36.979 -134.384 0.707 z",W$t="m 161.724 521.29 l 286.257 -290.361 l 286.257 290.361 c 37.153 37.685 97.625 38.003 134.384 0.707 c 36.758 -37.297 36.435 -98.646 -0.718 -136.331 l -352.378 -357.43 c -0.153 -0.155 -0.314 -0.297 -0.468 -0.451 c -0.082 -0.084 -0.157 -0.172 -0.239 -0.256 c -18.092 -18.357 -41.929 -27.581 -65.902 -27.743 c -0.311 -0.004 -0.623 -0.017 -0.934 -0.018 c -0.316 0.001 -0.632 0.014 -0.948 0.018 c -23.97 0.165 -47.803 9.389 -65.892 27.743 c -0.082 0.083 -0.157 0.171 -0.239 0.255 c -0.154 0.154 -0.315 0.296 -0.468 0.452 l -352.378 357.43 c -37.153 37.685 -37.476 99.034 -0.718 136.331 c 36.758 37.297 97.231 36.979 134.384 -0.707 z",$$t="M 30 163 L 320.361 449.257 L 30 735.514 c -37.685 37.153 -38.003 97.625 -0.707 134.384 c 37.297 36.758 98.646 36.435 136.331 -0.718 l 357.43 -352.378 c 0.155 -0.153 0.297 -0.314 0.451 -0.468 c 0.084 -0.082 0.172 -0.157 0.256 -0.239 c 18.357 -18.092 27.581 -41.929 27.743 -65.902 c 0.004 -0.311 0.017 -0.623 0.018 -0.934 c -0.001 -0.316 -0.014 -0.632 -0.018 -0.948 c -0.165 -23.97 -9.389 -47.803 -27.743 -65.892 c -0.083 -0.082 -0.171 -0.157 -0.255 -0.239 c -0.154 -0.154 -0.296 -0.315 -0.452 -0.468 l -357.43 -352.378 c -37.685 -37.153 -99.034 -37.476 -136.331 -0.718 c -37.297 36.758 -36.979 97.231 0.707 134.384 z";class XE extends CM{constructor(t){super(t)}}var Gs;(function(i){i.OnPlay="onPlay",i.OnPause="onPause",i.OnForward="onForward",i.OnBackward="onBackward"})(Gs||(Gs={}));var Bp;(function(i){i.Start="start",i.Pause="pause",i.Forward="forward",i.Backward="backward"})(Bp||(Bp={}));class wu extends fr{constructor(t,e){super(e?.skipDefault?t:ot({},wu.defaultAttributes,t)),this._isPaused=!0,this.updateAttributes=()=>{this._startAttr={style:Object.assign(Object.assign(Object.assign({symbolType:N$t},wu.defaultControllerAttr),{visible:this.attribute.start.visible}),this.attribute.start.style)},this._pauseAttr={style:Object.assign(Object.assign(Object.assign({symbolType:j$t},wu.defaultControllerAttr),{visible:this.attribute.pause.visible}),this.attribute.pause.style)},this._forwardAttr={style:Object.assign(Object.assign(Object.assign({},wu.defaultControllerAttr),{visible:this.attribute.forward.visible}),this.attribute.forward.style)},this._backwardAttr={style:Object.assign(Object.assign(Object.assign({},wu.defaultControllerAttr),{visible:this.attribute.backward.visible}),this.attribute.backward.style)},this.updateLayout()},this.updateLayout=()=>{var n,r,s,a;this._layout=this.attribute.layout,this._layout==="horizontal"?(this._backwardAttr.style.symbolType=(n=this._backwardAttr.style.symbolType)!==null&&n!==void 0?n:H$t,this._forwardAttr.style.symbolType=(r=this._forwardAttr.style.symbolType)!==null&&r!==void 0?r:$$t):this._layout==="vertical"&&(this._backwardAttr.style.symbolType=(s=this._backwardAttr.style.symbolType)!==null&&s!==void 0?s:W$t,this._forwardAttr.style.symbolType=(a=this._forwardAttr.style.symbolType)!==null&&a!==void 0?a:V$t)},this._initPlay=()=>{N(this._playController)&&(this._playController=new XE(Object.assign({},this._startAttr.style)),this.add(this._playController))},this._initBackward=()=>{N(this._backwardController)&&(this._backwardController=new XE(Object.assign({},this._backwardAttr.style)),this.add(this._backwardController))},this._initForward=()=>{N(this._forwardController)&&(this._forwardController=new XE(Object.assign({},this._forwardAttr.style)),this.add(this._forwardController))},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._playController.addEventListener("pointerdown",n=>{n.stopPropagation(),this._isPaused===!0?this.play():this.pause()}),this._backwardController.addEventListener("pointerdown",n=>{n.stopPropagation(),this.backward()}),this._forwardController.addEventListener("pointerdown",n=>{n.stopPropagation(),this.forward()}))},this.renderPlay=()=>{this._isPaused?this._playController.setAttributes(Object.assign({symbolType:this._playController.getComputedAttribute("symbolType")},this._startAttr.style)):this._playController.setAttributes(Object.assign({symbolType:this._playController.getComputedAttribute("symbolType")},this._pauseAttr.style))},this.renderBackward=()=>{this._backwardController.setAttributes(this._backwardAttr.style)},this.renderForward=()=>{this._forwardController.setAttributes(this._forwardAttr.style)},this.play=()=>{this._dispatchEvent(Gs.OnPlay)},this.pause=()=>{this._dispatchEvent(Gs.OnPause)},this.forward=()=>{this._dispatchEvent(Gs.OnForward)},this.backward=()=>{this._dispatchEvent(Gs.OnBackward)},this.togglePlay=()=>{this._playController.setAttributes(this._startAttr.style),this._isPaused=!0},this.togglePause=()=>{this._playController.setAttributes(this._pauseAttr.style),this._isPaused=!1},this.updateAttributes(),this._initPlay(),this._initBackward(),this._initForward(),this._initEvents()}render(){this.updateAttributes(),this.renderPlay(),this.renderBackward(),this.renderForward()}}wu.defaultControllerAttr={visible:!0,x:0,y:0,size:20,fill:"#91caff",pickMode:"imprecise",cursor:"pointer"},wu.defaultAttributes={[Bp.Start]:{},[Bp.Pause]:{},[Bp.Backward]:{},[Bp.Forward]:{}};const OS={visible:!0,style:{x:0,y:0,dx:0,dy:0,size:20},order:0,space:10},KE=[200,10];var hh;(function(i){i.Default="default",i.Reverse="reverse"})(hh||(hh={}));var tn;(function(i){i.change="change",i.play="play",i.pause="pause",i.backward="backward",i.forward="forward",i.end="end",i.OnChange="change",i.OnPlay="play",i.OnPause="pause",i.OnBackward="backward",i.OnForward="forward",i.OnEnd="end"})(tn||(tn={}));const U$t=({direction:i,maxIndex:t,dataIndex:e})=>i===hh.Default&&e===t,G$t=({direction:i,minIndex:t,dataIndex:e})=>i===hh.Reverse&&e===t,Y$t=({direction:i,maxIndex:t,minIndex:e,dataIndex:n})=>U$t({direction:i,maxIndex:t,dataIndex:n})||G$t({direction:i,minIndex:e,dataIndex:n}),X$t=({direction:i,minIndex:t,dataIndex:e})=>i===hh.Default&&e===t,K$t=({direction:i,maxIndex:t,dataIndex:e})=>i===hh.Reverse&&e===t,q$t=({direction:i,maxIndex:t,minIndex:e,dataIndex:n})=>X$t({direction:i,minIndex:e,dataIndex:n})||K$t({direction:i,maxIndex:t,dataIndex:n}),cl=i=>i==="top"||i==="bottom",Z$t=(i,t,e,n)=>i==="default"?Math.min(t+1,n):Math.max(t-1,e);class Gb extends fr{getMinIndex(){return this._minIndex}getMaxIndex(){return this._maxIndex}getDataIndex(){return this._dataIndex}constructor(t,e){super(e?.skipDefault?t:ot({},Gb.defaultAttributes,t)),this._data=[],this._dataIndex=0,this._layoutInfo={},this._updateSliderAttrs=()=>{var n,r;let s;et(this._handlerStyle.size)?s=this._handlerStyle.size:this._handlerStyle.size&&this._handlerStyle.size.length&&(s=Nn(this._handlerStyle.size[0],this._handlerStyle.size[1]));const a={visible:this._sliderVisible,min:this._minIndex,max:this._maxIndex,value:this._dataIndex,railWidth:this._railStyle.width,railHeight:this._railStyle.height,railStyle:this._railStyle,trackStyle:this._trackStyle,handlerSize:et(s)?s:void 0,handlerStyle:this._handlerStyle,dy:this.attribute.slider.dy,dx:this.attribute.slider.dx,slidable:!0,range:!1,handlerText:{visible:!1},startText:{visible:!1},endText:{visible:!1},disableTriggerEvent:this.attribute.disableTriggerEvent};if(cl(this._orient)){const o=Math.max(0,this._layoutInfo.slider.size),l=(n=this._railStyle.height)!==null&&n!==void 0?n:KE[1];a.layout="horizontal",a.railHeight=l,a.railWidth=o,a.x=this._layoutInfo.slider.x,a.y=this._layoutInfo.slider.y}else{const o=Math.max(0,this._layoutInfo.slider.size),l=(r=this._railStyle.width)!==null&&r!==void 0?r:KE[1];a.layout="vertical",a.railWidth=l,a.railHeight=o,a.x=this._layoutInfo.slider.x,a.y=this._layoutInfo.slider.y}return a},this._initSlider=()=>{const n=this._updateSliderAttrs();this._slider=new Hm(n),this._sliderVisible&&this.add(this._slider)},this._updateControllerAttrs=()=>{const n={start:this._start,pause:this._pause,forward:this._forward,backward:this._backward,disableTriggerEvent:this.attribute.disableTriggerEvent};return n.layout=cl(this._orient)?"horizontal":"vertical",n.start=Object.assign(Object.assign({},n.start),{style:Object.assign(Object.assign({},n.start.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),n.pause=Object.assign(Object.assign({},n.pause),{style:Object.assign(Object.assign({},n.pause.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),n.backward=Object.assign(Object.assign({},n.backward),{style:Object.assign(Object.assign({},n.backward.style),{x:this._layoutInfo.backward.x,y:this._layoutInfo.backward.y})}),n.forward=Object.assign(Object.assign({},n.forward),{style:Object.assign(Object.assign({},n.forward.style),{x:this._layoutInfo.forward.x,y:this._layoutInfo.forward.y})}),n},this._initController=()=>{const n=this._updateControllerAttrs();this._controller=new wu(n),this._controllerVisible&&this.add(this._controller)},this._initAttributes(),this._initDataIndex(),this._initLayoutInfo(),this._initController(),this._initSlider()}_initAttributes(){this._size=this.attribute.size,this._orient=this.attribute.orient,this._data=this.attribute.data,this._minIndex=0,this._maxIndex=this._data.length-1;const{slider:t={},controller:e={}}=this.attribute;this._sliderVisible=t.visible,this._railStyle=Object.assign({},t.railStyle),this._trackStyle=Object.assign({},t.trackStyle),this._handlerStyle=Object.assign({},t.handlerStyle),this._controllerVisible=e.visible,this._start=Object.assign({},e.start),this._pause=Object.assign({},e.pause),this._forward=Object.assign({},e.forward),this._backward=Object.assign({},e.backward)}_initDataIndex(){var t;this._dataIndex=(t=this.attribute.dataIndex)!==null&&t!==void 0?t:0}_initLayoutInfo(){var t,e,n;const r=[this._start,this._backward,this._forward].sort((d,f)=>d.order-f.order),s=r.filter(d=>d.position!=="end"),a=r.filter(d=>d.position==="end"),o=(t=cl(this._orient)?this._railStyle.height:this._railStyle.width)!==null&&t!==void 0?t:KE[1],l=r.reduce((d,f)=>{const p=f.style.size,g=yt(p)?p:Nn(p[0],p[1]);return d+f.space+g},0),u=this._sliderVisible?(cl(this._orient)?(e=this._size)===null||e===void 0?void 0:e.width:(n=this._size)===null||n===void 0?void 0:n.height)-l:0,c=u-this.attribute.slider.space,h=s.reduce((d,f)=>{const{key:p,space:g,style:{size:m}}=f,_=yt(m)?m:Nn(m[0],m[1]);return this._layoutInfo[p]=Object.assign(Object.assign({},this._layoutInfo[p]),{size:_,x:cl(this._orient)?d+g:(this._size.width-_)/2,y:cl(this._orient)?(this._size.height-_)/2:d+g}),d+g+_},0);this._layoutInfo.slider=Object.assign(Object.assign({},this._layoutInfo.slider),{size:c,x:cl(this._orient)?h+this.attribute.slider.space:(this._size.width-o)/2,y:cl(this._orient)?(this._size.height-o)/2:h+this.attribute.slider.space}),a.reduce((d,f)=>{const{key:p,space:g,style:{size:m}}=f,_=yt(m)?m:Nn(m[0],m[1]);return this._layoutInfo[p]=Object.assign(Object.assign({},this._layoutInfo[p]),{size:_,x:cl(this._orient)?d+g:(this._size.width-_)/2,y:cl(this._orient)?(this._size.height-_)/2:d+g}),d+g+_},h+u)}render(){this._initLayoutInfo(),this.renderSlider(),this.renderController()}renderSlider(){const t=this._updateSliderAttrs();this._slider.setAttributes(t)}renderController(){const t=this._updateControllerAttrs();this._controller.setAttributes(t)}dispatchCustomEvent(t,e){this._dispatchEvent(t,{eventType:t,index:e,value:this._data[e]})}}Gb.defaultAttributes={visible:!0,data:[],interval:1e3,orient:"bottom",align:"center",size:{height:20,width:300},slider:{visible:!0,space:10,dx:0,dy:0,railStyle:{cornerRadius:5},trackStyle:{},handlerStyle:{}},controller:{visible:!0,start:Object.assign(Object.assign({},OS),{key:"start",position:"start",space:0}),pause:Object.assign(Object.assign({},OS),{key:"pause",position:"start"}),forward:Object.assign(Object.assign({},OS),{key:"forward",position:"end"}),backward:Object.assign(Object.assign({},OS),{key:"backward",position:"start"})}};function Ant(){tT(),ln(),Ta()}function Q$t(){Ant()}function J$t(){Ant()}Q$t();class t5t extends Gb{constructor(t,e){super(e?.skipDefault?t:ot({},t)),this._activeIndex=-1,this._isReachEnd=!1,this._initAttributes=()=>{var n,r,s;super._initAttributes(),this._alternate=(n=this.attribute.alternate)!==null&&n!==void 0&&n,this._interval=(r=this.attribute.interval)!==null&&r!==void 0?r:1e3,this._direction=(s=this.attribute.direction)!==null&&s!==void 0?s:hh.Default},this._initDataIndex=()=>{var n;this._dataIndex=N(this.attribute.dataIndex)?this._direction==="default"?this._minIndex:this._maxIndex:(n=this.attribute.dataIndex)!==null&&n!==void 0?n:0,this._slider.setAttribute("value",this._dataIndex)},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._controller.addEventListener(Gs.OnPlay,n=>{n.stopPropagation(),this.play()}),this._controller.addEventListener(Gs.OnPause,n=>{n.stopPropagation(),this.pause()}),this._controller.addEventListener(Gs.OnForward,n=>{n.stopPropagation(),this.forward()}),this._controller.addEventListener(Gs.OnBackward,n=>{n.stopPropagation(),this.backward()}),this._slider.addEventListener("change",n=>{const r=Math.floor(n.detail.value)+.5;this._dataIndex=n.detail.value>=r?Math.ceil(n.detail.value):Math.floor(n.detail.value),this._slider.setValue(this._dataIndex),this.dispatchCustomEvent(tn.change)}))},this.play=()=>{this._isPlaying||this._data.length!==1&&(this._controller.togglePause(),this._isPlaying=!0,(Y$t({dataIndex:this._dataIndex,maxIndex:this._maxIndex,minIndex:this._minIndex,direction:this._direction})||q$t({dataIndex:this._dataIndex,maxIndex:this._maxIndex,minIndex:this._minIndex,direction:this._direction}))&&(this._direction===hh.Default?this._updateDataIndex(this._minIndex):this._updateDataIndex(this._maxIndex)),this.dispatchCustomEvent(tn.play),this._isReachEnd=!1,this._tickTime=Date.now(),this._rafId=Qt.getRequestAnimationFrame()(this._play.bind(this,!0)))},this._play=n=>{const r=Date.now();if(this._isReachEnd&&r-this._tickTime>=this._interval)return this._isReachEnd=!1,void this._playEnd();n&&this._activeIndex!==this._dataIndex?(this.dispatchCustomEvent(tn.change),this._activeIndex=this._dataIndex):r-this._tickTime>=this._interval&&(this._tickTime=r,this._updateDataIndex(Z$t(this._direction,this._dataIndex,this._minIndex,this._maxIndex)),this._activeIndex=this._dataIndex,this.dispatchCustomEvent(tn.change)),(this._direction==="default"&&this._dataIndex>=this._maxIndex||this._direction==="reverse"&&this._dataIndex<=this._minIndex)&&(this._isReachEnd=!0),this._rafId=Qt.getRequestAnimationFrame()(this._play.bind(this,!1))},this._updateDataIndex=n=>{this._dataIndex=n,this._slider.setValue(this._dataIndex)},this._playEnd=()=>{this._isPlaying=!1,this._controller.togglePlay(),Qt.getCancelAnimationFrame()(this._rafId),this._activeIndex=-1,this.dispatchCustomEvent(tn.end)},this.pause=()=>{this._isPlaying&&(this._isPlaying=!1,Qt.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(tn.pause))},this.backward=()=>{const{loop:n=!1}=this.attribute;let r;r=n?this._dataIndex-1<this._minIndex?this._maxIndex:this._dataIndex-1:Math.max(this._dataIndex-1,this._minIndex),this._updateDataIndex(r),this.dispatchCustomEvent(tn.change),this.dispatchCustomEvent(tn.backward)},this.forward=()=>{const{loop:n=!1}=this.attribute;let r;r=n?this._dataIndex+1>this._maxIndex?this._minIndex:this._dataIndex+1:Math.min(this._dataIndex+1,this._maxIndex),this._updateDataIndex(r),this.dispatchCustomEvent(tn.change),this.dispatchCustomEvent(tn.forward)},this._initAttributes(),this._initDataIndex(),this._initEvents()}setAttributes(t,e){super.setAttributes(t,e),this._initAttributes()}dispatchCustomEvent(t){super.dispatchCustomEvent(t,this._dataIndex)}}var e5t=function(i,t,e,n){return new(e||(e=Promise))(function(r,s){function a(u){try{l(n.next(u))}catch(c){s(c)}}function o(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof e?c:new e(function(h){h(c)})).then(a,o)}l((n=n.apply(i,t||[])).next())})};J$t();class i5t extends Gb{constructor(t){super(t),this._isPlaying=!1,this._startTime=Date.now(),this._initAttributes=()=>{var e;super._initAttributes(),this._maxIndex=this._data.length,this._slider.setAttribute("max",this._maxIndex),this._isPlaying=!1,this._elapsed=0,this._interval=(e=this.attribute.interval)!==null&&e!==void 0?e:1e3;const n=this._data.length;this.attribute.totalDuration&&this._data.length?(this._totalDuration=this.attribute.totalDuration,this._interval=this._totalDuration/(n??1)):(this._totalDuration=this._interval*n,this._interval=this.attribute.interval)},this._initDataIndex=()=>{var e;this._dataIndex=(e=this.attribute.dataIndex)!==null&&e!==void 0?e:this._minIndex},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._controller.addEventListener(Gs.OnPlay,e=>{e.stopPropagation(),this.play()}),this._controller.addEventListener(Gs.OnPause,e=>{e.stopPropagation(),this.pause()}),this._controller.addEventListener(Gs.OnForward,e=>{e.stopPropagation(),this.forward()}),this._controller.addEventListener(Gs.OnBackward,e=>{e.stopPropagation(),this.backward()}),this._slider.addEventListener("change",e=>{var n;e.stopPropagation();const r=(n=e.detail)===null||n===void 0?void 0:n.value,s=r/this._maxIndex;this._elapsed=s*this._totalDuration,this._startTime=Date.now()-this._elapsed,this._dispatchChange(r)}))},this._getSliderValue=()=>{const e=this._elapsed/this._totalDuration;return Math.min(e*this._maxIndex,this._maxIndex)},this._updateSlider=()=>{const e=this._getSliderValue();this._dataIndex=Math.floor(e),this._slider.setValue(Math.min(e,this._maxIndex)),this._dispatchChange(Math.floor(e))},this._dispatchChange=e=>{const n=Math.floor(e);n!==this._activeIndex&&(this._dataIndex=n,this._activeIndex=n,n!==this._maxIndex&&this.dispatchCustomEvent(tn.change))},this.play=()=>e5t(this,void 0,void 0,function*(){this._isPlaying||(this._controller.togglePause(),this._isPlaying=!0,this._elapsed>=this._totalDuration&&(this._elapsed=0),this._startTime=Date.now()-this._elapsed,this.dispatchCustomEvent(tn.play),this._rafId=Qt.getRequestAnimationFrame()(this._play.bind(this)))}),this._play=()=>{this._elapsed=Date.now()-this._startTime;const e=this._getSliderValue();this._updateSlider(),e>=this._maxIndex?this._playEnd():this._rafId=Qt.getRequestAnimationFrame()(this._play.bind(this))},this._playEnd=()=>{this._isPlaying=!1,Qt.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(tn.end)},this.pause=()=>{this._isPlaying&&(this._isPlaying=!1,this._elapsed=Date.now()-this._startTime,Qt.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(tn.pause))},this.backward=()=>{const e=Date.now(),n=1*this._interval,r=this._elapsed-n;r<=0?(this._elapsed=0,this._startTime=e):(this._elapsed=r,this._startTime=this._startTime+this._interval),this._updateSlider(),this.dispatchCustomEvent(tn.backward)},this.forward=()=>{const e=Date.now(),n=1*this._interval,r=this._elapsed+n;r>=this._totalDuration?(this._startTime=e-this._totalDuration,this._elapsed=this._totalDuration):(this._startTime=this._startTime-n,this._elapsed=r),this._updateSlider(),this.dispatchCustomEvent(tn.forward)},this._initAttributes(),this._initDataIndex(),this._initEvents()}dispatchCustomEvent(t){super.dispatchCustomEvent(t,this._dataIndex)}render(){super.render()}}var Fn;(function(i){i.drawStart="drawStart",i.drawEnd="drawEnd",i.drawing="drawing",i.moving="moving",i.moveStart="moveStart",i.moveEnd="moveEnd",i.brushActive="brushActive",i.brushClear="brushClear"})(Fn||(Fn={}));const du={trigger:"pointerdown",updateTrigger:"pointermove",endTrigger:["pointerup","pointerleave"],resetTrigger:"pointerupoutside",hasMask:!0,brushMode:"single",brushType:"rect",brushStyle:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",strokeWidth:2},brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:10,interactiveRange:{minY:-1/0,maxY:1/0,minX:-1/0,maxX:1/0}},G4=5;function n5t(){ln(),IM()}const r5t={debounce:pf,throttle:ac};n5t();let knt=class Cnt extends fr{constructor(t,e){super(e?.skipDefault?t:ot({},Cnt.defaultAttributes,t)),this.name="brush",this._activeBrushState=!1,this._activeDrawState=!1,this._cacheDrawPoints=[],this._activeMoveState=!1,this._operatingMaskMoveDx=0,this._operatingMaskMoveDy=0,this._operatingMaskMoveRangeX=[-1/0,1/0],this._operatingMaskMoveRangeY=[-1/0,1/0],this._brushMaskAABBBoundsDict={},this._firstUpdate=!0,this._onBrushStart=n=>{const{updateTrigger:r=du.updateTrigger,endTrigger:s=du.endTrigger,brushMoved:a=!0}=this.attribute;X(r).forEach(o=>this.stage.addEventListener(o,this._onBrushingWithDelay)),X(s).forEach(o=>this.stage.addEventListener(o,this._onBrushEnd)),n.stopPropagation(),this._firstUpdate=!0,this._activeMoveState=a&&this._isPosInBrushMask(n),this._activeDrawState=!this._activeMoveState,this._startPos=this.eventPosToStagePos(n),this._cacheDrawPoints=[this._startPos]},this._onBrushing=n=>{this._outOfInteractiveRange(n)||(n.stopPropagation(),this._firstUpdate?(this._activeDrawState&&this._initDraw(n),this._activeMoveState&&this._initMove(n),this._firstUpdate=!1):(this._activeDrawState&&this._drawing(n),this._activeMoveState&&this._moving(n)))},this._onBrushingWithDelay=this.attribute.delayTime===0?this._onBrushing:r5t[this.attribute.delayType](this._onBrushing,this.attribute.delayTime),this._onBrushEnd=n=>{this._releaseBrushUpdateEvents(),n.preventDefault(),this._activeDrawState&&this._drawEnd(n),this._activeMoveState&&this._moveEnd(n),this._activeDrawState=!1,this._activeMoveState=!1},this._onBrushClear=n=>{n.preventDefault(),this._isEmptyMask()||(this._clearMask(),this._dispatchBrushEvent(Fn.brushClear,n)),this._activeDrawState=!1,this._activeMoveState=!1}}_bindBrushEvents(){if(this.releaseBrushEvents(),this.attribute.disableTriggerEvent)return;const{trigger:t=du.trigger,resetTrigger:e=du.resetTrigger}=this.attribute;X(t).forEach(n=>this.stage.addEventListener(n,this._onBrushStart)),X(e).forEach(n=>this.stage.addEventListener(n,this._onBrushClear))}_initDraw(t){const{brushMode:e}=this.attribute,n=this.eventPosToStagePos(t);this._cacheDrawPoints.push(n),e==="single"&&this._clearMask(),this._addBrushMask(),this._dispatchBrushEvent(Fn.drawStart,t),this._activeBrushState=!1}_initMove(t){var e,n;this._cacheMovePoint=this.eventPosToStagePos(t),this._operatingMaskMoveDx=(e=this._operatingMask.attribute.dx)!==null&&e!==void 0?e:0,this._operatingMaskMoveDy=(n=this._operatingMask.attribute.dy)!==null&&n!==void 0?n:0;const{interactiveRange:r}=this.attribute,{minY:s=-1/0,maxY:a=1/0,minX:o=-1/0,maxX:l=1/0}=r,{x1:u,x2:c,y1:h,y2:d}=this._operatingMask.globalAABBBounds,f=o-u,p=l-c,g=s-h,m=a-d;this._operatingMaskMoveRangeX=[f,p],this._operatingMaskMoveRangeY=[g,m],this._operatingMask.setAttribute("pickable",!0),this._dispatchBrushEvent(Fn.moveStart,t)}_drawing(t){var e;const n=this.eventPosToStagePos(t),{brushType:r,sizeThreshold:s=G4}=this.attribute,a=this._cacheDrawPoints.length;if(a>0){const d=(e=this._cacheDrawPoints[this._cacheDrawPoints.length-1])!==null&&e!==void 0?e:{};if(n.x===d.x&&n.y===d.y)return}r==="polygon"||a<=1?this._cacheDrawPoints.push(n):this._cacheDrawPoints[a-1]=n;const o=this._computeMaskPoints();this._operatingMask.setAttribute("points",o);const{x:l,y:u}=this._startPos,{x:c,y:h}=this.eventPosToStagePos(t);(Math.abs(c-l)>s||Math.abs(u-h)>s)&&(Object.keys(this._brushMaskAABBBoundsDict).length!==1||this._activeBrushState?this._dispatchBrushEvent(Fn.drawing,t):(this._activeBrushState=!0,this._dispatchBrushEvent(Fn.brushActive,t)))}_moving(t){const e=this._cacheMovePoint,n=this.eventPosToStagePos(t);if(n.x===e?.x&&n.y===e?.y)return;const r=n.x-e.x,s=n.y-e.y,a=Math.min(this._operatingMaskMoveRangeX[1],Math.max(this._operatingMaskMoveRangeX[0],r))+this._operatingMaskMoveDx,o=Math.min(this._operatingMaskMoveRangeY[1],Math.max(this._operatingMaskMoveRangeY[0],s))+this._operatingMaskMoveDy;this._operatingMask.setAttributes({dx:a,dy:o}),this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchBrushEvent(Fn.moving,t)}_drawEnd(t){const{removeOnClick:e=!0,sizeThreshold:n=G4}=this.attribute;if(this._outOfInteractiveRange(t))this._isEmptyMask()||(this._clearMask(),this._dispatchBrushEvent(Fn.brushClear,t));else{const{x:r,y:s}=this._startPos,{x:a,y:o}=this.eventPosToStagePos(t);Math.abs(a-r)<=1&&Math.abs(o-s)<=1&&e?this._isEmptyMask()||(this._clearMask(),this._dispatchBrushEvent(Fn.brushClear,t)):Math.abs(a-r)<n&&Math.abs(s-o)<n?(delete this._brushMaskAABBBoundsDict[this._operatingMask.name],this._container.setAttributes({}),this._container.removeChild(this._operatingMask),this._isEmptyMask()&&this._dispatchBrushEvent(Fn.brushClear,t)):(this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchBrushEvent(Fn.drawEnd,t))}}_moveEnd(t){this._operatingMask&&this._operatingMask.setAttribute("pickable",!1),this._dispatchBrushEvent(Fn.moveEnd,t)}render(){this._bindBrushEvents();const t=this.createOrUpdateChild("brush-container",{},"group");this._container=t}releaseBrushEvents(){const{trigger:t=du.trigger,resetTrigger:e=du.resetTrigger}=this.attribute;X(t).forEach(n=>this.stage.removeEventListener(n,this._onBrushStart)),X(e).forEach(n=>this.stage.removeEventListener(n,this._onBrushClear)),this._releaseBrushUpdateEvents()}_releaseBrushUpdateEvents(){const{updateTrigger:t=du.updateTrigger,endTrigger:e=du.endTrigger}=this.attribute;X(t).forEach(n=>this.stage.removeEventListener(n,this._onBrushingWithDelay)),X(e).forEach(n=>this.stage.removeEventListener(n,this._onBrushEnd))}_computeMaskPoints(){const{brushType:t,xRange:e=[0,0],yRange:n=[0,0]}=this.attribute;let r=[];const s=this._cacheDrawPoints[0],a=this._cacheDrawPoints[this._cacheDrawPoints.length-1];return r=t==="rect"?[s,{x:a.x,y:s.y},a,{x:s.x,y:a.y}]:t==="x"?[{x:s.x,y:n[0]},{x:a.x,y:n[0]},{x:a.x,y:n[1]},{x:s.x,y:n[1]}]:t==="y"?[{x:e[0],y:s.y},{x:e[0],y:a.y},{x:e[1],y:a.y},{x:e[1],y:s.y}]:Jr(this._cacheDrawPoints),r}_addBrushMask(){var t;const{brushStyle:e,hasMask:n}=this.attribute,r=Mt.polygon(Object.assign(Object.assign({points:Jr(this._cacheDrawPoints),cursor:"move",pickable:!1},e),{opacity:n?(t=e.opacity)!==null&&t!==void 0?t:1:0}));r.name=`brush-${Date.now()}`,this._operatingMask=r,this._container.add(r),this._brushMaskAABBBoundsDict[r.name]=r.AABBBounds}_isPosInBrushMask(t){const e=this.eventPosToStagePos(t),n=this._container.getChildren();for(let r=0;r<n.length;r++){const{points:s=[],dx:a=0,dy:o=0}=n[r].attribute,l=s.map(u=>({x:u.x+a,y:u.y+o}));if(UB(l,e.x,e.y))return this._operatingMask=n[r],!0}return!1}_outOfInteractiveRange(t){const{interactiveRange:e}=this.attribute,{minY:n=-1/0,maxY:r=1/0,minX:s=-1/0,maxX:a=1/0}=e,o=this.eventPosToStagePos(t);return o.x>a||o.x<s||o.y>r||o.y<n}_dispatchBrushEvent(t,e){this._dispatchEvent(t,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:e})}_clearMask(){this._brushMaskAABBBoundsDict={},this._container.removeAllChild(),this._operatingMask=null}_isEmptyMask(){return Lt(this._brushMaskAABBBoundsDict)||Object.keys(this._brushMaskAABBBoundsDict).every(t=>this._brushMaskAABBBoundsDict[t].empty())}};knt.defaultAttributes=du;const Y4=(i,...t)=>{const e=[i.shape,...t.map(s=>s?.shape)],n=[i.key,...t.map(s=>s?.key)],r=[i.value,...t.map(s=>s?.value)];return ot(i,...t,{shape:e.every(N)?void 0:ot({},...e),key:n.every(N)?void 0:ot({},...n),value:r.every(N)?void 0:ot({},...r)})},Yf=i=>{const{width:t,height:e,wordBreak:n="break-word",textAlign:r,textBaseline:s,text:a}=i;return Array.isArray(a)?{width:t,height:e,wordBreak:n,textAlign:r,textBaseline:s,singleLine:!1,textConfig:X(a).map(o=>Object.assign(Object.assign({},i),{text:o}))}:{width:t,height:e,wordBreak:n,textAlign:r,textBaseline:s,singleLine:!1,textConfig:a?.text}},s5t={panel:{visible:!0,cornerRadius:[3,3,3,3],fill:"white",shadow:!0,shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.1)",shadowOffsetX:0,shadowOffsetY:4,shadowSpread:0,stroke:"white"},titleStyle:{value:{fill:"#4E5969",fontFamily:Cv,fontSize:14,lineHeight:18,textAlign:"left",textBaseline:"middle"},spaceRow:6},contentStyle:{shape:{fill:"black",size:8,symbolType:"circle",spacing:6},key:{fill:"#4E5969",fontFamily:Cv,fontSize:12,lineHeight:18,textAlign:"left",textBaseline:"middle",spacing:26},value:{fill:"#4E5969",fontFamily:Cv,fontSize:12,lineHeight:18,textAlign:"right",textBaseline:"middle",spacing:0},spaceRow:6},padding:10,positionX:"right",positionY:"bottom",offsetX:10,offsetY:10,parentBounds:new Gi().setValue(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),autoCalculatePosition:!0,autoMeasure:!0,pickable:!1,childrenPickable:!1,zIndex:500},a5t=["pointerX","pointerY","offsetX","offsetY","positionX","positionY","parentBounds"];function o5t(){ln(),tu(),Ta(),eu(),yf()}o5t();let Mnt=class ra extends fr{constructor(t,e){super(e?.skipDefault?t:ot({},ra.defaultAttributes,t),e),this.name="tooltip"}render(){var t;const{visible:e,content:n,panel:r,keyWidth:s,valueWidth:a,hasContentShape:o,autoCalculatePosition:l,autoMeasure:u,align:c}=this.attribute;if(!e)return void this.hideAll();u&&ra.measureTooltip(this.attribute),l&&ra.calculateTooltipPosition(this.attribute);const h=zr(this.attribute.padding);this._tooltipPanel=this.createOrUpdateChild("tooltip-background",Object.assign({visible:!0},r),"rect"),this._tooltipTitleContainer=this.createOrUpdateChild("tooltip-title",{visible:!0,x:h[3],y:h[0]},"group");const d=ra.getTitleAttr(this.attribute);this._tooltipTitleSymbol=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-shape",ot({symbolType:"circle"},d.shape,{visible:Qi(d)&&Qi(d.shape)}),"symbol"),typeof d.value.text!="object"||d.value.text===null||d.value.text.type!=="rich"&&d.value.text.type!=="html"?d.value.multiLine?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({visible:Qi(d)&&Qi(d.value)},Yf(d.value)),"richtext"):this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({text:(t=d.value.text)!==null&&t!==void 0?t:"",visible:Qi(d)&&Qi(d.value)},d.value),"text"):d.value.text.type==="rich"?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({visible:Qi(d)&&Qi(d.value)},Yf(d.value)),"richtext"):d.value.text.type==="html"&&(this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({html:Object.assign(Object.assign({dom:d.value.text.text},JA),d.value),visible:Qi(d)&&Qi(d.value),width:d.value.width,height:d.value.height,wordBreak:d.value.wordBreak,textAlign:d.value.textAlign,textBaseline:d.value.textBaseline,singleLine:!1,textConfig:[]},d.value),"richtext"));const f=Qi(d.shape)?d.shape.size+d.shape.spacing:0,{textAlign:p,textBaseline:g}=d.value,m=r.width-h[3]-h[0]-f;p==="center"?this._tooltipTitle.setAttribute("x",f+m/2):p==="right"||p==="end"?this._tooltipTitle.setAttribute("x",f+m):this._tooltipTitle.setAttribute("x",f),g==="bottom"?this._tooltipTitle.setAttribute("y",d.height):g==="middle"?this._tooltipTitle.setAttribute("y",d.height/2):this._tooltipTitle.setAttribute("y",0);const _=Qi(d)?d.height+d.spaceRow:0;if(this._tooltipContent=this.createOrUpdateChild("tooltip-content",{visible:!0},"group"),this._tooltipContent.removeAllChild(!0),n&&n.length){this._tooltipContent.setAttribute("x",h[3]),this._tooltipContent.setAttribute("y",h[0]+_);let v=0;n.forEach((y,b)=>{const x=ra.getContentAttr(this.attribute,b);if(!Qi(x))return;const S=`tooltip-content-${b}`,w=this._tooltipContent.createOrUpdateChild(S,{visible:!0,x:0,y:v},"group"),A=x.shape.size+x.shape.spacing;let k=c==="right"?(o?A:0)+(Qi(x.key)?s+x.key.spacing:0)+(Qi(x.value)?a:0):0;this._createShape(c==="right"?k-x.shape.size/2:k+x.shape.size/2,x,w,S),o&&(c==="right"?k-=A:k+=A);const C=this._createKey(x,w,S);C&&(i4(c,C,x.key.textAlign,k,s),C.setAttribute("y",0),c==="right"?k-=s+x.key.spacing:k+=s+x.key.spacing);const M=this._createValue(x,w,S);if(M){let R="right";L(x.value.textAlign)?R=x.value.textAlign:Qi(x.key)||c==="right"||(R="left"),M.setAttribute("textAlign",R),i4(c,M,R,k,a),M.setAttribute("y",0)}v+=x.height+x.spaceRow})}}_createShape(t,e,n,r){var s;if(Qi(e.shape))return n.createOrUpdateChild(`${r}-shape`,Object.assign({visible:!0,x:t,y:e.shape.size/2+(((s=mM(e.key.lineHeight,e.key.fontSize))!==null&&s!==void 0?s:e.key.fontSize)-e.shape.size)/2},e.shape),"symbol")}_createKey(t,e,n){var r;if(Qi(t.key)){let s;return s=t.key.multiLine?e.createOrUpdateChild(`${n}-key`,Object.assign(Object.assign({visible:!0},Yf(t.key)),{textBaseline:"top"}),"richtext"):typeof t.key.text!="object"||t.key.text===null||t.key.text.type!=="rich"&&t.key.text.type!=="html"?e.createOrUpdateChild(`${n}-key`,Object.assign(Object.assign({visible:!0,text:(r=t.key.text)!==null&&r!==void 0?r:""},t.key),{textBaseline:"top"}),"text"):t.key.text.type==="rich"?e.createOrUpdateChild(`${n}-value`,Object.assign(Object.assign({visible:!0},Yf(t.key)),{textBaseline:"top"}),"richtext"):e.createOrUpdateChild(`${n}-value`,{html:Object.assign(Object.assign({dom:t.key.text.text},JA),t.key)},"richtext"),s}}_createValue(t,e,n){var r;if(Qi(t.value)){let s;return s=t.value.multiLine?e.createOrUpdateChild(`${n}-value`,Object.assign(Object.assign({visible:!0},Yf(t.value)),{textBaseline:"top"}),"richtext"):typeof t.value.text!="object"||t.value.text===null||t.value.text.type!=="rich"&&t.value.text.type!=="html"?e.createOrUpdateChild(`${n}-value`,Object.assign(Object.assign({visible:!0,text:(r=t.value.text)!==null&&r!==void 0?r:""},t.value),{textBaseline:"top"}),"text"):t.value.text.type==="rich"?e.createOrUpdateChild(`${n}-value`,Object.assign(Object.assign({visible:!0},Yf(t.value)),{textBaseline:"top"}),"richtext"):e.createOrUpdateChild(`${n}-value`,{html:Object.assign({dom:t.value.text.text,container:"",width:30,height:30,style:{}},t.value)},"richtext"),s}}setAttributes(t,e){const n=Object.keys(t);this.attribute.autoCalculatePosition&&n.every(r=>a5t.includes(r))?(this._mergeAttributes(t,n),N(this.attribute.panel.width)&&this.attribute.autoMeasure&&ra.measureTooltip(this.attribute),ra.calculateTooltipPosition(this.attribute),super.setAttributes({x:this.attribute.x,y:this.attribute.y},e)):super.setAttributes(t,e)}static calculateTooltipPosition(t){const{width:e=0,height:n=0}=t.panel,{offsetX:r,offsetY:s,pointerX:a,pointerY:o,positionX:l,positionY:u,parentBounds:c}=t;let h=a,d=o;return l==="left"?h-=e+r:l==="center"?h-=e/2:h+=r,u==="top"?d-=n+s:u==="middle"?d-=n/2:d+=s,h+e>c.x2&&(h-=e+r),d+n>c.y2&&(d-=n+s),h<c.x1&&(h=c.x1),d<c.y1&&(d=c.y1),t.x=h,t.y=d,t}static measureTooltip(t){const{content:e,contentStyle:n}=t,r=zr(t.padding),s=ra.getTitleAttr(t);let a=0,o=r[0]+r[2],l=0;const{value:u,shape:c}=s,{visible:h=!1,symbolType:d=""}=c??{};if(L(u)&&typeof s.value.text!="object"){const{width:f,height:p}=bg(u).quickMeasure(u.text);a=f,l=p}if(h&&Ww[d]&&(a+=c.size+c.spacing,l=Math.max(c.size,l)),t.title&&(t.title.width=a,t.title.height=l),Qi(s)&&(o+=l+s.spaceRow),e&&e.length){const f=[];if(e.forEach((p,g)=>{const m=ra.getContentAttr(t,g);(p.key||p.value)&&Qi(m)&&f.push([p,m])}),f.length){let p=!1;const g=[],m=[],_=[];f.forEach(([x,S],w)=>{var A;const{key:k,value:C,shape:M,spaceRow:R}=S,P=Qi(M),O=(A=M?.symbolType)!==null&&A!==void 0?A:"",T=bg(k),D=bg(C);let B=0;if(Qi(k)){const{width:I,height:F}=T.quickMeasure(k.text);m.push(I),B=Math.max(B,F)}if(Qi(C)){const{width:I,height:F}=D.quickMeasure(C.text);_.push(I),B=Math.max(B,F)}P&&Ww[O]&&(p=!0,g.push(M.size),B=Math.max(M.size,B)),x.height=B,o+=B,w<f.length-1&&(o+=R??n.spaceRow)});const v=g.length?Math.max(...g):0,y=m.length?Math.max(...m):0,b=_.length?Math.max(..._):0;a=Math.max(y+b+n.key.spacing+n.value.spacing+(p?v+n.shape.spacing:0),a),e.forEach(x=>{x.width=a}),t.hasContentShape=p,t.keyWidth=y,t.valueWidth=b}}return t.panel.width=a+r[1]+r[3],t.panel.height=o,t}static getTitleAttr(t){return Y4({},ra.defaultAttributes.titleStyle,ra.defaultAttributes.title,t.titleStyle,t.title)}static getContentAttr(t,e){return Y4({},ra.defaultAttributes.contentStyle,t.contentStyle,t.content[e])}};Mnt.defaultAttributes=s5t;const uk=sn;function l5t(i,t){let e=0,n=2*Math.PI;const r=L(i),s=L(t);for(r||s?s?r?(e=i,n=t):(e=t-2*Math.PI,n=t):(e=i,n=i+2*Math.PI):(e=0,n=2*Math.PI);n<=e;)n+=2*Math.PI;for(;e>2*Math.PI;)e-=2*Math.PI,n-=2*Math.PI;for(;n<0;)e+=2*Math.PI,n+=2*Math.PI;return{startAngle:e,endAngle:n}}function u5t(i,t,e){return i.x1>t||i.x2<t||i.y1>e||i.y2<e}function Tnt(i,t){const e=[];return i.forEach(n=>{const r=+n[t];et(r)&&e.push(r)}),e.length===0?null:Rn(e)}function sz(i,t){const e=[];return i.forEach(n=>{const r=+n[t];et(r)&&e.push(r)}),e.length===0?null:rn(e)}function C0(i,t){return i.reduce((e,n)=>{const r=t?+n[t]:+n;return et(r)&&(e+=r),e},0)}function az(i,t){let e=0,n=0;return i.forEach(r=>{const s=t?+r[t]:+r;et(s)&&(e+=s,n++)}),e/n}function Pnt(i,t){const e=az(i,t);return i.length<=1?0:i.reduce((r,s)=>r+(t?+s[t]:+s-e)**2,0)/(i.length-1)}function c5t(i,t){return Math.sqrt(Pnt(i,t))}function h5t(i,t){return DPt(i.map(e=>e[t]))}function d5t(i,t,e){const{predict:n}=KPt(i,l=>l[t],l=>l[e]),r=Tnt(i,t),s=sz(i,t),a=n(r),o=n(s);return[{[t]:r,[e]:a},{[t]:s,[e]:o}]}function f5t(i){let t="center",e="middle";return t=(i=oh(i))>=Math.PI*(7/6)&&i<=Math.PI*(11/6)?"right":i>=Math.PI*(1/6)&&i<=Math.PI*(5/6)?"left":"center",e=i>=Math.PI*(5/3)||i<=Math.PI*(1/3)?"bottom":i>=Math.PI*(2/3)&&i<=Math.PI*(4/3)?"top":"middle",{align:t,baseline:e}}function X4(i,t){const e=ck(i),n=ck(t),r=Math.asin((i.x*t.y-t.x*i.y)/e/n),s=Math.acos((i.x*t.x+i.y*t.y)/e/n);return r<0?-s:s}function ck(i,t={x:0,y:0}){return Je.distancePP(i,t)}function p5t(i,t=2){const e=i.reduce((u,c)=>u+(isNaN(c)?0:c),0);if(e===0)return 0;const n=Math.pow(10,t),r=i.map(u=>(isNaN(u)?0:u)/e*n*100),s=100*n,a=r.map(u=>Math.floor(u));let o=a.reduce((u,c)=>u+c,0);const l=r.map((u,c)=>u-a[c]);for(;o<s;){let u=Number.NEGATIVE_INFINITY,c=null;for(let h=0;h<l.length;h++)l[h]>u&&(u=l[h],c=h);++a[c],l[c]=0,++o}return a.map(u=>u/n)}function K4(i){return et(i.x)&&et(i.y)}function zi(i,t,e){let n=!1;if(t&&it(t)){for(const r of i)for(const s of r.getSeries(e))if(n=!!t.call(null,s),n)return n}return n}function Ent(i,t){const e=[];for(const n of i)for(const r of n.getSeries(t))e.push(r);return e}const oz=(i,t)=>{for(let e=0;e<i.length;e++){const n=i[e].getSeries();for(let r=0;r<n.length;r++){const s=n[r];if(t&&s&&s.coordinate===t||!t&&s)return s}}return null};function _1(i){return function(t){let e;return e=J(i)?i.reduce((n,r)=>n?.[r],t):t?.[i],e}}function Rnt(i,t=!1){if(i===null||typeof i!="object")return i;for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){if(i[e]===void 0){delete i[e];continue}t&&Rnt(i[e],t)}}var st;(function(i){i.area="area",i.line="line",i.bar="bar",i.rangeColumn="rangeColumn",i.rangeArea="rangeArea",i.dot="dot",i.geo="geo",i.link="link",i.map="map",i.pie="pie",i.radar="radar",i.rose="rose",i.scatter="scatter",i.circularProgress="circularProgress",i.wordCloud="wordCloud",i.funnel="funnel",i.linearProgress="linearProgress",i.boxPlot="boxPlot",i.sankey="sankey",i.gaugePointer="gaugePointer",i.gauge="gauge",i.treemap="treemap",i.sunburst="sunburst",i.circlePacking="circlePacking",i.waterfall="waterfall",i.heatmap="heatmap",i.correlation="correlation",i.liquid="liquid",i.venn="venn",i.mosaic="mosaic",i.pictogram="pictogram"})(st||(st={}));var q4;(function(i){i.label="label",i.point="point",i.line="line",i.area="area",i.bar="bar",i.boxPlot="boxPlot",i.outlier="outlier",i.circlePacking="circlePacking",i.group="group",i.gridBackground="gridBackground",i.grid="grid",i.dot="dot",i.title="title",i.subTitle="subTitle",i.symbol="symbol",i.funnel="funnel",i.transform="transform",i.transformLabel="transformLabel",i.outerLabel="outerLabel",i.outerLabelLine="outerLabelLine",i.pin="pin",i.pinBackground="pinBackground",i.pointer="pointer",i.segment="segment",i.track="track",i.cell="cell",i.cellBackground="cellBackground",i.link="link",i.arrow="arrow",i.pie="pie",i.labelLine="labelLine",i.progress="progress",i.minLabel="minLabel",i.maxLabel="maxLabel",i.rose="rose",i.node="node",i.sunburst="sunburst",i.nonLeaf="nonLeaf",i.leaf="leaf",i.nonLeafLabel="nonLeafLabel",i.leaderLine="leaderLine",i.stackLabel="stackLabel",i.word="word",i.fillingWord="fillingWord",i.wordMask="wordMask",i.nodePoint="nodePoint",i.ripplePoint="ripplePoint",i.centerPoint="centerPoint",i.centerLabel="centerLabel",i.barBackground="barBackground",i.lineLabel="lineLabel",i.areaLabel="areaLabel",i.liquidGroup="liquidGroup",i.liquid="liquid",i.liquidBackground="liquidBackground",i.liquidOutline="liquidOutline",i.circle="circle",i.overlap="overlap",i.overlapLabel="overlapLabel"})(q4||(q4={}));function Ont(i){var t,e;const{type:n}=i;return n===st.sankey?(t=i.direction)!==null&&t!==void 0?t:"horizontal":(e=i.direction)!==null&&e!==void 0?e:"vertical"}const g5t={primaryFontColor:"titleFontColor",tertiaryFontColor:"labelFontColor",axisLabelFontColor:"axisFontColor",axisMarkerFontColor:"labelReverseFontColor",dataZoomHandleStrokeColor:"dataZoomHandlerStrokeColor",sliderHandleColor:"dataZoomHandlerFillColor",sliderRailColor:"dataZoomBackgroundColor",sliderTrackColor:"dataZoomSelectedColor",playerControllerColor:"dataZoomSelectedColor",popupBackgroundColor:"tooltipBackgroundColor",hoverBackgroundColor:"axisGridColor"},m5t={titleFontColor:"primaryFontColor",labelFontColor:"tertiaryFontColor",axisFontColor:"axisLabelFontColor",labelReverseFontColor:"axisMarkerFontColor",dataZoomHandlerStrokeColor:"dataZoomHandleStrokeColor",dataZoomHandlerFillColor:"sliderHandleColor",dataZoomBackgroundColor:"sliderRailColor",dataZoomSelectedColor:"sliderTrackColor",tooltipBackgroundColor:"popupBackgroundColor"};function _5t(i,t){const e=g5t[t];if(e&&i[e])return i[e];if(i[t])return i[t];const n=m5t[t];return n?i[n]:void 0}function M0(i,t){var e;if(!i)return[];const n=Int(i,t);if(!n||J(n))return(e=n)!==null&&e!==void 0?e:[];if(ee(n)){const{dataScheme:r}=n;return r?lz(r)?r.map(s=>Object.assign(Object.assign({},s),{scheme:s.scheme.map(a=>hk(a)?rL(i,a,t):a).filter(L)})):r.map(s=>hk(s)?rL(i,s,t):s).filter(L):[]}return[]}function nL(i,t){var e,n;return lz(i)?(n=(e=i.find(r=>L(r.isAvailable)?it(r.isAvailable)?r.isAvailable(t):!!r.isAvailable:!L(r.maxDomainLength)||t?.length<=r.maxDomainLength))===null||e===void 0?void 0:e.scheme)!==null&&n!==void 0?n:i[i.length-1].scheme:i}function rL(i,t,e){var n;const r=Int(i,e);if(!r)return;let s;const{palette:a}=r;if(ee(a)&&(s=(n=_5t(a,t.key))!==null&&n!==void 0?n:t.default),!s)return;if(N(t.a)&&N(t.l)||!Ht(s))return s;let o=new Mn(s);if(L(t.l)){const{r:l,g:u,b:c}=o.color,{h,s:d}=nM(l,u,c),f=xw(h,d,t.l),p=new Mn(`rgb(${f.r}, ${f.g}, ${f.b})`);p.setOpacity(o.color.opacity),o=p}return L(t.a)&&o.setOpacity(t.a),o.toRGBA()}const Dnt=(i,t)=>{if(t&&hk(i)){const e=rL(t,i);if(e)return e}return i};function hk(i){return i&&i.type==="palette"&&!!i.key}function lz(i){return!(!J(i)||i.length===0)&&i.every(t=>L(t.scheme))}function v5t(i){return J(i)?{dataScheme:i}:i}function Int(i,t){var e,n;const{type:r}=t??{};let s;if(!t||N(r))s=i?.default;else{const a=Ont(t);s=(n=(e=i?.[`${r}_${a}`])!==null&&e!==void 0?e:i?.[r])!==null&&n!==void 0?n:i?.default}return s}class Yb extends tf{range(t){return t?(this._range=t,this._resetRange(),this):super.range()}domain(t){return t?(super.domain(t),this._resetRange(),this):super.domain()}_resetRange(){if(!lz(this._range))return void super.range(this._range);const t=nL(this._range,this._domain);super.range(t)}}const y5t={linear:vs,band:xf,point:gWt,ordinal:tf,threshold:QF,colorOrdinal:Yb};function sL(i){const t=y5t[i];return t?new t:null}function b5t(i,t){if("scale"in i&&i.scale)return Ht(i.scale)&&t?.globalScale?t.globalScale.registerMarkAttributeScale(i,t.seriesId):i.scale;const e=sL(i.type);return e&&x5t(e,i),e}function x5t(i,t){i&&t&&(t.domain&&i.domain(t.domain),t.range&&i.range(t.range),t.specified&&i.specified&&i.specified(t.specified),t.clamp&&i.clamp&&i.clamp(t.clamp))}function He(i,t,e){if(!t)return i;const n=t.range(),r=e&&t._calculateWholeRange?t._calculateWholeRange(n):t.range(),s=Math.min(r[0],r[r.length-1]),a=Math.max(r[0],r[r.length-1]);return Math.min(Math.max(s,i),a)}function uz(i,t,e){if(!t)return!0;t.range();const n=t.range().map(a=>t.invert(a)),r=Math.min(n[0],n[n.length-1]),s=Math.max(n[0],n[n.length-1]);return Array.isArray(i)?i.every(a=>a>=r&&a<=s):i>=r&&i<=s}function Z4(i){return L(i?.field)&&L(i?.scale)}function cz(i){switch(i){case"left":case"right":case"top":case"bottom":return!0;default:return!1}}function va(i){return!!Ht(i)&&!!i.endsWith("%")&&Qg(i.substring(0,i.length-1))}function S5t(i){return!!ee(i)&&("percent"in i||"offset"in i)}function en(i,t,e,n=0){var r,s;return yt(i)?i:va(i)?Number(i.substring(0,i.length-1))*t/100:it(i)?i(e):ee(i)?t*((r=i.percent)!==null&&r!==void 0?r:0)+((s=i.offset)!==null&&s!==void 0?s:0):n}function Lnt(i,t,e){var n,r,s,a;const o={top:0,bottom:0,left:0,right:0};return Object.values(i).every(l=>yt(l))?(o.top=(n=i.top)!==null&&n!==void 0?n:0,o.right=(r=i.right)!==null&&r!==void 0?r:0,o.bottom=(s=i.bottom)!==null&&s!==void 0?s:0,o.left=(a=i.left)!==null&&a!==void 0?a:0,o):([{orients:["left","right"],size:t.width},{orients:["top","bottom"],size:t.height}].forEach(l=>{l.orients.forEach(u=>{o[u]=en(i[u],l.size,e)})}),o)}function w5t(i,t){return i?{width:Math.ceil(Math.min(i.x2-i.x1,t.width)),height:Math.ceil(Math.min(i.y2-i.y1,t.height))}:{width:0,height:0}}function Yl(i){let t={};return J(i)?(N(i[0])||(t.top=t.left=t.bottom=t.right=i[0]),N(i[1])||(t.left=t.right=i[1]),N(i[2])||(t.bottom=i[2]),N(i[3])||(t.left=i[3]),t):yt(i)||va(i)||it(i)||S5t(i)?(t.top=t.left=t.bottom=t.right=i,t):(ee(i)&&(t=Object.assign({},i)),t)}function Q4(i,t,e){return e?{x:i.x+t.x,y:i.y+t.y}:i}const or=(i,t)=>{const e=Number(i),n=i.toString();return isNaN(e)&&n[n.length-1]==="%"?t*(Number(n.slice(0,n.length-1))/100):e},Bnt=[{maxDomainLength:10,scheme:["#1664FF","#1AC6FF","#FF8A00","#3CC780","#7442D4","#FFC400","#304D77","#B48DEB","#009488","#FF7DDA"]},{scheme:["#1664FF","#B2CFFF","#1AC6FF","#94EFFF","#FF8A00","#FFCE7A","#3CC780","#B9EDCD","#7442D4","#DDC5FA","#FFC400","#FAE878","#304D77","#8B959E","#B48DEB","#EFE3FF","#009488","#59BAA8","#FF7DDA","#FFCFEE"]}],A5t={default:{dataScheme:Bnt,palette:{backgroundColor:"#ffffff",borderColor:"#e3e5e8",shadowColor:"rgba(33,37,44,0.1)",hoverBackgroundColor:"#f1f2f5",sliderRailColor:"#f1f3f4",sliderHandleColor:"#ffffff",sliderTrackColor:"#0040ff",popupBackgroundColor:"#ffffff",primaryFontColor:"#21252c",secondaryFontColor:"#606773",tertiaryFontColor:"#89909d",axisLabelFontColor:"#89909d",disableFontColor:"#bcc1cb",axisMarkerFontColor:"#ffffff",axisGridColor:"#f1f2f5",axisDomainColor:"#d9dde4",dataZoomHandleStrokeColor:"#aeb5be",dataZoomChartColor:"#c9ced8",playerControllerColor:"#0040ff",scrollBarSliderColor:"rgba(0,0,0,0.3)",axisMarkerBackgroundColor:"#21252c",markLabelBackgroundColor:"#f1f2f5",markLineStrokeColor:"#606773",dangerColor:"#e33232",warningColor:"#ffc528",successColor:"#07a35a",infoColor:"#3073f2",discreteLegendPagerTextColor:"rgb(51, 51, 51)",discreteLegendPagerHandlerColor:"rgb(47, 69, 84)",discreteLegendPagerHandlerDisableColor:"rgb(170, 170, 170)",emptyCircleColor:"#e3e5e8",linearProgressTrackColor:"#E7EBED"}}},k5t={text:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1}}},C5t={label:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1,lineJoin:"bevel"}},area:{style:{fillOpacity:.2}},line:{style:{lineWidth:2,lineCap:"round",lineJoin:"round"}},point:{style:{size:8,stroke:{type:"palette",key:"backgroundColor"},lineWidth:1,fillOpacity:1}},word:{style:{fontWeight:null,fontSize:null}},fillingWord:{style:{fontWeight:null,fontSize:null}},barBackground:{visible:!1,style:{fill:{type:"palette",key:"primaryFontColor",a:.06},stroke:"transparent"}}};function M5t(i,t){return i&&t.key in i?i[t.key]:t.default}function T5t(i){return i&&i.type==="token"&&!!i.key}const T0={fontFamily:"PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,'-apple-system',segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",fontSize:14,l1FontSize:32,l1LineHeight:"150%",l2FontSize:20,l2LineHeight:"140%",l3FontSize:16,l3LineHeight:"150%",l4FontSize:14,l4LineHeight:"150%",l5FontSize:12,l5LineHeight:"130%",l6FontSize:10,l6LineHeight:"120%"},P5t={visible:!0,position:"auto",padding:8,titleStyle:{fontSize:{type:"token",key:"l5FontSize"},fontWeight:"bold",fill:{type:"palette",key:"primaryFontColor"}},contentStyle:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"primaryFontColor"}},panel:{visible:!0,fill:{type:"palette",key:"popupBackgroundColor"},cornerRadius:3,lineWidth:0,shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"},size:0,space:12}},aL={name:"light",background:{type:"palette",key:"backgroundColor"},padding:20,fontFamily:{type:"token",key:"fontFamily"},colorScheme:A5t,token:T0,component:{poptip:P5t},mark:k5t,markByName:C5t,animationThreshold:2e3},E5t={default:{dataScheme:Bnt,palette:{backgroundColor:"#202226",borderColor:"#404349",shadowColor:"rgba(0,0,0,0.1)",hoverBackgroundColor:"#404349",sliderRailColor:"#404349",sliderHandleColor:"#202226",sliderTrackColor:"#4284FF",popupBackgroundColor:"#404349",primaryFontColor:"#fdfdfd",secondaryFontColor:"#bbbdc3",tertiaryFontColor:"#888c93",axisLabelFontColor:"#888c93",disableFontColor:"#55595f",axisMarkerFontColor:"#202226",axisGridColor:"#404349",axisDomainColor:"#4b4f54",dataZoomHandleStrokeColor:"#bbbdc3",dataZoomChartColor:"#55595F",playerControllerColor:"#4284FF",scrollBarSliderColor:"rgba(255,255,255,0.3)",axisMarkerBackgroundColor:"#fdfdfd",markLabelBackgroundColor:"#404349",markLineStrokeColor:"#bbbdc3",dangerColor:"#eb4b4b",warningColor:"#f0bd30",successColor:"#14b267",infoColor:"#4284ff",discreteLegendPagerTextColor:"#BBBDC3",discreteLegendPagerHandlerColor:"#BBBDC3",discreteLegendPagerHandlerDisableColor:"#55595F",emptyCircleColor:"#bbbdc3",linearProgressTrackColor:"#404349"}}},J4={name:"dark",colorScheme:E5t,component:{dataZoom:{selectedBackground:{style:{fillOpacity:.4,outerBorder:{strokeOpacity:.4}}}}}},oL=(i,t,e)=>{if(N(t))return i;const n=t[0];return N(n)?i:t.length===1?(i[n]=e,i):(N(i[n])&&(typeof t[1]=="number"?i[n]=[]:i[n]={}),oL(i[n],t.slice(1),e))},R5t=(i,t,e)=>{if(!N(t))return be(i,t,e)};function Wt(i,...t){let e=-1;const n=t.length;for(;++e<n;){const r=t[e];WB(i,r,!0,!0)}return i}function O5t(i,t,e,n){Object.keys(i).forEach(r=>{if(ee(t))t.type===r&&(J(i[r])?i[r].length>=t.index&&(i[r][t.index]=n?Wt({},i[r][t.index],e):e):i[r]=n?Wt({},i[r],e):e);else if(J(i[r])){const s=i[r].findIndex(a=>a.id===t);s>=0&&(i[r][s]=n?Wt({},i[r][s],e):e)}else i.id===t&&(i[r]=n?Wt({},i[r],e):e)})}class z{static registerChart(t,e){z._charts[t]=e}static registerSeries(t,e){z._series[t]=e}static registerComponent(t,e,n,r){z._components[t]={cmp:e,alwaysCheck:n,createOrder:r??0}}static registerGraphicComponent(t,e){z._graphicComponents[t]=e}static createGraphicComponent(t,e,n){const r=z._graphicComponents[t];return r?r(e,n):null}static registerMark(t,e){z._marks[t]=e}static registerRegion(t,e){z._regions[t]=e}static registerTransform(t,e){z.transforms[t]=e}static registerGrammarTransform(t,e){z._grammarTransforms[t]=e}static getGrammarTransform(t){return z._grammarTransforms[t]}static registerLayout(t,e){z._layout[t]=e}static registerAnimation(t,e){z._animations[t]=e}static registerImplement(t,e){z._implements[t]=e}static registerChartPlugin(t,e){z._chartPlugin[t]=e}static registerVChartPlugin(t,e){z._vChartPlugin[t]=e}static registerComponentPlugin(t,e){z._componentPlugin[t]=e}static createChart(t,e,n){return z._charts[t]?new z._charts[t](e,n):null}static getChart(t){return z._charts[t]}static createChartSpecTransformer(t,e){if(!z._charts[t])return null;const n=z._charts[t];return new n.transformerConstructor(Object.assign({seriesType:n.seriesType},e))}static createRegion(t,e,n){return z._regions[t]?new z._regions[t](e,n):null}static createRegionSpecTransformer(t,e){return z._regions[t]?new z._regions[t].transformerConstructor(e):null}static createSeries(t,e,n){return z._series[t]?new z._series[t](e,n):null}static createSeriesSpecTransformer(t,e){return z._series[t]?new z._series[t].transformerConstructor(e):null}static createMark(t,e,n){if(!z._marks[t])return null;const r=new z._marks[t](e,n);return r.type==="group"&&r.setMarkConfig({interactive:!1}),r}static getComponents(){return Object.values(z._components)}static getComponentInKey(t){return z._components[t].cmp}static getLayout(){return Object.values(z._layout)}static getLayoutInKey(t){return z._layout[t]}static getSeries(){return Object.values(z._series)}static getSeriesInType(t){return z._series[t]}static getRegionInType(t){return z._regions[t]}static getAnimationInKey(t){return z._animations[t]}static getImplementInKey(t){return z._implements[t]}static getSeriesMarkMap(t){return z._series[t]?z._series[t].mark:{}}static getSeriesBuiltInTheme(t){for(const e in z._series){const n=z._series[e];if(n&&n.builtInTheme&&n.builtInTheme[t])return n.builtInTheme[t]}return null}static getComponentBuiltInTheme(t){for(const e in z._components){const n=z._components[e];if(n&&n.cmp&&n.cmp.builtInTheme&&n.cmp.builtInTheme[t])return n.cmp.builtInTheme[t]}return null}static getChartPlugins(){return Object.values(z._chartPlugin)}static getVChartPlugins(){return Object.values(z._vChartPlugin)}static getComponentPlugins(){return Object.values(z._componentPlugin)}static getComponentPluginInType(t){return z._componentPlugin[t]}static registerFormatter(t){this._formatter=t}static getFormatter(){return this._formatter}static createInteractionTrigger(t,e){const n=z._interactionTriggers[t];return n?new n(e):null}static hasInteractionTrigger(t){return!!z._interactionTriggers[t]}static getComposedEvent(t){return z._composedEventMap[t]}}z._charts={},z._series={},z._components={},z._graphicComponents={},z._marks={},z._regions={},z._animations={},z._implements={},z._chartPlugin={},z._vChartPlugin={},z._componentPlugin={},z.transforms={fields:htt,filter:IEt,fold:$Rt},z.dataParser={csv:nOt,dsv:iOt,tsv:rOt},z._layout={},z._grammarTransforms={},z._stageEventPlugins={},z.registerStageEventPlugin=(i,t)=>{z._stageEventPlugins[i]=t},z.getStageEventPlugin=i=>z._stageEventPlugins[i],z._interactionTriggers={},z.registerInteractionTrigger=(i,t)=>{z._interactionTriggers[i]=t},z._composedEventMap={},z.registerComposedEvent=(i,t)=>{z._composedEventMap[i]=t},z._tooltipProcessors={},z.registerTooltipProcessor=(i,t)=>{z._tooltipProcessors[i]=t},z.createTooltipProcessor=(i,t)=>{const e=z._tooltipProcessors[i];return e?new e(t):null};function v1(i,...t){return Wt(tG(i),...t.map(tG))}function tG(i){var t;if(!i)return i;const e=D5t(i.colorScheme);return Object.assign({},i,{colorScheme:e,token:(t=i.token)!==null&&t!==void 0?t:{},series:Object.assign({},i.series)})}function D5t(i){return i&&(i=Object.keys(i).reduce((t,e)=>{const n=i[e];return t[e]=v5t(n),t},{})),i}function I5t(i,t,e){const n=z.getSeriesMarkMap(t);if(!n)return i;const r={};return Object.values(n).forEach(({type:s,name:a})=>{r[a]=Wt({},e("mark",X(s)[0]),e("markByName",a),i?.[a])}),Object.assign(Object.assign({},i),r)}const Fnt=i=>{const t={label:{style:{fill:"white",textBaseline:"middle",lineWidth:2}},outerLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"}},line:{style:{stroke:{type:"palette",key:"axisDomainColor"}}}},transformLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle"}}};return t[i?"transform3d":"transform"]={style:{fill:{type:"palette",key:"axisGridColor"}}},t},L5t=Fnt(),lL={[aL.name]:aL},Xb=aL.name,sm=new Map(Object.keys(lL).map(i=>[i,lL[i]])),B5t=new Map,dk=new Map(Object.keys(lL).map(i=>[i,i===Xb])),hz=(i,t)=>{if(!i)return;const e=N5t(t);sm.set(i,e),dk.set(i,!0)},znt=(i=Xb)=>(dk.has(i)&&!dk.get(i)&&hz(i,sm.get(i)),sm.get(i)),F5t=i=>sm.delete(i)&&B5t.delete(i)&&dk.delete(i),z5t=i=>!!Ht(i)&&sm.has(i),N5t=i=>{var t;const e=(t=i.type)!==null&&t!==void 0?t:Xb,n=znt(e);return v1({},n,i)};class Ya{static registerInstance(t){Ya.instances.set(t.id,t)}static unregisterInstance(t){Ya.instances.delete(t.id)}static getInstance(t){return Ya.instances.get(t)}static instanceExist(t){return Ya.instances.has(t)}static forEach(t,e=[],n){const r=X(e);return Ya.instances.forEach((s,a,o)=>{r.includes(a)||t(s,a,o)},n)}}Ya.instances=new Map;class Vs{static registerTheme(t,e){hz(t,e)}static getTheme(t,e=!1){return znt(t)}static removeTheme(t){return F5t(t)}static themeExist(t){return z5t(t)}static getDefaultTheme(){return Vs.themes.get(Xb)}static setCurrentTheme(t){Vs.themeExist(t)&&(Vs._currentThemeName=t,Ya.forEach(e=>e?.setCurrentTheme(t)))}static getCurrentTheme(t=!1){return Vs.getTheme(Vs._currentThemeName,t)}static getCurrentThemeName(){return Vs._currentThemeName}}Vs.themes=sm,Vs._currentThemeName=Xb;function mc(i){return Ht(i)?Vs.themeExist(i)?Vs.getTheme(i):{}:ee(i)?i:{}}const j5t=["animationThreshold","colorScheme","name","padding"];function Nnt(i,t,e){if(!i)return i;t||(t=i.colorScheme),e||(e=i.token);const n={};return Object.keys(i).forEach(r=>{const s=i[r];j5t.includes(r)?n[r]=s:no(s)?hk(s)?n[r]=Dnt(s,t):T5t(s)?n[r]=M5t(e,s):n[r]=Nnt(s,t,e):n[r]=s}),n}function uL(i,t={data:e=>e}){if(!i)return i;if(i.constructor===Object){const e={};for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(t[n]){e[n]=t[n](i[n]);continue}e[n]=uL(i[n],t)}return e}return J(i)?i.map(e=>uL(e,t)):i}function cL(i,t){if(!i)return i;if(no(i)){const e={};for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(Ht(i[n])&&t.getFunction(i[n])){e[n]=t.getFunction(i[n]);continue}e[n]=cL(i[n],t)}return e}return J(i)?i.map(e=>cL(e,t)):i}const H5t=(i,t,e)=>bg(i,t,e,{fontFamily:T0.fontFamily,fontSize:T0.fontSize}),jnt=(i,t,e,n)=>H5t(t,e,n).measure(i),zt="__VCHART",Fp=500,zp=500,hr=`${zt}_DEFAULT_DATA_INDEX`,ys=`${zt}_DEFAULT_DATA_KEY`,gs=`${zt}_DEFAULT_DATA_SERIES_FIELD`,eG=`${zt}_DEFAULT_SERIES_STYLE_NAME`,V5t=`${zt}_STACK_KEY`,ho=`${zt}_STACK_START`,bs=`${zt}_STACK_END`,Qu=`${zt}_STACK_START_PERCENT`,Xl=`${zt}_STACK_END_PERCENT`,hL=`${zt}_STACK_START_OffsetSilhouette`,dL=`${zt}_STACK_END_OffsetSilhouette`,fk=`${zt}_STACK_TOTAL`,W5t=`${zt}_STACK_TOTAL_PERCENT`,P0=`${zt}_STACK_TOTAL_TOP`,dz=`${zt}_STACK_TOTAL_BOTTOM`,pk=`${zt}_MOSAIC_VALUE_START_PERCENT`,gk=`${zt}_MOSAIC_VALUE_END_PERCENT`,mk=`${zt}_MOSAIC_CAT_START_PERCENT`,_k=`${zt}_MOSAIC_CAT_END_PERCENT`,y1=`${zt}_SEGMENT_START`,qE=`${zt}_SEGMENT_END`,iG=`${zt}_KEY`,vk=`${zt}_MAP_LOOK_UP_KEY`;function xg(i,t){for(let e=0;e<t.length;e++){const n=t[e],r=$5t(i,n.key);r?r.operations=[...new Set(r.operations.concat(n.operations))]:i.push(n)}return i}function $5t(i,t){return i.find(e=>e.key===t)}function yk(i,t){var e;if(!i)return t??null;const n=i.getFields();return n&&n[t]?(e=n[t].alias)!==null&&e!==void 0?e:t:t??null}function Hnt(i,t,e){const n=i.getStackSort(),r={};let s=null;return n&&(s={},i.getSeries().forEach(a=>{const o=a.getSeriesField();if(o){const l=a.getRawDataStatisticsByField(o);l.values&&(s[o]||(s[o]={lastIndex:0,sort:{}}),l.values.forEach((u,c)=>{u in s[o].sort||(s[o].sort[u]=s[o].lastIndex,s[o].lastIndex++)}))}})),i.getSeries().forEach(a=>{var o;const l=a.getStackData(),u=a.getStackValue(),c=a.getStackValueField(),h=!e||e(a);l&&c&&h&&(r[u]=(o=r[u])!==null&&o!==void 0?o:{groupField:l.groupField,nodes:{}},Unt(a,l,r[u],c,t,s))}),n?Vnt(r):r}function Vnt(i,t){var e;for(const n in i)!((e=i[n].sortDatums)===null||e===void 0)&&e.length?(i[n].sortDatums.sort((r,s)=>r.index-s.index),i[n].values=i[n].sortDatums.map(r=>r.datum)):Vnt(i[n].nodes);return i}function fz(i,t){if("values"in i&&i.values.length){const e=C0(i.values,t),n=sz(i.values,Xl);i.values.forEach(r=>{r[fk]=e,r[W5t]=n})}else for(const e in i.nodes)fz(i.nodes[e],t)}function Wnt(i,t){var e,n;if("values"in i&&i.values.length)L((e=i.values[0])===null||e===void 0?void 0:e[fk])?i.total=(n=i.values[0])===null||n===void 0?void 0:n[fk]:i.total=C0(i.values,t);else{for(const r in i.nodes)Wnt(i.nodes[r],t);i.nodes&&(i.total=C0(Object.keys(i.nodes).map(r=>i.nodes[r]),"total"))}}function $nt(i,t,e){var n;if(t.groupField&&t.nodes){const r=((n=i.getRawDataStatisticsByField(t.groupField,!1))===null||n===void 0?void 0:n.values)||[],s={key:`${t.groupField}`,values:r.map(a=>{var o,l;const u=t.nodes[a];let c;return c=i.bandWidthField&&(l=(o=u.values.find(h=>L(h[i.bandWidthField])))===null||o===void 0?void 0:o[i.bandWidthField])!==null&&l!==void 0?l:u.total,{groupValue:a,value:c,end:c}})};pz(s,!1,!0,!1,{key:"groupField",start:"start",end:"end",startPercent:"startPercent",endPercent:"endPercent"}),s.values.forEach(a=>{t.nodes[a.groupValue].mosaicData=a})}else if("values"in t&&t.values.length&&e&&e.length){const r=e.length;let s=0,a=1,o=0,l=1;for(let u=0;u<r;u++)if(u%2==0){const c=a-s;a=s+e[u].endPercent*c,s+=e[u].startPercent*c}else{const c=l-o;l=o+e[u].endPercent*c,o+=e[u].startPercent*c}r%2==0?t.values.forEach(u=>{const c=a-s;u[_k]=s+c*u[Xl],u[mk]=s+c*u[Qu],u[gk]=l,u[pk]=o}):t.values.forEach(u=>{const c=l-o;u[gk]=o+c*u[Xl],u[pk]=o+c*u[Qu],u[_k]=a,u[mk]=s})}for(const r in t.nodes)$nt(i,t.nodes[r],t.nodes[r].mosaicData?e?[...e,t.nodes[r].mosaicData]:[t.nodes[r].mosaicData]:null)}function U5t(i){if(!i.values.length)return;const t=i.values[i.values.length-1][bs]/2;for(let e=0;e<i.values.length;e++)i.values[e][hL]=i.values[e][ho]-t,i.values[e][dL]=i.values[e][bs]-t}function pz(i,t,e,n,r={key:V5t,start:ho,end:bs,startPercent:Qu,endPercent:Xl,max:P0,min:dz}){const s=n&&L(r.min),a=n&&L(r.max);if(i.values.length>0){let o=0,l=0,u=1,c=0,h=null,d=null;const f=i.values.length;for(let p=0;p<f;p++){const g=i.values[t?f-1-p:p];c=g[r.end],c>=0?(g[r.start]=o,o+=g[r.end],g[r.end]=o):(g[r.start]=l,l+=g[r.end],g[r.end]=l),g[r.key]=i.key,a&&(delete g[r.max],(!d||g[r.end]>d[r.end])&&(d=g)),s&&(delete g[r.min],(!h||g[r.start]<h[r.start])&&(h=g))}if(a&&d&&(d[r.max]=!0),s&&h&&(h[r.min]=!0),e)for(let p=0;p<f;p++){const g=i.values[t?f-1-p:p];c=g[r.end];const m=c>=0?o:l;u=c>=0?1:-1,g[r.startPercent]=m===0?0:Math.min(1,g[r.start]/m)*u,g[r.endPercent]=m===0?0:Math.min(1,g[r.end]/m)*u}}for(const o in i.nodes)pz(i.nodes[o],t,e,n,r)}function Unt(i,t,e,n,r,s,a){var o;if("values"in t)if(r&&t.values.forEach(l=>l[bs]=zzt(l[n])),e.series.push({s:i,values:t.values}),s){const l=i.getSeriesField();t.values.forEach(u=>{e.sortDatums.push({series:i,datum:u,index:l?s[l].sort[u[l]]:0})})}else e.values.push(...t.values);else for(const l in t.nodes){const u=a?`${a}_${l}`:l;e.nodes[l]||(e.nodes[l]={values:[],series:[],nodes:{},sortDatums:[],key:u},L((o=t.nodes[l])===null||o===void 0?void 0:o.groupField)&&(e.nodes[l].groupField=t.nodes[l].groupField)),Unt(i,t.nodes[l],e.nodes[l],n,r,s,u)}}const Gnt=(i,t,e="key",n="children")=>{for(let r=0;r<i.length;r++){const s=i[r];if(s[e]===t)return s;if(s[n]){const a=Gnt(s[n],t,e,n);if(a)return a}}return null},Ynt=(i,t,e="key",n="children")=>{for(let r=0;r<i.length;r++){const s=i[r];if(s[n])for(let a=0;a<s[n].length;a++){const o=s[n][a];if(o[e]===t)return s;const l=Ynt([o],t,e,n);if(l)return l}}return null},G5t=(i,t,e="key",n="children")=>{const r=[],s=(a,o)=>{for(const l of a){if(l[e]===t)return r.push(...o,l[e].toString()),!0;if(l[n]){const u=s(l[n],[...o,l[e]]);if(u===!0)return u}}return!1};return s(i,[]),r};function Y5t(i,t="value",e="children"){return!!ee(i)&&!!i.hasOwnProperty(e)&&Array.isArray(i[e])}function Xnt(i,t,e,n="value",r="children"){return Array.isArray(i)?i.map(s=>{const a=Object.assign({},s);return Array.isArray(a[r])&&(a[r]=Xnt(a[r],t,e,n,r)),a}).filter(s=>+s[n]>=t&&+s[n]<=e||s[r]&&s[r].length>0):i}function Lo(i={}){const t=Object.assign({},i);if(it(i.style)?t.style=(e,n,r,s)=>$t(i.style(e,n,r,s)):Lt(i.style)||(t.style=$t(i.style)),!Lt(i.state)){const e={};Object.keys(i.state).forEach(n=>{it(i.state[n])?e[n]=(r,s,a,o)=>$t(i.state[n](r,s,a,o)):Lt(i.state[n])||(e[n]=$t(i.state[n]))}),t.state=e}return t}function Xf(i){if(Lt(i))return null;const t={};return Object.keys(i).forEach(e=>{it(i[e])?t[e]=(n,r,s,a)=>$t(i[e](n,r,s,a)):Lt(i[e])||(t[e]=$t(i[e]))}),t}function X5t(i){if(Lt(i))return null;const t={};return Object.keys(i).forEach(e=>{it(i[e])?t[e]=(n,r,s,a)=>$t(i[e](n.rawValue,r,n,s,a)):Lt(i[e])||(t[e]=$t(i[e]))}),t}function nG(i,t){if(Lt(i))return null;const e={};return Object.keys(i).forEach(n=>{it(i[n])?e[n]=i[n](t):e[n]=i[n]}),$t(e)}function $t(i){return i?.angle?Object.assign(Object.assign({},i),{angle:ii(i.angle)}):i}const K5t=i=>i==="line"||i==="area",cn=i=>{if(!i||!i.context)return null;const{data:t,markType:e}=i.context;return(n=e)==="line"||n==="area"?t:t?.[0];var n},q5t=(i,t)=>{let e=t;for(;e?.parent&&e.parent!==i;)if(e=e.parent,e.context)return e;return null},Knt=(i,t)=>{const e=i.getAttributes(!0),n={};return Object.keys(t).forEach(r=>{e[r]!==t[r]&&(n[r]=t[r])}),n};let gz=class{getComposedEventMap(){return this._composedEventMap}constructor(t,e){this._composedEventMap=new Map,this._eventDispatcher=t,this._mode=e}on(t,e,n){const r=typeof e=="function"?{query:null,callback:e}:{query:e,callback:n},s=z.getComposedEvent(t);if(s){const a=new s(this._eventDispatcher,this._mode);a.register(t,r),this._composedEventMap.set(n,{eventType:t,event:a})}else this._eventDispatcher.register(t,r);return this}off(t,e,n){var r,s;const a=n??e;if(z.getComposedEvent(t))if(a)(r=this._composedEventMap.get(a))===null||r===void 0||r.event.unregister(),this._composedEventMap.delete(a);else for(const o of this._composedEventMap.entries())o[1].eventType===t&&((s=this._composedEventMap.get(o[0]))===null||s===void 0||s.event.unregister(),this._composedEventMap.delete(o[0]));else if(a){const o={callback:a,query:null,filter:{nodeName:null,type:t,level:null,source:e.source,markName:null,filter:null,userId:null}};this._eventDispatcher.unregister(t,o)}else this._eventDispatcher.unregister(t);return this}emit(t,e,n){return this._eventDispatcher.dispatch(t,e,n),this}prevent(t,e){return this._eventDispatcher.prevent(t,e),this}allow(t){return this._eventDispatcher.allow(t),this}release(){this._eventDispatcher.clear(),this._composedEventMap.clear()}};var Zo;(function(i){i.BEFORE_EVALUATE_DATA="beforeEvaluateData",i.AFTER_EVALUATE_DATA="afterEvaluateData",i.BEFORE_EVALUATE_SCALE="beforeEvaluateScale",i.AFTER_EVALUATE_SCALE="afterEvaluateScale",i.BEFORE_PARSE_VIEW="beforeParseView",i.AFTER_PARSE_VIEW="afterParseView",i.BEFORE_TRANSFORM="beforeTransform",i.AFTER_TRANSFORM="afterTransform",i.BEFORE_CREATE_VRENDER_STAGE="beforeCreateVRenderStage",i.AFTER_CREATE_VRENDER_STAGE="afterCreateVRenderStage",i.BEFORE_CREATE_VRENDER_LAYER="beforeCreateVRenderLayer",i.AFTER_CREATE_VRENDER_LAYER="afterCreateVRenderLayer",i.BEFORE_STAGE_RESIZE="beforeStageResize",i.AFTER_STAGE_RESIZE="afterStageResize",i.BEFORE_VRENDER_DRAW="beforeVRenderDraw",i.AFTER_VRENDER_DRAW="afterVRenderDraw",i.BEFORE_MARK_JOIN="beforeMarkJoin",i.AFTER_MARK_JOIN="afterMarkJoin",i.BEFORE_MARK_UPDATE="beforeMarkUpdate",i.AFTER_MARK_UPDATE="afterMarkUpdate",i.BEFORE_MARK_STATE="beforeMarkState",i.AFTER_MARK_STATE="afterMarkState",i.BEFORE_MARK_ENCODE="beforeMarkEncode",i.AFTER_MARK_ENCODE="afterMarkEncode",i.BEFORE_DO_LAYOUT="beforeDoLayout",i.AFTER_DO_LAYOUT="afterDoLayout",i.BEFORE_MARK_LAYOUT_END="beforeMarkLayoutEnd",i.AFTER_MARK_LAYOUT_END="afterMarkLayoutEnd",i.BEFORE_DO_RENDER="beforeDoRender",i.AFTER_DO_RENDER="afterDoRender",i.BEFORE_MARK_RENDER_END="beforeMarkRenderEnd",i.AFTER_MARK_RENDER_END="afterMarkRenderEnd",i.BEFORE_CREATE_VRENDER_MARK="beforeCreateVRenderMark",i.AFTER_CREATE_VRENDER_MARK="afterCreateVRenderMark",i.BEFORE_ADD_VRENDER_MARK="beforeAddVRenderMark",i.AFTER_ADD_VRENDER_MARK="afterAddVRenderMark",i.AFTER_VRENDER_NEXT_RENDER="afterVRenderNextRender",i.BEFORE_ELEMENT_UPDATE_DATA="beforeElementUpdateData",i.AFTER_ELEMENT_UPDATE_DATA="afterElementUpdateData",i.BEFORE_ELEMENT_STATE="beforeElementState",i.AFTER_ELEMENT_STATE="afterElementState",i.BEFORE_ELEMENT_ENCODE="beforeElementEncode",i.AFTER_ELEMENT_ENCODE="afterElementEncode",i.ANIMATION_START="animationStart",i.ANIMATION_END="animationEnd",i.ELEMENT_ANIMATION_START="elementAnimationStart",i.ELEMENT_ANIMATION_END="elementAnimationEnd",i.ALL_ANIMATION_START="allAnimationStart",i.ALL_ANIMATION_END="allAnimationEnd"})(Zo||(Zo={}));const Z5t=["pointerdown","pointerup","pointerupoutside","pointertap","pointerover","pointermove","pointerenter","pointerleave","pointerout","mousedown","mouseup","mouseupoutside","rightdown","rightup","rightupoutside","click","dblclick","mousemove","mouseover","mouseout","mouseenter","mouseleave","wheel","touchstart","touchend","touchendoutside","touchmove","touchcancel","tap","dragstart","drag","dragenter","dragleave","dragover","dragend","drop","pan","panstart","panend","press","pressup","pressend","pinch","pinchstart","pinchend","swipe"];var Tt;(function(i){i.initialized="initialized",i.rendered="rendered",i.renderFinished="renderFinished",i.animationFinished="animationFinished",i.regionSeriesDataFilterOver="regionSeriesDataFilterOver",i.afterInitData="afterInitData",i.afterInitEvent="afterInitEvent",i.afterInitMark="afterInitMark",i.rawDataUpdate="rawDataUpdate",i.viewDataFilterOver="viewDataFilterOver",i.viewDataUpdate="viewDataUpdate",i.viewDataStatisticsUpdate="viewDataStatisticsUpdate",i.markDeltaYUpdate="markDeltaYUpdate",i.viewDataLabelUpdate="viewDataLabelUpdate",i.scaleDomainUpdate="scaleDomainUpdate",i.scaleRawDomainUpdate="scaleRawDomainUpdate",i.scaleUpdate="scaleUpdate",i.dataZoomChange="dataZoomChange",i.drill="drill",i.layoutStart="layoutStart",i.layoutEnd="layoutEnd",i.layoutRectUpdate="layoutRectUpdate",i.playerPlay="playerPlay",i.playerPause="playerPause",i.playerEnd="playerEnd",i.playerChange="playerChange",i.playerForward="playerForward",i.playerBackward="playerBackward",i.scrollBarChange="scrollBarChange",i.brushStart="brushStart",i.brushChange="brushChange",i.brushEnd="brushEnd",i.brushClear="brushClear",i.brushActive="brushActive",i.legendSelectedDataChange="legendSelectedDataChange",i.legendFilter="legendFilter",i.legendItemClick="legendItemClick",i.legendItemHover="legendItemHover",i.legendItemUnHover="legendItemUnHover",i.tooltipShow="tooltipShow",i.tooltipHide="tooltipHide",i.tooltipRelease="tooltipRelease",i.afterResize="afterResize",i.afterRender="afterRender",i.afterLayout="afterLayout",i.afterMarkLayoutEnd="afterMarkLayoutEnd",i.afterWordcloudShapeDraw="afterWordcloudShapeDraw"})(Tt||(Tt={}));var ze;(function(i){i.chart="chart",i.window="window",i.canvas="canvas"})(ze||(ze={}));var vi;(function(i){i.vchart="vchart",i.chart="chart",i.model="model",i.mark="mark"})(vi||(vi={}));const DS=[vi.mark,vi.model,vi.chart,vi.vchart];class Q5t{constructor(){this._map=new Map,this._levelNodes=new Map,this._levelNodes.set(vi.vchart,[]),this._levelNodes.set(vi.chart,[]),this._levelNodes.set(vi.model,[]),this._levelNodes.set(vi.mark,[])}addHandler(t,e){var n;const r={level:e,handler:t};return(n=this._levelNodes.get(e))===null||n===void 0||n.push(r),this._map.set(t.callback,r),this}removeHandler(t){const e=this._map.get(t.callback);if(!e)return this;this._map.delete(t.callback);const n=this._levelNodes.get(e.level),r=n?.findIndex(s=>s.handler.callback===t.callback);return r!==void 0&&r>=0&&n?.splice(r,1),this}preventHandler(t){return t&&(t.prevented=!0),this}allowHandler(t){return t&&(t.prevented=!1),this}getHandlers(t){var e;return((e=this._levelNodes.get(t))===null||e===void 0?void 0:e.map(n=>n.handler))||[]}getAllHandlers(){return Array.from(this._map.values()).map(t=>t.handler)||[]}getCount(){return this._map.size}release(){this._map.clear(),this._levelNodes.clear()}}const rG={cartesianAxis:"axis","cartesianAxis-band":"axis","cartesianAxis-linear":"axis","cartesianAxis-time":"axis",polarAxis:"axis","polarAxis-band":"axis","polarAxis-linear":"axis",discreteLegend:"legend",continuousLegend:"legend",colorLegend:"legend",sizeLegend:"legend"};class J5t{constructor(t,e){this._viewBubbles=new Map,this._windowBubbles=new Map,this._canvasBubbles=new Map,this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this._onDelegate=n=>{var r;const s=this.globalInstance.getChart(),a=L(n.modelId)&&s?.getModelById(n.modelId)||void 0,o=L(n.markId)&&s?.getMarkById(n.markId)||null,l=be(n.event,"target");let u=n.datum;a&&a.modelType==="component"&&(u=(r=a.getDatum(l))!==null&&r!==void 0?r:u);const c={event:n.event,item:n.item,source:n.source,datum:u,chart:s,model:a,mark:o??void 0,node:l};this.dispatch(n.type,c)},this._onDelegateInteractionEvent=n=>{const r=this.globalInstance.getChart(),s=n.event;let a=null;s.graphics&&(a=s.graphics);const o={event:n.event,chart:r,graphics:a,datums:a&&a.map(l=>cn(l))};this.dispatch(n.type,o)},this.globalInstance=t,this._compiler=e}register(t,e){var n,r,s,a,o;this._parseQuery(e);const l=this.getEventBubble(((n=e.filter)===null||n===void 0?void 0:n.source)||ze.chart),u=this.getEventListeners(((r=e.filter)===null||r===void 0?void 0:r.source)||ze.chart);if(l.get(t)||l.set(t,new Q5t),l.get(t).addHandler(e,(s=e.filter)===null||s===void 0?void 0:s.level),this._isValidEvent(t)&&!u.has(t)){const c=this._onDelegate.bind(this);this._compiler.addEventListener((a=e.filter)===null||a===void 0?void 0:a.source,t,c),u.set(t,c)}else if(this._isInteractionEvent(t)&&!u.has(t)){const c=this._onDelegateInteractionEvent.bind(this);this._compiler.addEventListener((o=e.filter)===null||o===void 0?void 0:o.source,t,c),u.set(t,c)}return this}unregister(t,e){var n,r,s,a;let o=!1;const l=this.getEventBubble(((n=e?.filter)===null||n===void 0?void 0:n.source)||ze.chart),u=this.getEventListeners(((r=e?.filter)===null||r===void 0?void 0:r.source)||ze.chart);if(e){const c=l.get(t);c?.removeHandler(e),c?.getCount()===0&&(c?.release(),l.delete(t),o=!0),!((s=e?.wrappedCallback)===null||s===void 0)&&s.cancel&&e.wrappedCallback.cancel()}else{const c=l.get(t);c?.release(),l.delete(t),o=!0}if(o&&this._isValidEvent(t)){const c=u.get(t);this._compiler.removeEventListener(((a=e?.filter)===null||a===void 0?void 0:a.source)||ze.chart,t,c),u.delete(t)}return this}dispatch(t,e,n){const r=this.getEventBubble(e.source||ze.chart).get(t);if(!r)return this;let s=!1;if(n){const a=r.getHandlers(n);s=this._invoke(a,t,e)}else{let a=0;for(;!s&&a<DS.length;)s=this._invoke(r.getHandlers(DS[a]),t,e),a++}return this}prevent(t,e){return["canvas","chart","window"].forEach(n=>{const r=this.getEventBubble(n).get(t);r&&r.getAllHandlers().forEach(s=>{e?DS.indexOf(s.filter.level)<DS.indexOf(e.level)&&s.callback!==e.handler&&r.preventHandler(s):r.preventHandler(s)})}),this}allow(t){return["canvas","chart","window"].forEach(e=>{const n=this.getEventBubble(e).get(t);n&&n.getAllHandlers().forEach(r=>n.allowHandler(r))}),this}clear(){[ze.chart,ze.window,ze.canvas].forEach(t=>{const e=this.getEventListeners(t);for(const n of e.entries())this._compiler.removeEventListener(t,n[0],n[1]);e.clear()}),[this._viewBubbles,this._windowBubbles,this._canvasBubbles].forEach(t=>{for(const e of t.values())e.release();t.clear()})}release(){this.clear(),this.globalInstance=null,this._compiler=null}_filter(t,e,n){var r,s,a;if(it(t.filter)&&!t.filter(n)||t.nodeName&&be(n,"node.name")!==t.nodeName||t.markName&&((r=n?.mark)===null||r===void 0?void 0:r.name)!==t.markName)return!1;let o=(s=n.model)===null||s===void 0?void 0:s.type;return rG[o]&&(o=rG[o]),(!t.type||o===t.type)&&!(t.level==="mark"&&!t.type&&!n?.mark)&&!(t.level==="model"&&!t.type&&!n?.model)&&(!L(t.userId)||((a=n.model)===null||a===void 0?void 0:a.userId)===t.userId)}_invoke(t,e,n){return t.map(r=>{var s,a,o;const l=r.filter;if(!r.prevented&&(!r.query||this._filter(l,e,n))){const u=(r.wrappedCallback||r.callback).call(null,Object.assign({},n)),c=u??((s=r.query)===null||s===void 0?void 0:s.consume);return c&&((a=n.event)===null||a===void 0||a.stopPropagation(),(o=n.event)===null||o===void 0||o.preventDefault()),!!c}}).some(r=>r===!0)}_getQueryLevel(t){return t?t.level?t.level:L(t.id)?vi.model:vi.vchart:vi.vchart}_parseQuery(t){var e;const n=t.query;n?.throttle?t.wrappedCallback=ac(t.callback,n.throttle):n?.debounce&&(t.wrappedCallback=pf(t.callback,n.debounce));let r=this._getQueryLevel(n),s=null,a=ze.chart,o=null,l=null,u=null;return n?.nodeName&&(o=n.nodeName),n?.markName&&(l=n.markName),!n?.type||r!==vi.model&&r!==vi.mark||(s=n.type),n?.source&&(a=n.source),L(n?.id)&&(u=n?.id,r=vi.model),t.filter={level:r,markName:l,type:s,source:a,nodeName:o,userId:u,filter:(e=n?.filter)!==null&&e!==void 0?e:null},t}getEventBubble(t){switch(t){case ze.chart:return this._viewBubbles;case ze.window:return this._windowBubbles;case ze.canvas:return this._canvasBubbles;default:return this._viewBubbles}}getEventListeners(t){switch(t){case ze.chart:return this._viewListeners;case ze.window:return this._windowListeners;case ze.canvas:return this._canvasListeners;default:return this._viewListeners}}_isValidEvent(t){return Z5t.includes(t)||Object.values(Zo).includes(t)}_isInteractionEvent(t){let e;return t&&(e=t.split(":")[0],e)&&z.hasInteractionTrigger(e)}}function Vt(i,t,e){i.getTransform(t)||i.registerTransform(t,e)}function Ul(i,t,e){i.getParser(t)||i.registerParser(t,e)}const ef=new Map;let up;function tUt(){up||(up=new lh,Ul(up,"geojson",_tt),Ul(up,"topojson",dOt),Vt(up,"simplify",WRt))}function eUt(i,t,e={type:"geojson",centroid:!0}){ef.has(i)&&es(`map type of '${i}' already exists, will be overwritten.`),tUt();const n=new je(up),r=ot({},{centroid:!0,simplify:!1},e);e.type==="topojson"?n.parse(t,{type:"topojson",options:r}):n.parse(t,{type:"geojson",options:r});const{simplify:s}=e;s===!0?n.transform({type:"simplify"}):ee(s)&&n.transform({type:"simplify",options:s}),ef.set(i,n)}function iUt(i){ef.has(i)?ef.delete(i):es(`map type of '${i}' does not exists.`)}function nUt(i){return ef.get(i)}function sG(i,t=!1){let e=t;return i.latestData instanceof je&&(e=!1),e?Jr(i.latestData):i.latestData&&i.latestData.slice()}const nT=(i,t)=>i.length===0?[]:i.length===1?sG(i[0],t?.deep):i.map(e=>sG(e,t?.deep));function fL(i,t,e){t=t instanceof lh?t:i.dataSet,Vt(t,"copyDataView",nT);const n=new je(t,e);return n.parse([i],{type:"dataview"}),n.transform({type:"copyDataView",level:Qo.copyDataView}),n}function mz(i,t,e=[]){var n;if(i instanceof je)return i;const{id:r,values:s=[],fromDataIndex:a,fromDataId:o,transforms:l=[]}=i,u=i.parser?Jr(i.parser):{clone:!0},c=Jr(i.fields);let h;u.clone=u.clone!==!1;const d=e.find(f=>f.name===r);if(d)h=d;else{const f={name:r};if(c&&(f.fields=c),h=new je(t,f),typeof o=="string"){const p=e.find(g=>g.name===o);if(!p)return es(`no data matches fromDataId ${o}`),null;h.parse([p],{type:"dataview"}),h.transform({type:"copyDataView"})}else if(typeof a=="number"){const p=e[a];if(!p)return es(`no data matches fromDataIndex ${a}`),null;h.parse([p],{type:"dataview"}),h.transform({type:"copyDataView"})}else Array.isArray(s)?h.parse(s,u):!Ht(s)||u&&!["csv","dsv","tsv"].includes(u.type)?(h.parse([]),es("values should be array")):h.parse(s,(n=u)!==null&&n!==void 0?n:{type:"csv"});l&&l.length&&l.forEach(p=>{t.getTransform(p.type)&&h.transform(p)})}return h}function _z(i,t,e){i&&(t.fields&&i.setFields(t.fields,e),i.parseNewData(t.values,t.parser))}var Qo;(function(i){i[i.copyDataView=-10]="copyDataView",i[i.treemapFilter=-8]="treemapFilter",i[i.treemapFlatten=-7]="treemapFlatten",i[i.dotObjFlat=-7]="dotObjFlat",i[i.linkDotInfo=-7]="linkDotInfo",i[i.sankeyLayout=-7]="sankeyLayout",i[i.dataZoomFilter=-6]="dataZoomFilter",i[i.legendFilter=-5]="legendFilter"})(Qo||(Qo={}));var ui;(function(i){i.appear="appear",i.disappear="disappear",i.enter="enter",i.update="update",i.state="state",i.exit="exit",i.normal="normal",i.none="none"})(ui||(ui={}));var fd;(function(i){i.before="before",i.layouting="layouting",i.reevaluate="reevaluate",i.after="after"})(fd||(fd={}));const rUt=["line","area","trail"];function sUt(i){return rUt.includes(i)}function aUt(i,t){return i==="monotone"?t==="horizontal"?"monotoneY":"monotoneX":i}function am(i,t,e){const n=new Map;if(!i||i.length===0)return{keys:[],data:n};if(!t)return n.set(iG,i.slice()),{keys:[iG],data:n};if(i.length===1){const s=t(i[0],0);return n.set(s,[i[0]]),{keys:[s],data:n}}const r=new Set;return i.forEach((s,a)=>{var o;const l=t(s,a),u=(o=n.get(l))!==null&&o!==void 0?o:[];u.push(s),n.set(l,u),r.add(l)}),{keys:Array.from(r),data:n}}const aG=(i,t,e={})=>(i&&Object.keys(i).forEach(n=>{e[n]=i[n](t)}),e);function oUt(i){switch(i){case wn["desktop-browser"]:case wn["mobile-browser"]:return"browser";case wn.node:case wn.worker:return"node";case wn.miniApp:case wn["desktop-miniApp"]:return"feishu";case wn.lynx:return"lynx";case wn.wx:return"wx";case wn.tt:return"tt";case wn.harmony:return"harmony"}return"browser"}function Ac(i,t,e,n,r){const s=a=>{if(!n&&a&&(!e||e(a))){const o=t.call(null,a);if(r&&o)return o}if(a.type==="group"){const o=a.getMarks();if(o)for(let l=0;l<o.length;l++){const u=s(o[l]);if(u&&r)return u}}if(n&&a&&(!e||e(a))){const o=t.call(null,a);if(o&&r)return o}};return s(i)}function oG(i){const t=[];return i.forEach(e=>{Ac(e,n=>{n.type!=="group"&&n.type!=="component"&&t.push(n)})}),t}function lG(i,t,e,n){const r=am(i,u=>e(u)),s=am(t,u=>n(u));let a=i,o=t;const l=[];return s.keys.forEach(u=>{if(!N(u)){const c=r.data.get(u),h=s.data.get(u);c&&h&&(l.push({prev:c,next:h}),a=a.filter(d=>!c.includes(d)),o=o.filter(d=>!h.includes(d)))}}),{prev:a,next:o,update:l}}function lUt(i,t,e){const n={enter:[],exit:[],update:[]};let r=[],s=[];i.forEach(c=>{e.morph&&c.getMarkConfig().morph||e.morphAll||e.reuse?r.push(c):n.exit.push({prev:[c]})}),t.forEach(c=>{e.morph&&c.getMarkConfig().morph||e.morphAll||e.reuse?s.push(c):n.enter.push({next:[c]})});const a=lG(r,s,c=>c.getMarkConfig().morphKey,c=>c.getMarkConfig().morphKey);r=a.prev,s=a.next,n.update=n.update.concat(a.update);const o=lG(r,s,c=>`${c.getUserId()}`,c=>`${c.getUserId()}`);r=o.prev,s=o.next,n.update=n.update.concat(o.update);const l=am(r,c=>{var h,d;return(d=(h=c.group)===null||h===void 0?void 0:h.id)===null||d===void 0?void 0:d.call(h)}),u=am(s,c=>{var h,d;return(d=(h=c.group)===null||h===void 0?void 0:h.id)===null||d===void 0?void 0:d.call(h)});return Object.keys(u).forEach(c=>{const h=l.data.get(c),d=u.data.get(c);if(h&&d){for(let f=0;f<Math.max(h.length,d.length);f+=1){const p=h[f],g=d[f];p&&g?n.update.push({prev:[p],next:[g]}):p?n.exit.push({prev:[p]}):g&&n.enter.push({next:[g]})}r=r.filter(f=>!h.includes(f)),s=s.filter(f=>!d.includes(f))}}),r.forEach(c=>n.exit.push({prev:[c]})),s.forEach(c=>n.enter.push({next:[c]})),n}class uUt{getRootGroup(){return this._rootGroup}constructor(t,e){this._count=0,this._rootMarks=[],this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this.isInited=!1,this._released=!1,this._compileChart=null,this.handleLayoutEnd=()=>{var n,r;(r=(n=this._compileChart)===null||n===void 0?void 0:n.getEvent())===null||r===void 0||r.emit(Tt.afterMarkLayoutEnd,{chart:this._compileChart})},this.handleStageRender=()=>{var n,r;(r=(n=this._compileChart)===null||n===void 0?void 0:n.getEvent())===null||r===void 0||r.emit(Tt.afterRender,{chart:this._compileChart})},this._handleAfterNextRender=()=>{var n,r,s,a;this._stage&&!this._option.disableDirtyBounds&&this._stage.enableDirtyBounds(),this._compileChart&&((n=this._compileChart.getEvent())===null||n===void 0||n.emit(Tt.renderFinished,{chart:this._compileChart,vchart:(r=this._compileChart.getOption())===null||r===void 0?void 0:r.globalInstance})),(a=(s=this._option.performanceHook)===null||s===void 0?void 0:s.afterVRenderDraw)===null||a===void 0||a.call(s,this._compileChart.getOption().globalInstance)},this.handleProgressiveFrame=()=>{this._progressiveMarks.length&&this._progressiveMarks.forEach(n=>{n.isDoingProgressive()&&n.renderProgressive()}),this.doPreProgressive()},this._container=t,this._option=e}getChart(){return this._compileChart}getCanvas(){var t;return(t=this._stage)===null||t===void 0?void 0:t.window.getNativeHandler().nativeCanvas}getStage(){return this._stage}initView(){var t,e,n,r;if(this._released||(this.isInited=!0,this._stage))return;const{autoRefreshDpr:s,dpr:a,mode:o,modeParams:l,gestureConfig:u,interactive:c,clickInterval:h,autoPreventDefault:d,background:f}=this._option;Qt.setEnv(oUt(o),l??{}),this._stage=(t=this._option.stage)!==null&&t!==void 0?t:new xFt(Object.assign({background:f,width:this._width,height:this._height,container:(e=this._container.dom)!==null&&e!==void 0?e:null,canvas:(n=this._container.canvas)!==null&&n!==void 0?n:null,dpr:a,viewBox:this._option.viewBox,canvasControled:this._option.canvasControled,beforeRender:m=>{var _,v,y;(_=this._compileChart)===null||_===void 0||_.onBeforeRender(),(y=(v=this._option).beforeRender)===null||y===void 0||y.call(v,m)},afterRender:this._option.afterRender,disableDirtyBounds:!0,autoRender:!0,ticker:this._option.ticker,pluginList:this._option.pluginList,enableHtmlAttribute:this._option.enableHtmlAttribute,optimize:this._option.optimize,supportsTouchEvents:this._option.supportsTouchEvents,supportsPointerEvents:this._option.supportsPointerEvents,event:{clickInterval:h,autoPreventDefault:d},ReactDOM:this._option.ReactDOM,autoRefresh:L(s)?s:!L(a)},(r=this._option.renderHooks)!==null&&r!==void 0?r:{})),this._stage.enableIncrementalAutoRender(),this._stage.setTheme({symbol:{shape:"circle",size:8},text:{fontSize:14,fill:"#000000"}});const p=Uw({x:0,y:0,width:this._width,height:this._height});p.name="root",this._stage.defaultLayer.appendChild(p),this._rootGroup=p;const g=(L(u)?u:uh(o))&&c!==!1&&z.getStageEventPlugin("gesture");g&&(this._gestureController=new g(this._stage,ee(u)?u:{})),this._setCanvasStyle(),this.getStage().hooks.afterRender.tap("chart-event",this.handleStageRender),c!==!1&&this._viewListeners.forEach(m=>{})}getLayoutState(){return this._layoutState}updateLayoutTag(){this._layoutState=fd.before}_setCanvasStyle(){if(this._stage&&this._container.dom&&!Ht(this._container.dom)){this._container.dom.style.display="block",this._container.dom.style.position="relative";const t=this.getCanvas();t&&(t.style.display="block")}}compile(t,e){if(this._released)return;const{chart:n}=t;this._compileChart=n,this.initView(),this._stage&&(e?.actionSource!=="render"&&this._cachedMarks&&(this.reuseOrMorphing(e.morphConfig),this._cachedMarks=null),n.compile(),n.afterCompile())}clearNextRender(){return!!this._nextRafId&&(Qt.getSpecifiedCancelAnimationFrame(10)(this._nextRafId),this._nextRafId=null,!0)}clear(t){const{chart:e}=t;this.clearNextRender(),e.clear()}renderNextTick(t){this._released||(this._nextRafId&&this.clearNextRender(),this._nextRafId=Qt.getSpecifiedRequestAnimationFrame(10)(()=>{this._nextRafId=null,this.render(t)}))}_commitedAll(){return this._rootMarks.some(t=>Ac(t,e=>e.commit()))}_hasCommitedMark(){return this._rootMarks.some(t=>Ac(t,e=>e.isCommited(),null,null,!0))}_doRender(t){var e,n,r,s,a,o;(n=(e=this._option.performanceHook)===null||e===void 0?void 0:e.beforeDoRender)===null||n===void 0||n.call(e,this._compileChart.getOption().globalInstance),this._stage&&(this.runStageAnimation(),this._rootMarks.forEach(l=>{Ac(l,u=>{u.needClear&&(this._progressiveMarks||u.runAnimation(),u.clearExitGraphics(),u.needClear=!1)},null,!0)}),(s=(r=this._option.performanceHook)===null||r===void 0?void 0:r.beforeVRenderDraw)===null||s===void 0||s.call(r,this._compileChart.getOption().globalInstance),this._stage.disableDirtyBounds(),this._stage.afterNextRender(this._handleAfterNextRender),t&&(this._stage.render(),(o=(a=this._option.performanceHook)===null||a===void 0?void 0:a.afterVRenderDraw)===null||o===void 0||o.call(a,this._compileChart.getOption().globalInstance)))}renderMarks(){var t;this._hasCommitedMark()&&(kA(`--- start of renderMarks(${this._count}) ---`),this.clearProgressive(),this._rootMarks.forEach(e=>{e.render()}),this._layoutState===fd.before&&(this._layoutState=fd.layouting,(t=this._compileChart)===null||t===void 0||t.onLayout(),this._layoutState=fd.reevaluate,this._hasCommitedMark()&&this._rootMarks.forEach(e=>{e.render()}),this.handleLayoutEnd()),this.findProgressiveMarks(),this.updateStateAnimation(),this._doRender(!0),this.doPreProgressive(),kA(`--- start of renderMarks(${this._count}) ---`),this._count++)}reuseOrMorphing(t={}){const{reuse:e=!0,morph:n=!0,morphAll:r=!1,animation:s={},enableExitAnimation:a=!1}=t,o=oG(this._rootMarks),{update:l,exit:u}=lUt(this._cachedMarks,o,{morph:n,morphAll:r,reuse:e});l.forEach(({prev:c,next:h})=>{if(e&&c.length===1&&h.length===1&&c[0].type===h[0].type)h[0].reuse(c[0]);else{const d=c.filter(f=>f.getMarkConfig().morph)[0];d&&h.forEach(f=>{f.getMarkConfig().morph&&f.prepareMorph(d)})}}),u.forEach(({prev:c})=>{c.forEach(h=>{h.removeProduct()})})}render(t){if(this._released||(this.clearNextRender(),this.initView(),!this._stage))return;const{width:e,height:n}=this._rootGroup.attribute;this._width===e&&this._height===n||this._rootGroup.setAttributes({width:this._width,height:this._height}),this.renderMarks(),this.clearNextRender()&&this.renderMarks()}setStageAnimationConfig(t){const e={};Object.keys(t).forEach(n=>{const r=t[n];J(r)?e[n]=r.map(s=>{var a;const o=(a=s.options)!==null&&a!==void 0?a:{};return Object.assign(Object.assign({},s),{options:(...l)=>{const u=typeof o=="function"?o(...l):o;return Object.assign({},u)}})}):e[n]=Object.assign({},t[n])}),this._stateAnimationConfig=e}updateStateAnimation(){const t=[];this._rootMarks.forEach(r=>{Ac(r,s=>{t.push(s)})});const e=t.map(r=>r.getAnimationState()),n=e.every(r=>r===ui.appear)?ui.appear:e.every(r=>r===ui.disappear)?ui.disappear:ui.none;this._stage.context||(this._stage.context={}),this._stage.context.animationState=n}runStageAnimation(){var t;const e=(t=this._stage.context)===null||t===void 0?void 0:t.animationState;if(!this._stateAnimationConfig||e===ui.none)return;const n=X(this._stateAnimationConfig[e]).filter(r=>r.type);n.length&&(e===ui.appear?this._stage.stopAnimationState(ui.disappear):e===ui.disappear&&this._stage.stopAnimationState(ui.appear),this._stage.applyAnimationState([e],[{name:e,animation:n}]))}updateViewBox(t,e=!0){if(!this._stage)return;const n=this._stage.viewBox;!t||n&&n.x1===t.x1&&n.y1===t.y1&&n.x2===t.x2&&n.y2===t.y2||this._stage.setViewBox(t,e)}resize(t,e,n=!0){if(!this._stage)return;const r=this._width!==t||this._height!==e;this._width=t,this._height=e,r&&(this._stage.resize(t,e),this._commitedAll(),n&&this.render({morph:!1}))}setBackground(t){this._stage&&(this._stage.background=t)}setSize(t,e){this._width=t,this._height=e,this._stage}setViewBox(t,e=!0){this.updateViewBox(t,e)}addEventListener(t,e,n){var r,s;if(this._option.interactive!==!1){if(t===ze.chart){const a=this.getRootGroup(),o=function(l){var u;const c=l.target;let h=null;c&&(h=L(c.context)?c:q5t(a,c));const d=(u=h?.context)!==null&&u!==void 0?u:{},f=L(d.markId)?d.markId:null,p=L(d.modelId)?d.modelId:null,g=L(d.modelUserId)?d.modelUserId:null,m=L(d.markUserId)?d.markUserId:null,_={event:l,type:e,source:t,item:h,datum:cn(h),markId:f,modelId:p,markUserId:m,modelUserId:g};n.call(null,_)}.bind(this);this._viewListeners.set(n,{type:e,callback:o}),(r=this._stage)===null||r===void 0||r.addEventListener(e,o)}else if(t===ze.window){const a=function(l){const u={event:l,type:e,source:t,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null};n.call(null,u)}.bind(this);this._windowListeners.set(n,{type:e,callback:a});const o=this._getGlobalThis();o?.addEventListener(e,a)}else if(t===ze.canvas){const a=function(l){const u={event:l,type:e,source:t,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null};n.call(null,u)}.bind(this);this._canvasListeners.set(n,{type:e,callback:a});const o=(s=this.getStage())===null||s===void 0?void 0:s.window;o?.addEventListener(e,a)}}}removeEventListener(t,e,n){var r,s,a,o,l;if(this._option.interactive!==!1){if(t===ze.chart){const u=(r=this._viewListeners.get(n))===null||r===void 0?void 0:r.callback;u&&((s=this._stage)===null||s===void 0||s.removeEventListener(e,u)),this._viewListeners.delete(n)}else if(t===ze.window){const u=this._getGlobalThis(),c=(a=this._windowListeners.get(n))===null||a===void 0?void 0:a.callback;c&&u?.removeEventListener(e,c),this._windowListeners.delete(n)}else if(t===ze.canvas){const u=(o=this.getStage())===null||o===void 0?void 0:o.window,c=(l=this._canvasListeners.get(n))===null||l===void 0?void 0:l.callback;u&&c&&u?.removeEventListener(e,c),this._canvasListeners.delete(n)}}}releaseEvent(){const t=this.getStage();t&&t.hooks.afterRender.unTap("chart-event",this.handleStageRender),this._viewListeners.clear(),this._windowListeners.clear(),this._canvasListeners.clear()}release(){var t;this.clearNextRender(),this.releaseEvent(),this._option=this._container=null,this.releaseGrammar(!0),this._stage!==((t=this._option)===null||t===void 0?void 0:t.stage)&&this._stage.release(),this._stage=null,this.isInited=!1,this._compileChart=null,this._released=!0}releaseGrammar(t=!1){t?this._rootMarks.forEach(e=>{Ac(e,n=>{n.removeProduct()},null,!0)}):this._cachedMarks=oG(this._rootMarks),this._rootMarks=[]}addRootMark(t){this._rootMarks.includes(t)||this._rootMarks.push(t)}getRootMarks(){return this._rootMarks}removeRootMark(t){const e=this._rootMarks.findIndex(n=>n===t);return e>=0&&(this._rootMarks.splice(e,1),!0)}_getGlobalThis(){var t;return $l(this._option.mode)?globalThis:(t=this.getStage())===null||t===void 0?void 0:t.window}_combineIncrementalLayers(){this._stage&&ELt(this._stage).then(()=>{this._stage&&this._stage.defaultLayer.combineSubLayer()})}findProgressiveMarks(){const t=[];return this._rootMarks.forEach(e=>{Ac(e,n=>{n.isProgressive()&&t.push(n)})}),t.length?(this._progressiveMarks=t,this._combineIncrementalLayers(),t):(this._progressiveMarks=null,null)}doPreProgressive(){if(this._progressiveMarks&&this._progressiveMarks.some(t=>t.isDoingProgressive())){const t=Qt.getSpecifiedRequestAnimationFrame(10);this._progressiveRafId=t(this.handleProgressiveFrame)}else this._progressiveMarks&&this._progressiveMarks.every(t=>t.canAnimateAfterProgressive())?this._progressiveMarks.forEach(t=>{t.runAnimation()}):this._progressiveMarks&&(this._progressiveMarks=null)}clearProgressive(){this._progressiveRafId&&Qt.getSpecifiedCancelAnimationFrame(10)(this._progressiveRafId),this._progressiveMarks&&this._progressiveMarks.length&&(this._progressiveMarks.forEach(t=>{t.clearProgressive()}),this._progressiveMarks=null)}}var cUt=function(i,t,e,n){return new(e||(e=Promise))(function(r,s){function a(u){try{l(n.next(u))}catch(c){s(c)}}function o(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof e?c:new e(function(h){h(c)})).then(a,o)}l((n=n.apply(i,t||[])).next())})};function hUt(i="vchart",t){const e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("target","_blank"),e.setAttribute("download",`${i}.png`),e.dispatchEvent(new MouseEvent("click"))}function dUt(i){return new Promise(t=>{i.convertToBlob().then(e=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{t(n.result)}})})}function fUt(i,t){var e;return cUt(this,void 0,void 0,function*(){if(!i)return"";try{if(OffscreenCanvas!==void 0&&i instanceof OffscreenCanvas)return dUt(i)}catch(n){((e=t?.onError)!==null&&e!==void 0?e:v0)(`getCanvasDataURL error : ${n.toString()}`)}return i.toDataURL()})}function uc(i){i.crosshair=X(i.crosshair||{}).map(t=>Wt({[i.direction==="horizontal"?"yField":"xField"]:{visible:!0,line:{visible:!0,type:"rect"}}},t))}function qnt(i,t,e){var n;const{width:r,height:s}=i;if(L(r)&&L(s))return{width:r,height:s};let a=e.width,o=e.height;const l=t.container,u=t.canvas;if(l){const{width:c,height:h}=_W(l,e.width,e.height);a=c,o=h}else if(u&&$l(t.mode)){let c;c=Ht(u)?Qt.getElementById(u):u;const{width:h,height:d}=_W(c,e.width,e.height);a=h,o=d}else if(Mh(t.mode)&&(!((n=t.modeParams)===null||n===void 0)&&n.domref)){const c=t.modeParams.domref;a=c.width,o=c.height}return a=r??a,o=s??o,{width:a,height:o}}function cp(i,...t){const e=n=>t.reduce((r,s)=>r||s?.[n],i[n]);return Object.assign(i,{change:e("change"),reCompile:e("reCompile"),reMake:e("reMake"),reRender:e("reRender"),reSize:e("reSize"),reTransformSpec:e("reTransformSpec"),changeTheme:e("changeTheme"),changeBackground:e("changeBackground")}),i}function Znt(i,t){return i==="line"||i==="area"||i==="common"&&t.series.every(e=>e.type==="area"||e.type==="line")?{paddingInner:1,paddingOuter:0}:{paddingOuter:0}}const kc=9,Fs=0;var ti;(function(i){i[i.SeriesGroup=0]="SeriesGroup",i[i.Axis_Grid=50]="Axis_Grid",i[i.CrossHair_Grid=100]="CrossHair_Grid",i[i.Region=450]="Region",i[i.Mark=300]="Mark",i[i.Node=400]="Node",i[i.Axis=100]="Axis",i[i.MarkLine=500]="MarkLine",i[i.MarkArea=100]="MarkArea",i[i.MarkPoint=500]="MarkPoint",i[i.DataZoom=500]="DataZoom",i[i.ScrollBar=500]="ScrollBar",i[i.Player=500]="Player",i[i.Legend=500]="Legend",i[i.CrossHair=500]="CrossHair",i[i.Indicator=500]="Indicator",i[i.Title=500]="Title",i[i.Label=500]="Label",i[i.Brush=500]="Brush",i[i.CustomMark=500]="CustomMark",i[i.Interaction=700]="Interaction"})(ti||(ti={}));var Jo;(function(i){i[i.Indicator=10]="Indicator",i[i.Region=20]="Region",i[i.Axis=30]="Axis",i[i.DataZoom=40]="DataZoom",i[i.Player=40]="Player",i[i.ScrollBar=40]="ScrollBar",i[i.Legend=50]="Legend",i[i.Title=70]="Title",i[i.CustomMark=70]="CustomMark"})(Jo||(Jo={}));var ct;(function(i){i[i.Default=0]="Default",i[i.Theme=1]="Theme",i[i.Chart=2]="Chart",i[i.Base_Series=3]="Base_Series",i[i.Series=4]="Series",i[i.Mark=5]="Mark",i[i.User_Chart=6]="User_Chart",i[i.User_Series=7]="User_Series",i[i.User_Mark=8]="User_Mark",i[i.User_SeriesStyle=9]="User_SeriesStyle",i[i.Built_In=99]="Built_In"})(ct||(ct={}));class Kb{constructor(){this._children=[],this._markNameMap={},this._infoMap=new Map}getMarkNameMap(){return this._markNameMap}addMark(t,e){N(t)||(this._children.push(t),this._markNameMap[t.name]=t,this._infoMap.set(t,ot({},Kb.defaultMarkInfo,e)))}removeMark(t){const e=this._children.findIndex(n=>n.name===t);e>=0&&(this._infoMap.delete(this._children[e]),delete this._markNameMap[t],this._children.splice(e,1))}clear(){this._children=[],this._markNameMap={},this._infoMap.clear()}forEach(t){this._children.forEach(t)}includes(t,e){return this._children.includes(t,e)}get(t){return isNaN(Number(t))?this._markNameMap[t]:this._children[t]}getMarks(){return this._children.slice()}getMarksInType(t){const e=X(t);return this._children.filter(n=>e.includes(n.type))}getMarkInId(t){return this._children.find(e=>e.id===t)}getMarkWithInfo(t){return this._children.find(e=>Object.keys(t).every(n=>t[n]===this._infoMap.get(e)[n]))}}Kb.defaultMarkInfo={};class rT{getOption(){return this._option}constructor(t){this._option=t,this.getCompiler=this._option.getCompiler}getStage(){var t;return(t=this.getCompiler())===null||t===void 0?void 0:t.getStage()}release(){this._option=null,this.getCompiler=null}}class sT{constructor(t){this._option=t,this.type=t.type}_initTheme(t,e){return this._theme=this.getTheme(t,e),this._mergeThemeToSpec(t,e)}getTheme(t,e){}transformSpec(t,e,n){this._transformSpecBeforeMergingTheme(t,e,n);const r=this._initTheme(t,e);return this._transformSpecAfterMergingTheme(r.spec,e,n),r}_transformSpecBeforeMergingTheme(t,e,n){}_transformSpecAfterMergingTheme(t,e,n){}_mergeThemeToSpec(t,e){const n=this._theme;if(this._shouldMergeThemeToSpec()){const r=this._getDefaultSpecFromChart(e),s=a=>Wt({},n,r,a);return J(t)?{spec:t.map(a=>s(a)),theme:n}:{spec:s(t),theme:n}}return{spec:t,theme:n}}_shouldMergeThemeToSpec(){return!0}_getDefaultSpecFromChart(t){}}var pUt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class vz extends rT{getSpec(){return this._spec||{}}getSpecPath(){var t;return(t=this._option)===null||t===void 0?void 0:t.specPath}getSpecInfoPath(){var t,e,n;return(e=(t=this._option)===null||t===void 0?void 0:t.specInfoPath)!==null&&e!==void 0?e:(n=this._option)===null||n===void 0?void 0:n.specPath}getData(){return this._data}get layout(){return this._layout}getOption(){return this._option}getMarks(){var t,e;return(e=(t=this._marks)===null||t===void 0?void 0:t.getMarks())!==null&&e!==void 0?e:[]}getMarkNameMap(){var t;return(t=this._marks)===null||t===void 0?void 0:t.getMarkNameMap()}getMarkSet(){return this._marks}getChart(){return this._option.getChart()}get _theme(){var t;return(t=this.getSpecInfo())===null||t===void 0?void 0:t.theme}constructor(t,e){var n;super(e),this.transformerConstructor=sT,this.type="null",this.modelType="null",this.userId=void 0,this._data=null,this._layout=null,this.specKey="",this._marks=new Kb,this._lastLayoutRect=null,this.id=Fm(),this.userId=t.id,this._spec=t,this.effect={},this.event=new gz(e.eventDispatcher,e.mode),(n=e.map)===null||n===void 0||n.set(this.id,this)}_releaseEvent(){this.event.release()}created(){this.setAttrFromSpec()}init(t){}afterInit(){}getVisible(){var t;return((t=this._spec)===null||t===void 0?void 0:t.visible)!==!1}onLayoutStart(t,e){var n;(n=this._layout)===null||n===void 0||n.onLayoutStart(t,e)}onLayoutEnd(){var t;(t=this._layout)===null||t===void 0||t.onLayoutEnd(),this.getMarks().forEach(e=>e.commit(!1,!0))}onEvaluateEnd(t){}onBeforeRender(){}onDataUpdate(){}beforeRelease(){}clear(){this.getMarks().forEach(t=>{var e;return(e=t.clear)===null||e===void 0?void 0:e.call(t)})}release(){var t;this._releaseEvent(),this._spec=void 0,this.getMarks().forEach(e=>e.release()),(t=this._data)===null||t===void 0||t.release(),this._data=null,this._marks.clear(),super.release()}updateSpec(t){var e;const n=this._compareSpec(t,this._spec);return(n.reRender||n.reMake||n.reCompile)&&((e=this._layout)===null||e===void 0||e.setWillLayoutTag()),this._spec=t,n}_compareSpec(t,e){return{change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1}}reInit(t){t&&(this._spec=t),this.setAttrFromSpec()}updateLayoutAttribute(){}setAttrFromSpec(){var t;(t=this._layout)===null||t===void 0||t.setAttrFromSpec(this._spec,this._option.getChartViewRect())}_convertMarkStyle(t){return Object.assign({},t)}setMarkStyle(t,e,n,r){L(t)&&L(e)&&t.setStyle(this._convertMarkStyle(e),n,r)}initMarkStyleWithSpec(t,e){if(!L(t)||!L(e))return;const{style:n,state:r}=e,s=Object.assign({},e);n&&(s.style=this._convertMarkStyle(n)),r&&(s.state={},Object.keys(r).forEach(a=>{s.state[a]=this._convertMarkStyle(r[a])})),t.initStyleWithSpec(s)}stateKeyToSignalName(t,e){let n=`${zt}_${this.modelType}_${this.type}_${this.id}_${t}`;return e&&(n+=`_${e}`),n}compileData(){var t;(t=this._data)===null||t===void 0||t.compile()}compileMarks(t){this.getMarks().forEach(e=>{e.compile({group:t})})}_createMark(t,e={},n){const{type:r,name:s}=t,{parent:a}=e,o=pUt(e,["parent"]),l=z.createMark(r,s,Object.assign({model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._option.globalScale},o));return a?a.addMark(l):this.getCompiler().addRootMark(l),l&&(l.created(),n&&l.setMarkConfig(n)),l}_getDataIdKey(){}getColorScheme(){var t,e;return(e=(t=this._option).getTheme)===null||e===void 0?void 0:e.call(t,"colorScheme")}getSpecInfo(){var t,e,n;const r=(n=(e=(t=this._option).getSpecInfo)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{};return R5t(r,this.getSpecInfoPath())}getSpecIndex(){const t=this.getSpecPath();if(!t?.length)return 0;const e=Number(t[t.length-1]);return isNaN(e)?0:e}updateAnimateStateCallback(t){this._aniamtionStateCallback=t}getAnimationStateCallback(){return this._aniamtionStateCallback}}class gUt{getSpec(){return this._spec||{}}getLayoutStartPoint(){return this._layoutStartPoint}get layoutRectLevelMap(){return this._layoutRectLevelMap}get minWidth(){return this._minWidth}set minWidth(t){this._minWidth=t}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth=t}get minHeight(){return this._minHeight}set minHeight(t){this._minHeight=t}get maxHeight(){return this._maxHeight}set maxHeight(t){this._maxHeight=t}get lastComputeRect(){return this._lastComputeRect}getLastComputeOutBounds(){return this._lastComputeOutBounds}get layoutOrient(){return this._layoutOrient}set layoutOrient(t){this._layoutOrient=t}get model(){return this._model}get type(){return this._model.type}get willLayoutTag(){return this._willLayoutTag}constructor(t,e){var n;this.layoutClip=!1,this.autoIndent=!1,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:0,height:0},this._layoutRectLevelMap={width:Fs,height:Fs},this._minWidth=null,this._maxWidth=null,this._minHeight=null,this._maxHeight=null,this._lastComputeRect=null,this._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0},this.getLayoutRect=()=>this._layoutRect,this.layoutType="normal",this._layoutOrient="left",this.layoutPaddingLeft=0,this.layoutPaddingTop=0,this.layoutPaddingRight=0,this.layoutPaddingBottom=0,this.layoutOffsetX=0,this.layoutOffsetY=0,this.layoutLevel=Jo.Region,this._willLayoutTag=!0,this._model=t,this._option=e,this.layoutLevel=e.layoutLevel,this.layoutType=e.layoutType,e.layoutOrient&&(this.layoutOrient=e.layoutOrient),this._spec=(n=t?.getSpec)===null||n===void 0?void 0:n.call(t)}_setLayoutAttributeFromSpec(t,e){var n,r,s,a;if(this._spec&&this._spec.visible!==!1){const o=Yl(t.padding);let l=Lnt(o,e,e);this._option.transformLayoutPadding&&(l=this._option.transformLayoutPadding(l)),this.layoutPaddingLeft=l.left,this.layoutPaddingRight=l.right,this.layoutPaddingTop=l.top,this.layoutPaddingBottom=l.bottom,this._minHeight=N(t.minHeight)?(n=this._minHeight)!==null&&n!==void 0?n:null:en(t.minHeight,e.height,e),this._maxHeight=N(t.maxHeight)?(r=this._maxHeight)!==null&&r!==void 0?r:null:en(t.maxHeight,e.height,e),this._minWidth=N(t.minWidth)?(s=this._minWidth)!==null&&s!==void 0?s:null:en(t.minWidth,e.width,e),this._maxWidth=N(t.maxWidth)?(a=this._maxWidth)!==null&&a!==void 0?a:null:en(t.maxWidth,e.width,e),t.width&&this.setLayoutRect({width:en(t.width,e.width,e)},{width:kc}),t.height&&this.setLayoutRect({height:en(t.height,e.height,e)},{height:kc}),N(t.offsetX)||(this.layoutOffsetX=en(t.offsetX,e.width,e)),N(t.offsetY)||(this.layoutOffsetY=en(t.offsetY,e.height,e)),t.alignSelf&&(this.alignSelf=t.alignSelf)}}setAttrFromSpec(t,e){var n,r,s,a;this._spec=t,this.layoutType=(n=t.layoutType)!==null&&n!==void 0?n:this.layoutType,this.layoutLevel=(r=t.layoutLevel)!==null&&r!==void 0?r:this.layoutLevel,this.layoutOrient=(s=t.orient)!==null&&s!==void 0?s:this.layoutOrient,this._setLayoutAttributeFromSpec(t,e),this.layoutClip=(a=t.clip)!==null&&a!==void 0?a:this.layoutClip}onLayoutStart(t,e){this._setLayoutAttributeFromSpec(this._spec,e)}onLayoutEnd(){}_getAbsoluteSpecValue(t){const e={top:null,bottom:null,left:null,right:null};return["top","bottom","left","right"].forEach(n=>{N(this._spec[n])||(e[n]=en(this._spec[n],n==="top"||n==="bottom"?t.height:t.width,t))}),e}absoluteLayoutInRect(t){const{top:e,bottom:n,left:r,right:s}=this._getAbsoluteSpecValue(t),a={width:t.width-this.layoutPaddingLeft-this.layoutPaddingRight,height:t.height-this.layoutPaddingTop-this.layoutPaddingBottom};N(r)||(a.width-=r),N(s)||(a.width-=s),N(e)||(a.height-=e),N(n)||(a.height-=n),this.setLayoutRect(a);const{width:o,height:l}=this.computeBoundsInRect(this.getLayoutRect());this.setLayoutRect({width:o,height:l});const u={x:t.x,y:t.y};this._spec.center===!0?(u.x=t.x+.5*t.width-.5*o,u.y=t.y+.5*t.height-.5*l):(N(r)?N(s)||(u.x=t.x+t.width-this.layoutPaddingRight-s-o):u.x=t.x+r+this.layoutPaddingLeft,N(e)?N(n)||(u.y=t.y+t.height-this.layoutPaddingBottom-n-l):u.y=t.y+e+this.layoutPaddingTop),this.setLayoutStartPosition(u)}setLayoutStartPosition(t){var e,n;this._option.transformLayoutPosition&&(t=this._option.transformLayoutPosition(t)),et(t.x)&&(this._layoutStartPoint.x=t.x),et(t.y)&&(this._layoutStartPoint.y=t.y),(n=(e=this._model).afterSetLayoutStartPoint)===null||n===void 0||n.call(e,this._layoutStartPoint)}setLayoutRect({width:t,height:e},n){var r,s,a,o;et(t)&&((r=n?.width)!==null&&r!==void 0?r:Fs)>=this._layoutRectLevelMap.width&&(this._layoutRect.width=t,this._layoutRectLevelMap.width=(s=n?.width)!==null&&s!==void 0?s:Fs),et(e)&&((a=n?.height)!==null&&a!==void 0?a:Fs)>=this._layoutRectLevelMap.height&&(this._layoutRect.height=e,this._layoutRectLevelMap.height=(o=n?.height)!==null&&o!==void 0?o:Fs),this.setRectInSpec(this._layoutRect)}getLayout(){return{x:this._layoutStartPoint.x,y:this._layoutStartPoint.y,width:this._layoutRect.width,height:this._layoutRect.height}}mergeLayoutRect({width:t,height:e}){const n={width:t,height:e};return this._layoutRectLevelMap.width>Fs&&(n.width=this._layoutRect.width),this._layoutRectLevelMap.height>Fs&&(n.height=this._layoutRect.height),n}getOrientPosAttribute(){return this._layoutOrient==="bottom"||this._layoutOrient==="top"?"x":"y"}getOrientSizeAttribute(){return this._layoutOrient==="bottom"||this._layoutOrient==="top"?"width":"height"}changeBoundsBySetting(t){return this._layoutRectLevelMap.width>Fs&&(t.x2=t.x1+this._layoutRect.width),this._layoutRectLevelMap.height>Fs&&(t.y2=t.y1+this._layoutRect.height),t.x1-=this._layoutStartPoint.x,t.x2-=this._layoutStartPoint.x,t.y1-=this._layoutStartPoint.y,t.y2-=this._layoutStartPoint.y,t}setRectInSpec(t){const e=Object.assign({},t);return this._layoutRectLevelMap.width<kc?(N(this._minWidth)||(e.width=Math.max(e.width,this._minWidth)),N(this._maxWidth)||(e.width=Math.min(e.width,this._maxWidth))):e.width=this._layoutRect.width,this._layoutRectLevelMap.height<kc?(N(this._minHeight)||(e.height=Math.max(e.height,this._minHeight)),N(this._maxHeight)||(e.height=Math.min(e.height,this._maxHeight))):e.height=this._layoutRect.height,e}computeBoundsInRect(t){if(this._lastComputeRect=t,!(this.layoutType!=="region-relative"&&this.layoutType!=="region-relative-overlap"||(this._layoutRectLevelMap.width!==kc||this.layoutOrient!=="left"&&this.layoutOrient!=="right")&&(this._layoutRectLevelMap.height!==kc||this.layoutOrient!=="bottom"&&this.layoutOrient!=="top")))return this._layoutRect;const e=Object.assign({},this._model.getBoundsInRect(this.setRectInSpec(t),t));this.changeBoundsBySetting(e),this.autoIndent&&e.x2-e.x1>0&&e.y2-e.y1>0&&(this._lastComputeOutBounds.x1=Math.ceil(-e.x1),this._lastComputeOutBounds.x2=Math.ceil(e.x2-t.width),this._lastComputeOutBounds.y1=Math.ceil(-e.y1),this._lastComputeOutBounds.y2=Math.ceil(e.y2-t.height));let n=this.setRectInSpec(w5t(e,t));return this._option.transformLayoutRect&&(n=this._option.transformLayoutRect(n)),n}getModelId(){return this._model.id}getModelVisible(){return this._model.getVisible()}setWillLayoutTag(){this._willLayoutTag=!0}clearWillLayoutTag(){this._willLayoutTag=!1}}class Qnt extends vz{constructor(){super(...arguments),this.layoutType="normal",this.layoutLevel=0,this.layoutZIndex=0,this._forceLayoutTag=!1,this._layout=null,this._orient=null,this._layoutRect={width:0,height:0},this._layoutStartPos={x:0,y:0},this._isLayout=!0,this.getGraphicBounds=()=>this._layout?{x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}:{x1:0,x2:0,y1:0,y2:0},this._transformLayoutRect=null,this._transformLayoutPosition=null,this._transformLayoutPadding=null}get layoutOrient(){return this._orient}set layoutOrient(t){this._orient=t,this._layout&&(this._layout.layoutOrient=t)}initLayout(){this.layoutType!=="none"&&(this._layout=new gUt(this,{layoutType:this.layoutType,layoutLevel:this.layoutLevel,layoutOrient:this._orient,transformLayoutRect:this._transformLayoutRect,transformLayoutPosition:this._transformLayoutPosition,transformLayoutPadding:this._transformLayoutPadding}),this._orient&&this._orient!=="radius"&&this._orient!=="angle"&&this._layout&&(this._layout.layoutOrient=this._orient))}onLayoutStart(t,e){this._isLayout=!0,super.onLayoutStart(t,e)}onLayoutEnd(){super.onLayoutEnd(),this.updateLayoutAttribute();const t=this.getLayoutRect();!this._forceLayoutTag&&Ne(this._lastLayoutRect,t)||(this._lastLayoutRect=Object.assign({},t)),this._forceLayoutTag=!1,this._isLayout=!1}afterSetLayoutStartPoint(t){}_forceLayout(){var t,e;this._isLayout||((t=this._layout)===null||t===void 0||t.setWillLayoutTag(),this._forceLayoutTag=!0,(e=this._option.globalInstance.getChart())===null||e===void 0||e.setLayoutTag(!0))}getLayoutStartPoint(){return this._layout?this._layout.getLayoutStartPoint():this._layoutStartPos}setLayoutStartPosition(t){return this._layout?this._layout.setLayoutStartPosition(t):this._layoutStartPos=ot(this._layoutStartPos,t)}getLayoutRect(){return this._layout?this._layout.getLayoutRect():this._layoutRect}setLayoutRect(t,e){return this._layout?this._layout.setLayoutRect(t):this._lastLayoutRect=ot(this._layoutRect,t)}getLastComputeOutBounds(){var t;return(t=this._layout)===null||t===void 0?void 0:t.getLastComputeOutBounds()}setAttrFromSpec(){var t,e,n,r,s;super.setAttrFromSpec(),this.layoutClip=(t=this._spec.clip)!==null&&t!==void 0?t:this.layoutClip,this.layoutZIndex=(e=this._spec.zIndex)!==null&&e!==void 0?e:this.layoutZIndex,this.layoutType=(n=this._spec.layoutType)!==null&&n!==void 0?n:this.layoutType,this._orient=(r=this._spec.orient)!==null&&r!==void 0?r:this._orient,this.layoutLevel=(s=this._spec.layoutLevel)!==null&&s!==void 0?s:this.layoutLevel}}class Jnt extends sT{_initTheme(t,e){return{spec:t,theme:this._theme}}}let b1=class trt extends Qnt{getMaxWidth(){return this._layout.maxWidth}setMaxWidth(t){this._layout.maxWidth=t}getMaxHeight(){return this._layout.maxHeight}setMaxHeight(t){this._layout.maxHeight=t}getGroupMark(){return this._groupMark}getInteractionMark(){return this._interactionMark}getStackInverse(){return this._spec.stackInverse===!0}getStackSort(){return this._spec.stackSort===!0}constructor(t,e){var n;super(t,e),this.transformerConstructor=Jnt,this.modelType="region",this.specKey="region",this.type=trt.type,this._series=[],this.layoutType="region",this.layoutZIndex=ti.Region,this.seriesDataFilterOver=()=>{this.event.emit(Tt.regionSeriesDataFilterOver,{model:this,chart:this.getChart()}),this._series.forEach(r=>{r.getViewDataFilter()&&r.reTransformViewData()})},this.getBoundsInRect=()=>({x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}),this.userId=t.id,this.coordinate=(n=t.coordinate)!==null&&n!==void 0?n:"cartesian"}_getClipDefaultValue(){var t,e,n,r;const s=this._option.getChart().getSpec(),a=(e=(t=s.dataZoom)===null||t===void 0?void 0:t.some)===null||e===void 0?void 0:e.call(t,l=>{var u;return((u=l.filterMode)!==null&&u!==void 0?u:"filter")==="axis"}),o=(r=(n=s.scrollBar)===null||n===void 0?void 0:n.some)===null||r===void 0?void 0:r.call(n,l=>{var u;return((u=l.filterMode)!==null&&u!==void 0?u:"axis")==="axis"});return!(!a&&!o)||this._layout.layoutClip}created(){var t,e;this.initLayout(),super.created();const n=(t=this._spec.clip)!==null&&t!==void 0?t:this._getClipDefaultValue();this._groupMark=this._createGroupMark("regionGroup",this.userId,this.layoutZIndex),this._spec.roam&&this._groupMark.setMarkConfig({interactive:!0}),this._interactionMark=this._createGroupMark("regionInteractionGroup",((e=this.userId)!==null&&e!==void 0?e:this.type)+"_interaction",ti.Interaction),Lt(this._spec.style)||(this._backgroundMark=this._createMark({type:"rect",name:"regionBackground"},{parent:this._groupMark}),n&&(this._foregroundMark=this._createMark({type:"rect",name:"regionForeground"},{parent:this._groupMark})),[this._backgroundMark,this._foregroundMark].forEach(r=>{r&&(r.created(),this.setMarkStyle(r,{width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height},"normal",ct.Built_In),this._groupMark.addMark(r))}),this._backgroundMark&&this._backgroundMark.setMarkConfig({zIndex:ti.SeriesGroup-1}),this._foregroundMark&&this._foregroundMark.setMarkConfig({zIndex:ti.Mark+1}))}_createGroupMark(t,e,n){var r,s;const a=this._createMark({type:"group",name:t});a.setUserId(e),a.setMarkConfig({zIndex:n});const o=(r=this._spec.clip)!==null&&r!==void 0?r:this._getClipDefaultValue();return this.setMarkStyle(a,{x:()=>this.getLayoutStartPoint().x,y:()=>this.getLayoutStartPoint().y,width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height,clip:o},"normal",ct.Built_In),this.setMarkStyle(a,{cornerRadius:(s=this._spec.style)===null||s===void 0?void 0:s.cornerRadius},"normal",ct.User_Mark),this._marks.addMark(a),a}init(t){super.init(t),this.initMark(),this.initSeriesDataflow()}initMark(){this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}_initBackgroundMarkStyle(){var t,e;this._backgroundMark&&(this.setMarkStyle(this._backgroundMark,Object.assign({fillOpacity:!((t=this._spec.style)===null||t===void 0)&&t.fill?1:0},this._spec.style),"normal",ct.User_Mark),((e=this._spec.clip)!==null&&e!==void 0?e:this._getClipDefaultValue())&&this.setMarkStyle(this._backgroundMark,{strokeOpacity:0},"normal",ct.Built_In))}_initForegroundMarkStyle(){this._foregroundMark&&this.setMarkStyle(this._foregroundMark,Object.assign(Object.assign({},this._spec.style),{fillOpacity:0,pickable:!1}),"normal",ct.User_Mark)}_compareSpec(t,e){const n=super._compareSpec(t,e);return Ne(e?.style,t?.style)||(n.reMake=!0),n}reInit(t){super.reInit(t),this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}addSeries(t){t&&(this._series.includes(t)||this._series.push(t))}removeSeries(t){if(!t)return;const e=this._series.findIndex(n=>n===t);e>=0&&this._series.splice(e,1)}getSeries(t={}){return this._series.filter(e=>{var n,r;return(!t.name||e?.name===t.name)&&(!t.userId||X(t.userId).includes(e.userId))&&(!L(t.specIndex)||X(t.specIndex).includes(e.getSpecIndex()))&&(!t.id||e.id===t.id)&&(!t.type||e.type===t.type)&&(!t.coordinateType||e.coordinate===t.coordinateType)&&(!t.dataName||((r=(n=e.getRawData)===null||n===void 0?void 0:n.call(e))===null||r===void 0?void 0:r.name)===t.dataName)})}getSeriesInName(t){return this.getSeries({name:t})[0]}getSeriesInUserId(t){return this.getSeries({userId:t})[0]}getSeriesInId(t){return this.getSeries({id:t})[0]}getSeriesInType(t){return this.getSeries({type:t})}getSeriesInCoordinateType(t){return this.getSeries({coordinateType:t})}getSeriesInDataName(t){return this.getSeries({dataName:t})}initSeriesDataflow(){const t=this._series.map(e=>{var n;return(n=e.getViewDataFilter())!==null&&n!==void 0?n:e.getViewData()}).filter(e=>!!e);this._option.dataSet.multipleDataViewAddListener(t,"change",this.seriesDataFilterOver)}release(){super.release(),this._series=[]}compileMarks(t){this.getMarks().forEach(e=>{e.compile({group:t,context:{model:this}})})}compile(){this.compileMarks()}onLayoutEnd(){this._series.forEach(t=>t.onLayoutEnd()),super.onLayoutEnd()}};b1.type="region",b1.transformerConstructor=Jnt,b1.specKey="region";function aT(i){const t=[],e=[],n=[];return i.forEach(r=>{N(r.getSpec().position)||r.getSpec().position==="start"?t.push(r):r.getSpec().position==="middle"?e.push(r):r.getSpec().position==="end"&&n.push(r)}),{startItems:t,endItems:n,middleItems:e}}function ert(i,t,e){t?i.forEach(n=>{const r=ke(n),s=r.getLayoutStartPoint().y+r.getLayoutRect().height-n[0].getLayoutStartPoint().y,a=(e-s)/2;n.forEach(o=>{o.setLayoutStartPosition({x:o.getLayoutStartPoint().x,y:o.getLayoutStartPoint().y+a})})}):i.forEach(n=>{const r=ke(n),s=r.getLayoutStartPoint().x+r.getLayoutRect().width-n[0].getLayoutStartPoint().x,a=(e-s)/2;n.forEach(o=>{o.setLayoutStartPosition({x:o.getLayoutStartPoint().x+a,y:o.getLayoutStartPoint().y})})})}function oT(i,t,e,n){let r;i.forEach((s,a)=>{s.length>1&&(r=e[a],s.forEach(o=>{if(!o.alignSelf||o.alignSelf==="start")return;const l=o.getLayoutStartPoint(),u=o.alignSelf==="middle"?.5:1,c=t?r-(o.getLayoutRect().width+o.layoutPaddingLeft+o.layoutPaddingRight):r-(o.getLayoutRect().height+o.layoutPaddingTop+o.layoutPaddingBottom);t?o.setLayoutStartPosition({x:l.x+n*c*u,y:l.y}):o.setLayoutStartPosition({x:l.x,y:l.y+n*c*u})}))})}function bk(i,t,e,n,r,s){if(i.length){let a=0;const o=r==="right",l=o?-1:1;let u=o?t.rightCurrent:t.leftCurrent,c=t.topCurrent;const h=[];let d=[];const f=[];i.forEach(p=>{const{rect:g}=kd(p,t,s),m=g.height+p.layoutPaddingTop+p.layoutPaddingBottom,_=g.width+p.layoutPaddingLeft+p.layoutPaddingRight,v=o?-g.width-p.layoutPaddingRight:p.layoutPaddingLeft;p.setLayoutStartPosition({x:u+p.layoutOffsetX+v,y:c+p.layoutOffsetY+p.layoutPaddingTop}),c+=m,c>e&&d.length?(f.push(a),u+=l*a,a=_,c=t.topCurrent+m,p.setLayoutStartPosition({x:u+p.layoutOffsetX+v,y:t.topCurrent+p.layoutOffsetY+p.layoutPaddingTop}),h.push(d),d=[p]):(a=Math.max(a,_),d.push(p))}),f.push(a),h.push(d),oT(h,!0,f,l),n&&ert(h,!0,e),o?t.rightCurrent=u+l*a:t.leftCurrent=u+l*a}}function irt(i,t,e,n,r){if(i.length){let s=0;const a=n==="right",o=a?-1:1;let l=a?t.rightCurrent:t.leftCurrent,u=t.bottomCurrent;const c=[];let h=[];const d=[];i.forEach(f=>{const{rect:p}=kd(f,t,r),g=p.height+f.layoutPaddingTop+f.layoutPaddingBottom,m=p.width+f.layoutPaddingLeft+f.layoutPaddingRight,_=a?-p.width-f.layoutPaddingRight:f.layoutPaddingLeft;u<g&&h.length?(d.push(s),l+=o*s,s=m,u=t.bottomCurrent,f.setLayoutStartPosition({x:l+f.layoutOffsetX+_,y:u+f.layoutOffsetY-p.height-f.layoutPaddingBottom}),c.push(h),h=[f]):(f.setLayoutStartPosition({x:l+f.layoutOffsetX+_,y:u+f.layoutOffsetY-p.height-f.layoutPaddingBottom}),s=Math.max(s,m),u-=g,h.push(f))}),d.push(s),c.push(h),oT(c,!0,d,o),a?t.rightCurrent=l+o*s:t.leftCurrent=l+o*s}}function xk(i,t,e,n,r,s){if(i.length){const a=r==="top",o=a?1:-1;let l=0,u=t.leftCurrent,c=a?t.topCurrent:t.bottomCurrent;const h=[];let d=[];const f=[];i.forEach(p=>{const{rect:g}=kd(p,t,s),m=g.height+p.layoutPaddingTop+p.layoutPaddingBottom,_=g.width+p.layoutPaddingLeft+p.layoutPaddingRight,v=a?p.layoutPaddingTop:-g.height-p.layoutPaddingBottom;p.setLayoutStartPosition({x:u+p.layoutOffsetX+p.layoutPaddingLeft,y:c+p.layoutOffsetY+v}),u+=_,u>e&&d.length?(f.push(l),u=t.leftCurrent+_,c+=o*l,l=m,p.setLayoutStartPosition({x:t.leftCurrent+p.layoutOffsetX+p.layoutPaddingLeft,y:c+p.layoutOffsetY+v}),h.push(d),d=[p]):(l=Math.max(l,m),d.push(p))}),f.push(l),h.push(d),oT(h,!1,f,o),n&&ert(h,!1,e),a?t.topCurrent=c+o*l:t.bottomCurrent=c+o*l}}function nrt(i,t,e,n,r){if(i.length){const s=n==="top",a=s?1:-1;let o=0,l=t.rightCurrent,u=s?t.topCurrent:t.bottomCurrent;const c=[];let h=[];const d=[];i.forEach(f=>{const{rect:p}=kd(f,t,r),g=p.height+f.layoutPaddingTop+f.layoutPaddingBottom,m=p.width+f.layoutPaddingLeft+f.layoutPaddingRight,_=s?f.layoutPaddingTop:-p.height-f.layoutPaddingBottom;l<m&&h.length?(l=t.rightCurrent,u+=a*o,o=g,f.setLayoutStartPosition({x:t.rightCurrent+f.layoutOffsetX-p.width-f.layoutPaddingRight,y:u+f.layoutOffsetY+_}),c.push(h),h=[f]):(h.push(f),f.setLayoutStartPosition({x:l+f.layoutOffsetX-p.width-f.layoutPaddingRight,y:u+f.layoutOffsetY+_}),o=Math.max(o,g),l-=m)}),d.push(o),c.push(h),oT(c,!1,d,a),s?t.topCurrent=u+a*o:t.bottomCurrent=u+a*o}}function mUt(i,t,e,n){const{startItems:r,middleItems:s,endItems:a}=aT(i);r.length&&bk(r,t,e,!1,"left",n),s.length&&bk(s,t,e,!0,"left",n),a.length&&irt(a,t,e,"left",n)}function _Ut(i,t,e,n){const{startItems:r,middleItems:s,endItems:a}=aT(i);r.length&&bk(r,t,e,!1,"right",n),s.length&&bk(s,t,e,!0,"right",n),a.length&&irt(a,t,e,"right",n)}function vUt(i,t,e,n){const{startItems:r,middleItems:s,endItems:a}=aT(i);r.length&&xk(r,t,e,!1,"top",n),s.length&&xk(s,t,e,!0,"top",n),a.length&&nrt(a,t,e,"top",n)}function yUt(i,t,e,n){const{startItems:r,middleItems:s,endItems:a}=aT(i);r.length&&xk(r,t,e,!1,"bottom",n),s.length&&xk(s,t,e,!0,"bottom",n),a.length&&nrt(a,t,e,"bottom",n)}function kd(i,t,e,n=!0){let r,s,a="recomputeHeight",o="recomputeWidth",l="width";i.layoutOrient!=="top"&&i.layoutOrient!=="bottom"||(a="recomputeWidth",o="recomputeHeight",l="height");let u=!(!i.willLayoutTag&&e[a]===!1);if(u){const c=Object.assign({},i.getLayoutRect()),h=i.lastComputeRect;r=t.getItemComputeLayoutRect(i),!i.willLayoutTag&&Ne(r,h)?(u=!1,s=i.getLayoutRect()):(s=i.computeBoundsInRect(r),Ne(c[l],s[l])?u=!1:(n&&i.setLayoutRect(s),e[o]=!0))}else r=i.getLastComputeOutBounds(),s=i.getLayoutRect();return{layoutRect:r,rect:s,layoutTag:u}}let yz=class{constructor(t,e){this.leftCurrent=0,this.topCurrent=0,this.rightCurrent=0,this.bottomCurrent=0,this.recomputeWidth=!1,this.recomputeHeight=!1,this._onError=e?.onError}_layoutInit(t,e,n,r){this._chartLayoutRect=n,this._chartViewBox=r,this.leftCurrent=n.x,this.topCurrent=n.y,this.rightCurrent=n.x+n.width,this.bottomCurrent=n.height+n.y,this.recomputeWidth=!1,this.recomputeHeight=!1,e.sort((s,a)=>a.layoutLevel-s.layoutLevel)}_layoutNormalItems(t,e){this.layoutNormalInlineItems(t.filter(n=>n.layoutType==="normal-inline"),e),this.layoutNormalItems(t.filter(n=>n.layoutType==="normal"),e)}_groupItems(t){const e=t.filter(o=>o.layoutType==="region"),n=t.filter(o=>o.layoutType==="region-relative"),r=t.filter(o=>o.layoutType==="region-relative-overlap"),s=n.concat(r),a={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}};return r.forEach(o=>{a[o.layoutOrient].items.push(o)}),{regionItems:e,relativeItems:n,relativeOverlapItems:r,allRelatives:s,overlapItems:a}}layoutItems(t,e,n,r){var s,a,o;this._layoutInit(t,e,n,r);const l={recomputeWidth:this.recomputeWidth,recomputeHeight:this.recomputeHeight},u=(o=(a=(s=t?.getSpec())===null||s===void 0?void 0:s.layout)===null||a===void 0?void 0:a.secondLayoutLeftRight)!==null&&o!==void 0&&o;this._layoutNormalItems(e,l);const c={left:this.leftCurrent,top:this.topCurrent,right:this.rightCurrent,bottom:this.bottomCurrent},{regionItems:h,relativeItems:d,relativeOverlapItems:f,allRelatives:p,overlapItems:g}=this._groupItems(e);this.layoutRegionItems(h,d,f,g,l,u),this._processAutoIndent(h,d,f,g,p,c,l,u),this.layoutAbsoluteItems(e.filter(m=>m.layoutType==="absolute")),e.forEach(m=>{m.clearWillLayoutTag()})}_processAutoIndent(t,e,n,r={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}},s,a,o,l=!1){if(s.some(u=>u.autoIndent)){const{top:u,bottom:c,left:h,right:d}=this._checkAutoIndent(s,a);(u||c||h||d)&&(this.topCurrent=a.top+u,this.bottomCurrent=a.bottom-c,this.leftCurrent=a.left+h,this.rightCurrent=a.right-d,this.layoutRegionItems(t,e,n,r,o,l))}}layoutNormalItems(t,e){t.forEach(n=>{const{rect:r}=kd(n,this,e);n.layoutOrient==="left"?(n.setLayoutStartPosition({x:this.leftCurrent+n.layoutOffsetX+n.layoutPaddingLeft,y:this.topCurrent+n.layoutOffsetY+n.layoutPaddingTop}),this.leftCurrent+=r.width+n.layoutPaddingLeft+n.layoutPaddingRight):n.layoutOrient==="top"?(n.setLayoutStartPosition({x:this.leftCurrent+n.layoutOffsetX+n.layoutPaddingLeft,y:this.topCurrent+n.layoutOffsetY+n.layoutPaddingTop}),this.topCurrent+=r.height+n.layoutPaddingTop+n.layoutPaddingBottom):n.layoutOrient==="right"?(n.setLayoutStartPosition({x:this.rightCurrent+n.layoutOffsetX-r.width-n.layoutPaddingRight,y:this.topCurrent+n.layoutOffsetY+n.layoutPaddingTop}),this.rightCurrent-=r.width+n.layoutPaddingLeft+n.layoutPaddingRight):n.layoutOrient==="bottom"&&(n.setLayoutStartPosition({x:this.leftCurrent+n.layoutOffsetX+n.layoutPaddingRight,y:this.bottomCurrent+n.layoutOffsetY-r.height-n.layoutPaddingBottom}),this.bottomCurrent-=r.height+n.layoutPaddingTop+n.layoutPaddingBottom)})}layoutNormalInlineItems(t,e){const n=t.filter(u=>u.layoutOrient==="left"),r=t.filter(u=>u.layoutOrient==="right"),s=t.filter(u=>u.layoutOrient==="top"),a=t.filter(u=>u.layoutOrient==="bottom"),o=this._chartLayoutRect.width+this._chartLayoutRect.x,l=this._chartLayoutRect.height+this._chartLayoutRect.y;return n.length&&mUt(n,this,l,e),s.length&&vUt(s,this,o,e),r.length&&_Ut(r,this,l,e),a.length&&yUt(a,this,o,e),!0}_layoutRelativeOverlap(t,e,n){e.items.forEach(r=>{const{rect:s}=kd(r,this,n);e.rect.width=Math.max(s.width+r.layoutPaddingLeft+r.layoutPaddingRight,e.rect.width),e.rect.height=Math.max(s.height+r.layoutPaddingTop+r.layoutPaddingBottom,e.rect.height)}),e.items.forEach(r=>{Ne(r.getLayoutRect(),e.rect)||r.setLayoutRect(e.rect),t==="left"?r.setLayoutStartPosition({x:this.leftCurrent+r.layoutOffsetX}):t==="right"?r.setLayoutStartPosition({x:this.rightCurrent-e.rect.width+r.layoutOffsetX}):t==="top"?r.setLayoutStartPosition({x:this.topCurrent+r.layoutOffsetY}):r.setLayoutStartPosition({x:this.bottomCurrent-e.rect.height+r.layoutOffsetY})}),t==="left"?this.leftCurrent+=e.rect.width:t==="right"?this.rightCurrent-=e.rect.width:t==="top"?this.topCurrent+=e.rect.height:this.bottomCurrent-=e.rect.height}_layoutRelativeItem(t,e){const{rect:n}=kd(t,this,e,!1);t.layoutOrient==="left"||t.layoutOrient==="right"?t.setLayoutRect({width:n.width}):t.setLayoutRect({height:n.height}),t.layoutOrient==="left"?(t.setLayoutStartPosition({x:this.leftCurrent+t.layoutOffsetX+t.layoutPaddingLeft}),this.leftCurrent+=n.width+t.layoutPaddingLeft+t.layoutPaddingRight):t.layoutOrient==="right"?(this.rightCurrent-=n.width+t.layoutPaddingLeft+t.layoutPaddingRight,t.setLayoutStartPosition({x:this.rightCurrent+t.layoutOffsetX+t.layoutPaddingLeft})):t.layoutOrient==="top"?(t.setLayoutStartPosition({y:this.topCurrent+t.layoutOffsetY+t.layoutPaddingTop}),this.topCurrent+=n.height+t.layoutPaddingTop+t.layoutPaddingBottom):t.layoutOrient==="bottom"&&(this.bottomCurrent-=n.height+t.layoutPaddingTop+t.layoutPaddingBottom,t.setLayoutStartPosition({y:this.bottomCurrent+t.layoutOffsetY+t.layoutPaddingTop}))}_layoutRegionItem(t,e,n){const r=Math.max(Math.min(e,...t.map(a=>{var o;return(o=a.maxWidth)!==null&&o!==void 0?o:Number.MAX_VALUE})),0),s=Math.max(Math.min(n,...t.map(a=>{var o;return(o=a.maxHeight)!==null&&o!==void 0?o:Number.MAX_VALUE})),0);return t.forEach(a=>{const o=r-a.layoutPaddingLeft-a.layoutPaddingRight,l=s-a.layoutPaddingTop-a.layoutPaddingBottom;a.setLayoutRect({width:o,height:l}),a.setLayoutStartPosition({x:this.leftCurrent+a.layoutOffsetX+a.layoutPaddingLeft,y:this.topCurrent+a.layoutOffsetY+a.layoutPaddingTop})}),{regionHeight:s,regionWidth:r}}layoutRegionItems(t,e,n,r={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}},s,a=!1){const o=this.leftCurrent,l=this.rightCurrent;let u=this.rightCurrent-this.leftCurrent,c=this.bottomCurrent-this.topCurrent;e.filter(f=>f.layoutOrient==="left"||f.layoutOrient==="right").forEach(f=>{this._layoutRelativeItem(f,s)}),this._layoutRelativeOverlap("left",r.left,s),this._layoutRelativeOverlap("right",r.right,s),u=this.rightCurrent-this.leftCurrent,e.filter(f=>f.layoutOrient==="top"||f.layoutOrient==="bottom").forEach(f=>{this._layoutRelativeItem(f,s)}),this._layoutRelativeOverlap("top",r.top,s),this._layoutRelativeOverlap("bottom",r.bottom,s),c=this.bottomCurrent-this.topCurrent,a&&(this.leftCurrent=o,this.rightCurrent=l,e.filter(f=>f.layoutOrient==="left"||f.layoutOrient==="right").forEach(f=>{this._layoutRelativeItem(f,s)}),u=this.rightCurrent-this.leftCurrent);const{regionWidth:h,regionHeight:d}=this._layoutRegionItem(t,u,c);e.concat(n).forEach(f=>{if(["left","right"].includes(f.layoutOrient)){const p=this.filterRegionsWithID(t,f.layoutBindRegionID[0]);f.setLayoutRect({height:p.getLayoutRect().height}),f.setLayoutStartPosition({y:p.getLayoutStartPoint().y+f.layoutOffsetY+f.layoutPaddingTop}),f.layoutOrient==="right"&&f.setLayoutStartPosition({x:f.getLayoutStartPoint().x+h-u})}else if(["top","bottom"].includes(f.layoutOrient)){const p=this.filterRegionsWithID(t,f.layoutBindRegionID[0]);f.setLayoutRect({width:p.getLayoutRect().width}),f.setLayoutStartPosition({x:p.getLayoutStartPoint().x+f.layoutOffsetX+f.layoutPaddingLeft}),f.layoutOrient==="bottom"&&f.setLayoutStartPosition({y:f.getLayoutStartPoint().y+d-c})}})}layoutAbsoluteItems(t){t.forEach(e=>{e.willLayoutTag&&e.absoluteLayoutInRect(this._chartLayoutRect)})}filterRegionsWithID(t,e){var n;const r=t.find(s=>s.getModelId()===e);return r||((n=this._onError)!==null&&n!==void 0?n:v0)("can not find target region item, invalid id"),r}getItemComputeLayoutRect(t){return{width:this.rightCurrent-this.leftCurrent-t.layoutPaddingLeft-t.layoutPaddingRight,height:this.bottomCurrent-this.topCurrent-t.layoutPaddingTop-t.layoutPaddingBottom}}_checkAutoIndent(t,e){const n={top:0,left:0,bottom:0,right:0};return t.forEach(r=>{if(!r.getModelVisible()||!r.autoIndent)return;const s=r.layoutOrient==="left"||r.layoutOrient==="right",a=r.getLastComputeOutBounds(),o=this._getOutInLayout(a,r,e);s?(n.top=Math.max(n.top,o.top),n.bottom=Math.max(n.bottom,o.bottom)):(n.left=Math.max(n.left,o.left),n.right=Math.max(n.right,o.right))}),n}_getOutInLayout(t,e,n){const{x:r,y:s}=e.getLayoutStartPoint(),{width:a,height:o}=e.getLayoutRect();return{left:n.left-(r-t.x1),right:r+a+t.x2-n.right,top:n.top-(s-t.y1),bottom:s+o+t.y2-n.bottom}}};yz.type="base";var Kn;(function(i){i.enter="enter",i.update="update",i.exit="exit",i.unChange="unChange"})(Kn||(Kn={}));var bt;(function(i){i.STATE_NORMAL="normal",i.STATE_HOVER="hover",i.STATE_HOVER_REVERSE="hover_reverse",i.STATE_DIMENSION_HOVER="dimension_hover",i.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",i.STATE_SELECTED="selected",i.STATE_SELECTED_REVERSE="selected_reverse",i.STATE_SANKEY_EMPHASIS="selected",i.STATE_SANKEY_EMPHASIS_REVERSE="blur",i.STATE_HIGHLIGHT="highlight",i.STATE_BLUR="blur",i.STATE_ACTIVE="active"})(bt||(bt={}));var uG;(function(i){i.STATE_HOVER_REVERSE="hover_reverse",i.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",i.STATE_SELECTED_REVERSE="selected_reverse"})(uG||(uG={}));const cG=["linear","radial","conical"],bUt={x0:0,y0:0,x1:1,y1:1},xUt={x0:0,y0:0,x1:1,y1:1,r0:0,r1:1},SUt={x:.5,y:.5,startAngle:0,endAngle:2*Math.PI},wUt={linear:bUt,radial:xUt,conical:SUt};function AUt(i,t,e){var n;const r=(n=t[i])===null||n===void 0?void 0:n.style;return kUt(i,r)||it(r)?!0:!(!r?.scale||r.field===e)}function kUt(i,t){return(i==="fill"||i==="stroke")&&t?.gradient&&t?.stops}const rrt={};Object.values(bt).forEach(i=>{rrt[i]=!0});function CUt(i){return!!rrt[i]}bt.STATE_HOVER+"",bt.STATE_HOVER_REVERSE,bt.STATE_SELECTED+"",bt.STATE_SELECTED_REVERSE,bt.STATE_DIMENSION_HOVER+"",bt.STATE_DIMENSION_HOVER_REVERSE;class MUt extends rT{compile(){}getStateMap(){return this._stateMap}_getDefaultStateMap(){return{}}constructor(t){super(t),this.initStateMap()}initStateMap(t){this._stateMap=t??this._getDefaultStateMap()}updateState(t,e){if(t&&(ot(this._stateMap,t),!e))return this.getCompiler().renderNextTick()}}class TUt extends MUt{getStateInfoList(){return this._stateInfoList}constructor(t,e){super(t),this._stateInfoList=[],this._mark=e}_getDefaultStateMap(){return{markUpdateRank:1}}getStateInfo(t){return this._stateInfoList.find(e=>e.stateValue===t)}addStateInfo(t){if(this.getStateInfo(t.stateValue))return;t.level=t.level||0;let e=!0;for(let n=0;n<this._stateInfoList.length;n++){const r=this._stateInfoList[n].level;if(r&&r>t.level){this._stateInfoList.splice(n,0,t),e=!1;break}}e&&this._stateInfoList.push(t)}_clearStateBeforeSet(t){t.datums=null,t.items=null,t.fields=null,t.filter=null}changeStateInfo(t){const e=this.getStateInfo(t.stateValue);if(e){if(t.datums!==void 0&&(this._clearStateBeforeSet(e),e.datums=t.datums,e.datumKeys=t.datumKeys),t.items!==void 0&&(this._clearStateBeforeSet(e),e.items=t.items),t.fields!==void 0)if(this._clearStateBeforeSet(e),t.fields===null)e.fields=t.fields;else{e.fields=e.fields||{};for(const n in t.fields){const r=t.fields[n];e.fields[n]=e.fields[n]||{};const s=e.fields[n];L(r.domain)&&(s.domain=r.domain),L(r.type)&&(s.type=r.type)}}t.filter&&(this._clearStateBeforeSet(e),e.filter=t.filter)}else this.addStateInfo(t)}clearStateInfo(t){t.forEach(e=>{this.getStateInfo(e)&&this.changeStateInfo({stateValue:e,datumKeys:null,datums:null,fields:null,items:null,filter:null,cache:{}})})}_isMultiMark(){return!this._mark||sUt(this._mark.type)}checkOneState(t,e,n){var r;let s=!1,a=!1;if(L(n.datums)&&n.datums.length>0)s=this.checkDatumState(n,e),a=!0;else if(n.items)s=(r=this.checkItemsState(n,t))!==null&&r!==void 0&&r,a=!0;else if(n.fields)s=this.checkFieldsState(n,e,t),a=!0;else if(!s&&n.filter){const o={mark:this._mark,renderNode:t,type:this._mark.type};s=n.filter(e?.[0],o),a=!0}return a?s?"in":"out":"skip"}checkState(t,e){var n;const r=((n=t.context.states)!==null&&n!==void 0?n:[]).filter(s=>CUt(s)).map(s=>[s,10]);for(let s=0;s<this._stateInfoList.length;s++){const a=this._stateInfoList[s],o=this.checkOneState(t,e,a);o!=="skip"&&o==="in"&&r.push([a.stateValue,a.level])}return r.map(s=>s[0])}checkDatumState(t,e){let n=!1;const r=e[0];if(J(t.datums)){const s=this._isMultiMark(),a=t.datumKeys||Object.keys(t.datums[0]).filter(o=>!o.startsWith(zt));n=t.datums.some(o=>s&&J(o?.items)?a.every(l=>{var u,c;return((c=(u=o?.items)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c[l])===r?.[l]}):a.every(l=>o?.[l]===r?.[l]))}else if(ee(t.datums)){const s=t.datumKeys||Object.keys(t.datums).filter(o=>!o.startsWith(zt)),a=this._isMultiMark();n=s.every(o=>{var l,u;return a?((l=t.datums.items)===null||l===void 0?void 0:l[0][o])===r[o]:((u=t.datums)===null||u===void 0?void 0:u[o])===r[o]})}else n=e===t.datums;return n}checkItemsState(t,e){var n;return(n=t.items)===null||n===void 0?void 0:n.includes(e)}checkFieldsState(t,e,n){var r;let s=!0;for(const a in t.fields){const o=t.fields[a],l=o.type,u=o.domain,c=(r=e[0])===null||r===void 0?void 0:r[a];if(Ge(l)&&u.length>1){if(this.checkLinearFieldState(u,a,e,n)){s=!1;break}s=!0}else{if(!u.some(h=>h===c)){s=!1;break}s=!0}}return s}checkLinearFieldState(t,e,n,r){var s;const a=this._isMultiMark()?(s=n[0])===null||s===void 0?void 0:s[e]:n[e];return a<t[0]||a>t[t.length-1]}release(){}}class srt extends rT{constructor(){super(...arguments),this.id=Fm(),this._compiledProductId=null}getProductId(){var t;return(t=this._compiledProductId)!==null&&t!==void 0?t:this.generateProductId()}compile(t){this._compileProduct(t)}setTransform(t){this._transform=t}runTransforms(t,e){if(!t||!t.length)return e;let n=e;return t.forEach(r=>{var s;n=(s=z.getGrammarTransform(r.type))===null||s===void 0?void 0:s.transform(r,n)}),n}}class Cr extends srt{getProduct(){return this._product||(this._product=this.runTransforms(this._transform,this.getLatestData())),this._product}getDataView(){return this._data}setDataView(t){this._data=t}getLatestData(){var t;return(t=this._data)===null||t===void 0?void 0:t.latestData}constructor(t,e){super(t),this._data=null,this._data=e}removeProduct(){this._product=null,this._prevProduct=null,this._compiledProductId=null}release(){this.removeProduct(),super.release(),this._data=null}addRelatedMark(t){this._relatedMarks||(this._relatedMarks={}),this._relatedMarks[t.id]=t}updateData(t){if(this._compileProduct(),this._relatedMarks){let e=!1;if(Object.keys(this._relatedMarks).forEach(n=>{this._relatedMarks[n]&&(e=!0,this._relatedMarks[n].commit())}),!t&&e)return this.getCompiler().renderNextTick()}}_compileProduct(){this._prevProduct=this._product,this._product=null}generateProductId(){var t;return`${(t=this.getDataView())===null||t===void 0?void 0:t.name}`}}const IS=(i,t,e,n)=>typeof i=="function"?i(t,e,n):i,hG=(i,t,e,n,r)=>{var s;const a={prev:i.map(g=>{var m,_;return(_=(m=g.context)===null||m===void 0?void 0:m.data)===null||_===void 0?void 0:_[0]}),next:t.map(g=>{var m,_;return(_=(m=g.context)===null||m===void 0?void 0:m.data)===null||_===void 0?void 0:_[0]})},o={prev:i.slice(),next:t.slice()},l=(s=e.animation)!==null&&s!==void 0?s:{},u=l.easing,c=IS(l.delay,r,a,o),h=IS(l.duration,r,a,o),d=IS(l.oneByOne,r,a,o),f=IS(l.splitPath,r,a,o),p=et(d)&&d>0?g=>yt(d)?g*d:d===!0?g*h:0:void 0;i.length!==1&&i.length!==0||t.length!==1?i.length===1&&t.length>1?AHt(i[0],t,{delay:c,duration:h,easing:u,onEnd:n,individualDelay:p,splitPath:f}):i.length>1&&t.length===1&&CHt(i,t[0],{delay:c,duration:h,easing:u,onEnd:n,individualDelay:p,splitPath:f}):kit(i[0],t[0],{delay:c,duration:h,easing:u,onEnd:n})},dG=(i,t)=>{const e=Math.floor(i.length/t);return new Array(t).fill(0).map((n,r)=>i.slice(e*r,r===t-1?i.length:e*(r+1)))},fG=i=>{const t=i.getMarkConfig();L(t.morphElementKey)&&i.getGraphics().forEach(e=>{var n,r;const s=(r=(n=e.context)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r[0];s&&(e.context.morphKey=s[t.morphElementKey])})},PUt=(i,t,e={})=>{const n=[],r=[];i.forEach(h=>{fG(h),n.push(...h.getGraphics())}),t.forEach(h=>{fG(h),r.push(...h.getGraphics())});const s=h=>{var d,f,p;return(f=(d=h.context)===null||d===void 0?void 0:d.morphKey)!==null&&f!==void 0?f:(p=h.context)===null||p===void 0?void 0:p.key},a=new Map,o=new Map;if(n.forEach(h=>{const d=s(h);d&&(a.has(d)||a.set(d,[]),a.get(d).push(h))}),r.forEach(h=>{const d=s(h);d&&(o.has(d)||o.set(d,[]),o.get(d).push(h))}),a.size!==o.size||!Array.from(a.keys()).every(h=>o.has(h)))return!1;const l=[...new Set([...a.keys()].filter(h=>o.has(h)))],u=[...o.keys()].filter(h=>!a.has(h)),c=()=>{};return u.forEach(h=>{const d=o.get(h);hG([],d,e,c,{})}),l.forEach(h=>{const d=a.get(h),f=o.get(h),p=Math.min(d.length,f.length);if(p>0){const g=dG(d,p),m=dG(f,p);for(let _=0;_<p;_++)hG(g[_],m[_],e,c,{})}}),!0};var pG=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class ns extends srt{commit(t,e){e&&this.getMarks().length>0&&this.getMarks().forEach(n=>n.commit(!1,e)),this._isCommited=!0,t&&this.getCompiler().renderNextTick()}uncommit(){this._isCommited=!1}isCommited(){return this._isCommited}getMarkConfig(){return this._markConfig}setMarkConfig(t){Object.keys(t).forEach(e=>{this._markConfig[e]=t[e]})}getVisible(){return this._visible}setVisible(t){this._visible=t}getUserId(){return this._userId}setUserId(t){L(t)&&(this._userId=t)}getDataView(){var t;return(t=this._data)===null||t===void 0?void 0:t.getDataView()}setDataView(t){N(this._data)&&this.initMarkData(this._option),this._data.setDataView(t)}getData(){return this._data}setData(t){this._data=t,t&&t.addRelatedMark(this)}hasState(t){return t in this.state.getStateMap()}getState(t){return this.state.getStateMap()[t]}getAnimationConfig(){return this._animationConfig}setAnimationConfig(t){const e=this.type==="group"?{selfOnly:!0}:{},n=s=>{var a;const o=(a=s.options)!==null&&a!==void 0?a:{};return Object.assign(Object.assign(Object.assign({},e),s),{options:(l,u,c)=>{var h,d;const f=typeof o=="function"?o(l,u,c):o;if(u&&u.context&&u.context.compiler&&L(u.context.modelId)){const p=(h=u.context.compiler.getChart())===null||h===void 0?void 0:h.getModelById(u.context.modelId);return Object.assign(Object.assign({},f),{layoutRect:(d=p?.getLayoutRect)===null||d===void 0?void 0:d.call(p)})}return Object.assign({},f)}})},r={};Object.keys(t).forEach(s=>{const a=t[s];J(a)?r[s]=a.map(n):L(a)&&(r[s]=n(a))}),this._animationConfig=r}disableAnimationByState(t){const e=X(t);this._disabledAnimationStates=[...new Set([...this._disabledAnimationStates,...e])]}enableAnimationByState(t){const e=X(t);this._disabledAnimationStates=this._disabledAnimationStates.filter(n=>!e.includes(n))}setSkipBeforeLayouted(t){this._skipBeforeLayouted=t}setGroupKey(t){this._groupKey=t}getProduct(){return this._product}initMarkData(t){this._data=new Cr(t),this._data.addRelatedMark(this)}_compileProduct(t){this.commit(),this._context=t?.context;const e=this.getProduct();if(this._visible){if(L(e))t.group&&e.parent!==t.group&&t.group.appendChild(e);else{if(!this.getCompiler().isInited)return;this._initProduct(t?.group)}N(this._product)||(this.compileData(),this.compileState(),this.compileEncode())}else L(e)&&this.removeProduct()}_initProduct(t){var e;if(!this.getStage())return;const n=this.getProductId();this._product=Uw(this.type!=="group"?{pickable:!1,zIndex:this._markConfig.zIndex,overflow:this._markConfig.overflow}:{}),this._product.name=n,this._product.mark=this,(t??((e=this.getCompiler())===null||e===void 0?void 0:e.getRootGroup())).appendChild(this._product),this._compiledProductId=n}generateProductId(){return this._userId?`${this._userId}`:`${this.name}_${this.id}`}layout(t){}compileData(){N(this._data)||this._data.compile()}compileEncode(){}compileState(){}compileAnimation(){}compileContext(t){this._context=Object.assign({markId:this.id,modelId:this.model.id,markUserId:this._userId,modelUserId:this.model.userId},t)}getContext(){return this._context}compileTransform(){}updateState(t,e){return this.commit(),this.state.updateState(t,e)}getMarks(){return[]}runAnimationByState(t){}stopAnimationByState(t){}pauseAnimationByState(t){}resumeAnimationByState(t){}removeProduct(){this._product&&this._product.parent&&this._product.parent.removeChild(this._product),this._product=null,this._compiledProductId=null}release(){this.state.release(),super.release(),this._lastMark=null}setSimpleStyle(t){this._simpleStyle=t}getSimpleStyle(){return this._simpleStyle}constructor(t,e){var n;super(e),this.type=void 0,this.name="mark",this._markConfig={zIndex:ti.Mark,morph:!1},this._visible=!0,this.stateStyle={},this._unCompileChannel={},this._disabledAnimationStates=[],this._skipBeforeLayouted=!1,this._extensionChannel={},this._computeExChannel={},this._graphicMap=new Map,this._graphics=[],this._getEncoderOfStyle=(r,s)=>{if(s&&r){const a={};return Object.keys(s).forEach(o=>{this._unCompileChannel[o]||(a[o]=this._computeAttribute(o,r))}),a}return null},this._setGraphicFromMarkConfig=r=>{const{setCustomizedShape:s,graphicName:a}=this._markConfig;s&&(r.pathProxy=o=>s(r.context.data,o,new Ki)),a&&(it(a)?r.name=a(r):r.name=a)},this._setStateOfGraphic=(r,s)=>{r.clearStates(),r.stateProxy=null,r.context.diffState!==Kn.enter&&r.context.diffState!==Kn.update||(r.stateProxy=(a,o)=>{var l;return this._runEncoderOfGraphic((l=this._encoderOfState)===null||l===void 0?void 0:l[a],r)},r.context.states&&r.useStates(r.context.states,s))},this.name=t,this.model=e.model,this.key=e.key,this.state=new TUt(e,this),this._attributeContext=e.attributeContext,(n=e.map)===null||n===void 0||n.set(this.id,this)}created(){this._initStyle()}initStyleWithSpec(t){t&&(L(t.id)&&(this._userId=t.id),Vn(t.interactive)&&(this._markConfig.interactive=t.interactive),L(t.zIndex)&&(this._markConfig.zIndex=t.zIndex),Vn(t.visible)&&this.setVisible(t.visible),this._markConfig.setCustomizedShape=t.customShape,this._stateSort=t.stateSort,this._initSpecStyle(t))}_transformStyleValue(t,e){if(t.scale){const n=t.scale,r=n.range();return n.range(r.map(e)),t}return typeof t=="function"?(...n)=>e(t(...n)):e(t)}convertAngleToRadian(t){return this._transformStyleValue(t,ii)}isUserLevel(t){return[ct.User_Mark,ct.User_Series,ct.User_Chart,ct.User_SeriesStyle].includes(t)}setStyle(t,e="normal",n=0){if(N(t))return;this.stateStyle[e]===void 0&&(this.stateStyle[e]={});const r=this.isUserLevel(n);Object.keys(t).forEach(s=>{let a=t[s];N(a)||(a=this._filterAttribute(s,a,e,n,r),this.setAttribute(s,a,e,n))})}getStyle(t,e="normal"){var n;return(n=this.stateStyle[e][t])===null||n===void 0?void 0:n.style}_filterAttribute(t,e,n,r,s){let a=this._styleConvert(e);if(s)switch(t){case"angle":a=this.convertAngleToRadian(a);break;case"innerPadding":case"outerPadding":a=this._transformStyleValue(a,o=>-o);break;case"curveType":a=this._transformStyleValue(a,o=>aUt(o,this._option.model.direction))}return a}setReferer(t,e,n){var r;if(t)if(e&&n){const s=(r=this.stateStyle[n])!==null&&r!==void 0?r:{[e]:{}};this.stateStyle[n][e]=Object.assign(Object.assign({},s[e]),{referer:t})}else Object.entries(this.stateStyle).forEach(([s,a])=>{Object.entries(a).forEach(([o,l])=>{this.stateStyle[s][o].referer=t})})}setPostProcess(t,e,n="normal"){var r;!((r=this.stateStyle[n])===null||r===void 0)&&r[t]&&(this.stateStyle[n][t].postProcess=e)}getAttribute(t,e,n="normal"){return this._computeAttribute(t,n)(e)}getAttributesOfState(t,e="normal"){const n=this.stateStyle[e];if(n){const r={};return Object.keys(n).forEach(s=>{this._unCompileChannel[s]||(r[s]=this._computeAttribute(s,e)(t))}),r}}setAttribute(t,e,n="normal",r=0){var s;this.stateStyle[n]===void 0&&(this.stateStyle[n]={}),this.stateStyle[n][t]===void 0&&(this.stateStyle[n][t]={level:r,style:e,referer:void 0});const a=(s=this.stateStyle[n][t])===null||s===void 0?void 0:s.level;L(a)&&a<=r&&Wt(this.stateStyle[n][t],{style:e,level:r}),n!=="normal"&&t in this._extensionChannel&&this._extensionChannel[t].forEach(o=>{this.stateStyle[n][o]===void 0&&(this.stateStyle[n][o]=this.stateStyle.normal[o])})}_getDefaultStyle(){return{visible:!0,x:0,y:0}}_styleConvert(t){if(!t)return t;if(YI(t.type)||t.scale){const e=b5t(t,{globalScale:this._option.globalScale,seriesId:this._option.seriesId});if(e)return{scale:e,field:t.field,changeDomain:t.changeDomain}}return t}_computeAttribute(t,e){var n;let r=(n=this.stateStyle[e])===null||n===void 0?void 0:n[t];r||(r=this.stateStyle.normal[t]);const s=this._computeStateAttribute(r,t,e),a=it(r?.postProcess),o=t in this._computeExChannel;if(a&&o){const l=this._computeExChannel[t];return u=>{let c=s(u);return c=r.postProcess(c,u,this._attributeContext,this.getDataView()),l(t,u,e,c)}}if(a)return l=>r.postProcess(s(l),l,this._attributeContext,this.getDataView());if(o){const l=this._computeExChannel[t];return u=>l(t,u,e,s(u))}return s}_computeStateAttribute(t,e,n){var r;return t?t.referer?t.referer._computeAttribute(e,n):t.style?typeof t.style=="function"?s=>t.style(s,this._attributeContext,{mark:this},this.getDataView()):cG.includes(t.style.gradient)?this._computeGradientAttr(t.style):["outerBorder","innerBorder"].includes(e)?this._computeBorderAttr(t.style):YI((r=t.style.scale)===null||r===void 0?void 0:r.type)?s=>{let a=s;return this.model.modelType==="series"&&this.model.getMarkData&&(a=this.model.getMarkData(s)),t.style.scale.scale(a[t.style.field])}:s=>t.style:s=>t.style:s=>{}}_initStyle(){const t=this._getDefaultStyle();this.setStyle(t,"normal",0)}_initSpecStyle(t){t.style&&this.setStyle(t.style,"normal",ct.User_Mark);const e=t.state;e&&Object.keys(e).forEach(n=>{const r=e[n];if("style"in r){const s=r.style;let a={stateValue:n};"level"in r&&(a.level=r.level),"filter"in r&&(a=it(r.filter)?Object.assign({filter:r.filter},a):Object.assign(Object.assign({},r.filter),a)),this.state.addStateInfo(a),this.setStyle(s,n,ct.User_Mark)}else this.setStyle(r,n,ct.User_Mark)})}_computeGradientAttr(t){var e,n;const{gradient:r,scale:s,field:a}=t,o=pG(t,["gradient","scale","field"]);let l=s,u=a;if(!(s&&a||this.model.modelType!=="series")){const{scale:d,field:f}=this.model.getColorAttribute();s||(l=d),u||(u=f)}const c=nL(M0(this.model.getColorScheme(),this.model.modelType==="series"?(n=(e=this.model).getSpec)===null||n===void 0?void 0:n.call(e):void 0),this.model.getDefaultColorDomain()),h=Object.assign(Object.assign({},wUt[r]),o);return d=>{const f={},p=this.getDataView();return Object.keys(h).forEach(g=>{const m=h[g];g==="stops"?f.stops=m.map(_=>{const{opacity:v,color:y,offset:b}=_;let x=y??l?.scale(d[u]);return it(y)&&(x=y(d,this._attributeContext,p)),L(v)&&(x=Mn.SetOpacity(x,v)),{offset:it(b)?b(d,this._attributeContext,p):b,color:x||c[0]}}):it(m)?f[g]=m(d,this._attributeContext,p):f[g]=m}),f.gradient=r,f}}_computeBorderAttr(t){const{scale:e,field:n}=t,r=pG(t,["scale","field"]);return s=>{var a,o,l;const u={};if(Object.keys(r).forEach(c=>{const h=r[c];it(h)?u[c]=h(s,this._attributeContext,this.getDataView()):u[c]=h}),"stroke"in u)cG.includes((l=r.stroke)===null||l===void 0?void 0:l.gradient)&&(u.stroke=this._computeGradientAttr(r.stroke)(s));else{const c=nL(M0(this.model.getColorScheme(),this.model.modelType==="series"?(o=(a=this.model).getSpec)===null||o===void 0?void 0:o.call(a):void 0),this.model.getDefaultColorDomain());let h=e,d=n;if(!(e&&n||this.model.modelType!=="series")){const{scale:f,field:p}=this.model.getColorAttribute();e||(h=f),d||(d=p),u.stroke=h?.scale(s[d])||c[0]}}return u}}_getDataByKey(t){return am(t,(e,n)=>{var r;return`${this._groupKeyGetter(e)}_${(r=this._keyGetter(e))!==null&&r!==void 0?r:n}`})}_getCommonContext(){return{compiler:this.getCompiler(),markType:this.type,markId:this.id,modelId:this.model.id,markUserId:this._userId,modelUserId:this.model.userId}}prepareMorph(t){this._lastMark=t}reuse(t){this.type===t.type&&(this._product=t.getProduct(),this._graphics=t.getGraphics(),this._graphicMap=t._graphicMap,this._graphicMap.forEach(e=>{e.context=Object.assign(Object.assign({},e.context),this._getCommonContext())}),this._dataByKey=t._dataByKey,this._prevDataByKey=t._prevDataByKey,this.needClear=t.needClear)}_parseProgressiveContext(t){const e=this._markConfig.progressiveStep>0&&this._markConfig.progressiveThreshold>0&&this._markConfig.progressiveStep<this._markConfig.progressiveThreshold,n=this._markConfig.large&&this._markConfig.largeThreshold>0&&t.length>=this._markConfig.largeThreshold;if(e){const r=this._dataByGroup;return r&&r.keys&&r.keys.some(s=>r.data.get(s).length>this._markConfig.progressiveThreshold)?{large:n,progressive:{data:t,step:this._markConfig.progressiveStep,currentIndex:0,totalStep:r.keys.reduce((s,a)=>Math.max(Math.ceil(r.data.get(a).length/this._markConfig.progressiveStep),s),1),groupedData:r.data}}:{large:n}}return{large:n}}getGraphics(){return this._graphics}_createGraphic(t={}){return z.createGraphicComponent(this.type,t)}_runGroupData(t){this._keyGetter=it(this.key)?this.key:L(this.key)?e=>e?.[this.key]:e=>e?.[ys],this._groupKeyGetter=L(this._groupKey)?e=>`${e?.[this._groupKey]}`:()=>"key",this._dataByGroup=am(t,this._groupKeyGetter)}getAnimationState(){const t=this._graphics.map(n=>n.context.animationState),e=t.every(n=>n===ui.appear)?ui.appear:t.every(n=>n===ui.disappear)?ui.disappear:t[0];return e??ui.none}createAnimationStateList(t,e){var n;let r=e[t];return r&&Array.isArray(r)&&(r=r.length===1?r[0]:r),Array.isArray(r)?r.map((s,a)=>{var o;return Object.assign(Object.assign({},s),{priority:(o=s.priority)!==null&&o!==void 0?o:1/0})}):r&&Object.assign(Object.assign({},r),{priority:t==="normal"?(n=r.priority)!==null&&n!==void 0?n:1/0:r.priority})}tryRunMorphing(t){if(this._lastMark){t.forEach(n=>{n.context.animationState!=="appear"&&n.context.animationState!=="enter"||n.setAttributes(n.getAttributes(!0))});const e=PUt([this._lastMark],[this],{});return this._lastMark=null,e}return!1}_runStateAnimation(t){var e,n;if(!this._animationConfig||t.length===0||this.tryRunMorphing(t))return;const r=this.getAnimationConfig();if((e=this._markConfig.useSequentialAnimation)!==null&&e!==void 0&&e&&this._runSequentialAnimations)return void this._runSequentialAnimations(t);const s=t.every(l=>l.context.animationState==="appear"),a=this.createAnimationStateList("appear",r);if(s&&this._product){const l=a?["appear"]:[],u=a?[{name:"appear",animation:a}]:[];if(r.normal){l.push("normal");const c={name:"normal",animation:this.createAnimationStateList("normal",r)};u.push(c)}this._product.applyAnimationState(l,u)}let o=!1;if(t.forEach(l=>{const u=l.context.animationState;if(u==="appear")return;const c=r[u];if(c&&c.length>0){const h=c.map((f,p)=>({name:`${u}_${p}`,animation:f}));h.forEach(f=>{f.animation.customParameters=l.context});const d=[u];l.applyAnimationState(d,[h.length===1?h[0]:h])}u==="enter"&&r.normal&&(o=!0)}),o&&this._product&&((n=r.normal)===null||n===void 0?void 0:n.length)){this._product.stopAnimationState("normal","start");const l={name:"normal",animation:this.createAnimationStateList("normal",r)};this._product.applyAnimationState(["normal"],[l])}}_setAnimationState(t){var e,n,r;const s=(this.type==="component"?this.model.getAnimationStateCallback():(r=(n=(e=this.model).getRegion)===null||n===void 0?void 0:n.call(e))===null||r===void 0?void 0:r.getAnimationStateCallback())||(o=>{var l;const u=(l=o.context)===null||l===void 0?void 0:l.diffState;return u===ui.exit?ui.exit:u===ui.update?ui.update:ui.appear}),a=s(t);t.context.animationState=a??t.context.diffState,t.context.animationState===Kn.exit&&(t.context.reusing=!0,t.animates&&t.animates.forEach(o=>o.stop()))}_runJoin(t){const e=this._getDataByKey(t),n=this._prevDataByKey,r=[],s=new Set(this._graphics.filter(l=>l.context.diffState===Kn.enter)),a=(l,u,c)=>{var h,d,f,p,g,m,_,v,y;let b,x;return N(u)?(b=this._graphicMap.get(l),b&&(x=Kn.exit)):N(c)?(b=this._graphicMap.has(l)?this._graphicMap.get(l):{},x=Kn.enter,b.isExiting=!1,this._graphicMap.set(l,b),r.push(b)):(b=this._graphicMap.get(l),b&&(x=Kn.update,r.push(b))),b&&(s.delete(b),b.context=Object.assign(Object.assign({},this._getCommonContext()),{diffState:x,reusing:(h=b.context)===null||h===void 0?void 0:h.reusing,originalFieldX:(d=b.context)===null||d===void 0?void 0:d.originalFieldX,originalFieldY:(f=b.context)===null||f===void 0?void 0:f.originalFieldY,fieldX:(p=b.context)===null||p===void 0?void 0:p.fieldX,fieldY:(g=b.context)===null||g===void 0?void 0:g.fieldY,data:u??((m=b.context)===null||m===void 0?void 0:m.data),uniqueKey:l,key:u?this._keyGetter(u[0]):(_=b.context)===null||_===void 0?void 0:_.key,groupKey:u?this._groupKeyGetter(u[0]):(v=b.context)===null||v===void 0?void 0:v.groupKey,indexKey:"__VCHART_DEFAULT_DATA_INDEX",stateAnimateConfig:(y=this.getAnimationConfig())===null||y===void 0?void 0:y.state}),this._setAnimationState(b)),b};if(n&&e){const l=new Map(n.data);e.keys.forEach(u=>{a(u,e.data.get(u),l.get(u)),l.delete(u)}),n.keys.forEach(u=>{l.has(u)&&a(u,null,l.get(u))})}else e?e.keys.forEach(l=>{const u=a(l,e.data.get(l),null);u&&(u.context.animationState=ui.appear)}):n&&n.keys.forEach(l=>{a(l,null,n.data.get(l)).context.animationState=ui.disappear});s.forEach(l=>{this._graphicMap.delete(l.context.uniqueKey),l.parent&&l.parent.removeChild(l),l.release()});const o=r.length;r.forEach((l,u)=>{l.context.graphicCount=o,l.context.graphicIndex=u}),this._dataByKey=e,this._graphics=r,this.needClear=!0}_runEncoderOfGraphic(t,e,n={}){return aG(t,e.context.data[0],n)}_runGroupEncoder(t){if(!this._dataByGroup)return null;const e={};return this._dataByGroup.keys.forEach(n=>{e[n]=aG(t,this._dataByGroup.data.get(n)[0])}),this._attrsByGroup=e,e}_transformGraphicAttributes(t,e,n){return Object.assign(Object.assign({},n),e)}_separateNormalStyle(t){const e={},n={};return Object.keys(t).forEach(r=>{this._unCompileChannel[r]||(this._option.noSeparateStyle||AUt(r,t,this._groupKey)?e[r]=t[r]:n[r]=t[r])}),{updateStyles:e,groupStyles:n}}_addProgressiveGraphic(t,e){t.incrementalAppendChild(e)}_runEncoder(t,e){var n;const r=e?null:this._runGroupEncoder((n=this._encoderOfState)===null||n===void 0?void 0:n.group);t.forEach((s,a)=>{var o;const l=this._runEncoderOfGraphic((o=this._encoderOfState)===null||o===void 0?void 0:o.update,s);N(this._markConfig.interactive)||(l.pickable=this._markConfig.interactive);const u=this._transformGraphicAttributes(s,l,r?.[s.context.groupKey]);s.context.finalAttrs=u})}_runApplyGraphic(t){const e=this.hasAnimation();t.forEach((n,r)=>{var s,a;const o=n.context.finalAttrs,l=this.hasAnimationByState(n.context.animationState);if(n.setAttributes){const u=Knt(n,o);n.context.diffAttrs=u,n.context.reusing?(n.context.lastAttrs=n.attribute,n.initAttributes({}),n.context.reusing=!1):l||(e?n.setAttributesAndPreventAnimate(u):n.setAttributes(u)),e&&n.setFinalAttributes(o)}else{const u=n;n=this._createGraphic(o),e&&((s=n.setFinalAttributes)===null||s===void 0||s.call(n,o)),n.context=u.context,n.context.diffAttrs=o;const c=this._graphics===t?r:r+this._graphics.length-t.length;if(c>=0&&(this._graphics[c]=n),(a=this.renderContext)===null||a===void 0?void 0:a.progressive){const h=this._dataByGroup?this._dataByGroup.keys.indexOf(n.context.groupKey):0,d=h>=0?this._product.getChildAt(h):null;d&&this._addProgressiveGraphic(d,n)}else this._product.appendChild(n),this._graphicMap.set(n.context.uniqueKey,n)}this._setStateOfGraphic(n,l),this._setGraphicFromMarkConfig(n)})}_updateEncoderByState(){const t={};Object.keys(this.stateStyle).forEach(e=>{if(e===bt.STATE_NORMAL){const{groupStyles:n,updateStyles:r}=this._separateNormalStyle(this.stateStyle[e]);t.group=this._getEncoderOfStyle(e,n),t.update=this._getEncoderOfStyle(e,r)}else t[e]=this._getEncoderOfStyle(e,this.stateStyle[e])}),this._encoderOfState=t}_runState(t){t.forEach(e=>{var n;const r=[...((n=e.currentStates)!==null&&n!==void 0?n:[]).filter(s=>!this.state.getStateInfo(s)),...this.state.checkState(e,e.context.data)];this._stateSort&&r.length&&r.sort(this._stateSort),e.context.states=r})}_getAttrsFromConfig(t={}){const{zIndex:e,clip:n,clipPath:r,overflow:s}=this._markConfig;if(N(e)||(t.zIndex=e),N(n)||(t.clip=n),!N(r)){const a=J(r)?r:r(this._graphics);a&&a.length||(t.clip=!1),t.path=a}return N(s)||(t.overflow=s),t}_updateAttrsOfGroup(){var t;const e=this._getAttrsFromConfig();(t=this._product)===null||t===void 0||t.setAttributes(e),this._markConfig.support3d&&this._product&&this._product.setMode("3d")}_runBeforeTransform(t){var e;const n=(e=this._transform)===null||e===void 0?void 0:e.filter(r=>{if(r.type){const s=z.getGrammarTransform(r.type);return s&&(!s.runType||s.runType==="beforeJoin")}return!1});return this.runTransforms(n,t)}_runEncoderTransform(t,e){var n;const r=(n=this._transform)===null||n===void 0?void 0:n.filter(s=>{if(s.type){const a=z.getGrammarTransform(s.type);return a&&a.runType==="afterEncode"&&!!a.canProgressive===e}return!1});return this.runTransforms(r,t)}renderInner(){var t,e,n;this._updateEncoderByState();const r=(e=(t=this._data)===null||t===void 0?void 0:t.getProduct())!==null&&e!==void 0?e:[{}],s=this._runBeforeTransform(r);let a;if(s?.progressive){this.renderContext={beforeTransformProgressive:s.progressive};const o=s.progressive;if(o.canAnimate&&o.canAnimate()&&o.unfinished())return void this._updateAttrsOfGroup();a=o.output()}else a=X(s),this._runGroupData(a),this.renderContext=this._parseProgressiveContext(a);!((n=this.renderContext)===null||n===void 0)&&n.progressive?(this._graphicMap.clear(),this._runProgressiveStep()):(this._runJoin(a),this._runState(this._graphics),this._runEncoder(this._graphics),this._runEncoderTransform(this._graphics,!1),this._runApplyGraphic(this._graphics)),this._updateAttrsOfGroup()}render(){this.isCommited()&&(!this.getVisible()||this._skipBeforeLayouted&&this.getCompiler().getLayoutState()===fd.before||(kA(`render mark: ${this.getProductId()}, type is ${this.type}`),this.renderInner()),this.uncommit())}updateMarkState(t){if(!this._product)return;const e=this.state.getStateInfo(t);this._graphics.forEach(n=>{this.state.checkOneState(n,n.context.data,e)==="in"?n.addState(t,!0,this.hasAnimationByState("state")):n.removeState(t,this.hasAnimationByState("state"))})}clearExitGraphics(){this._prevDataByKey=this._dataByKey;const t=(e,n)=>{this._graphicMap.delete(n),e.parent&&e.parent.removeChild(e),e.release&&e.release()};this._graphicMap.forEach((e,n)=>{if(e.context.diffState===Kn.exit&&!e.isExiting)if(e.context.animationState===Kn.exit&&this.hasAnimationByState("exit")){e.isExiting=!0;const r=this.getAnimationConfig();if(r.exit&&r.exit.length){const s=r.exit.map((a,o)=>({name:`exit_${o}`,animation:Object.assign(Object.assign({},a),{customParameters:e.context})}));e.applyAnimationState(["exit"],[s.length===1?s[0]:s],()=>{t(e,n)})}}else t(e,n)})}isProgressive(){return this.renderContext&&(!!this.renderContext.progressive||!!this.renderContext.beforeTransformProgressive)}canAnimateAfterProgressive(){var t,e;return this.renderContext&&this.renderContext.beforeTransformProgressive&&((e=(t=this.renderContext.beforeTransformProgressive).canAnimate)===null||e===void 0?void 0:e.call(t))}isDoingProgressive(){return this.renderContext&&(this.renderContext.progressive&&this.renderContext.progressive.currentIndex<this.renderContext.progressive.totalStep||this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.unfinished())}clearProgressive(){this.renderContext&&this.renderContext.progressive&&(this._graphics=[],this._product.children.forEach(t=>{t.incrementalClearChild()}),this._product.removeAllChild()),this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.release(),this.renderContext=null}restartProgressive(){this.renderContext&&this.renderContext.progressive&&(this.renderContext.progressive.currentIndex=0)}_runBeforeProgressive(){var t;const e=this.renderContext.beforeTransformProgressive;e.progressiveRun();const n=e.output();if(!((t=e.canAnimate)===null||t===void 0)&&t.call(e)){if(e.unfinished())return;this._runGroupData(n),this._runJoin(n),this._runState(this._graphics),this._runEncoder(this._graphics),this._runApplyGraphic(this._graphics)}}_runProgressiveJoin(){const t=this.renderContext.progressive.currentIndex,e=[],n={};return this._dataByGroup.keys.forEach(r=>{const s=this.renderContext.progressive.groupedData.get(r),a=this.renderContext.progressive.step,o=s.slice(t*a,(t+1)*a),l=[];o.forEach((u,c)=>{const h=this._keyGetter(u),d={context:Object.assign(Object.assign({},this._getCommonContext()),{diffState:Kn.enter,data:[u],uniqueKey:`${r}_${h??t*a+c}`,key:h,groupKey:r})};l.push(d),e.push(d)}),n[r]=l}),{graphicsByGroup:n,graphics:e,needUpdate:!0}}_createIncrementalGraphics(){this._product.removeAllChild(),this._dataByGroup.keys.forEach(t=>{const e=Uw({pickable:!1,zIndex:this._markConfig.zIndex});e.incremental=this.renderContext.progressive.step,this._product.appendChild(e)})}_setCommonAttributesToTheme(t){var e,n,r;if(this._attrsByGroup&&t){const s=t.parent;s&&(!((e=this._attrsByGroup)===null||e===void 0)&&e[(n=t.context)===null||n===void 0?void 0:n.groupKey])&&s.setTheme({common:this._attrsByGroup[(r=t.context)===null||r===void 0?void 0:r.groupKey]})}}_runProgressiveEncoder(t){this.renderContext.progressive.currentIndex===0?this._runEncoder(t):this._runEncoder(t,!0)}_runProgressiveApplyGraphic(t){this.renderContext.progressive.currentIndex===0?(this._runApplyGraphic(t),this._setCommonAttributesToTheme(t[0])):this._runApplyGraphic(t)}_runProgressiveStep(){const{graphics:t,graphicsByGroup:e,needUpdate:n}=this._runProgressiveJoin();this.renderContext.progressive.currentIndex===0?(this._createIncrementalGraphics(),this._graphics=t):n&&t.forEach(r=>{this._graphics.push(r)}),this._runState(t),Object.keys(e).forEach(r=>{this._runProgressiveEncoder(e[r])}),this._runEncoderTransform(this._graphics,!0),Object.keys(e).forEach(r=>{this._runProgressiveApplyGraphic(e[r])}),this.renderContext.progressive.currentIndex+=1}renderProgressive(){var t;!((t=this.renderContext)===null||t===void 0)&&t.beforeTransformProgressive?this._runBeforeProgressive():this.renderContext.progressive&&this._runProgressiveStep()}hasAnimationByState(t){if(!t||!this._animationConfig||!this._animationConfig[t]||this._disabledAnimationStates.includes(t))return!1;const e=this._animationConfig[t];return e.length>0||ee(e)}hasAnimation(){return!!this._animationConfig&&Object.keys(this._animationConfig).length>0}runAnimation(){this._runStateAnimation(this.getGraphics())}}class E0 extends ns{constructor(){super(...arguments),this.type=E0.type,this._marks=[],this._diffState=Kn.enter}getMarks(){return this._marks}isMarkExist(t){return this._marks.find(e=>e.id===t.id)!==void 0}addMark(t){return this.isMarkExist(t)?(es("Mark already exists, add mark failed."),!1):(this._marks.push(t),!0)}removeMark(t){const e=this._marks.findIndex(n=>n.id===t.id||n.name===t.name);return e===-1?(es("Mark does not exists, removeMark failed."),!1):(this._marks.splice(e,1),!0)}getMarkInType(t){return this._marks.filter(e=>e.type===t)}getMarkInId(t){return this._marks.find(e=>e.id===t)}getMarkInUserId(t){let e;return Ac(this,n=>{e=n},n=>n.getUserId()===t,null,!0),e}getMarkInName(t){return this._marks.filter(e=>e.name===t)}_compileProduct(t){super._compileProduct(t),this.getMarks().forEach(e=>{e.compile({group:this._product})})}_getAttrsFromConfig(t={}){const e=super._getAttrsFromConfig(t);return N(this._markConfig.interactive)||(e.pickable=this._markConfig.interactive),t}getGraphics(){return[this._product]}renderInner(){var t;if(!this._product)return;const e=(t=this._simpleStyle)!==null&&t!==void 0?t:this.getAttributesOfState({});this._product.context=Object.assign(Object.assign(Object.assign({},this._product.context),this._getCommonContext()),{diffState:this._diffState}),this._setAnimationState(this._product);const n=this._getAttrsFromConfig(e);if(this._product.context.diffState===Kn.update){const r=this.hasAnimation(),s=Knt(this._product,n);this._product.context.diffAttrs=s,this.hasAnimationByState(this._product.context.animationState)||(r?this._product.setAttributesAndPreventAnimate(s):this._product.setAttributes(s)),r&&this._product.setFinalAttributes(n)}else this._product.setAttributes(n);this.needClear=!0}clearExitGraphics(){this._diffState=Kn.update}render(){this._isCommited&&(kA(`render mark: ${this.getProductId()}, type is ${this.type}`),this.renderInner(),this.uncommit()),this.getMarks().forEach(t=>{t.render()})}release(){super.release(),this.removeProduct()}}E0.type="group";const bz=()=>{as(),ln(),z.registerMark(E0.type,E0)},EUt={measureText:jnt};class ua{static instance(){return ua.instance_||(ua.instance_=new ua),ua.instance_}constructor(){this.functions={}}registerFunction(t,e){t&&e&&(this.functions[t]=e)}unregisterFunction(t){t&&delete this.functions[t]}getFunction(t){return this.functions[t]||null}getFunctionNameList(){return Object.keys(this.functions)}}const RUt=()=>{RA(te)},OUt=()=>{LA(te)};class xz{constructor(){this.id=Fm(),this._plugins=[]}add(t){if(!t||t.length===0)return null;const e=[];return t.forEach(n=>{this._plugins.find(r=>r.id===n.id)?es("plugin"):(this._plugins.push(n),e.push(n),n.onAdd&&n.onAdd(this))}),e}load(t){const e=this.add(t);e&&e.length&&this.activate(t)}activate(t){t.length&&t.forEach(e=>{e.init&&e.init()})}get(t){return this._plugins.find(e=>e.id===t)}getAll(){return this._plugins.slice()}release(t){const e=this.get(t);e&&(e.release(this),this._plugins=this._plugins.filter(n=>n!==e))}releaseAll(){this._plugins.forEach(t=>{t.release(this)}),this._plugins=[]}clear(t){const e=this.get(t);e&&e.clear(this)}clearAll(){this._plugins.forEach(t=>{var e;(e=t.clear)===null||e===void 0||e.call(t,this)})}}class DUt extends xz{constructor(t){super(),this.globalInstance=t}onInit(t){this._plugins.forEach(e=>{e.onInit&&e.onInit(this,t)})}onBeforeResize(t,e){this._plugins.forEach(n=>{n.onBeforeResize&&n.onBeforeResize(this,t,e)})}onAfterChartSpecTransform(t,e){this._plugins.forEach(n=>{n.onAfterChartSpecTransform&&n.onAfterChartSpecTransform(this,t,e)})}onAfterModelSpecTransform(t,e,n){this._plugins.forEach(r=>{r.onAfterModelSpecTransform&&r.onAfterModelSpecTransform(this,t,e,n)})}onBeforeInitChart(t,e){this._plugins.forEach(n=>{n.onBeforeInitChart&&n.onBeforeInitChart(this,t,e)})}onAfterInitChart(t,e){this._plugins.forEach(n=>{n.onAfterInitChart&&n.onAfterInitChart(this,t,e)})}releaseAll(){super.releaseAll(),this.globalInstance=null}}const IUt=i=>({type:"clipIn",options:{clipDimension:i.direction==="horizontal"?"y":"x"}}),LUt={type:"fadeIn"},BUt=i=>({type:i.direction==="horizontal"?"growPointsXIn":"growPointsYIn",options:{orient:i.direction==="horizontal"?"positive":"negative"}});function FUt(i,t){switch(t){case"grow":return BUt(i);case"fadeIn":return LUt;default:return IUt(i)}}const Ll={appear:{duration:1e3,easing:"cubicOut"},update:{type:"update",duration:300,easing:"linear"},enter:{duration:300,easing:"linear"},exit:{duration:300,easing:"linear"},disappear:{duration:500,easing:"cubicIn"},state:{duration:300,easing:"linear"}},Sz={appear:{type:"scaleIn"},enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:{type:"scaleOut"}},lT={appear:{type:"fadeIn"},enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}},uT=()=>{z.registerAnimation("scaleInOut",()=>Sz)},rl=()=>{z.registerAnimation("fadeInOut",()=>lT)},zUt=()=>{z.registerAnimation("cartesianGroupClip",i=>({appear:{custom:g4,customParameters:(t,e)=>({animationType:"in",group:e,direction:i.direction(),width:i.width(),height:i.height(),orient:i.orient()})},disappear:{custom:g4,customParameters:(t,e)=>({animationType:"out",group:e,direction:i.direction(),width:i.width(),height:i.height(),orient:i.orient()})}}))},art=(i,t)=>({appear:FUt(i,t),enter:{type:"fadeIn"},exit:{type:"fadeOut"},update:[{type:"update",options:{excludeChannels:["points","defined","segments"]}},{channel:["points","segments"],custom:Eit,duration:Ll.update.duration,easing:Ll.update.easing,customParameters:{clipRangeByDimension:i.direction==="horizontal"?"y":"x"}}],disappear:{type:"clipOut"}}),ort=()=>{z.registerAnimation("line",art)},NUt=()=>{z.registerAnimation("area",art)},jUt=()=>{se.registerBuiltInAnimate("scaleIn",yVt),se.registerBuiltInAnimate("scaleOut",bVt),se.registerBuiltInAnimate("fadeIn",RHt),se.registerBuiltInAnimate("fadeOut",OHt),se.registerBuiltInAnimate("moveIn",kVt),se.registerBuiltInAnimate("moveOut",CVt),se.registerBuiltInAnimate("rotateIn",PVt),se.registerBuiltInAnimate("rotateOut",EVt),se.registerBuiltInAnimate("update",SVt),se.registerBuiltInAnimate("state",xVt),se.registerBuiltInAnimate("fromTo",RVt)},lrt=()=>{se.registerBuiltInAnimate("growHeightIn",YHt),se.registerBuiltInAnimate("growHeightOut",qHt),se.registerBuiltInAnimate("growWidthIn",_Vt),se.registerBuiltInAnimate("growWidthOut",vVt),se.registerBuiltInAnimate("growCenterIn",VHt),se.registerBuiltInAnimate("growCenterOut",WHt)},urt=()=>{se.registerBuiltInAnimate("growRadiusIn",cVt),se.registerBuiltInAnimate("growRadiusOut",hVt),se.registerBuiltInAnimate("growAngleIn",zHt),se.registerBuiltInAnimate("growAngleOut",NHt)},crt=()=>{se.registerBuiltInAnimate("growPointsIn",QHt),se.registerBuiltInAnimate("growPointsOut",Lit),se.registerBuiltInAnimate("growPointsXIn",tVt),se.registerBuiltInAnimate("growPointsXOut",eVt),se.registerBuiltInAnimate("growPointsYIn",nVt),se.registerBuiltInAnimate("growPointsYOut",rVt),se.registerBuiltInAnimate("clipIn",PHt),se.registerBuiltInAnimate("clipOut",EHt)},hrt=()=>{se.registerBuiltInAnimate("growPointsOut",Lit)},HUt=()=>{se.registerBuiltInAnimate("distortion",LVt),se.registerBuiltInAnimate("particle",BVt),se.registerBuiltInAnimate("pixelation",NVt),se.registerBuiltInAnimate("gaussianBlur",zVt),se.registerBuiltInAnimate("glitch",FVt),se.registerBuiltInAnimate("grayscale",IVt),se.registerBuiltInAnimate("dissolve",DVt)},cT=()=>{bf(),jUt(),HUt()},VUt=()=>{z.registerStageEventPlugin("gesture",Hzt)},WUt=i=>{const t=X(i),e=[],n=[];return t.forEach(r=>{r==="empty"?e.push("view"):Ht(r)&&r!=="none"?r.includes("view:")?(n.push(r.replace("view:","")),e.push("view")):(n.push(r),e.push("self")):yt(r)&&e.push("timeout")}),{eventNames:n,resetType:e}},$Ut=(i,t)=>{if(!t||!i)return null;const e={};return i.forEach(n=>{const r=n.stateStyle;r&&t.forEach(s=>{s&&r[s]&&(e[s]||(e[s]=[]),e[s].push(n.id))})}),e},ZE=(i,t)=>{if(!t||!t.length)return[];const e=[];return i.markIds?t.filter(n=>{i.markIds.includes(n.getProductId())&&e.push(n)}):i.markNames?t.forEach(n=>{i.markNames.includes(n.name)&&e.push(n)}):t.forEach(n=>{e.push(n)}),e},wz=i=>i.filterField?t=>{var e;return(e=cn(t))===null||e===void 0?void 0:e[i.filterField]}:t=>t.context[i.filterType],drt={highlightState:bt.STATE_HIGHLIGHT,blurState:bt.STATE_BLUR,trigger:"pointerover",triggerOff:"pointerout"};class Eh{constructor(t){this._markSet=new Kb,this.options=t,t.marks&&t.marks.length&&t.marks.forEach(e=>{this.registerMark(e)})}getMarks(){return this._markSet.getMarks()}getMarksByState(t){if(this._markIdByState&&this._markSet){const e=this._markIdByState[t];return e?this.getMarks().filter(n=>n&&e.includes(n.id)):[]}return[]}registerMark(t){J(t)?t.forEach(e=>{this._markSet.addMark(e)}):this._markSet.addMark(t)}updateMarkIdByState(t){this._markIdByState=$Ut(this.getMarks(),t)}getMarkIdByState(){var t;return(t=this._markIdByState)!==null&&t!==void 0?t:{}}isGraphicInStateMark(t,e){var n;const r=this.getMarkIdByState();return r&&r[e]&&r[e].includes((n=t.context)===null||n===void 0?void 0:n.markId)}isGraphicInMark(t){var e;return!!this._markSet.getMarkInId((e=t.context)===null||e===void 0?void 0:e.markId)}getStartState(){return null}getResetState(){return null}init(){const t=this.getEvents();t&&this.options.event&&t.forEach(e=>{e.type&&e.handler&&(J(e.type)?e.type.forEach(n=>{n&&n!=="none"&&this.options.event.on(n,e.handler)}):e.type!=="none"&&this.options.event.on(e.type,e.handler))})}release(){const t=this.getEvents();t&&this.options.event&&(t??[]).forEach(e=>{e.type&&e.handler&&(J(e.type)?e.type.forEach(n=>{n&&n!=="none"&&this.options.event.on(n,e.handler)}):e.type!=="none"&&this.options.event.off(e.type,e.handler))})}start(t){}reset(t){}dispatchEvent(t,e){this.options.event&&(this.options.event.emit(`${this.type}:${t}`,e),t==="start"&&this.options.onStart?this.options.onStart(e):t==="reset"&&this.options.onReset?this.options.onReset(e):t==="update"&&this.options.onUpdate?this.options.onUpdate(e):t==="end"&&this.options.onEnd&&this.options.onEnd(e))}}const frt={highlightState:bt.STATE_HIGHLIGHT,blurState:bt.STATE_BLUR,trigger:"pointerover",triggerOff:"pointerout"};class R0 extends Eh{constructor(t){super(t),this.type="element-highlight",this.resetAll=()=>{const{highlightState:e,blurState:n,interaction:r}=this.options;this._lastGraphic&&(r.clearAllStatesOfTrigger(this,e,n),this.dispatchEvent("reset",{graphics:[this._lastGraphic],options:this.options}),this._lastGraphic=null,r.setStatedGraphics(this,[]))},this.handleStart=e=>{this.start(e.item)},this.handleReset=e=>{const{interaction:n}=this.options,r=n.getStatedGraphics(this);if(!r||!r.length)return;const s=e.item,a=s&&this._markSet.getMarkInId(s.context.markId);(this._resetType.includes("view")&&!a||this._resetType.includes("self")&&a)&&this.resetAll()},this.options=Object.assign({},frt,t),this.updateMarkIdByState([this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getResetState(){return this.options.blurState}getEvents(){const t=this.options.triggerOff,e=[{type:this.options.trigger,handler:this.handleStart}];let n=t;return Ht(t)&&t.includes("view:")?(n=t.replace("view:",""),this._resetType="view"):this._resetType="self",e.push({type:n,handler:this.handleReset}),e}start(t){if(t&&this._markSet.getMarkInId(t.context.markId)){const{highlightState:e,blurState:n,interaction:r}=this.options;if(this._lastGraphic===t)return;const s=r.updateStates(this,[t],r.getStatedGraphics(this),e,n);r.setStatedGraphics(this,s),this._lastGraphic=t,this.dispatchEvent("start",{graphics:s,options:this.options})}else this._lastGraphic&&this._resetType==="view"&&this.resetAll()}reset(t){t?this._markSet.getMarkInId(t.context.markId)&&t.removeState([this.options.highlightState,this.options.blurState]):this.resetAll()}}R0.type="element-highlight",R0.defaultOptions=frt;const UUt=()=>{z.registerInteractionTrigger(R0.type,R0)},prt={state:bt.STATE_SELECTED,trigger:"click"};class O0 extends Eh{constructor(t){super(t),this.type="element-select",this._resetType=[],this.resetAll=()=>{const{state:e,reverseState:n,interaction:r}=this.options,s=r.getStatedGraphics(this);s&&s.length&&(r.clearAllStatesOfTrigger(this,e,n),this.dispatchEvent("reset",{graphics:s,options:this.options}),r.setStatedGraphics(this,[]))},this.handleStart=e=>{this.start(e.item)},this.handleReset=e=>{const{interaction:n}=this.options,r=n.getStatedGraphics(this);if(!r||!r.length)return;const s=e.item,a=s&&this._markSet.getMarkInId(s.context.markId);(this._resetType.includes("view")&&!a||this._resetType.includes("self")&&a)&&this.resetAll()},this.options=Object.assign({},prt,t),this.updateMarkIdByState([this.options.state,this.options.reverseState])}getStartState(){return this.options.state}getResetState(){return this.options.reverseState}getEvents(){const t=this.options.triggerOff,e=this.options.trigger,n=[{type:e,handler:this.handleStart}],{eventNames:r,resetType:s}=WUt(t);return r.forEach(a=>{a&&(J(e)?!e.includes(a):a!==e)&&n.push({type:a,handler:this.handleReset})}),this._resetType=s,n}start(t){const{state:e,reverseState:n,isMultiple:r,interaction:s}=this.options,a=s.getStatedGraphics(this);if(t&&this._markSet.getMarkInId(t.context.markId))if(t.hasState(e)){if(this._resetType.includes("self")){const o=a&&a.filter(l=>l!==t);o&&o.length?s.setStatedGraphics(this,s.updateStates(this,o,a,e,n)):this.resetAll()}}else{this._timer&&clearTimeout(this._timer),t.addState(e,!0);const o=this.options.interaction.updateStates(this,r&&a?[...a,t]:[t],a,e,n);s.setStatedGraphics(this,o),this.dispatchEvent("start",{graphics:o,options:this.options}),this._resetType.includes("timeout")&&(this._timer=setTimeout(()=>{this.resetAll()},this.options.triggerOff))}else this._resetType.includes("view")&&a&&a.length&&this.resetAll()}reset(t){t?this._markSet.getMarkInId(t.context.markId)&&t.removeState([this.options.state,this.options.reverseState]):this.resetAll()}}O0.type="element-select",O0.defaultOptions=prt;const GUt=()=>{z.registerInteractionTrigger(O0.type,O0)};class YUt extends xz{constructor(t){super(),this.globalInstance=t}onInit(){this._plugins.forEach(t=>{t.onInit&&t.onInit(this)})}releaseAll(){super.releaseAll(),this.globalInstance=null}}var So=function(i,t,e,n){return new(e||(e=Promise))(function(r,s){function a(u){try{l(n.next(u))}catch(c){s(c)}}function o(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof e?c:new e(function(h){h(c)})).then(a,o)}l((n=n.apply(i,t||[])).next())})},XUt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};let he=class x1{static useRegisters(t){t.forEach(e=>{typeof e=="function"?e():console.error("Invalid function:",e)})}static useChart(t){t.forEach(e=>z.registerChart(e.type,e))}static useSeries(t){t.forEach(e=>z.registerSeries(e.type,e))}static useComponent(t){t.forEach(e=>z.registerComponent(e.type,e))}static useMark(t){t.forEach(e=>{var n;return z.registerMark((n=e.constructorType)!==null&&n!==void 0?n:e.type,e)})}static useLayout(t){t.forEach(e=>z.registerLayout(e.type,e))}static registerDataSetTransform(t,e){z.registerTransform(t,e)}static registerFunction(t,e){t&&e&&ua.instance().registerFunction(t,e)}static unregisterFunction(t){t&&ua.instance().unregisterFunction(t)}static getFunction(t){return t?ua.instance().getFunction(t):null}static getFunctionList(){return ua.instance().getFunctionNameList()}static registerMap(t,e,n){const r=z.getImplementInKey("registerMap");r&&r(t,e,n)}static unregisterMap(t){const e=z.getImplementInKey("unregisterMap");e&&e(t)}static getMap(t){return nUt(t)}static registerSVG(t,e,n){const r=z.getImplementInKey("registerSVG");r&&r(t,e,n)}static unregisterSVG(t){const e=z.getImplementInKey("unregisterSVG");e&&e(t)}static hideTooltip(t=[]){Ya.forEach(e=>{var n;return(n=e?.hideTooltip)===null||n===void 0?void 0:n.call(e)},t)}static getLogger(){return Ee.getInstance()}getSpec(){return this._spec}getSpecInfo(){return this._specInfo}get event(){return this._event}getDataSet(){return this._dataSet}constructor(t,e){var n,r,s,a,o,l,u,c,h;this.id=Fm(),this._userEvents=[],this._autoSize=!0,this._option={mode:wn["desktop-browser"],onError:S=>{throw new Error(S)},optimize:{disableCheckGraphicWidthOutRange:!0}},this._observer=null,this._context={},this._doResize=()=>{const{width:S,height:w}=this.getCurrentSize();this._currentSize.width===S&&this._currentSize.height===w||(this._currentSize={width:S,height:w},this.resizeSync(S,w))},this._renderSync=(S={})=>{var w;const A=this;return this._beforeRender(S)&&((w=this._compiler)===null||w===void 0||w.render(S.morphConfig),this._updateAnimateState(!1),this._afterRender()),A},this._updateSpec=(S,w=!1,A)=>{var k;const C=this._spec,M={changeBackground:!1,reTransformSpec:!1,change:!1,reMake:!1,reCompile:!1,reSize:!1,changeTheme:!1};if(!this._setNewSpec(S,w))return;Ne(C.theme,this._spec.theme)?Ne(this._spec.background,C.background)||(M.reMake=!0,M.changeBackground=!0):M.changeTheme=!0;const R=this._shouldChartResize(C);if(M.reSize=R,this._spec.type!==C.type)return(k=this._compiler)===null||k===void 0||k.updateLayoutTag(),M.reMake=!0,M.reTransformSpec=!0,M.change=!0,M.changeTheme=!0,M;this._initChartSpec(this._spec,"updateSpec");const P=cp(this._chart.updateSpec(this._spec),M);return A?Object.assign(Object.assign({},P),A):P},this.getTheme=(...S)=>{if(!this._currentTheme||!S||!S.length)return;this._cachedProcessedTheme||(this._cachedProcessedTheme={});const w=S.join(".");if(this._cachedProcessedTheme[w])return this._cachedProcessedTheme[w];let A=this._currentTheme;return S.forEach((k,C)=>{if(C!==1||S[0]!=="series"&&S[0]!=="component")A=A?.[k];else{const M=S[0]==="series"?z.getSeriesBuiltInTheme(k):z.getComponentBuiltInTheme(k);A=A?Wt({},M,A[k]):M}C===S.length-1&&L(A)&&(A=Nnt({[k]:A},this._currentTheme.colorScheme,this._currentTheme.token)[k])}),this._cachedProcessedTheme[w]=A,A},Rnt(e),this._option=Object.assign(Object.assign({},this._option),e),e?.optimize&&(this._option.optimize=Object.assign(Object.assign({},this._option.optimize),e.optimize)),this._onError=(n=this._option)===null||n===void 0?void 0:n.onError;const d=this._option,{dom:f,renderCanvas:p,mode:g,stage:m,poptip:_}=d,v=XUt(d,["dom","renderCanvas","mode","stage","poptip"]),y=$l(g);if(y?RUt():g==="node"&&OUt(),y&&f&&(this._container=Ht(f)?Qt.getElementById(f):f),p&&(this._canvas=p),m&&(this._stage=m),g!=="node"&&!this._container&&!this._canvas&&!this._stage)return void((r=this._option)===null||r===void 0||r.onError("please specify container or renderCanvas!"));this._viewBox=this._option.viewBox,this._currentThemeName=Vs.getCurrentThemeName(),this._setNewSpec(t),this._updateCurrentTheme(),this._currentSize=this.getCurrentSize();const b=[];_!==!1&&b.push("poptipForText"),t.type==="sankey"&&b.push("scrollbar");const x=new Ee((s=this._option.logLevel)!==null&&s!==void 0?s:Ia.Error);Ee.setInstance(x),!((a=this._option)===null||a===void 0)&&a.onError&&x.addErrorHandler((...S)=>{var w,A;(A=(w=this._option)===null||w===void 0?void 0:w.onError)===null||A===void 0||A.call(w,...S)}),this._compiler=new uUt({dom:(o=this._container)!==null&&o!==void 0?o:"none",canvas:p},Object.assign(Object.assign({mode:this._option.mode,stage:m,pluginList:b},v),{background:this._getBackground(),onError:this._onError})),this._compiler.setSize(this._currentSize.width,this._currentSize.height),this._eventDispatcher=new J5t(this,this._compiler),this._event=new gz(this._eventDispatcher,g),this._compiler.initView(),this._compiler.updateLayoutTag(),this._setFontFamilyTheme(this.getTheme("fontFamily")),this._initDataSet(this._option.dataSet),this._autoSize=!!y&&((u=(l=t.autoFit)!==null&&l!==void 0?l:this._option.autoFit)===null||u===void 0||u),this._bindResizeEvent(),this._bindViewEvent(),this._initChartPlugin(),Ya.registerInstance(this),(h=(c=this._option.performanceHook)===null||c===void 0?void 0:c.afterCreateVChart)===null||h===void 0||h.call(c,this)}_setNewSpec(t,e){return!!t&&(Ht(t)&&(t=JSON.parse(t)),e&&this._originalSpec&&(t=Wt({},this._originalSpec,t)),this._originalSpec=t,this._spec=this._getSpecFromOriginalSpec(),!0)}_getSpecFromOriginalSpec(){var t;const e=uL(this._originalSpec);return e.data=(t=e.data)!==null&&t!==void 0?t:[],e}_initChartSpec(t,e){var n,r;x1.getFunctionList()&&x1.getFunctionList().length&&(t=cL(t,x1)),this._spec=t,this._chartSpecTransformer||(this._chartSpecTransformer=z.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),(n=this._chartSpecTransformer)===null||n===void 0||n.transformSpec(this._spec),this._chartPluginApply("onAfterChartSpecTransform",this._spec,e),this._specInfo=(r=this._chartSpecTransformer)===null||r===void 0?void 0:r.transformModelSpec(this._spec),this._chartPluginApply("onAfterModelSpecTransform",this._spec,this._specInfo,e)}_updateSpecInfo(){var t;this._chartSpecTransformer||(this._chartSpecTransformer=z.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),this._specInfo=(t=this._chartSpecTransformer)===null||t===void 0?void 0:t.createSpecInfo(this._spec)}_initChart(t){var e,n,r;if(!this._compiler)return void((e=this._option)===null||e===void 0||e.onError("compiler is not initialized"));if(this._chart)return void((n=this._option)===null||n===void 0||n.onError("chart is already initialized"));const s=z.createChart(t.type,t,this._getChartOption(t.type));s?(this._chart=s,this._chart.setCanvasRect(this._currentSize.width,this._currentSize.height),this._chart.created(this._chartSpecTransformer),this._chart.init(),this._event.emit(Tt.initialized,{chart:s,vchart:this})):(r=this._option)===null||r===void 0||r.onError("init chart fail")}_releaseData(){this._dataSet&&(this._dataSet.dataViewMap={},this._dataSet=null)}_bindViewEvent(){var t,e;this._compiler&&((e=(t=this._compiler.getStage())===null||t===void 0?void 0:t.getTimeline())===null||e===void 0||e.on("animationEnd",()=>{this._event.emit(Tt.animationFinished,{chart:this._chart,vchart:this})}))}_bindResizeEvent(){var t,e;if(this._autoSize){if(this._onResize=ac(this._doResize,(t=this._option.resizeDelay)!==null&&t!==void 0?t:100),this._container){const n=window.ResizeObserver;n&&(this._observer=new n(this._onResize),(e=this._observer)===null||e===void 0||e.observe(this._container))}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this._autoSize&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}getCurrentSize(){var t,e,n,r;return qnt(this._spec,{container:this._container,canvas:this._canvas,mode:this._getMode(),modeParams:this._option.modeParams},{width:(e=(t=this._currentSize)===null||t===void 0?void 0:t.width)!==null&&e!==void 0?e:Fp,height:(r=(n=this._currentSize)===null||n===void 0?void 0:n.height)!==null&&r!==void 0?r:zp})}_initDataSet(t){this._dataSet=t instanceof lh?t:new lh,Ul(this._dataSet,"dataview",uM),Ul(this._dataSet,"array",iJ),Vt(this._dataSet,"copyDataView",nT);for(const e in z.transforms)Vt(this._dataSet,e,z.transforms[e]);for(const e in z.dataParser)Ul(this._dataSet,e,z.dataParser[e])}updateCustomConfigAndRerender(t,e,n={}){if(!this._isReleased&&t)return it(t)&&(t=t()),t.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._reCompile(t),e?this._renderSync(n):this._renderAsync(n)}_updateCustomConfigAndRecompile(t,e={}){return!!t&&(this._reCompile(t),this._beforeRender(e))}_reCompile(t,e){var n,r,s,a,o,l,u;if(t.reMake&&(this._releaseData(),this._initDataSet(),(n=this._chart)===null||n===void 0||n.release(),this._chart=null),t.reTransformSpec&&(this._chartSpecTransformer=null),t.changeTheme?(this._setCurrentTheme(),this._setFontFamilyTheme(this.getTheme("fontFamily"))):t.changeBackground&&((r=this._compiler)===null||r===void 0||r.setBackground(this._getBackground())),t.reMake?((s=this._compiler)===null||s===void 0||s.releaseGrammar(),this._userEvents.forEach(c=>{var h;return(h=this._event)===null||h===void 0?void 0:h.on(c.eType,c.query,c.handler)})):t.reCompile&&((a=this._compiler)===null||a===void 0||a.clear({chart:this._chart,vChart:this}),(o=this._compiler)===null||o===void 0||o.compile({chart:this._chart,vChart:this})),t.reSize){const{width:c,height:h}=this.getCurrentSize();this._currentSize={width:c,height:h},(l=this._chart)===null||l===void 0||l.onResize(c,h,!1),(u=this._compiler)===null||u===void 0||u.resize(c,h,!1)}}_beforeRender(t={}){var e,n,r,s,a,o,l,u;if(this._isReleased)return!1;if(this._chart)return!0;const{transformSpec:c,actionSource:h}=t;return c&&this._initChartSpec(this._spec,"render"),this._chartPluginApply("onBeforeInitChart",this._spec,h),(n=(e=this._option.performanceHook)===null||e===void 0?void 0:e.beforeInitializeChart)===null||n===void 0||n.call(e,this),this._initChart(this._spec),(s=(r=this._option.performanceHook)===null||r===void 0?void 0:r.afterInitializeChart)===null||s===void 0||s.call(r,this),!(!this._chart||!this._compiler)&&(this._chartPluginApply("onAfterInitChart",this._spec,h),(o=(a=this._option.performanceHook)===null||a===void 0?void 0:a.beforeCompileToVGrammar)===null||o===void 0||o.call(a,this),this._compiler.compile({chart:this._chart,vChart:this},t),(u=(l=this._option.performanceHook)===null||l===void 0?void 0:l.afterCompileToVGrammar)===null||u===void 0||u.call(l,this),!0)}_afterRender(){return!this._isReleased&&(this._event.emit(Tt.rendered,{chart:this._chart,vchart:this}),!0)}renderSync(t){return this._renderSync({morphConfig:t,transformSpec:!0,actionSource:"render"})}renderAsync(t){return So(this,void 0,void 0,function*(){return this._renderAsync({morphConfig:t,transformSpec:!0,actionSource:"render"})})}_renderAsync(t={}){return So(this,void 0,void 0,function*(){return this._renderSync(t)})}_updateAnimateState(t){var e,n;if(this.isAnimationEnable()){const r=s=>{var a;const o=(a=s.context)===null||a===void 0?void 0:a.diffState;return t?o==="exit"?ui.none:ui.appear:o};(e=this._chart)===null||e===void 0||e.getAllRegions().forEach(s=>{s.updateAnimateStateCallback(r)}),(n=this._chart)===null||n===void 0||n.getAllComponents().forEach(s=>{s.updateAnimateStateCallback(r)})}}release(){var t,e,n,r;!((t=this._onResize)===null||t===void 0)&&t.cancel&&this._onResize.cancel(),this._chartPluginApply("releaseAll"),this._chartPlugin=null,this._chartSpecTransformer=null,(e=this._chart)===null||e===void 0||e.release(),(n=this._eventDispatcher)===null||n===void 0||n.release(),(r=this._compiler)===null||r===void 0||r.release(),this._unBindResizeEvent(),this._releaseData(),this._onError=null,this._onResize=null,this._container=null,this._currentTheme=null,this._cachedProcessedTheme=null,this._option=null,this._chart=null,this._compiler=null,this._spec=null,this._specInfo=null,this._originalSpec=null,this._userEvents=null,this._event=null,this._eventDispatcher=null,this._isReleased=!0,Ya.unregisterInstance(this)}updateData(t,e,n,r){return So(this,void 0,void 0,function*(){return this.updateDataSync(t,e,n,r)})}_updateDataById(t,e,n){const r=this._spec.data.find(s=>s.name===t||s.id===t);r?r.id===t?r.values=e:r.name===t&&r.parse(e,n):J(e)?this._spec.data.push({id:t,values:e}):this._spec.data.push(e)}updateDataInBatches(t){return So(this,void 0,void 0,function*(){return this._chart?(this._chart.updateFullData(t.map(({id:e,data:n,options:r})=>({id:e,values:n,parser:r}))),this._chart.updateGlobalScaleDomain(),this._compiler.render(),this):(this._spec.data=X(this._spec.data),t.forEach(({id:e,data:n,options:r})=>{this._updateDataById(e,n,r)}),this)})}updateDataSync(t,e,n,r){return N(this._dataSet)?this:this._chart?(this._chart.updateData(t,e,!0,n),r?.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._compiler.render(),this):(this._spec.data=X(this._spec.data),this._updateDataById(t,e,n),this)}updateFullDataSync(t,e=!0,n){if(this._chart)return this._chart.updateFullData(t),e&&(n?.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._compiler.render()),this;const r=X(this._spec.data);return X(t).forEach(s=>{const{id:a,values:o,parser:l,fields:u}=s,c=r.find(h=>h.name===a);if(c)c instanceof je?(c.setFields(Jr(u)),c.parse(o,Jr(l))):(c.values=o,L(l)&&(c.parser=l),L(u)&&(c.fields=u));else{const h=mz(s,this._dataSet,r);J(this._spec.data)&&this._spec.data.push(h)}}),this}updateFullData(t,e=!0){return So(this,void 0,void 0,function*(){return this.updateFullDataSync(t,e)})}updateSpec(t,e=!1,n,r){return So(this,void 0,void 0,function*(){const s=this._updateSpec(t,e,r);return s?(yield this.updateCustomConfigAndRerender(s,!1,{morphConfig:n,transformSpec:s.reTransformSpec,actionSource:"updateSpec"}),this):this})}updateSpecSync(t,e=!1,n,r){const s=this._updateSpec(t,e,r);return s?(this.updateCustomConfigAndRerender(s,!0,{morphConfig:n,transformSpec:s.reTransformSpec,actionSource:"updateSpec"}),this):this}updateSpecAndRecompile(t,e=!1,n={}){const r=this._updateSpec(t,e);return this._updateCustomConfigAndRecompile(r,Object.assign({actionSource:"updateSpecAndRecompile"},n))}updateModelSpec(t,e,n=!1,r){return So(this,void 0,void 0,function*(){return this.updateModelSpecSync(t,e,n,r)})}updateModelSpecSync(t,e,n=!1,r){if(!e||!this._spec)return this;if(Ht(e)&&(e=JSON.parse(e)),it(t)||O5t(this._spec,t,e,n),this._chart){const s=this._chart.getModelInFilter(t);if(s)return this._updateModelSpec(s,e,!0,n,r)}return this}_updateModelSpec(t,e,n=!1,r=!1,s){r&&(e=Wt({},t.getSpec(),e));const a=t.updateSpec(e);return t.reInit(e),(a.change||a.reCompile||a.reMake||a.reSize||a.reRender)&&this._chart.reDataFlow(),this.updateCustomConfigAndRerender(a,n,{morphConfig:s,transformSpec:!1,actionSource:"updateModelSpec"})}resize(t,e){return So(this,void 0,void 0,function*(){return this.resizeSync(t,e)})}resizeSync(t,e){var n,r;return this._beforeResize(t,e)?((r=(n=this._compiler).resize)===null||r===void 0||r.call(n,t,e),this._afterResize()):this}_beforeResize(t,e){var n,r,s,a;if(!this._chart||!this._compiler)return!1;const o=this._chart.getCanvasRect();return(!o||o.width!==t||o.height!==e)&&(this._chartPluginApply("onBeforeResize",t,e),(r=(n=this._option.performanceHook)===null||n===void 0?void 0:n.beforeResizeWithUpdate)===null||r===void 0||r.call(n,this),this._chart.onResize(t,e,!1),(a=(s=this._option.performanceHook)===null||s===void 0?void 0:s.afterResizeWithUpdate)===null||a===void 0||a.call(s,this),!0)}_afterResize(){return this._isReleased||this._event.emit(Tt.afterResize,{chart:this._chart}),this}updateViewBox(t,e=!0,n=!0){return this._chart&&this._compiler?(this._viewBox=t,this._chart.updateViewBox(t,n),n&&(this._compiler.render(),this._chart.onEvaluateEnd()),this._compiler.updateViewBox(t,e),this):this}on(t,e,n){var r;this._userEvents&&(this._userEvents.push({eType:t,query:typeof e=="function"?null:e,handler:typeof e=="function"?e:n}),(r=this._event)===null||r===void 0||r.on(t,e,n))}off(t,e){var n;if(this._userEvents&&this._userEvents.length!==0)if(e){const r=this._userEvents.findIndex(s=>s.eType===t&&s.handler===e);r>=0&&(this._userEvents.splice(r,1),(n=this._event)===null||n===void 0||n.off(t,e))}else this._userEvents.forEach(r=>{var s;r.eType===t&&((s=this._event)===null||s===void 0||s.off(t,r.handler))}),this._userEvents=this._userEvents.filter(r=>r.eType!==t)}updateState(t,e){this._chart&&this._chart.updateState(t,e)}setSelected(t,e,n){this._chart&&this._chart.setSelected(t,e,n)}setHovered(t,e,n){this._chart&&this._chart.setHovered(t,e,n)}clearState(t){this._chart&&this._chart.clearState(t)}clearAllStates(){this._chart&&this._chart.clearAllStates()}clearSelected(){this._chart&&this._chart.clearSelected()}clearHovered(){this._chart&&this._chart.clearHovered()}_updateCurrentTheme(t){var e,n,r;const s=this._option.theme,a=(e=this._spec)===null||e===void 0?void 0:e.theme,o=(n=this._spec)===null||n===void 0?void 0:n.type;t&&(this._currentThemeName=t);const l=(c,h)=>{var d;return!((d=h.chart)===null||d===void 0)&&d[c]&&(h=v1({},h,h.chart[c])),h};let u;if(Lt(s)&&Lt(a))u=mc(this._currentThemeName),this._currentTheme=l(o,u);else if(Ht(s)&&(!a||Ht(a))||Ht(a)&&(!s||Ht(s))){const c=v1({},mc(this._currentThemeName),mc(s),mc(a));this._currentTheme=l(o,c)}else{const c=v1({},mc(this._currentThemeName),mc(s),mc(a));this._currentTheme=l(o,c)}this._cachedProcessedTheme=null,R3t(this.getTheme("component","poptip")),(r=this._compiler)===null||r===void 0||r.setBackground(this._getBackground())}_shouldChartResize(t){var e,n;let r=!1;N(this._spec.width)?!N(t.width)&&(this._spec.width=t.width):this._spec.width!==t.width&&(r=!0),N(this._spec.height)?!N(t.height)&&(this._spec.height=t.height):this._spec.height!==t.height&&(r=!0);const s=this._autoSize;return this._autoSize=!!$l(this._option.mode)&&((n=(e=this._spec.autoFit)!==null&&e!==void 0?e:this._option.autoFit)===null||n===void 0||n),this._autoSize!==s&&(r=!0),r}_getBackground(){return(typeof this._spec.background=="string"||ee(this._spec.background)&&this._spec.background.gradient?this._spec.background:null)||this.getTheme("background")||this._option.background}getCurrentTheme(){return mc(this._currentThemeName)}getCurrentThemeName(){return this._currentThemeName}setCurrentTheme(t){return So(this,void 0,void 0,function*(){return this.setCurrentThemeSync(t)})}setCurrentThemeSync(t){if(!Vs.themeExist(t))return this;const e=this._setCurrentTheme(t);return this._setFontFamilyTheme(this.getTheme("fontFamily")),this.updateCustomConfigAndRerender(e,!0,{transformSpec:!1,actionSource:"setCurrentTheme"}),this}_setCurrentTheme(t){var e;return this._updateCurrentTheme(t),this._initChartSpec(this._getSpecFromOriginalSpec(),"setCurrentTheme"),(e=this._chart)===null||e===void 0||e.setCurrentTheme(),{change:!0,reMake:!1}}_setFontFamilyTheme(t){var e;t&&((e=this.getStage())===null||e===void 0||e.setTheme({text:{fontFamily:t},richtext:{fontFamily:t}}))}_getTooltipComponent(){var t;return(t=this._chart)===null||t===void 0?void 0:t.getComponentsByType(lt.tooltip)[0]}setTooltipHandler(t){var e,n;this._context.tooltipHandler=t;const r=this._getTooltipComponent();r&&((n=(e=r.tooltipHandler)===null||e===void 0?void 0:e.release)===null||n===void 0||n.call(e),r.tooltipHandler=t)}getTooltipHandlerByUser(){var t;return(t=this._context)===null||t===void 0?void 0:t.tooltipHandler}getTooltipHandler(){const t=this._getTooltipComponent();return t?t.tooltipHandler:this._context.tooltipHandler}showTooltip(t,e){var n;const r=this._getTooltipComponent();return(n=L(t)&&r?.showTooltip(t,e)!=="none")!==null&&n!==void 0&&n}hideTooltip(){var t;const e=this._getTooltipComponent();return(t=e?.hideTooltip())!==null&&t!==void 0&&t}getLegendDataById(t){var e;const n=(e=this._chart)===null||e===void 0?void 0:e.getComponentByUserId(t);return n?n.getLegendData():[]}getLegendDataByIndex(t=0){var e;const n=(e=this._chart)===null||e===void 0?void 0:e.getComponentsByType(lt.discreteLegend);return n&&n[t]?n[t].getLegendData():[]}getLegendSelectedDataById(t){var e;const n=(e=this._chart)===null||e===void 0?void 0:e.getComponentByUserId(t);return n?n.getSelectedData():[]}getLegendSelectedDataByIndex(t=0){var e;const n=(e=this._chart)===null||e===void 0?void 0:e.getComponentsByType(lt.discreteLegend);return n&&n[t]?n[t].getSelectedData():[]}setLegendSelectedDataById(t,e){var n;const r=(n=this._chart)===null||n===void 0?void 0:n.getComponentByUserId(t);r&&r.setSelectedData(e)}setLegendSelectedDataByIndex(t=0,e){var n;const r=(n=this._chart)===null||n===void 0?void 0:n.getComponentsByType(lt.discreteLegend);r&&r[t]&&r[t].setSelectedData(e)}getDataURL(){var t;return So(this,void 0,void 0,function*(){const e=this.getStage();if(this._chart&&e){e.render();const n=this._chart.getCanvas();return yield fUt(n,{onError:this._onError})}return(t=this._option)===null||t===void 0||t.onError(new ReferenceError("render is not defined")),null})}exportImg(t){var e,n;return So(this,void 0,void 0,function*(){if(!$l(this._option.mode))return void((e=this._option)===null||e===void 0||e.onError(new TypeError("non-browser environment can not export img")));const r=yield this.getDataURL();r?hUt(t,r):(n=this._option)===null||n===void 0||n.onError(new ReferenceError("render is not defined"))})}exportCanvas(){var t;const e=this.getStage();if(this._chart&&e)return e.toCanvas();(t=this._option)===null||t===void 0||t.onError(new ReferenceError("render is not defined"))}getImageBuffer(){var t,e;if(this._option.mode!=="node")return void((t=this._option)===null||t===void 0||t.onError(new TypeError("getImageBuffer() now only support node environment.")));const n=this.getStage();return n?(n.render(),n.window.getImageBuffer()):((e=this._option)===null||e===void 0||e.onError(new ReferenceError("render is not defined")),null)}setLayout(t){var e;this._option.layout=t,(e=this._chart)===null||e===void 0||e.setLayout(t)}reLayout(){var t;this._chart.resetLayoutItemTag(),(t=this._chart)===null||t===void 0||t.setLayoutTag(!0)}getCompiler(){return this._compiler}getChart(){return this._chart}getStage(){return this._compiler.getStage()}getCanvas(){var t;return(t=this._compiler)===null||t===void 0?void 0:t.getCanvas()}getContainer(){var t;if(L(this._container))return this._container;let e;return e=Ht(this._canvas)?Qt.getElementById(this._canvas):this._canvas,L(e)?e.parentElement:(t=this.getCanvas())===null||t===void 0?void 0:t.parentElement}getComponents(){return this._chart.getAllComponents()}getScale(t){var e;const n=(e=this._chart)===null||e===void 0?void 0:e.getGlobalScale();return n?.getScale(t)}setDimensionIndex(t,e={}){var n;return(n=this._chart)===null||n===void 0?void 0:n.setDimensionIndex(t,e)}showCrosshair(t){var e;(e=this._chart)===null||e===void 0||e.showCrosshair(t)}stopAnimation(){var t;(t=this.getStage())===null||t===void 0||t.stopAnimation(!0)}reRunNormalAnimation(){var t;(t=this.getStage())===null||t===void 0||t.reApplyAnimationState("normal",!0)}pauseAnimation(){var t;(t=this.getStage())===null||t===void 0||t.pauseAnimation(!0)}resumeAnimation(){var t;(t=this.getStage())===null||t===void 0||t.resumeAnimation(!0)}convertDatumToPosition(t,e={},n=!1,r){var s;if(!this._chart||Lt(t))return null;const{seriesId:a,seriesIndex:o=0}=e;let l;if(L(a)?l=this._chart.getSeriesInUserId(a):L(o)&&(l=(s=this._chart.getSeriesInIndex([o]))===null||s===void 0?void 0:s[0]),l){const u=Object.keys(t),c=l.getViewData().latestData.find(f=>u.every(p=>f[p]==t[p])),h=l.getRegion().getLayoutStartPoint();let d;return d=c?l.dataToPosition(c,r):l.dataToPosition(t,r),d?Q4(d,h,n):null}return null}convertValueToPosition(t,e,n=!1){var r,s;if(!this._chart||N(t)||Lt(e))return null;if(!J(t)){const{axisId:u,axisIndex:c}=e;let h;if(L(u)?h=this._chart.getComponentsByKey("axes").find(f=>f.userId===u):L(c)&&(h=(r=this._chart.getComponentsByKey("axes"))===null||r===void 0?void 0:r[c]),!h)return es("Please check whether the `axisId` or `axisIndex` is set!"),null;const d=h?.valueToPosition(t);if(n){const f=h.getLayoutStartPoint(),p=h.getOrient();return d+(p==="bottom"||p==="top"?f.x:f.y)}return d}const{seriesId:a,seriesIndex:o}=e;let l;return L(a)?l=this._chart.getSeriesInUserId(a):L(o)&&(l=(s=this._chart.getSeriesInIndex([o]))===null||s===void 0?void 0:s[0]),l?Q4(l.valueToPosition(t[0],t[1]),l.getRegion().getLayoutStartPoint(),n):(es("Please check whether the `seriesId` or `seriesIndex` is set!"),null)}getFunction(t){return ua.instance().getFunction(t)}registerFunction(t,e){t&&e&&ua.instance().registerFunction(t,e)}unregisterFunction(t){t&&ua.instance().unregisterFunction(t)}getFunctionList(){return ua.instance().getFunctionNameList()}setRuntimeSpec(t){this._spec=t,this._updateSpecInfo()}updateIndicatorDataById(t,e){var n;const r=(n=this._chart)===null||n===void 0?void 0:n.getComponentByUserId(t);r&&r.updateDatum(e)}updateIndicatorDataByIndex(t=0,e){var n;const r=(n=this._chart)===null||n===void 0?void 0:n.getComponentsByType(lt.indicator);r&&r[t]&&r[t].updateDatum(e)}geoZoomByIndex(t=0,e,n){this._geoZoomByQuery({regionIndex:t},e,n)}geoZoomById(t,e,n){this._geoZoomByQuery({regionId:t},e,n)}_geoZoomByQuery(t,e,n){var r,s;const a=(r=this._chart)===null||r===void 0?void 0:r.getRegionsInQuerier(t)[0],o=(s=this._chart)===null||s===void 0?void 0:s.getComponentsByType(lt.geoCoordinate),l=o?.find(u=>{var c;return(c=u.getRegions())===null||c===void 0?void 0:c.includes(a)});l&&l.dispatchZoom(e,n)}_initChartPlugin(){const t=z.getChartPlugins();t.length>0&&(this._chartPlugin=new DUt(this),this._chartPlugin.load(t.map(n=>new n)),this._chartPluginApply("onInit",this._spec));const e=z.getVChartPlugins();e.length>0&&(this._vChartPlugin=new YUt(this),this._vChartPlugin.load(e.map(n=>new n)),this._vChartPlugin.onInit())}_chartPluginApply(t,...e){this._chartPlugin&&this._chartPlugin[t]&&this._chartPlugin[t].apply(this._chartPlugin,e)}_getMode(){return this._option.mode||wn["desktop-browser"]}isAnimationEnable(){return"animation"in this._option?!!this._option.animation:this._spec.animation!==!1}_getChartOption(t){return{type:t,globalInstance:this,eventDispatcher:this._eventDispatcher,dataSet:this._dataSet,container:this._container,canvas:this._canvas,map:new Map,mode:this._getMode(),modeParams:this._option.modeParams,getCompiler:()=>this._compiler,viewBox:this._viewBox,getTheme:this.getTheme,getSpecInfo:()=>{var e;return(e=this._specInfo)!==null&&e!==void 0?e:{}},layout:this._option.layout,onError:this._onError,disableTriggerEvent:this._option.disableTriggerEvent===!0,componentShowContent:this._option.componentShowContent}}};he.InstanceManager=Ya,he.ThemeManager=Vs,he.globalConfig={uniqueTooltip:!0},he.Utils=EUt,he.vglobal=Qt;z.registerRegion("region",b1),z.registerLayout("base",yz),bz(),VUt(),UUt(),GUt(),hz(J4.name,J4);const grt="monotone",mrt="linear",KUt="bevel";function Ws(i,t){return t("component",i)}function Ju(i,t,e,n){if(i)return{formatFunc:i,args:[e,n]};const r=z.getFormatter();return t&&r?{formatFunc:r,args:[e,n,t]}:{}}const tl=(i,t,e,n)=>{if(N(i[t]))return;const r=J(i[t]),s=r?i[t]:[i[t]],a=[];return s.forEach((o,l)=>{!o||n&&!n(o)||a.push({spec:o,specPath:r?[t,l]:[t],specInfoPath:["component",t,l],type:e})}),a},_rt=(i,t)=>{if(!t.from||!t.from())return i;const e=t.fields,n=t.key,r=t.values,s=t.default,a=t.as||[e],o=t.from().reduce(function(u,c){return c[e]&&u.set(c[e],c),u},new Map);let l;if(it(t.set))l=function(u){const c=o.get(u[n]);t.set(u,c)};else if(r){const u=r.length;l=function(c){const h=o.get(c[n]);if(N(h))for(let d=0;d<u;++d)c[a[d]]=s;else for(let d=0;d<u;++d)c[a[d]]=h[r[d]]}}else l=function(u){const c=o.get(u[n]);u[a[0]]=L(c)?c:s};return i.length===0?[]:i.map(u=>(l(u),u))},Vm=(i,t)=>{const e=t.beforeCall();return i&&i.forEach((n,r)=>t.call(n,r,e)),e.keyMap&&(e.keyMap.clear(),e.keyMap=null),i},pd=(i,t,e,n)=>{let r;if(r=it(i)?i(t,e):no(i)&&L(i.field)?be(t,i.field):i,n){const{formatFunc:s,args:a}=Ju(void 0,n,i,t);s&&a&&(r=s(...a))}return r},gG=(i,t,e)=>N(i)?i:it(i)?i(t,e):i;function qUt(i){var t;const e=!((t=i[0])===null||t===void 0)&&t.series?[{data:i,value:""}]:i;for(const{data:n}of e)for(const{datum:r}of n)for(const s of r??[])if(s)return s}var ZUt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};const QUt=i=>{var t,e,n;if(i?.visible===!1)return[];const r={mark:((t=i?.mark)===null||t===void 0?void 0:t.visible)!==!1,dimension:((e=i?.dimension)===null||e===void 0?void 0:e.visible)!==!1,group:((n=i?.group)===null||n===void 0?void 0:n.visible)!==!1};return L(i?.activeType)&&Object.keys(r).forEach(s=>{var a;r[s]=(a=i?.activeType)===null||a===void 0?void 0:a.includes(s)}),Object.keys(r).filter(s=>r[s])},Az=(i,t)=>!t||t.visible!==!1&&(!t[i]||t[i].visible!==!1)&&!(t.activeType&&!(J(t.activeType)?t.activeType.includes(i):t.activeType===i));function JUt(i){return N(i.mark)&&N(i.model)&&N(i.datum)}function pL(i,t,e,n,r,s){const a=o=>{if(o){const l={datum:r},u=N(o.key)&&N(o.value)&&!Lt(o)?Object.assign(Object.assign(Object.assign({},n),e),o):Object.assign(Object.assign({},n),o),{key:c,keyFormatter:h,keyTimeFormat:d,keyTimeFormatMode:f,value:p,valueFormatter:g,valueTimeFormat:m,valueTimeFormatMode:_}=u,v=ZUt(u,["key","keyFormatter","keyTimeFormat","keyTimeFormatMode","value","valueFormatter","valueTimeFormat","valueTimeFormatMode"]);l.key=gL(pd(c,r,s,h),d,f),l.value=gL(pd(p,r,s,g),m,_),Object.keys(v).forEach(y=>{l[y]=pd(u[y],r,s)}),l.visible!==!1&&(L(l.key)||L(l.value))&&i.push(l)}};J(t)?t.forEach(o=>{a(o)}):a(t)}function mG(i,t,e,n,r,s,a){it(t)?pL(i,t(r,a),e,n,s,a):t&&pL(i,t,e,n,s,a)}function t4t(i,t,e,n,r,s){if(r&&r.length){const a=[];return r.forEach(o=>{J(i)?i.forEach(l=>{mG(a,l,t,e,n,o,s)}):it(i)?mG(a,i,t,e,n,o,s):i&&pL(a,i,t,e,o,s)}),a}return null}function e4t(i){if(!i||!i.length)return null;const t=[];return i.forEach(({content:e})=>{e&&e.forEach(n=>{t.push(n)})}),t.length?Object.assign(Object.assign({},i[0]),{content:t}):i[0]}const gL=(i,t,e)=>{if(!t&&!e)return typeof i!="object"?i?.toString():i;const n=No.getInstance();return t=t||"%Y%m%d",((e=e||"local")==="local"?n.timeFormat:n.timeUTCFormat)(t,i)};class pr{constructor(t){this.activeTriggerSet={mark:new Set,group:new Set},this.ignoreTriggerSet={mark:new Set},this._getSeriesCacheInfo=()=>{var e,n,r;const{series:s}=this,a=s.getSeriesField();return{seriesFields:L(a)?X(a):(e=s.getSeriesKeys())!==null&&e!==void 0?e:[],dimensionFields:(n=s.getDimensionField())!==null&&n!==void 0?n:[],measureFields:(r=s.getMeasureField())!==null&&r!==void 0?r:[],type:s.type}},this._getDimensionData=e=>{const{dimensionFields:n}=this._seriesCacheInfo;return n[0]&&e?.[n[0]]},this._getMeasureData=e=>{const{measureFields:n}=this._seriesCacheInfo;return n[0]&&e?.[n[0]]},this._getSeriesFieldData=e=>{const{dimensionFields:n,seriesFields:r}=this._seriesCacheInfo;if(L(r[0])&&e?.[r[0]])return e?.[r[0]];const s=n[n.length-1];return n.length>1&&(r.length===0||this.series.getSeriesKeys().length),e?.[s]},this._getSeriesStyle=(e,n,r)=>{var s;for(const a of X(n)){const o=(s=this.series.getSeriesStyle(e))===null||s===void 0?void 0:s(a);if(L(o))return o}return r},this.markTooltipKeyCallback=(e,n)=>this._getSeriesFieldData(e),this.markTooltipValueCallback=(e,n)=>this._getMeasureData(e),this.shapeTypeCallback=(e,n)=>{var r;return(r=this._getSeriesStyle(e,"shape",null))!==null&&r!==void 0?r:this._getSeriesStyle(e,"symbolType",this.series.getDefaultShapeType())},this.shapeColorCallback=(e,n)=>this._getSeriesStyle(e,["fill","stroke"]),this.shapeStrokeCallback=(e,n)=>this._getSeriesStyle(e,["stroke","fill"]),this.dimensionTooltipTitleCallback=(e,n)=>this._getDimensionData(e),this.groupTooltipTitleCallback=(e,n)=>this._getSeriesFieldData(e),this.groupTooltipKeyCallback=(e,n)=>{const{seriesFields:r}=this._seriesCacheInfo;let s=this._seriesCacheInfo.dimensionFields;return r[0]&&(s=s.filter(a=>a!==r[0])),s.map(a=>e?.[a]).join("-")},this.getHasShape=e=>!!e,this.series=t,this.updateTooltipSpec()}updateTooltipSpec(){var t;const e=(t=this.series.getSpec())===null||t===void 0?void 0:t.tooltip;this.spec=e,this._seriesCacheInfo=this._getSeriesCacheInfo()}getShapeAttrs(t,e,n){var r,s,a,o,l,u,c,h,d,f,p,g;const m=e?"content":"title",_=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(r=n?.style)===null||r===void 0?void 0:r.shape),n?.[t]),(s=n?.[t])===null||s===void 0?void 0:s[m]),(a=this.spec)===null||a===void 0?void 0:a[t]),(l=(o=this.spec)===null||o===void 0?void 0:o[t])===null||l===void 0?void 0:l[m]);return{shapeType:(u=_.shapeType)!==null&&u!==void 0?u:this.shapeTypeCallback,shapeFill:(h=(c=_.shapeFill)!==null&&c!==void 0?c:_.shapeColor)!==null&&h!==void 0?h:this.shapeColorCallback,shapeStroke:(d=_.shapeStroke)!==null&&d!==void 0?d:this.shapeStrokeCallback,shapeHollow:(f=_.shapeHollow)!==null&&f!==void 0&&f,shapeLineWidth:_.shapeLineWidth,shapeSize:(p=_.shapeSize)!==null&&p!==void 0?p:_.size,hasShape:(g=_.hasShape)!==null&&g!==void 0?g:this.getHasShape(e)}}enableByType(t){return!0}getDefaultContentList(t){return[this.getDefaultContentPattern(t)]}getContentList(t,e,n,r,s,a){var o;return t4t((o=e?.content)!==null&&o!==void 0?o:this.getDefaultContentList(t),this.getDefaultContentPattern(t),n,r,s,a)}getTitleResult(t,e,n,r,s){let a=it(e)?e(r,s):e;if(a?N(a.value)&&(a=Object.assign(Object.assign({},this.getDefaultTitlePattern(t)),a)):a=this.getDefaultTitlePattern(t),a&&a.visible!==!1){const o=qUt(r),l={visible:pd(a.visible,o,s),value:gL(pd(a.value,o,s,a.valueFormatter),a.valueTimeFormat,a.valueTimeFormatMode),valueStyle:pd(a.valueStyle,o,s),hasShape:a.hasShape};return Object.keys(n).forEach(u=>{l[u]=pd(n[u],o,s)}),l}return{hasShape:!1,visible:!1}}getTooltipData(t,e,n,r,s){var a,o;if(!(this.enableByType(t)&&Az(t,this.spec)&&(t!=="dimension"||r&&r.length)))return null;const l=(o=(a=this.spec)===null||a===void 0?void 0:a[t])!==null&&o!==void 0?o:e?.[t],u=this.getShapeAttrs(t,!0,e),c=this.getShapeAttrs(t,!1,e);let h;return t==="dimension"?(h=[],this.getContentList(t,l,u,n,r,s).forEach(d=>{h.push(d)})):h=this.getContentList(t,l,u,n,r,s),{visible:!0,activeType:t,data:n,title:this.getTitleResult(t,l?.title,c,n,s),content:h}}getDefaultTitlePattern(t){return{key:void 0,value:t==="group"?this.groupTooltipTitleCallback:this.dimensionTooltipTitleCallback}}getDefaultContentPattern(t){return{seriesId:this.series.id,key:t==="group"?this.groupTooltipKeyCallback:this.markTooltipKeyCallback,value:this.markTooltipValueCallback}}}const i4t={min:i=>i.length?Rn(i.map(t=>1*t)):0,max:i=>i.length?rn(i.map(t=>1*t)):0,"array-min":i=>i.length?Rn(i.map(t=>1*t)):0,"array-max":i=>i.length?rn(i.map(t=>1*t)):0,values:i=>{const t={},e=[];for(const n of i)t[n]||(e.push(n),t[n]=1);return e}},mL=(i,t)=>{var e,n;let r=t.fields;if(it(r)&&(r=r()),!r?.length||!i?.length)return{};r=xg([],r);const s=t.target==="parser"?"parserData":"latestData",a=i[0][s]?i[0][s]:i||[],o=(n=(e=i[0]).getFields)===null||n===void 0?void 0:n.call(e);return vrt(a,r,o)},vrt=(i,t,e)=>{const n={};let r=[],s=[];return t.forEach(a=>{const o=a.key;n[o]={};const l=e?.[o],u=a.operations,c=u.some(f=>f==="min"||f==="max"||f==="allValid");let h=!0;r.length=0,i&&i.forEach(f=>{f&&r.push(f[o])});const d=r.length;if(c){s.length=0,r.forEach((p,g)=>{Qg(p)&&s.push(p)});const f=r;r=s,s=f,h=r.length===d}else r=u.some(f=>f==="array-min"||f==="array-max")?r.reduce((f,p)=>(p&&p.forEach(g=>{Qg(g)&&f.push(g)}),f),[]):r.filter(f=>f!==void 0);a.filter&&(r=r.filter(a.filter)),u.forEach(f=>{if(a.customize)n[o][f]=a.customize;else{if(l&&l.lockStatisticsByDomain===!0&&!N(l.domain)){if(f==="values")return void(n[o][f]=l.domain.slice())}else if(f==="allValid")return;n[o][f]=i4t[f](r),f==="array-max"&&(n[o].max=n[o][f]),f==="array-min"&&(n[o].min=n[o][f])}}),c&&(n[o].allValid=h)}),n},n4t=(i,t)=>{const{config:e}=t;if(!e)return i;const{invalidType:n,checkField:r}=e();return n!=="zero"||r&&r.length&&i.forEach(s=>{r.forEach(a=>{Qg(s[a])||(s[a]=0)})}),i},_L=`${zt}_HIERARCHY_DEPTH`,nf=`${zt}_HIERARCHY_ROOT`,r4t=`${zt}_HIERARCHY_ROOT_INDEX`;function om(){return{keyMap:new Map,needDefaultSeriesField:!this._seriesField,defaultSeriesField:this._seriesField?null:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey)}}function rf(i,t,e){i&&(e.needDefaultSeriesField&&(i[gs]=e.defaultSeriesField),i[hr]=t,i[ys]=e.getKey(i,t,e))}function kz(){return{keyMap:new Map,needDefaultSeriesField:!0,defaultSeriesField:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey),categoryField:this.getCategoryField()}}function hT(i,t,e,n=0,r,s){s===void 0&&(s=t),rf(i,t,e),i[_L]=n,i[nf]=r||i[e.categoryField],i[r4t]=s,i.children&&i.children.length&&i.children.forEach((a,o)=>hT(a,o,e,i[_L]+1,i[nf],s))}const Bi={label:{name:"label",type:"text"}},_G=`${zt}_rect_x`,vG=`${zt}_rect_x1`,yG=`${zt}_rect_y`,bG=`${zt}_rect_y1`,s4t={data:!0},xG={invalidType:!0,animation:!0,animationAppear:!0,animationEnter:!0,animationUpdate:!0,animationExit:!0,animationNormal:!0},SG=[...Object.keys(Ll),"normal"];function ye(i={},t,e){const n={};for(let r=0;r<SG.length;r++){const s=SG[r],a=t?t[s]:void 0;if(a===!1)continue;if(s==="normal"){a&&(n.normal=a);continue}if(s==="state"){a!==!1&&(n.state=a??Ll.state);continue}if(s!=="update"&&!a&&!i[s])continue;let o,l;o=J(i[s])?i[s]:[Object.assign(Object.assign({},Ll[s]),i[s])],s==="exit"&&o.forEach(u=>{u.controlOptions={stopWhenStateChange:!0}}),a?(l=J(a)?a.map((u,c)=>{var h;let d=u;return kG(d)&&delete d.type,d.oneByOne&&(d=wG(d,(h=e?.dataIndex)!==null&&h!==void 0?h:AG,e?.dataCount)),d}):o.map((u,c)=>{var h;let d=Wt({},o[c],a);return kG(d)&&delete d.type,d.oneByOne&&(d=wG(d,(h=e?.dataIndex)!==null&&h!==void 0?h:AG,e?.dataCount)),d}),n[s]=l):n[s]=o}return n}function Ce(i,t,e){var n,r,s,a,o,l;const u={};return L(t.animationAppear)&&(u.appear=(n=t.animationAppear[i])!==null&&n!==void 0?n:t.animationAppear),L(t.animationDisappear)&&(u.disappear=(r=t.animationDisappear[i])!==null&&r!==void 0?r:t.animationDisappear),L(t.animationEnter)&&(u.enter=(s=t.animationEnter[i])!==null&&s!==void 0?s:t.animationEnter),L(t.animationExit)&&(u.exit=(a=t.animationExit[i])!==null&&a!==void 0?a:t.animationExit),L(t.animationUpdate)&&(u.update=(o=t.animationUpdate[i])!==null&&o!==void 0?o:t.animationUpdate),L(t.animationState)&&(u.state=(l=t.animationState[i])!==null&&l!==void 0?l:t.animationState),t.animationNormal&&t.animationNormal[i]&&(u.normal=t.animationNormal[i]),o4t(u,e)}function wG(i,t,e){const{oneByOne:n,duration:r,delay:s,delayAfter:a}=i;return i.delay=(o,l,u)=>{const c=t(o,u),h=it(r)?r(o,l,u):et(r)?r:0,d=it(s)?s(o,l,u):et(s)?s:0;let f=it(n)?n(o,l,u):n;return f===!1?d:(f=f===!0?0:f,d+c*(h+f))},i.delayAfter=(o,l,u)=>{const c=t(o,u),h=it(r)?r(o,l,u):et(r)?r:0,d=it(a)?a(o,l,u):et(a)?a:0;let f=it(n)?n(o,l,u):n;return f===!1?d:(f=f===!0?0:f,d+((e?e():l.parent.count-1)-c)*(h+f))},delete i.oneByOne,i}function AG(i,t){var e;return(e=i?.[hr])!==null&&e!==void 0?e:t.context.graphicIndex}function fo(i,t){var e,n,r,s,a;if(i.animation===!1||((e=i.morph)===null||e===void 0?void 0:e.enable)===!1)return!1;const o=((r=(n=i.animationAppear)===null||n===void 0?void 0:n[t])!==null&&r!==void 0?r:i.animationAppear)!==!1,l=((a=(s=i.animationUpdate)===null||s===void 0?void 0:s[t])!==null&&a!==void 0?a:i.animationUpdate)!==!1;return!(!o||!l)}function a4t(i){return L(i.timeSlices)}function kG(i){return!a4t(i)&&L(i.channel)}function o4t(i,t){if(!i)return i;const e=["custom","customParameters"];return vL(i=Jr(i,null,e),n=>{var r;return it(n)&&((r=n.prototype)===null||r===void 0?void 0:r.constructor)!==n?(...s)=>n(...s,t):n},e),i}function vL(i,t,e=[]){if(J(i))i.forEach((n,r)=>{i[r]=t(i[r],r),vL(i[r],t,e)});else if(ee(i)&&typeof i!="function")for(const n in i)e.includes(n)||(i[n]=t(i[n],n),vL(i[n],t,e))}function CG(i){var t,e,n,r,s,a;const o=i.getSpec();if(o.animation===!1||((e=(t=i.getOption())===null||t===void 0?void 0:t.globalInstance)===null||e===void 0?void 0:e.isAnimationEnable())===!1)return!1;let l=(n=o.animationThreshold)!==null&&n!==void 0?n:Number.MAX_SAFE_INTEGER;return(r=i.getMarks())===null||r===void 0||r.forEach(u=>{const c=u.getMarkConfig();c&&(c.large&&c.largeThreshold&&(l=Math.min(l,c.largeThreshold)),c.progressiveThreshold&&(l=Math.min(l,c.progressiveThreshold)))}),!(((a=(s=i.getRawData())===null||s===void 0?void 0:s.latestData)===null||a===void 0?void 0:a.length)>=l)}class gr extends sT{constructor(){super(...arguments),this.markLabelSpec={}}getLabelSpec(t){return this.markLabelSpec[t]}setLabelSpec(t,e){this.markLabelSpec[t]=X(e)}addLabelSpec(t,e,n=!1){this.markLabelSpec[t]||(this.markLabelSpec[t]=[]),n?this.markLabelSpec[t].unshift(e):this.markLabelSpec[t].push(e)}getTheme(t,e){var n,r,s;const a=Ont(t),o=(n=this._option)===null||n===void 0?void 0:n.getTheme,l=this._option.type,u=z.getSeriesMarkMap(l)?I5t(o("series",l),l,o):{},c=o("series",`${l}_${a}`),h=((s=(r=this.stack)!==null&&r!==void 0?r:c?.stack)!==null&&s!==void 0?s:u?.stack)?o("series",`${l}_stack`):void 0;return Wt({},u,c,h)}transformSpec(t,e,n){this._transformStack(t);const r=super.transformSpec(t,e,n);return this._transformLabelSpec(r.spec),Object.assign(Object.assign({},r),{markLabelSpec:this.markLabelSpec,stack:this.stack})}_transformLabelSpec(t){}_transformStack(t){Vn(t.stack)&&(this.stack=t.stack),Vn(t.percent)&&(this.stack=t.percent||this.stack),N(this.stack)&&this._supportStack&&t.seriesField&&(this.stack=!0)}_addMarkLabelSpec(t,e,n="label",r="initLabelMarkStyle",s=!0,a){t&&X(t[n]).forEach(o=>{var l,u,c;if(o&&o.visible){const{animation:h=!0,animationUpdate:d=!0,animationEnter:f=!0,animationExit:p=!0}=o,{animationUpdate:g=!0,animationEnter:m=!0,animationExit:_=!0}=t,v=!!((c=(u=(l=this._option.globalInstance)===null||l===void 0?void 0:l.isAnimationEnable())!==null&&u!==void 0?u:t.animation)!==null&&c!==void 0?c:o.animation)&&!!s;this.addLabelSpec(it(e)?e(o):e,Object.assign(Object.assign({},o),{animation:!!v&&h,animationUpdate:!!(v&&g&&d)&&g,animationEnter:!!(v&&m&&f)&&m,animationExit:!!(v&&m&&p)&&_,getStyleHandler:y=>{var b;return(b=y[r])===null||b===void 0?void 0:b.bind(y)}}),a)}})}_getDefaultSpecFromChart(t){var e;const n=(e=super._getDefaultSpecFromChart(t))!==null&&e!==void 0?e:{},{outerRadius:r,innerRadius:s,direction:a}=t;return L(r)&&(n.outerRadius=r),L(s)&&(n.innerRadius=s),L(a)&&(n.direction=a),Object.keys(n).length>0?n:void 0}_mergeThemeToSpec(t,e){const n=this._theme;if(this._shouldMergeThemeToSpec()){const r=this._getDefaultSpecFromChart(e),s=a=>{const o=Wt({},n,r,a),l=n.label;return l&&ee(l)&&J(o.label)&&(o.label=o.label.map(u=>Wt({},l,u))),o};return J(t)?{spec:t.map(a=>s(a)),theme:n}:{spec:s(t),theme:n}}return{spec:t,theme:n}}}function l4t(i){return i===wn["desktop-browser"]||i===wn["desktop-miniApp"]?{hover:{enable:!0,trigger:"pointermove",triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"pointertap"}}:uh(i)||Mh(i)?{hover:{enable:!0,trigger:["pointerdown","pointermove"],triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"tap"}}:null}class tc extends vz{getRegion(){return this._region}getLayoutStartPoint(){return this._region.getLayoutStartPoint()}getRootMark(){return this._rootMark}getSeriesMark(){return this._seriesMark}getRawData(){return this._rawData}getViewDataFilter(){return this._viewDataFilter}getViewData(){var t;return(t=this._data)===null||t===void 0?void 0:t.getDataView()}getViewDataProductId(){var t;return(t=this._data)===null||t===void 0?void 0:t.getProductId()}getViewDataStatistics(){return this._viewDataStatistics}getViewStackData(){return this._viewStackData}getSeriesField(){return this._seriesField}setSeriesField(t){L(t)&&(this._seriesField=t)}getGroups(){return this._groups}getStack(){var t;return(t=this.getSpecInfo())===null||t===void 0?void 0:t.stack}getStackValue(){var t;return(t=this._spec.stackValue)!==null&&t!==void 0?t:`${zt}_series_${this.type}`}getPercent(){return this._spec.percent}getStackOffsetSilhouette(){return this._spec.stackOffsetSilhouette}get tooltipHelper(){return this._tooltipHelper||this.initTooltip(),this._tooltipHelper}getInvalidType(){return this._invalidType}setInvalidType(t){var e;this._invalidType=t,(e=this.getViewData())===null||e===void 0||e.reRunAllTransform()}getMarkAttributeContext(){return this._markAttributeContext}constructor(t,e){var n;super(t,e),this.specKey="series",this.type="series",this.layoutType="absolute",this.modelType="series",this.name=void 0,this.transformerConstructor=gr,this.coordinate="none",this._region=null,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:null,height:null},this.getLayoutRect=()=>{var r,s;return{width:(r=this._layoutRect.width)!==null&&r!==void 0?r:this._region.getLayoutRect().width,height:(s=this._layoutRect.height)!==null&&s!==void 0?s:this._region.getLayoutRect().height}},this._rootMark=null,this._seriesMark=null,this._viewDataMap=new Map,this._viewDataFilter=null,this._data=null,this.layoutZIndex=ti.SeriesGroup,this._invalidType="break",this._region=e.region,this._dataSet=e.dataSet,!((n=this._spec)===null||n===void 0)&&n.name&&(this.name=this._spec.name)}created(){super.created(),this._buildMarkAttributeContext(),this.initData(),this.initGroups(),this.initStatisticalData(),this.event.emit(Tt.afterInitData,{model:this}),this.initRootMark(),this.initMark();const t=CG(this);this._initExtensionMark({hasAnimation:t}),this.initMarkStyle(),this.initMarkState(),t&&(this.initAnimation(),this.initStageAnimation()),this.afterInitMark(),this.initEvent(),this.event.emit(Tt.afterInitEvent,{model:this})}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(t,e)=>{var n;return(n=this._option.globalScale.getScale(t))===null||n===void 0?void 0:n.scale(e)},seriesColor:t=>{var e;return N(t)&&(t=this.getSeriesKeys()[0]),(e=this._option.globalScale.getScale("color"))===null||e===void 0?void 0:e.scale(t)},getRegion:()=>this._region}}setAttrFromSpec(){super.setAttrFromSpec(),this.setSeriesField(this._spec.seriesField),L(this._spec.invalidType)&&(this._invalidType=this._spec.invalidType)}getInvalidCheckFields(){return[this.getStackValueField()]}initInvalidDataTransform(){var t,e;this._invalidType==="zero"&&(!((t=this._rawData)===null||t===void 0)&&t.dataSet)&&(Vt(this._rawData.dataSet,"invalidTravel",n4t),(e=this._rawData)===null||e===void 0||e.transform({type:"invalidTravel",options:{config:()=>({invalidType:this._invalidType,checkField:this.getInvalidCheckFields()})}},!1))}initData(){var t,e,n;const r=(t=this._spec.data)!==null&&t!==void 0?t:this._option.getSeriesData(this._spec.dataId,this._spec.dataIndex);if(r&&(this._rawData=mz(r,this._dataSet,this._option.sourceDataList)),(n=(e=this._rawData)===null||e===void 0?void 0:e.target)===null||n===void 0||n.addListener("change",this.rawDataUpdate.bind(this)),this._addDataIndexAndKey(),this._rawData){this.getStack()&&(this._viewDataFilter=fL(this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewDataFilter`}));const s=fL(this.getStack()?this._viewDataFilter:this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewData`});this._data=new Cr(this._option,s),this.getStack()&&this._viewDataFilter.target.removeListener("change",s.reRunAllTransform)}this.initInvalidDataTransform()}initGroups(){const t=this.getGroupFields();t&&t.length&&(this._groups={fields:t})}initStatisticalData(){this._data&&this._statisticViewData()}getRawDataStatisticsByField(t,e){var n,r,s;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[t]||e&&(N(this._rawStatisticsCache[t].min)||N(this._rawStatisticsCache[t].max))||!e&&N(this._rawStatisticsCache[t].values)){if(this._viewDataStatistics&&(!this._viewDataFilter||this._viewDataFilter.transformsArr.length<=1)&&this.getViewData().transformsArr.length<=1&&(!((n=this._viewDataStatistics.latestData)===null||n===void 0)&&n[t]))this._rawStatisticsCache[t]=this._viewDataStatistics.latestData[t];else if(this._rawData){const a=(r=this._rawData.getFields())===null||r===void 0?void 0:r[t];if(a&&a.lockStatisticsByDomain&&a.domain)this._rawStatisticsCache[t]={},e?(this._rawStatisticsCache[t].min=Rn(a.domain),this._rawStatisticsCache[t].max=rn(a.domain)):this._rawStatisticsCache[t].values=a.domain;else{const o=vrt(this._rawData.latestData,[{key:t,operations:e?["min","max"]:["values"]}])[t];this._rawStatisticsCache[t]=ot((s=this._rawStatisticsCache[t])!==null&&s!==void 0?s:{},o)}}}return this._rawStatisticsCache[t]}_statisticViewData(){Vt(this._dataSet,"dimensionStatistics",mL);const t=`${this.type}_${this.id}_viewDataStatic`;this._viewDataStatistics=new je(this._dataSet,{name:t}),this._viewDataStatistics.parse([this._data.getDataView()],{type:"dataview"}),this._viewDataStatistics.transform({type:"dimensionStatistics",options:{fields:()=>{const e=this.getStatisticFields();return this._seriesField&&xg(e,[{key:this._seriesField,operations:["values"]}]),e},target:"latest"}},!1),this._data.getDataView().target.removeListener("change",this._viewDataStatistics.reRunAllTransform),this.getStack()&&this.createdStackData()}createStatisticalData(t,e,n){Vt(this._dataSet,"dimensionStatistics",mL);const r=new je(this._dataSet,{name:t});return r.parse([e],{type:"dataview"}),r.transform({type:"dimensionStatistics",options:{operations:["max","min","values"],fields:()=>{var s;const a=xg(this.getStatisticFields(),(s=n?.(e.name))!==null&&s!==void 0?s:[]);return this._seriesField&&xg(a,[{key:this._seriesField,operations:["values"]}]),a},target:"latest"}},!1),r}createdStackData(){const t=`${this.type}_${this.id}_viewStackData`;this._viewStackData=new je(this._dataSet,{name:t}),this._viewStackData.parse([this._viewDataFilter],{type:"dataview"}),this._viewStackData.transform({type:"stackSplit",options:{fields:this.getStackGroupFields()}},!1)}_noAnimationDataKey(t,e){return e}generateDefaultDataKey(t){var e;return N(t)?(n,r,s)=>{if(this._spec.animation===!1){const l=this._noAnimationDataKey(n,r);if(l!==void 0)return l}const{keyMap:a}=s,o=this._getSeriesDataKey(n);return a.get(o)===void 0?(a.set(o,0),o):(a.set(o,a.get(o)+1),`${o}_${a.get(o)}`)}:Ht(t)?n=>n[t]:J(t)&&t.every(n=>Ht(n))?n=>t.map(r=>n[r]).join("-"):it(t)?(n,r)=>t(n,r):((e=this._option)===null||e===void 0||e.onError(`invalid dataKey: ${t}`),(n,r)=>{})}_addDataIndexAndKey(){var t;!((t=this._rawData)===null||t===void 0)&&t.dataSet&&(Vt(this._rawData.dataSet,"addVChartProperty",Vm),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:om.bind(this),call:rf}},!1))}updateRawData(t){this._rawData&&this._rawData.updateRawData(t)}rawDataUpdate(t){var e;(e=this._rawDataStatistics)===null||e===void 0||e.reRunAllTransform(),this._rawStatisticsCache=null,this.event.emit(Tt.rawDataUpdate,{model:this})}viewDataFilterOver(t){this.event.emit(Tt.viewDataFilterOver,{model:this})}viewDataUpdate(t){var e;this.event.emit(Tt.viewDataUpdate,{model:this}),(e=this._data)===null||e===void 0||e.updateData(),this._viewDataStatistics&&this._viewDataStatistics.reRunAllTransform()}viewDataStatisticsUpdate(t){this.event.emit(Tt.viewDataStatisticsUpdate,{model:this})}getDatumPositionValue(t,e){return!t||N(e)?null:t[e]}getDatumPositionValues(t,e){return!t||N(e)?[]:Ht(e)?[t[e]]:e.map(n=>t[n])}setValueFieldToStack(){}setValueFieldToPercent(){}setValueFieldToStackOffsetSilhouette(){}initRootMark(){var t,e,n;this._rootMark=this._createMark({type:"group",name:`seriesGroup_${this.type}_${this.id}`},{parent:(e=(t=this._region).getGroupMark)===null||e===void 0?void 0:e.call(t),dataView:!1}),this._rootMark.setMarkConfig({zIndex:(n=this._spec.zIndex)!==null&&n!==void 0?n:this.layoutZIndex})}_getExtensionMarkNamePrefix(){return`${this.type}_${this.id}_extensionMark`}_initExtensionMark(t){var e;this._spec.extensionMark&&((e=this._spec.extensionMark)===null||e===void 0||e.forEach((n,r)=>{this._createExtensionMark(n,null,this._getExtensionMarkNamePrefix(),r,t)}))}_createExtensionMark(t,e,n,r,s){var a;const o=this._createMark({type:t.type,name:L(t.name)?`${t.name}`:`${n}_${r}`},{skipBeforeLayouted:!0,markSpec:t,parent:e,dataView:!1,componentType:t.componentType,key:t.dataKey});if(o){if(L(t.id)&&o.setUserId(t.id),s.hasAnimation&&t.animation!==!1){const l=ye({},Ce(t.type,t,this._markAttributeContext));o.setAnimationConfig(l)}if(t.type==="group"&&(n=`${n}_${r}`,(a=t.children)===null||a===void 0||a.forEach((l,u)=>{this._createExtensionMark(l,o,n,u,s)})),!N(t.dataId)||!N(t.dataIndex)){const l=this._option.getSeriesData(t.dataId,t.dataIndex);l===this._rawData?o.setData(this._data):(o.setDataView(l),l.target.addListener("change",()=>{o.getData().updateData()}))}}}_updateExtensionMarkSpec(){var t;(t=this._spec.extensionMark)===null||t===void 0||t.forEach((e,n)=>{const r=this._marks.getMarkWithInfo({name:L(e.name)?`${e.name}`:`${this._getExtensionMarkNamePrefix()}_${n}`});r&&(this.initMarkStyleWithSpec(r,e),r.commit(!1,!0))})}getStackData(){var t;return(t=this._viewStackData)===null||t===void 0?void 0:t.latestData}_parseDefaultInteractionConfig(t){if(!t?.length)return[];const e=l4t(this._option.mode);let n=Object.assign({},e?.hover),r=Object.assign({},e?.select);const s=this._spec.hover;Vn(s)?n.enable=s:ee(s)&&(n.enable=!0,n=Wt(n,s));const a=this._spec.select;Vn(a)?r.enable=a:ee(a)&&(r.enable=!0,r=Wt(r,a));const o=[{trigger:{type:"dimension-hover"},marks:t}];if(n.enable){const l=ZE(n,t);l.length&&o.push({trigger:this._defaultHoverConfig(n),marks:l})}if(r.enable){const l=ZE(r,t);l.length&&o.push({trigger:this._defaultSelectConfig(r),marks:l})}return o}_defaultHoverConfig(t){return{type:"element-highlight",trigger:t.trigger,triggerOff:t.triggerOff,blurState:bt.STATE_HOVER_REVERSE,highlightState:bt.STATE_HOVER}}_defaultSelectConfig(t){const e=t.mode==="multiple",n=L(t.triggerOff)?t.triggerOff:e?["empty"]:["empty",t.trigger];return{type:"element-select",trigger:t.trigger,triggerOff:n,reverseState:bt.STATE_SELECTED_REVERSE,state:bt.STATE_SELECTED,isMultiple:e}}_parseInteractionConfig(t){const{interactions:e}=this._spec,n=this._parseDefaultInteractionConfig(t);return e&&e.length&&e.forEach(r=>{const s=ZE(r,this.getMarks());s.length&&n.push({trigger:r,marks:s})}),n}getInteractionTriggers(){if(this._option.disableTriggerEvent!==!0){const t=this.getMarksWithoutRoot();return this._parseInteractionConfig(t)}return[]}initAnimation(){}initStageAnimation(){const t=this._option.getCompiler();t?.setStageAnimationConfig&&t.setStageAnimationConfig(ye({},Ce("stage",this._spec,this._markAttributeContext),null))}initMarkState(){this.initSeriesStyleState()}initSeriesStyleState(){var t;const e=this._spec.seriesStyle;if(!e||!e.length)return;const n=(t=this._seriesField)!==null&&t!==void 0?t:gs;this.getMarksWithoutRoot().forEach(r=>{const s={},a={},o={};e.forEach(u=>{var c;const h=(c=u[r.name])===null||c===void 0?void 0:c.style;h&&(s[u.name]=!0,o[u.name]=o[u.name]||{},Object.keys(h).forEach(d=>{a[d]=!0,o[u.name][d]=h[d]}))}),r.state.addStateInfo({stateValue:eG,level:-1,filter:u=>Array.isArray(u)?u.length!==0&&s[u[0][n]]===!0:s[u[n]]===!0});const l={};Object.keys(a).forEach(u=>{l[u]=c=>{var h,d;let f;if(Array.isArray(c)){if(c.length===0)return;f=(h=o[c[0][n]])===null||h===void 0?void 0:h[u]}return f=(d=o[c[n]])===null||d===void 0?void 0:d[u],L(f)?f:r.getAttribute(u,c)}}),this.setMarkStyle(r,l,eG,ct.User_SeriesStyle)})}afterInitMark(){this.event.emit(Tt.afterInitMark,{model:this}),this.setSeriesField(this._spec.seriesField),this.getMarks().forEach(t=>{var e,n;!((n=(e=t.stateStyle)===null||e===void 0?void 0:e.normal)===null||n===void 0)&&n.lineWidth&&t.setAttribute("stroke",this.getColorAttribute(),"normal",ct.Base_Series)})}getMarksWithoutRoot(){return this.getMarks().filter(t=>{var e;return!(!((e=t.name)===null||e===void 0)&&e.includes("seriesGroup"))})}getMarksInType(t){return this._marks.getMarksInType(t)}getMarkInName(t){return this._marks.get(t)}getMarkInId(t){return this.getMarks().find(e=>e.id===t)}initEvent(){var t,e,n;(e=(t=this._data)===null||t===void 0?void 0:t.getDataView())===null||e===void 0||e.target.addListener("change",this.viewDataUpdate.bind(this)),(n=this._viewDataStatistics)===null||n===void 0||n.target.addListener("change",this.viewDataStatisticsUpdate.bind(this))}_releaseEvent(){super._releaseEvent()}initTooltip(){this._tooltipHelper=new pr(this)}_compareExtensionMarksSpec(t,e,n){t.length!==e.length||e.some((r,s)=>r.type!==t[s].type||r.id!==t[s].id||r.name!==t[s].name)?n.reMake=!0:e.some((r,s)=>r.visible!==t[s].visible)&&(n.reCompile=!0)}_compareLabelSpec(t,e,n){t.length!==e.length||e.some((r,s)=>r.labelLayout!==t[s].labelLayout||r.visible!==t[s].visible)?n.reMake=!0:!n.reCompile&&e.some((r,s)=>!Ne(r,t[s]))&&(n.reCompile=!0)}_compareSpec(t,e,n){const r=super._compareSpec(t,e),s=Object.keys(e||{}).sort(),a=Object.keys(t||{}).sort();if(!Ne(s,a))return r.reMake=!0,r;const o=Object.assign(Object.assign(Object.assign(Object.assign({},s4t),xG),n),{extensionMark:!0,label:!0,totalLabel:!0});return this._compareExtensionMarksSpec(X(t.extensionMark),X(e.extensionMark),r),!r.reMake&&this._compareLabelSpec(X(t.label),X(e.label),r),!r.reMake&&this._compareLabelSpec(X(t.totalLabel),X(e.totalLabel),r),r.reMake?r:(!r.reCompile&&this._marks.getMarks().some(l=>{var u,c;return o[l.name]=!0,((u=e[l.name])===null||u===void 0?void 0:u.visible)!==((c=t[l.name])===null||c===void 0?void 0:c.visible)})&&(r.reCompile=!0),!r.reCompile&&s.some(l=>xG[l]&&!Ne(t[l],e[l]))&&(r.reCompile=!0),s.some(l=>!o[l]&&!Ne(t[l],e[l]))&&(r.reMake=!0),r)}_updateSpecData(){!this._rawData||!this._spec.data||this._spec.data instanceof je||_z(this._rawData,this._spec.data,!0)}reInit(t){super.reInit(t);const e=this.getMarksWithoutRoot();e.forEach(n=>{this._spec[n.name]&&this.initMarkStyleWithSpec(n,this._spec[n.name])}),this.initMarkStyle(),e.forEach(n=>{n.commit(!1)}),this._updateExtensionMarkSpec(),this._updateSpecData(),this._tooltipHelper&&this._tooltipHelper.updateTooltipSpec(),CG(this)&&this.initAnimation()}onEvaluateEnd(t){this._data.updateData()}release(){var t,e;super.release(),this._viewDataMap.clear();const n=(e=(t=this._rawData)===null||t===void 0?void 0:t.transformsArr)===null||e===void 0?void 0:e.findIndex(r=>r.type==="addVChartProperty");n>=0&&this._rawData.transformsArr.splice(n,1),this._dataSet=this._data=this._rawData=this._rawDataStatistics=this._spec=this._region=this._viewDataStatistics=this._viewStackData=null}setLayoutStartPosition(t){et(t.x)&&(this._layoutStartPoint.x=t.x),et(t.y)&&(this._layoutStartPoint.y=t.y)}setLayoutRect({width:t,height:e},n){et(t)&&(this._layoutRect.width=t),et(e)&&(this._layoutRect.height=e)}getSeriesKeys(){var t,e;return this._seriesField?(e=(t=this.getRawDataStatisticsByField(this._seriesField))===null||t===void 0?void 0:t.values)!==null&&e!==void 0?e:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}getSeriesStyle(t){return e=>{var n,r;return(r=(n=this._seriesMark)===null||n===void 0?void 0:n.getAttribute(e,t))!==null&&r!==void 0?r:void 0}}_getSeriesInfo(t,e){const n=this.getDefaultShapeType();return e.map(r=>({key:r,originalKey:r,style:this.getSeriesStyle({[t]:r}),shapeType:n}))}getSeriesInfoInField(t){var e,n;return this._getSeriesInfo(t,(n=(e=this.getRawDataStatisticsByField(t))===null||e===void 0?void 0:e.values)!==null&&n!==void 0?n:[])}getSeriesInfoList(){var t;return this._getSeriesInfo((t=this._seriesField)!==null&&t!==void 0?t:gs,this.getSeriesKeys())}_getDefaultColorScale(){var t,e;const n=this.getDefaultColorDomain(),r=this._getDataScheme();return(e=(t=new Yb().domain(n)).range)===null||e===void 0?void 0:e.call(t,r)}_getDataScheme(){return M0(this.getColorScheme(),this.type)}getDefaultColorDomain(){var t,e;return this._seriesField?(e=(t=this.getViewDataStatistics())===null||t===void 0?void 0:t.latestData[this._seriesField])===null||e===void 0?void 0:e.values:[]}getColorAttribute(){var t,e;return{scale:(t=this._option.globalScale.getScale("color"))!==null&&t!==void 0?t:this._getDefaultColorScale(),field:(e=this._seriesField)!==null&&e!==void 0?e:gs}}getDimensionField(){return[]}getMeasureField(){return[]}onMarkPositionUpdate(){this.onMarkTreePositionUpdate(this.getMarksWithoutRoot())}onMarkTreePositionUpdate(t){}_createMark(t,e={},n={}){var r,s,a,o,l;const{key:u,groupKey:c,skipBeforeLayouted:h,themeSpec:d={},markSpec:f,dataView:p,parent:g,isSeriesMark:m,noSeparateStyle:_=!1}=e,v=super._createMark(t,{key:u??this._getDataIdKey(),seriesId:this.id,attributeContext:this._markAttributeContext,componentType:e.componentType,noSeparateStyle:_,parent:g!==!1?g??this._rootMark:null});if(L(v)){const y=this.getSpec()||{};this._marks.addMark(v,{name:t.name}),m&&(this._seriesMark=v),N(p)?v.setData(this._data):p!==!1&&v.setDataView(p),v.setSkipBeforeLayouted(h!==!1),N(c)||v.setGroupKey(c);const b=Object.assign(Object.assign({},n),{progressiveStep:y.progressiveStep,progressiveThreshold:y.progressiveThreshold,large:y.large,largeThreshold:y.largeThreshold,morph:(r=n.morph)!==null&&r!==void 0&&r,useSequentialAnimation:y.useSequentialAnimation,support3d:(s=n.support3d)!==null&&s!==void 0?s:y.support3d||!!y.zField,morphKey:((a=y.morph)===null||a===void 0?void 0:a.morphKey)||`${this.getSpecIndex()}_${this.getMarks().length}`,morphElementKey:(l=(o=y.morph)===null||o===void 0?void 0:o.morphElementKey)!==null&&l!==void 0?l:n.morphElementKey});v.setMarkConfig(b),this.initMarkStyleWithSpec(v,Wt({},d,f||y[v.name]))}return v}_getDataIdKey(){var t;return(t=super._getDataIdKey())!==null&&t!==void 0?t:ys}_getSeriesDataKey(t){let e="";if(!t)return e;const n=this.getDimensionField();e=n.map(s=>t[s]).join("_");const r=this.getSeriesField();return r&&!n.includes(r)&&(e+=`_${t[r]}`),e}addViewDataFilter(t){var e,n;(n=(e=this._viewDataFilter)!==null&&e!==void 0?e:this.getViewData())===null||n===void 0||n.transform(t,!1)}reFilterViewData(){var t,e;(e=(t=this._viewDataFilter)!==null&&t!==void 0?t:this.getViewData())===null||e===void 0||e.reRunAllTransform()}reTransformViewData(){var t,e;(e=(t=this._data)===null||t===void 0?void 0:t.getDataView())===null||e===void 0||e.reRunAllTransform()}fillData(){var t;(t=this.getRawData())===null||t===void 0||t.reRunAllTransform()}compile(){this.compileData()}getDefaultShapeType(){return"circle"}getFieldAlias(t){var e;return t!==bs&&t!==Xl&&t!==ho&&t!==Qu||(t=this.getStackValueField()),(e=yk(this.getRawData(),t))!==null&&e!==void 0?e:t}_getInvalidConnectType(){return this._invalidType==="zero"?"zero":this._invalidType==="link"?"connect":"none"}_getInvalidDefined(t){const e=this.getInvalidCheckFields();return!e.length||e.every(n=>Qg(t[n]))}_getRelatedComponentSpecInfo(t){var e;const n=this.getSpecIndex(),r=(e=this._option.getSpecInfo().component[t])===null||e===void 0?void 0:e.filter(s=>s.seriesIndexes.includes(n));return r??[]}_forEachStackGroup(t,e){var n,r;(e=e??((n=this._viewStackData)===null||n===void 0?void 0:n.latestData))&&(!((r=e.values)===null||r===void 0)&&r.length?t(e):e.nodes&&Object.values(e.nodes).forEach(s=>{this._forEachStackGroup(t,s)}))}isDatumInViewData(t){if(!t)return!1;const e=this.getViewData().latestData;return!!e&&(!!e.includes(t)||e.some(n=>Object.keys(t).every(r=>t[r]===n[r])))}getSeriesFieldValue(t,e){var n;return t[(n=e??this.getSeriesField())!==null&&n!==void 0?n:gs]}}tc.mark=Bi,tc.transformerConstructor=gr;function u4t(i){return[st.rose,st.radar,st.circularProgress].includes(i)}function yrt(i,t,e){const n=i.getScale(0),r="isInverse"in i&&i.isInverse();Ge(n.type)?e.sort((s,a)=>(s[t]-a[t])*(r?-1:1)):e.sort((s,a)=>(n.index(s[t])-n.index(a[t]))*(r?-1:1))}function Rh(i){return{dataIndex:t=>{var e,n;const r=i.direction==="horizontal"?i.fieldY[0]:i.fieldX[0],s=t?.[r],a=i.direction==="horizontal"?i.scaleY:i.scaleX;return((n=(e=a?.domain)===null||e===void 0?void 0:e.call(a))!==null&&n!==void 0?n:[]).indexOf(s)||0},dataCount:()=>{var t,e,n;const r=i.direction==="horizontal"?i.scaleY:i.scaleX;return(n=((e=(t=r?.domain)===null||t===void 0?void 0:t.call(r))!==null&&e!==void 0?e:[]).length)!==null&&n!==void 0?n:0}}}class _o extends tc{constructor(){super(...arguments),this.coordinate="cartesian",this._bandPosition=.5,this._scaleConfig={bandPosition:this._bandPosition},this._direction="vertical",this._sortDataByAxis=!1,this._getPositionXEncoder=()=>{var t;return(t=this._positionXEncoder)===null||t===void 0?void 0:t.bind(this)},this._setPositionXEncoder=t=>{this._positionXEncoder=t.bind(this)},this._getPositionYEncoder=()=>{var t;return(t=this._positionYEncoder)===null||t===void 0?void 0:t.bind(this)},this._setPositionYEncoder=t=>{this._positionYEncoder=t.bind(this)}}_buildScaleConfig(){this._scaleConfig={bandPosition:this._bandPosition}}get fieldX(){return this._fieldX}setFieldX(t){this._fieldX=X(t)}get fieldY(){return this._fieldY}setFieldY(t){this._fieldY=X(t)}get fieldZ(){return this._fieldZ}setFieldZ(t){this._fieldZ=t&&X(t)}get fieldX2(){return this._fieldX2}setFieldX2(t){this._fieldX2=t}get fieldY2(){return this._fieldY2}setFieldY2(t){this._fieldY2=t}get direction(){return this._direction}get scaleX(){return this._scaleX}setScaleX(t){this._scaleX=t}get scaleY(){return this._scaleY}setScaleY(t){this._scaleY=t}get scaleZ(){return this._scaleZ}setScaleZ(t){this._scaleZ=t}getXAxisHelper(){return this._xAxisHelper}setXAxisHelper(t){this._xAxisHelper=t,this.onXAxisHelperUpdate()}getYAxisHelper(){return this._yAxisHelper}setYAxisHelper(t){this._yAxisHelper=t,this.onYAxisHelperUpdate()}getZAxisHelper(){return this._zAxisHelper}setZAxisHelper(t){this._zAxisHelper=t,this.onYAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}getStatisticFields(){const t=[];return[{axisHelper:this.getXAxisHelper(),fields:this._fieldX2?[...this._fieldX,this._fieldX2]:this._fieldX},{axisHelper:this.getYAxisHelper(),fields:this._fieldY2?[...this._fieldY,this._fieldY2]:this._fieldY},{axisHelper:this.getZAxisHelper(),fields:this._fieldZ}].forEach(e=>{e.axisHelper&&e.axisHelper.getScale&&e.fields&&e.fields.forEach(n=>{const r={key:n,operations:[]},s=e.axisHelper.getScale(0);Ge(s.type)?(r.operations=["max","min"],s.type==="log"&&(r.filter=a=>a>0)):r.operations=["values"],t.push(r)})}),this.getStack()&&t.push({key:this.getStackValueField(),operations:["allValid"]}),t}getGroupFields(){return this.direction==="vertical"?this._fieldX:this._fieldY}getStackGroupFields(){return this.getGroupFields()}getStackValue(){var t,e;const n=(t=this.direction==="horizontal"?this.getXAxisHelper():this.getYAxisHelper())===null||t===void 0?void 0:t.getAxisId();return(e=this._spec.stackValue)!==null&&e!==void 0?e:`${zt}_series_${this.type}_${n}`}getStackValueField(){return this.direction==="horizontal"?X(this._spec.xField)[0]:X(this._spec.yField)[0]}setValueFieldToStack(){this.direction==="horizontal"?(this.setFieldX(bs),this.setFieldX2(ho)):(this.setFieldY(bs),this.setFieldY2(ho))}setValueFieldToPercent(){this.direction==="horizontal"?(this.setFieldX(Xl),this.setFieldX2(Qu)):(this.setFieldY(Xl),this.setFieldY2(Qu))}setValueFieldToStackOffsetSilhouette(){this.direction==="horizontal"?(this.setFieldX(dL),this.setFieldX2(hL)):(this.setFieldY(dL),this.setFieldY2(hL))}onXAxisHelperUpdate(){this.onMarkPositionUpdate()}onYAxisHelperUpdate(){this.onMarkPositionUpdate()}onZAxisHelperUpdate(){this.onMarkPositionUpdate()}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.setFieldX(this._spec.xField),this.setFieldY(this._spec.yField),this.setFieldZ(this._spec.zField),this._specXField=X(this._spec.xField),this._specYField=X(this._spec.yField),L(this._spec.direction)&&(this._direction=this._spec.direction),this.setFieldX2((t=this._spec)===null||t===void 0?void 0:t.x2Field),this.setFieldY2((e=this._spec)===null||e===void 0?void 0:e.y2Field),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent(),this.getStackOffsetSilhouette()&&this.setValueFieldToStackOffsetSilhouette(),L(this._spec.sortDataByAxis)&&(this._sortDataByAxis=this._spec.sortDataByAxis===!0)}dataToPosition(t,e){return t?e&&!this.isDatumInViewData(t)?null:{x:this.dataToPositionX(t),y:this.dataToPositionY(t)}:null}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToX=this.valueToPositionX.bind(this),this._markAttributeContext.valueToY=this.valueToPositionY.bind(this),this._markAttributeContext.xBandwidth=(t=0)=>{var e,n,r;return(r=(n=(e=this.getXAxisHelper()).getBandwidth)===null||n===void 0?void 0:n.call(e,t))!==null&&r!==void 0?r:0},this._markAttributeContext.yBandwidth=(t=0)=>{var e,n,r;return(r=(n=(e=this.getYAxisHelper()).getBandwidth)===null||n===void 0?void 0:n.call(e,t))!==null&&r!==void 0?r:0},this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this)}valueToPosition(t,e){return{x:this.valueToPositionX(t),y:this.valueToPositionY(e)}}_axisPosition(t,e,n){return this._scaleConfig.datum=n,t.isContinuous?t.valueToPosition(e,this._scaleConfig):t.dataToPosition(X(e),this._scaleConfig)}valueToPositionX(t,e){return this._axisPosition(this._xAxisHelper,t,e)}valueToPositionY(t,e){return this._axisPosition(this._yAxisHelper,t,e)}_dataToPosition(t,e,n,r,s,a){const o=s();if(o)return o(t);if(!e)return a(u=>Number.NaN),Number.NaN;const l=(e.getFields?e.getFields():n).slice(0,r);return l&&l.length!==0?(e.isContinuous?a(u=>(this._scaleConfig.datum=u,e.valueToPosition(this.getDatumPositionValue(u,l[0]),this._scaleConfig))):a(u=>(this._scaleConfig.datum=u,e.dataToPosition(X(this.getDatumPositionValues(u,l)),this._scaleConfig))),s()(t)):(a(u=>null),null)}dataToPositionX(t){return this._dataToPosition(t,this._xAxisHelper,this.fieldX,void 0,this._getPositionXEncoder,this._setPositionXEncoder)}dataToPositionY(t){return this._dataToPosition(t,this._yAxisHelper,this.fieldY,void 0,this._getPositionYEncoder,this._setPositionYEncoder)}dataToPositionZ(t){if(!this._zAxisHelper)return Number.NaN;const{dataToPosition:e}=this._zAxisHelper;return e(this.getDatumPositionValues(t,this._fieldZ),{bandPosition:this._bandPosition})}dataToPositionX1(t){return this._xAxisHelper?this._fieldX2&&this._fieldX2 in t?this.valueToPositionX(this.getDatumPositionValues(t,this._fieldX2)):this.valueToPositionX(0):Number.NaN}dataToPositionY1(t){return this._yAxisHelper?this._fieldY2&&this._fieldY2 in t?this.valueToPositionY(this.getDatumPositionValues(t,this._fieldY2)):this.valueToPositionY(0):Number.NaN}positionToData(t){return t?{x:this.positionToDataX(t.x),y:this.positionToDataY(t.y)}:null}positionToDataX(t){return this._scaleX?this._scaleX.invert(t):null}positionToDataY(t){return this._scaleY?this._scaleY.invert(t):null}getRegionRectLeft(){if(!this._xAxisHelper)return Number.NaN;const{getScale:t}=this._xAxisHelper;return t(0).range()[0]}getRegionRectRight(){if(!this._xAxisHelper)return Number.NaN;const{getScale:t}=this._xAxisHelper;return t(0).range()[1]}afterInitMark(){super.afterInitMark(),this.setFieldX(this._fieldX),this.setFieldY(this._fieldY),this._buildScaleConfig()}getDimensionField(){return this._direction==="horizontal"?this._specYField:this._specXField}getDimensionContinuousField(){return this._direction==="horizontal"?[this.fieldY[0],this.fieldY2]:[this.fieldX[0],this.fieldX2]}getMeasureField(){return this._direction==="horizontal"?this._specXField:this._specYField}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(Tt.scaleDomainUpdate,{filter:t=>{var e;return t.model.id===((e=this._direction==="horizontal"?this._yAxisHelper:this._xAxisHelper)===null||e===void 0?void 0:e.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var t,e,n;!((e=(t=this.getViewData())===null||t===void 0?void 0:t.latestData)===null||e===void 0)&&e.length&&(yrt(this._direction==="horizontal"?this._yAxisHelper:this._xAxisHelper,this._direction==="horizontal"?this._fieldY[0]:this._fieldX[0],this.getViewData().latestData),(n=this._data)===null||n===void 0||n.updateData(!0))}getInvalidCheckFields(){const t=[];return this._xAxisHelper&&this._xAxisHelper.isContinuous&&this._xAxisHelper.getAxisType()!==lt.geoCoordinate&&(this._xAxisHelper.getFields?this._xAxisHelper.getFields():this._specXField).forEach(e=>{t.push(e)}),this._yAxisHelper&&this._yAxisHelper.isContinuous&&this._yAxisHelper.getAxisType()!==lt.geoCoordinate&&(this._yAxisHelper.getFields?this._yAxisHelper.getFields():this._specYField).forEach(e=>{t.push(e)}),t}reInit(t){this._positionXEncoder&&(this._positionXEncoder=null),this._positionYEncoder&&(this._positionYEncoder=null),super.reInit(t)}}function Ci(i){return i==="bottom"||i==="top"}function Bo(i){return i==="left"||i==="right"}function mu(i){return i==="z"}function c4t(i,t){return t?Ci(i)?"linear":"band":Ci(i)?"band":"linear"}function Ec(i,t){return cz(i.orient)||t&&t.includes(i.orient)?i.orient:"left"}function Ev(i){return i==="top"||i==="bottom"?"horizontal":"vertical"}function h4t(i,t){let e=i.inverse;return t&&!Ci(i.orient)&&(e=!L(i.inverse)||!i.inverse),e}function MG(i,t){var e;const n=(e=i.type)!==null&&e!==void 0?e:c4t(i.orient,t);return{axisType:n,componentName:`${lt.cartesianAxis}-${n}`}}const O_=(i,t,e)=>{var n;const r=(n=t==="band"?Ws("axisBand",e):["linear","log","symlog"].includes(t)?Ws("axisLinear",e):{})!==null&&n!==void 0?n:{},s=Ci(i)?Ws("axisX",e):Bo(i)?Ws("axisY",e):Ws("axisZ",e);return Wt({},Ws("axis",e),r,s)};class brt{constructor(t,e){this._eventDispatcher=t,this._mode=e}get chart(){var t,e;return this._chart||(this._chart=(e=(t=this._eventDispatcher.globalInstance).getChart)===null||e===void 0?void 0:e.call(t)),this._chart}register(t,e){var n,r;((r=(n=this.chart)===null||n===void 0?void 0:n.getOption().onError)!==null&&r!==void 0?r:v0)("Method not implemented.")}unregister(){var t,e;((e=(t=this.chart)===null||t===void 0?void 0:t.getOption().onError)!==null&&e!==void 0?e:v0)("Method not implemented.")}getTargetDimensionInfo(t,e){var n,r,s;const a=(s=(r=(n=this.chart.getModelOption()).getDimensionInfo)===null||r===void 0?void 0:r.call(n,this.chart,{x:t,y:e}))!==null&&s!==void 0?s:[];return a.length===0?null:a}dispatch(t,e){var n,r;const s=(n=this.chart)===null||n===void 0?void 0:n.getAllComponents().filter(c=>c.specKey==="axes"&&(!e?.filter||e.filter(c))),a=s.filter(c=>{const h=c.getScale();return Nr(h.type)}),o=a.length?a:s.filter(c=>{const h=c.getOrient();return Ci(h)||h==="angle"}),l=[],u=(r=this.chart)===null||r===void 0?void 0:r.getModelOption().getDimensionInfoByValue;return u&&o.forEach(c=>{const h=u(c,t);h&&l.push(h)}),this._callback.call(null,{action:"enter",dimensionInfo:l}),l}}class d4t extends brt{constructor(){super(...arguments),this.onClick=t=>{if(!t)return;const e=t.event.viewX,n=t.event.viewY,r=this.getTargetDimensionInfo(e,n);r&&this._callback.call(null,Object.assign(Object.assign({},t),{action:"click",dimensionInfo:r.slice()}))}}register(t,e){this._callback=e.callback,this._eventDispatcher.register("pointertap",{query:Object.assign(Object.assign({},e.query),{source:ze.chart}),callback:this.onClick})}unregister(){this._eventDispatcher.unregister("pointertap",{query:null,callback:this.onClick})}}const f4t=(i,t,e)=>i.x>=t.x&&i.x<=e.x&&i.y>=t.y&&i.y<=e.y,p4t=(i,t,e)=>{const n=i.getRegionsInIds(X(t.layout.layoutBindRegionID));return n?.some(r=>{const s=r.getLayoutRect(),a=r.getLayoutStartPoint();return f4t(e,{x:a.x,y:a.y},{x:s.width+a.x,y:s.height+a.y})})},xrt=(i,t)=>{var e,n;return i===t||!N(i)&&!N(t)&&i.value===t.value&&((e=i.axis)===null||e===void 0?void 0:e.id)===((n=t.axis)===null||n===void 0?void 0:n.id)},g4t=(i,t)=>{const e=i.tooltipFilterRange,n=typeof e=="function"?e({scale:t}):e;return et(n)?[-n,n]:n},yL=(i,t,e,n)=>{var r;const s=t.getScale(),a=Nr(s.type),o=[],l=t.getOption().getChart().getSeriesInIndex(t.getSpecInfo().seriesIndexes);for(const u of l)if(u.coordinate===e){const c=X(n(u)),h=(r=u.getViewData())===null||r===void 0?void 0:r.latestData;if(c&&h)if(a){const d=[],f=[];h.forEach((p,g)=>{var m;((m=p[c[0]])===null||m===void 0?void 0:m.toString())===i?.toString()&&(d.push(p),f.push(g))}),o.push({series:u,datum:d,key:QE(u,f)})}else if(L(c[1])){const d=[],f=[];h.forEach((p,g)=>{var m;(((m=p[c[0]])===null||m===void 0?void 0:m.toString())===i?.toString()||L(p[c[0]])&&L(p[c[1]])&&i>=p[c[0]]&&i<p[c[1]])&&(d.push(p),f.push(g))}),o.push({series:u,datum:d,key:QE(u,f)})}else{const d=t.getSpec(),f=g4t(d,s);let p=[],g=[];if(f)h.forEach((m,_)=>{if(L(m[c[0]])){const v=m[c[0]]-i;v>=f[0]&&v<=f[1]&&(p.push(m),g.push(_))}});else{let m=1/0,_=0;h.forEach((v,y)=>{if(L(v[c[0]])){const b=Math.abs(v[c[0]]-i),x=Math.sign(v[c[0]]-i);b<m?(m=b,p=[v],g=[y],_=x):b===m&&x===_&&(p.push(v),g.push(y))}})}o.push({series:u,datum:p,key:QE(u,g)})}}return o},QE=(i,t)=>`${i.id}_${t.join("_")}`,Sk=(i,t,e)=>{const n=i.getAllComponents().filter(r=>r.specKey==="axes"&&t(r)&&p4t(i,r,e));return n.length?n:null};class m4t extends brt{constructor(){super(...arguments),this._cacheDimensionInfo=null,this.onMouseMove=t=>{if(!t)return;const e=t.event.viewX,n=t.event.viewY,r=this.getTargetDimensionInfo(e,n);r===null&&this._cacheDimensionInfo!==null?(this._callback.call(null,Object.assign(Object.assign({},t),{action:"leave",dimensionInfo:this._cacheDimensionInfo.slice()})),this._cacheDimensionInfo=r):r===null||this._cacheDimensionInfo!==null&&r.length===this._cacheDimensionInfo.length&&!r.some((s,a)=>!xrt(s,this._cacheDimensionInfo[a]))?r!==null&&this._callback.call(null,Object.assign(Object.assign({},t),{action:"move",dimensionInfo:r.slice()})):(this._callback.call(null,Object.assign(Object.assign({},t),{action:"enter",dimensionInfo:r.slice()})),this._cacheDimensionInfo=r)},this.onMouseOut=t=>{t&&(this._callback.call(null,Object.assign(Object.assign({},t),{action:"leave",dimensionInfo:this._cacheDimensionInfo?this._cacheDimensionInfo.slice():[]})),this._cacheDimensionInfo=null)}}register(t,e){this._callback=e.callback,this._eventDispatcher.register("pointermove",{query:Object.assign(Object.assign({},e.query),{source:ze.chart}),callback:this.onMouseMove}),this._eventDispatcher.register("pointerout",{query:Object.assign(Object.assign({},e.query),{source:ze.canvas}),callback:this.onMouseOut}),uh(this._mode)&&this._eventDispatcher.register("pointerdown",{query:Object.assign(Object.assign({},e.query),{source:ze.chart}),callback:this.onMouseMove})}unregister(){this._eventDispatcher.unregister("pointermove",{query:null,callback:this.onMouseMove}),uh(this._mode)&&this._eventDispatcher.unregister("pointerdown",{query:null,callback:this.onMouseMove})}}var ec;(function(i){i.dimensionHover="dimensionHover",i.dimensionClick="dimensionClick"})(ec||(ec={}));const Rc={point:{name:"point",type:"symbol"},line:{name:"line",type:"line"}};class Cz{addSamplingCompile(){if(this._spec.sampling){const{width:t,height:e}=this._region.getLayoutRect(),n=this._fieldY,r=this._fieldX;this._data&&this._data.setTransform([{type:"dataSampling",size:this._direction==="horizontal"?e:t,factor:this._spec.samplingFactor,yfield:this._direction==="horizontal"?r[0]:n[0],groupBy:this._seriesField,mode:this._spec.sampling}])}}addOverlapCompile(){var t;if(this._spec.markOverlap){const e=[];e.push({type:"symbolOverlap",direction:this._direction==="horizontal"&&this.coordinate==="cartesian"?2:1,delta:this._spec.pointDis,deltaMul:this._spec.pointDisMul,groupBy:this._seriesField}),(t=this._symbolMark)===null||t===void 0||t.setTransform(e)}}reCompileSampling(){this._spec.sampling&&this.compile()}initLineMark(t){return this._lineMark=this._createMark(Rc.line,{groupKey:this._seriesField,isSeriesMark:t==null||t},{morphElementKey:this.getDimensionField()[0]}),this._lineMark}initLineMarkStyle(t,e){var n,r;const s=this._lineMark;if(s){if(this.setMarkStyle(s,{stroke:this.getColorAttribute()},"normal",ct.Series),this._invalidType!=="zero"&&this.setMarkStyle(s,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",ct.Series),this.event.on(Tt.viewDataStatisticsUpdate,{filter:a=>a.model===this},()=>{this.encodeDefined(s,"defined")}),this.coordinate==="polar")this.setMarkStyle(s,{lineJoin:KUt,curveType:mrt,closePath:!0},"normal",ct.Series);else{const a=e??((r=(n=this.getSpec().line)===null||n===void 0?void 0:n.style)===null||r===void 0?void 0:r.curveType),o=a===grt?t==="horizontal"?"monotoneY":"monotoneX":a;this.setMarkStyle(s,{curveType:o},"normal",ct.Built_In)}this.setMarkStyle(s,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",ct.Series)}return s}_getEventElement(t,e=!1){let n=[];return t.dimensionInfo.some(r=>(r.data.some(s=>s.series===this&&(n=s.datum,!0)),!n.length)),n}_dimensionTrigger(t){const e=this._getEventElement(t);switch(t.action){case"enter":this._symbolActiveMark.getDataView().parse(e),this._symbolActiveMark.getData().updateData(!1);break;case"leave":this._symbolActiveMark.getDataView().parse([]),this._symbolActiveMark.getData().updateData(!1)}}initSymbolMark(t){if((this._spec.point||{}).visible!==!1&&(this._symbolMark=this._createMark(Rc.point,{groupKey:this._seriesField,isSeriesMark:!!t},{morph:fo(this._spec,Rc.point.name),morphElementKey:this.getDimensionField()[0]})),this._spec.activePoint===!0){const e=new je(this._option.dataSet,{name:`${zt}_series_${this.id}_active_point`});e.parse([]),this._symbolActiveMark=this._createMark({name:`active_point_${this.id}`,type:"symbol"},{groupKey:this._seriesField,isSeriesMark:!1,dataView:e,parent:this._region.getInteractionMark()},{morph:!1}),this._symbolActiveMark.setVisible(!1)}return this._symbolMark}initSymbolMarkStyle(){const t=this._symbolMark;if(!t)return this._initSymbolActiveMarkAlone(),t;if(this._initSymbolMark(t),this._symbolActiveMark&&this._symbolMark.stateStyle.dimension_hover){this._symbolActiveMark.setVisible(!0),this.event.on(ec.dimensionHover,this._dimensionTrigger.bind(this));for(const e in this._symbolMark.stateStyle){this._symbolActiveMark.stateStyle[e]={};for(const n in this._symbolMark.stateStyle[e])n!=="visible"&&(this._symbolActiveMark.stateStyle[e][n]={style:null,level:ct.Series,referer:t})}this._symbolActiveMark.state.changeStateInfo({stateValue:bt.STATE_DIMENSION_HOVER,filter:()=>!0})}return t}_initSymbolMark(t){t&&(this.setMarkStyle(t,{fill:this.getColorAttribute()},"normal",ct.Series),this.setMarkStyle(t,{x:e=>this._invalidType==="zero"||this._getInvalidDefined(e)?this.dataToPositionX(e):Number.NaN,y:e=>this._invalidType==="zero"||this._getInvalidDefined(e)?this.dataToPositionY(e):Number.NaN,z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",ct.Series))}_initSymbolActiveMarkAlone(){var t,e;const n=this._symbolActiveMark;n&&(this._initSymbolMark(n),n&&(!((e=(t=this._spec[Rc.point.name])===null||t===void 0?void 0:t.state)===null||e===void 0)&&e.dimension_hover)&&(n.setVisible(!0),this.event.on(ec.dimensionHover,this._dimensionTrigger.bind(this)),this.initMarkStyleWithSpec(n,Wt({},this._spec[Rc.point.name],{visible:!0})),this._symbolActiveMark.state.changeStateInfo({stateValue:bt.STATE_DIMENSION_HOVER,filter:()=>!0})))}initLabelMarkStyle(t){var e;t&&(((e=t.getTarget())===null||e===void 0?void 0:e.type)!=="symbol"&&t.setRule("line-data"),this.setMarkStyle(t,{fill:this.getColorAttribute(),text:n=>n[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._invalidType!=="zero"&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},"normal",ct.Series),this.event.on(Tt.viewDataStatisticsUpdate,{filter:n=>n.model===this},()=>{this.encodeDefined(t,"visible")}))}initLineLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>{var n;return(n=e[this.getSeriesField()])!==null&&n!==void 0?n:this.getSeriesKeys()[0]},z:this._fieldZ?this.dataToPositionZ.bind(this):null})}encodeDefined(t,e){var n,r,s,a;if(!t)return;const o=this._isFieldAllValid();if(this._invalidType==="zero"||o){if(((r=(n=t.stateStyle.normal)===null||n===void 0?void 0:n[e])===null||r===void 0?void 0:r.style)===!0)return;this.setMarkStyle(t,{[e]:!0},"normal",ct.Series)}else{if(((a=(s=t.stateStyle.normal)===null||s===void 0?void 0:s[e])===null||a===void 0?void 0:a.style)!==!0)return;this.setMarkStyle(t,{[e]:this._getInvalidDefined.bind(this)},"normal",ct.Series)}t.compileEncode()}_isFieldAllValid(){const t=this.getViewDataStatistics(),e=this.getStackValueField();return!!(t&&t.latestData&&e)&&t.latestData[e]&&t.latestData[e].allValid}}const _4t=Object.assign(Object.assign({},Bi),Rc),v4t=(i,t)=>{var e,n;if(i===t)return!0;const r=(e=i&&i.length)!==null&&e!==void 0?e:0;return r===((n=t&&t.length)!==null&&n!==void 0?n:0)&&r!==0&&i.every((s,a)=>!s&&!t[a]||s&&t[a]&&s.color===t[a].color&&s.offset===t[a].offset)},Srt=(i,t)=>{if(i===t)return!0;if(typeof i!=typeof t||Ht(i))return!1;if(J(i))return i.length===t.length&&i.every((r,s)=>Srt(r,t[s]));if(i.gradient!==t.gradient)return!1;const e=Object.keys(i),n=Object.keys(t);return e.length===n.length&&e.every(r=>r==="stops"?v4t(i[r],t[r]):i[r]===t[r])},y4t=(i,t)=>i.length===t.length&&i.join("-")===t.join("-"),b4t=(i,t,e)=>!(!N(i)||!N(t))||!N(i)&&!N(t)&&(e==="lineDash"?y4t(i,t):e==="stroke"||e==="fill"?Srt(i,t):i===t),wrt=["stroke","strokeOpacity","lineDash","lineDashOffset","lineCap","lineJoin","lineWidth","miterLimit"];class Art extends ns{constructor(){super(...arguments),this._segmentStyleKeys=[],this._isValidPointChannel=t=>["x","y","defined"].includes(t)}_getSegmentAttributes(){return wrt}initStyleWithSpec(t){this._segmentStyleKeys=[],super.initStyleWithSpec(t)}setStyle(t,e="normal",n=0){if(N(t))return;this.stateStyle[e]===void 0&&(this.stateStyle[e]={});const r=this._getIgnoreAttributes(),s=this._getSegmentAttributes(),a=this.isUserLevel(n);Object.keys(t).forEach(o=>{const l=t[o];if(N(l)||r.includes(o))return;a&&s.includes(o)&&(YI(l?.type)||l?.scale||it(l))&&(this._segmentStyleKeys.includes(o)||this._segmentStyleKeys.push(o));const u=this._filterAttribute(o,l,e,n,a);this.setAttribute(o,u,e,n)})}_getLineSegments(t,e){if(!this._segmentStyleKeys||!this._segmentStyleKeys.length)return null;const n=[];let r=null;return t.forEach((s,a)=>{r&&this._segmentStyleKeys.every(o=>b4t(r[o],s[o],o))||(n.length&&(n[n.length-1].endIndex=a),r=s,n.push({attrs:r,startIndex:a}))}),n.length>=2?n.map(s=>Object.assign(Object.assign({},s.attrs),{points:e.slice(s.startIndex,N(s.endIndex)?e.length:s.endIndex)})):null}_getPrevPoints(t){const{points:e,segments:n}=t.attribute;return e??(n?n.reduce((r,s)=>(s.points&&s.points.forEach(a=>{r.push(a)}),r),[]):null)}_runPointsEncoder(t,e,n={}){var r,s,a;const o=e.context.data,l=[],u=[],c={},h=(r=this.renderContext)===null||r===void 0?void 0:r.progressive,d=h&&h.currentIndex===0;if(o.forEach((f,p)=>{var g;u[p]={},l[p]={},Object.keys(t).forEach(m=>{this._isValidPointChannel(m)?u[p][m]=t[m](f):this._segmentStyleKeys.includes(m)&&!h?l[p][m]=t[m](f):p!==0||h&&!d||(c[m]=t[m](f))}),u[p].context=(g=this._keyGetter(f))!==null&&g!==void 0?g:p}),h){const f=(a=(s=e.attribute)===null||s===void 0?void 0:s.segments)!==null&&a!==void 0?a:[];return f.push({points:u}),d?Object.assign(Object.assign({},c),{segments:f}):{segments:f}}if(this._segmentStyleKeys&&this._segmentStyleKeys.length){const f=this._getLineSegments(l,u);if(f)return Object.assign(Object.assign(Object.assign({},c),l[0]),{segments:f,points:null})}return Object.assign(Object.assign(Object.assign({},c),l[0]),{points:u,segments:null})}_runEncoderOfGraphic(t,e,n={}){const r=e.context.data;return t&&Object.keys(t).some(this._isValidPointChannel)&&r&&r.length?this._runPointsEncoder(t,e,n):super._runEncoderOfGraphic(t,e,n)}_getDataByKey(t){return this._dataByGroup}_runProgressiveJoin(){const t=this.renderContext.progressive.currentIndex,e=[];this._dataByGroup.keys.forEach((r,s)=>{const a=this.renderContext.progressive.groupedData.get(r),o=this.renderContext.progressive.step,l=a.slice(t*o,(t+1)*o);if(t===0){const u={context:Object.assign(Object.assign({},this._getCommonContext()),{diffState:Kn.enter,data:l,uniqueKey:r,key:r,groupKey:r})};e.push(u)}else this._graphics[s].context.data=l});const n=t===0?e:this._graphics;return{graphicsByGroup:{[ys]:n},graphics:n,needUpdate:!1}}_setCommonAttributesToTheme(t){}_addProgressiveGraphic(t,e){e.incremental=1,t.appendChild(e)}}class D0 extends Art{constructor(){super(...arguments),this.type=D0.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:1})}_getIgnoreAttributes(){var t,e;return((t=this.model)===null||t===void 0?void 0:t.type)===st.radar&&((e=this.model)===null||e===void 0?void 0:e.coordinate)==="polar"?[]:["fill","fillOpacity"]}}D0.type="line";const dT=()=>{z.registerMark(D0.type,D0),as(),Jl(),ant(),GM(),crt(),z.registerGraphicComponent("line",Fb)};class I0 extends ns{constructor(){super(...arguments),this.type=I0.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{size:1,symbolType:"circle",fill:void 0,lineWidth:0})}_transformGraphicAttributes(t,e,n){var r,s,a;const o=super._transformGraphicAttributes(t,e,n),l=(s=(r=o.shape)!==null&&r!==void 0?r:o.symbolType)!==null&&s!==void 0?s:(a=t.attribute)===null||a===void 0?void 0:a.symbolType;return N(l)?o.symbolType="circle":o.symbolType=l,o}}I0.type="symbol";const cc=()=>{z.registerMark(I0.type,I0),as(),Ta(),GM(),z.registerGraphicComponent("symbol",mf)};class Sf extends gr{_transformLabelSpec(t){var e,n,r;((e=t.point)===null||e===void 0?void 0:e.visible)!==!1&&((r=(n=t.point)===null||n===void 0?void 0:n.style)===null||r===void 0?void 0:r.visible)!==!1?this._addMarkLabelSpec(t,"point"):this._addMarkLabelSpec(t,"line"),this._addMarkLabelSpec(t,"line","lineLabel","initLineLabelMarkStyle",void 0,!0)}}function TG(i){return i.length>=2&&et(i[0])&&et(ke(i))&&ke(i)>=i[0]}function PG(i,t){var e;const n=ke(t)-t[0],r=ke(t)*t[0]<0;let s=t[0]<=0?0-t[0]:0,a=ke(t)>0?ke(t)-0:0;n===0?t[0]<0?(s=1,a=0):t[0]>0&&(s=0,a=1):(s/=n,a/=n);const o=i.getDomainSpec(),l={total:n,negative:s,positive:a,includeZero:r,domain:t,extendable_min:!et(o.min),extendable_max:!et(o.max)};if(!((e=i._break)===null||e===void 0)&&e.scope){const u=t.findIndex(d=>d>=0);let c,h;u===0?(c=i._break.scope[u],h=[t[0],t[1]],l.positive=1,l.negative=0):ke(t)<=0?(l.positive=0,l.negative=1,h=[t[t.length-2],t[t.length-1]]):(c=i._break.scope[u-1],h=[t[u-1],t[u]],l.negative=c[0]+(0-h[0])/(h[1]-h[0])*(c[1]-c[0]),l.positive=1-l.negative),l.break=!0,l.extendable_max=!1,l.extendable_min=!1,l.domain=h}return l}function EG(i,t){const{positive:e,negative:n,extendable_min:r,extendable_max:s,domain:a}=i,{positive:o,negative:l,extendable_min:u,extendable_max:c,domain:h}=t;if(o>0){if(!u)return!1;let d=n/e;s&&(d=n/Math.max(e,o),a[1]=-a[0]/d),h[0]=-h[1]*d}else if(l>0){if(!c)return!1;let d=e/n;r&&(d=e/Math.max(n,n),a[0]=-a[1]/d),h[1]=-h[0]*d}return!0}function RG(i,t){const{extendable_min:e,extendable_max:n,domain:r}=i,{positive:s,negative:a,domain:o}=t;return(s!==0||a!==0)&&!(s>0&&!n)&&!(a>0&&!e)&&(r[0]=o[0],r[1]=o[1],!0)}function OG(i,t){const{positive:e,negative:n,extendable_max:r,domain:s}=i,{positive:a,negative:o,extendable_min:l,domain:u}=t;if(r&&l){const c=Math.max(n,o)/Math.max(e,a);s[1]=-s[0]/c,u[0]=-u[1]*c}else if(l){const c=n/e;u[0]=-u[1]*c}else{if(!r)return!1;{const c=o/a;s[1]=-s[0]/c}}return!0}function DG(i,t){const{extendable_min:e,domain:n}=i,{extendable_max:r,domain:s}=t;return!(!e||!r)&&(n[0]=-n[1],s[1]=-s[0],!0)}const x4t=(i,t)=>{var e,n,r,s,a,o;const l=i.getScale(),u=t.getScale();if(!l||!u)return;const c=(r=(n=(e=i).getDomainAfterSpec)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[0,1],h=(o=(a=(s=t).getDomainAfterSpec)===null||a===void 0?void 0:a.call(s))!==null&&o!==void 0?o:[0,1];if(!(c&&h&&TG(c)&&TG(h)))return;const d=PG(i,c),f=PG(t,h);if(d.break===!0&&f.break===!0)return;const{positive:p,negative:g,extendable_min:m,extendable_max:_,includeZero:v}=d,{positive:y,negative:b,extendable_min:x,extendable_max:S,includeZero:w}=f;if(p===0&&g===0){if(!RG(d,f))return}else if(y===0&&b===0){if(!RG(f,d))return}else if(v||w)if(v&&!w){if(!EG(d,f))return}else if(w&&!v){if(!EG(f,d))return}else{if(g===b)return;if(g>b){if(!OG(d,f))return}else if(!OG(f,d))return}else{if(g===0&&y===0){if(!DG(d,f))return}else if(b===0&&p===0&&!DG(f,d))return;if(g===0&&b===0)if(c[0]===0&&h[0]>0){if(!x)return;h[0]=0}else{if(!(h[0]===0&&c[0]>0)||!m)return;c[0]=0}if(p===0&&y===0)if(c[1]===0&&h[1]>0){if(!S)return;h[1]=0}else{if(!(h[1]===0&&c[1]>0)||!_)return;c[1]=0}}l.domain(c),u.domain(h)};function S4t(i,t,e,n,r){const s=Jy(i,t),a=Math.max(Vg(e),Vg(s));return r*(Math.round(s*10**a)/Math.round(e*10**a))+n}const w4t=(i,t)=>{var e,n,r,s,a;if(!i)return i;const o=(e=t?.targetAxis)===null||e===void 0?void 0:e.call(t);if(!o)return i;const l=(n=t?.currentAxis)===null||n===void 0?void 0:n.call(t);if(!l)return i;const u=(r=l.getTickData())===null||r===void 0?void 0:r.getDataView();if(!u||!u.transformsArr.find(v=>v.type.includes("ticks")))return i;const c=l.getScale();if(!c)return i;const h=(a=(s=o.getTickData())===null||s===void 0?void 0:s.getDataView())===null||a===void 0?void 0:a.latestData;if(!h?.length)return i;const d=o.getScale();if(!d)return i;const f=d.domain(),p=ke(f)-f[0];if(p===0)return i;const g=c.domain(),m=ke(g)-g[0];if(p===0)return i;const _=h.map(v=>S4t(v.value,f[0],p,g[0],m));return Vu(_)};class qb{constructor(t){this.id=Fm(),this.name=`${t}_${this.id}`}onAdd(t){this.service=t}release(){this.service=null}}class L0 extends qb{constructor(){super(L0.type),this.type="AxisSyncPlugin"}_checkEnableSync(t){if(!Ge(t.getScale().type))return!1;const e=t.getSpec().sync;return!!e?.axisId&&e}_getTargetAxis(t,e){const n=t.getOption().getChart().getComponentByUserId(e.axisId);return n?.type.startsWith("cartesianAxis")?n:null}onInit(t,e){const n=this._checkEnableSync(e);if(!n||!n.zeroAlign)return;const r=this._getTargetAxis(e,n);r&&e.event.on(Tt.scaleDomainUpdate,{filter:({model:s})=>s.id===e.id||s.id===r.id},()=>{x4t(r,e)})}onDidCompile(t,e){var n;const r=this._checkEnableSync(e);if(!r)return;const s=this._getTargetAxis(e,r);if(s&&r.tickAlign){Vt(e.getOption().dataSet,"tickAlign",w4t);const a={targetAxis:()=>s,currentAxis:()=>e},o=(n=s.getTickData())===null||n===void 0?void 0:n.getDataView();o&&o.target.addListener("change",()=>{var l,u;(u=(l=e.getTickData())===null||l===void 0?void 0:l.getDataView())===null||u===void 0||u.reRunAllTransform({skipEqual:!0})}),e.addTransformToTickData({type:"tickAlign",options:a,level:Number.MAX_SAFE_INTEGER},!1)}}}L0.pluginType="component",L0.type="AxisSyncPlugin";const A4t={left:{textAlign:"center",textBaseline:"bottom"},right:{textAlign:"center",textBaseline:"bottom"},radius:{},angle:{}};function k4t(i){return(i=Lo(i)).startSymbol=Lo(i.startSymbol),i.endSymbol=Lo(i.endSymbol),i}function Mz(i){let t=0;return be(i,"tick.visible")&&(t+=be(i,"tick.tickSize")),be(i,"label.visible")&&(t+=be(i,"label.space")),t}function B0(i,t){var e,n,r,s,a,o;return{min:(r=(e=i.min)!==null&&e!==void 0?e:(n=i.range)===null||n===void 0?void 0:n.min)!==null&&r!==void 0?r:t?.min,max:(o=(s=i.max)!==null&&s!==void 0?s:(a=i.range)===null||a===void 0?void 0:a.max)!==null&&o!==void 0?o:t?.max}}function IG(i){const t=i?.orient;return t==="top"||t==="bottom"||t==="left"||t==="right"||t==="z"}function C4t(i){const t=i?.orient;return t==="angle"||t==="radius"}const krt=i=>i==="band"||i==="ordinal"||i==="point";function lm(i,t){return{id:i,label:i,value:t,rawValue:i}}function Wa(i,t,e){return e||!i||i.getAxisId()===t.getAxisId()}class M4t extends xz{constructor(t){super(),this.component=t}releaseAll(){super.releaseAll(),this.component=null}}const JE=`${zt}_ARC_TRANSFORM_VALUE`,T4t=`${zt}_ARC_RATIO`,LG=`${zt}_ARC_START_ANGLE`,BG=`${zt}_ARC_END_ANGLE`,P4t=`${zt}_ARC_K`,Nc=`${zt}_ARC_MIDDLE_ANGLE`,E4t=`${zt}_ARC_QUADRANT`,R4t=`${zt}_ARC_RADIAN`,fT=-Math.PI/2,Tz=3*Math.PI/2,Pz=-90,Crt=270,wk=.6,O4t=(i,t)=>{var e,n,r,s,a,o;const l=(e=i.type)!==null&&e!==void 0?e:i.orient==="angle"?"band":"linear",u=`${lt.polarAxis}-${l}`,c=(n=i.startAngle)!==null&&n!==void 0?n:t.startAngle,h=(r=i.endAngle)!==null&&r!==void 0?r:t.endAngle;return{axisType:l,componentName:u,startAngle:c??Pz,endAngle:h??(L(c)?c+360:Crt),center:L(t.center)?t.center:L(t?.centerX)||L(t?.centerY)?{x:t?.centerX,y:t?.centerY}:void 0,outerRadius:(o=(a=(s=i.outerRadius)!==null&&s!==void 0?s:i.radius)!==null&&a!==void 0?a:t.outerRadius)!==null&&o!==void 0?o:t.radius,layoutRadius:t.layoutRadius}},Mrt=(i,t,e,n)=>{const r=i();if(yt(r))return r;if(it(r))return r(t(),e());const s=t();if(r==="auto"&&s.width>0&&s.height>0){const{startAngle:a=0,endAngle:o=2*Math.PI}=n();return eEt(s,e(),a,o)}return Math.min(s.width/2,s.height/2)},tR=(i,t,e)=>{var n;const r=(n=t==="band"?Ws("axisBand",e):t==="linear"?Ws("axisLinear",e):{})!==null&&n!==void 0?n:{},s=Ws(i==="angle"?"axisAngle":"axisRadius",e);return Wt({},Ws("axis",e),r,s)};function D4t(i,t){const{x1:e,y1:n,x2:r,y2:s}=t,{x1:a,y1:o,x2:l,y2:u}=i.AABBBounds,{dx:c=0,dy:h=0}=i.attribute;let d=0,f=0;a<e&&(d=e-a),o<n&&(f=n-o),l>r&&(d=r-l),u>s&&(f=s-u),d&&i.setAttribute("dx",d+c),f&&i.setAttribute("dy",f+h)}function I4t(i,t,e,n){for(let r=0,s=i.length;r<s;r++){const a=i[r];if(a){const o=a[e],l=a[n||e];if(o<=t&&l>=t)return a}}return null}const L4t=(i,t)=>{var e,n;const r=X((e=t.axes)!==null&&e!==void 0?e:[]),{bandField:s,linearField:a,xField:o,yField:l,trigger:u,triggerOff:c}=(n=Ws(lt.crosshair,i))!==null&&n!==void 0?n:{},h=r.find(g=>Ci(g.orient));let d;d=L(h)?Wt({},krt(h.type)?s:a,o):o;const f=r.find(g=>Bo(g.orient));let p;return p=L(f)?Wt({},Nr(f.type)?s:a,l):l,{xField:d,yField:p,trigger:u,triggerOff:c}},B4t=(i,t)=>{var e,n;const r=X((e=t.axes)!==null&&e!==void 0?e:[]),{bandField:s,linearField:a,categoryField:o,valueField:l,trigger:u,triggerOff:c}=(n=Ws(lt.crosshair,i))!==null&&n!==void 0?n:{},h=r.find(g=>g.orient==="angle");let d;d=L(h)?Wt({},krt(h.type)?s:a,o):o;const f=r.find(g=>g.orient==="radius");let p;return p=L(f)?Wt({},Nr(f.type)?s:a,l):l,{categoryField:d,valueField:p,trigger:u,triggerOff:c}};function F4t(i,t,e,n){switch(i){case lt.cartesianBandAxis:return O_(Ec(e,["z"]),"band",t);case lt.cartesianLinearAxis:return O_(Ec(e,["z"]),"linear",t);case lt.cartesianLogAxis:return O_(Ec(e,["z"]),"log",t);case lt.cartesianSymlogAxis:return O_(Ec(e,["z"]),"symlog",t);case lt.cartesianAxis:case lt.cartesianTimeAxis:return O_(Ec(e),void 0,t);case lt.polarBandAxis:return tR(e.orient,"band",t);case lt.polarLinearAxis:return tR(e.orient,"linear",t);case lt.polarAxis:return tR(e.orient,void 0,t);case lt.cartesianCrosshair:return L4t(t,n);case lt.polarCrosshair:return B4t(t,n);case lt.colorLegend:case lt.sizeLegend:case lt.discreteLegend:case lt.dataZoom:case lt.scrollBar:return z4t(e,Ws(i,t));default:return Ws(i,t)}}const z4t=(i,t)=>{var e;const n=(e=i.orient)!==null&&e!==void 0?e:t.orient,r=t[Ev(n)],s=Wt({},t,r);return delete s.horizontal,delete s.vertical,s};class Wm extends sT{getTheme(t,e){return F4t(this.type,this._option.getTheme,t,e)}_mergeThemeToSpec(t,e){const{spec:n,theme:r}=super._mergeThemeToSpec(t,e);return this._adjustPadding(n),{spec:n,theme:r}}_adjustPadding(t){const{padding:e,noOuterPadding:n=!0,orient:r}=t;n&&e&&r&&(t.padding=Object.assign(Object.assign({},Yl(e)),{[r]:0}))}}var N4t=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class Cs extends Qnt{constructor(){super(...arguments),this.name="component",this.modelType="component",this.transformerConstructor=Wm,this._delegateEvent=(t,e,n,r=null,s=null)=>{var a,o;e instanceof fM||this.event.emit(n,{model:this,node:t,event:e,item:r,datum:s,source:ze.chart,chart:(o=(a=this._option)===null||a===void 0?void 0:a.globalInstance)===null||o===void 0?void 0:o.getChart()},"model")}}static createComponent(t,e){const{spec:n}=t,r=N4t(t,["spec"]);return new this(n,Object.assign(Object.assign({},e),r))}getRegions(){return this._regions}created(){super.created(),this.initLayout(),this.pluginService=new M4t(this)}initLayout(){var t;super.initLayout(),this._regions=(t=this._regions)!==null&&t!==void 0?t:this._option.getRegionsInIndex(),this._layout&&(this._layout.layoutBindRegionID=this._regions.map(e=>e?.id))}_getNeedClearVRenderComponents(){return[]}getVRenderComponents(){return this._getNeedClearVRenderComponents()}callPlugin(t){this.pluginService&&this.pluginService.getAll().forEach(e=>t(e))}getContainer(){var t;return this._container||(this._container=(t=this._option)===null||t===void 0?void 0:t.globalInstance.getStage().find(e=>e.name==="root",!0)),this._container}_compareSpec(t,e){const n=super._compareSpec(t,e);return n.reMake||(n.reMake=["seriesId","seriesIndex","regionId","regionIndex"].some(r=>!Ne(e?.[r],t[r]))),e?.visible!==t.visible&&(n.reCompile=!0),n}release(){var t;super.release(),this.clear(),(t=this.pluginService)===null||t===void 0||t.releaseAll(),this.pluginService=null}clear(){var t;const e=this._getNeedClearVRenderComponents();e&&e.length&&e.forEach(n=>{var r;n&&((r=this.getContainer())===null||r===void 0||r.removeChild(n),n=null)}),this._container=null,(t=this.pluginService)===null||t===void 0||t.clearAll()}compile(){this.compileMarks(),this.reAppendComponents()}compileMarks(t){this.getMarks().forEach(e=>{e.compile({group:t,context:{model:this}})})}reAppendComponents(){const t=this._getNeedClearVRenderComponents();t&&t.length&&t.forEach(e=>{var n;e&&!e.stage&&((n=this.getContainer())===null||n===void 0||n.appendChild(e))})}getBoundsInRect(t,e){return{x1:0,x2:0,y1:0,y2:0}}getDatum(t){}}Cs.transformerConstructor=Wm;var Aa;(function(i){i.lineAxis="lineAxis",i.circleAxis="circleAxis"})(Aa||(Aa={}));var ka;(function(i){i.lineAxisGrid="lineAxisGrid",i.circleAxisGrid="circleAxisGrid"})(ka||(ka={}));class bL extends ns{constructor(t,e){super(t,e),this.type="component",this._componentType=e.componentType,this._mode=e.mode}_getDefaultStyle(){return{}}getComponent(){return this._component}clearComponent(){this._component&&(this._component.parent&&this._component.parent.removeChild(this._component),this._component=null)}_getAttrsFromConfig(t={}){const e=super._getAttrsFromConfig(t);return N(this._markConfig.interactive)||(e.pickable=this._markConfig.interactive),t}setAttributeTransform(t){this._attributesTransform=t}renderInner(){var t;const e=(t=this._simpleStyle)!==null&&t!==void 0?t:this.getAttributesOfState({});let n=this._getAttrsFromConfig(e);this._attributesTransform&&(n=this._attributesTransform(n)),this._animationConfig&&(n=Object.assign(Object.assign({},n),{animation:!0,animationAppear:this._animationConfig.appear?Array.isArray(this._animationConfig.appear)?this._animationConfig.appear[0]:this._animationConfig.appear:void 0,animationEnter:this._animationConfig.enter?Array.isArray(this._animationConfig.enter)?this._animationConfig.enter[0]:this._animationConfig.enter:void 0,animationUpdate:this._animationConfig.update?Array.isArray(this._animationConfig.update)?this._animationConfig.update[0]:this._animationConfig.update:void 0,animationExit:this._animationConfig.exit?Array.isArray(this._animationConfig.exit)?this._animationConfig.exit[0]:this._animationConfig.exit:void 0})),this._component?this._component.setAttributes(n):(this._component=z.createGraphicComponent(this._componentType,n,{mode:this._mode,skipDefault:this._markConfig.skipTheme}),this._component&&this._product.appendChild(this._component)),this._component&&(this._component.context=this._getCommonContext()),this._markConfig.support3d&&this._product&&this._product.setMode("3d"),this.model.event.emit(Zo.AFTER_ELEMENT_ENCODE,{mark:this,model:this.model}),this.needClear=!0}release(){super.release(),this.removeProduct()}}bL.type="component";const pT=()=>{z.registerMark(bL.type,bL)},j4t=i=>i;var H4t=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class Ez extends Cs{getOrient(){return this._orient}getScale(){return this._scale}getScales(){return this._scales}getTickData(t=0){return this._tickData[t]}get visible(){return this._visible}getInverse(){return this._inverse}getCoordinateType(){return this._coordinateType}constructor(t,e){var n;super(t,e),this.specKey="axes",this._scales=[],this._tickData=[],this._visible=!0,this._tick=void 0,this._onTickDataChange=r=>{this._forceLayout(),r?.updateData()},this._visible=(n=t.visible)===null||n===void 0||n,this._coordinateType="none"}getVRenderComponents(){var t,e;return[(t=this._axisMark)===null||t===void 0?void 0:t.getProduct(),(e=this._gridMark)===null||e===void 0?void 0:e.getProduct()].filter(L)}created(){var t,e,n,r,s,a,o,l,u,c,h,d,f,p,g,m,_,v,y;if(super.created(),this.setSeriesAndRegionsFromSpec(),this.initEvent(),this.initScales(),this.updateSeriesScale(),this._shouldComputeTickData()&&this._initData(),this._visible){const b=this._createMark({type:"component",name:`axis-${this.getOrient()}`},{componentType:this.getOrient()==="angle"?Aa.circleAxis:Aa.lineAxis,mode:this._spec.mode},{skipTheme:!0});if(this._updateTickDataMarks(b),this._axisMark=b,b.setMarkConfig({zIndex:this.layoutZIndex}),L(this._spec.id)&&b.setUserId(this._spec.id),b.setMarkConfig({interactive:(t=this._spec.interactive)!==null&&t!==void 0?t:this.getDefaultInteractive()}),this._marks.addMark(b),(e=this._spec.grid)===null||e===void 0?void 0:e.visible){const x=this._createMark({type:"component",name:`axis-${this.getOrient()}-grid`},{componentType:this.getOrient()==="angle"?ka.circleAxisGrid:ka.lineAxisGrid,mode:this._spec.mode},{skipTheme:!0});this._updateTickDataMarks(x),x.setMarkConfig({zIndex:(o=(s=(r=(n=this._spec.grid)===null||n===void 0?void 0:n.style)===null||r===void 0?void 0:r.zIndex)!==null&&s!==void 0?s:(a=this._spec.grid)===null||a===void 0?void 0:a.zIndex)!==null&&o!==void 0?o:ti.Axis_Grid,interactive:!1}),this._marks.addMark(x),this._gridMark=x}if(!((l=this._option.globalInstance)===null||l===void 0)&&l.isAnimationEnable()&&be(this._option.getChart().getSpec(),"animation")!==!1&&this._spec.animation===!0){const x=ye((u=z.getAnimationInKey("axis"))===null||u===void 0?void 0:u(),{appear:(h=(c=this._spec.animationAppear)!==null&&c!==void 0?c:be(this._option.getChart().getSpec(),"animationAppear.axis"))!==null&&h!==void 0?h:be(this._option.getChart().getSpec(),"animationAppear"),disappear:(f=(d=this._spec.animationDisappear)!==null&&d!==void 0?d:be(this._option.getChart().getSpec(),"animationDisappear.axis"))!==null&&f!==void 0?f:be(this._option.getChart().getSpec(),"animationDisappear"),enter:(g=(p=this._spec.animationEnter)!==null&&p!==void 0?p:be(this._option.getChart().getSpec(),"animationEnter.axis"))!==null&&g!==void 0?g:be(this._option.getChart().getSpec(),"animationEnter"),exit:(_=(m=this._spec.animationExit)!==null&&m!==void 0?m:be(this._option.getChart().getSpec(),"animationExit.axis"))!==null&&_!==void 0?_:be(this._option.getChart().getSpec(),"animationExit"),update:(y=(v=this._spec.animationUpdate)!==null&&v!==void 0?v:be(this._option.getChart().getSpec(),"animationUpdate.axis"))!==null&&y!==void 0?y:be(this._option.getChart().getSpec(),"animationUpdate")});x.enter&&(x.update[0].customParameters={enter:x.enter[0]}),this._marks.forEach(S=>S.setAnimationConfig(x))}}}_shouldComputeTickData(){return this.getVisible()||this._spec.forceInitTick}_initData(){const t=this._initTickDataSet(this._tickTransformOption()),e=new Cr(this._option,t);this._tickData=[e],t.target.addListener("change",()=>{this._onTickDataChange(e)})}collectData(t,e){const n=[];return zi(this._regions,r=>{var s;let a=this.collectSeriesField(t,r);if(a=J(a)?Ge(this._scale.type)?a:[a[0]]:[a],t||(this._dataFieldText=r.getFieldAlias(a[0])),a){const o=r.getViewData();if(e)a.forEach(l=>{n.push(r.getRawDataStatisticsByField(l,!!Ge(this._scale.type)))});else if(o&&o.latestData&&o.latestData.length){const l=(s=r.getViewDataStatistics)===null||s===void 0?void 0:s.call(r),u=this.type===lt.cartesianLinearAxis&&this._spec.breaks&&this._spec.breaks.length;a.forEach(c=>{var h;!((h=l?.latestData)===null||h===void 0)&&h[c]&&(u?n.push(Object.assign(Object.assign({},l.latestData[c]),{values:o.latestData.map(d=>d[c])})):n.push(l.latestData[c]))})}}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),n}isSeriesDataEnable(){let t=!0;return zi(this._regions,e=>{var n;J((n=e.getViewDataStatistics())===null||n===void 0?void 0:n.latestData)&&(t=!1)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t}setSeriesAndRegionsFromSpec(){const{seriesId:t,seriesIndex:e,regionId:n,regionIndex:r}=this._spec;L(t)&&(this._seriesUserId=X(t)),L(n)&&(this._regionUserId=X(n)),L(e)&&(this._seriesIndex=X(e)),L(r)&&(this._regionIndex=X(r)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionIndex),this.layout.layoutBindRegionID=this._regions.map(s=>s.id)}getBindSeriesFilter(){return{userId:this._seriesUserId,specIndex:this._seriesIndex}}initEvent(){this.event.on(Tt.scaleUpdate,{filter:({model:e})=>e?.id===this.id},this.effect.scaleUpdate.bind(this));const t=Ent(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}).map(e=>e.getViewDataStatistics()).filter(e=>!!e);t.length>1?this._option.dataSet.multipleDataViewAddListener(t,"change",()=>{this.updateScaleDomain()}):t.length===1&&t[0].target.addListener("change",()=>{this.updateScaleDomain()}),zi(this._regions,e=>{e.event.on(Tt.rawDataUpdate,{filter:({model:n})=>n?.id===e.id},()=>{this._clearRawDomain()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}updateScaleDomain(){}_clearRawDomain(){}onLayoutEnd(){this.updateScaleRange(),this.event.emit(Tt.scaleUpdate,{model:this,value:"range"}),super.onLayoutEnd()}computeData(t){t!=="force"||this._tickData&&this._tickData.length?!this._tickData||!this._tickData.length||t!=="force"&&Ne(this._scale.range(),[0,1])||this._tickData.forEach(e=>{e.getDataView().reRunAllTransform({skipEqual:!0})}):zi(this._regions,e=>{var n;(n=e.getViewData())===null||n===void 0||n.reRunAllTransform()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_updateTickDataMarks(t){this._tickData&&this._tickData.forEach(e=>{e.addRelatedMark(t)})}initScales(){this._scales=[this._scale];const t=[];if(zi(this._regions,e=>{const n=e.getGroups();n&&t.push(n)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t.length!==0){const e=rn(t.map(n=>n.fields.length));for(let n=1;n<e;n++){const r=this._scale.clone();this._scales.push(r)}}}_compareSpec(t,e){const n=super._compareSpec(t,e);return n.reMake?n:(n.reRender=!0,e?.type!==t?.type||e?.visible!==t?.visible?(n.reMake=!0,n):(n.reMake=["grid","subGrid","tick","subTick","label","domainLine","title"].some(r=>{var s,a;return((s=e?.[r])===null||s===void 0?void 0:s.visible)!==((a=t?.[r])===null||a===void 0?void 0:a.visible)}),n))}_getAxisAttributes(){const t=this._spec,e={orient:this.getOrient(),select:this._option.disableTriggerEvent!==!0&&t.select,hover:this._option.disableTriggerEvent!==!0&&t.hover};if(t.domainLine&&t.domainLine.visible?e.line=k4t(t.domainLine):e.line={visible:!1},t.label&&t.label.visible){const n=xa(t.label,["style","formatMethod","state"]);e.label=n,t.label.style&&(e.label.style=it(t.label.style)?(r,s,a,o)=>{var l;const u=t.label.style(r.rawValue,s,r,a,o);return $t(Wt({},(l=this._theme.label)===null||l===void 0?void 0:l.style,u))}:$t(t.label.style)),(t.label.formatMethod||t.label.formatter)&&(e.label.formatMethod=this._getLabelFormatMethod()),t.label.state&&(e.label.state=X5t(t.label.state)),it(t.label.dataFilter)&&(e.label.dataFilter=(r,s)=>t.label.dataFilter(r,s,{vchart:this._option.globalInstance}))}else e.label={visible:!1};if(t.tick&&t.tick.visible?(e.tick={visible:t.tick.visible,length:t.tick.tickSize,inside:t.tick.inside,alignWithLabel:t.tick.alignWithLabel,dataFilter:it(t.tick.dataFilter)?n=>t.tick.dataFilter(n,{vchart:this._option.globalInstance}):void 0},t.tick.style&&(e.tick.style=it(t.tick.style)?(n,r,s,a)=>{var o;const l=t.tick.style(n,r,s,a);return $t(Wt({},(o=this._theme.tick)===null||o===void 0?void 0:o.style,l))}:$t(t.tick.style)),t.tick.state&&(e.tick.state=Xf(t.tick.state))):e.tick={visible:!1},t.subTick&&t.subTick.visible?(e.subTick={visible:t.subTick.visible,length:t.subTick.tickSize,inside:t.subTick.inside,count:t.subTick.tickCount},t.subTick.style&&(e.subTick.style=it(t.subTick.style)?(n,r,s,a)=>{var o;const l=t.subTick.style(n,r,s,a);return $t(Wt({},(o=this._theme.subTick)===null||o===void 0?void 0:o.style,l))}:$t(t.subTick.style)),t.subTick.state&&(e.subTick.state=Xf(t.subTick.state))):e.subTick={visible:!1},t.title&&t.title.visible){const n=t.title,{autoRotate:r,angle:s,style:a={},background:o,state:l,shape:u}=n,c=H4t(n,["autoRotate","angle","style","background","state","shape"]);let h,d=s;t.orient!=="left"&&t.orient!=="right"||r&&N(d)&&(d=t.orient==="left"?-90:90,h=A4t[t.orient]),e.title=Object.assign(Object.assign({},c),{autoRotate:!1,angle:d?ii(d):null,textStyle:Wt({},h,$t(a)),pickable:a.pickable!==!1,childrenPickable:a.pickable!==!1,state:{}}),u&&u.visible?(e.title.shape=Object.assign(Object.assign({},u),{style:$t(u.style)}),u.state&&(e.title.state.shape=Xf(u.state))):e.title.shape={visible:!1},o&&o.visible?(e.title.background=Object.assign(Object.assign({},o),{style:$t(o.style)}),o.state&&(e.title.state.background=Xf(o.state))):e.title.background={visible:!1},l&&(e.title.state.text=Xf(l))}else e.title={visible:!1};return t.background&&t.background.visible?(e.panel={visible:!0},t.background.style&&(e.panel.style=$t(t.background.style)),t.background.state&&(e.panel.state=Xf(t.background.state))):e.panel={visible:!1},e}_getGridAttributes(){const t=this._spec;return{alternateColor:t.grid.alternateColor,alignWithLabel:t.grid.alignWithLabel,style:it(t.grid.style)?(e,n)=>{var r,s;const a=t.grid.style((r=e.datum)===null||r===void 0?void 0:r.rawValue,n,e.datum);return $t(Wt({},(s=this._theme.grid)===null||s===void 0?void 0:s.style,a))}:$t(t.grid.style),subGrid:t.subGrid.visible===!1?{visible:!1}:{type:"line",visible:t.subGrid.visible,alternateColor:t.subGrid.alternateColor,style:$t(t.subGrid.style)}}}_getLabelFormatMethod(){const{formatMethod:t,formatter:e}=this._spec.label,{formatFunc:n}=Ju(t,e);return n?(r,s,a)=>n(s.rawValue,s,e):null}_initTickDataSet(t,e=0){Ul(this._option.dataSet,"scale",j4t);const n=this.registerTicksTransform();return new je(this._option.dataSet,{name:`${this.type}_${this.id}_ticks_${e}`}).parse(this._scales[e],{type:"scale"}).transform({type:n,options:t},!1)}_tickTransformOption(){const t=this._tick||{},e=this._spec.label||{},{tickCount:n,forceTickCount:r,tickStep:s,tickMode:a}=t,{style:o,formatMethod:l,minGap:u}=e;return{sampling:this._spec.sampling!==!1,tickCount:n,forceTickCount:r,tickStep:s,tickMode:a,axisOrientType:this._orient,coordinateType:this._coordinateType,labelStyle:o,labelFormatter:l,labelGap:u}}addTransformToTickData(t,e){this._tickData.forEach(n=>{var r;(r=n?.getDataView())===null||r===void 0||r.transform(t,e)})}dataToPosition(t){return this._scale.scale(t)}getDatum(t){var e;return t&&t.name===Cn.label?t.data:this._axisMark?(e=this._axisMark.getComponent())===null||e===void 0?void 0:e.attribute.items:void 0}scaleRangeFactor(t,e,n){return this._onTickDataChange(this.getTickData()),this.getScale().rangeFactor(t,e,n)}scaleRangeFactorEnd(t,e,n){return this._onTickDataChange(this.getTickData()),this.getScale().rangeFactorEnd(t,e)}scaleRangeFactorStart(t,e,n){return this._onTickDataChange(this.getTickData()),this.getScale().rangeFactorStart(t,e)}}Ez.specKey="axes";const wf=()=>{pT(),z.registerAnimation("axis",()=>({appear:{type:"fadeIn"},enter:{type:"fadeIn"},update:{type:"update"},exit:{type:"fadeOut"}}))},Trt=i=>{let{x:t,y:e}=i[0].getLayoutStartPoint(),n=t+i[0].getLayoutRect().width,r=e+i[0].getLayoutRect().height;for(let a=1;a<i.length;a++){const o=i[a],{x:l,y:u}=o.getLayoutStartPoint(),{width:c,height:h}=o.getLayoutRect();t=Math.min(t,l),n=Math.max(n,c+l),e=Math.min(e,u),r=Math.max(r,h+u)}const s=Math.abs(r-e);return{width:Math.abs(n-t),height:s}};var FG=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};const V4t=[L0];class Ak extends Ez{getOrient(){return this._orient}getDefaultInteractive(){return!0}set autoIndentOnce(t){this._autoIndentOnce=t}getScales(){return this._scales}getInnerOffset(){return this._innerOffset}constructor(t,e){super(t,e),this.type=lt.cartesianAxis,this.name=lt.cartesianAxis,this._defaultBandPosition=.5,this._defaultBandInnerPadding=.1,this._defaultBandOuterPadding=.3,this.layoutType="region-relative",this.layoutZIndex=ti.Axis,this.layoutLevel=Jo.Axis,this._orient="left",this._autoIndentOnce=!1,this._hasAutoIndent=!1,this._scales=[],this._tick=void 0,this._layoutCache={width:0,height:0,_lastComputeOutBounds:{x1:0,x2:0,y1:0,y2:0}},this._innerOffset={top:0,bottom:0,left:0,right:0},this.effect={scaleUpdate:n=>{this.computeData(n?.value),zi(this._regions,r=>{const s=this.getOrient();Ci(s)?Wa(r.getXAxisHelper(),this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&r.setXAxisHelper(this.axisHelper()):Bo(s)?Wa(r.getYAxisHelper(),this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&r.setYAxisHelper(this.axisHelper()):mu(s)&&Wa(r.getZAxisHelper(),this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&r.setZAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=n=>{let{x:r,y:s}=n;return et(r)&&(r+=+(this._orient==="left")*this.getLayoutRect().width),et(s)&&(s+=+(this._orient==="top")*this.getLayoutRect().height),{x:r,y:s}},this._transformLayoutRect=n=>{if(!this._visible)return n;const r=this._latestBounds.clone().translate(-this.getLayoutStartPoint().x,-this.getLayoutStartPoint().y);switch(this._layout.layoutOrient){case"left":this._layout.layoutRectLevelMap.width===Fs&&(n.width=r.x1<0?-r.x1:0);break;case"right":this._layout.layoutRectLevelMap.width===Fs&&(n.width=r.x2>0?r.x2:0);break;case"top":this._layout.layoutRectLevelMap.height===Fs&&(n.height=r.y1<0?-r.y1:0);break;case"bottom":this._layout.layoutRectLevelMap.height===Fs&&(n.height=r.y2>0?r.y2:0)}return n.width=Math.ceil(n.width),n.height=Math.ceil(n.height),this._layout.setRectInSpec(this._layoutCacheProcessing(n))},this._transformLayoutPadding=n=>(this.layoutOrient==="left"||this.layoutOrient==="right"?(n.top=0,n.bottom=0):this.layoutOrient!=="top"&&this.layoutOrient!=="bottom"||(n.left=0,n.right=0),n),this._updateAxisLayout=()=>{const n=this.getLayoutStartPoint(),r=this._getUpdateAttribute(!1),{grid:s}=r,a=FG(r,["grid"]),o=Wt({x:n.x,y:n.y},this._axisStyle,a);this._axisMark.setSimpleStyle(o),this._gridMark&&this._gridMark.setSimpleStyle(Wt({x:n.x,y:n.y},this._getGridAttributes(),s))},this._fixAxisOnZero=()=>{const{onZero:n,visible:r}=this._spec.domainLine;if(this.visible&&n&&r!==!1){const{onZeroAxisId:s,onZeroAxisIndex:a}=this._spec.domainLine,o=this._option.getComponentsByKey("axes"),l=Ci(this.getOrient()),u=h=>{var d;return(l?!Ci(h.getOrient()):Ci(h.getOrient()))&&Ge(h.getScale().type)&&(h.getTickData()?(d=h.getTickData().getLatestData())===null||d===void 0?void 0:d.find(f=>f.value===0):h.getScale().domain()[0]<=0&&ke(h.getScale().domain())>=0)},c=o.filter(h=>u(h));if(c.length){let h;if(L(s))h=c.find(d=>d.id===s);else if(L(a)){const d=o[a];u(d)&&(h=d)}else h=c[0];if(h){const d=this._axisMark,f=h.valueToPosition(0);l?d.setSimpleStyle(Object.assign(Object.assign({},d.getSimpleStyle()),{line:Object.assign(Object.assign({},this._axisStyle.line),{dy:this._orient==="bottom"?-((h.getInverse()?h.getScale().range()[1]:h.getScale().range()[0])-f):f})})):d.setSimpleStyle(Object.assign(Object.assign({},d.getSimpleStyle()),{line:Object.assign(Object.assign({},this._axisStyle.line),{dx:this._orient==="left"?f:-((h.getInverse()?h.getScale().range()[0]:h.getScale().range()[1])-f)})}))}}}},this._orient=Ec(t,["z"]),mu(this._orient)&&(this.layoutType="absolute"),this._dataSet=e.dataSet,this._coordinateType="cartesian"}static getSpecInfo(t){const e=t[this.specKey];if(!e)return null;const n=t.direction==="horizontal";if(!J(e)){if(!IG(e))return null;const{axisType:o,componentName:l}=MG(e,n);return e.type=o,[{spec:e,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:l}]}let r=!0;if(e.filter(o=>o.orient==="z")[0]){const o=e.filter(u=>u.orient==="bottom")[0],l=e.filter(u=>Bo(u.orient))[0];r=e.length===3&&o&&l}let s=e.map((o,l)=>({spec:o,index:l}));r||(s=s.filter(({spec:o})=>o.orient!=="z"));const a=[];return s.forEach(({spec:o,index:l})=>{if(!IG(o))return;const{axisType:u,componentName:c}=MG(o,n);o.type=u,a.push({spec:o,specPath:[this.specKey,l],specInfoPath:["component",this.specKey,l],type:c})}),a}static createComponent(t,e){const{spec:n}=t,r=FG(t,["spec"]),s=z.getComponentInKey(r.type);return s?new s(n,Object.assign(Object.assign({},e),r)):(e.onError(`Component ${r.type} not found`),null)}initLayout(){super.initLayout(),this._layout.autoIndent=this._spec.autoIndent!==!1,this._layout.layoutOrient=this._orient}getNewScaleRange(){const{width:t,height:e}=this.getLayoutRect(),{left:n,right:r,top:s,bottom:a}=this._innerOffset;let o=[];return Ci(this.getOrient())?et(t)&&(o=this._inverse?[t-r,n]:[n,t-r]):mu(this.getOrient())?et(t)&&(o=this._inverse?[t-r,n]:[n,t-r],this._scale.range(o)):et(e)&&(o=this._inverse?[s,e-a]:[e-a,s]),o}updateScaleRange(){let t=!1;const e=this.getNewScaleRange(),n=this._scale.range();return e.length===n.length&&e.every((r,s)=>r===n[s])?t=!1:(t=!0,this._scale.range(e)),t}init(t){var e;super.init(t),(e=this.pluginService)===null||e===void 0||e.load(V4t.map(n=>new n)),this.callPlugin(n=>{this.pluginService&&n.onInit&&n.onInit(this.pluginService,this)})}setAttrFromSpec(){var t;if(super.setAttrFromSpec(),this.visible){Ci(this.getOrient())?Hi(this._spec.maxHeight)&&(this._spec.maxHeight="30%"):Hi(this._spec.maxWidth)&&(this._spec.maxWidth="30%");const n=this._getAxisAttributes();n.label.formatMethod=this._getLabelFormatMethod(),n.verticalFactor=this.getOrient()==="top"||this.getOrient()==="right"?-1:1,this._axisStyle=n}this._tick=this._spec.tick;const e=(t=this._option.getChart())===null||t===void 0?void 0:t.getSpec();this._inverse=h4t(this._spec,e?.direction==="horizontal")}onLayoutStart(t,e){if(super.onLayoutStart(t,e),!mu(this.getOrient())&&this._spec.innerOffset){const n=this._spec;Bo(this.getOrient())?["top","bottom"].forEach(r=>{this._innerOffset[r]=en(n.innerOffset[r],e.height,e)}):["left","right"].forEach(r=>{this._innerOffset[r]=en(n.innerOffset[r],e.width,e)})}}getSeriesStatisticsField(t){let e;return e=Ci(this.getOrient())?t.fieldX:mu(this.getOrient())?t.fieldZ:t.fieldY,Ge(this._scale.type)?e:[e[0]]}_tickTransformOption(){var t,e,n,r;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimals:(t=this._tick)===null||t===void 0?void 0:t.noDecimals,labelLastVisible:(e=this._spec.label)===null||e===void 0?void 0:e.lastVisible,labelFirstVisible:(n=this._spec.label)===null||n===void 0?void 0:n.firstVisible,labelFlush:(r=this._spec.label)===null||r===void 0?void 0:r.flush})}axisHelper(){return{isContinuous:Ge(this._scale.type),dataToPosition:this.dataToPosition.bind(this),getScale:(t=0)=>this._scales[t],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse===!0,getSpec:()=>this._spec}}afterCompile(){var t;!((t=this._axisMark)===null||t===void 0)&&t.getProduct()&&this.event.on(Zo.AFTER_ELEMENT_ENCODE,({mark:e})=>{if(e===this._axisMark&&this._isLayout===!1&&(Ci(this.getOrient())?this.callPlugin(n=>{this.pluginService&&n.onDidLayoutHorizontal&&n.onDidLayoutHorizontal(this.pluginService,this)}):this.callPlugin(n=>{this.pluginService&&n.onDidLayoutVertical&&n.onDidLayoutVertical(this.pluginService,this)}),this._unitText)){const{x:n,y:r}=this.getLayoutStartPoint(),s=Ci(this._orient)?{x:rn(this._scale.range())+n,y:r}:{x:n,y:Rn(this._scale.range())+r};this._unitText.setAttributes(s)}}),this.callPlugin(e=>{this.pluginService&&e.onDidCompile&&e.onDidCompile(this.pluginService,this)})}collectScale(){const t=[];return zi(this._regions,e=>{t.push(this.getOrient()==="left"||this.getOrient()==="right"?e.scaleY:e.scaleX)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),t}collectSeriesField(t,e){var n,r;let s;return s=t>0?(r=(n=e.getGroups())===null||n===void 0?void 0:n.fields)===null||r===void 0?void 0:r[t]:Ci(this.getOrient())?e.getSpec().x2Field?[...e.fieldX,e.fieldX2]:e.fieldX:mu(this.getOrient())?e.fieldZ:e.getSpec().y2Field?[...e.fieldY,e.fieldY2]:e.fieldY,s}updateSeriesScale(){const t=this.getOrient();zi(this._regions,e=>{Ci(t)?Wa(e.getXAxisHelper(),this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&(e.setScaleX(this._scale),e.setXAxisHelper(this.axisHelper())):Bo(t)?Wa(e.getYAxisHelper(),this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&(e.setScaleY(this._scale),e.setYAxisHelper(this.axisHelper())):mu(t)&&Wa(e.getZAxisHelper(),this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&(e.setScaleZ(this._scale),e.setZAxisHelper(this.axisHelper()))},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getBoundsInRect(t){var e;let n={x1:0,y1:0,x2:0,y2:0};if(!this._visible)return n;this._verticalLimitSize=Ci(this.getOrient())?t.height:t.width,this.setLayoutRect(t),!this.updateScaleRange()&&J((e=this.getTickData())===null||e===void 0?void 0:e.getLatestData())||this.computeData("range");const r={skipLayout:!1},s=Ci(this.getOrient());this.pluginService&&(s?this.callPlugin(l=>{l.onWillLayoutHorizontal&&l.onWillLayoutHorizontal(this.pluginService,r,this)}):this.callPlugin(l=>{l.onWillLayoutVertical&&l.onWillLayoutVertical(this.pluginService,r,this)}));const a=this._axisMark.getProduct();let o=!1;if(!r.skipLayout){const l=this._getUpdateAttribute(!0),u=this._axisMark.getComponent(),c=Wt(Object.assign({},this.getLayoutStartPoint()),this._axisStyle,l,{line:{visible:!1}});let h=u?.getBoundsWithoutRender(c);h&&!h.empty()||(h=new ir().set(c.x,c.y,c.x,c.y)),o=!0,this._latestBounds=h,n=this._appendAxisUnit(h,s)}return o||(this._latestBounds=a.AABBBounds),n}positionToData(t,e){const n=Ci(this.getOrient());e&&(t-=n?this.getLayoutStartPoint().x:this.getLayoutStartPoint().y),this._innerOffset&&(t=n?Ke(t,this._innerOffset.left,this.getLayoutRect().width-this._innerOffset.right):Ke(t,this._innerOffset.top,this.getLayoutRect().height-this._innerOffset.bottom));const r=this._scale.range();return(t-r[0])*(t-ke(r))>0?null:this._scale.invert(t)}_getTitleLimit(t){var e,n,r,s,a;const o=this._spec.title;if(o.visible&&N((e=o.style)===null||e===void 0?void 0:e.maxLineWidth)){const l=(a=(r=(n=this._axisStyle.title)===null||n===void 0?void 0:n.angle)!==null&&r!==void 0?r:(s=o.style)===null||s===void 0?void 0:s.angle)!==null&&a!==void 0?a:0;if(t){const h=this.getLayoutRect().width,d=Math.abs(Math.cos(l));return d<1e-6?1/0:h/d}const u=this.getLayoutRect().height,c=Math.abs(Math.sin(l));return c<1e-6?1/0:u/c}return null}_getUpdateAttribute(t){let e=0,n=0;if(!t){const p=Trt(this.getRegions());n=p.width,e=p.height}const{width:r,height:s}=this.getLayoutRect(),a=Ci(this._orient),o=Bo(this._orient);let l={x:0,y:0},u=e,c=r;a?l={x:r,y:0}:o&&(l={x:0,y:s},u=n,c=s);const h=this.getLabelItems(c),d={start:{x:0,y:0},end:l,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(a)},items:h,scale:this._scale.clone()};t||(d.grid={type:"line",start:{x:0,y:0},end:l,items:h[0],verticalFactor:this._axisStyle.verticalFactor,length:u});let f=a?this.layout.minHeight:this.layout.minWidth;return(a&&this._layout.layoutRectLevelMap.height===kc||o&&this._layout.layoutRectLevelMap.width===kc)&&(f=this._verticalLimitSize),d.verticalLimitSize=this._verticalLimitSize,d.verticalMinSize=f,d.label={overflowLimitLength:this._getLabelOverflowLimit(a)},this._afterUpdateAttribute?this._afterUpdateAttribute(d,t):d}getLabelItems(t){var e;const n=(e=this.getTickData())===null||e===void 0?void 0:e.getLatestData();return n&&n.length?[n.map(r=>{const s=this._getNormalizedValue([r.value],t);return lm(r.value,s)}).filter(r=>{const{value:s,rawValue:a}=r,o=this._scale.domain();return this.getSpec().type==="log"?s>=0&&s<=1:Ge(this._scale.type)?a>=o[0]&&a<=ke(o):o.includes(a)})]:[]}initEvent(){super.initEvent(),this.visible&&(this.event.on(Tt.layoutEnd,this._updateAxisLayout),this.event.on(Tt.layoutEnd,this._fixAxisOnZero),this.event.on(Tt.layoutRectUpdate,()=>{this._clearLayoutCache()}))}_getNormalizedValue(t,e){return e===0?0:this.dataToPosition(t)/e}_layoutCacheProcessing(t){return["width","height"].forEach(e=>{t[e]<this._layoutCache[e]?t[e]=this._layoutCache[e]:this._layoutCache[e]=t[e]}),this._autoIndentOnce&&this._hasAutoIndent?["x1","x2","y1","y2"].forEach(e=>{this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]}):(this._hasAutoIndent=!0,["x1","x2","y1","y2"].forEach(e=>{this.layout.getLastComputeOutBounds()[e]<this._layoutCache._lastComputeOutBounds[e]?this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]:this._layoutCache._lastComputeOutBounds[e]=this.layout.getLastComputeOutBounds()[e]})),t}reInit(t){super.reInit(t),this._clearLayoutCache()}_clearLayoutCache(){this._hasAutoIndent=!1,this._layoutCache.width=0,this._layoutCache.height=0,this._layoutCache._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0}}onDataUpdate(){this._clearLayoutCache()}_appendAxisUnit(t,e){var n;if(this._spec.unit&&this._spec.unit.visible){const{text:r,style:s}=this._spec.unit;let a,o;const{x:l,y:u}=this.getLayoutStartPoint();e?(a={x:rn(this._scale.range())+l,y:u},o={textAlign:"left",textBaseline:"middle"}):(a={x:l,y:Rn(this._scale.range())+u},o={textAlign:this._orient==="left"?"left":"right",textBaseline:"bottom"}),o=Object.assign(Object.assign(Object.assign({},o),s),{x:a.x,y:a.y,text:r}),this._unitText?this._unitText.setAttributes(o):(this._unitText=Bb(o),this._unitText.name="axis-unit",(n=this.getContainer())===null||n===void 0||n.add(this._unitText));const c=this._unitText.AABBBounds;e?(t.x2+=c.x2>t.x2?c.x2-t.x2:0,t.y2+=c.y2>t.y2?c.y2-t.y2:0):(t.x1+=c.x1<t.x1?c.x1-t.x1:0,t.y1+=c.y1<t.y1?c.y1-t.y1:0)}return t}_getNeedClearVRenderComponents(){return this._unitText?[this._unitText]:[]}_getLabelOverflowLimit(t){var e,n;if(t&&((e=this._spec.label)===null||e===void 0?void 0:e.visible)!==!1&&((n=this._spec.label)===null||n===void 0?void 0:n.autoLimit)===!0){const r=this._option.getComponentsByKey("axes"),s=this.getRegions(),a=r.filter(h=>{const d=h.getOrient();return(d==="left"||d==="right")&&h.getRegions().some(f=>s.includes(f))});let o=0,l=0;const u=this.getLayoutStartPoint().x,c=u+this.getLayoutRect().width;return a.forEach(h=>{const d=h.getLayoutStartPoint().x;if(h.getOrient()==="left"&&d===u){const f=h.getLayoutRect().width;o=Math.max(o,f)}else if(d===c){const f=h.getLayoutRect().width;l=Math.max(l,f)}}),{left:o,right:l}}}}Ak.type=lt.cartesianAxis,Ak.specKey="axes";const W4t=(i,t,e)=>e.reduce((n,r,s)=>(n.push([r,e.length===s+1?t:e[s+1]]),n),[[i,e[0]]]);function $4t(i,t){const e=i[0],n=i[i.length-1],r=t.filter(s=>s>e&&s<n);return r.length===0?[[e,n]]:W4t(e,n,r)}const zG=(i,t)=>i-t,U4t=(i,t)=>{const e=[{count:0,sub:[],max:t[0],min:t[0]}];let n=0,r=0;for(;n<t.length;)i[r]<=t[n]?(e[n].count+=1,e[n].sub.push(i[r]),r+=1):(n+=1,e[n]={count:0,sub:[],max:t[n],min:t[n]});e.forEach(a=>{a.count&&(a.min=Math.min.apply(null,a.sub))});const s=i.slice(r);return e[n]={count:s.length,sub:s,min:t[t.length-1],max:Math.max.apply(null,s)},e};function G4t(i,t,e="count"){const n=U4t(i,t),r=e==="count"?i.length:n.reduce((l,u,c)=>u.count>0?l+u.max-u.min:l,0),s=[];let a=0,o=0;return n.forEach((l,u)=>{if(r===0)s.push([0,u/n.length-1]);else{const c=e==="count"?l.count:l.max-l.min,h=s[o-1]?s[o-1][1]:0,d=u===n.length-1?1:Math.min((a+c)/r,1);(h!==d||h!==0&&h!==1)&&(o+=1,s.push([h,d]),a+=c)}}),s}function Y4t(i,t,e){return i.sort(zG),t.sort(zG),{domain:$4t(i,t),scope:G4t(i,t,e)}}const X4t=Math.sqrt(50),K4t=Math.sqrt(10),q4t=Math.sqrt(2);class gT{constructor(){this._extend={},this._rawDomain=[],this.niceLabelFormatter=null}getRawDomain(){return this._rawDomain}setExtraAttrFromSpec(){L(this._spec.nice)&&(this._nice=this._spec.nice),L(this._spec.zero)&&(this._zero=this._spec.zero),this._expand=this._spec.expand,this._domain=B0(this._spec)}transformScaleDomain(){this.setScaleNice()}setLinearScaleNice(){var t;if(!this._nice)return!1;let e=5;const n=this._spec.tick||{};if(et(n.forceTickCount))e=n.forceTickCount;else if(it(n.tickCount)){const a=this._scale.range();let o=Math.abs(ke(a)-a[0]);o===1&&this._option&&(o=Ci(this._orient)?this._option.getChartViewRect().width:this._option.getChartViewRect().height),e=n.tickCount({axisLength:o,labelStyle:this._spec.label&&this._spec.label.style})}else e=et(n.tickCount)?n.tickCount:5;this._spec.niceType==="accurateFirst"&&(e=Math.max(5,e));const{min:r,max:s}=(t=this._domain)!==null&&t!==void 0?t:{};return N(r)&&N(s)&&N(this._softMaxValue)&&N(this._softMinValue)?this._scale.nice(e):(L(r)||L(this._softMinValue))&&N(s)&&N(this._softMaxValue)?this._scale.niceMax(e):!(!N(r)||!N(this._softMinValue)||!L(s)&&!L(this._softMaxValue))&&this._scale.niceMin(e)}setLogScaleNice(){var t;if(!this._nice)return!1;const{min:e,max:n}=(t=this._domain)!==null&&t!==void 0?t:{};return N(e)&&N(n)&&N(this._softMaxValue)&&N(this._softMinValue)?this._scale.nice():(L(e)||L(this._softMinValue))&&N(n)&&N(this._softMaxValue)?this._scale.niceMax():!(!N(e)||!N(this._softMinValue)||!L(n)&&!L(this._softMaxValue))&&this._scale.niceMin()}setScaleNice(){return this._spec.type==="log"?this.setLogScaleNice():this.setLinearScaleNice()}dataToPosition(t,e){return this.valueToPosition(t[0])}valueToPosition(t){return this._scale.scale(t)}computeLinearDomain(t){let e=[];if(t.length){const n=this._spec.breaks&&this._spec.breaks.length;let r,s,a=[];if(t.forEach(o=>{const{min:l,max:u}=o;r=r===void 0?l:Math.min(r,l),s=s===void 0?u:Math.max(s,u),n&&(a=a.concat(o.values))}),n){const o=[],l=[],u=N(this._domain.max)?s:this._domain.max;for(let c=0;c<this._spec.breaks.length;c++){const{range:h}=this._spec.breaks[c];h[0]<=h[1]&&h[1]<=u&&(o.push(h),l.push(this._spec.breaks[c]))}if(o.sort((c,h)=>c[0]-h[0]),o.length){const{domain:c,scope:h}=Y4t(a,gI(o),this._spec.breaks[0].scopeType);e=gI(c),this._break={domain:c,scope:h,breakDomains:o,breaks:l}}else e=[r,s]}else e=[r,s]}else e[0]=0,e[1]=0;return this.setSoftDomainMinMax(e),this.expandDomain(e),this.includeZero(e),this.setDomainMinMax(e),e}expandDomain(t){if(!this._expand)return;let e=t[0],n=ke(t);e===n&&(n===0?n=1:n>0?e=0:n<0&&(n=0)),L(this._expand.min)&&(t[0]=e-(n-e)*this._expand.min),L(this._expand.max)&&(t[t.length-1]=n+(n-e)*this._expand.max)}niceDomain(t){const{min:e,max:n}=B0(this._spec);if(L(e)||L(n)||this._spec.type!=="linear")return t;if(Math.abs(Rn(t)-rn(t))<=1e-12){let r=t[0];const s=r>=0?1:-1;if(r=Math.abs(r),r<1)t[0]=0,t[t.length-1]=1;else{let a=r/5;const o=Math.floor(Math.log(a)/Math.LN10),l=a/Math.pow(10,o);a=(l>=X4t?10:l>=K4t?5:l>=q4t?2:1)*Math.pow(10,o),t[0]=0,t[t.length-1]=10*a}s<0&&(t.reverse(),t[0]*=-1,t[t.length-1]*=-1)}return t}includeZero(t){this._zero&&(t[0]=Math.min(t[0],0),t[t.length-1]=Math.max(ke(t),0))}setExtendDomain(t,e){if(e===void 0)return void delete this._extend[t];this._extend[t]=e;const n=this._scale.domain();this.extendDomain(n),this.includeZero(n),this.setDomainMinMax(n),this.niceDomain(n),this._scale.domain(n,this._nice),this._nice&&!this.setScaleNice()&&this._scale.rescale(),this.event.emit(Tt.scaleUpdate,{model:this,value:"domain"})}extendDomain(t){let e;const n=t.length-1,r=t[0]-t[n]>0,s=r?n:0,a=r?0:n;for(const o in this._extend)e=this._extend[o],e>t[a]&&(t[a]=e),e<t[s]&&(t[s]=e)}getDomainSpec(){return this._domain}setDomainMinMax(t){if(!this._domain)return;const{min:e,max:n}=this._domain;L(e)&&(t[0]=e),L(n)&&(t[t.length-1]=n)}setSoftDomainMinMax(t){const{softMin:e,softMax:n}=this._spec;if(L(e)){let r=it(e)?e(t):e;N(r)&&(r=t[0]),r<=t[0]&&(t[0]=r,this._softMinValue=r)}if(L(n)){let r=it(n)?n(t):n;N(r)&&(r=ke(t)),r>=ke(t)&&(t[t.length-1]=r),this._softMaxValue=r}}setZero(t){this._zero!==t&&(this._zero=t,this.updateScaleDomain())}updateScaleDomain(){var t;if(!this.isSeriesDataEnable())return;!(!((t=this._rawDomain)===null||t===void 0)&&t.length)&&this._scale&&this._updateRawDomain();const e=this.collectData(),n=this.computeLinearDomain(e);this.updateScaleDomainByModel(n)}updateScaleDomainByModel(t){t=t??this._scale.domain(),this.extendDomain(t),this.includeZero(t),this.setDomainMinMax(t),this.niceDomain(t),this._scale.domain(t,this._nice),this._nice&&!this.setScaleNice()&&this._scale.rescale(),this._updateNiceLabelFormatter(t),this._domainAfterSpec=this._scale.domain(),this.event.emit(Tt.scaleDomainUpdate,{model:this}),this.event.emit(Tt.scaleUpdate,{model:this,value:"domain"})}getDomainAfterSpec(){return this._domainAfterSpec}_updateNiceLabelFormatter(t){const e=Math.abs(ke(t)-t[0]),n=Math.max(-Math.floor(Math.log10(e)),0)+2,r=Math.pow(10,n);this.niceLabelFormatter=s=>et(+s)?Math.round(+s*r)/r:s}_updateRawDomain(){const t=this.collectData(0,!0),e=this.computeLinearDomain(t);this._rawDomain=e,this.event.emit(Tt.scaleRawDomainUpdate,{model:this})}_clearRawDomain(){this._rawDomain=[]}}const mT={domainLine:{visible:!1},grid:{visible:!0},subGrid:{visible:!1},tick:{visible:!1},subTick:{visible:!1}},Zb={label:{space:8},title:{space:8},maxHeight:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},Qb={label:{space:12,autoLimit:!0},title:{space:12,autoRotate:!0},maxWidth:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},Af={domainLine:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},grid:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[]}},subGrid:{visible:!1,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[4,4]}},tick:{visible:!0,inside:!1,tickSize:4,alignWithLabel:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},subTick:{visible:!1,tickSize:2,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},label:{visible:!0,inside:!1,space:10,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}},title:{space:10,padding:0,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor"},fontWeight:"normal",fillOpacity:1}}};class Vo extends Ak{constructor(){super(...arguments),this.type=lt.cartesianLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new vs}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.setExtraAttrFromSpec();const n=(e=(t=this._tickData)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.getDataView().transformsArr.find(r=>r.type===this.registerTicksTransform());n&&(n.options=this._tickTransformOption())}initScales(){var t,e;super.initScales();const n=[0,1];L((t=this._domain)===null||t===void 0?void 0:t.min)&&(n[0]=this._domain.min),L((e=this._domain)===null||e===void 0?void 0:e.max)&&(n[1]=this._domain.max),this._scale.domain(n)}_tickTransformOption(){var t;return Object.assign(Object.assign({},super._tickTransformOption()),{breakData:!((t=this._spec.breaks)===null||t===void 0)&&t.length?()=>this._break:null})}_getUpdateAttribute(t){var e,n;const r=super._getUpdateAttribute(t);if(!mu(this._orient)&&(!((n=(e=this._break)===null||e===void 0?void 0:e.breaks)===null||n===void 0)&&n.length)){const{width:s,height:a}=this.getLayoutRect(),o=Ci(this._orient),l=o?s:a;r.breaks=this._break.breaks.map(u=>{const{range:c,breakSymbol:h,gap:d=6}=u,f=this.valueToPosition((c[0]+c[1])/2)/l;let p;p=va(d)?Number(d.substring(0,d.length-1))/100:d/l;const g=et(h?.angle)?h.angle:o?60:15;return{range:[f-p/2,f+p/2],breakSymbol:Object.assign(Object.assign({visible:!0},h),{angle:g*Math.PI/180}),rawRange:c}})}return r}getNewScaleRange(){var t,e;let n=super.getNewScaleRange();return!((t=this._spec.breaks)===null||t===void 0)&&t.length&&(!((e=this._break)===null||e===void 0)&&e.scope)&&(n=gI(this._break.scope).map(r=>n[0]+(ke(n)-n[0])*r)),n}computeDomain(t){return this.computeLinearDomain(t)}axisHelper(){const t=super.axisHelper();return t.setExtendDomain=this.setExtendDomain.bind(this),t.valueToPosition=this.valueToPosition.bind(this),t}registerTicksTransform(){const t=`${this.type}-ticks`;return Vt(this._option.dataSet,t,Vb),t}}Vo.type=lt.cartesianLinearAxis,Vo.specKey="axes",Vo.builtInTheme={axis:Af,axisLinear:mT,axisX:Zb,axisY:Qb},Be(Vo,gT);const mr=()=>{z.registerGraphicComponent(Aa.lineAxis,(i,t)=>new co(i,t)),z.registerGraphicComponent(ka.lineAxisGrid,(i,t)=>new Ph(i,t)),wf(),z.registerComponent(Vo.type,Vo)};class Prt{constructor(){this._rawDomainIndex=[],this._rawDomain=[]}_initData(){var t;if(this._spec.showAllGroupLayers&&this._scales.length>1)for(let e=0;e<this._scales.length;e++){const n=((t=this._spec.layers)!==null&&t!==void 0?t:[])[this._scales.length-1-e]||{};if(n.visible!==!1&&n.tickCount!==0&&n.forceTickCount!==0){const r=this._initTickDataSet(Object.assign(Object.assign({},this._tickTransformOption()),n),e),s=new Cr(this._option,r);this._tickData.push(s),r.target.addListener("change",()=>{this._onTickDataChange(s)}),this._tickDataMap||(this._tickDataMap={}),this._tickDataMap[e]=s}}else{const e=this._initTickDataSet(this._tickTransformOption()),n=new Cr(this._option,e);e.target.addListener("change",()=>{this._onTickDataChange(n)}),this._tickData=[n],this._tickDataMap={0:n}}}_updateData(){var t,e,n;const r=this.registerTicksTransform();if(this._spec.showAllGroupLayers&&this._scales.length>1){const s=(t=this._spec.layers)!==null&&t!==void 0?t:[];Object.keys(this._tickDataMap).forEach(a=>{const o=s[this._scales.length-1-+a]||{},l=this._tickDataMap[a],u=l?.getDataView().transformsArr.find(c=>c.type===r);u&&(u.options=Object.assign(Object.assign({},this._tickTransformOption()),o))})}else{const s=(n=(e=this._tickData)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.getDataView().transformsArr.find(a=>a.type===r);s&&(s.options=this._tickTransformOption())}}getRawDomain(){return this._rawDomain}dataToPosition(t,e={}){var n,r;if(t.length===0||this._scales.length===0)return 0;const{position:s,bandScale:a}=this.getPosition(t);return s+a.bandwidth()*((r=(n=e.bandPosition)!==null&&n!==void 0?n:this._spec.bandPosition)!==null&&r!==void 0?r:this._defaultBandPosition)}valueToPosition(t){return this._scale.scale(t)}updateGroupScaleRange(){let t=this._scale;this._scales.forEach((e,n)=>{n>0&&(e.range([0,t.bandwidth()]),t=e)})}getPosition(t){let e=0,n=this._scale;if(this._scales.length===1||t.length===1)e=this.valueToPosition(t[0]);else{const r=Math.min(t.length,this._scales.length);for(let s=0;s<r;s++)e+=this._scales[s].scale(t[s]);n=this._scales[r-1]}return{position:e,bandScale:n}}calcScales(t,e){var n,r;const{bandPadding:s,paddingInner:a,paddingOuter:o}=this._spec,l=J(s),u=J(a),c=J(o);for(let h=0;h<this._scales.length;h++){const d=l?s[h]:s,f=u?a[h]:a,p=c?o[h]:o;this._scales[h].paddingInner((n=f??d)!==null&&n!==void 0?n:t,!0).paddingOuter((r=p??d)!==null&&r!==void 0?r:e,!0)}}computeBandDomain(t){if(!t.length)return[];if(t.length===1)return t[0].values;const e=new Set;for(let n=0;n<t.length;n++)for(let r=0;r<t[n].values.length;r++)e.add(t[n].values[r]);return Array.from(e)}updateScaleDomain(){var t;if(!this.isSeriesDataEnable())return;!(!((t=this._rawDomainIndex)===null||t===void 0)&&t.length)&&this._scales.length&&this._updateRawDomain();const e=this._spec.domain;for(let n=0;n<this._scales.length;n++)if(e&&e.length&&n===0)this._scales[n].domain(e);else{const r=this.collectData(n),s=this.computeBandDomain(r);this._scales[n].domain(s.sort((a,o)=>this._rawDomainIndex[n][a]-this._rawDomainIndex[n][o]))}this.transformScaleDomain(),this.event.emit(Tt.scaleDomainUpdate,{model:this}),this.event.emit(Tt.scaleUpdate,{model:this,value:"domain"})}getLabelItems(t){const e=[];let n=[];return(this._spec.showAllGroupLayers?this._scales:[this._scales[0]]).forEach((r,s)=>{var a;const o=this._tickDataMap[s],l=(a=o?.getLatestData())===null||a===void 0?void 0:a.length,u=l?o.getLatestData().map(c=>c.value):r.domain();if(u&&u.length)if(n&&n.length){const c=[],h=[];n.forEach(d=>{u.forEach(f=>{const p=X(d).concat(f);if(h.push(p),l){const g=lm(f,this._getNormalizedValue(p,t));c.push(g)}})}),l&&e.push(c.filter(d=>d.value>=0&&d.value<=1)),n=h}else u.forEach(c=>{n.push(c)}),l&&e.push(o.getLatestData().map(c=>lm(c.value,this._getNormalizedValue([c.value],t))).filter(c=>c.value>=0&&c.value<=1))}),e.reverse()}_updateRawDomain(){this._rawDomainIndex=[],this._rawDomain=[];const t=this._spec.domain;for(let e=0;e<this._scales.length;e++)if(t&&t.length&&e===0)this._scales[e].domain(t);else{const n=this.collectData(e,!0),r=this.computeBandDomain(n);this._rawDomainIndex[e]={},this._rawDomain[e]=r,r.forEach((s,a)=>this._rawDomainIndex[e][s]=a)}this.event.emit(Tt.scaleRawDomainUpdate,{model:this})}_clearRawDomain(){this._rawDomainIndex=[],this._rawDomain=[]}}const Ert={domainLine:{visible:!0},grid:{visible:!1},subGrid:{visible:!1},tick:{visible:!0},subTick:{visible:!1}};class jc extends Ak{constructor(){super(...arguments),this.type=lt.cartesianBandAxis,this._scale=new xf}computeDomain(t){return this.computeBandDomain(t)}updateScaleRange(){const t=super.updateScaleRange();return this.updateGroupScaleRange(),t}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}axisHelper(){const t=(e=0)=>this._scales[e];return{isContinuous:!1,dataToPosition:this.dataToPosition.bind(this),getScale:t,getBandwidth:(e=0)=>t(e).bandwidth(),getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse,getSpec:()=>this._spec}}registerTicksTransform(){const t=`${this.type}-ticks`;return Vt(this._option.dataSet,t,mWt),t}transformScaleDomain(){this.updateFixedWholeLength()}updateFixedWholeLength(){if(this._scale){const{bandSize:t,maxBandSize:e,minBandSize:n}=this._getOuterBandSizeFromSpec();if(t&&this._scale.bandwidth(t),e&&this._scale.maxBandwidth(e),n&&this._scale.minBandwidth(n),this._scale.isBandwidthFixed()&&this._spec.autoRegionSize&&(t||e)){const r=KI(this._scale.domain().length,t??e,this._scale.paddingInner(),this._scale.paddingOuter());["bottom","top"].includes(this._orient)?this._regions.forEach(s=>s.setMaxWidth(r)):["left","right"].includes(this._orient)&&this._regions.forEach(s=>s.setMaxHeight(r))}}}_getOuterBandSizeFromSpec(){var t;let{bandSize:e,maxBandSize:n,minBandSize:r,bandSizeLevel:s=0}=this._spec;const{gap:a,extend:o=0}=(t=this._spec.bandSizeExtend)!==null&&t!==void 0?t:{};s=Math.min(s,this._scales.length-1);for(let l=s;l>0;l--){const u=this._scales[l],c=u.domain(),h=u.paddingInner(),d=u.paddingOuter(),f=p=>{const g=l===s?o:0;return N(a)||l<s?KI(c.length,p,h,d)+g:(p+(Ht(a)?p*(Number(a.substring(0,a.length-1))/100):a))*c.length/(this._scales[l-1].paddingInner()+1)+g};L(e)&&(e=f(e)),L(n)&&(n=f(n)),L(r)&&(r=f(r))}return{bandSize:e,maxBandSize:n,minBandSize:r}}_compareSpec(t,e){const n=super._compareSpec(t,e);return n.reMake||e?.showAllGroupLayers===t?.showAllGroupLayers&&Ne(e?.layers,t?.layers)||(n.reMake=!0),n}reInit(t){super.reInit(),this==null||this._updateData()}}jc.type=lt.cartesianBandAxis,jc.specKey="axes",jc.builtInTheme={axis:Af,axisBand:Ert,axisX:Zb,axisY:Qb},Be(jc,Prt);const Mr=()=>{z.registerGraphicComponent(Aa.lineAxis,(i,t)=>new co(i,t)),z.registerGraphicComponent(ka.lineAxisGrid,(i,t)=>new Ph(i,t)),wf(),z.registerComponent(jc.type,jc,!1)};class Sg extends Vo{constructor(){super(...arguments),this.type=lt.cartesianTimeAxis,this._zero=!1,this.effect={scaleUpdate:t=>{this.computeData(t?.value),zi(this._regions,e=>{Ci(this.getOrient())?Wa(e.getXAxisHelper(),this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&e.setXAxisHelper(this.axisHelper()):Wa(e.getYAxisHelper(),this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&e.setYAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._tick=Wt({},this._spec.tick,(t=this._spec.layers)===null||t===void 0?void 0:t[0])}_initData(){var t;if(super._initData(),(t=this._spec.layers)===null||t===void 0?void 0:t[1]){const e=new je(this._option.dataSet,{name:`${this.type}_${this.id}_layer_1_ticks`}).parse(this._scale,{type:"scale"}).transform({type:`${this.type}-ticks`,options:Object.assign(Object.assign({},this._tickTransformOption()),{tickCount:this._spec.layers[1].tickCount,forceTickCount:this._spec.layers[1].forceTickCount,tickStep:this._spec.layers[1].tickStep})},!1);this._layerTickData=new Cr(this._option,e)}}computeData(t){super.computeData(t),this._layerTickData&&(this._layerTickData.getDataView().reRunAllTransform(),this._layerTickData.updateData())}created(){super.created(),this._layerTickData&&(this._axisMark&&this._layerTickData.addRelatedMark(this._axisMark),this._gridMark&&this._layerTickData.addRelatedMark(this._gridMark))}_getLabelFormatMethod(){var t,e,n,r,s,a,o,l;const u=No.getInstance(),c=((e=(t=this._spec.layers)===null||t===void 0?void 0:t[1])===null||e===void 0?void 0:e.timeFormat)||"%Y%m%d",h=(((r=(n=this._spec.layers)===null||n===void 0?void 0:n[1])===null||r===void 0?void 0:r.timeFormatMode)||"local")==="local"?u.timeFormat:u.timeUTCFormat,d=((a=(s=this._spec.layers)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.timeFormat)||"%Y%m%d",f=(((l=(o=this._spec.layers)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.timeFormatMode)||"local")==="local"?u.timeFormat:u.timeUTCFormat;return(p,g,m,_,v)=>{var y;let b;return b=v===0?f(d,p):h(c,p),!((y=this._spec.label)===null||y===void 0)&&y.formatMethod?this._spec.label.formatMethod(b,g):b}}getLabelItems(t){var e,n;const r=[],s=(e=this.getTickData())===null||e===void 0?void 0:e.getLatestData();s&&s.length&&r.push(s.map(o=>lm(o.value,this._getNormalizedValue([o.value],t))));const a=(n=this._layerTickData)===null||n===void 0?void 0:n.getLatestData();return a&&a.length&&r.push(a.map(o=>lm(o.value,this._getNormalizedValue([o.value],t)))),r}registerTicksTransform(){const t=`${this.type}-ticks`;return Vt(this._option.dataSet,t,Vb),t}transformScaleDomain(){}}Sg.type=lt.cartesianTimeAxis,Sg.specKey="axes",Sg.builtInTheme={axis:Af,axisX:Zb,axisY:Qb};const Jb=()=>{z.registerGraphicComponent(Aa.lineAxis,(i,t)=>new co(i,t)),z.registerGraphicComponent(ka.lineAxisGrid,(i,t)=>new Ph(i,t)),wf(),z.registerComponent(Sg.type,Sg)};class Hc extends Vo{constructor(){super(...arguments),this.type=lt.cartesianLogAxis,this._zero=!1,this._scale=new $M}initScales(){var t;super.initScales(),this._scale.base((t=this._spec.base)!==null&&t!==void 0?t:10),this._scale.clamp(!0,null,!1)}registerTicksTransform(){const t=`${this.type}-ticks`;return Vt(this._option.dataSet,t,Vb),t}transformScaleDomain(){}}Hc.type=lt.cartesianLogAxis,Hc.specKey="axes",Hc.builtInTheme={axis:Af,axisLinear:mT,axisX:Zb,axisY:Qb},Be(Hc,gT);const $m=()=>{z.registerGraphicComponent(Aa.lineAxis,(i,t)=>new co(i,t)),z.registerGraphicComponent(ka.lineAxisGrid,(i,t)=>new Ph(i,t)),wf(),z.registerComponent(Hc.type,Hc)};class gd extends Vo{constructor(){super(...arguments),this.type=lt.cartesianSymlogAxis,this._zero=!1,this._scale=new UM}initScales(){var t;super.initScales(),this._scale.constant((t=this._spec.constant)!==null&&t!==void 0?t:10)}registerTicksTransform(){const t=`${this.type}-ticks`;return Vt(this._option.dataSet,t,Vb),t}transformScaleDomain(){}}gd.type=lt.cartesianSymlogAxis,gd.specKey="axes",gd.builtInTheme={axis:Af,axisLinear:mT,axisX:Zb,axisY:Qb},Be(gd,gT);const Rrt=()=>{z.registerGraphicComponent(Aa.lineAxis,(i,t)=>new co(i,t)),z.registerGraphicComponent(ka.lineAxisGrid,(i,t)=>new Ph(i,t)),wf(),z.registerComponent(gd.type,gd)},F0=`${zt}_hide_`;function _T(i,t){i.context.finalAttrs&&(i.context.finalAttrs.visible=t)}function Z4t(i){return i.forEach(t=>{t[F0]&&(_T(t,!0),t[F0]=!1)}),i}function Q4t(i,t,e){let n=-1/0,r=0;const s=N(t);let a=t;i.forEach(o=>{if(o.context.finalAttrs.visible===!1)return;const l=o.context.finalAttrs.size/2,u=o.context.finalAttrs.x;s&&(a=(l+r)*e),Math.abs(u-n)<a+r+l?o.context.finalAttrs.forceShow||(o[F0]=!0,_T(o,!1)):n=u,r=l})}function J4t(i,t,e){let n=-1/0,r=0;const s=N(t);let a=t;i.forEach(o=>{if(o.context.finalAttrs.visible===!1)return;const l=o.context.finalAttrs.size/2,u=o.context.finalAttrs.y;s&&(a=(l+r)*e),Math.abs(u-n)<a+r+l?o.context.finalAttrs.forceShow||(o[F0]=!0,_T(o,!1)):n=u,r=l})}function tGt(i,t,e){let n=-1/0,r=0,s=0;const a=N(t);let o=t;i.forEach(l=>{if(l.context.finalAttrs.visible===!1)return;const u=l.context.finalAttrs.size/2,{x:c,y:h}=l.context.finalAttrs;a&&(o=(u+r)*e),s=(-1/0-c)**2+(n-h)**2,s<(o+r+u)**2?l.context.finalAttrs.forceShow||(l[F0]=!0,_T(l,!1)):n=h,r=u})}const eGt=(i,t)=>{if(!t||t.length===0)return t;const{direction:e,delta:n,deltaMul:r=1,groupBy:s}=i,a=o=>{Z4t(o);const l=i.sort?o.slice().sort((u,c)=>u.context.finalAttrs.x-c.context.finalAttrs.x):o;e===0?tGt(l,n,r):e===1?Q4t(l,n,r):J4t(l,n,r)};if(s){const o=t.reduce((l,u)=>{var c,h;const d=(h=(c=u.context.data)===null||c===void 0?void 0:c[0])===null||h===void 0?void 0:h[s];return l[d]?l[d].push(u):l[d]=[u],l},{});Object.keys(o).forEach(l=>{a(o[l])})}else a(t);return t},Ort=()=>{z.registerGrammarTransform("symbolOverlap",{transform:eGt,runType:"afterEncode"})},iGt={min:Rn,max:rn,average:az,sum:C0};function nGt(i,t,e,n){const r=Math.floor(t.length/i),s=[],a=t.length;let o,l,u,c=0,h=0;s[h++]=c;for(let d=1;d<a-1;d+=r){const f=Math.min(d+r,a-1),p=Math.min(d+2*r,a),g=(p+f)/2;let m=0;for(let x=f;x<p;x++){const S=t[x][n];Number.isNaN(S)||(m+=S)}m/=p-f;const _=d,v=Math.min(d+r,a),y=d-1,b=t[c][n];o=-1,u=_;for(let x=_;x<v;x++){const S=t[x][n];Number.isNaN(n)||(l=Math.abs((y-g)*(S-b)-(y-x)*(m-b)),l>o&&(o=l,u=x))}s[h++]=u,c=u}return s[h-1]!==a-1&&(s[h++]=a-1),s.map(d=>e?t[d].i:d)}function vT(i,t,e,n,r){let s=Math.floor(t.length/i);const a=[],o=t.length;let l=0,u=[];a.push(l),t[l][r]=t[l][r];for(let c=1;c<o-1;c+=s){s>o-c&&(s=o-c,u.length=s),u=[];for(let d=0;d<s;d++)u.push(t[c+d][r]);const h=iGt[n](u);l=Math.min(Math.round(c+u.length/2)||0,o-1),t[l][r]=h,a.push(l)}return a.map(c=>e?t[c].i:c)}function rGt(i,t,e,n){return vT(i,t,e,"min",n)}function sGt(i,t,e,n){return vT(i,t,e,"max",n)}function aGt(i,t,e,n){return vT(i,t,e,"average",n)}function oGt(i,t,e,n){return vT(i,t,e,"sum",n)}const lGt=(i,t)=>{let e=it(i.size)?i.size():i.size;const n=i.factor||1;if(Array.isArray(e)&&(e=Math.floor(e[1]-e[0])),e*=n,e<=0)return[];if(t.length<=e)return t;if(i.skipfirst)return t.slice(0,1);const{mode:r,yfield:s,groupBy:a}=i,o=s??"y";let l=nGt;if(r==="min"?l=rGt:r==="max"?l=sGt:r==="average"?l=aGt:r==="sum"&&(l=oGt),t.length){const u={};if(a){for(let h=0,d=t.length;h<d;h++){const f=t[h],p=f[a];u[p]?u[p].push({[o]:f[o],i:h}):(u[p]=[],u[p].push({[o]:f[o],i:h}))}let c=[];return Object.keys(u).forEach(h=>{const d=u[h];if(d.length<=e){const f=d.map(p=>p.i);c=c.concat(f)}else{const f=l(e,d,!0,o);c=c.concat(f),d.forEach(p=>t[p.i][o]=p[o])}}),c.sort((h,d)=>h-d),c.map(h=>t[h])}return l(e,t,!1,o).map(c=>t[c])}return[]},Rz=()=>{z.registerGrammarTransform("dataSampling",{transform:lGt})},uGt={label:{visible:!1,position:"top",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}};class Jh extends _o{constructor(){super(...arguments),this.type=st.line,this.transformerConstructor=Sf,this._sortDataByAxis=!1}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}initMark(){var t;const e=(t=this._spec.seriesMark)!==null&&t!==void 0?t:"line";this.initLineMark(e==="line"),this.initSymbolMark(e==="point")}initTooltip(){super.initTooltip();const{group:t,mark:e}=this._tooltipHelper.activeTriggerSet;this._lineMark&&t.add(this._lineMark),this._symbolMark&&(e.add(this._symbolMark),t.add(this._symbolMark))}initMarkStyle(){this.initLineMarkStyle(this._direction),this.initSymbolMarkStyle()}initAnimation(){var t,e,n,r;const s={direction:this.direction},a=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;if(this._lineMark.setAnimationConfig(ye((n=z.getAnimationInKey("line"))===null||n===void 0?void 0:n(s,a),Ce("line",this._spec,this._markAttributeContext))),this._symbolMark){const o=Rh(this);this._symbolMark.setAnimationConfig(ye((r=z.getAnimationInKey("scaleInOut"))===null||r===void 0?void 0:r(),Ce("point",this._spec,this._markAttributeContext),o))}}onLayoutEnd(){super.onLayoutEnd(),this.reCompileSampling()}getSeriesStyle(t){var e;const n=((e=this._spec)===null||e===void 0?void 0:e.seriesMark)!=="point";return r=>{var s,a;return n&&r==="fill"&&(r="stroke"),(a=(s=this._seriesMark)===null||s===void 0?void 0:s.getAttribute(r,t))!==null&&a!==void 0?a:void 0}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._lineMark,this._symbolMark]}}Jh.type=st.line,Jh.mark=_4t,Jh.builtInTheme={line:uGt},Jh.transformerConstructor=Sf,Be(Jh,Cz);const Oz=()=>{Rz(),Ort(),dT(),cc(),ort(),uT(),Mr(),mr(),z.registerSeries(Jh.type,Jh)};class cGt{get dataList(){return this._dataArr}constructor(t){this._dataArr=[],this._dataSet=t}parseData(t){this._dataArr=[];const e=X(t);for(let n=0;n<e.length;n++)this._dataArr.push(mz(e[n],this._dataSet,this._dataArr))}updateData(t,e=!1,n=!0){const r=X(t);return(!e||r.length===this._dataArr.length)&&(this._dataValueForEach(r,(s,a)=>{a.markRunning()}),this._dataValueForEach(r,(s,a)=>{_z(a,s,n)}),!0)}_dataValueForEach(t,e){t.forEach((n,r)=>{if(n instanceof je)return;const s=this.getSeriesData(n.id,r);s&&e(n,s,r)})}getSeriesData(t,e){if(!this._dataArr.length)return null;if(typeof t=="string"){const n=this._dataArr.filter(r=>r.name===t);if(n[0])return n[0];es(`no data matches dataId ${t}!`)}if(typeof e=="number"){if(this._dataArr[e])return this._dataArr[e];es(`no data matches dataIndex ${e}!`)}return this._dataArr[0]}}class hGt{constructor(t,e){this._scaleSpecMap=new Map,this._scaleMap=new Map,this._modelScaleSpecMap=new Map,this._markAttributeScaleMap=new Map,this._spec=null,this._chart=null,this.getStatisticalFields=n=>{const r=[];return this._scaleSpecMap.forEach((s,a)=>{Op(s.domain)&&s.domain.forEach(o=>{o.dataId===n&&o.fields.forEach(l=>{xg(r,[{key:l,operations:Ge(s.type)?["max","min"]:["values"]}])})})}),this._markAttributeScaleMap.forEach((s,a)=>{const o=this.getScale(a);s.forEach(l=>{this._getSeriesBySeriesId(l.seriesId).getRawData().name===n&&l.field&&xg(r,[{key:l.field,operations:Ge(o.type)?["max","min"]:["values"]}])})}),r},this._spec=t,this._chart=e,this._setAttrFromSpec()}_createFromSpec(t){if(!t.id)return null;let e=this._scaleMap.get(t.id);return e||(e=t.type==="ordinal"&&t.id==="color"?sL("colorOrdinal"):sL(t.type)),e?(J(t.range)&&e.range(t.range),J(t.domain)&&(Op(t.domain)||e.domain(t.domain)),t.specified&&e.specified&&e.specified(t.specified),t.clamp&&e.clamp&&e.clamp(t.clamp),e):null}_setAttrFromSpec(){var t;if(!(!((t=this._spec)===null||t===void 0)&&t.length))return;const e=new Map,n=new Map;this._spec.forEach(r=>{const s=this._createFromSpec(r);s&&(e.set(r.id,s),n.set(r.id,r))}),this._modelScaleSpecMap.forEach(r=>{const s=this._createFromSpec(r);s&&(e.set(r.id,s),n.set(r.id,r))}),this._scaleSpecMap=n,this._scaleMap=e}updateSpec(t){const e={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if(Ne(t,this._spec))return e;e.change=!0;for(let n=0;n<t.length;n++){const r=t[n],s=this._scaleMap.get(r.id);if(!s)return e.reMake=!0,e;const a=this._spec.find(o=>o.id===r.id);if(!a.id||a.type!==r.type||!Ne(a.specified,r.specified))return e.reMake=!0,e;r.range&&!Ne(r.range,s.range())&&(s.range(r.range),e.reRender=!0),Op(r.domain)?e.reRender=!0:Ne(r.domain,s.domain())||(s.domain(r.domain),e.reRender=!0),this._scaleSpecMap.set(r.id,r)}return this._spec=t,e}registerModelScale(t){const e=this._createFromSpec(t);e&&(this._modelScaleSpecMap.set(t.id,t),this._scaleSpecMap.set(t.id,t),this._scaleMap.set(t.id,e))}removeModelScale(t){this._modelScaleSpecMap.forEach(e=>{t(e)&&(this._modelScaleSpecMap.delete(e.id),this._scaleSpecMap.delete(e.id),this._scaleMap.delete(e.id))})}getScale(t){return this._scaleMap.get(t)}getScaleSpec(t){return this._scaleSpecMap.get(t)}_getSeriesByRawDataId(t){const e=this._chart.getAllSeries();for(let n=0;n<e.length;n++){const r=e[n];if(r.getRawData().name===t)return r}return null}_getSeriesBySeriesId(t){const e=this._chart.getAllSeries();for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}return null}updateScaleDomain(t){this._scaleSpecMap.forEach((e,n)=>{const r=this._scaleMap.get(n);if(!r)return;if(!Op(e.domain))return e.domain&&e.domain.length!==0||r.domain(t),void this._updateMarkScale(n,r,r.domain().slice());let s;s=Ge(e.type)?[null,null]:new Set,e.domain.forEach(o=>{const l=this._getSeriesByRawDataId(o.dataId);if(!l)return;const u=Ge(e.type);o.fields.forEach(c=>{const h=l.getRawDataStatisticsByField(c,u);h&&(u?(N(s[0])?s[0]=h.min:s[0]=Math.min(h.min,s[0]),N(s[1])?s[1]=h.max:s[1]=Math.max(h.max,s[1])):h.values.forEach(d=>{s.add(d)}))})});const a=s;Ge(e.type)||(s=Array.from(s)),r.domain(s),this._updateMarkScale(n,r,a)})}_updateMarkScale(t,e,n){const r=this._markAttributeScaleMap.get(t);r&&r.length!==0&&r.forEach(s=>{if(!s.field||!s.markScale||s.markScale===e)return;if(N(s.changeDomain)||s.changeDomain==="none"||N(s.seriesId))return void(Ge(e.type)?s.markScale.domain(n):e.domain(Array.from(n)));const a=this._getSeriesBySeriesId(s.seriesId),o=Ge(e.type),l=a.getRawDataStatisticsByField(s.field,o);if(!Lt(l))return s.changeDomain==="expand"?(o?(n[0]=Math.min(n[0],l.min),n[1]=Math.max(n[1],l.max)):(l.values.forEach(u=>{n.add(u)}),n=Array.from(n)),void s.markScale.domain(n)):void(s.changeDomain!=="replace"||(o?s.markScale.domain([l.min,l.max]):s.markScale.domain(l.values)));Ge(e.type)?s.markScale.domain(n):e.domain(Array.from(n))})}registerMarkAttributeScale(t,e){const n=this._scaleMap.get(t.scale);let r=this._markAttributeScaleMap.get(t.scale);r||(r=[],this._markAttributeScaleMap.set(t.scale,r));let s=n;return(N(t.field)||!N(t.changeDomain)&&t.changeDomain!=="none"&&!N(e))&&(s=n.clone()),r.push(Object.assign(Object.assign({},t),{seriesId:e,markScale:s})),s}}class dGt{constructor(){this._stateGraphicsByTrigger=new Map,this._disableTriggerEvent=!1,this._triggerMapByState=new Map}setDisableActiveEffect(t){this._disableTriggerEvent=t}addTrigger(t){t&&[t.getStartState(),t.getResetState()].forEach(e=>{if(e){const n=this._triggerMapByState.get(e);n?!n.includes(t)&&n.push(t):this._triggerMapByState.set(e,[t])}})}setStatedGraphics(t,e){this._stateGraphicsByTrigger.set(t,e)}getStatedGraphics(t){return this._stateGraphicsByTrigger.get(t)}updateStates(t,e,n,r,s){return this._disableTriggerEvent?[]:e&&e.length?(r&&s?n&&n.length?(this.toggleReverseStateOfGraphics(t,e,n,s),this.toggleStateOfGraphics(t,e,n,r)):this.addBothStateOfGraphics(t,e,r,s):r&&(n&&n.length?this.toggleStateOfGraphics(t,e,n,r):this.addStateOfGraphics(t,e,r)),e):[]}toggleReverseStateOfGraphics(t,e,n,r){const s=t.getMarkIdByState();n.forEach(a=>{var o;if(r&&s[r]&&s[r].includes(a.context.markId)){const l=(o=a.parent)===null||o===void 0?void 0:o.mark,u=l.hasAnimationByState&&l.hasAnimationByState("state");a.addState(r,!0,u)}}),e.forEach(a=>{var o;if(r&&s[r]&&s[r].includes(a.context.markId)){const l=(o=a.parent)===null||o===void 0?void 0:o.mark,u=l.hasAnimationByState&&l.hasAnimationByState("state");a.removeState(r,u)}})}toggleStateOfGraphics(t,e,n,r){const s=t.getMarkIdByState();n.forEach(a=>{var o;if(r&&s[r]&&s[r].includes(a.context.markId)){const l=(o=a.parent)===null||o===void 0?void 0:o.mark,u=l.hasAnimationByState&&l.hasAnimationByState("state");a.removeState(r,u)}}),e.forEach(a=>{var o;if(r&&s[r]&&s[r].includes(a.context.markId)){const l=(o=a.parent)===null||o===void 0?void 0:o.mark,u=l.hasAnimationByState&&l.hasAnimationByState("state");a.addState(r,!0,u)}})}addBothStateOfGraphics(t,e,n,r){const s=t.getMarks(),a=t.getMarkIdByState();s.forEach(o=>{var l;const u=r&&a[r]&&a[r].includes(o.id),c=n&&a[n]&&a[n].includes(o.id);if(!u&&!c)return;const h=o.hasAnimationByState&&o.hasAnimationByState("state");(l=o.getGraphics())===null||l===void 0||l.forEach(d=>{e&&e.includes(d)?c&&d.addState(n,!0,h):u&&d.addState(r,!0,h)})})}addStateOfGraphics(t,e,n){const r=t.getMarks(),s=t.getMarkIdByState();r.forEach(a=>{var o;const l=n&&s[n]&&s[n].includes(a.id);if(!l)return;const u=a.hasAnimationByState&&a.hasAnimationByState("state");(o=a.getGraphics())===null||o===void 0||o.forEach(c=>{e&&e.includes(c)&&l&&c.addState(n,!0,u)})})}clearAllStatesOfTrigger(t,e,n){if(this._disableTriggerEvent)return;const r=this.getStatedGraphics(t);if(!r||!r.length)return;const s=t.getMarks(),a=t.getMarkIdByState();s.forEach(o=>{if(o){const l=o.getGraphics(),u=o.hasAnimationByState&&o.hasAnimationByState("state");l&&l.length&&(n&&a[n]&&a[n].includes(o.id)&&l.forEach(c=>{c.removeState(n,u)}),e&&a[e]&&a[e].includes(o.id)&&l.forEach(c=>{r.includes(c)&&c.removeState(e,u)}))}})}clearAllStates(){this._disableTriggerEvent||this._triggerMapByState.forEach((t,e)=>{t.forEach(n=>{this.clearAllStatesOfTrigger(n,e,n.getResetState())})})}clearByState(t){if(this._disableTriggerEvent)return;const e=this._triggerMapByState.get(t);e&&e.length&&e.forEach(n=>{this.clearAllStatesOfTrigger(n,t,n.getResetState()),this.setStatedGraphics(n,[])})}updateStateOfGraphics(t,e){if(this._disableTriggerEvent)return;const n=this._triggerMapByState.get(t);n&&n.length&&n.forEach(r=>{const s=e.filter(a=>r.getMarks().some(o=>{const l=o&&o.getGraphics();return l&&l.includes(a)}));this.updateStates(r,s,this.getStatedGraphics(r),r.getStartState(),r.getResetState()),this.setStatedGraphics(r,s)})}}var NG=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};let ki=class extends rT{getSpec(){return this._spec}setSpec(t){this._spec=t}getOption(){return this._option}getLayoutRect(){return this._layoutRect}getViewRect(){return this._viewRect}getLayoutTag(){return this._layoutTag}setLayoutTag(t,e,n=!0){this._layoutTag=t;const r=this.getCompiler();return r&&(r.updateLayoutTag(),t&&n&&r.renderNextTick(e)),this._layoutTag}resetLayoutItemTag(){this.getLayoutElements().forEach(t=>t.setWillLayoutTag())}getModelOption(){return this._modelOption}getGlobalScale(){return this._globalScale}getEvent(){return this._event}get chartData(){return this._chartData}_setModelOption(){}constructor(t,e){var n,r,s,a;super(e),this.type="chart",this.id=Fm(),this._regions=[],this._series=[],this._components=[],this._layoutRect={x:0,y:0,width:Fp,height:zp},this._viewRect={width:Fp,height:zp},this._viewBox={x1:0,y1:0,x2:Fp,y2:zp},this._layoutTag=!0,this._idMap=new Map,this.state={layoutUpdateRank:1},this.padding={top:0,left:0,right:0,bottom:0},this.getAllSeries=()=>{var o;return(o=this._series)!==null&&o!==void 0?o:[]},this.getRegionsInIndex=o=>o&&o.length!==0?this._regions.filter((l,u)=>o.includes(u)):[this._regions[0]],this.getAllRegions=()=>this._regions,this.getRegionsInIds=o=>o?this._regions.filter(l=>o.includes(l.id)):[],this.getRegionsInQuerier=o=>o?this._regions.filter((l,u)=>X(o).some(c=>L(c.regionId)&&c.regionId===l.userId||c.regionIndex===u)):this._regions,this.getRegionsInUserId=o=>{if(o)return this._regions.find(l=>l.userId===o)},this.getRegionsInUserIdOrIndex=(o,l)=>this.getAllRegions().filter(u=>o?.length?u.userId&&o.includes(u.userId):!l?.length||l.includes(u.getSpecIndex())),this.getComponents=()=>this._components,this.getSeriesInIndex=o=>o&&o.length!==0?this._series.filter((l,u)=>o.includes(u)):[this._series[0]],this.getSeriesInIds=o=>o?this._series.filter(l=>o.includes(l.id)):[],this.getSeriesInUserId=o=>{if(o)return this._series.find(l=>l.userId===o)},this.getSeriesInUserIdOrIndex=(o,l)=>this.getAllSeries().filter(u=>o?.length?u.userId&&o.includes(u.userId):!l?.length||l.includes(u.getSpecIndex())),this.getComponentByIndex=(o,l)=>{const u=this._components.filter(c=>(c.specKey||c.type)===o);if(u&&u.length!==0)return u[l]},this.getComponentsByKey=o=>this._components.filter(l=>(l.specKey||l.type)===o),this.getComponentByUserId=o=>{const l=this._components.find(u=>u.userId===o);if(l)return l},this.getComponentsByType=o=>this._components.filter(l=>l.type===o),this._paddingSpec=Yl((n=t.padding)!==null&&n!==void 0?n:e.getTheme("padding")),this._event=new gz(e.eventDispatcher,e.mode),this._dataSet=e.dataSet,this._chartData=new cGt(this._dataSet),this._modelOption=Object.assign(Object.assign({},e),{mode:this._option.mode,map:this._idMap,getChartLayoutRect:()=>this._layoutRect,getChartViewRect:()=>this._viewRect,getChart:()=>this,globalScale:this._globalScale,onError:(r=this._option)===null||r===void 0?void 0:r.onError,disableTriggerEvent:((s=this._option)===null||s===void 0?void 0:s.disableTriggerEvent)===!0,componentShowContent:(a=this._option)===null||a===void 0?void 0:a.componentShowContent,getSeriesData:this._chartData.getSeriesData.bind(this._chartData),dispatchEvent:(o,l)=>this._option.globalInstance.event.emit(o,l)}),this._setModelOption&&this._setModelOption(),this._spec=t}created(t){this._chartData.parseData(this._spec.data),this._createGlobalScale(),this._createBackground(),this._createLayout(),t.forEachRegionInSpec(this._spec,this._createRegion.bind(this)),t.forEachSeriesInSpec(this._spec,this._createSeries.bind(this)),t.forEachComponentInSpec(this._spec,this._createComponent.bind(this),this._option.getSpecInfo())}_initInteractions(){if(this._option.disableTriggerEvent)return;this._interaction=new dGt;const t=this.getAllSeries(),e=[],n={};t.forEach(r=>{const s=r.getInteractionTriggers();if(s&&s.length){const a=r.getRegion().id;s.forEach(({trigger:o,marks:l})=>{const u=`${a}-${o.type}`;n[u]?l.forEach(c=>{n[u].marks.push(c)}):(n[u]=Object.assign(Object.assign({},o),{marks:l}),e.push(n[u]))})}}),e.forEach(r=>{const s=z.createInteractionTrigger(r.type,Object.assign(Object.assign({},r),{event:this._event,interaction:this._interaction}));s&&(s.init(),this._interaction.addTrigger(s))})}init(){var t,e;(t=this._beforeInit)===null||t===void 0||t.call(this),this._regions.forEach(n=>n.init({})),this._series.forEach(n=>n.init({})),this._components.forEach(n=>n.init({dataSet:this._dataSet})),this._initEvent(),(e=this._initStack)===null||e===void 0||e.call(this),this.reDataFlow(),this._initInteractions()}reDataFlow(){this._series.forEach(t=>{var e;return(e=t.getRawData())===null||e===void 0?void 0:e.markRunning()}),this._series.forEach(t=>t.fillData()),this.updateGlobalScaleDomain()}onResize(t,e,n=!0){const r={width:t,height:e};this._canvasRect=r,this._updateLayoutRect(this._option.viewBox),this.resetLayoutItemTag(),this.setLayoutTag(!0,null,n)}updateViewBox(t,e){this._option.viewBox=t,this._updateLayoutRect(t),this.resetLayoutItemTag(),this.setLayoutTag(!0,null,e)}_createBackground(){const t=this._spec.background;if(!t||typeof t!="object"||L(t.gradient))return;const e=xa(t,["x","y","width","height","x1","y1","image"]);e.background=t.image,this._backgroundMark=z.createMark("group","chart-background",{model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._globalScale}),this._backgroundMark.created(),this._backgroundMark.setStyle(Object.assign(Object.assign({},e),{x:()=>this._viewBox.x1,y:()=>this._viewBox.y1,width:()=>this._viewBox.x2-this._viewBox.x1,height:()=>this._viewBox.y2-this._viewBox.y1})),this._backgroundMark.setMarkConfig({zIndex:ti.SeriesGroup-2}),this.getCompiler().addRootMark(this._backgroundMark)}_createRegion(t,e){if(!t)return;const{spec:n}=e,r=NG(e,["spec"]),s=new t(n,Object.assign(Object.assign({},this._modelOption),r));s&&(s.created(),this._regions.push(s))}_createSeries(t,e){if(!t)return;const{spec:n}=e,r=NG(e,["spec"]);let s;if(L(n.regionId)?s=this.getRegionsInUserId(n.regionId):L(n.regionIndex)&&(s=this.getRegionsInIndex([n.regionIndex])[0]),!s&&!(s=this._regions[0]))return;const a=new t(n,Object.assign(Object.assign(Object.assign({},this._modelOption),r),{type:n.type,region:s,globalScale:this._globalScale,sourceDataList:this._chartData.dataList}));a&&(a.created(),this._series.push(a),s.addSeries(a))}getSeriesById(t){return this._series.find(e=>e.id===t)}_createComponent(t,e){const n=t.createComponent(e,Object.assign(Object.assign({},this._modelOption),{type:t.type,getAllRegions:this.getAllRegions,getRegionsInIndex:this.getRegionsInIndex,getRegionsInIds:this.getRegionsInIds,getRegionsInUserIdOrIndex:this.getRegionsInUserIdOrIndex,getAllSeries:this.getAllSeries,getSeriesInIndex:this.getSeriesInIndex,getSeriesInIds:this.getSeriesInIds,getSeriesInUserIdOrIndex:this.getSeriesInUserIdOrIndex,getAllComponents:this.getComponents,getComponentByIndex:this.getComponentByIndex,getComponentByUserId:this.getComponentByUserId,getComponentsByKey:this.getComponentsByKey,getComponentsByType:this.getComponentsByType}));n&&(n.created(),this._components.push(n))}getAllComponents(){return this._components}getAllModels(){return[].concat(this.getAllSeries(),this.getAllComponents(),this.getAllRegions())}getModelInFilter(t){if(Ht(t))return this.getAllModels().find(n=>n.userId===t);if(it(t))return this.getAllModels().find(n=>t(n));let e=0;return this.getAllModels().find(n=>{var r;if(((r=n.specKey)!==null&&r!==void 0?r:n.type)===t.type){if(e===t.index)return!0;e++}return!1})}_createLayout(){this._updateLayoutRect(this._option.viewBox),this._initLayoutFunc()}setLayout(t){this._option.layout=t,this._initLayoutFunc()}_initLayoutFunc(){var t,e,n;if(this._layoutFunc=this._option.layout,!this._layoutFunc){const r=z.getLayoutInKey((e=(t=this._spec.layout)===null||t===void 0?void 0:t.type)!==null&&e!==void 0?e:"base");if(r){const s=new r(this._spec.layout,{onError:(n=this._option)===null||n===void 0?void 0:n.onError});this._layoutFunc=s.layoutItems.bind(s)}}}layout(){var t,e,n,r;if((e=(t=this._option.performanceHook)===null||t===void 0?void 0:t.beforeLayoutWithSceneGraph)===null||e===void 0||e.call(t,this._option.globalInstance),this.getLayoutTag()){this._event.emit(Tt.layoutStart,{chart:this,vchart:this._option.globalInstance}),this.onLayoutStart();const s=this.getLayoutElements();this._layoutFunc(this,s,this._layoutRect,this._viewBox),this._event.emit(Tt.afterLayout,{elements:s,chart:this}),this.setLayoutTag(!1),this.onLayoutEnd(),this._event.emit(Tt.layoutEnd,{chart:this,vchart:this._option.globalInstance})}(r=(n=this._option.performanceHook)===null||n===void 0?void 0:n.afterLayoutWithSceneGraph)===null||r===void 0||r.call(n,this._option.globalInstance)}onLayoutStart(){this.getAllModels().forEach(t=>t.onLayoutStart(this._layoutRect,this._viewRect))}onLayoutEnd(){this.getAllModels().forEach(t=>{t.modelType!=="series"&&t.onLayoutEnd()})}onEvaluateEnd(t){[...this._components,...this._regions,...this._series].forEach(e=>e.onEvaluateEnd(t))}onBeforeRender(){[...this._components,...this._regions,...this._series].forEach(t=>t.onBeforeRender())}getLayoutElements(){return this.getAllModels().map(t=>t.layout).filter(t=>!!t)}getModelById(t){const e=this._idMap.get(t);if(e&&e instanceof vz)return e}getModelByUserId(t){const e=this.getSeriesInUserId(t);if(e)return e;const n=this.getRegionsInUserId(t);return n||this.getComponentByUserId(t)||void 0}getAllMarks(){return Array.from(this._idMap.values()).filter(t=>t&&t instanceof ns)}getMarkById(t){const e=this._idMap.get(t);if(e&&e instanceof ns)return e}getMarkByUserName(t){return this.getAllMarks().filter(e=>e.name&&e.name===t)}updateData(t,e,n=!0,r){const s=this._dataSet.getDataView(t);s&&(s.markRunning(),s.parseNewData(e,r)),n&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(a=>a.onDataUpdate())}updateFullData(t,e=!0){X(t).forEach(n=>{const r=this._dataSet.getDataView(n.id);r&&r.markRunning()}),X(t).forEach(n=>{const r=this._dataSet.getDataView(n.id);r&&_z(r,n,!0)}),e&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(n=>n.onDataUpdate())}setCanvasRect(t,e){this._canvasRect={width:t,height:e}}getCanvasRect(){return this._canvasRect||(this._canvasRect=qnt(this._spec,this._option,{width:Fp,height:zp})),this._canvasRect}getSeriesData(t,e){return this._chartData.getSeriesData(t,e)}_transformSpecScale(){var t;const e=this._spec.scales?[...this._spec.scales]:[];let n=e.find(s=>s.id==="color");const r=this.getColorScheme();if(!n&&(n={type:"ordinal",id:"color",domain:null,range:null},e.push(n),this._spec.color)){const s=this._spec.color;if(J(s))n.range=s;else{const a=s;Object.prototype.hasOwnProperty.call(a,"type")&&(n.type=a.type),Object.prototype.hasOwnProperty.call(a,"domain")&&(n.domain=a.domain),Object.prototype.hasOwnProperty.call(a,"range")&&(n.range=a.range),Object.prototype.hasOwnProperty.call(a,"specified")&&(n.specified=a.specified),Object.prototype.hasOwnProperty.call(a,"clamp")&&(n.clamp=a.clamp)}}return!((t=n.range)===null||t===void 0)&&t.length||(n.range=M0(r),n.rangeTheme=!0),e}_createGlobalScale(){this._globalScale=new hGt(this._transformSpecScale(),this),this._modelOption.globalScale=this._globalScale}updateGlobalScaleDomain(){const t=new Set;this._series.forEach(n=>{const r=n.getSeriesKeys();r&&r.forEach(s=>t.add(s))});const e=Array.from(t);this._globalScale.updateScaleDomain(e)}updateGlobalScale(t){cp(t,this._globalScale.updateSpec(this._transformSpecScale()))}updateGlobalScaleTheme(){const t=this._globalScale.getScaleSpec("color"),e=this.getColorScheme();t.rangeTheme&&(t.range=M0(e),this._globalScale.getScale("color").range(t.range))}_getSpecKeys(t){const e={width:!0,height:!0};return Object.keys(t).filter(n=>!e[n]).sort()}updateSpec(t){const e={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if(this.setLayoutTag(!0,null,!1),t.type!==this.type)return e.reMake=!0,e;const n=this._getSpecKeys(this._spec),r=this._getSpecKeys(t);if(!Ne(n,r))return e.reMake=!0,e;for(let a=0;a<n.length;a++){const o=n[a];if(J(this._spec[o])&&this._spec[o].length!==X(t[o]).length)return e.reMake=!0,e}const s=this._spec;return this._spec=t,this.updateChartConfig(e,s),e.reMake?e:(this.updateGlobalScale(e),e.reMake?e:(this.updateRegionSpec(e),e.reMake?e:(this.updateComponentSpec(e),e.reMake||(this.updateSeriesSpec(e),e.reMake||(this.reInit(),this.updateDataSpec(),this.updateGlobalScaleDomain())),e)))}updateChartConfig(t,e){var n,r;this._paddingSpec=Yl((n=this._spec.padding)!==null&&n!==void 0?n:(r=this._option)===null||r===void 0?void 0:r.getTheme("padding")),this._updateLayoutRect(this._viewBox)}updateDataSpec(){this._spec.data&&this._chartData.updateData(this._spec.data,!1,!0)}updateRegionSpec(t){var e;!((e=this._spec)===null||e===void 0)&&e.region&&(this._spec.region.length===this._regions.length?this._regions.forEach(n=>{cp(t,n.updateSpec(this._spec.region[n.getSpecIndex()]))}):t.reMake=!0)}updateComponentSpec(t){const e={},n={[lt.title]:!0,[lt.brush]:!0,[lt.indicator]:!0};this._components.forEach(s=>{var a,o;if(s.type===lt.label||s.type===lt.totalLabel)return;n[s.type]&&(n[s.type]=!1);const l=s.specKey||s.type,u=(a=this._spec[l])!==null&&a!==void 0?a:{};J(u)?(e[l]=e[l]||{specCount:u.length,componentCount:0},e[l].componentCount++,cp(t,s.updateSpec((o=u[s.getSpecIndex()])!==null&&o!==void 0?o:{},u))):cp(t,s.updateSpec(u))});for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];a.componentCount!==a.specCount&&(t.reMake=!0)}const r=s=>s&&s.visible!==!1;Object.keys(n).forEach(s=>{if(n[s]){const a=this._spec[s];(J(a)?a.some(r):r(a))&&(t.reMake=!0)}})}updateSeriesSpec(t){this._spec.series.length===this._series.length?this._series.forEach(e=>{const n=this._spec.series[e.getSpecIndex()];cp(t,e.updateSpec(n))}):t.reMake=!0}getCanvas(){var t,e;return(e=(t=this.getCompiler())===null||t===void 0?void 0:t.getCanvas())!==null&&e!==void 0?e:null}_updateLayoutRect(t){let e=this.getCanvasRect();if(t){this._viewBox=t;const{x1:n=0,y1:r=0,x2:s,y2:a}=t;e={width:s-n,height:a-r}}else this._viewBox={x1:0,y1:0,x2:e.width,y2:e.height};this._viewRect=e,this.padding=Lnt(this._paddingSpec,e,e),this._layoutRect.width=e.width-this.padding.left-this.padding.right,this._layoutRect.height=e.height-this.padding.top-this.padding.bottom,this._layoutRect.x=this.padding.left,this._layoutRect.y=this.padding.top,this._event.emit(Tt.layoutRectUpdate,{chart:this})}setCurrentTheme(){this.updateChartConfig({change:!0,reMake:!1},this._spec),this.resetLayoutItemTag(),this.setLayoutTag(!0,null,!1),this.updateGlobalScaleTheme(),this.reInit()}reInit(){[...this._regions,...this._series,...this._components].forEach(t=>{const e=t.getSpecInfo();e&&e.spec&&t.reInit(e.spec)})}clear(){this.getAllModels().forEach(t=>{var e;return(e=t.clear)===null||e===void 0?void 0:e.call(t)})}compile(){this.compileBackground(),this.compileLayout(),this.compileRegions(),this.compileSeries(),this.compileComponents()}afterCompile(){this.getAllRegions().forEach(t=>{var e;(e=t.afterCompile)===null||e===void 0||e.call(t)}),this.getAllSeries().forEach(t=>{var e;(e=t.afterCompile)===null||e===void 0||e.call(t)}),this.getAllComponents().forEach(t=>{var e;(e=t.afterCompile)===null||e===void 0||e.call(t)})}compileLayout(){const{width:t,height:e}=this.getCanvasRect();this.getCompiler().setSize(t,e)}compileBackground(){this._backgroundMark&&this._backgroundMark.compile()}compileRegions(){var t,e,n,r;(e=(t=this._option.performanceHook)===null||t===void 0?void 0:t.beforeRegionCompile)===null||e===void 0||e.call(t,this._option.globalInstance),this.getAllRegions().forEach(s=>{s.compile()}),(r=(n=this._option.performanceHook)===null||n===void 0?void 0:n.afterRegionCompile)===null||r===void 0||r.call(n,this._option.globalInstance)}compileSeries(){var t,e,n,r;(e=(t=this._option.performanceHook)===null||t===void 0?void 0:t.beforeSeriesCompile)===null||e===void 0||e.call(t,this._option.globalInstance),this.getAllSeries().forEach(s=>{s.compile()}),(r=(n=this._option.performanceHook)===null||n===void 0?void 0:n.afterSeriesCompile)===null||r===void 0||r.call(n,this._option.globalInstance)}compileComponents(){var t,e,n,r;(e=(t=this._option.performanceHook)===null||t===void 0?void 0:t.beforeComponentCompile)===null||e===void 0||e.call(t,this._option.globalInstance),this.getAllComponents().forEach(s=>{s.compile()}),(r=(n=this._option.performanceHook)===null||n===void 0?void 0:n.afterComponentCompile)===null||r===void 0||r.call(n,this._option.globalInstance)}release(){[...this._components,...this._regions,...this._series].forEach(t=>{t.beforeRelease()}),super.release(),this.clear(),[...this._components,...this._regions,...this._series].forEach(t=>{t.release()}),this._components=this._regions=this._series=[],this._spec={},this._dataSet=this._globalScale=this._layoutFunc=null,this._layoutTag=!1,this._idMap.clear()}onLayout(){this.layout()}updateState(t,e){const n=this.getAllSeries();for(const r in t){if(Lt(t[r]))continue;const s=t[r];let a={stateValue:r};a=it(s.filter)?Object.assign({filter:s.filter},a):Object.assign(Object.assign({},s.filter),a),s.level&&(a.level=s.level),n.forEach(o=>{o.getMarks().forEach(l=>{l.stateStyle[r]&&(e&&!e(o,l,r)||(l.state.changeStateInfo(a),l.updateMarkState(r)))})})}}setSelected(t,e,n){this._setStateInDatum(bt.STATE_SELECTED,t,e,n)}setHovered(t,e,n){this._setStateInDatum(bt.STATE_HOVER,t,e,n)}clearState(t){this._interaction.clearByState(t)}clearAllStates(){this._interaction.clearAllStates()}clearSelected(){this.clearState(bt.STATE_SELECTED)}clearHovered(){this.clearState(bt.STATE_HOVER)}_initEvent(){[Tt.dataZoomChange,Tt.scrollBarChange].forEach(t=>{this._event.on(t,({value:e})=>{this._disableMarkAnimation(["exit","update"]);const n=()=>{this._enableMarkAnimation(["exit","update"]),this._event.off(Zo.AFTER_MARK_RENDER_END,n)};this._event.on(Zo.AFTER_MARK_RENDER_END,n)})})}_enableMarkAnimation(t){this.getAllMarks().forEach(e=>e.enableAnimationByState(t))}_disableMarkAnimation(t){this.getAllMarks().forEach(e=>e.disableAnimationByState(t))}filterGraphicsByDatum(t,e={}){var n;const r=(t=t?X(t):null)?Object.keys(t[0]):null,s=[],a=(n=e.getDatum)!==null&&n!==void 0?n:cn;return this.getRegionsInQuerier(e.region).forEach(o=>{const l=[];t&&o.getSeries().forEach(u=>{u.getMarks().forEach(c=>{const h=c.getGraphics();if(h&&h.length&&(!e.filter||it(e.filter)&&e.filter(u,c)))if(K5t(c.type))h.filter(d=>{const f=a(d,c,u,o);f&&t.every((p,g)=>r.every(m=>p[m]==f[g][m]))&&(l.push(d),s.push(d),e.callback&&e.callback(d,c,u,o))});else if(t.length>1){const d=t.slice();h.forEach(f=>{const p=a(f,c,u,o),g=p&&d.findIndex(m=>r.every(_=>m[_]==p[_]));g>=0&&(d.splice(g,1),l.push(f),s.push(f),e.callback&&e.callback(f,c,u,o))})}else{const d=h.find(f=>{const p=a(f,c,u,o);return p&&r.every(g=>t[0][g]==p[g])});d&&(l.push(d),s.push(d),e.callback&&e.callback(d,c,u,o))}})}),e.regionCallback&&e.regionCallback(l,o)}),s}_setStateInDatum(t,e,n,r){if(!e)return void this._interaction.clearByState(t);const s=this.filterGraphicsByDatum(e,{filter:n,region:r});this._interaction.updateStateOfGraphics(t,s)}setDimensionIndex(t,e){var n,r;let s=null;Array.from(this._event.getComposedEventMap().values()).forEach(l=>{const{eventType:u,event:c}=l;if(u===ec.dimensionHover||u===ec.dimensionClick){const h=c.dispatch(t,e);h?.length&&(s=h)}});const a=N(t)||!s||s.every(l=>Nr(l.axis.getScale().type)&&N(l.index)),o=a||s.every(l=>Nr(l.axis.getScale().type)&&l.data.every(u=>u.datum.length===0));if(e.tooltip!==!1){const l=this.getComponentsByType(lt.tooltip)[0];if(l?.getVisible())if(a||o)(r=(n=l).hideTooltip)===null||r===void 0||r.call(n);else{const u={};s.forEach(c=>{const{axis:h,value:d,data:f}=c,p=h.getOrient()==="left"||h.getOrient()==="right";f.forEach(g=>{var m,_,v;const y=p?g.series.fieldY[0]:g.series.fieldX[0];u[y]=(v=(_=(m=g.datum)===null||m===void 0?void 0:m[0])===null||_===void 0?void 0:_[y])!==null&&v!==void 0?v:d})}),l.showTooltip(u,e.showTooltipOption)}}if(e.crosshair!==!1){const l=this.getComponentsByType(lt.cartesianCrosshair)[0];l&&l.clearAxisValue&&l.setAxisValue&&(a?l.hideCrosshair():l.showCrosshair(s))}}showCrosshair(t){var e;const n=(e=this.getComponentsByType(lt.cartesianCrosshair)[0])!==null&&e!==void 0?e:this.getComponentsByType(lt.polarCrosshair)[0];if(!n)return;const r=this.getComponentsByKey("axes"),s=[];r.forEach(a=>{const o=t(a);o!==!1&&s.push({axis:a,value:o})}),n.showCrosshair(s)}getColorScheme(){var t,e;return(e=(t=this._option).getTheme)===null||e===void 0?void 0:e.call(t,"colorScheme")}};const jG=(i,t)=>{var e;const n=i.spec,{regionId:r,regionIndex:s}=n;if(L(r)){const a=X(r);return(e=t.region)===null||e===void 0?void 0:e.filter(({spec:o})=>a.includes(o.id))}if(L(s))return X(s).map(a=>{var o;return(o=t.region)===null||o===void 0?void 0:o[a]}).filter(L)},fGt=(i,t)=>{var e;const n=i.spec,{seriesId:r,seriesIndex:s}=n;if(L(r)){const a=X(r);return(e=t.series)===null||e===void 0?void 0:e.filter(({spec:o})=>a.includes(o.id))}if(L(s))return X(s).map(a=>{var o;return(o=t.series)===null||o===void 0?void 0:o[a]}).filter(L)};class Ms{constructor(t){this._option=t,this.type=t.type,this.seriesType=t.seriesType}initChartSpec(t){return this.transformSpec(t),this.transformModelSpec(t)}transformSpec(t){t.region&&t.region.length!==0||(t.region=[{}]),t.tooltip===void 0&&(t.tooltip={}),L(t.stackInverse)&&t.region.forEach(e=>{!L(e.stackInverse)&&(e.stackInverse=t.stackInverse)}),L(t.stackSort)&&t.region.forEach(e=>{!L(e.stackSort)&&(e.stackSort=t.stackSort)})}generateTransform(t,e){return(n,r,s)=>{const{spec:a,specPath:o,specInfoPath:l,type:u}=r,c=new n.transformerConstructor(Object.assign(Object.assign({},this._option),{type:u})),h=c.transformSpec(a,t,s),d=Object.assign(Object.assign({},r),h);e?d.theme=c.getTheme(a,t):oL(t,o,h.spec),oL(s,l??o,d)}}transformModelSpec(t){return this.createSpecInfo(t,this.generateTransform(t,!1))}createSpecInfo(t,e){var n,r;e||(e=this.generateTransform(t,!0));const s={};return this.forEachRegionInSpec(t,e,s),this.forEachSeriesInSpec(t,e,s),(n=s.series)===null||n===void 0||n.forEach((a,o)=>{var l,u;const c=((u=(l=jG(a,s))!==null&&l!==void 0?l:s.region)!==null&&u!==void 0?u:[])[0];c&&(c.seriesIndexes||(c.seriesIndexes=[]),c.seriesIndexes.push(o),a.regionIndexes=c.regionIndexes.slice())}),this.forEachComponentInSpec(t,e,s),Object.values((r=s.component)!==null&&r!==void 0?r:{}).forEach(a=>a.forEach((o,l)=>{var u,c,h;if(o){if(!o.regionIndexes){const d=(c=(u=jG(o,s))!==null&&u!==void 0?u:s.region)!==null&&c!==void 0?c:[];o.regionIndexes=d.map(f=>f.regionIndexes[0])}if(!o.seriesIndexes){const d=fGt(o,s);if(d)o.seriesIndexes=d.map(({seriesIndexes:f})=>f[0]);else{const f=new Set;((h=o.regionIndexes)!==null&&h!==void 0?h:[]).forEach(p=>{var g,m;const _=(g=s.region)===null||g===void 0?void 0:g[p];(m=_?.seriesIndexes)===null||m===void 0||m.forEach(v=>f.add(v))}),o.seriesIndexes=Array.from(f)}}}})),s}_isValidSeries(t){return!0}_getDefaultSeriesSpec(t,e,n){var r,s,a,o,l;const u={dataKey:t.dataKey,hover:t.hover,select:t.select,label:t.label,seriesStyle:t.seriesStyle,animation:(r=t.animation)!==null&&r!==void 0?r:(s=this._option.globalInstance)===null||s===void 0?void 0:s.isAnimationEnable(),animationThreshold:(a=t.animationThreshold)!==null&&a!==void 0?a:(l=(o=this._option).getTheme)===null||l===void 0?void 0:l.call(o,"animationThreshold"),animationAppear:t.animationAppear,animationDisappear:t.animationDisappear,animationEnter:t.animationEnter,animationUpdate:t.animationUpdate,animationExit:t.animationExit,animationNormal:t.animationNormal,animationState:t.animationState,extensionMark:t.extensionMark,large:t.large,largeThreshold:t.largeThreshold,progressiveStep:t.progressiveStep,progressiveThreshold:t.progressiveThreshold,background:t.seriesBackground,invalidType:t.invalidType,seriesField:t.seriesField,morph:t.morph,interactions:t.interactions},c=this.seriesType;return c&&(u.type=c,u[c]=t[c]),e&&e.length&&e.forEach(h=>{u[h]=t[h]}),n&&n.length&&n.forEach(h=>{u[h]=t[h]}),u}forEachRegionInSpec(t,e,n){var r;return((r=t.region)!==null&&r!==void 0?r:[]).map((s,a)=>e(z.getRegionInType("region"),{spec:s,specPath:["region",a],type:"region",regionIndexes:[a]},n))}forEachSeriesInSpec(t,e,n){var r;return((r=t.series)!==null&&r!==void 0?r:[]).map((s,a)=>e(z.getSeriesInType(s.type),{spec:s,specPath:["series",a],type:s.type,seriesIndexes:[a]},n))}forEachComponentInSpec(t,e,n){var r,s,a;const o=[],l=z.getComponents();let u,c,h,d;const f=[];for(let g=0;g<l.length;g++){const{cmp:m,alwaysCheck:_}=l[g];m.type.startsWith(lt.cartesianAxis)?u=m:m.type.startsWith(lt.polarAxis)?c=m:m.type===lt.geoCoordinate?h=m:(_||t[(r=m.specKey)!==null&&r!==void 0?r:m.type])&&(m.type===lt.tooltip?d=m:f.push(l[g]))}let p=!1;if(u){const g=u.getSpecInfo(t,n);g?.length>0&&(p=!0,g.forEach(m=>{const _=z.getComponentInKey(m.type);o.push(e(_,m,n))}))}if(c&&!p){const g=c.getSpecInfo(t,n);g?.length>0&&(p=!0,g.forEach(m=>{const _=z.getComponentInKey(m.type);o.push(e(_,m,n))}))}return h&&!p&&((s=h.getSpecInfo(t,n))===null||s===void 0||s.forEach(g=>{o.push(e(h,g,n))})),f.sort((g,m)=>g.createOrder-m.createOrder),f.forEach(({cmp:g})=>{var m;(m=g.getSpecInfo?g.getSpecInfo(t,n):tl(t,g.specKey,g.type))===null||m===void 0||m.forEach(_=>{o.push(e(g,_,n))})}),d&&((a=tl(t,d.specKey,d.type))===null||a===void 0||a.forEach(g=>{o.push(e(d,g,n))})),o}transformSeriesSpec(t){const e=this._getDefaultSeriesSpec(t);t.series&&t.series.length!==0?t.series.forEach(n=>{this._isValidSeries(n.type)&&Object.keys(e).forEach(r=>{r in n||(n[r]=e[r])})}):t.series=[e]}_findBandAxisBySeries(t,e,n){const r=t?.direction==="horizontal"?["left","right"]:["top","bottom"];return n.find(s=>{if(!r.includes(s.orient))return!1;if(L(s.seriesId)){if(X(s.seriesId).includes(t?.id))return!0}else if(L(s.seriesIndex)){if(X(s.seriesIndex).includes(e))return!0}else if(s.type==="band")return!0;return!0})}_applyAxisBandSize(t,e,n){const{barMaxWidth:r,barMinWidth:s,barWidth:a,barGapInGroup:o}=n;let l=!1;yt(s)?(t.minBandSize=s,l=!0):yt(a)?(t.minBandSize=a,l=!0):yt(r)&&(t.minBandSize=r,l=!0),l&&(t.bandSizeLevel=Number.MAX_VALUE,t.bandSizeExtend={extend:e,gap:J(o)?o[o.length-1]:o})}}class vo extends Ms{needAxes(){return!0}_isValidSeries(t){return!this.seriesType||t===this.seriesType}_getDefaultSeriesSpec(t,e){return super._getDefaultSeriesSpec(t,["xField","yField","zField","direction","stack","percent","stackOffsetSilhouette","totalLabel","sortDataByAxis"],e)}transformSpec(t){super.transformSpec(t),super.transformSeriesSpec(t),this._transformAxisSpec(t)}_setDefaultXAxisSpec(t){return{orient:"bottom"}}_setDefaultYAxisSpec(t){return{orient:"left"}}_setDefaultZAxisSpec(t){return{orient:"z"}}_transformAxisSpec(t){if(this.needAxes()){t.axes||(t.axes=[]);const e={x:!1,y:!1,z:!1};t.axes.forEach(n=>{const{orient:r}=n;let s=null;r!=="top"&&r!=="bottom"||(e.x=!0,s=this._setDefaultXAxisSpec(t)),r!=="left"&&r!=="right"||(e.y=!0,s=this._setDefaultYAxisSpec(t)),r==="z"&&(e.z=!0,s=this._setDefaultZAxisSpec(t)),s&&Object.keys(s).forEach(a=>{N(n[a])&&(n[a]=s[a])}),be(n,"trimPadding")&&Wt(n,Znt(this.type,t))}),e.x||t.axes.push(this._setDefaultXAxisSpec(t)),e.y||t.axes.push(this._setDefaultYAxisSpec(t)),t.zField&&!e.z&&t.axes.push(this._setDefaultZAxisSpec(t))}}}class Drt extends vo{_getDefaultSeriesSpec(t){var e;const n=super._getDefaultSeriesSpec(t,["point","line","activePoint","sampling","samplingFactor","pointDis","pointDisMul","markOverlap","lineLabel"]);return n.seriesMark=(e=t.seriesMark)!==null&&e!==void 0?e:"line",n}transformSpec(t){super.transformSpec(t),uc(t)}}const Irt=(i,t)=>{const e={nodes:{}},{fields:n}=t;if(!n?.length)return e;const r=n.length-1;let s,a,o=e;return i.forEach(l=>{l.latestData&&l.latestData.forEach(u=>{o=e;for(let c=0;c<n.length;c++){const h=n[c],d=u[h];if(N(d))break;o.groupField=h,o.nodes[d]||(c===r?o.nodes[d]={values:[]}:(s={nodes:{}},o.nodes[d]=s)),c===r?(a=o.nodes[d],a.values.push(u)):o=o.nodes[d]}})}),e};class Lrt{constructor(t,e){this.stackRegion=({model:n})=>{var r;const s=n.getSeries();if(!s.some(c=>c.getStack()))return;const a=s.some(c=>{var h,d,f,p;return!!(!((d=(h=c.getSpec())===null||h===void 0?void 0:h.totalLabel)===null||d===void 0)&&d.alwayCalculateTotal)||((p=(f=c.getSpec())===null||f===void 0?void 0:f.totalLabel)===null||p===void 0?void 0:p.visible)}),o=a||s.some(c=>c.getPercent()),l=s.some(c=>c.getStackOffsetSilhouette()),u=Hnt(n,!0);for(const c in u)for(const h in u[c].nodes)pz(u[c].nodes[h],n.getStackInverse(),o,a);if(l)for(const c in u)for(const h in u[c].nodes)U5t(u[c].nodes[h]);a&&n.getSeries().forEach(c=>{const h=c.getStackData(),d=c.getStackValue(),f=c.getStackValueField();h&&f&&fz(u[d],f)}),!((r=this._options)===null||r===void 0)&&r.afterStackRegion&&this._options.afterStackRegion(n,u)},this._chart=t,this._options=e}init(){this._chart.getAllRegions().forEach(t=>{t.event.on(Tt.regionSeriesDataFilterOver,{filter:({model:e})=>e?.id===t.id},this.stackRegion)})}stackAll(){this._chart.getAllRegions().forEach(t=>{this.stackRegion({model:t})})}}class iu{_beforeInit(){this._dataSet&&Vt(this._dataSet,"stackSplit",Irt)}_initStack(){this._stack=new Lrt(this),this._stack.init()}}const Brt={state:bt.STATE_DIMENSION_HOVER,reverseState:bt.STATE_DIMENSION_HOVER_REVERSE,trigger:ec.dimensionHover};class kk extends Eh{constructor(t){super(t),this.type="dimension-hover",this._resetType=[],this.resetAll=()=>{const{state:e,reverseState:n,interaction:r}=this.options,s=r.getStatedGraphics(this);s&&s.length&&(r.clearAllStatesOfTrigger(this,e,n),this.dispatchEvent("reset",{graphics:s,options:this.options}),r.setStatedGraphics(this,[]))},this.handleStart=e=>{const n=this.options.interaction;switch(e.action){case"enter":const r=this.getStatedGraphics(e);n.updateStates(this,this.getStatedGraphics(e),n.getStatedGraphics(this),this.options.state,this.options.reverseState),n.setStatedGraphics(this,r);break;case"leave":n.clearAllStatesOfTrigger(this,this.options.state,this.options.reverseState),n.setStatedGraphics(this,[])}},this.options=Object.assign({},Brt,t),this.updateMarkIdByState([this.options.state,this.options.reverseState])}getStartState(){return this.options.state}getResetState(){return this.options.reverseState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart}]}getStatedGraphics(t,e=!1){const n=this.getMarksByState(e?this.options.reverseState:this.options.state),r=[];return t.dimensionInfo.forEach(s=>{s.data.forEach(a=>{n.filter(o=>o.model===a.series&&o.getVisible()).forEach(o=>{const l=o.getGraphics();if(!l||!l.length)return;const u=l.filter(c=>{const h=cn(c);let d;return d=J(h)?h.every((f,p)=>f===a.datum[p]):a.datum.some(f=>f===h),e?!d:d});r.push(...u)})})}),r}}kk.type="dimension-hover",kk.defaultOptions=Brt;const Hr=()=>{z.registerInteractionTrigger(kk.type,kk)},Vr=()=>{z.registerComposedEvent(ec.dimensionHover,m4t),z.registerComposedEvent(ec.dimensionClick,d4t)},Frt=i=>i.fieldX[0],zrt=i=>i.fieldY[0],pGt=i=>{var t;return[i.fieldX[0],(t=i.fieldX2)!==null&&t!==void 0?t:i.fieldX[1]]},gGt=i=>{var t;return[i.fieldY[0],(t=i.fieldY2)!==null&&t!==void 0?t:i.fieldY[1]]},HG=(i,t)=>i?t?Frt:pGt:t?zrt:gGt,ea=(i,t,e)=>{var n,r;if(!i)return null;const{x:s,y:a}=t,o=(n=Sk(i,p=>Ci(p.getOrient()),t))!==null&&n!==void 0?n:[],l=(r=Sk(i,p=>Bo(p.getOrient()),t))!==null&&r!==void 0?r:[];if(!o.length&&!l.length)return null;const u=new Set,c=new Set,h=new Set;[o,l].forEach(p=>p.forEach(g=>{Nr(g.getScale().type)?u.add(g):c.add(g),e&&g.getSpec().hasDimensionTooltip&&h.add(g)}));const d=[],f=p=>{const g=p==="x",m=g?s:a;(g?o:l).forEach(_=>{if(h.size>0){if(h.has(_)){const v=VG(_,m,HG(g,Nr(_.getScale().type)));v&&d.push(v)}}else{const v=u.size>0;if((v?u:c).has(_)){const y=VG(_,m,HG(g,v));y&&d.push(y)}}})};return i.getSpec().direction==="horizontal"?(f("y"),d.length===0&&f("x")):(f("x"),d.length===0&&f("y")),d.length?d:null},VG=(i,t,e)=>{const n=i.positionToData(t,!0);return N(n)?null:Ts(i,n,e)},Ts=(i,t,e)=>{const n=i.getScale();if(N(t))return null;let r=n.domain().findIndex(a=>a?.toString()===t.toString());r<0&&(r=void 0);const s=yL(t,i,"cartesian",e??(Ci(i.getOrient())?Frt:zrt));return{index:r,value:t,position:n.scale(t),axis:i,data:s}},Nrt=(i,t,e,n=!1)=>(e||(e={x:0,y:0}),Object.keys(i).forEach(r=>{var s,a,o,l,u,c;const{currentValue:h,cacheInfo:d,labelsComp:f,attributes:p,coordKey:g}=i[r];let m=null,_=0,v=null;if(h.size){const A=Array.from(h.values())[0];_=A.axis.getScale().scale(A.datum)+A.axis.getLayoutStartPoint()[g]-e[g],m=A.axis,v=(c=(u=(l=(o=(a=(s=m.getVRenderComponents()[0])===null||s===void 0?void 0:s.children[0])===null||a===void 0?void 0:a.children[0])===null||o===void 0?void 0:o.children[0])===null||l===void 0?void 0:l.getChildByName("axis-label-container"))===null||u===void 0?void 0:u.getChildByName("axis-label-container-layer-0"))===null||c===void 0?void 0:c.children[0]}const y=!!h.size&&Number.isFinite(_)&&!Number.isNaN(_),b=n&&!y&&L(d),x=b?d:{coordRange:[0,0],sizeRange:[0,0],coord:_,labelsTextStyle:{},labels:f?Object.keys(f).reduce((A,k)=>(A[k]={visible:!1,text:"",dx:0,dy:0},A),{}):null,visible:y,axis:m,axisLabel:v};let S;x&&(x._isCache=b);let w=0;if(p&&h.forEach(({axis:A,datum:k=""})=>{var C,M,R,P,O,T,D,B,I,F;let j=null;const H=A.getScale();if(Nr(H.type))S=H.bandwidth(),S===0&&H.step&&(w=H.step());else if(Ge(H.type)){const U=r==="xField"?t.fieldX[0]:t.fieldY[0],K=r==="xField"?t.fieldX2:t.fieldY2,q=I4t(t.getViewData().latestData,+k,U,K);if(q){const Z=r==="xField"?t.dataToPositionX(q):t.dataToPositionY(q);K?(S=Math.abs(Z-(r==="xField"?t.dataToPositionX1(q):t.dataToPositionY1(q))),k=`${q[U]} ~ ${q[K]}`):S=1,_=Z}j=A.niceLabelFormatter}if(x&&(!((C=p.label)===null||C===void 0)&&C.visible)&&!b){const U=Mz(A.getSpec()),K=A.getOrient(),q=(M=p.label)===null||M===void 0?void 0:M.syncAxisLabelAngle;x.labels[K]&&(x.labels[K].visible=!0,x.labels[K].text=k,K==="left"?(x.labels[K].dx=-U,x.labelsTextStyle[K]={textAlign:q&&v&&(R=v.attribute.textAlign)!==null&&R!==void 0?R:"right",textBaseline:q&&v&&(P=v.attribute.textBaseline)!==null&&P!==void 0?P:"middle"}):K==="right"?(x.labels[K].dx=U,x.labelsTextStyle[K]={textAlign:q&&v&&(O=v.attribute.textAlign)!==null&&O!==void 0?O:"left",textBaseline:q&&v&&(T=v.attribute.textBaseline)!==null&&T!==void 0?T:"middle"}):K==="top"?(x.labels[K].y=0,x.labels[K].dy=-U,x.labelsTextStyle[K]={textAlign:q&&v&&(D=v.attribute.textAlign)!==null&&D!==void 0?D:"center",textBaseline:q&&v&&(B=v.attribute.textBaseline)!==null&&B!==void 0?B:"bottom"}):K==="bottom"&&(x.labels[K].dy=U,x.labelsTextStyle[K]={textAlign:q&&v&&(I=v.attribute.textAlign)!==null&&I!==void 0?I:"center",textBaseline:q&&v&&(F=v.attribute.textBaseline)!==null&&F!==void 0?F:"top"}),x.labels[K].defaultFormatter=j)}}),x&&!b){const A={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0};_Gt(A,h),r==="xField"?(x.coordRange=[A.x1,A.x2],x.sizeRange=[A.y1,A.y2],x.coord=_+e.x,x.labels&&(x.labels.top.y=A.y1,x.labels.bottom.y=A.y2)):(x.coordRange=[A.y1,A.y2],x.sizeRange=[A.x1,A.x2],x.coord=_+e.y,x.labels&&(x.labels.left.x=A.x1,x.labels.right.x=A.x2)),(x.coord<x.coordRange[0]||x.coord>x.coordRange[1])&&(x.visible=!1),p&&p.label&&Object.keys(x.labels).forEach(k=>{x.labels[k].visible&&mGt(x.labels[k],k,p.label)})}i[r].bandSize=S??0,i[r].offsetSize=w,i[r].cacheInfo=x}),i),mGt=(i,t,e)=>{const{formatMethod:n,formatter:r}=e,{formatFunc:s,args:a}=Ju(n,r,i.text,{label:i.text,position:t});s?i.text=s(...a):i.defaultFormatter&&(i.text=i.defaultFormatter(i.text))},_Gt=(i,t)=>{t.forEach(({axis:e})=>{e.getRegions().forEach(n=>{const{x:r,y:s}=n.getLayoutStartPoint(),{width:a,height:o}=n.getLayoutRect();i.x1=Math.min(i.x1,r),i.y1=Math.min(i.y1,s),i.x2=Math.max(i.x2,r+a),i.y2=Math.max(i.y2,s+o)})})},xL=i=>{const{cacheInfo:t,attributes:e,bandSize:n,offsetSize:r,coordKey:s,anotherAxisKey:a}=i,{coord:o,sizeRange:l}=t,u=e.type;let c;if(u==="line"){const h=o+n/2;c={visible:!0,start:{[s]:h,[a]:l[0]},end:{[s]:h,[a]:l[1]}}}else if(u==="rect"){const[h,d]=vGt(e,n,r,t.axis),{coordRange:f}=t;c={visible:!0,start:{[s]:Math.max(o+h,f[0]),[a]:l[0]},end:{[s]:Math.min(o+d,f[1]),[a]:l[1]}}}return c},vGt=(i,t,e,n)=>{var r,s,a;const o=t===0?e:t;let l=o;if(!((r=i.style)===null||r===void 0)&&r.sizePercent)l=o*i.style.sizePercent;else if(typeof((s=i.style)===null||s===void 0?void 0:s.size)=="number")l=i.style.size;else if(typeof((a=i.style)===null||a===void 0?void 0:a.size)=="function"){const u=n.getLayoutRect();l=i.style.size(u,n)}return t===0?[-l/2,l/2]:[t/2-l/2,l/2+t/2]},ia=(i,t)=>{var e;const n=new Map,r=new Map,{series:s,datum:a}=i,o=s.direction==="horizontal",l=(o?s.getYAxisHelper():s.getXAxisHelper()).getAxisId(),u=s.getChart().getComponentsByKey("axes").find(h=>h.id===l);if(!u)return;(o?r:n).set(u.getSpecIndex(),{datum:(e=s.getDatumPositionValues(a[0],s.getDimensionField()))===null||e===void 0?void 0:e[0],axis:u});const c={xField:{coordKey:"x",anotherAxisKey:"y",currentValue:n,attributes:{visible:!!n.size,type:"rect"}},yField:{coordKey:"y",anotherAxisKey:"x",currentValue:r,attributes:{visible:!!r.size,type:"rect"}}};return Nrt(c,s,t),c.xField.cacheInfo?xL(c.xField):c.yField.cacheInfo?xL(c.yField):void 0},yGt=["updateTitle","updateContent","updatePosition","maxLineCount","othersLine"],bGt=(i,t,e,n,r)=>{var s,a,o;const l={activeType:i};switch(i){case"mark":case"group":if(e){const u=(s=e.getSpec())===null||s===void 0?void 0:s.tooltip;return l.visible=!0,u?.handler&&(l.handler=u.handler),!((a=l.handler)===null||a===void 0)&&a.showTooltip?l:(u?.[i]&&yGt.forEach(c=>{L(u[i][c])&&(l[c]=u[i][c])}),Object.assign(Object.assign({},l),e.tooltipHelper.getTooltipData(i,t,n,n[0].datum,r)))}break;case"dimension":if(n?.length){if(xGt(n).every(c=>{var h;return!Az("dimension",(h=c.tooltipHelper)===null||h===void 0?void 0:h.spec)})?l.visible=!1:l.visible=!0,l.handler=t.handler,(o=l.handler)===null||o===void 0?void 0:o.showTooltip)return l;const u=[];return n.forEach(c=>c.data.forEach(h=>{const{series:d}=h,f=d.tooltipHelper.getTooltipData(i,t,n,h.datum,r);f&&u.push(f)})),e4t(u)}}return null},xGt=i=>{const t=[];return i.forEach(e=>{e.data.forEach(n=>{L(n.series)&&t.push(n.series)})}),t},um={dom:`${zt}_TOOLTIP_HANDLER_DOM`,canvas:`${zt}_TOOLTIP_HANDLER_CANVAS`},SGt="vchart-tooltip-element",wGt=20,WG={key:"",value:"..."};var $G;(function(i){i.group="group",i.mark="mark",i.dimension="dimension"})($G||($G={}));const eR=50;class Dz{constructor(t){this._showTooltipByHandler=(e,n)=>{var r,s,a;if(N(e))return 1;n.changePositionOnly||this.clearCache(),this._updateViewSpec(e,n);const o=this._cacheActiveSpec;if(N(o)||o.visible===!1)return 1;n.tooltipSpec=this.component.getSpec(),n.activeTooltipSpec=o;const{title:l,content:u}=o,c=N(l?.key)&&N(l?.value)&&!u?.length;if(this.component.event.emit(Tt.tooltipShow,Object.assign(Object.assign({},n),{isEmptyTooltip:c,tooltipData:e,activeType:this.activeType,tooltip:this.component})),c)return 1;let h;return!((r=o.handler)===null||r===void 0)&&r.showTooltip?h=o.handler.showTooltip.bind(o.handler):!((s=this.component.tooltipHandler)===null||s===void 0)&&s.showTooltip&&(h=this.component.tooltipHandler.showTooltip.bind(this.component.tooltipHandler)),h?(a=h(this.activeType,e,n))!==null&&a!==void 0?a:0:1},this.component=t}_preprocessDimensionInfo(t){const e=[];if(t?.forEach(n=>{const r=Object.assign(Object.assign({},n),{data:n.data.filter(({series:s})=>{var a,o;return((o=(a=s.getSpec())===null||a===void 0?void 0:a.tooltip)===null||o===void 0?void 0:o.visible)!==!1})});r.data.length>0&&e.push(r)}),e.length>0)return e}_updateViewSpec(t,e){var n,r,s,a,o,l,u,c,h;const{changePositionOnly:d,model:f}=e;if(!d||!this._cacheActiveSpec){const p=this.component.getSpec();if(this._cacheActiveSpec=bGt(this.activeType,this.component.getSpec(),f,t,e),this._cacheActiveSpec){N(this._cacheActiveSpec.handler)&&L(p.handler)&&(this._cacheActiveSpec.handler=p.handler);const g=(n=p[this.activeType])!==null&&n!==void 0?n:{},m=(r=this._cacheActiveSpec.updateTitle)!==null&&r!==void 0?r:g.updateTitle,_=(s=this._cacheActiveSpec.updateContent)!==null&&s!==void 0?s:g.updateContent,v=(o=(a=this._cacheActiveSpec.maxLineCount)!==null&&a!==void 0?a:g.maxLineCount)!==null&&o!==void 0?o:wGt;if(m&&(this._cacheActiveSpec.title=(l=m(this._cacheActiveSpec.title,t,e))!==null&&l!==void 0?l:this._cacheActiveSpec.title),_)this._cacheActiveSpec.content=(u=_(this._cacheActiveSpec.content,t,e))!==null&&u!==void 0?u:this._cacheActiveSpec.content;else if(v>=1&&((c=this._cacheActiveSpec.content)===null||c===void 0?void 0:c.length)>v){const y=(h=this._cacheActiveSpec.othersLine)!==null&&h!==void 0?h:g.othersLine,b=y?Object.assign(Object.assign({},WG),y):WG;this._cacheActiveSpec.content=[...this._cacheActiveSpec.content.slice(0,v-1),Object.assign(Object.assign({},this._cacheActiveSpec.content[v-1]),b)]}}}}shouldHandleTooltip(t,e){var n,r;return!N(e)&&Az(this.activeType,(r=(n=t.model)===null||n===void 0?void 0:n.tooltipHelper)===null||r===void 0?void 0:r.spec)}clearCache(){this._cacheActiveSpec=void 0}}class AGt extends Dz{constructor(){super(...arguments),this.activeType="dimension"}showTooltip(t,e,n){const r=Object.assign(Object.assign({},e),{dimensionInfo:this._preprocessDimensionInfo(t),changePositionOnly:n,tooltip:this.component});return this._showTooltipByHandler(t,r)}_getDimensionInfo(t){var e,n,r;let s;const a=this.component.getChart(),o=a.getCompiler().getStage().getLayer(void 0),l={x:t.event.viewX,y:t.event.viewY};if(o.globalTransMatrix.transformPoint({x:t.event.viewX,y:t.event.viewY},l),s=(r=(n=(e=this.component.getOption()).getDimensionInfo)===null||n===void 0?void 0:n.call(e,a,l,!0))!==null&&r!==void 0?r:[],s.length===0)s=void 0;else if(s.length>1){const u=s.filter(c=>{var h;const d=c.axis;if(d.getSpec().hasDimensionTooltip)return!0;if(!Nr(d.getScale().type))return!1;let f;for(const p of(h=d?.getRegions())!==null&&h!==void 0?h:[]){for(const g of p.getSeries())if(g.coordinate==="cartesian"){f=g;break}if(L(f))break}return L(f)&&f.getDimensionField()[0]===f.fieldY[0]?d.getOrient()==="left"||d.getOrient()==="right":d.getOrient()==="bottom"||d.getOrient()==="top"});if(s=u.length?u:s.slice(0,1),s.length>1){const c=new Set;s.forEach(h=>{h.data=h.data.filter(({key:d})=>!c.has(d)&&(c.add(d),!0))})}}return s}getMouseEventData(t){return{tooltipInfo:this._getDimensionInfo(t),ignore:!1}}}const Tr=()=>{z.registerTooltipProcessor("dimension",AGt)};class kGt extends Dz{constructor(){super(...arguments),this.activeType="mark"}showTooltip(t,e,n){var r,s,a;const{datum:o,series:l}=t,u=this.component.getSpec(),c=[{datum:[o],series:l}],h=l.tooltipHelper,d=(r=l.getSpec())===null||r===void 0?void 0:r.tooltip,f=(s=d?.mark)===null||s===void 0?void 0:s.checkOverlap;let p=!1;if(f===!0||((a=u.mark)===null||a===void 0?void 0:a.checkOverlap)===!0&&f!==!1){const m=h?.activeTriggerSet.mark;if(m){p=!0;const _=this.component.getChart().getCompiler().getStage().getLayer(void 0),v={x:e.event.viewX,y:e.event.viewY};_.globalTransMatrix.transformPoint({x:e.event.viewX,y:e.event.viewY},v),m.forEach(y=>{y.getGraphics().forEach(b=>{b!==e.node&&b&&b.containsPoint(v.x,v.y,a0.GLOBAL,b.stage.getPickerService())&&c[0].datum.push(cn(b))})})}}const g=Object.assign(Object.assign({},e),{model:l,changePositionOnly:n,tooltip:this.component});if(n&&p){const m=this._cacheActiveSpec&&this._cacheActiveSpec.data;m&&m[0].series===c[0].series&&m[0].datum.length===c[0].datum.length&&!m[0].datum.some((_,v)=>_!==c[0].datum[v])||(g.changePositionOnly=!1)}return this._showTooltipByHandler(c,g)}getMouseEventData(t){var e;let n,r;const s=(e=t.model)===null||e===void 0?void 0:e.modelType;if(s==="series"){const a=t.model,o=a.tooltipHelper,l=o?.activeTriggerSet.mark,u=o?.ignoreTriggerSet.mark;l?.has(t.mark)?n={mark:t.mark,datum:t.datum,series:a}:u?.has(t.mark)&&(r=!0)}else if(s==="component"){const a=t.model,o=t.node;if(a.name==="label"&&o){const l=a.getLabelInfoByTextGraphic(o),{baseMark:u,series:c,labelMark:h}=l??{},d=c.tooltipHelper,f=d?.activeTriggerSet.mark,p=d?.ignoreTriggerSet.mark;f?.has(h)?n={mark:u,datum:o.attribute.data,series:c}:p?.has(h)&&(r=!0)}}return{tooltipInfo:n,ignore:r}}}const si=()=>{z.registerTooltipProcessor("mark",kGt)};class CGt extends Dz{constructor(){super(...arguments),this.activeType="group"}showTooltip(t,e,n){const{datum:r,series:s}=t,a=[{datum:X(r),series:s}],o=Object.assign(Object.assign({},e),{groupDatum:this._getGroupDatum(e),changePositionOnly:n,tooltip:this.component});return this._showTooltipByHandler(a,o)}getMouseEventData(t){var e,n;let r;if(((e=t.model)===null||e===void 0?void 0:e.modelType)==="series"){const s=t.model,a=s.tooltipHelper,o=a?.activeTriggerSet.group;if(o?.has(t.mark)){const l=this.component.getSpec()[this.activeType];(l?.triggerMark?X(l.triggerMark):[]).includes((n=t.mark)===null||n===void 0?void 0:n.name)&&(r={mark:t.mark,datum:t.datum,series:s})}}return{tooltipInfo:r,ignore:!1}}_getGroupDatum(t){const{model:e,mark:n,datum:r}=t,s=e;if(["line","area"].includes(n.type))return X(r);const a=s.getViewData().latestData,o=s.getSeriesField();if(!o)return a;const l=X(r)[0][o];return a.filter(u=>u[o]===l)}}const nu=()=>{z.registerTooltipProcessor("group",CGt)};let Np=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Drt,this.type="line",this.seriesType=st.line}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};Np.type="line",Np.seriesType=st.line,Np.transformerConstructor=Drt,Be(Np,iu);const Iz=()=>{Tr(),si(),nu(),Vr(),Hr(),Oz(),z.registerChart(Np.type,Np)},MGt=[...wrt,"fill","fillOpacity","background","texture","texturePadding","textureSize","textureColor"];class z0 extends Art{constructor(){super(...arguments),this.type=z0.type,this._isValidPointChannel=t=>["x","y","x1","y1","defined"].includes(t)}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}_getSegmentAttributes(){return MGt}_getIgnoreAttributes(){return[]}}z0.type="area";const yT=()=>{z.registerMark(z0.type,z0),as(),jF(),ant(),GM(),crt(),z.registerGraphicComponent("area",OF)};class TGt extends pr{constructor(){super(...arguments),this._getSeriesStyle=(t,e,n)=>{var r,s,a,o;for(const l of X(e)){let u=(r=this.series.getSeriesStyle(t))===null||r===void 0?void 0:r(l);if(u!==!1||l!=="fill"&&l!=="stroke"||(u=l==="fill"?(a=(s=this.series.getSeriesStyle(t))===null||s===void 0?void 0:s("stroke"))===null||a===void 0?void 0:a[0]:(o=this.series.getSeriesStyle(t))===null||o===void 0?void 0:o("fill")),L(u))return u}return n}}}const jrt=Object.assign(Object.assign(Object.assign({},Bi),Rc),{area:{name:"area",type:"area"}}),PGt=()=>{NUt(),ort(),uT()};class Hrt extends Sf{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){var e,n,r;const s=((e=t.point)===null||e===void 0?void 0:e.visible)!==!1&&((r=(n=t.point)===null||n===void 0?void 0:n.style)===null||r===void 0?void 0:r.visible)!==!1;this._addMarkLabelSpec(t,a=>{const o=a.position==="inside-middle";return!s||o?"area":"point"}),this._addMarkLabelSpec(t,"area","areaLabel","initLineLabelMarkStyle",void 0,!0)}_transformSpecAfterMergingTheme(t,e,n){var r,s,a,o,l;super._transformSpecAfterMergingTheme(t,e,n);const{area:u={},line:c={},seriesMark:h}=t,d=u.visible!==!1&&((r=u.style)===null||r===void 0?void 0:r.visible)!==!1,f=c.visible!==!1&&((s=c.style)===null||s===void 0?void 0:s.visible)!==!1;u.support3d=!(!u.support3d&&!c.support3d),u.zIndex=L(u.zIndex)||L(c.zIndex)?Math.max((a=u.zIndex)!==null&&a!==void 0?a:0,(o=c.zIndex)!==null&&o!==void 0?o:0):void 0,u.style&&delete u.style.stroke,u.state&&Object.keys(u.state).forEach(m=>{"style"in u.state[m]?delete u.state[m].style.stroke:delete u.state[m].stroke});let p=u,g=c;(h==="line"||f&&!d)&&(p=c,g=u),u.style=Wt({},g.style,p.style),u.state=Wt({},g.state,p.state),u.interactive===!1&&(u.style.fillPickable=!1),c.interactive===!1&&(c.style.strokePickable=!1),u.interactive=!(!u.interactive&&(l=c.interactive)!==null&&l!==void 0&&!l),t.area=u,t.line=c}}const EGt={label:{visible:!1,offset:5,position:"top",style:{stroke:{type:"palette",key:"backgroundColor"},lineWidth:2}},point:{style:{symbolType:"circle"}},seriesMark:"area"};class Tl extends _o{constructor(){super(...arguments),this.type=st.area,this.transformerConstructor=Hrt,this._sortDataByAxis=!1}initMark(){var t;const e=(t=this._spec.seriesMark)!==null&&t!==void 0?t:"area",n=this._isAreaVisible()||this._isLineVisible();this._areaMark=this._createMark(Tl.mark.area,{groupKey:this._seriesField,isSeriesMark:n&&e!=="point"},{morphElementKey:this.getDimensionField()[0]}),this.initSymbolMark(e==="point")}initMarkStyle(){this.initAreaMarkStyle(),this.initSymbolMarkStyle()}initAreaMarkStyle(){var t,e,n,r,s;const a=(n=(e=(t=this.getSpec().area)===null||t===void 0?void 0:t.style)===null||e===void 0?void 0:e.curveType)!==null&&n!==void 0?n:(s=(r=this.getSpec().line)===null||r===void 0?void 0:r.style)===null||s===void 0?void 0:s.curveType,o=a===grt?this._direction==="horizontal"?"monotoneY":"monotoneX":a,l=this._areaMark;if(l){const u=this._isAreaVisible(),c=this._isLineVisible();u||c?l.setVisible(!0):l.setVisible(!1),this._direction==="horizontal"?this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:h=>{var d,f;return He(this.dataToPositionX1(h),(f=(d=this._xAxisHelper)===null||d===void 0?void 0:d.getScale)===null||f===void 0?void 0:f.call(d,0))},y:this.dataToPositionY.bind(this),y1:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,orient:this._direction},"normal",ct.Series):this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:this.dataToPositionX.bind(this),y1:h=>{var d,f;return He(this.dataToPositionY1(h),(f=(d=this._yAxisHelper)===null||d===void 0?void 0:d.getScale)===null||f===void 0?void 0:f.call(d,0))},y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",ct.Series),this.setMarkStyle(l,{fill:!!u&&this.getColorAttribute(),stroke:!!c&&this.getColorAttribute()},"normal",ct.Series),this._invalidType!=="zero"&&this.setMarkStyle(l,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",ct.Series),this.getStack()&&this.setMarkStyle(l,{zIndex:h=>-h[bs]},"normal",ct.Series),this.setMarkStyle(l,{curveType:o},"normal",ct.Built_In),Object.keys(l.stateStyle).forEach(h=>{l.stateStyle[h].stroke&&l.setPostProcess("stroke",d=>[d,!1,!1,!1],h)})}}initAnimation(){var t,e,n,r;const s={direction:this.direction},a=(t=this._spec.animationAppear)===null||t===void 0?void 0:t.preset;if(this._lineMark&&this._lineMark.setAnimationConfig(ye((e=z.getAnimationInKey("line"))===null||e===void 0?void 0:e(s,a),Ce("line",this._spec,this._markAttributeContext))),this._areaMark&&this._areaMark.setAnimationConfig(ye((n=z.getAnimationInKey("area"))===null||n===void 0?void 0:n(s,a),Ce("area",this._spec,this._markAttributeContext))),this._symbolMark){const o=Rh(this);this._symbolMark.setAnimationConfig(ye((r=z.getAnimationInKey("scaleInOut"))===null||r===void 0?void 0:r(),Ce("point",this._spec,this._markAttributeContext),o))}}_isAreaVisible(){var t;const e=this._spec.area||{};return e.visible!==!1&&((t=e.style)===null||t===void 0?void 0:t.visible)!==!1}_isLineVisible(){var t;const e=this._spec.line||{};return e.visible!==!1&&((t=e.style)===null||t===void 0?void 0:t.visible)!==!1}initTooltip(){this._tooltipHelper=new TGt(this);const{group:t,mark:e}=this._tooltipHelper.activeTriggerSet;this._areaMark&&t.add(this._areaMark),this._lineMark&&t.add(this._lineMark),this._symbolMark&&(e.add(this._symbolMark),t.add(this._symbolMark))}viewDataStatisticsUpdate(t){super.viewDataStatisticsUpdate(t),this.encodeDefined(this._areaMark,"defined")}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}onLayoutEnd(){super.onLayoutEnd(),this.reCompileSampling()}getSeriesStyle(t){return e=>{var n,r,s,a,o;const l=(n=this._spec.seriesMark)!==null&&n!==void 0?n:"area";let u=(s=(r=this._seriesMark)===null||r===void 0?void 0:r.getAttribute(e,t))!==null&&s!==void 0?s:void 0;return e!=="fill"||u&&l!=="line"||(e="stroke",u=(o=(a=this._seriesMark)===null||a===void 0?void 0:a.getAttribute(e,t))!==null&&o!==void 0?o:void 0),e==="stroke"&&J(u)?u[0]:u}}}Tl.type=st.area,Tl.builtInTheme={area:EGt},Tl.mark=jrt,Tl.transformerConstructor=Hrt,Be(Tl,Cz);const Lz=()=>{Rz(),Ort(),dT(),yT(),cc(),PGt(),Mr(),mr(),z.registerSeries(Tl.type,Tl)};class Vrt extends vo{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["point","line","area","seriesMark","activePoint","sampling","samplingFactor","pointDis","pointDisMul","markOverlap","areaLabel","useSequentialAnimation"])}transformSpec(t){super.transformSpec(t),uc(t)}}let jp=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Vrt,this.type="area",this.seriesType=st.area}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};jp.type="area",jp.seriesType=st.area,jp.transformerConstructor=Vrt,Be(jp,iu);const Bz=()=>{Tr(),si(),nu(),Hr(),Lz(),Vr(),z.registerChart(jp.type,jp)};function Wrt(i,t=!0){return(e,n,r)=>{const s=i.direction==="vertical"?i.yField:i.xField,a=e?.[s];return i.direction==="vertical"?{overall:t&&i.growFrom(),orient:a>0?"negative":"positive"}:{overall:!!t&&i.growFrom(),orient:a>0?"positive":"negative"}}}const tx=(i,t=!0)=>({type:i.direction==="horizontal"?"growWidthIn":"growHeightIn",options:Wrt(i,t)}),cm=(i,t=!0)=>({type:i.direction==="horizontal"?"growWidthOut":"growHeightOut",options:Wrt(i,t)}),RGt={type:"fadeIn"},OGt={type:"growCenterIn"};function $rt(i,t){if(t===!1)return{};switch(t){case"fadeIn":return RGt;case"scaleIn":return OGt;default:return tx(i)}}const DGt=()=>{z.registerAnimation("bar",(i,t)=>({appear:$rt(i,t),enter:tx(i,!1),exit:cm(i,!1),disappear:cm(i)}))};class N0 extends ns{constructor(){super(...arguments),this.type=N0.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}N0.type="rect";const ru=()=>{as(),tu(),XWt(),z.registerMark(N0.type,N0),lrt(),z.registerGraphicComponent("rect",_f)},Fz=Object.assign(Object.assign({},Bi),{bar:{name:"bar",type:"rect"},barBackground:{name:"barBackground",type:"rect"}});function Urt(i,t,e){var n,r;if(i.values.length>0){let s;if(i.sortDatums.length){let a=i.sortDatums;t&&(a=i.sortDatums.slice().reverse());for(let o=0;o<a.length;o++)s=UG(a[o].datum,s,a[o].series,e,(r=(n=a[o].series[e.axisHelper]).getScale)===null||r===void 0?void 0:r.call(n,0),o===0)}else{let a=i.series;t&&(a=a.slice().reverse()),a.forEach(({s:o,values:l},u)=>{var c,h;const d=(h=(c=o[e.axisHelper]).getScale)===null||h===void 0?void 0:h.call(c,0);for(let f=0;f<l.length;f++){const p=l[t?l.length-1-f:f];s=UG(p,s,o,e,d,f===0&&u===0)}})}}for(const s in i.nodes)Urt(i.nodes[s],t,e)}function UG(i,t,e,n,r,s){const a=e.getSpec().barMinHeight,o=e[n.axisHelper].isInverse(),l=He(e[n.startMethod](i),r);let u=He(e[n.endMethod](i),r);s&&(t=l);let c=Math.abs(l-u);c<=0&&!uz(i[e.getStackValueField()],r)?c=0:c<a&&(c=a);let h=1;return u<l?h=-1:u===l&&(h=n.isVertical?o?1:-1:o?-1:1),u=t+h*c,i[n.start]=t,i[n.end]=u,u}class kf extends gr{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){this._addMarkLabelSpec(t,"bar")}}const IGt={label:{visible:!1,position:"outside",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}};class ga extends _o{constructor(){super(...arguments),this.type=st.bar,this._barMarkName="bar",this._barMarkType="rect",this.transformerConstructor=kf,this._bandPosition=0,this._getLinearBarRange=(t,e)=>{let[n,r]=[t,e].sort((l,u)=>l-u);const s=r-n;if(this._spec.barGap){const l=.5*this._spec.barGap;n=n+l,r=r-l}const a=r-n,o=or(this._spec.barMinWidth||2,s);if(a<o){const l=(o-a)/2;n-=l,r+=l}return[n,r]},this._getBarXStart=(t,e,n)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),t[_G]):this._spec.barMinHeight?this._calculateRectPosition(t,!1,n):He(this._dataToPosX(t),e,n),this._getBarXEnd=(t,e,n)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),t[vG]):He(this._dataToPosX1(t),e,n),this._getLinearBarXRange=(t,e,n)=>{const r=He(this._dataToPosX(t),e,n),s=He(this._dataToPosX1(t),e,n);return this._getLinearBarRange(r,s)},this._getBarYStart=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),t[yG]):this._spec.barMinHeight?this._calculateRectPosition(t,!0):He(this._dataToPosY(t),e),this._getBarYEnd=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),t[bG]):He(this._dataToPosY1(t),e),this._getLinearBarYRange=(t,e,n)=>{const r=He(this._dataToPosY(t),e,n),s=He(this._dataToPosY1(t),e,n);return this._getLinearBarRange(r,s)},this._getBarBackgroundXStart=t=>{const e=t.range();return Math.min(e[0],e[e.length-1])},this._getBarBackgroundXEnd=t=>{const e=t.range();return Math.max(e[0],e[e.length-1])},this._getBarBackgroundYStart=t=>{const e=t.range();return Math.min(e[0],e[e.length-1])},this._getBarBackgroundYEnd=t=>{const e=t.range();return Math.max(e[0],e[e.length-1])},this._getBarBackgroundPositionXEncoder=()=>{var t;return(t=this._barBackgroundPositionXEncoder)===null||t===void 0?void 0:t.bind(this)},this._setBarBackgroundPositionXEncoder=t=>{this._barBackgroundPositionXEncoder=t.bind(this)},this._getBarBackgroundPositionYEncoder=()=>{var t;return(t=this._barBackgroundPositionYEncoder)===null||t===void 0?void 0:t.bind(this)},this._setBarBackgroundPositionYEncoder=t=>{this._barBackgroundPositionYEncoder=t.bind(this)}}initMark(){this._initBarBackgroundMark(),this._barMark=this._createMark(Object.assign(Object.assign({},ga.mark.bar),{name:this._barMarkName,type:this._barMarkType}),{groupKey:this._seriesField,isSeriesMark:!0},{morphElementKey:this.getDimensionField()[0],morph:fo(this._spec,this._barMarkName)})}_initBarBackgroundMark(){this._spec.barBackground&&this._spec.barBackground.visible&&(this._barBackgroundMark=this._createMark(ga.mark.barBackground,{dataView:this._barBackgroundViewData.getDataView(),dataProductId:this._barBackgroundViewData.getProductId()}))}initMarkStyle(){this._barMark&&this.setMarkStyle(this._barMark,{fill:this.getColorAttribute()},"normal",ct.Series)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>e[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}initTooltip(){super.initTooltip();const{mark:t,group:e}=this._tooltipHelper.activeTriggerSet;this._barMark&&(t.add(this._barMark),e.add(this._barMark))}_statisticViewData(){var t,e;super._statisticViewData();const n=(t=this._spec.barBackground)!==null&&t!==void 0?t:{};if(!n.visible)return;const r=this._getRelatedComponentSpecInfo("axes").some(a=>a.type===lt.cartesianBandAxis);let s;if(Vt(this._option.dataSet,"addVChartProperty",Vm),r){const a=([o],{scaleDepth:l})=>{var u,c;let h=[{}];const d=this.getDimensionField(),f=N(l)?d.length:Math.min(d.length,l);for(let p=0;p<f;p++){const g=d[p],m=(u=o.latestData[g])===null||u===void 0?void 0:u.values;if(!m?.length)continue;const _=[],v=(c=this._spec.dataKey)!==null&&c!==void 0?c:ys;for(let y=0;y<m.length;y++)for(let b=0;b<h.length;b++)_.push(Object.assign(Object.assign({},h[b]),{[g]:m[y],[v]:m[y]}));h=_}return h};Vt(this._option.dataSet,"dimensionItems",a),s=new je(this._option.dataSet).parse([this._viewDataStatistics],{type:"dataview"}).transform({type:"dimensionItems",options:{scaleDepth:N(n.fieldLevel)?void 0:n.fieldLevel+1}},!1).transform({type:"addVChartProperty",options:{beforeCall:om.bind(this),call:rf}},!1),(e=this._viewDataStatistics)===null||e===void 0||e.target.addListener("change",s.reRunAllTransform)}else{const a=([l])=>{const u=[],[c,h]=this.getDimensionContinuousField(),d={};return o.latestData.forEach(f=>{const p=`${f[c]}-${f[h]}`;d[p]||(d[p]={[c]:f[c],[h]:f[h]},u.push(d[p]))}),u};Vt(this._option.dataSet,"dimensionItems",a);const o=this.getViewData();s=new je(this._option.dataSet).parse([o],{type:"dataview"}).transform({type:"dimensionItems"},!1).transform({type:"addVChartProperty",options:{beforeCall:om.bind(this),call:rf}},!1),o?.target.addListener("change",s.reRunAllTransform)}this._barBackgroundViewData=new Cr(this._option,s)}init(t){var e,n;super.init(t),this.direction==="vertical"?((e=this._xAxisHelper)===null||e===void 0?void 0:e.getScale(0).type)==="band"?this.initBandRectMarkStyle():this.initLinearRectMarkStyle():((n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale(0).type)==="band"?this.initBandRectMarkStyle():this.initLinearRectMarkStyle()}_shouldDoPreCalculate(){const t=this.getRegion();return this.getStack()&&t.getSeries().filter(e=>e.type===this.type&&e.getSpec().barMinHeight).length}_calculateStackRectPosition(t){const e=this.getRegion();if(e._bar_series_position_calculated)return;let n,r,s,a,o;e._bar_series_position_calculated=!0,t?(n=bG,r=yG,s="_dataToPosY1",a="_dataToPosY",o="_yAxisHelper"):(n=vG,r=_G,s="_dataToPosX1",a="_dataToPosX",o="_xAxisHelper");const l=Hnt(e,!1,u=>u.type===this.type);for(const u in l)for(const c in l[u].nodes)Urt(l[u].nodes[c],e.getStackInverse(),{isVertical:t,start:n,end:r,startMethod:s,endMethod:a,axisHelper:o})}_calculateRectPosition(t,e,n){var r,s;let a,o,l;e?(a="_dataToPosY1",o="_dataToPosY",l="_yAxisHelper"):(a="_dataToPosX1",o="_dataToPosX",l="_xAxisHelper");const u=(s=(r=this[l]).getScale)===null||s===void 0?void 0:s.call(r,0),c=this[l].isInverse(),h=this._spec.barMinHeight,d=He(this[a](t),u,n),f=He(this[o](t),u,n);let p=Math.abs(d-f);p<=0&&!uz(t[this.getStackValueField()],u)?p=0:p<h&&(p=h);let g=1;return f<d?g=-1:f===d&&(g=e?c?1:-1:c?-1:1),d+g*p}_dataToPosX(t){return this.dataToPositionX(t)}_dataToPosX1(t){return this.dataToPositionX1(t)}_dataToPosY(t){return this.dataToPositionY(t)}_dataToPosY1(t){return this.dataToPositionY1(t)}initBandRectMarkStyle(){var t,e,n,r;const s=(e=(t=this._xAxisHelper)===null||t===void 0?void 0:t.getScale)===null||e===void 0?void 0:e.call(t,0),a=(r=(n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale)===null||r===void 0?void 0:r.call(n,0);this.direction==="horizontal"?this.setMarkStyle(this._barMark,{x:o=>this._getBarXStart(o,s),x1:o=>this._getBarXEnd(o,s),y:o=>this._getPosition(this.direction,o),height:()=>this._getBarWidth(this._yAxisHelper),width:()=>{},y1:()=>{}},"normal",ct.Series):this.setMarkStyle(this._barMark,{y:o=>this._getBarYStart(o,a),y1:o=>this._getBarYEnd(o,a),x:o=>this._getPosition(this.direction,o),width:()=>this._getBarWidth(this._xAxisHelper),x1:()=>{},height:()=>{}},"normal",ct.Series),this._initStackBarMarkStyle(),this._initBandBarBackgroundMarkStyle()}_initStackBarMarkStyle(){var t,e,n,r;if(!this._spec.stackCornerRadius)return;const s=(e=(t=this._xAxisHelper)===null||t===void 0?void 0:t.getScale)===null||e===void 0?void 0:e.call(t,0),a=(r=(n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale)===null||r===void 0?void 0:r.call(n,0);this._barMark.setMarkConfig({clip:!0,clipPath:()=>{const o=[];return this._forEachStackGroup(l=>{let u=1/0,c=-1/0,h=!1,d=1/0,f=-1/0;l.values.forEach(m=>{const _=m[ho],v=m[bs],y=m[Qu],b=m[Xl];u=Math.min(u,_,v),c=Math.max(c,_,v),L(y)&&L(b)&&(h=!0,d=Math.min(d,y,b),f=Math.max(f,y,b))});const p=Object.assign(Object.assign(Object.assign({},l.values[0]),{[ho]:u,[bs]:c}),h?{[Qu]:d,[Xl]:f}:void 0),g=this.direction==="horizontal"?{x:this._getBarXStart(p,s),x1:this._getBarXEnd(p,s),y:this._getPosition(this.direction,p),height:this._getBarWidth(this._yAxisHelper)}:{y:this._getBarYStart(p,a),y1:this._getBarYEnd(p,a),x:this._getPosition(this.direction,p),width:this._getBarWidth(this._xAxisHelper)};o.push(_f(Object.assign(Object.assign({},g),{cornerRadius:it(this._spec.stackCornerRadius)?this._spec.stackCornerRadius(g,p,this._markAttributeContext):this._spec.stackCornerRadius,fill:!0})))}),o}})}initLinearRectMarkStyle(){var t,e,n,r;const s=(e=(t=this._xAxisHelper)===null||t===void 0?void 0:t.getScale)===null||e===void 0?void 0:e.call(t,0),a=(r=(n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale)===null||r===void 0?void 0:r.call(n,0);if(this.direction==="horizontal"){const o=L(this._fieldY2)?{y:l=>this._getLinearBarYRange(l,a,!0)[0],y1:l=>this._getLinearBarYRange(l,a,!0)[1]}:{y:l=>He(this._dataToPosY(l)-this._getBarWidth(this._yAxisHelper)/2,a,!0),height:l=>this._getBarWidth(this._yAxisHelper)};this.setMarkStyle(this._barMark,Object.assign({x:l=>this._getBarXStart(l,s,!0),x1:l=>this._getBarXEnd(l,s,!0)},o),"normal",ct.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign({x:()=>this._getBarBackgroundXStart(s),x1:()=>this._getBarBackgroundXEnd(s)},o),"normal",ct.Series)}else{const o=L(this._fieldX2)?{x:l=>this._getLinearBarXRange(l,s,!0)[0],x1:l=>this._getLinearBarXRange(l,s,!0)[1]}:{x:l=>He(this._dataToPosX(l)-this._getBarWidth(this._xAxisHelper)/2,s,!0),width:l=>this._getBarWidth(this._xAxisHelper)};this.setMarkStyle(this._barMark,Object.assign(Object.assign({},o),{y:l=>this._getBarYStart(l,a),y1:l=>this._getBarYEnd(l,a)}),"normal",ct.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign(Object.assign({},o),{y:()=>this._getBarBackgroundYStart(a),y1:()=>this._getBarBackgroundYEnd(a)}),"normal",ct.Series)}}_initBandBarBackgroundMarkStyle(){var t,e,n,r,s;if(!this._barBackgroundMark)return;const a=(e=(t=this._xAxisHelper)===null||t===void 0?void 0:t.getScale)===null||e===void 0?void 0:e.call(t,0),o=(r=(n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale)===null||r===void 0?void 0:r.call(n,0),l=(s=this._spec.barBackground)!==null&&s!==void 0?s:{},u=N(l.fieldLevel)?void 0:l.fieldLevel+1;this.direction==="horizontal"?this.setMarkStyle(this._barBackgroundMark,{x:()=>this._getBarBackgroundXStart(a),x1:()=>this._getBarBackgroundXEnd(a),y:c=>this._getPosition(this.direction,c,u,"barBackground"),height:()=>this._getBarWidth(this._yAxisHelper,u),width:()=>{},y1:()=>{}},"normal",ct.Series):this.setMarkStyle(this._barBackgroundMark,{x:c=>this._getPosition(this.direction,c,u,"barBackground"),y:()=>this._getBarBackgroundYStart(o),y1:()=>this._getBarBackgroundYEnd(o),width:()=>this._getBarWidth(this._xAxisHelper,u),x1:()=>{},height:()=>{}},"normal",ct.Series)}initAnimation(){var t,e;const n={yField:this._fieldY[0],xField:this._fieldX[0],direction:this.direction,growFrom:()=>{var a;const o=this.direction==="horizontal"?(a=this._xAxisHelper)===null||a===void 0?void 0:a.getScale(0):this._yAxisHelper.getScale(0);if(o){const l=o.domain(),u=Rn(l),c=rn(l);return c<0?o.scale(c):u>0?o.scale(u):o.scale(0)}}},r=(t=this._spec.animationAppear)===null||t===void 0?void 0:t.preset,s=Rh(this);this._barMark.setAnimationConfig(ye((e=z.getAnimationInKey("bar"))===null||e===void 0?void 0:e(n,r),Ce(this._barMarkName,this._spec,this._markAttributeContext),s))}_getBarWidth(t,e){var n,r;const s=this._groups?this._groups.fields.length:1,a=N(e)?s:Math.min(s,e),o=(r=(n=t.getBandwidth)===null||n===void 0?void 0:n.call(t,a-1))!==null&&r!==void 0?r:6,l=L(this._spec.barWidth)&&a===s,u=L(this._spec.barMinWidth),c=L(this._spec.barMaxWidth);let h=o;return l&&(h=or(this._spec.barWidth,o)),u&&(h=Math.max(h,or(this._spec.barMinWidth,o))),c&&(h=Math.min(h,or(this._spec.barMaxWidth,o))),h}_getPosition(t,e,n,r){var s,a,o,l,u;let c,h,d;t==="horizontal"?(c=this.getYAxisHelper(),h="height",d=r==="barBackground"?this.dataToBarBackgroundPositionY.bind(this):this.dataToPositionY.bind(this)):(c=this.getXAxisHelper(),h="width",d=r==="barBackground"?this.dataToBarBackgroundPositionX.bind(this):this.dataToPositionX.bind(this));const f=c.getScale(0),p=this._groups?this._groups.fields.length:1,g=N(n)?p:Math.min(p,n),m=(a=(s=c.getBandwidth)===null||s===void 0?void 0:s.call(c,g-1))!==null&&a!==void 0?a:6,_=g===p?this._barMark.getAttribute(h,e):m;if(g>1&&L(this._spec.barGapInGroup)){const y=this._groups.fields,b=X(this._spec.barGapInGroup);let x=0,S=0;for(let w=y.length-1;w>=1;w--){const A=y[w],k=(l=(o=c.getScale(w))===null||o===void 0?void 0:o.domain())!==null&&l!==void 0?l:[],C=k.length,M=or((u=b[w-1])!==null&&u!==void 0?u:ke(b),m),R=k.indexOf(e[A]);w===y.length-1?(x+=C*_+(C-1)*M,S+=R*(_+M)):(S+=R*(x+M),x+=x+(C-1)*M)}return f.scale(e[y[0]])+c.getBandwidth(0)/2-x/2+S}const v=Ge(f.type||"band");return d(e,g)+.5*(m-_)+(v?-m/2:0)}dataToBarBackgroundPositionX(t,e){return this._dataToPosition(t,this._xAxisHelper,this.fieldX,e,this._getBarBackgroundPositionXEncoder,this._setBarBackgroundPositionXEncoder)}dataToBarBackgroundPositionY(t,e){return this._dataToPosition(t,this._yAxisHelper,this.fieldY,e,this._getBarBackgroundPositionYEncoder,this._setBarBackgroundPositionYEncoder)}onLayoutEnd(){super.onLayoutEnd(),this.getRegion()._bar_series_position_calculated=!1,this._spec.sampling&&this.compile()}onDataUpdate(){super.onDataUpdate(),this.getRegion()._bar_series_position_calculated=!1}compile(){if(super.compile(),this._spec.sampling){const{width:t,height:e}=this._region.getLayoutRect(),n=this._fieldY,r=this._fieldX;this._data.setTransform([{type:"sampling",size:this._direction==="horizontal"?e:t,factor:this._spec.samplingFactor,yfield:this._direction==="horizontal"?r[0]:n[0],groupBy:this._seriesField,mode:this._spec.sampling}])}}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._barMark]}compileData(){var t;super.compileData(),(t=this._barBackgroundViewData)===null||t===void 0||t.compile()}fillData(){var t,e;super.fillData(),(e=(t=this._barBackgroundViewData)===null||t===void 0?void 0:t.getDataView())===null||e===void 0||e.reRunAllTransform()}viewDataUpdate(t){var e,n,r;super.viewDataUpdate(t),(n=(e=this._barBackgroundViewData)===null||e===void 0?void 0:e.getDataView())===null||n===void 0||n.reRunAllTransform(),(r=this._barBackgroundViewData)===null||r===void 0||r.updateData()}release(){var t;super.release(),(t=this._barBackgroundViewData)===null||t===void 0||t.release(),this._barBackgroundViewData=null}}ga.type=st.bar,ga.builtInTheme={bar:IGt},ga.mark=Fz,ga.transformerConstructor=kf;const bT=()=>{Rz(),ru(),DGt(),Mr(),mr(),z.registerSeries(ga.type,ga)};class xT extends vo{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["barWidth","barMaxWidth","barMinWidth","barGapInGroup","barMinHeight","sampling","samplingFactor","barBackground","stackCornerRadius","useSequentialAnimation"])}transformSpec(t){super.transformSpec(t),uc(t)}_transformAxisSpec(t){var e,n;if(super._transformAxisSpec(t),!t.axes)return;const r=t.series.some(a=>a.direction==="horizontal"),s=(e=t.axes.find(a=>a.type==="band"))!==null&&e!==void 0?e:t.axes.find(a=>(r?["left","right"]:["top","bottom"]).includes(a.orient));if(s&&!s.bandSize&&!s.maxBandSize&&!s.minBandSize&&t.autoBandSize){const a=ee(t.autoBandSize)&&(n=t.autoBandSize.extend)!==null&&n!==void 0?n:0,{barMaxWidth:o,barMinWidth:l,barWidth:u,barGapInGroup:c}=t.series.find(h=>h.type==="bar");this._applyAxisBandSize(s,a,{barMaxWidth:o,barMinWidth:l,barWidth:u,barGapInGroup:c})}}}let Vc=class extends ki{constructor(){super(...arguments),this.transformerConstructor=xT,this.type="bar",this.seriesType=st.bar}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};Vc.type="bar",Vc.seriesType=st.bar,Vc.transformerConstructor=xT,Be(Vc,iu);const zz=()=>{Tr(),si(),nu(),Hr(),bT(),Vr(),z.registerChart(Vc.type,Vc)},GG=10,LGt=[10,20],BGt=Tn.Linear,YG="circle",FGt=Tn.Ordinal,zGt=["circle","square","triangle","diamond","star"],NGt=(i,t)=>t==="fadeIn"?{type:"fadeIn"}:{type:"scaleIn"},jGt=()=>{z.registerAnimation("scatter",(i,t)=>Object.assign({appear:NGt(0,t)},Sz))},HGt=Object.assign(Object.assign({},Bi),{point:{name:"point",type:"symbol"}});class Grt extends gr{_transformLabelSpec(t){this._addMarkLabelSpec(t,"point")}}const VGt={point:{style:{size:8,symbolType:"circle",lineWidth:0,fillOpacity:.8}},label:{visible:!1,offset:5,position:"top",style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}};class Eu extends _o{constructor(){super(...arguments),this.type=st.scatter,this.transformerConstructor=Grt,this._invalidType="zero"}setAttrFromSpec(){super.setAttrFromSpec(),this._size=this._spec.size,this._sizeField=this._spec.sizeField,this._shape=this._spec.shape,this._shapeField=this._spec.shapeField}_getSeriesAttribute(t,e,{defaultScaleType:n,defaultRange:r},s){var a,o,l,u;if(it(e))return e;if(J(e)){if(N(t))return(a=this._option)===null||a===void 0||a.onError(`${s}Field is required.`),e;if(n!=="ordinal"&&e.length>2)return(o=this._option)===null||o===void 0||o.onError(`${s} length is invalid, specify up to 2 ${s}s.`),e;const c=`${zt}_series_scatter_${this.id}_scale_${s}`;return this._option.globalScale.registerModelScale({id:c,type:n,domain:[{dataId:this._rawData.name,fields:[t]}],range:e}),{scale:c,field:t}}if(ee(e)){if(N(t))return(l=this._option)===null||l===void 0||l.onError(`${s}Field is required.`),e;const c=`${zt}_series_scatter_${this.id}_scale_${s}`,h=Object.assign({id:c,type:n,domain:[{dataId:this._rawData.name,fields:[t]}],range:r},e);return this._option.globalScale.registerModelScale(h),{scale:h.id,field:t}}return(u=this._option)===null||u===void 0||u.onError(`${s} attribute is invalid.`),e}getSizeAttribute(t,e){return N(e)?GG:yt(e)?e:Ht(e)&&yPt(e)?parseFloat(e):this._getSeriesAttribute(t,e,{defaultScaleType:BGt,defaultRange:LGt},"size")}getShapeAttribute(t,e){return N(e)?YG:Ht(e)?e:this._getSeriesAttribute(t,e,{defaultScaleType:FGt,defaultRange:zGt},"shape")}initMark(){this._symbolMark=this._createMark(Eu.mark.point,{groupKey:this._seriesField,isSeriesMark:!0},{morph:fo(this._spec,Eu.mark.point.name),morphElementKey:this.getDimensionField()[0]})}initMarkStyle(){this.initSymbolMarkStyle()}initAnimation(){var t,e,n;const r=Rh(this),s=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._symbolMark.setAnimationConfig(ye((n=z.getAnimationInKey("scatter"))===null||n===void 0?void 0:n({},s),Ce("point",this._spec,this._markAttributeContext),r))}initSymbolMarkStyle(){const t=this._symbolMark;t&&(this._invalidType!=="zero"&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)}),this.setMarkStyle(t,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,fill:this.getColorAttribute(),size:yt(this._size)||it(this._size)?this._size:GG,symbolType:Ht(this._shape)||it(this._shape)?this._shape:YG},bt.STATE_NORMAL,ct.Series),(L(this._sizeField)||L(this._size))&&this.setMarkStyle(t,{size:this.getSizeAttribute(this._sizeField,this._size)},bt.STATE_NORMAL,ct.User_Mark),(L(this._shapeField)||L(this._shape))&&this.setMarkStyle(t,{symbolType:this.getShapeAttribute(this._shapeField,this._shape)},bt.STATE_NORMAL,ct.User_Mark))}initTooltip(){super.initTooltip(),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark)}viewDataStatisticsUpdate(t){super.viewDataStatisticsUpdate(t);const e=[this.getDimensionField()[0],this.getStackValueField()].every(n=>{var r,s,a;return n&&((a=(s=(r=this.getViewDataStatistics())===null||r===void 0?void 0:r.latestData)===null||s===void 0?void 0:s[n])===null||a===void 0?void 0:a.allValid)});this._invalidType==="zero"||e?this.setMarkStyle(this._symbolMark,{visible:!0},"normal",ct.Series):this.setMarkStyle(this._symbolMark,{visible:this._getInvalidDefined.bind(this)},"normal",ct.Series),this._symbolMark.getProduct()&&this._symbolMark.compileEncode()}initLabelMarkStyle(t){t&&(this._labelMark=t,this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>e[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null},bt.STATE_NORMAL,ct.Series),this._invalidType!=="zero"&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},bt.STATE_NORMAL,ct.Series))}handleZoom(t){var e,n;this.getMarksWithoutRoot().forEach(s=>{if(!s)return;const a=s.getGraphics();a&&a.length&&a.forEach((o,l)=>{var u,c;const h=(c=(u=o?.context)===null||u===void 0?void 0:u.data)===null||c===void 0?void 0:c[0],d=this.dataToPosition(h);d&&o&&o.translateTo(d.x,d.y)})});const r=(n=(e=this._labelMark)===null||e===void 0?void 0:e.getComponent())===null||n===void 0?void 0:n.getProduct();r&&r.evaluate(null,null)}handlePan(t){this.handleZoom(t)}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._symbolMark]}}Eu.type=st.scatter,Eu.mark=HGt,Eu.builtInTheme={scatter:VGt},Eu.transformerConstructor=Grt;const Nz=()=>{cc(),jGt(),Mr(),mr(),z.registerSeries(Eu.type,Eu)};class Yrt extends vo{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["point","size","shape","shapeField","sizeField"])}}let Hp=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Yrt,this.type="scatter",this.seriesType=st.scatter}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};Hp.type="scatter",Hp.seriesType=st.scatter,Hp.transformerConstructor=Yrt,Be(Hp,iu);const jz=()=>{Tr(),si(),Vr(),Hr(),Nz(),z.registerChart(Hp.type,Hp)};class Xrt extends tc{constructor(){super(...arguments),this.type=st.geo,this.coordinate="geo",this._nameProperty="name"}getMapViewData(){var t;return(t=this._mapViewData)===null||t===void 0?void 0:t.getDataView()}get nameField(){return this._nameField}set nameField(t){this._nameField=t}get valueField(){return this._valueField}set valueField(t){this._valueField=t}getNameProperty(){return this._nameProperty}getCentroidProperty(){return this._centroidProperty}getCoordinateHelper(){return this._coordinateHelper}setCoordinateHelper(t){this._coordinateHelper=t}getStatisticFields(){const t=[];return t.push({key:this._nameField,operations:["values"]}),t.push({key:this._valueField,operations:["max","min"]}),t}getGroupFields(){return null}dataToPosition(t,e){var n;let r=null;if(!t||e&&!this.isDatumInViewData(t))return r;const{dataToPosition:s,latitudeField:a,longitudeField:o}=this._coordinateHelper;if(r=this.nameToPosition(t),r===null){const l=o?t?.[o]:Number.NaN,u=a?t?.[a]:Number.NaN;r=(n=s?.([l,u]))!==null&&n!==void 0?n:null}return r}nameToPosition(t){const e=this.getDatumName(t);return N(e)?null:this.nameValueToPosition(e)}nameValueToPosition(t){var e,n;const r=(n=(e=this.getMapViewData())===null||e===void 0?void 0:e.latestData)===null||n===void 0?void 0:n.filter(l=>this.getDatumName(l)===t)[0];if(N(r))return null;const{dataToPosition:s}=this._coordinateHelper,a=this.getDatumCenter(r),o=s?.(a);return N(o)||isNaN(o.x)||isNaN(o.y)?null:o}dataToLatitude(t){if(!this._coordinateHelper)return Number.NaN;const{dataToLatitude:e}=this._coordinateHelper;return e(t)}dataToLongitude(t){if(!this._coordinateHelper)return Number.NaN;const{dataToLatitude:e}=this._coordinateHelper;return e(t)}valueToPosition(t,e){return{x:this.dataToLongitude(t),y:this.dataToLatitude(e)}}positionToData(t){}latitudeToData(t){}longitudeToData(t){}dataToPositionX(t){var e;return(e=this._option)===null||e===void 0||e.onError("Method not implemented."),0}dataToPositionY(t){var e;return(e=this._option)===null||e===void 0||e.onError("Method not implemented."),0}dataToPositionZ(t){var e;return(e=this._option)===null||e===void 0||e.onError("Method not implemented."),0}release(){super.release(),this._mapViewData.release(),this._mapViewData=this._mapViewDataStatistics=null}getStackGroupFields(){return[this._nameField]}getStackValueField(){return this._spec.valueField}compileData(){var t;(t=this._mapViewData)===null||t===void 0||t.compile()}initStatisticalData(){if(super.initStatisticalData(),this._mapViewData){const t=`${zt}_series_${this.id}_mapViewDataStatic`;this._mapViewDataStatistics=this.createStatisticalData(t,this._mapViewData.getDataView()),this._mapViewData.getDataView().target.removeListener("change",this._mapViewDataStatistics.reRunAllTransform)}}getSeriesKeys(){var t,e,n,r,s;return this._seriesField?(s=(e=(t=this.getRawDataStatisticsByField(this._seriesField))===null||t===void 0?void 0:t.values)!==null&&e!==void 0?e:(r=(n=this._mapViewDataStatistics)===null||n===void 0?void 0:n.latestData[this._seriesField])===null||r===void 0?void 0:r.values)!==null&&s!==void 0?s:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}fillData(){var t,e;super.fillData(),(t=this._mapViewData.getDataView())===null||t===void 0||t.reRunAllTransform(),(e=this._mapViewDataStatistics)===null||e===void 0||e.reRunAllTransform()}getActiveMarks(){return[]}}const WGt=(i,t)=>(i.features&&i.features.forEach((e,n)=>{var r;e[hr]=n;const s=(r=e.properties)===null||r===void 0?void 0:r[t.nameProperty];t.nameMap&&t.nameMap[s]?e[vk]=t.nameMap[s]:e[vk]=s}),i.features);class $Gt extends pr{constructor(){super(...arguments),this.dimensionTooltipTitleCallback=t=>{var e;const n=this.series;return(e=this._getDimensionData(t))!==null&&e!==void 0?e:n.getDatumName(t)}}}class j0 extends ns{constructor(){super(...arguments),this.type=j0.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0,path:""})}}j0.type="path";const ST=()=>{z.registerMark(j0.type,j0),as(),Nm(),z.registerGraphicComponent("path",RF)},UGt=Object.assign(Object.assign({},Bi),{area:{name:"area",type:"path"}});class GGt{constructor(t){this.projection=COt(t.type)()}fit(t,e,n){const r={type:"FeatureCollection",features:n};this.projection.fitExtent([t,e],r)}center(t){var e,n;(n=(e=this.projection)===null||e===void 0?void 0:e.center)===null||n===void 0||n.call(e,t)}project(t){var e;return(e=this.projection)===null||e===void 0?void 0:e.call(this,t)}shape(t){var e,n;return(n=(e=this.projection)===null||e===void 0?void 0:e.path)===null||n===void 0?void 0:n.call(e,t)}invert(t){var e,n;return(n=(e=this.projection)===null||e===void 0?void 0:e.invert)===null||n===void 0?void 0:n.call(e,t)}scale(t){var e;if(!((e=this.projection)===null||e===void 0)&&e.scale){if(t===void 0)return this.projection.scale();this.projection.scale(t)}}translate(t){var e;if(!((e=this.projection)===null||e===void 0)&&e.scale){if(t===void 0)return this.projection.translate();this.projection.translate(t)}}evaluate(t,e,n){const r=this.projection.copy();return r?.fitExtent([t,e],{type:"FeatureCollection",features:n})}}class YGt{parserScrollEvent(t){return t&&!(t.ctrlKey||t.deltaY===0&&t.deltaX===0)&&(t.scrollX=t.deltaX,t.scrollY=t.deltaY,t)}parserZoomEvent(t){if(!t)return t;const e=Math.pow(1.0005,-t.deltaY*Math.pow(16,t.deltaMode));return t.zoomDelta=e,t.zoomX=t.canvasX,t.zoomY=t.canvasY,t}clearZoom(){}clearScroll(){}clearDrag(){}}class XGt{constructor(){this._lastScale=0}clearZoom(){this._lastScale=0}parserZoomEvent(t){const e=t.scale;if(this._lastScale===0)return this._lastScale=e,t;t.zoomDelta=e/this._lastScale;const n=t.center;return t.zoomX=n.x,t.zoomY=n.y,this._lastScale=e,t}parserScrollEvent(t){return t}clearScroll(){}clearDrag(){}}function _l(i){return i===wn["desktop-browser"]||i===wn["desktop-miniApp"]?{start:"pointerdown",move:"pointermove",end:["pointerup","pointerupoutside"],zoom:"wheel",zoomEnd:"pointerup",scroll:"wheel",trigger:YGt}:uh(i)||Mh(i)?{start:"pointerdown",move:"pointermove",end:["pointerup","pointerupoutside","pointerleave"],zoom:"pinch",zoomEnd:"pinchend",scroll:"pan",scrollEnd:"panend",trigger:XGt}:null}const Kf={debounce:pf,throttle:ac};class wT{constructor(){this._isGestureListener=!1}initZoomable(t,e=wn["desktop-browser"]){this._eventObj=t,this._renderMode=e,this._gestureController=this._option.getCompiler()._gestureController,this._isGestureListener=uh(this._renderMode)||Mh(this._renderMode),_l(this._renderMode)&&(this._clickEnable=!0,this._zoomableTrigger=new(this._getZoomTriggerEvent("trigger")))}_getZoomTriggerEvent(t){return _l(this._renderMode)[t]}_zoomEventDispatch(t,e,n,r){if(!this._isGestureListener&&!t.event)return;const s=this._isGestureListener?t:t.event.clone();this._zoomableTrigger.parserZoomEvent(s);const{zoomDelta:a,zoomX:o,zoomY:l,path:u}=s;if(!r&&!u.some(h=>h.name&&h.name.includes("region"))||N(a)||!ug({x:o,y:l},this._getRegionOrSeriesLayout(e),!1))return;this._clearDragEvent(),this._zoomableTrigger.clearScroll();let c={};n&&(c=n({zoomDelta:a,zoomX:o,zoomY:l},s)),this._eventObj.emit("zoom",Object.assign(Object.assign({scale:s.zoomDelta,scaleCenter:{x:s.zoomX,y:s.zoomY}},c),{model:this}))}_getRegionOrSeriesLayout(t){t.type!=="region"&&(t=t.getRegion());const{x:e,y:n,width:r,height:s}=t.layout.getLayout();return{x1:e,y1:n,x2:e+r,y2:n+s}}_bindZoomEventAsRegion(t,e,n,r){var s,a;const o=(s=r?.delayType)!==null&&s!==void 0?s:"throttle",l=(a=r?.delayTime)!==null&&a!==void 0?a:0,u=this._isGestureListener?this._gestureController:t,c=this._isGestureListener?[this._getZoomTriggerEvent("zoom")]:[this._getZoomTriggerEvent("zoom"),{level:vi.chart,consume:!0}],h=this._isGestureListener?[this._getZoomTriggerEvent("zoomEnd")]:[this._getZoomTriggerEvent("zoomEnd"),{level:vi.chart,consume:!1}];u.on(...h,Kf[o](d=>{this._zoomableTrigger.clearZoom()},l)),u.on(...c,Kf[o](d=>{var f;this._zoomEventDispatch(d,e,n,(f=r?.allowComponentZoom)!==null&&f!==void 0&&f)},l))}initZoomEventOfSeries(t,e,n){this._option.disableTriggerEvent||_l(this._renderMode)&&this._bindZoomEventAsRegion(t.event,t,e,n)}initZoomEventOfRegions(t,e,n,r){this._option.disableTriggerEvent||_l(this._renderMode)&&t.forEach(s=>{e?s.getSeries().forEach(a=>{e(a)&&this._bindZoomEventAsRegion(a.event,a,n,r)}):this._bindZoomEventAsRegion(this._eventObj,s,n,r)})}_scrollEventDispatch(t,e,n){let r=!1;if(!this._isGestureListener&&(!t.event||this._option.disableTriggerEvent))return r;const s=this._isGestureListener?t:t.event;this._zoomableTrigger.parserScrollEvent(s);const{scrollX:a,scrollY:o,canvasX:l,canvasY:u}=s;return N(a)&&N(o)||ug({x:l,y:u},this._getRegionOrSeriesLayout(e),!1)&&(this._clearDragEvent(),this._zoomableTrigger.clearZoom(),n&&(r=n({scrollX:a,scrollY:o},s)),this._eventObj.emit("scroll",{scrollX:a,scrollY:o,model:this})),r}_bindScrollEventAsRegion(t,e,n,r){var s,a;const o=(s=r?.delayType)!==null&&s!==void 0?s:"throttle",l=(a=r?.delayTime)!==null&&a!==void 0?a:0,u=this._isGestureListener?this._gestureController:t,c=this._isGestureListener?[this._getZoomTriggerEvent("scroll")]:[this._getZoomTriggerEvent("scroll"),{level:vi.chart,consume:!0}],h=this._isGestureListener?[this._getZoomTriggerEvent("scrollEnd")]:[this._getZoomTriggerEvent("scrollEnd"),{level:vi.chart,consume:!1}];u.on(...h,Kf[o](d=>{this._zoomableTrigger.clearScroll()},l)),u.on(...c,Kf[o](d=>this._scrollEventDispatch(d,e,n),l))}initScrollEventOfSeries(t,e,n){_l(this._renderMode)&&this._bindScrollEventAsRegion(t.event,t,e,n)}initScrollEventOfRegions(t,e,n,r){this._option.disableTriggerEvent||_l(this._renderMode)&&t.forEach(s=>{e?s.getSeries().forEach(a=>{e(a)&&this._bindScrollEventAsRegion(a.event,a,n,r)}):this._bindScrollEventAsRegion(this._eventObj,s,n,r)})}_bindDragEventAsRegion(t,e,n,r){t.on(this._getZoomTriggerEvent("start"),{level:vi.chart},s=>{if(!s.event)return;const{event:a}=s;ug({x:a.canvasX,y:a.canvasY},this._getRegionOrSeriesLayout(e),!1)&&this._handleDrag(s,n,r)}),t.on("click",{level:vi.chart},()=>!this._clickEnable)}initDragEventOfSeries(t,e,n){this._option.disableTriggerEvent||_l(this._renderMode)&&t.event.on(this._getZoomTriggerEvent("start"),{level:vi.model,filter:({model:r})=>r?.id===t.id},r=>{this._handleDrag(r,e,n)})}initDragEventOfRegions(t,e,n,r){this._option.disableTriggerEvent||_l(this._renderMode)&&t.forEach(s=>{e?s.getSeries().forEach(a=>{e(a)&&(a.event.on(this._getZoomTriggerEvent("start"),{level:vi.model,filter:({model:o})=>o?.id===a.id},o=>{this._handleDrag(o,n)}),a.event.on("click",{level:vi.model,filter:({model:o})=>o?.id===a.id},()=>!this._clickEnable))}):this._bindDragEventAsRegion(this._eventObj,s,n,r)})}_clearDragEvent(){const t=this._getZoomTriggerEvent("move"),e=this._getZoomTriggerEvent("end");this._handleDragMouseMove&&(this._eventObj.off(t,{level:vi.chart,source:ze.chart},this._handleDragMouseMove),this._handleDragMouseMove=void 0),this._handleDragMouseUp&&(e.forEach(n=>{this._eventObj.off(n,{level:vi.chart,source:ze.chart},this._handleDragMouseUp),this._eventObj.allow(n)}),this._handleDragMouseUp=void 0)}isDragEnable(t){if(this._isGestureListener&&this._gestureController){const e=this._gestureController.cachedEvents;return!e||e.length<2}return!0}_handleDrag(t,e,n){var r,s,a;if(this._clearDragEvent(),this._option.disableTriggerEvent||(this._clickEnable=!1,!this.isDragEnable(t.event)))return;this._zoomableTrigger.clearZoom(),this._zoomableTrigger.clearScroll();const o=(r=n?.delayType)!==null&&r!==void 0?r:"throttle",l=(s=n?.delayTime)!==null&&s!==void 0?s:0,u=(a=n?.realTime)===null||a===void 0||a,c=this._getZoomTriggerEvent("move"),h=this._getZoomTriggerEvent("end"),d=t.event;let f=d.canvasX,p=d.canvasY,g=d.canvasX,m=d.canvasY;this._handleDragMouseUp=Kf[o](_=>{this._clickEnable=!0;const v=_.event,y=[v.canvasX-g,v.canvasY-m];g=v.canvasX,m=v.canvasY,!u&&e&&e(y,_.event),this._eventObj.emit("panend",{delta:y,model:this}),this._clearDragEvent()},l),this._handleDragMouseMove=Kf[o](_=>{if(!this.isDragEnable(_.event))return;this._clickEnable=!1,h.forEach(b=>{this._eventObj.prevent(b,{handler:this._handleDragMouseUp,level:vi.chart})});const v=_.event,y=[v.canvasX-f,v.canvasY-p];f=v.canvasX,p=v.canvasY,u&&e&&e(y,_.event),this._eventObj.emit("panmove",{delta:y,model:this})},l),this._eventObj.on(c,{level:vi.chart,source:ze.chart},this._handleDragMouseMove),h.forEach(_=>{this._eventObj.on(_,{level:vi.chart,source:ze.chart},this._handleDragMouseUp)})}}function KGt(i,t){return`${zt}_${t}_${i}`}class Ck extends Cs{constructor(){super(...arguments),this.type=lt.geoCoordinate,this.name=lt.geoCoordinate,this.layoutType="none",this.layoutZIndex=ti.Mark,this._projectionSpec={name:KGt(this.type,this.id),type:"mercator"},this._actualScale=1,this._initialScale=1,this.effect={scaleUpdate:()=>{this.coordinateHelper()}},this._handleChartZoom=(t,e)=>{var n,r,s,a,o,l;let u=t.zoomDelta;const c=this._actualScale;return this._actualScale*=u,this._actualScale<((n=this._spec.zoomLimit)===null||n===void 0?void 0:n.min)?(this._actualScale=(r=this._spec.zoomLimit)===null||r===void 0?void 0:r.min,u=((s=this._spec.zoomLimit)===null||s===void 0?void 0:s.min)/c):this._actualScale>((a=this._spec.zoomLimit)===null||a===void 0?void 0:a.max)&&(this._actualScale=(o=this._spec.zoomLimit)===null||o===void 0?void 0:o.max,u=((l=this._spec.zoomLimit)===null||l===void 0?void 0:l.max)/c),this.zoom(u,[t.zoomX,t.zoomY]),{scale:u,totalScale:this._actualScale}},this.pan=(t=[0,0])=>{var e,n,r;const s=(n=(e=this._projection)===null||e===void 0?void 0:e.translate())!==null&&n!==void 0?n:[0,0];let a=s[0],o=s[1];a+=t[0],o+=t[1],(r=this._projection)===null||r===void 0||r.translate([a,o])}}get longitudeField(){return this._longitudeField}get latitudeField(){return this._latitudeField}get projectionSpec(){return this._projectionSpec}setProjection(t){this._projectionSpec=Object.assign(Object.assign({},t),{name:this._projectionSpec.name})}getZoom(){return this._actualScale}static getSpecInfo(t){if(N(t))return null;const e=[];return t.region.forEach((n,r)=>{if(n.coordinate==="geo"){const s=Object.assign(Object.assign({},n),{padding:0});e.push({spec:s,regionIndex:r,type:lt.geoCoordinate,specInfoPath:["component","geoCoordinate",r]})}}),e}setAttrFromSpec(){var t,e,n;super.setAttrFromSpec(),this._spec.roam&&this.initZoomable(this.event,this._option.mode),this._projectionSpec=Wt(this._projectionSpec,this._spec.projection),this._projectionSpec.zoom>((t=this._spec.zoomLimit)===null||t===void 0?void 0:t.max)&&(this._projectionSpec.zoom=this._spec.zoomLimit.max),this._projectionSpec.zoom<((e=this._spec.zoomLimit)===null||e===void 0?void 0:e.min)&&(this._projectionSpec.zoom=this._spec.zoomLimit.min),this._actualScale=(n=this._projectionSpec.zoom)!==null&&n!==void 0?n:1,this._initialScale=this._actualScale,this._longitudeField=this._spec.longitudeField,this._latitudeField=this._spec.latitudeField}created(){super.created(),this._regions=this._option.getRegionsInIndex([this._option.regionIndex]),this.initProjection(),this.coordinateHelper(),this.initEvent(),this._initCenterCache()}dispatchZoom(t,e){const n=e||{x:this.getLayoutStartPoint().x+this.getLayoutRect().width/2,y:this.getLayoutStartPoint().y+this.getLayoutRect().height/2},{scale:r,totalScale:s}=this._handleChartZoom({zoomDelta:t,zoomX:n.x,zoomY:n.y});r!==1&&this.event.emit("zoom",{scale:r,scaleCenter:n,totalScale:s,model:this})}initEvent(){var t,e,n;this.event.on(Tt.scaleUpdate,{filter:({model:s})=>s?.id===this.id},this.effect.scaleUpdate.bind(this));const{roam:r}=this._spec;if(r){let s=!0,a=!0,o=!1;r!==!0&&(s=(t=r.zoom)===null||t===void 0||t,a=(e=r.drag)===null||e===void 0||e,o=(n=r.blank)!==null&&n!==void 0&&n),s&&this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom),a&&this.initDragEventOfRegions(this._regions,o?null:()=>!0,this.pan),this._regions.forEach(l=>{l.getSeries().forEach(u=>{u.event.on("zoom",c=>(u.handleZoom(c),!0)),u.event.on("panmove",c=>(u.handlePan(c),!0))})})}}initProjection(){var t;this._projection=new GGt(this._projectionSpec),this._projection.projection!==null||(t=this._option)===null||t===void 0||t.onError("unsupported projection type!")}coordinateHelper(){const t={longitudeField:this._longitudeField,latitudeField:this._latitudeField,dataToPosition:this.dataToPosition.bind(this),dataToLongitude:this.dataToLongitude.bind(this),dataToLatitude:this.dataToLatitude.bind(this),shape:this.shape.bind(this),getCoordinateId:()=>this.id};this._regions.forEach(e=>{e.getSeries().forEach(n=>{n.type===st.map||n.type===st.pictogram?n.setCoordinateHelper(t):(n.setXAxisHelper(Object.assign(Object.assign({},t),{isContinuous:!0,dataToPosition:(r,s)=>{var a;let o=r[0];if(N(o)&&s?.datum){const l=s.datum[n.getDimensionField()[0]];o=(a=this._centerCache.get(l))===null||a===void 0?void 0:a.x}return this.dataToLongitude(o)},valueToPosition:(r,s)=>{var a;if(N(r)&&s?.datum){const o=s.datum[n.getDimensionField()[0]];r=(a=this._centerCache.get(o))===null||a===void 0?void 0:a.x}return this.dataToLongitude(r)},getFields:()=>[this._longitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})),n.setYAxisHelper(Object.assign(Object.assign({},t),{isContinuous:!0,dataToPosition:(r,s)=>{var a;let o=r[0];if(N(o)&&s?.datum){const l=s.datum[n.getDimensionField()[0]];o=(a=this._centerCache.get(l))===null||a===void 0?void 0:a.y}return this.dataToLatitude(o)},valueToPosition:(r,s)=>{var a;if(N(r)&&s?.datum){const o=s.datum[n.getDimensionField()[0]];r=(a=this._centerCache.get(o))===null||a===void 0?void 0:a.y}return this.dataToLatitude(r)},getFields:()=>[this._latitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})))})})}onLayoutEnd(){this.setLayoutRect(this._regions[0].getLayoutRect()),this.setLayoutStartPosition(this._regions[0].getLayoutStartPoint());const{width:t,height:e}=this.getLayoutRect(),{translate:n,scale:r,center:s}=this.evaluateProjection([0,0],[t,e]);n&&this._projection.translate(n),r&&this._projection.scale(r),s&&this._projection.center(s),zi(this._regions,a=>{var o;if(a.type===st.map||a.type===st.pictogram){(o=a.areaPath)===null||o===void 0||o.clear();const l=a.getRootMark().getProduct();l&&l.attribute.postMatrix&&l.setAttributes({postMatrix:new di})}}),this._actualScale=this._initialScale,super.onLayoutEnd()}collectFeatures(){const t=[];return this._regions.forEach(e=>{e.getSeries().forEach(n=>{var r,s;n.type!==st.map&&n.type!==st.pictogram||t.push(...(s=(r=n.getMapViewData())===null||r===void 0?void 0:r.latestData)!==null&&s!==void 0?s:[])})}),t}dataToPosition(t=[]){var e;const n=(e=this._projection)===null||e===void 0?void 0:e.project([t[0],t[1]]);return{x:n?.[0],y:n?.[1]}}dataToLatitude(t){var e;const n=(e=this._projection)===null||e===void 0?void 0:e.project([0,t]);return n?.[1]}dataToLongitude(t){var e;const n=(e=this._projection)===null||e===void 0?void 0:e.project([t,0]);return n?.[0]}zoom(t,e=[0,0]){var n,r,s,a,o,l;let u=(r=(n=this._projection)===null||n===void 0?void 0:n.scale())!==null&&r!==void 0?r:0;const c=(a=(s=this._projection)===null||s===void 0?void 0:s.translate())!==null&&a!==void 0?a:[0,0];let h=c[0],d=c[1];u*=t,h-=(e[0]-h)*(t-1),d-=(e[1]-d)*(t-1),(o=this._projection)===null||o===void 0||o.scale(u),(l=this._projection)===null||l===void 0||l.translate([h,d])}shape(t){return this._projection.shape(t)}invert(t){return this._projection.invert(t)}evaluateProjection(t,e){var n;const r=this._projection.evaluate(t,e,this.collectFeatures());let s=r.translate();const a=r.scale()*this._initialScale,o=(n=this._projectionSpec.center)!==null&&n!==void 0?n:r.invert([e[0]/2,e[1]/2]);return o&&(s=[e[0]/2,e[1]/2]),{translate:s,scale:a,center:o}}_initCenterCache(){this._centerCache||(this._centerCache=new Map),this._regions.forEach(t=>{t.getSeries().forEach(e=>{var n,r;e.type==="map"&&((r=(n=e.getMapViewData())===null||n===void 0?void 0:n.latestData)!==null&&r!==void 0?r:[]).forEach((s={})=>{const a=s[e.getDimensionField()[0]]||s[vk],o=e.getDatumCenter(s);a&&L(o)&&this._centerCache.set(a,{x:o[0],y:o[1]})})})})}_compareSpec(t,e){const n=super._compareSpec(t,e);return n.reMake||(n.reMake=["roam","longitudeField","latitudeField","projection","zoomLimit"].some(r=>!Ne(e?.[r],t[r]))),n}release(){super.release(),this._centerCache&&this._centerCache.clear(),this._centerCache=null}}Ck.type=lt.geoCoordinate,Be(Ck,wT);const Hz=()=>{z.registerComponent(Ck.type,Ck)};class Krt extends gr{_transformLabelSpec(t){this._addMarkLabelSpec(t,"area",void 0,void 0,!1)}}const qGt={defaultFillColor:"#f3f3f3",area:{style:{lineWidth:.5,strokeOpacity:1,stroke:"black",fillOpacity:1}},label:{interactive:!1,style:{fontSize:{type:"token",key:"l6FontSize"},lineHeight:{type:"token",key:"l6LineHeight"},textBaseline:"middle",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},stroke:{type:"palette",key:"backgroundColor"}}}};class Ru extends Xrt{constructor(){super(...arguments),this.type=st.map,this.transformerConstructor=Krt,this._areaCache=new Map}getNameMap(){return this._nameMap}get areaPath(){return this._areaCache}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.map=this._spec.map,this._nameMap=this._spec.nameMap,this._nameField=this._spec.nameField,this._valueField=this._spec.valueField,this._spec.nameProperty&&(this._nameProperty=this._spec.nameProperty),this._spec.centroidProperty&&(this._centroidProperty=this._spec.centroidProperty),this.map||(t=this._option)===null||t===void 0||t.onError(`map type '${this.map}' is not specified !`),ef.get(this.map)||(e=this._option)===null||e===void 0||e.onError(`'${this.map}' data is not registered !`)}initData(){var t,e;super.initData(),Vt(this._dataSet,"copyDataView",nT),Vt(this._dataSet,"map",WGt),Vt(this._dataSet,"lookup",_rt);const n=ef.get(this.map);n||(t=this._option)===null||t===void 0||t.onError("no valid map data found!");const r=new je(this._dataSet,{name:`map_${this.id}_data`});r.parse([n],{type:"dataview"}).transform({type:"copyDataView",options:{deep:!0},level:Qo.copyDataView}).transform({type:"map",options:{nameMap:this._nameMap,nameProperty:this._nameProperty}}).transform({type:"lookup",options:{from:()=>{var s;return(s=this._data)===null||s===void 0?void 0:s.getLatestData()},key:vk,fields:this._nameField,set:(s,a)=>{a&&Object.keys(a).forEach(o=>{o in s||(s[o]=a[o])})}}}),(e=this._data)===null||e===void 0||e.getDataView().target.addListener("change",r.reRunAllTransform),this._mapViewData=new Cr(this._option,r)}compileData(){var t;super.compileData(),(t=this._mapViewData)===null||t===void 0||t.compile()}initMark(){this._pathMark=this._createMark(Ru.mark.area,{groupKey:this.getDimensionField()[0],isSeriesMark:!0},{morph:fo(this._spec,Ru.mark.area.name),morphElementKey:this.getDimensionField()[0]}),this._pathMark.setData(this._mapViewData)}initMarkStyle(){const t=this._pathMark;t&&(this.setMarkStyle(t,{fill:e=>{var n,r,s,a;return L(e[(n=this._seriesField)!==null&&n!==void 0?n:gs])?((r=this._option.globalScale.getScale("color"))!==null&&r!==void 0?r:this._getDefaultColorScale()).scale(e[(s=this._seriesField)!==null&&s!==void 0?s:gs]):(a=this._spec)===null||a===void 0?void 0:a.defaultFillColor},path:this.getPath.bind(this)},"normal",ct.Series),t.setPostProcess("fill",e=>L(e)?e:this._spec.defaultFillColor),this.setMarkStyle(t,{smoothScale:!0},"normal",ct.Built_In))}initLabelMarkStyle(t){t&&(this._labelMark=t,this.setMarkStyle(t,{text:e=>this.getDatumName(e),x:e=>{var n;return(n=this.dataToPosition(e))===null||n===void 0?void 0:n.x},y:e=>{var n;return(n=this.dataToPosition(e))===null||n===void 0?void 0:n.y}}))}initAnimation(){var t;this._pathMark.setAnimationConfig(ye((t=z.getAnimationInKey("fadeInOut"))===null||t===void 0?void 0:t(),Ce("area",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new $Gt(this),this._pathMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pathMark)}getPath(t){var e;const n=this._areaCache.get(t[hr]);if(n)return n.shape;const r=(e=this._coordinateHelper)===null||e===void 0?void 0:e.shape(t);return this._areaCache.set(t[hr],{shape:r}),r}onEvaluateEnd(){this._mapViewData.updateData()}getDimensionField(){return[this.nameField]}getMeasureField(){return[this.valueField]}release(){super.release(),this._areaCache.clear(),this._nameMap={},this._mapViewData=null}handleZoom(t){var e;const{scale:n,scaleCenter:r}=t;if(n===1)return;const s=this.getRootMark().getProduct();s&&(s.attribute.postMatrix||s.setAttributes({postMatrix:new di}),s.scale(n,n,r));const a=(e=this._labelMark)===null||e===void 0?void 0:e.getComponent();a&&a.renderInner()}handlePan(t){var e;const{delta:n}=t;if(n[0]===0&&n[1]===0)return;const r=this.getRootMark().getProduct();r&&(r.attribute.postMatrix||r.setAttributes({postMatrix:new di}),r.translate(n[0],n[1]));const s=(e=this._labelMark)===null||e===void 0?void 0:e.getComponent();s&&s.renderInner()}getDatumCenter(t){var e,n,r,s;return this._centroidProperty&&(!((e=t.properties)===null||e===void 0)&&e[this._centroidProperty])?(n=t.properties)===null||n===void 0?void 0:n[this._centroidProperty]:et(t.centroidX*t.centroidY)?[t.centroidX,t.centroidY]:!((r=t.properties)===null||r===void 0)&&r.center?t.properties.center:!((s=t.properties)===null||s===void 0)&&s.centroid?t.properties.centroid:[Number.NaN,Number.NaN]}getDatumName(t){var e;if(t[this.nameField])return t[this.nameField];const n=(e=t.properties)===null||e===void 0?void 0:e[this._nameProperty];if(n){if(this._spec.nameMap&&this._spec.nameMap[n])return this._spec.nameMap[n];if(this._spec.showDefaultName||!this._spec.nameMap)return n}return""}dataToPositionX(t){var e;return(e=this._option)===null||e===void 0||e.onError("Method not implemented."),0}dataToPositionY(t){var e;return(e=this._option)===null||e===void 0||e.onError("Method not implemented."),0}viewDataUpdate(t){var e,n,r;super.viewDataUpdate(t),(n=(e=this._mapViewData)===null||e===void 0?void 0:e.getDataView())===null||n===void 0||n.reRunAllTransform(),(r=this._mapViewData)===null||r===void 0||r.updateData()}_getDataIdKey(){return hr}getActiveMarks(){return[this._pathMark]}}Ru.type=st.map,Ru.mark=UGt,Ru.builtInTheme={map:qGt},Ru.transformerConstructor=Krt;const qrt=()=>{Hz(),ST(),z.registerSeries(Ru.type,Ru),z.registerImplement("registerMap",eUt),z.registerImplement("unregisterMap",iUt),rl()},Mk=`${zt}_waterfall_default_seriesField`,ZGt=(i,t)=>{if(!i||i.length===0)return i;const{indexField:e,total:n,groupData:r,calculationMode:s}=t,a=[],{dimensionValues:o,dimensionData:l}=r().latestData;let u=Array.from(o[e]);s==="decrease"&&(u=u.reverse());let c={start:0,end:0,positive:0,negative:0,lastIndex:null};return u.forEach((h,d)=>{const f={start:c.end,end:c.end,lastIndex:c.lastIndex,lastEnd:c.end,index:h,isTotal:!1,positive:c.end,negative:c.end},p=t.stackInverse===!0?l[h].reverse():l[h];if(p?.forEach((g,m)=>{m===p.length-1?g[P0]=!0:delete g[P0]}),p.length>1){const g=m=>{if(n&&n.type!=="end"){if(n.type==="field"||n.type==="custom")return!!m[n.tagField]}else if(d===u.length-1)return!0;return!1};if(p.some(m=>g(m)))return c=QGt(p,h,f,a,c,u,d,t,g),void a.push(f)}c=Zrt(p,h,f,a,c,u,d,t),a.push(f)}),a};function QGt(i,t,e,n,r,s,a,o,l){e.isTotal=!0;const{valueField:u,startAs:c,endAs:h,total:d}=o,f=[],p=[];if(i.forEach((S,w)=>{l(S)?p.push(Object.assign(Object.assign({},S),{_vchart_waterfall_waterfall_temp:w})):f.push(S)}),p.length===i.length){const S=Zrt([i[0]],t,e,n,r,s,a,o);return p.forEach(w=>{w[c]=i[0][c],w[h]=i[0][h],w[u]=i[0][u]}),S}const g=p[0];let{start:m,end:_}=Qrt(g,e,n,r,d);e.start=m,e.end=_;let v=m,y=m,b=_-m;const x=f.reduce((S,w)=>Jy(S,+w[u]),b);return p.forEach(S=>{const w={[c]:m,[h]:_,[u]:x};f.splice(S._vchart_waterfall_waterfall_temp,0,w)}),f.forEach(S=>{const w=+S[u];w>=0?(S[c]=+v,v=Ol(v,w)):(S[c]=+y,y=Ol(y,w)),S[h]=Ol(S[c],w),m=Ol(m,w),b=Jy(b,w)}),p.forEach(S=>{const w=S._vchart_waterfall_waterfall_temp;S=f[w];const A=i[w];A[c]=S[c],A[h]=S[h],A[u]=S[u]}),Object.assign(Object.assign({},e),{lastIndex:t})}function Zrt(i,t,e,n,r,s,a,o){const{valueField:l,startAs:u,endAs:c,total:h,seriesField:d,seriesFieldName:f}=o;return i.forEach(p=>{let g=!1;if(h&&h.type!=="end"){if((h.type==="field"||h.type==="custom")&&p[h.tagField]){g=!0;const{start:m,end:_}=Qrt(p,e,n,r,h);p[u]=m,p[c]=_,p[l]=_-m,e.start=m,e.end=_}}else a===s.length-1&&(e.start=0,p[u]=e.start,p[c]=e.end,g=!0);if(!g){const m=+p[l];m>=0?(p[u]=+e.positive,e.positive=Ol(e.positive,m)):(p[u]=+e.negative,e.negative=Ol(e.negative,m)),p[c]=Ol(p[u],m),e.end=Ol(e.end,m)}e.isTotal=g,(N(d)||d===Mk)&&(p[Mk]=g?f.total:+p[l]>=0?f.increase:f.decrease)}),Object.assign(Object.assign({},e),{lastIndex:t})}function Qrt(i,t,e,n,r){return r&&r.type!=="end"?r.type==="field"||r.type==="custom"?r.type==="custom"?tYt(i,n,r):r.collectCountField&&!N(i[r.collectCountField])?eYt(i,e,t,r):iYt(i,t,r):{start:0,end:0}:JGt(t)}function JGt(i){return{start:0,end:i.end}}function tYt(i,t,e){return e.product(i,t)}function eYt(i,t,e,n){let r=0,s=e.end;const a=t.length-+i[n.collectCountField],o=t.length-1;return a<0?es("total.collectCountField error"):r=t[a].start,o<0?es("total.collectCountField error"):s=t[o].end,{start:r,end:s}}function iYt(i,t,e){let n=0,r=t.end;return e.startField&&!N(i[e.startField])&&(n=+i[e.startField]),e.valueField&&!N(i[e.valueField])&&(r=Ol(n,+i[e.valueField])),{start:n,end:r}}const nYt=(i,t)=>{if(!i)return i;const{indexField:e,valueField:n,total:r,seriesField:s,calculationMode:a}=t,o={[e]:r?.text||"total",[n]:i.reduce((l,u)=>Ol(l,+u[n]),0)};return s&&(o[s]="total"),a==="decrease"?i.unshift(o):i.push(o),i},rYt={type:"fadeIn"},sYt={type:"growCenterIn"};function aYt(i,t){switch(t){case"fadeIn":return rYt;case"scaleIn":return sYt;default:return tx(i,!1)}}const oYt=()=>{z.registerAnimation("waterfall",(i,t)=>({appear:aYt(i,t),enter:tx(i,!1),exit:cm(i,!1),disappear:cm(i,!1)}))};var lYt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class H0 extends ns{constructor(){super(...arguments),this.type=H0.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x1:0,y1:0})}_transformGraphicAttributes(t,e,n){const r=super._transformGraphicAttributes(t,e,n),{x:s,x1:a,y:o,y1:l}=r,u=lYt(r,["x","x1","y","y1"]);return Object.assign(Object.assign({},u),{points:[{x:s,y:o},{x:a,y:l}]})}_createGraphic(t={}){return Fb(t)}}H0.type="rule";const Um=()=>{z.registerMark(H0.type,H0),as(),Jl(),z.registerGraphicComponent("line",Fb)},uYt=Object.assign(Object.assign({},Fz),{leaderLine:{name:"leaderLine",type:"rule"},stackLabel:{name:"stackLabel",type:"text"}}),cYt=(i,t)=>{if(!t.fields)return i;const e={};return{dimensionValues:e,dimensionData:Jrt(i.map(n=>n.latestData).flat(),t.fields,e)}};function Jrt(i,t,e){if(t.length===0)return i;const n=t[0],r=t.slice(1);e[n]=new Set;const s=hYt(i,n,e[n]);return r.length?dYt(s,(a,o)=>Jrt(a,r,e)):s}function hYt(i,t,e){const n={};return i.forEach(r=>{const s=r[t];n[s]||(n[s]=[],e.add(s)),n[s].push(r)}),n}function dYt(i,t){return Object.keys(i).reduce((e,n)=>(e[n]=t(i[n],n),e),{})}class fYt{get fields(){return this._fields}get groupData(){return this._groupData}constructor(t){this._fields=[],this._fields=t}initData(t,e){const n=t.name,r=new je(e instanceof lh?e:t.dataSet);r.name=n,r.parse([t],{type:"dataview"}),Vt(e,"dimensionTree",cYt),r.transform({type:"dimensionTree",options:{fields:this._fields}},!1),r.target.addListener("change",this.groupDataUpdate.bind(this)),this._groupData=r}groupDataUpdate(){}getGroupValueInField(t){var e,n,r;const s=(r=(n=(e=this.groupData)===null||e===void 0?void 0:e.latestData)===null||n===void 0?void 0:n.dimensionValues)===null||r===void 0?void 0:r[t];return s?Array.from(s):[]}}class tst extends kf{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(t){this._addMarkLabelSpec(t,"bar"),this._addMarkLabelSpec(t,"bar","stackLabel","initStackLabelMarkStyle")}}const XG={rect:KG,symbol:est,arc:qG,point:vYt,"line-data":gYt,stackLabel:ist,line:ZG,area:ZG,rect3d:KG,arc3d:qG,treemap:xYt,venn:SYt,boxPlot:kYt};function pYt(i,t){var e;const{labelSpec:n}=t;n.overlap&&!ee(n.overlap)&&(n.overlap={});const r=(e=XG[i])!==null&&e!==void 0?e:XG.point;return t.series.type===st.sankey?wYt(t):r(t)}function Vz(i,t,e,n){var r,s;const{labelMark:a,series:o}=i,l=o.getMeasureField()[0],u=a.getAttributesOfState(t);if("text"in u||(u.text=(r=u.text)!==null&&r!==void 0?r:t[l]),"textType"in u||(u.textType=(s=i.labelSpec.textType)!==null&&s!==void 0?s:"text"),u.data=t,o.type!==st.sankey){const{formatFunc:c,args:h}=Ju(e,n,u.text,t);c&&(u._originText=u.text,u.text=c(...h,{series:o}))}return u}function AT(i){return it(i)?t=>i(t.data):i}function est(i){var t,e,n;const{series:r,labelSpec:s}=i,a=r.direction==="horizontal"?"right":"top",o=(t=AT(s.position))!==null&&t!==void 0?t:a;let l;return l=s.overlap!==!1&&{strategy:(n=(e=s.overlap)===null||e===void 0?void 0:e.strategy)!==null&&n!==void 0?n:mYt(),avoidBaseMark:o!=="center"},{position:o,overlap:l}}function gYt(i){const t=est(i);return Vn(t.overlap)||(t.overlap.avoidBaseMark=!1,t.overlap.clampForce=!1),t}function mYt(){return[{type:"position",position:["top","bottom","right","left","top-right","top-left","bottom-left","bottom-right"]}]}function KG(i){var t,e,n,r,s,a;const{series:o,labelSpec:l={}}=i,u=(t=AT(l.position))!==null&&t!==void 0?t:"outside",c=(e=o.direction)!==null&&e!==void 0?e:"vertical",h=o.direction==="horizontal"?(n=o.getXAxisHelper())===null||n===void 0?void 0:n.isInverse():(r=o.getYAxisHelper())===null||r===void 0?void 0:r.isInverse();let d,f=u;f=g=>{var m;const{data:_}=g,v=(m=typeof l.position=="function"?l.position(_):l.position)!==null&&m!==void 0?m:"outside";if(v==="outside"){const y=o.getMeasureField()[0],b={vertical:["top","bottom"],horizontal:["right","left"]},x=_?.[y]>=0&&h||_?.[y]<0&&!h?1:0;return b[c][x]}return v},d=l.overlap!==!1&&{strategy:(a=(s=l.overlap)===null||s===void 0?void 0:s.strategy)!==null&&a!==void 0?a:_Yt(o)};let p=!1;return Ht(u)&&u.includes("inside")&&(p=!0),{position:f,overlap:d,smartInvert:p}}function _Yt(i){return[{type:"position",position:t=>{var e,n;const{data:r}=t,s=i.getMeasureField()[0];return(i.direction==="horizontal"?!((e=i.getXAxisHelper())===null||e===void 0)&&e.isInverse():!((n=i.getYAxisHelper())===null||n===void 0)&&n.isInverse())?r?.[s]>=0?i.direction==="horizontal"?["left","inside-left"]:["bottom","inside-bottom"]:i.direction==="horizontal"?["right","inside-right"]:["top","inside-top"]:r?.[s]>=0?i.direction==="horizontal"?["right","inside-right"]:["top","inside-top"]:i.direction==="horizontal"?["left","inside-left"]:["bottom","inside-bottom"]}}]}function vYt(i){const{labelSpec:t}=i;let e;return e=t.overlap!==!1&&{clampForce:!1,avoidBaseMark:!1},{position:"center",overlap:e}}function qG(i){var t;const{labelSpec:e}=i,n=(t=AT(e.position))!==null&&t!==void 0?t:"outside",r=n;let s;return s=e.smartInvert?e.smartInvert:Ht(n)&&n.includes("inside"),{position:r,smartInvert:s}}function yYt(i,t,e,n){return t.direction==="horizontal"?e==="middle"?.5*(t.totalPositionX(i,"end")+t.totalPositionY(i,"start")):e==="max"?t.totalPositionX(i,i.end>=i.start?"end":"start")+n:e==="min"?t.totalPositionX(i,i.end>=i.start?"start":"end")-n:t.totalPositionX(i,"end")+(i.end>=i.start?n:-n):t.totalPositionX(i,"index",.5)}function bYt(i,t,e,n){return t.direction==="horizontal"?t.totalPositionY(i,"index",.5):e==="middle"?.5*(t.totalPositionY(i,"end")+t.totalPositionY(i,"start")):e==="max"?t.totalPositionY(i,i.end>=i.start?"end":"start")-n:e==="min"?t.totalPositionY(i,i.end>=i.start?"start":"end")+n:t.totalPositionY(i,"end")+(i.end>=i.start?-n:n)}function ist(i,t,e){const n=i.series,r=i.labelSpec||{},s=n.getTotalData();return{customLayoutFunc:a=>a.map(o=>{const l=r.position||"withChange",u=r.offset||0,c=t?t(o.data):o.data,h=Vz(i,c,r.formatMethod);return h.x=yYt(c,n,l,u),h.y=bYt(c,n,l,u),n.direction==="horizontal"?h.textAlign=l==="middle"?"center":l==="withChange"&&c.end-c.start>=0||l==="max"?"left":"right":h.textBaseline=l==="middle"?l:l==="withChange"&&c.end-c.start>=0||l==="max"?"bottom":"top",e?.(o,c,h),Bb(Object.assign(Object.assign({},h),{id:o.id}))}),dataFilter:a=>{const o=[];return s.forEach(l=>{const u=a.find(c=>{var h;return l.index===((h=c.data)===null||h===void 0?void 0:h[n.getDimensionField()[0]])});u&&(u.data=l,o.push(u))}),o},overlap:{strategy:[]}}}function xYt(i){return{customLayoutFunc:(t,e)=>e,overlap:!1}}function SYt(i){return{customLayoutFunc:(t,e)=>e,smartInvert:!0}}function ZG(i){var t,e,n,r;const{labelSpec:s,series:a}=i,o=(n=(e=(t=a.getViewDataStatistics)===null||t===void 0?void 0:t.call(a).latestData)===null||e===void 0?void 0:e[a.getSeriesField()])===null||n===void 0?void 0:n.values,l=o?o.map((u,c)=>({[a.getSeriesField()]:u,index:c})):[{index:0,[gs]:a.getSeriesKeys()[0]}];return{position:(r=s.position)!==null&&r!==void 0?r:"end",data:l,overlap:{avoidBaseMark:!1,clampForce:!1}}}function wYt(i){var t,e,n;const{series:r,labelSpec:s={}}=i,a=(t=AT(s.position))!==null&&t!==void 0?t:"outside",o=r.direction;let l,u=a;return Ht(a)&&(o==="vertical"?u=a==="inside-start"?c=>"inside-left":a==="inside-middle"?c=>"center":a==="inside-end"?c=>"inside-right":c=>"bottom":a==="inside-start"?u=c=>"inside-left":a==="inside-middle"?u=c=>"center":a==="inside-end"?u=c=>"inside-right":a==="outside"&&(u=c=>"right")),l=s.overlap!==!1&&(!Ht(a)||!a.includes("inside"))&&{strategy:(n=(e=s.overlap)===null||e===void 0?void 0:e.strategy)!==null&&n!==void 0?n:AYt(r)},{position:u,overlap:l,smartInvert:!1,offset:0,syncState:!0}}function AYt(i){return[{type:"position",position:t=>i.direction==="horizontal"?["right","left"]:["bottom","top"]}]}function kYt(i){return{customLayoutFunc:(t,e,n)=>{for(let r=0;r<e.length;r++){const s=e[r],a=t[r];if(!s||!a)continue;const o=n(a),l=o.getSubGraphic().findIndex(u=>u.name==="median");if(l!==-1){const u=o.getSubGraphic()[l].AABBBounds;i.series.direction==="horizontal"?s.setAttributes({x:u.x2+s.AABBBounds.width()/2,y:(u.y1+u.y2)/2}):s.setAttributes({x:(u.x1+u.x2)/2,y:u.y2+s.AABBBounds.height()/2})}else{const u=o.AABBBounds;s.setAttributes({x:(u.x1+u.x2)/2,y:(u.y1+u.y2)/2})}}return e}}}const CYt={seriesFieldName:{total:"total",increase:"increase",decrease:"decrease"},leaderLine:{style:{stroke:"black",lineWidth:1,lineDash:[4,4]}},stackLabel:{visible:!0,offset:12,position:"withChange",style:{fill:"black",fontSize:{type:"token",key:"l4FontSize"}}},label:{visible:!1,offset:12,position:"inside",style:{lineWidth:2}}};class Wc extends ga{constructor(){super(...arguments),this.type=st.waterfall,this.transformerConstructor=tst,this._leaderLineMark=null,this._stackLabelMark=null,this._labelMark=null,this._reStackTotal=()=>{const t=this.getStackData(),e=this.getStackValueField();t&&fz(t,e)}}getTotalData(){var t;return(t=this._totalData)===null||t===void 0?void 0:t.getLatestData()}initGroups(){const t=this.getGroupFields();t&&t.length&&(this._groups=new fYt(t),this._data&&this._groups.initData(this._data.getDataView(),this._dataSet))}setAttrFromSpec(){super.setAttrFromSpec(),this.setValueFieldToStack(),this._fieldX=[this._fieldX[0]],this._fieldY=[this._fieldY[0]],N(this._seriesField)&&(this._seriesField=Mk)}getSeriesKeys(){return this._seriesField===Mk?[this._theme.seriesFieldName.increase,this._theme.seriesFieldName.decrease,this._theme.seriesFieldName.total]:super.getSeriesKeys()}initData(){var t,e,n;super.initData(),Vt(this._dataSet,"waterfallFillTotal",nYt),Vt(this._dataSet,"waterfall",ZGt),(N(this._spec.total)||this._spec.total.type==="end")&&((t=this._rawData)===null||t===void 0||t.transform({type:"waterfallFillTotal",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,total:this._spec.total,calculationMode:(e=this._spec.calculationMode)!==null&&e!==void 0?e:"increase",stackInverse:this.getRegion().getStackInverse()}},!1));const r=fL(this.getViewData(),this._dataSet,{name:`${zt}_series_${this.id}_totalData`});this.getViewData().target.removeListener("change",r.reRunAllTransform),this._totalData=new Cr(this._option,r),r.transform({type:"waterfall",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,startAs:ho,endAs:bs,total:this._spec.total,calculationMode:(n=this._spec.calculationMode)!==null&&n!==void 0?n:"increase",groupData:()=>this.getGroups().groupData,stackInverse:this.getRegion().getStackInverse()}},!1),r.target.addListener("change",this._reStackTotal)}compileData(){var t;super.compileData(),(t=this._totalData)===null||t===void 0||t.compile()}initAnimation(){var t,e,n,r;const s={yField:this.direction==="horizontal"?this._fieldY[0]:this.getStackValueField(),xField:this.direction==="horizontal"?this.getStackValueField():this._fieldX[0],direction:this.direction,growFrom:()=>{var l,u;return this.direction==="horizontal"?(l=this._xAxisHelper)===null||l===void 0?void 0:l.getScale(0).scale(0):(u=this._yAxisHelper)===null||u===void 0?void 0:u.getScale(0).scale(0)}},a=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset,o=Rh(this);this._barMark.setAnimationConfig(ye((n=z.getAnimationInKey("waterfall"))===null||n===void 0?void 0:n(s,a),Ce("bar",this._spec,this._markAttributeContext),o)),this._leaderLineMark&&this._leaderLineMark.setAnimationConfig(ye((r=z.getAnimationInKey("fadeInOut"))===null||r===void 0?void 0:r(),Ce("leaderLine",this._spec,this._markAttributeContext)))}viewDataUpdate(t){this._totalData.getDataView().reRunAllTransform(),this._totalData.updateData(),super.viewDataUpdate(t)}addViewDataFilter(t){}reFilterViewData(){}onEvaluateEnd(t){super.onEvaluateEnd(t),this._totalData.updateData()}initMark(){super.initMark();const t=this._createMark(Wc.mark.leaderLine,{key:"index"});t&&(this._leaderLineMark=t,t.setData(this._totalData))}initLabelMarkStyle(t){var e;if(t)return!this._labelMark&&(!((e=this._spec.label)===null||e===void 0)&&e.visible)?(super.initLabelMarkStyle(t),void(this._labelMark=t)):void 0}initStackLabelMarkStyle(t){t&&(this._stackLabelMark=t,t.skipEncode=!0,t.setRule("stackLabel"),t.setData(this._totalData),this.setMarkStyle(t,{text:e=>{var n;return((n=this._spec.stackLabel)===null||n===void 0?void 0:n.valueType)==="absolute"?e.end:Jy(e.end,e.start)}}))}initTotalLabelMarkStyle(t){this.setMarkStyle(t,{text:e=>{var n;return"end"in e?((n=this._spec.totalLabel)===null||n===void 0?void 0:n.valueType)==="absolute"?e.end:Jy(e.end,e.start):this.direction==="horizontal"?e[this._fieldX[0]]:e[this._fieldY[0]]}})}getTotalLabelComponentStyle(t){return ist(Object.assign(Object.assign({},t),{series:this,labelSpec:this._spec.totalLabel}),e=>{const n=this.direction==="vertical"?e[this._fieldX[0]]:e[this._fieldY[0]];return this._totalData.getLatestData().find(r=>r.index===n)})}totalPositionX(t,e,n=.5){const{dataToPosition:r,getBandwidth:s}=this._xAxisHelper;return this._direction==="horizontal"?He(r([t[e]],{bandPosition:this._bandPosition})):r([t[e]],{bandPosition:this._bandPosition})+.5*s(0)-this._barMark.getAttribute("width",t)*(.5-n)}totalPositionY(t,e,n=.5){const{dataToPosition:r,getBandwidth:s}=this._yAxisHelper;return this._direction==="horizontal"?r([t[e]],{bandPosition:this._bandPosition})+.5*s(0)-this._barMark.getAttribute("height",t)*(.5-n):He(r([t[e]],{bandPosition:this._bandPosition}))}initMarkStyle(){super.initMarkStyle();const t=this._spec.calculationMode==="decrease";this._leaderLineMark&&(this._direction==="horizontal"?this.setMarkStyle(this._leaderLineMark,{visible:e=>this.isVisibleLeaderLine(e),x:e=>this.totalPositionX(e,"lastEnd",0),x1:e=>this.totalPositionX(e,e.isTotal?"end":"start",0),y:e=>e.lastIndex?this.totalPositionY(e,"lastIndex",t?0:1):0,y1:e=>this.totalPositionY(e,"index",t?1:0)},"normal",ct.Series):this.setMarkStyle(this._leaderLineMark,{visible:e=>this.isVisibleLeaderLine(e),x:e=>e.lastIndex?this.totalPositionX(e,"lastIndex",t?0:1):0,x1:e=>this.totalPositionX(e,"index",t?1:0),y:e=>this.totalPositionY(e,"lastEnd",0),y1:e=>this.totalPositionY(e,e.isTotal?"end":"start",0)},"normal",ct.Series))}isVisibleLeaderLine(t){return!N(t.lastIndex)&&uz([t.lastEnd,t[t.isTotal?"end":"start"]],this.direction==="horizontal"?this._xAxisHelper.getScale(0):this._yAxisHelper.getScale(0))}}Wc.type=st.waterfall,Wc.mark=uYt,Wc.builtInTheme={waterfall:CYt},Wc.transformerConstructor=tst;const nst=()=>{Um(),ru(),oYt(),rl(),Mr(),mr(),z.registerSeries(Wc.type,Wc)},V0=`${zt}_BOX_PLOT_OUTLIER_VALUE`;var mi;(function(i){i.OUTLIER="outlier",i.MAX="max",i.MIN="min",i.MEDIAN="median",i.Q1="q1",i.Q3="q3",i.SERIES_FIELD="seriesField"})(mi||(mi={}));const MYt=(i,t)=>{const e=[],{outliersField:n,dimensionField:r,seriesField:s}=t;return(i[0].latestData||[]).forEach(a=>{let o=a[n];J(o)||(o=[o]),e.push(...o.map(l=>{const u={[V0]:l};return r.forEach(c=>{u[c]=a[c]}),L(s)&&(u[s]=a[s]),u}))}),e};class TYt extends pr{constructor(){super(...arguments),this.getContentKey=t=>e=>{if(this.isOutlierMark(e))return t===mi.OUTLIER?this.series.getOutliersField():t===mi.SERIES_FIELD?this.series.getSeriesField():null;switch(t){case mi.MIN:return this.series.getMinField();case mi.MAX:return this.series.getMaxField();case mi.MEDIAN:return this.series.getMedianField();case mi.Q1:return this.series.getQ1Field();case mi.Q3:return this.series.getQ3Field();case mi.SERIES_FIELD:return this.series.getSeriesField()}return null},this.getContentValue=t=>e=>{if(this.isOutlierMark(e))return t===mi.OUTLIER?e[V0]:t===mi.SERIES_FIELD?e[this.series.getSeriesField()]:null;switch(t){case mi.MIN:return e[this.series.getMinField()];case mi.MAX:return e[this.series.getMaxField()];case mi.MEDIAN:return e[this.series.getMedianField()];case mi.Q1:return e[this.series.getQ1Field()];case mi.Q3:return e[this.series.getQ3Field()];case mi.SERIES_FIELD:return e[this.series.getSeriesField()]}return null},this.shapeColorCallback=t=>this.series.getShaftShape()==="line"?this.series.getMarkInName("boxPlot").getAttribute("stroke",t):this.series.getMarkInName("boxPlot").getAttribute("fill",t),this.getOutlierFillColor=t=>{var e,n;const r=this.series.getOutliersStyle();return(e=r?.fill)!==null&&e!==void 0?e:(n=this.series.getMarkInName("outlier"))===null||n===void 0?void 0:n.getAttribute("fill",t)},this.isOutlierMark=t=>L(t[V0])}getDefaultContentList(t){return[{key:this.getContentKey(mi.OUTLIER),value:this.getContentValue(mi.OUTLIER),shapeType:this.shapeTypeCallback,shapeColor:this.getOutlierFillColor,shapeStroke:this.getOutlierFillColor},{key:this.getContentKey(mi.MAX),value:this.getContentValue(mi.MAX)},{key:this.getContentKey(mi.Q3),value:this.getContentValue(mi.Q3)},{key:this.getContentKey(mi.MEDIAN),value:this.getContentValue(mi.MEDIAN)},{key:this.getContentKey(mi.Q1),value:this.getContentValue(mi.Q1)},{key:this.getContentKey(mi.MIN),value:this.getContentValue(mi.MIN)},{key:this.getContentKey(mi.SERIES_FIELD),value:this.getContentValue(mi.SERIES_FIELD)}]}}class kT extends ns{constructor(){super(...arguments),this._setStateOfGraphic=t=>{t.clearStates(),t.stateProxy=null,t.context.diffState!==Kn.enter&&t.context.diffState!==Kn.update||(t.glyphStateProxy=(e,n)=>{var r;const s={attributes:Object.assign(Object.assign({},this._runEncoderOfGraphic((r=this._encoderOfState)===null||r===void 0?void 0:r[e],t)),t.runtimeStateCache?t.runtimeStateCache[e]:null)};return t.glyphStates?t.glyphStates[e]||(t.glyphStates[e]=s):t.glyphStates={[e]:s},s},t.useStates(t.context.states))}}getSubMarks(){return this._subMarks}setGlyphConfig(t){this._glyphConfig=t}getGlyphConfig(){return this._glyphConfig}getPositionChannels(){return this._positionChannels}_onGlyphAttributeUpdate(t){return e=>{var n,r;const s=this.getPositionChannels();let a=s&&this._positionEncoder&&Object.keys(e).some(o=>s.includes(o))?this._positionEncoder(e,(r=(n=t?.context)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r[0],t):null;return this._channelEncoder&&Object.keys(this._channelEncoder).forEach(o=>{if(o in e){const l=this._channelEncoder[o](e[o]);a=a?ot(a,l):l}}),a&&t.getSubGraphic().forEach(o=>{o&&a[o.name]&&o.setAttributes(a[o.name])}),e}}_createGraphic(t={}){const e=TF(t);e.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(e);const n=this._subMarks;if(n){const r=[];Object.keys(n).forEach(s=>{const a=z.createGraphicComponent(n[s].type,Object.assign({},n[s].defaultAttributes));a&&(r.push(a),a.name=s,a.onBeforeAttributeUpdate=o=>o)}),e.setSubGraphic(r)}return e.onBeforeAttributeUpdate(t),e}_runProgressiveEncoder(t){this._runEncoder(t)}}const CT=()=>{z.registerGraphicComponent("glyph",TF),as(),h3t()},PYt=["x","y","minMaxWidth","minMaxHeight","q1q3Width","q1q3Height","q1","q3","min","max","median","angle"],EYt=["x","y","boxWidth","boxHeight","ruleWidth","ruleHeight","q1","q3","min","max","median","angle"];class W0 extends kT{constructor(){super(...arguments),this.type=W0.type}_isHorizontal(){return this._glyphConfig&&this._glyphConfig.direction==="horizontal"}setGlyphConfig(t){super.setGlyphConfig(t),t.shaftShape==="bar"?(this._subMarks={minMaxBox:{type:"rect",defaultAttributes:{lineWidth:0}},q1q3Box:{type:"rect",defaultAttributes:{lineWidth:0}},median:{type:"line",defaultAttributes:{x:0,y:0}}},this._positionChannels=PYt,this._channelEncoder={minMaxFillOpacity:e=>({minMaxBox:{fillOpacity:e}}),lineWidth:e=>({minMaxBox:{lineWidth:0},q1q3Box:{lineWidth:0}}),stroke:e=>({minMaxBox:{stroke:!1},q1q3Box:{stroke:!1}})},this._positionEncoder=(e,n,r)=>{var s;const{x:a=r.attribute.x,y:o=r.attribute.y,minMaxWidth:l=r.attribute.minMaxWidth,minMaxHeight:u=r.attribute.minMaxHeight,q1q3Width:c=r.attribute.q1q3Width,q1q3Height:h=r.attribute.q1q3Height,q1:d=r.attribute.q1,q3:f=r.attribute.q3,min:p=r.attribute.min,max:g=r.attribute.max,median:m=r.attribute.median,angle:_}=e,v=this._isHorizontal(),y={};if(v?(y.minMaxBox={x:p,x1:g,y:o-u/2,y1:o+u/2},y.q1q3Box={x:d,x1:f,y:o-h/2,y1:o+h/2},y.median={points:[{x:m,y:o-h/2},{x:m,y:o+h/2}]}):(y.minMaxBox={y:p,y1:g,x:a-l/2,x1:a+l/2},y.q1q3Box={y:d,y1:f,x:a-c/2,x1:a+c/2},y.median={points:[{y:m,x:a-c/2},{y:m,x:a+c/2}]}),et(_)){const b=(s=e.anchor)!==null&&s!==void 0?s:v?[(p+g)/2,o]:[a,(p+g)/2];Object.keys(y).forEach(x=>{y[x].angle=_,y[x].anchor=b})}return y}):(this._subMarks={shaft:{type:"line",defaultAttributes:{x:0,y:0}},box:{type:"rect"},max:{type:"line",defaultAttributes:{x:0,y:0}},min:{type:"line",defaultAttributes:{x:0,y:0}},median:{type:"line",defaultAttributes:{x:0,y:0}}},this._positionChannels=EYt,this._channelEncoder={boxStroke:e=>({box:{stroke:e}}),medianStroke:e=>({median:{stroke:e}}),boxCornerRadius:e=>({box:{cornerRadius:e}})},this._positionEncoder=(e,n,r)=>{var s;const{x:a=r.attribute.x,y:o=r.attribute.y,boxWidth:l=r.attribute.boxWidth,boxHeight:u=r.attribute.boxHeight,ruleWidth:c=r.attribute.ruleWidth,ruleHeight:h=r.attribute.ruleHeight,q1:d=r.attribute.q1,q3:f=r.attribute.q3,min:p=r.attribute.min,max:g=r.attribute.max,median:m=r.attribute.median,angle:_}=e,v=this._isHorizontal(),y={};if(v?(y.box={x:d,x1:f,y:o-u/2,y1:o+u/2},y.median={points:[{x:m,y:o-u/2},{x:m,y:o+u/2}]},y.shaft={points:[{x:p,y:o},{x:g,y:o}]},y.max={points:[{x:g,y:o-h/2},{x:g,y:o+h/2}]},y.min={points:[{x:p,y:o-h/2},{x:p,y:o+h/2}]}):(y.box={x:a-l/2,x1:a+l/2,y:d,y1:f},y.median={points:[{x:a-l/2,y:m},{x:a+l/2,y:m}]},y.max={points:[{x:a-c/2,y:g},{x:a+c/2,y:g}]},y.min={points:[{x:a-c/2,y:p},{x:a+c/2,y:p}]},y.shaft={points:[{x:a,y:p},{x:a,y:g}]}),et(_)){const b=(s=e.anchor)!==null&&s!==void 0?s:v?[(p+g)/2,o]:[a,(p+g)/2];Object.keys(y).forEach(x=>{y[x].angle=_,y[x].anchor=b})}return y})}setDataLabelType(){return"symbol"}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:2,boxWidth:30,shaftWidth:20,shaftShape:"line"})}}W0.type="boxPlot";const RYt=()=>{CT(),Jl(),tu(),z.registerGraphicComponent("line",i=>Fb(i)),z.registerGraphicComponent("rect",i=>_f(i)),z.registerMark(W0.type,W0)},OYt=Object.assign(Object.assign({},Bi),{boxPlot:{name:"boxPlot",type:"boxPlot"},outlier:{name:"outlier",type:"symbol"}}),rst=i=>(t,e,n)=>{var r;const s=t.getFinalAttribute(),a=(r=s.direction)!==null&&r!==void 0?r:"vertical",o=i(t,a,e);if(!et(o))return{};const{x:l,y:u,min:c,max:h,q1:d,q3:f,median:p}=s,g={from:{x:l,y:u},to:{x:l,y:u}};return et(c)&&(g.from.min=o,g.to.min=c),et(h)&&(g.from.max=o,g.to.max=h),et(d)&&(g.from.q1=o,g.to.q1=d),et(f)&&(g.from.q3=o,g.to.q3=f),et(p)&&(g.from.median=o,g.to.median=p),g},sst=i=>(t,e,n)=>{var r;const s=t.getFinalAttribute(),a=(r=s.direction)!==null&&r!==void 0?r:"vertical",o=i(t,a,e);if(!et(o))return{};const{x:l,y:u,min:c,max:h,q1:d,q3:f,median:p}=s,g={from:{x:l,y:u},to:{x:l,y:u}};return et(c)&&(g.to.min=o,g.from.min=c),et(h)&&(g.to.max=o,g.from.max=h),et(d)&&(g.to.q1=o,g.from.q1=d),et(f)&&(g.to.q3=o,g.from.q3=f),et(p)&&(g.to.median=o,g.from.median=p),g},qn=(i,t)=>i.getSubGraphic().find(e=>e.name===t),ast=(i,t,e)=>{var n,r,s,a,o,l,u,c,h,d,f,p,g,m,_,v,y,b,x,S,w,A;if(e&&et(e.center))return e.center;let k,C,M,R,P;if(t==="horizontal"){k=(s=(r=((n=qn(i,"median"))===null||n===void 0?void 0:n.attribute).points)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.x,C=(u=(l=(o=(a=qn(i,"max"))===null||a===void 0?void 0:a.attribute)===null||o===void 0?void 0:o.points)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.x,M=(f=(d=(h=(c=qn(i,"min"))===null||c===void 0?void 0:c.attribute)===null||h===void 0?void 0:h.points)===null||d===void 0?void 0:d[0])===null||f===void 0?void 0:f.x;const O=qn(i,"box").attribute.width,T=qn(i,"box").attribute.x;R=T,P=T+O}else{k=(m=(g=((p=qn(i,"median"))===null||p===void 0?void 0:p.attribute).points)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.y,C=(b=(y=(v=(_=qn(i,"max"))===null||_===void 0?void 0:_.attribute)===null||v===void 0?void 0:v.points)===null||y===void 0?void 0:y[0])===null||b===void 0?void 0:b.y,M=(A=(w=(S=(x=qn(i,"min"))===null||x===void 0?void 0:x.attribute)===null||S===void 0?void 0:S.points)===null||w===void 0?void 0:w[0])===null||A===void 0?void 0:A.y;const O=qn(i,"box").attribute.height,T=qn(i,"box").attribute.y;R=T,P=T+O}return et(k)?k:et(R)&&et(P)?(R+P)/2:et(C)&&et(M)?(C+M)/2:et(M)?M:et(C)?C:NaN},ost=(i,t,e)=>{var n,r,s,a,o,l,u,c,h,d,f,p,g,m;if(et(e?.center))return e.center;let _,v,y,b,x;if(t==="horizontal"){_=(s=(r=((n=qn(i,"median"))===null||n===void 0?void 0:n.attribute).points)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.x;const S=((a=qn(i,"minMaxBox"))===null||a===void 0?void 0:a.attribute).width,w=(o=qn(i,"minMaxBox"))===null||o===void 0?void 0:o.attribute.x;y=w,v=w+S;const A=((l=qn(i,"q1q3Box"))===null||l===void 0?void 0:l.attribute).width,k=(u=qn(i,"q1q3Box"))===null||u===void 0?void 0:u.attribute.x;b=k,x=k+A}else{_=(d=(h=((c=qn(i,"median"))===null||c===void 0?void 0:c.attribute).points)===null||h===void 0?void 0:h[0])===null||d===void 0?void 0:d.y;const S=((f=qn(i,"minMaxBox"))===null||f===void 0?void 0:f.attribute).height,w=(p=qn(i,"minMaxBox"))===null||p===void 0?void 0:p.attribute.y;y=w,v=w+S;const A=((g=qn(i,"q1q3Box"))===null||g===void 0?void 0:g.attribute).height,k=(m=qn(i,"q1q3Box"))===null||m===void 0?void 0:m.attribute.y;b=k,x=k+A}return et(_)?_:et(b)&&et(x)?(b+x)/2:et(v)&&et(y)?(v+y)/2:et(y)?y:et(v)?v:NaN};class lst extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){super.onBind();const t=this.target.getFinalAttribute();t&&this.target.setAttributes(t);const{from:e,to:n}=this.computeAttribute();this.propKeys=Object.keys(n).filter(r=>n[r]!=null),this.animate.reSyncProps(),this.from=e,this.to=n,this.target.setAttributes(this.from)}computeAttribute(){return rst(ast)(this.target,this.params,this.params.options)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.setAttributes(r)}}class ust extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s)}onBind(){var t;!((t=this.params)===null||t===void 0)&&t.diffAttrs&&this.target.setAttributes(this.params.diffAttrs);const{from:e,to:n}=this.computeAttribute();this.propKeys=Object.keys(n).filter(r=>n[r]!=null),this.animate.reSyncProps(),this.from=e,this.to=n,this.target.setAttributes(this.from)}computeAttribute(){return sst(ast)(this.target,this.params,this.params.options)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.setAttributes(r)}}class DYt extends lst{computeAttribute(){return rst(ost)(this.target,this.params,this.params.options)}}class IYt extends ust{computeAttribute(){return sst(ost)(this.target,this.params,this.params.options)}}const LYt=()=>{se.registerBuiltInAnimate("boxplotScaleIn",lst),se.registerBuiltInAnimate("boxplotScaleOut",ust),se.registerBuiltInAnimate("barBoxplotScaleIn",DYt),se.registerBuiltInAnimate("barBoxplotScaleOut",IYt)},BYt={boxPlot:{style:{lineWidth:1}},label:{style:{lineWidth:2}}};class cst extends gr{_transformLabelSpec(t){this._addMarkLabelSpec(t,"boxPlot")}}class Ou extends _o{constructor(){super(...arguments),this.type=st.boxPlot,this.transformerConstructor=cst,this._bandPosition=0}getMinField(){return this._minField}getMaxField(){return this._maxField}getQ1Field(){return this._q1Field}getMedianField(){return this._medianField}getQ3Field(){return this._q3Field}getOutliersField(){return this._outliersField}getShaftShape(){return this._shaftShape}getBoxFillColor(){return this._boxFillColor}getStrokeColor(){return this._strokeColor}getOutliersStyle(){return this._outliersStyle}setAttrFromSpec(){var t,e,n,r,s,a,o;super.setAttrFromSpec();const l=(e=(t=this._spec.boxPlot)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{};this._minField=this._spec.minField,this._maxField=this._spec.maxField,this._q1Field=this._spec.q1Field,this._medianField=this._spec.medianField,this._q3Field=this._spec.q3Field,this._outliersField=this._spec.outliersField,this._lineWidth=(n=l.lineWidth)!==null&&n!==void 0?n:2,this._boxWidth=l.boxWidth,this._shaftShape=(r=l.shaftShape)!==null&&r!==void 0?r:"line",this._shaftWidth=l.shaftWidth,this._boxFillColor=l.boxFill,this._strokeColor=l.stroke,this._shaftFillOpacity=this._shaftShape==="bar"?(s=l.shaftFillOpacity)!==null&&s!==void 0?s:.5:void 0,this._outliersStyle=(a=this._spec.outliersStyle)!==null&&a!==void 0?a:(o=this._spec.outlier)===null||o===void 0?void 0:o.style}initMark(){this._boxPlotMark=this._createMark(Ou.mark.boxPlot,{groupKey:this._seriesField,isSeriesMark:!0}),this._outliersField&&(this._outlierMark=this._createMark(Ou.mark.outlier,{key:hr,groupKey:this._seriesField}),this._outlierMark.setData(this._outlierData))}initMarkStyle(){var t,e,n,r,s,a;const o=this._boxPlotMark;if(o){const u={lineWidth:this._lineWidth,fill:(t=this._boxFillColor)!==null&&t!==void 0?t:this._shaftShape!=="line"?this.getColorAttribute():"#FFF",minMaxFillOpacity:this._shaftFillOpacity,stroke:(e=this._strokeColor)!==null&&e!==void 0?e:this._shaftShape!=="line"?"#000":this.getColorAttribute()};o.setGlyphConfig({direction:this._direction,shaftShape:this._shaftShape});const c=this._direction==="horizontal"?{y:h=>this._getPosition(this.direction,h),boxHeight:()=>{var h;return or((h=this._boxWidth)!==null&&h!==void 0?h:"100%",this._getMarkWidth())},ruleHeight:()=>{var h;return or((h=this._shaftWidth)!==null&&h!==void 0?h:"100%",this._getMarkWidth())},q1q3Height:()=>{var h;return or((h=this._boxWidth)!==null&&h!==void 0?h:"100%",this._getMarkWidth())},minMaxHeight:()=>{var h;return or((h=this._shaftWidth)!==null&&h!==void 0?h:"100%",this._getMarkWidth())}}:{x:h=>this._getPosition(this.direction,h),boxWidth:()=>{var h;return or((h=this._boxWidth)!==null&&h!==void 0?h:"100%",this._getMarkWidth())},ruleWidth:()=>{var h;return or((h=this._shaftWidth)!==null&&h!==void 0?h:"100%",this._getMarkWidth())},q1q3Width:()=>{var h;return or((h=this._boxWidth)!==null&&h!==void 0?h:"100%",this._getMarkWidth())},minMaxWidth:()=>{var h;return or((h=this._shaftWidth)!==null&&h!==void 0?h:"100%",this._getMarkWidth())}};this.setMarkStyle(o,u,bt.STATE_NORMAL,ct.Series),this.setMarkStyle(o,c,bt.STATE_NORMAL,ct.Built_In)}const l=this._outlierMark;l&&this.setMarkStyle(l,{fill:(s=(r=(n=this._outliersStyle)===null||n===void 0?void 0:n.fill)!==null&&r!==void 0?r:this._boxFillColor)!==null&&s!==void 0?s:this.getColorAttribute(),stroke:this.getColorAttribute(),size:yt((a=this._outliersStyle)===null||a===void 0?void 0:a.size)?this._outliersStyle.size:10},bt.STATE_NORMAL,ct.Series)}initBoxPlotMarkStyle(){var t,e;const n=this._boxPlotMark,r=this._direction==="horizontal"?this._xAxisHelper:this._yAxisHelper;if(n&&r){const{dataToPosition:a}=r,o=(t=r?.getScale)===null||t===void 0?void 0:t.call(r,0);this.setMarkStyle(n,{min:l=>He(a(this.getDatumPositionValues(l,this._minField),{bandPosition:this._bandPosition}),o),q1:l=>He(a(this.getDatumPositionValues(l,this._q1Field),{bandPosition:this._bandPosition}),o),median:l=>He(a(this.getDatumPositionValues(l,this._medianField),{bandPosition:this._bandPosition}),o),q3:l=>He(a(this.getDatumPositionValues(l,this._q3Field),{bandPosition:this._bandPosition}),o),max:l=>He(a(this.getDatumPositionValues(l,this._maxField),{bandPosition:this._bandPosition}),o)},bt.STATE_NORMAL,ct.Series)}const s=this._outlierMark;if(s&&r){const{dataToPosition:a}=r,o=(e=r?.getScale)===null||e===void 0?void 0:e.call(r,0),l=this._direction==="horizontal"?{y:u=>this._getPosition(this.direction,u),x:u=>He(a(this.getDatumPositionValues(u,V0),{bandPosition:this._bandPosition}),o)}:{x:u=>this._getPosition(this.direction,u),y:u=>He(a(this.getDatumPositionValues(u,V0),{bandPosition:this._bandPosition}),o)};this.setMarkStyle(s,l,bt.STATE_NORMAL,ct.Series)}}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>e[this.getMedianField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}initData(){if(super.initData(),!this._data)return;Vt(this._dataSet,"foldOutlierData",MYt),Vt(this._dataSet,"addVChartProperty",Vm);const t=new je(this._dataSet,{name:`${this.type}_outlier_${this.id}_data`});t.parse([this.getViewData()],{type:"dataview"}),t.name=`${zt}_series_${this.id}_outlierData`,t.transform({type:"foldOutlierData",options:{dimensionField:this._direction==="horizontal"?this._fieldY:this._fieldX,outliersField:this._outliersField,seriesField:this._seriesField}}),t.transform({type:"addVChartProperty",options:{beforeCall:om.bind(this),call:rf}},!1),this._outlierData=new Cr(this._option,t)}compileData(){var t;super.compileData(),(t=this._outlierData)===null||t===void 0||t.compile()}viewDataUpdate(t){var e;super.viewDataUpdate(t),(e=this._outlierData)===null||e===void 0||e.updateData()}init(t){super.init(t),this.initBoxPlotMarkStyle()}_getMarkWidth(){var t;if(this._autoBoxWidth)return this._autoBoxWidth;const e=this._direction==="horizontal"?this._yAxisHelper:this._xAxisHelper,n=this._groups?this._groups.fields.length:1,r=(t=e.getBandwidth)===null||t===void 0?void 0:t.call(e,n-1);let s=r;return L(this._spec.boxWidth)&&(s=or(this._spec.boxWidth,r)),L(this._spec.boxMinWidth)&&(s=Math.max(s,or(this._spec.boxMinWidth,r))),L(this._spec.boxMaxWidth)&&(s=Math.min(s,or(this._spec.boxMaxWidth,r))),this._autoBoxWidth=s,this._autoBoxWidth}_getPosition(t,e){var n,r,s,a;let o,l,u;t==="horizontal"?(o=this.getYAxisHelper(),l="boxHeight",u=this.dataToPositionY.bind(this)):(o=this.getXAxisHelper(),l="boxWidth",u=this.dataToPositionX.bind(this));const c=o.getScale(0),h=this._groups?this._groups.fields.length:1,d=(n=o.getBandwidth)===null||n===void 0?void 0:n.call(o,h-1),f=this._boxPlotMark.getAttribute(l,e);if(h>1&&L(this._spec.boxGapInGroup)){const g=this._groups.fields,m=X(this._spec.boxGapInGroup);let _=0,v=0;for(let y=g.length-1;y>=1;y--){const b=g[y],x=(s=(r=o.getScale(y))===null||r===void 0?void 0:r.domain())!==null&&s!==void 0?s:[],S=x.length,w=or((a=m[y-1])!==null&&a!==void 0?a:ke(m),d),A=x.indexOf(e[b]);y===g.length-1?(_+=S*f+(S-1)*w,v+=A*(f+w)):(v+=A*(_+w),_+=_+(S-1)*w)}return c.scale(e[g[0]])+o.getBandwidth(0)/2-_/2+v+f/2}const p=Ge(c.type||"band");return u(e)+.5*d+(p?-d/2:0)}onLayoutEnd(){super.onLayoutEnd(),this._autoBoxWidth=null}_initAnimationSpec(t={}){const e=ot({},t);return["appear","enter","update","exit","disappear"].forEach(n=>{e[n]&&e[n].type==="scaleIn"?e[n].type=this._shaftShape==="bar"?"barBoxplotScaleIn":"boxplotScaleIn":e[n]&&e[n].type==="scaleOut"&&(e[n].type=this._shaftShape==="bar"?"barBoxplotScaleOut":"boxplotScaleOut")}),e}initAnimation(){var t,e,n,r,s,a,o;const l=Rh(this);if(this._boxPlotMark){const u=this._initAnimationSpec((t=z.getAnimationInKey("scaleInOut"))===null||t===void 0?void 0:t()),c=this._initAnimationSpec(Ce("boxPlot",this._spec,this._markAttributeContext));this._boxPlotMark.setAnimationConfig(ye(u,c,l))}if(this._outlierMark){const u={appear:(e=this._spec.animationAppear)===null||e===void 0?void 0:e.symbol,disappear:(n=this._spec.animationDisappear)===null||n===void 0?void 0:n.symbol,enter:(r=this._spec.animationEnter)===null||r===void 0?void 0:r.symbol,exit:(s=this._spec.animationExit)===null||s===void 0?void 0:s.symbol,update:(a=this._spec.animationUpdate)===null||a===void 0?void 0:a.symbol};this._outlierMark.setAnimationConfig(ye((o=z.getAnimationInKey("scaleInOut"))===null||o===void 0?void 0:o(),u,l))}}initTooltip(){this._tooltipHelper=new TYt(this),this._boxPlotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._boxPlotMark),this._outlierMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._outlierMark)}getStatisticFields(){const t=super.getStatisticFields(),e=t.find(n=>n.key===this._outliersField);return e&&(e.operations=["array-min","array-max"]),t}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._boxPlotMark]}}Ou.type=st.boxPlot,Ou.builtInTheme={boxPlot:BYt},Ou.mark=OYt,Ou.transformerConstructor=cst;const hst=()=>{RYt(),cc(),uT(),Mr(),mr(),LYt(),z.registerSeries(Ou.type,Ou)};class hm extends ns{getTextType(){return this._textType}constructor(t,e){super(t,e),this.type=hm.type,this._textType="text"}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{angle:0,textAlign:"center",lineWidth:0,textConfig:[]})}initStyleWithSpec(t){super.initStyleWithSpec(t),t.textType&&(this._textType=t.textType)}_transformGraphicAttributes(t,e,n){const r=super._transformGraphicAttributes(t,e,n),{text:s}=r;return ee(s)&&L(s.text)&&(this._textType==="rich"||s.type==="rich")&&(r.textConfig=s.text),r}_createGraphic(t={}){const{text:e}=t;return this._textType==="rich"||e?.type==="rich"?EF(t):Bb(t)}}hm.type="text";const Ps=()=>{z.registerMark(hm.type,hm),as(),eu(),yf(),z.registerGraphicComponent("text",Bb),z.registerGraphicComponent("richtext",EF)};function FYt(i,t,e,n,r,s,a,o,l){i.setMarkStyle(t,{textAlign:u=>{if(l()==="vertical")return"center";const c=r(u),h=s(u);if(e==="middle")return"center";if(c>=h){if(e==="start")return"left";if(e==="end")return"right";if(e==="outside")return"left"}else{if(e==="start")return"right";if(e==="end")return"left";if(e==="outside")return"right"}return"center"},textBaseline:u=>{if(l()==="horizontal")return"middle";const c=a(u),h=o(u);if(e==="middle")return"middle";if(h>=c){if(e==="start")return"bottom";if(e==="end")return"top";if(e==="outside")return"bottom"}else{if(e==="start")return"top";if(e==="end")return"bottom";if(e==="outside")return"top"}return"middle"}}),i.setMarkStyle(t,{x:u=>{const c=l(),h=r(u),d=s(u);if(c==="vertical"||e==="middle")return(h+d)/2;if(h>=d){if(e==="start")return d+n;if(e==="end")return h-n;if(e==="outside")return h+n}else{if(e==="start")return d-n;if(e==="end")return h+n;if(e==="outside")return h-n}return(h+d)/2},y:u=>{const c=l(),h=a(u),d=o(u);if(c==="horizontal"||e==="middle")return(h+d)/2;if(h>=d){if(e==="start")return d+n;if(e==="end")return h-n;if(e==="outside")return h+n}else{if(e==="start")return d-n;if(e==="end")return h+n;if(e==="outside")return h-n}return(h+d)/2}},"normal",ct.Series)}class zYt extends pr{constructor(){super(...arguments),this._getMeasureData=t=>this.series.getSpec().direction==="horizontal"?t[this.series.getSpec().xField[0]]+"-"+t[this.series.getSpec().xField[1]]:t[this.series.getSpec().yField[0]]+"-"+t[this.series.getSpec().yField[1]]}}const dst=i=>({type:"growCenterIn",options:{direction:i.direction==="horizontal"?"x":"y"}}),NYt={type:"fadeIn"},QG=i=>({type:"growCenterOut",options:{direction:i.direction==="horizontal"?"x":"y"}});function jYt(i,t){return t==="fadeIn"?NYt:dst(i)}const HYt=()=>{z.registerAnimation("rangeColumn",(i,t)=>({appear:jYt(i,t),enter:dst(i),exit:QG(i),disappear:QG(i)}))},VYt=Object.assign(Object.assign({},Fz),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}});class fst extends kf{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(t){var e;((e=t.label)===null||e===void 0?void 0:e.position)!=="bothEnd"&&this._addMarkLabelSpec(t,"bar")}}const WYt={label:{visible:!1,offset:5,position:"inside",style:{lineWidth:2,fill:{type:"palette",key:"axisMarkerFontColor"}},minLabel:{position:"end"},maxLabel:{position:"start"}}};class Qa extends ga{constructor(){super(...arguments),this.type=st.rangeColumn,this._barMarkType="rect",this._barName=st.bar,this.transformerConstructor=fst}initMark(){var t,e,n,r,s,a,o,l;this._initBarBackgroundMark();const u=(t=this._spec.label)===null||t===void 0?void 0:t.position;this._barMark=this._createMark(Qa.mark.bar,{groupKey:this._seriesField,isSeriesMark:!0},{morph:fo(this._spec,Qa.mark.bar.name),morphElementKey:this.getDimensionField()[0]}),((e=this._spec.label)===null||e===void 0?void 0:e.visible)!==!1&&u==="bothEnd"&&(((r=(n=this._spec.label)===null||n===void 0?void 0:n.minLabel)===null||r===void 0?void 0:r.visible)!==!1&&(this._minLabelMark=this._createMark(Qa.mark.minLabel,{markSpec:(s=this._spec.label)===null||s===void 0?void 0:s.minLabel})),((o=(a=this._spec.label)===null||a===void 0?void 0:a.maxLabel)===null||o===void 0?void 0:o.visible)!==!1&&(this._maxLabelMark=this._createMark(Qa.mark.maxLabel,{markSpec:(l=this._spec.label)===null||l===void 0?void 0:l.maxLabel})))}initMarkStyle(){var t,e;super.initMarkStyle(),this._initLabelMarkPos(this._minLabelMark,(t=this._spec.label)===null||t===void 0?void 0:t.minLabel,0,"end"),this._initLabelMarkPos(this._maxLabelMark,(e=this._spec.label)===null||e===void 0?void 0:e.maxLabel,1,"start")}_initLabelMarkPos(t,e,n,r){var s,a,o,l;if(t){this.setMarkStyle(t,{fill:(a=(s=e?.style)===null||s===void 0?void 0:s.fill)!==null&&a!==void 0?a:this.getColorAttribute(),text:h=>{const d=this._spec.direction==="horizontal"?h[this._spec.xField[n]]:h[this._spec.yField[n]];return e?.formatMethod?e.formatMethod(d,h):d}});const u=(o=e?.position)!==null&&o!==void 0?o:r,c=(l=e?.offset)!==null&&l!==void 0?l:this._direction==="vertical"?-20:-25;FYt(this,t,u,c,h=>this._barMark.getAttribute("x",h),h=>this._direction==="vertical"?this._barMark.getAttribute("x",h)+this._barMark.getAttribute("width",h):this._barMark.getAttribute("x1",h),h=>this._barMark.getAttribute("y",h),h=>this._direction==="vertical"?this._barMark.getAttribute("y1",h):this._barMark.getAttribute("y",h)+this._barMark.getAttribute("height",h),()=>this._direction)}}initLabelMarkStyle(t){t&&(this.setMarkStyle(t,{text:e=>{let n,r;return this._spec.direction==="horizontal"?(n=e[this._spec.xField[0]],r=e[this._spec.xField[1]]):(n=e[this._spec.yField[0]],r=e[this._spec.yField[1]]),n+"-"+r},z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._labelMark=t)}_dataToPosX(t){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.xField[0]),{bandPosition:this._bandPosition})}_dataToPosX1(t){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.xField[1]),{bandPosition:this._bandPosition})}_dataToPosY(t){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.yField[0]),{bandPosition:this._bandPosition})}_dataToPosY1(t){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.yField[1]),{bandPosition:this._bandPosition})}initAnimation(){var t,e,n,r,s;const a=Rh(this),o=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._barMark.setAnimationConfig(ye((n=z.getAnimationInKey("rangeColumn"))===null||n===void 0?void 0:n({direction:this.direction},o),Ce("bar",this._spec,this._markAttributeContext),a)),this._minLabelMark&&this._minLabelMark.setAnimationConfig(ye((r=z.getAnimationInKey("fadeInOut"))===null||r===void 0?void 0:r(),Ce("label",this._spec,this._markAttributeContext),a)),this._maxLabelMark&&this._maxLabelMark.setAnimationConfig(ye((s=z.getAnimationInKey("fadeInOut"))===null||s===void 0?void 0:s(),Ce("label",this._spec,this._markAttributeContext),a))}initTooltip(){this._tooltipHelper=new zYt(this),this._barMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._barMark),this._minLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._minLabelMark),this._maxLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._maxLabelMark),this._labelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._labelMark)}}Qa.type=st.rangeColumn,Qa.mark=VYt,Qa.builtInTheme={rangeColumn:WYt},Qa.transformerConstructor=fst;const pst=()=>{ru(),Ps(),HYt(),rl(),Mr(),mr(),z.registerSeries(Qa.type,Qa)};class $Yt extends pr{constructor(){super(...arguments),this._getMeasureData=t=>this.series.getSpec().direction==="horizontal"?t[this.series.getSpec().xField[0]]+"-"+t[this.series.getSpec().xField[1]]:t[this.series.getSpec().yField[0]]+"-"+t[this.series.getSpec().yField[1]]}}const UYt=Object.assign({},jrt);class dm extends Tl{constructor(){super(...arguments),this.type=st.rangeArea}initMark(){this._areaMark=this._createMark(dm.mark.area,{groupKey:this._seriesField,isSeriesMark:!0},{morphElementKey:this.getDimensionField()[0]})}initMarkStyle(){this.initAreaMarkStyle()}initAreaMarkStyle(){const t=this._areaMark;t&&(super.initAreaMarkStyle(),this._direction==="horizontal"?this.setMarkStyle(this._areaMark,{x1:e=>{if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:n}=this._xAxisHelper;return n(this.getDatumPositionValues(e,this._spec.xField[1]),{bandPosition:this._bandPosition})}},"normal",ct.Series):this.setMarkStyle(this._areaMark,{y1:e=>{if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:n}=this._yAxisHelper;return n(this.getDatumPositionValues(e,this._spec.yField[1]),{bandPosition:this._bandPosition})}},"normal",ct.Series),this.setMarkStyle(t,{stroke:!1},"normal",ct.Series))}initTooltip(){this._tooltipHelper=new $Yt(this)}_isFieldAllValid(){const t=this.getViewDataStatistics(),e=this.fieldY;return!!(t&&t.latestData&&e.length)&&e.every(n=>t.latestData[n]&&t.latestData[n].allValid)}}dm.type=st.rangeArea,dm.mark=UYt;const gst=()=>{yT(),Mr(),mr(),z.registerSeries(dm.type,dm)};class ex extends tc{constructor(){super(...arguments),this.coordinate="polar",this._outerRadius=wk,this._innerRadius=0,this._angleField=[],this._radiusField=[],this._sortDataByAxis=!1}get outerRadius(){return this._outerRadius}get innerRadius(){return this._innerRadius}getAngleField(){return this._angleField}setAngleField(t){return this._angleField=L(t)?X(t):[],this._angleField}getRadiusField(){return this._radiusField}setRadiusField(t){return this._radiusField=L(t)?X(t):[],this._radiusField}get innerRadiusField(){return this._innerRadiusField}setInnerRadiusField(t){return this._innerRadiusField=X(t),this._innerRadiusField}get radiusScale(){return this._radiusScale}setRadiusScale(t){return this._radiusScale=t,t}get angleScale(){return this._angleScale}setAngleScale(t){return this._angleScale=t,t}get angleAxisHelper(){return this._angleAxisHelper}set angleAxisHelper(t){this._angleAxisHelper=t,this.onAngleAxisHelperUpdate()}get radiusAxisHelper(){return this._radiusAxisHelper}set radiusAxisHelper(t){this._radiusAxisHelper=t,this.onRadiusAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getCenter=()=>this.angleAxisHelper.center(),this._markAttributeContext.getLayoutRadius=()=>this._computeLayoutRadius()}valueToPosition(t,e){if(N(t)||N(e)||!this.angleAxisHelper||!this.radiusAxisHelper)return{x:Number.NaN,y:Number.NaN};const n=this.radiusAxisHelper.dataToPosition(X(e));if(n<0){if(this._invalidType==="break"||this._invalidType==="link")return{x:Number.NaN,y:Number.NaN};if(this._invalidType==="zero")return this.angleAxisHelper.center()}const r=this.angleAxisHelper.dataToPosition(X(t));return this.angleAxisHelper.coordToPoint({angle:r,radius:n})}dataToPosition(t,e){return t&&this.angleAxisHelper&&this.radiusAxisHelper?e&&!this.isDatumInViewData(t)?null:this.valueToPosition(this.getDatumPositionValues(t,this._angleField),this.getDatumPositionValues(t,this._radiusField)):null}dataToPositionX(t){var e;return(e=this.dataToPosition(t))===null||e===void 0?void 0:e.x}dataToPositionY(t){var e;return(e=this.dataToPosition(t))===null||e===void 0?void 0:e.y}dataToPositionZ(t){return 0}positionToData(t){}radiusToData(t){}angleToData(t){}getStatisticFields(){var t,e;const n=[];return!((t=this.radiusAxisHelper)===null||t===void 0)&&t.getScale&&this._radiusField.forEach(r=>{const s={key:r,operations:[]};Ge(this.radiusAxisHelper.getScale(0).type)?s.operations=["max","min"]:s.operations=["values"],n.push(s)}),!((e=this.angleAxisHelper)===null||e===void 0)&&e.getScale&&this._angleField.forEach(r=>{const s={key:r,operations:[]};Ge(this.angleAxisHelper.getScale(0).type)?s.operations=["max","min"]:s.operations=["values"],n.push(s)}),n}setAttrFromSpec(){super.setAttrFromSpec(),L(this._spec.outerRadius)&&(this._outerRadius=this._spec.outerRadius),L(this._spec.radius)&&(this._outerRadius=this._spec.radius),L(this._spec.innerRadius)&&(this._innerRadius=this._spec.innerRadius),L(this._spec.sortDataByAxis)&&(this._sortDataByAxis=this._spec.sortDataByAxis===!0)}onRadiusAxisHelperUpdate(){this.onMarkPositionUpdate()}onAngleAxisHelperUpdate(){this.onMarkPositionUpdate()}afterInitMark(){super.afterInitMark()}_computeLayoutRadius(){const t=this._angleAxisHelper||this._radiusAxisHelper;if(t)return t.layoutRadius();const{width:e,height:n}=this._region.getLayoutRect();return Math.min(e/2,n/2)}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(Tt.scaleDomainUpdate,{filter:t=>{var e;return t.model.id===((e=this._angleAxisHelper)===null||e===void 0?void 0:e.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var t,e;!((e=(t=this.getViewData())===null||t===void 0?void 0:t.latestData)===null||e===void 0)&&e.length&&yrt(this.angleAxisHelper,this._angleField[0],this.getViewData().latestData)}getInvalidCheckFields(){const t=[];return this.angleAxisHelper.isContinuous&&this._angleField.forEach(e=>{t.push(e)}),this.radiusAxisHelper.isContinuous&&this._radiusField.forEach(e=>{t.push(e)}),t}}function Tk(i){return Qg(i)?Number.parseFloat(i):0}const GYt=(i,t)=>{const{asStartAngle:e,asEndAngle:n,asMiddleAngle:r,asRadian:s,asRatio:a,asQuadrant:o,asK:l,showAllZero:u,supportNegative:c,showEmptyCircle:h}=t,d=t.angleField(),f=t.startAngle(),p=t.endAngle(),g=t.minAngle(),m=i.map(M=>Object.assign({},M));if(!m||m.length===0)return m;if(!u&&h&&YYt(m,d,c))return[];const _=(M,R,P)=>{M[e]=R,M[n]=R+P,M[r]=R+P/2,M[s]=P,M[o]=gJ(R+P/2)};let v=0,y=-1/0,b=!0;for(let M=0;M<m.length;M++){const R=c?Math.abs(Tk(m[M][d])):Tk(m[M][d]);v+=R,y=Math.max(R,y),b&&R!==0&&(b=!1),m[M][JE]=R}const x=m.map(M=>Number(M[d])),S=p-f;let w=f,A=S,k=0;const C=p5t(x);if(m.forEach((M,R)=>{const P=M[JE],O=v?P/v:0;let T=O*S;T<g?(T=g,A-=g):k+=P;const D=w,B=w+T;M[a]=O,M[l]=y?P/y:0,M._percent_=C[R],_(M,D,T),w=B}),A<S)if(A<=.001){const M=S/m.length;m.forEach((R,P)=>{_(R,f+P*M,M)})}else{const M=A/k;w=f,m.forEach(R=>{const P=R[s]===g?g:R[JE]*M;_(R,w,P),w+=P})}if(v!==0&&(m[m.length-1][n]=p),b&&u){const M=S/m.length;m.forEach((R,P)=>{_(R,f+P*M,M)})}return m},YYt=(i,t,e)=>!!N(i)||i.length===0||!!i.every(n=>Tk(n[t])===0)||!e&&i.reduce((n,r)=>n+Tk(r[t]),0)===0;function MT(i,t,e){return(n,r,s)=>t?i.growField==="radius"?{overall:0}:{overall:i.growFrom(n,r,e)}:{overall:!1}}const JG=i=>({type:i.growField==="radius"?"growRadiusIn":"growAngleIn",options:MT(i,!0,ui.appear)}),XYt={type:"fadeIn"},mst=i=>({type:i.growField==="radius"?"growRadiusIn":"growAngleIn",easing:"linear",options:MT(i,!0,ui.enter)}),_st=i=>({type:i.growField==="radius"?"growRadiusOut":"growAngleOut",easing:"linear",options:MT(i,!0,ui.exit)}),vst=i=>({type:i.growField==="radius"?"growRadiusOut":"growAngleOut",options:MT(i,!0,ui.exit)});function Wz(i,t){if(t===!1)return{};switch(t){case"fadeIn":return XYt;case"growRadius":return JG(Object.assign(Object.assign({},i),{growField:"radius"}));default:return JG(Object.assign(Object.assign({},i),{growField:"angle"}))}}const KYt=()=>{z.registerAnimation("pie",(i,t)=>({appear:Wz(i,t),enter:mst(i),exit:_st(i),disappear:vst(i)}))},qYt=()=>{z.registerAnimation("emptyCircle",(i,t)=>({appear:Wz(i,t)}))};function ZYt(i,t){var e,n,r,s;const a=(n=(e=t.options)===null||e===void 0?void 0:e.distance)!==null&&n!==void 0?n:10,o=et(t.duration)?t.duration/2:1e3,l=(r=t.options.easing)!==null&&r!==void 0?r:"cubicOut";return{oneByOne:t.oneByOne,loop:(s=t.loop)!==null&&s!==void 0&&s,timeSlices:[{duration:o,effects:{easing:l,channel:{x:{from:u=>i.getAttribute("x",u),to:u=>i.getAttribute("x",u)+yi({x:0,y:0},a,u[Nc]).x},y:{from:u=>i.getAttribute("y",u),to:u=>i.getAttribute("y",u)+yi({x:0,y:0},a,u[Nc]).y}}}},{duration:o,effects:{easing:l,channel:{x:{to:u=>i.getAttribute("x",u),from:u=>i.getAttribute("x",u)+yi({x:0,y:0},a,u[Nc]).x},y:{to:u=>i.getAttribute("y",u),from:u=>i.getAttribute("y",u)+yi({x:0,y:0},a,u[Nc]).y}}}}]}}class yst extends ns{constructor(t,e){super(t,e),this.type=fm.type,this._unCompileChannel={centerOffset:!0,radiusOffset:!0},this.computeOuterRadius=(n,r,s="normal",a)=>{var o;return a+((o=this.getAttribute("radiusOffset",r,s))!==null&&o!==void 0?o:0)},this.computeCenter=(n,r,s="normal",a)=>yi({x:0,y:0},this.getAttribute("centerOffset",r,s),r[Nc])[n]+a,this._computeExChannel.x=this.computeCenter,this._computeExChannel.y=this.computeCenter,this._computeExChannel.outerRadius=this.computeOuterRadius,this._extensionChannel.centerOffset=["x","y"],this._extensionChannel.radiusOffset=["outerRadius"]}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{startAngle:0,endAngle:0,outerRadius:0,innerRadius:0,cornerRadius:0,lineWidth:0,innerPadding:0,outerPadding:0})}}class fm extends yst{constructor(){super(...arguments),this.type=fm.type}}fm.type="arc";const Oh=()=>{as(),zm(),QWt(),urt(),z.registerGraphicComponent("arc",DF),z.registerMark(fm.type,fm)},QYt=Object.assign(Object.assign({},Bi),{pie:{name:"pie",type:"arc"},labelLine:{name:"labelLine",type:"path"}});class $z extends gr{_transformLabelSpec(t){this._addMarkLabelSpec(t,"pie")}_mergeThemeToSpec(t,e){const n=this._theme;let r=t;if(this._shouldMergeThemeToSpec()){const s=this._getDefaultSpecFromChart(e);r=Wt({},this._theme,s,t);const a=(o,l)=>Wt({},o==="inside"||o==="inside-center"?this._theme.innerLabel:this._theme.outerLabel,l);J(r.label)?r.label=r.label.map(o=>a(o.position,o)):r.label=a(r.label.position,r.label)}return{spec:r,theme:n}}_getDefaultSpecFromChart(t){var e;const n=(e=super._getDefaultSpecFromChart(t))!==null&&e!==void 0?e:{},{centerX:r,centerY:s}=t;return L(r)&&(n.centerX=r),L(s)&&(n.centerY=s),Object.keys(n).length>0?n:void 0}}const JYt=`${zt}_LABEL_VISIBLE`,t8t={outerRadius:.6,pie:{style:{fillOpacity:1}},label:{visible:!1,interactive:!0,position:"outside",style:{fontWeight:"normal",stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1}},innerLabel:{style:{lineWidth:2}},emptyCircle:{style:{fill:{type:"palette",key:"emptyCircleColor"},fillOpacity:1}}};class Cd extends ex{constructor(){super(...arguments),this.transformerConstructor=$z,this._pieMarkName="pie",this._pieMarkType="arc",this.getCenter=()=>{var t,e;const n=this._region.getLayoutRect();return{x:en((t=this._spec)===null||t===void 0?void 0:t.centerX,n.width,n,n.width/2),y:en((e=this._spec)===null||e===void 0?void 0:e.centerY,n.height,n,n.height/2)}},this._startAngle=fT,this._endAngle=Tz,this._pieMark=null,this._labelMark=null,this._labelLineMark=null,this._emptyArcMark=null,this.dataToCentralPosition=t=>{const e=t[Nc];if(N(e))return null;const n=this.computeDatumRadius(t),r=this.computeDatumInnerRadius(t),s=this.computeCenter(t);return yi(s,(n+r)/2,e)}}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.getCenter().x,y:()=>this.getCenter().y}),this._markAttributeContext.startAngleScale=t=>this.startAngleScale(t),this._markAttributeContext.endAngleScale=t=>this.endAngleScale(t)}setAttrFromSpec(){var t,e,n,r,s,a;super.setAttrFromSpec(),this._centerOffset=(t=this._spec.centerOffset)!==null&&t!==void 0?t:0,this._cornerRadius=(e=this._spec.cornerRadius)!==null&&e!==void 0?e:0;const o=l5t(L(this._spec.startAngle)?ii(this._spec.startAngle):this._startAngle,L(this._spec.endAngle)?ii(this._spec.endAngle):this._endAngle);this._startAngle=o.startAngle,this._endAngle=o.endAngle,this._padAngle=L(this._spec.padAngle)?ii(this._spec.padAngle):0,this.setAngleField(this._spec.valueField||this._spec.angleField),this._spec.categoryField&&this.setSeriesField(this._spec.categoryField),this._radiusField=[],this._specAngleField=this._angleField.slice(),this._specRadiusField=[],this._showEmptyCircle=(r=(n=this._spec.emptyPlaceholder)===null||n===void 0?void 0:n.showEmptyCircle)!==null&&r!==void 0&&r,this._showAllZero=(s=this._spec.showAllZero)!==null&&s!==void 0&&s,this._supportNegative=(a=this._spec.supportNegative)!==null&&a!==void 0&&a}initData(){super.initData();const t=this.getViewData();if(!t)return;Vt(this._dataSet,"pie",GYt),t.transform({type:"pie",options:{angleField:()=>this._angleField[0],startAngle:()=>this._startAngle,endAngle:()=>this._endAngle,minAngle:()=>L(this._spec.minAngle)?ii(this._spec.minAngle):0,asStartAngle:LG,asEndAngle:BG,asRatio:T4t,asMiddleAngle:Nc,asRadian:R4t,asQuadrant:E4t,asK:P4t,showAllZero:this._showAllZero,supportNegative:this._supportNegative,showEmptyCircle:this._showEmptyCircle}},!1);const e=new je(this._dataSet,{name:`${zt}_series_${this.id}_viewDataLabel`});e.parse([this.getViewData()],{type:"dataview"}),this._viewDataLabel=new Cr(this._option,e)}compileData(){var t;super.compileData(),(t=this._viewDataLabel)===null||t===void 0||t.compile()}initMark(){this._pieMark=this._createMark(Object.assign(Object.assign({},Cd.mark.pie),{name:this._pieMarkName,type:this._pieMarkType}),{key:ys,groupKey:this._seriesField,isSeriesMark:!0},{morph:fo(this._spec,this._pieMarkName),morphElementKey:this._seriesField}),this._showEmptyCircle&&(this._emptyArcMark=this._createMark({name:"emptyCircle",type:"arc"},{dataView:!1}),this._data.addRelatedMark(this._emptyArcMark))}startAngleScale(t){return _1(LG)(t)}endAngleScale(t){return _1(BG)(t)}_computeLayoutRadius(){return Mrt(()=>this._spec.layoutRadius,this.getLayoutRect,this.getCenter,()=>({startAngle:this._startAngle,endAngle:this._endAngle}))}initMarkStyle(){const t={x:()=>this.getCenter().x,y:()=>this.getCenter().y,fill:this.getColorAttribute(),outerRadius:Z4(this._outerRadius)?this._outerRadius:()=>this._computeLayoutRadius()*this._outerRadius,innerRadius:Z4(this._innerRadius)?this._innerRadius:()=>this._computeLayoutRadius()*this._innerRadius,cornerRadius:()=>this._computeLayoutRadius()*this._cornerRadius,startAngle:r=>this.startAngleScale(r),endAngle:r=>this.endAngleScale(r),padAngle:this._padAngle,centerOffset:this._centerOffset},e=this._pieMark;e&&this.setMarkStyle(e,t,"normal",ct.Series);const n=this._emptyArcMark;n&&this.setMarkStyle(n,Object.assign(Object.assign({},t),{visible:()=>{const r=this.getViewData().latestData;return!r||!r.length}}),"normal",ct.Series)}getInteractionTriggers(){return this._parseInteractionConfig(this._pieMark?[this._pieMark]:[])}initTooltip(){super.initTooltip(),this._pieMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pieMark)}initMarkStyleWithSpec(t,e){if(super.initMarkStyleWithSpec(t,e),t.name===this._pieMarkName){const n=this.getSpec()[t.name];if(n)for(const r in n.state||{})this.setMarkStyle(t,this.generateRadiusStyle(n.state[r]),r,ct.User_Mark)}t.name==="emptyCircle"&&this.setMarkStyle(t,this.generateRadiusStyle(e.style),"normal",ct.User_Mark)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{visible:_1(JYt).bind(this),text:e=>e[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:this.dataToPositionZ.bind(this)})}afterInitMark(){super.afterInitMark()}initEvent(){var t;super.initEvent(),(t=this._viewDataLabel.getDataView())===null||t===void 0||t.target.addListener("change",this.viewDataLabelUpdate.bind(this))}initGroups(){}onLayoutEnd(){this._viewDataLabel.getDataView().reRunAllTransform(),this.onMarkPositionUpdate(),super.onLayoutEnd()}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return this._specAngleField}viewDataLabelUpdate(){this.event.emit(Tt.viewDataLabelUpdate,{model:this}),this._viewDataLabel.updateData()}generateRadiusStyle(t){if(!t)return;const e={};return t.outerRadius&&(e.outerRadius=()=>this._computeLayoutRadius()*t.outerRadius),t.innerRadius&&(e.innerRadius=()=>this._computeLayoutRadius()*t.innerRadius),t.cornerRadius&&(e.cornerRadius=()=>this._computeLayoutRadius()*t.cornerRadius),e}computeCenter(t){return{x:this._pieMark.getAttribute("x",t,"normal"),y:this._pieMark.getAttribute("y",t,"normal")}}getRadius(t="normal"){var e,n,r,s,a,o,l;const u=t==="normal"?(r=(n=this.getSpec()[((e=this._pieMark)===null||e===void 0?void 0:e.name)||"pie"])===null||n===void 0?void 0:n.style)===null||r===void 0?void 0:r.outerRadius:(l=(o=(a=this.getSpec()[((s=this._pieMark)===null||s===void 0?void 0:s.name)||"pie"])===null||a===void 0?void 0:a.state)===null||o===void 0?void 0:o[t])===null||l===void 0?void 0:l.outerRadius;return u??this._outerRadius}getInnerRadius(t="normal"){var e,n,r,s,a,o,l;const u=t==="normal"?(r=(n=this.getSpec()[((e=this._pieMark)===null||e===void 0?void 0:e.name)||"pie"])===null||n===void 0?void 0:n.style)===null||r===void 0?void 0:r.innerRadius:(l=(o=(a=this.getSpec()[((s=this._pieMark)===null||s===void 0?void 0:s.name)||"pie"])===null||a===void 0?void 0:a.state)===null||o===void 0?void 0:o[t])===null||l===void 0?void 0:l.innerRadius;return u??this._innerRadius}computeRadius(t,e){return this._computeLayoutRadius()*t*(N(e)?1:e)+this._centerOffset}computeDatumRadius(t,e){return this._computeLayoutRadius()*this.getRadius(e)+this._centerOffset}_compareSpec(t,e,n){n=n??{data:!0};const r=["centerX","centerY","centerOffset","radius","innerRadius","cornerRadius","startAngle","endAngle","padAngle"];r.forEach(a=>{n[a]=!0});const s=super._compareSpec(t,e,n);return t=t??{},r.some(a=>t[a]!==e[a])&&(s.reRender=!0,s.change=!0),s}computeDatumInnerRadius(t,e){return this._computeLayoutRadius()*this.getInnerRadius(e)+this._centerOffset}dataToPosition(t,e){const n=t[Nc];if(N(n)||e&&!this.isDatumInViewData(t))return null;const r=this.computeDatumRadius(t),s=this.computeCenter(t);return yi(s,r,n)}initAnimation(){var t,e,n;const r={growFrom:(a,o,l)=>{var u,c;if(l===ui.appear)return this._startAngle;if(l===ui.disappear)return this._endAngle;const h=[ui.disappear,ui.exit],d=this._pieMark.getGraphics(),f=a,p=f?.[hr];if(d.find(m=>{var _;return((_=m.context.data[0])===null||_===void 0?void 0:_[hr])<p})===void 0)return this._startAngle;if(d.find(m=>{var _;return((_=m.context.data[0])===null||_===void 0?void 0:_[hr])>p})===void 0)return this._endAngle;const g=[...d].reverse().find(m=>{var _;return((_=m.context.data[0])===null||_===void 0?void 0:_[hr])<p});return h.includes(l)?(u=g?.getFinalAttribute())===null||u===void 0?void 0:u.endAngle:(c=g?.attribute)===null||c===void 0?void 0:c.endAngle}},s=(t=this._spec.animationAppear)===null||t===void 0?void 0:t.preset;if(this._pieMark){const a=ye((e=z.getAnimationInKey("pie"))===null||e===void 0?void 0:e(r,s),Ce("pie",this._spec,this._markAttributeContext));a.normal&&a.normal.type&&(a.normal=ZYt(this._pieMark,a.normal)),this._pieMark.setAnimationConfig(a)}if(this._emptyArcMark){const a=ye((n=z.getAnimationInKey("emptyCircle"))===null||n===void 0?void 0:n(r,s??"fadeIn"));this._emptyArcMark.setAnimationConfig(a)}}getDefaultShapeType(){return"circle"}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(t,e){return e}getActiveMarks(){return[this._pieMark]}}Cd.transformerConstructor=$z,Cd.mark=QYt,Cd.builtInTheme={pie:t8t};class SL extends Cd{constructor(){super(...arguments),this.type=st.pie}}SL.type=st.pie;const Uz=()=>{Oh(),KYt(),qYt(),z.registerSeries(SL.type,SL)};function bst(i){return i==="angle"?"growAngleIn":"growRadiusIn"}function e8t(i){return i==="angle"?"growAngleOut":"growRadiusOut"}const tY=i=>({type:bst(i.growField),options:{overall:!0}}),i8t={type:"fadeIn"},n8t=i=>({type:bst(i.growField)}),xst=i=>({type:e8t(i.growField)}),r8t=xst;function s8t(i,t){if(t===!1)return{};switch(t){case"fadeIn":return i8t;case"growAngle":return tY(Object.assign(Object.assign({},i),{growField:"angle"}));default:return tY(Object.assign(Object.assign({},i),{growField:"radius"}))}}const a8t=()=>{z.registerAnimation("rose",(i,t)=>({appear:s8t(i,t),enter:n8t(i),exit:xst(i),disappear:r8t(i)}))};class Sst extends ex{getStackGroupFields(){return this._angleField}getStackValueField(){return X(this._spec.valueField)[0]||X(this._spec.radiusField)[0]}getGroupFields(){return this._angleField}setAttrFromSpec(){super.setAttrFromSpec(),this.setAngleField(this._spec.categoryField||this._spec.angleField),this.setRadiusField(this._spec.valueField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice(),this.setInnerRadiusField(this._spec.valueField||this._spec.radiusField),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent()}setValueFieldToStack(){this.setRadiusField(bs),this.setInnerRadiusField(ho)}setValueFieldToPercent(){this.setRadiusField(Xl),this.setInnerRadiusField(Qu)}getDimensionField(){return this._specAngleField}getMeasureField(){return this._specRadiusField}getDefaultShapeType(){return"square"}}const o8t=Object.assign(Object.assign({},Bi),{rose:{name:"rose",type:"arc"}});class wst extends gr{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){this._addMarkLabelSpec(t,"rose")}}var eY=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class Pk extends Ez{get center(){return this._center}get startAngle(){return this._startAngle}get endAngle(){return this._endAngle}getOrient(){return this._orient}getDefaultInteractive(){return this._orient!=="angle"}getGroupScales(){return this._groupScales}static getSpecInfo(t){if(!t[this.specKey])return null;const e=J(t[this.specKey]),n=e?t[this.specKey]:[t[this.specKey]],r=[];let s,a;const o=[],l=[];return n.forEach((u,c)=>{if(!C4t(u))return;const{axisType:h,componentName:d,startAngle:f,endAngle:p,center:g,outerRadius:m,layoutRadius:_}=O4t(u,t);u.center=g,u.startAngle=f,u.endAngle=p,u.outerRadius=m,u.type=h,u.layoutRadius=_;const v={spec:u,specPath:e?[this.specKey,c]:[this.specKey],specInfoPath:["component",this.specKey,c],type:d};r.push(v),u.orient==="radius"?(o.push(v),a=c):(l.push(v),s=c)}),o.forEach(u=>{u.angleAxisIndex=s}),l.forEach(u=>{u.radiusAxisIndex=a}),r}static createComponent(t,e){const{spec:n}=t,r=eY(t,["spec"]),s=z.getComponentInKey(r.type);return s?new s(n,Object.assign(Object.assign({},e),r)):(e.onError(`Component ${r.type} not found`),null)}constructor(t,e){super(t,e),this.type=lt.polarAxis,this.name=lt.polarAxis,this._defaultBandPosition=0,this._defaultBandInnerPadding=0,this._defaultBandOuterPadding=0,this.layoutType="absolute",this.layoutZIndex=ti.Axis,this._tick=void 0,this._center=null,this._startAngle=fT,this._endAngle=Tz,this._orient="radius",this._groupScales=[],this.effect={scaleUpdate:n=>{this.computeData(n?.value),zi(this._regions,r=>{this.getOrient()==="radius"?Wa(r.radiusAxisHelper,this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&(r.radiusAxisHelper=this.axisHelper()):Wa(r.angleAxisHelper,this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&(r.angleAxisHelper=this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=n=>{var r;const s=(r=this.getRegions())===null||r===void 0?void 0:r[0];return s?s.getLayoutStartPoint():n},this.getCenter=()=>{var n,r;const s=this.getRefLayoutRect(),{width:a,height:o}=s;return{x:en((n=this._center)===null||n===void 0?void 0:n.x,a,s,a/2),y:en((r=this._center)===null||r===void 0?void 0:r.y,o,s,o/2)}},this.getRefLayoutRect=()=>this.getRegions()[0].getLayoutRect(),this._coordinateType="polar"}setAttrFromSpec(){super.setAttrFromSpec(),this.visible&&(this._axisStyle=this._getAxisAttributes(),this._gridStyle=this._getGridAttributes()),this._tick=this._spec.tick,this._orient=this._spec.orient==="angle"?"angle":"radius",this._center=this._spec.center,this._startAngle=ii(this._spec.startAngle),this._endAngle=ii(this._spec.endAngle),this._inverse=this._spec.inverse}_tickTransformOption(){var t;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimal:(t=this._tick)===null||t===void 0?void 0:t.noDecimals,startAngle:this.startAngle,labelOffset:Mz(this._spec),getRadius:()=>this.getOuterRadius(),inside:this._spec.inside})}updateScaleRange(){const t=this._scale.range();let e;return e=this.getOrient()==="radius"?this._inverse?[this.computeLayoutOuterRadius(),this.computeLayoutInnerRadius()]:[this.computeLayoutInnerRadius(),this.computeLayoutOuterRadius()]:this._inverse?[this._endAngle,this._startAngle]:[this._startAngle,this._endAngle],(!t||!e||t[0]!==e[0]||t[1]!==e[1])&&(this._scale.range(e),!0)}collectSeriesField(t,e){var n,r;let s;return s=t>0?(r=(n=e.getGroups())===null||n===void 0?void 0:n.fields)===null||r===void 0?void 0:r[t]:this.getOrient()==="radius"?e.getRadiusField():e.getAngleField(),s}updateSeriesScale(){zi(this._regions,t=>{this.getOrient()==="radius"?Wa(t.radiusAxisHelper,this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&(t.setRadiusScale(this._scale),t.radiusAxisHelper=this.axisHelper()):Wa(t.angleAxisHelper,this.axisHelper(),L(this._seriesUserId)||L(this._seriesIndex))&&(t.setAngleScale(this._scale),t.angleAxisHelper=this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getSeriesStatisticsField(t){const e=this.getOrient()==="radius"?t.getRadiusField():t.getAngleField();return Ge(this._scale.type)?e:[e[0]]}initGroupScales(){}axisHelper(){return{isContinuous:Ge(this._scale.type),dataToPosition:this.dataToPosition.bind(this),coordToPoint:this.coordToPoint.bind(this),pointToCoord:this.pointToCoord.bind(this),center:this.getCenter.bind(this),layoutRadius:this._computeLayoutRadius.bind(this),getScale:(t=0)=>this._scales[t],getAxisId:()=>this.id,getSpec:()=>this._spec}}positionToData(t){const e=this.pointToCoord(t);return this.getOrient()==="radius"?this.invert(e.radius):this.invert(e.angle)}coordToPoint(t){const e=this.getCenter();return yi(e,t.radius,t.angle)}pointToCoord(t){const e=this.getCenter(),n=this._startAngle,r=this._endAngle;return e0(t,e,n,r)}getOuterRadius(){return this.computeLayoutOuterRadius()}getInnerRadius(){return this.computeLayoutInnerRadius()}updateLayoutAttribute(){this._visible&&(this.getOrient()==="radius"?this._layoutRadiusAxis():this._layoutAngleAxis()),super.updateLayoutAttribute()}_getNormalizedValue(t,e){return e===0?0:(this.dataToPosition(t)-this._getStartValue())/e}getLabelItems(t){var e;const n=(e=this.getTickData())===null||e===void 0?void 0:e.getLatestData();return n&&n.length?[n.map(r=>lm(r.value,this._getNormalizedValue([r.value],t)))]:[]}_getStartValue(){return this.getOrient()==="radius"?this.computeLayoutInnerRadius():this._startAngle}_layoutAngleAxis(){var t,e,n;const r=this.getCenter(),s=this.computeLayoutOuterRadius(),a=this.computeLayoutInnerRadius(),o=this._endAngle-this._startAngle,l=this.getLabelItems(o),u=Object.assign(Object.assign({},this.getLayoutStartPoint()),{inside:this._spec.inside,center:r,radius:s,innerRadius:a,startAngle:this._startAngle,endAngle:this._endAngle,sides:!((n=(e=(t=this._getRelatedAxis(this._option.radiusAxisIndex))===null||t===void 0?void 0:t.getSpec())===null||e===void 0?void 0:e.grid)===null||n===void 0)&&n.smooth?void 0:this.getScale().domain().length}),c=Object.assign(Object.assign({},u),{size:this.getRefLayoutRect(),title:{text:this._spec.title.text||this._dataFieldText},items:l,orient:"angle",scale:this._scale});this._spec.grid.visible&&(c.grid=Object.assign({type:"line",smoothLink:!0,items:l[0]},u)),this._update(c)}_layoutRadiusAxis(){var t,e,n;const r=this.getCenter(),s=this.computeLayoutOuterRadius(),a=this.computeLayoutInnerRadius(),o=this.coordToPoint({angle:this._startAngle,radius:s}),l=this.coordToPoint({angle:this._startAngle,radius:a}),u=Je.distancePP(l,o),c=this.getLabelItems(u),h=Object.assign(Object.assign({},this.getLayoutStartPoint()),{start:l,end:o,verticalFactor:-1}),d=Object.assign(Object.assign({},h),{title:{text:this._spec.title.text||this._dataFieldText},items:c,orient:"radius",scale:this._scale.clone()});!((t=this._spec.grid)===null||t===void 0)&&t.visible&&(d.grid=Object.assign({items:c[0],type:!((e=this._spec.grid)===null||e===void 0)&&e.smooth?"circle":"polygon",center:r,closed:!0,sides:(n=this._getRelatedAxis(this._option.angleAxisIndex))===null||n===void 0?void 0:n.getScale().domain().length,startAngle:this._startAngle,endAngle:this._endAngle},h)),this._update(d)}_getRelatedAxis(t){if(L(t))return this._option.getComponentByIndex(this.specKey,t)}_computeLayoutRadius(){return Mrt(()=>this._spec.layoutRadius,this.getRefLayoutRect,this.getCenter,()=>({startAngle:this._startAngle,endAngle:this._endAngle}))}computeLayoutOuterRadius(){var t;const e=(t=this._spec.outerRadius)!==null&&t!==void 0?t:this._spec.radius,n=e??this.getRefSeriesRadius().outerRadius;return this._computeLayoutRadius()*n}computeLayoutInnerRadius(){var t;const e=(t=this._spec.innerRadius)!==null&&t!==void 0?t:this.getRefSeriesRadius().innerRadius;return this._computeLayoutRadius()*e}getRefSeriesRadius(){let t=wk,e=0;const n=this.getChart().getSpec();return zi(this.getRegions(),r=>{const s=r;if(u4t(s.type)){const{outerRadius:a=n.outerRadius,innerRadius:o=n.innerRadius}=s;et(a)&&(t=a),et(o)&&(e=o)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),{outerRadius:t,innerRadius:e}}_update(t){const{grid:e}=t,n=eY(t,["grid"]);this._axisMark.getComponent().setAttributes(Wt({},this._axisStyle,n)),this._gridMark&&this._gridMark.getComponent().setAttributes(Wt({},this._gridStyle,e))}invert(t){var e;if(this.getOrient()==="angle"&&this._scale.type==="band"){const n=this._scale.range(),r=n[n.length-1]-n[0],s=((e=this.getSpec().bandPosition)!==null&&e!==void 0?e:this._defaultBandPosition)===.5?0:this._scale.bandwidth()/2;if(n[0]<0){const a=(t+s+Math.abs(n[0]))%r-Math.abs(n[0]);return this._scale.invert(a)}return this._scale.invert((t+s)%r)}return this._scale.invert(t)}}Pk.type=lt.polarAxis,Pk.specKey="axes";const Ast={grid:{smooth:!0,visible:!0},subGrid:{smooth:!0,visible:!1}},kst={grid:{visible:!0,style:{lineDash:[6,6]}},label:{space:5}};class Vp extends Pk{constructor(){super(...arguments),this.type=lt.polarLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new vs}setAttrFromSpec(){super.setAttrFromSpec(),this.setExtraAttrFromSpec()}initScales(){super.initScales(),this.setScaleNice()}computeDomain(t){return this.computeLinearDomain(t)}axisHelper(){const t=super.axisHelper();return t.setExtendDomain=this.setExtendDomain.bind(this),t}registerTicksTransform(){const t=`${this.type}-ticks`;return Vt(this._option.dataSet,t,Vb),t}}Vp.type=lt.polarLinearAxis,Vp.specKey="axes",Vp.builtInTheme={axis:Af,axisLinear:mT,axisAngle:kst,axisRadius:Ast},Be(Vp,gT);const Dh=()=>{z.registerGraphicComponent(Aa.lineAxis,(i,t)=>new co(i,t)),z.registerGraphicComponent(ka.lineAxisGrid,(i,t)=>new Ph(i,t)),z.registerGraphicComponent(Aa.circleAxis,(i,t)=>new nm(i,t)),z.registerGraphicComponent(ka.circleAxisGrid,(i,t)=>new JF(i,t)),wf(),z.registerComponent(Vp.type,Vp)};class Wp extends Pk{constructor(){super(...arguments),this.type=lt.polarBandAxis,this._scale=new xf}computeDomain(t){return this.computeBandDomain(t)}updateScaleRange(){const t=super.updateScaleRange();return this.updateGroupScaleRange(),t}axisHelper(){const t=super.axisHelper();return Object.assign(Object.assign({},t),{getBandwidth:e=>t.getScale(e).bandwidth()})}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}registerTicksTransform(){const t=`${this.type}-ticks`;return Vt(this._option.dataSet,t,yWt),t}transformScaleDomain(){}}Wp.type=lt.polarBandAxis,Wp.specKey="axes",Wp.builtInTheme={axis:Af,axisBand:Ert,axisAngle:kst,axisRadius:Ast},Be(Wp,Prt);const Cf=()=>{z.registerGraphicComponent(Aa.lineAxis,(i,t)=>new co(i,t)),z.registerGraphicComponent(ka.lineAxisGrid,(i,t)=>new Ph(i,t)),z.registerGraphicComponent(Aa.circleAxis,(i,t)=>new nm(i,t)),z.registerGraphicComponent(ka.circleAxisGrid,(i,t)=>new JF(i,t)),wf(),z.registerComponent(Wp.type,Wp)},l8t={rose:{style:{fillOpacity:1}},label:{style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"},textAlign:"center",textBaseline:"middle"}}};class Du extends Sst{constructor(){super(...arguments),this.type=st.rose,this.transformerConstructor=wst,this._roseMark=null,this._labelMark=null}initMark(){this.initRoseMark()}initMarkStyle(){this.initRoseMarkStyle()}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y}),this._markAttributeContext.startAngleScale=t=>this.startAngleScale(t),this._markAttributeContext.endAngleScale=t=>this.endAngleScale(t)}initRoseMark(){this._roseMark=this._createMark(Du.mark.rose,{groupKey:this._seriesField,isSeriesMark:!0},{morph:fo(this._spec,Du.mark.rose.name),morphElementKey:this.getDimensionField()[0]})}getRoseAngle(){var t,e,n;return(n=(e=(t=this.angleAxisHelper).getBandwidth)===null||e===void 0?void 0:e.call(t,this._groups?this._groups.fields.length-1:0))!==null&&n!==void 0?n:.5}startAngleScale(t){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()))-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}endAngleScale(t){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()))+this.getRoseAngle()-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}initRoseMarkStyle(){const t=this._roseMark;t&&this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:e=>this.startAngleScale(e),endAngle:e=>this.endAngleScale(e),fill:this.getColorAttribute(),outerRadius:e=>He(this.radiusAxisHelper.dataToPosition([e[this._radiusField[0]]]),this.radiusAxisHelper.getScale(0)),innerRadius:e=>{var n;if(!this.getStack())return 0;const r=He(this.radiusAxisHelper.dataToPosition([e[this._innerRadiusField[0]]]),this.radiusAxisHelper.getScale(0));return r<=Number.MIN_VALUE?this._computeLayoutRadius()*((n=this._spec.innerRadius)!==null&&n!==void 0?n:0):r}})}initTooltip(){super.initTooltip(),this._roseMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._roseMark)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{text:e=>e[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:0})}initAnimation(){var t,e,n;const r=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;if(this._roseMark){const s={innerRadius:()=>{var a;return this._computeLayoutRadius()*((a=this._spec.innerRadius)!==null&&a!==void 0?a:0)}};this._roseMark.setAnimationConfig(ye((n=z.getAnimationInKey("rose"))===null||n===void 0?void 0:n(s,r),Ce("rose",this._spec,this._markAttributeContext)))}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._roseMark]}}Du.type=st.rose,Du.mark=o8t,Du.builtInTheme={rose:l8t},Du.transformerConstructor=wst;const Cst=()=>{z.registerSeries(Du.type,Du),Oh(),a8t(),Cf(),Dh()};class u8t extends bi{constructor(t,e,n,r,s){super(t,e,n,r,s),this._center=e.center}getEndProps(){return this.valid===!1?{}:yi(this._center,this._toRadius,this._toAngle)}onBind(){this.from=this.target.attribute,this.to=this.target.getFinalAttribute(),this._prevCenter=this.target.attribute.center,this._center&&this._prevCenter||(this.valid=!1);const{angle:t,radius:e}=e0(this.from,this._prevCenter),{angle:n,radius:r}=e0(this.to,this._center);et(n*r)||(this.valid=!1),this._fromAngle=et(t)?t:n,this._fromRadius=et(e)?e:r,this._toAngle=n,this._toRadius=r,uk(this._fromAngle,this._toAngle)&&uk(this._fromRadius,this._toRadius)&&(this.valid=!1),this.props=this.getEndProps()}onUpdate(t,e,n){if(this.valid===!1)return n.x=this.to.x,void(n.y=this.to.y);const{x:r,y:s}=yi({x:this._prevCenter.x+(this._center.x-this._prevCenter.x)*e,y:this._prevCenter.y+(this._center.y-this._prevCenter.y)*e},this._fromRadius+(this._toRadius-this._fromRadius)*e,this._fromAngle+(this._toAngle-this._fromAngle)*e);this.target.setAttributes({x:r,y:s}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class c8t extends Eit{onBind(){super.onBind();const{center:t}=this.target.attribute,{center:e}=this.target.getFinalAttribute();this._center=e,this._prevCenter=t}onUpdate(t,e,n){this.points=this.points.map((r,s)=>{const a=this.polarPointInterpolation(this.interpolatePoints[s][0],this.interpolatePoints[s][1],e);return t&&(n.center=this._center),a.context=r.context,a}),this.target.attribute.points=this.points,this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}_interpolationSinglePoint(t,e,n){if(!K4(t)&&!K4(e))return e;const r=e0(t,this._prevCenter),s=e0(e,this._center);let a=oh(r.angle),o=oh(s.angle);!et(a)&&et(o)&&(a=o),et(a)&&!et(o)&&(o=a);const l=a+(o-a)*n,u=r.radius+(s.radius-r.radius)*n;return yi({x:this._prevCenter.x+(this._center.x-this._prevCenter.x)*n,y:this._prevCenter.y+(this._center.y-this._prevCenter.y)*n},u,l)}polarPointInterpolation(t,e,n){const{x:r,y:s}=this._interpolationSinglePoint(t,e,n),{x:a,y:o}=this._interpolationSinglePoint({x:t.x1,y:t.y1},{x:e.x1,y:e.y1},n),l=new ci(r,s,a,o);return l.defined=e.defined,l}}const Mst=i=>({type:i==="in"?"fadeIn":"fadeOut"}),h8t=(i,t)=>({type:t==="in"?"growPointsIn":"growPointsOut",options:()=>({center:i.center()})});function LS(i,t,e){return t==="fadeIn"?Mst(e):h8t(i,e)}const d8t=(i,t)=>{const e=()=>{var a;return(a=i.center())===null||a===void 0?void 0:a.x},n=(a,o)=>o.getGraphicAttribute("x"),r=()=>{var a;return(a=i.center())===null||a===void 0?void 0:a.y},s=(a,o)=>o.getGraphicAttribute("y");return t==="in"?{channel:{x:{from:e,to:n},y:{from:r,to:s}}}:{channel:{x:{from:n,to:e},y:{from:s,to:r}}}};function iY(i,t,e){return t==="fadeIn"?Mst(e):d8t(i,e)}const nY=(i,t)=>({custom:MHt,customParameters:(e,n)=>{var r;return{group:n,startAngle:(r=i.startAngle)!==null&&r!==void 0?r:Math.PI/2,orient:"clockwise",center:i.center(),radius:i.radius(),animationType:t}}}),f8t=()=>{z.registerAnimation("radar",(i,t)=>({appear:t==="clipIn"?void 0:LS(i,t,"in"),enter:LS(i,t,"in"),exit:LS(i,t,"out"),disappear:t==="clipIn"?void 0:LS(i,t,"out"),update:[{channel:["points","center"],custom:c8t,customParameters:i,duration:Ll.update.duration,easing:Ll.update.easing},{type:"update",options:{excludeChannels:["points","defined","center"]}}]})),z.registerAnimation("radarSymbol",(i,t)=>({appear:t==="clipIn"?void 0:iY(i,t,"in"),enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:t==="clipIn"?void 0:iY(i,t,"out"),update:[{options:{excludeChannels:["x","y","center"]}},{channel:["x","y","center"],custom:u8t,customParameters:i,duration:Ll.update.duration,easing:Ll.update.easing}]})),z.registerAnimation("radarGroup",(i,t)=>({appear:nY(i,"in"),disappear:nY(i,"out")})),zm()},p8t=Object.assign(Object.assign(Object.assign({},Bi),Rc),{area:{name:"area",type:"area"}}),g8t={label:{visible:!1,offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}};class Au extends Sst{constructor(){super(...arguments),this.type=st.radar,this.transformerConstructor=Sf,this._sortDataByAxis=!1}initGroups(){}compile(){super.compile(),this.addOverlapCompile()}initMark(){var t,e,n,r;const s=((t=this._spec.area)===null||t===void 0?void 0:t.visible)!==!1&&((n=(e=this._spec.area)===null||e===void 0?void 0:e.style)===null||n===void 0?void 0:n.visible)!==!1,a=(r=this._spec.seriesMark)!==null&&r!==void 0?r:"area";this.initAreaMark(s&&a==="area"),this.initLineMark(a==="line"||a==="area"&&!s),this.initSymbolMark(a==="point")}initMarkStyle(){this.initAreaMarkStyle(),this.initLineMarkStyle(),this.initSymbolMarkStyle(),[this._lineMark,this._symbolMark,this._areaMark].forEach(t=>{t&&this.setMarkStyle(t,{center:()=>{var e;return(e=this.angleAxisHelper)===null||e===void 0?void 0:e.center()}})})}initAreaMark(t){this._areaMark=this._createMark(Au.mark.area,{groupKey:this._seriesField,isSeriesMark:t})}initAreaMarkStyle(){const t=this._areaMark;t&&(this.setMarkStyle(t,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),x1:e=>e&&this.angleAxisHelper&&this.radiusAxisHelper?this.valueToPosition(this.getDatumPositionValues(e,this._angleField),this.getStack()?this.getDatumPositionValues(e,this._innerRadiusField):this.radiusScale.domain()[0]).x:Number.NaN,y1:e=>!e||!this.angleAxisHelper||!this.radiusAxisHelper?Number.NaN:this.valueToPosition(this.getDatumPositionValues(e,this._angleField),this.getStack()?this.getDatumPositionValues(e,this._innerRadiusField):this.radiusScale.domain()[0]).y,fill:this.getColorAttribute(),curveType:mrt,closePath:!0},"normal",ct.Series),this._invalidType!=="zero"&&this.setMarkStyle(t,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",ct.Series),this.event.on(Tt.viewDataStatisticsUpdate,{filter:e=>e.model===this},()=>{this.encodeDefined(t,"defined")}))}initTooltip(){super.initTooltip();const{group:t,mark:e}=this._tooltipHelper.activeTriggerSet;this._lineMark&&t.add(this._lineMark),this._areaMark&&t.add(this._areaMark),this._symbolMark&&(e.add(this._symbolMark),t.add(this._symbolMark))}initAnimation(){var t,e,n,r;const s={center:()=>{var o;return(o=this.angleAxisHelper)===null||o===void 0?void 0:o.center()},radius:()=>{const o=this.getLayoutRect();return Math.min(o.width,o.height)},startAngle:L(this._spec.startAngle)?ii(this._spec.startAngle):fT},a=(n=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset)!==null&&n!==void 0?n:"clipIn";a==="clipIn"&&this._rootMark&&this._rootMark.setAnimationConfig(ye((r=z.getAnimationInKey("radarGroup"))===null||r===void 0?void 0:r(s,a),Ce("group",this._spec,this._markAttributeContext))),[[this._areaMark,"radar"],[this._lineMark,"radar"],[this._symbolMark,"radarSymbol"]].forEach(([o,l])=>{if(L(o)){const u=z.getAnimationInKey(l);o.setAnimationConfig(ye(u?.(s,a),Ce(o.name,this._spec,this._markAttributeContext)))}})}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}getSeriesStyle(t){return e=>{var n,r,s,a;let o=(r=(n=this._seriesMark)===null||n===void 0?void 0:n.getAttribute(e,t))!==null&&r!==void 0?r:void 0;return e!=="fill"||o||(e="stroke",o=(a=(s=this._seriesMark)===null||s===void 0?void 0:s.getAttribute(e,t))!==null&&a!==void 0?a:void 0),e==="stroke"&&J(o)?o[0]:o}}}Au.type=st.radar,Au.mark=p8t,Au.builtInTheme={radar:g8t},Au.transformerConstructor=Sf,Be(Au,Cz);const Tst=()=>{z.registerSeries(Au.type,Au),yT(),dT(),cc(),f8t(),Cf(),Dh()};class m8t extends pr{constructor(){super(...arguments),this.shapeTypeCallback=()=>"square"}enableByType(t){return t==="mark"}getDefaultTitlePattern(t){return{key:"event info",value:"event info"}}getDefaultContentList(){return[{key:t=>t.type,value:t=>t.id},{key:"event_time",value:t=>No.getInstance().timeFormat("%Y%m%d",t.event_time)},{key:"action_type",value:t=>t.action_type},{key:"children",value:t=>t.children}]}getTooltipData(t,e,n,r,s){var a,o,l,u;const c=super.getTooltipData(t,e,n,r,s),h=(l=(o=(a=this.spec)===null||a===void 0?void 0:a[t])===null||o===void 0?void 0:o.updateContent)!==null&&l!==void 0?l:(u=e?.[t])===null||u===void 0?void 0:u.updateContent;return c&&!h&&(c.updateContent=(d,f,p)=>{const g=[],m=d.filter(_=>_.key==="children");return m.length>0&&m[0].value.forEach(_=>{let v=!0;for(const y in _)g.push(Object.assign(Object.assign({},m[0]),{shapeType:"circle",hasShape:v,key:y,value:_[y]+""})),v=!1}),d.concat(g)}),c}}const _8t=(i,t)=>{var e;const n=!((e=i[0])===null||e===void 0)&&e.latestData?i[0].latestData:i||[],r=[];let s=0;return n.forEach(a=>{const o={};let l;for(const c in a)c===t||c.startsWith(zt)||(o[c]=a[c],l=L(l)?`${l}_${a[c]}`:`${a[c]}`);const u=a[t];u?.forEach((c,h)=>{r.push(Object.assign({},o,c,{[hr]:s,[ys]:`${l}_${h}`})),s++})}),r},v8t={fill:"#bbb",fillOpacity:.2},y8t=Object.assign(Object.assign({},Bi),{group:{name:"group",type:"group"},grid:{name:"grid",type:"rule"},gridBackground:{name:"gridBackground",type:"rect"},dot:{name:"dot",type:"symbol"},title:{name:"title",type:"text"},subTitle:{name:"subTitle",type:"text"},symbol:{name:"symbol",type:"symbol"}}),b8t={dot:{style:{size:10,fillOpacity:1}},symbol:{style:{size:10}},title:{style:{textAlign:"left",textBaseline:"middle",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},subTitle:{style:{textAlign:"left",textBaseline:"top",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}};class js extends _o{constructor(){super(...arguments),this.type=st.dot}getSeriesGroupField(){return this._seriesField}setSeriesGroupField(t){L(t)&&(this._seriesGroupField=t)}getTitleField(){return this._titleField}setTitleField(t){L(t)&&(this._titleField=t)}getSubTitleField(){return this._subTitleField}setSubTitleField(t){L(t)&&(this._subTitleField=t)}getDotTypeField(){return this._dotTypeField}setDotTypeField(t){L(t)&&(this._dotTypeField=t)}getHighLightSeriesGroup(){return this._highLightSeriesGroup}setHighLightSeriesGroup(t){L(t)&&(this._highLightSeriesGroup=t)}setGridBackground(t){L(t)&&(this._gridBackground=t)}initData(){var t;super.initData(),this._xDimensionStatisticsDomain=this.getRawData().latestData.map(e=>e[this._fieldY[0]]),Vt(this._option.dataSet,"objFlat",_8t),Vt(this._option.dataSet,"copyDataView",nT),Ul(this._option.dataSet,"dataview",uM),(t=this.getViewData())===null||t===void 0||t.transform({type:"objFlat",options:"dots",level:Qo.dotObjFlat},!1)}getStatisticFields(){return[{key:this._fieldY[0],operations:["values"],customize:this._xDimensionStatisticsDomain}]}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setSeriesGroupField(this._spec.seriesGroupField),this.setTitleField(this._spec.titleField),this.setSubTitleField(this._spec.subTitleField),this.setDotTypeField(this._spec.dotTypeField),this.setHighLightSeriesGroup(this._spec.highLightSeriesGroup),this.setGridBackground(Wt(v8t,((t=this._spec.grid)===null||t===void 0?void 0:t.background)||{}))}initMark(){this._clipMark=this._createMark(js.mark.group),this._containerMark=this._createMark(js.mark.group,{parent:this._clipMark,dataView:this.getRawData()}),this._gridBackgroundMark=this._createMark(js.mark.gridBackground,{parent:this._containerMark,dataView:this.getRawData()}),this._gridMark=this._createMark(js.mark.grid,{parent:this._containerMark,dataView:this.getRawData()}),this._dotMark=this._createMark(js.mark.dot,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark}),this._titleMark=this._createMark(js.mark.title,{parent:this._containerMark,dataView:this.getRawData()}),this._subTitleMark=this._createMark(js.mark.subTitle,{parent:this._containerMark,dataView:this.getRawData()}),this._symbolMark=this._createMark(js.mark.symbol,{parent:this._containerMark,dataView:this.getRawData()})}initMarkStyle(){var t;const e=this._clipMark;e&&(this.setMarkStyle(e,{x:-((t=this._spec.leftAppendPadding)!==null&&t!==void 0?t:0),y:0,width:1e4,height:()=>{var c;return(c=this._spec.clipHeight)!==null&&c!==void 0?c:this._region.getLayoutRect().height}},"normal",ct.Series),e.setMarkConfig({interactive:!1,clip:!0}));const n=this._containerMark;n&&(this.setMarkStyle(n,{x:this._spec.leftAppendPadding},"normal",ct.Series),n.setMarkConfig({interactive:!1}));const r=this._gridBackgroundMark;r&&this.setMarkStyle(r,{x:this.getRegionRectLeft.bind(this),x1:this.getRegionRectRight.bind(this),y:this.dataToGridBackgroundPositionY.bind(this),y1:this.dataToGridBackgroundPositionY1.bind(this),fill:this._gridBackground.fill,fillOpacity:this.dataToGridBackgroundOpacity.bind(this)},"normal",ct.Series);const s=this._gridMark;s&&this.setMarkStyle(s,{stroke:this.getColorAttribute(),x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),x1:this.getRegionRectRight.bind(this),y1:this.dataToPositionY.bind(this)},"normal",ct.Series);const a=this._dotMark;a&&this.setMarkStyle(a,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),fill:this.getDotColorAttribute(),stroke:this.getDotColorAttribute(),fillOpacity:this.dataToOpacity.bind(this)},"normal",ct.Series);const o=this._titleMark;o&&this.setMarkStyle(o,{fill:this.getColorAttribute(),text:c=>c[this.getTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",ct.Series);const l=this._subTitleMark;l&&this.setMarkStyle(l,{fill:this.getColorAttribute(),text:c=>c[this.getSubTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",ct.Series);const u=this._symbolMark;u&&this.setMarkStyle(u,{x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),fill:this.getColorAttribute()},"normal",ct.Series)}dataToGridBackgroundPositionY(t){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:e,getBandwidth:n}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._fieldY),{bandPosition:this._bandPosition})-n(0)/2}dataToGridBackgroundPositionY1(t){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:e,getBandwidth:n}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._fieldY),{bandPosition:this._bandPosition})+n(0)/2}dataToOpacity(t){var e,n,r,s;if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:a,getScale:o}=this._xAxisHelper;return a(this.getDatumPositionValues(t,this._fieldX),{bandPosition:this._bandPosition})<o(0).range()[0]||a(this.getDatumPositionValues(t,this._fieldX),{bandPosition:this._bandPosition})>o(0).range()[1]?0:(s=(r=(n=(e=this._theme)===null||e===void 0?void 0:e.dot)===null||n===void 0?void 0:n.style)===null||r===void 0?void 0:r.fillOpacity)!==null&&s!==void 0?s:1}dataToGridBackgroundOpacity(t){return t[this._seriesGroupField]===this._highLightSeriesGroup?this._gridBackground.fillOpacity:0}onLayoutEnd(){var t,e;super.onLayoutEnd();const n=(e=(t=this._spec)===null||t===void 0?void 0:t.leftAppendPadding)!==null&&e!==void 0?e:0;this.setMarkStyle(this._clipMark,{width:this.getLayoutRect().width+n},"normal",ct.Series)}getDefaultColorDomain(){var t,e;return this._seriesGroupField?(t=this.getViewDataStatistics())===null||t===void 0?void 0:t.latestData[this._seriesGroupField].values:this._seriesField?(e=this.getViewDataStatistics())===null||e===void 0?void 0:e.latestData[this._seriesField].values:[]}getColorAttribute(){var t,e,n;return{scale:(t=this._option.globalScale.getScale("color"))!==null&&t!==void 0?t:this._getDefaultColorScale(),field:(n=(e=this._seriesGroupField)!==null&&e!==void 0?e:this._seriesField)!==null&&n!==void 0?n:gs}}getDotColorScale(){var t,e,n;const r=this._dotTypeField?(t=this.getViewDataStatistics())===null||t===void 0?void 0:t.latestData[this._dotTypeField].values:this._seriesGroupField?(e=this.getViewDataStatistics())===null||e===void 0?void 0:e.latestData[this._seriesGroupField].values:this._seriesField?(n=this.getViewDataStatistics())===null||n===void 0?void 0:n.latestData[this._seriesField].values:[],s=this._getDataScheme();return new Yb().domain(r).range(s)}getDotColorAttribute(){var t,e,n,r;return{scale:(t=this._option.globalScale.getScale("color"))!==null&&t!==void 0?t:this.getDotColorScale(),field:(r=(n=(e=this._dotTypeField)!==null&&e!==void 0?e:this._seriesGroupField)!==null&&n!==void 0?n:this._seriesField)!==null&&r!==void 0?r:gs}}initTooltip(){this._tooltipHelper=new m8t(this),this._dotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._dotMark)}onEvaluateEnd(t){super.onEvaluateEnd(t)}onMarkTreePositionUpdate(t){t.forEach(e=>{e.commit(!1,!0)})}getDotData(){var t;return(t=this._dotMark)===null||t===void 0?void 0:t.getData()}_getDataIdKey(){}getStackValueField(){return null}getActiveMarks(){return[this._dotMark]}}js.type=st.dot,js.mark=y8t,js.builtInTheme={dot:b8t};const Pst=()=>{cc(),Um(),ru(),Ps(),z.registerSeries(js.type,js)};class x8t extends pr{constructor(){super(...arguments),this.shapeTypeCallback=()=>"square"}enableByType(t){return t==="mark"}getDefaultTitlePattern(t){return{key:"link info",value:"link info"}}getDefaultContentList(){return[{key:"time",value:t=>No.getInstance().timeFormat("%Y%m%d %H:%M",t.from.split("_")[1])},{key:"type",value:t=>t.action_type},{key:"from",value:t=>t.from},{key:"to",value:t=>t.to}]}}const S8t=Object.assign(Object.assign({},Bi),{group:{name:"group",type:"group"},link:{name:"link",type:"rule"},arrow:{name:"arrow",type:"symbol"}}),w8t=(i,t)=>{const{infoKey:e,fields:n,linkData:r,dotData:s}=t,{fromField:a,toField:o,xField:l,yField:u}=n(),c=r(),h=s(),d={};return h.forEach(f=>{const p={};for(const m in f)m!==e&&(p[m]=f[m]);const g=f[e];g?.forEach(m=>{d[m.node_name]=Object.assign({},p,m)})}),c.forEach(f=>{var p,g,m,_;f[a+"_xField"]=(p=d?.[f[a]])===null||p===void 0?void 0:p[l],f[a+"_yField"]=(g=d?.[f[a]])===null||g===void 0?void 0:g[u],f[o+"_xField"]=(m=d?.[f[o]])===null||m===void 0?void 0:m[l],f[o+"_yField"]=(_=d?.[f[o]])===null||_===void 0?void 0:_[u]}),c},A8t={arrow:{style:{size:10}}};class Bl extends _o{constructor(){super(...arguments),this.type=st.link}getFromField(){return this._fromField}setFromField(t){L(t)&&(this._fromField=t)}getToField(){return this._toField}setToField(t){L(t)&&(this._toField=t)}getDotTypeField(){return this._dotTypeField}setDotTypeField(t){L(t)&&(this._dotTypeField=t)}getDotSeriesSpec(){return this._dotSeriesSpec}setDotSeriesSpec(t){L(t)&&(this._dotSeriesSpec=t)}_getDotData(){const t=this._option.getChart().getSeriesInIndex([this._spec.dotSeriesIndex])[0];return t?t.getRawData().latestData:[]}initData(){var t;super.initData(),Vt(this._option.dataSet,"linkDotInfo",w8t),(t=this.getViewData())===null||t===void 0||t.transform({type:"linkDotInfo",options:{infoKey:"dots",fields:()=>({fromField:this._fromField,toField:this._toField,xField:this._dotSeriesSpec.xField,yField:this._dotSeriesSpec.yField}),linkData:()=>this._rawData.latestData,dotData:()=>this._getDotData()},level:Qo.linkDotInfo},!1)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFromField(this._spec.fromField),this.setToField(this._spec.toField),this.setDotTypeField(this._spec.dotTypeField),this.setDotSeriesSpec(this._spec.dotSeriesSpec)}initMark(){this._clipMark=this._createMark(Bl.mark.group),this._containerMark=this._createMark(Bl.mark.group,{parent:this._clipMark}),this._linkMark=this._createMark(Bl.mark.link,{skipBeforeLayouted:!1,parent:this._containerMark}),this._arrowMark=this._createMark(Bl.mark.arrow,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark})}initMarkStyle(){var t,e,n,r;const s=this._clipMark;s&&(this.setMarkStyle(s,{x:-this._spec.leftAppendPadding,y:0,width:1e4,height:this._spec.clipHeight},"normal",ct.Series),s.setMarkConfig({interactive:!1,clip:!0}));const a=this._containerMark;a&&(this.setMarkStyle(a,{x:this._spec.leftAppendPadding,width:this.getLayoutRect().width},"normal",ct.Series),a.setMarkConfig({interactive:!1}));const o=this._linkMark;o&&this.setMarkStyle(o,{stroke:this.getColorAttribute(),strokeOpacity:this.dataToOpacity.bind(this),x:this.dataToPositionXFrom.bind(this),y:this.dataToPositionYFrom.bind(this),x1:this.dataToPositionXTo.bind(this),y1:this.dataToPositionYTo.bind(this)},"normal",ct.Series);const l=this._arrowMark;if(l){const u=(r=(n=(e=(t=this._theme)===null||t===void 0?void 0:t.arrow)===null||e===void 0?void 0:e.style)===null||n===void 0?void 0:n.size)!==null&&r!==void 0?r:10;this.setMarkStyle(l,{x:this.dataToPositionXTo.bind(this),y:c=>this.dataToPositionArrowYTo(c,u),fill:this.getColorAttribute(),fillOpacity:this.dataToOpacity.bind(this),size:u,symbolType:c=>this.isPositionYFromHigher(c)?"triangleDown":"triangleUp"},"normal",ct.Series)}}afterInitMark(){super.afterInitMark()}dataToPositionXFrom(t){if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:e}=this._xAxisHelper;return e(this.getDatumPositionValues(t,this._fromField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYFrom(t){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:e}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._fromField+"_yField"))}dataToPositionXTo(t){if(!this._xAxisHelper)return Number.NaN;const{dataToPosition:e}=this._xAxisHelper;return e(this.getDatumPositionValues(t,this._toField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYTo(t){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:e}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._toField+"_yField"),{bandPosition:this._bandPosition})}dataToPositionArrowYTo(t,e){if(!this._yAxisHelper)return Number.NaN;const{dataToPosition:n}=this._yAxisHelper,r=this.isPositionYFromHigher(t)?-e/2:e/2;return n(this.getDatumPositionValues(t,this._toField+"_yField"),{bandPosition:this._bandPosition})+r}dataToOpacity(t){return this.isPositionXOuterRange(t,this._fromField+"_xField")||this.isPositionXOuterRange(t,this._toField+"_xField")||t[this._fromField]===t[this._toField]?0:1}isPositionYFromHigher(t){return this.dataToPositionYFrom(t)<this.dataToPositionYTo(t)}isPositionXOuterRange(t,e){if(!this._xAxisHelper)return!1;const{dataToPosition:n,getScale:r}=this._xAxisHelper;return n(this.getDatumPositionValues(t,e),{bandPosition:this._bandPosition})<r(0).range()[0]||n(this.getDatumPositionValues(t,e),{bandPosition:this._bandPosition})>r(0).range()[1]}getDefaultColorDomain(){var t,e;return this._dotTypeField?(t=this.getViewDataStatistics())===null||t===void 0?void 0:t.latestData[this._dotTypeField].values:this._seriesField?(e=this.getViewDataStatistics())===null||e===void 0?void 0:e.latestData[this._seriesField].values:[]}getColorAttribute(){var t,e,n;return{scale:(t=this._option.globalScale.getScale("color"))!==null&&t!==void 0?t:this._getDefaultColorScale(),field:(n=(e=this._dotTypeField)!==null&&e!==void 0?e:this._seriesField)!==null&&n!==void 0?n:gs}}getInteractionTriggers(){const t=[];return this._linkMark&&t.push(this._linkMark),this._arrowMark&&t.push(this._arrowMark),this._parseInteractionConfig(t)}initTooltip(){this._tooltipHelper=new x8t(this),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark),this._arrowMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._arrowMark)}onMarkTreePositionUpdate(t){t.forEach(e=>{e.commit(!1,!0)})}getDotInfoData(){var t,e;return(e=(t=this._linkMark)!==null&&t!==void 0?t:this._arrowMark)===null||e===void 0?void 0:e.getData()}getActiveMarks(){return[this._linkMark,this._arrowMark]}}Bl.type=st.link,Bl.mark=S8t,Bl.builtInTheme={link:A8t};const Est=()=>{Um(),cc(),Mr(),mr(),z.registerSeries(Bl.type,Bl)},Gz=Object.assign(Object.assign({},Bi),{group:{name:"group",type:"group"}});class Gm extends ex{constructor(){super(...arguments),this._arcGroupMark=null,this._getAngleValueStart=t=>{const e=this._getAngleAxis(),{tickMask:n}=this._spec;if(n?.forceAlign&&this._isTickMaskVisible(e)){const r=t[this.getStack()?ho:y1],s=this._getAngleAxisSubTickData(e),a=s[1].value-s[0].value,o=ii(n.offsetAngle);let l;if(L(r)){const u=rW(s,h=>h.value-r),c=u>=s.length||r>s[u].value-a/2?Math.min(u,s.length-1):u>0?u-1:void 0;c!==void 0&&(l=this.angleAxisHelper.dataToPosition([s[c].value-a/2]))}return N(l)&&(l=this.angleAxisHelper.dataToPosition([s[0].value-a/2])),l+o}return this._getAngleValueStartWithoutMask(t)},this._getAngleValueEnd=t=>{const e=this._getAngleAxis(),{tickMask:n}=this._spec;if(n?.forceAlign&&this._isTickMaskVisible(e)){const r=t[this.getStack()?bs:this._angleField[0]],s=this._getAngleAxisSubTickData(e),a=s[1].value-s[0].value,o=ii(n.offsetAngle),l=rW(s,h=>h.value-r),u=l>=s.length||r>s[l].value-a/2?Math.min(l,s.length-1):l>0?l-1:void 0;let c;return c=u!==void 0?this.angleAxisHelper.dataToPosition([s[u].value+a/2]):this.angleAxisHelper.dataToPosition([s[0].value-a/2]),c+o}return this._getAngleValueEndWithoutMask(t)}}setAttrFromSpec(){var t,e,n;super.setAttrFromSpec();const r=(t=this._option.globalInstance.getChart())===null||t===void 0?void 0:t.getSpec(),s=(e=this._spec.startAngle)!==null&&e!==void 0?e:r?.startAngle;this._startAngle=L(s)?ii(s):fT;const a=(n=this._spec.endAngle)!==null&&n!==void 0?n:r?.endAngle;this._endAngle=L(a)?ii(a):Tz,this.setAngleField(this._spec.valueField||this._spec.angleField),this.setRadiusField(this._spec.categoryField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice()}getStackGroupFields(){return this._radiusField}getStackValueField(){var t;return(t=this._angleField)===null||t===void 0?void 0:t[0]}getGroupFields(){return this._angleField}_convertMarkStyle(t){const e=super._convertMarkStyle(t);if(e.fill){const n=t.fill;n?.gradient!=="conical"||L(n?.startAngle)||L(n?.endAngle)||(e.fill=Object.assign(Object.assign({},n),{startAngle:this._startAngle,endAngle:this._endAngle}))}return e}_getAngleValueStartWithoutMask(t){if(this.getStack()){const e=He(this.angleAxisHelper.dataToPosition([t[ho]]),this.angleAxisHelper.getScale(0));if(et(e))return e}return this._startAngle}_getAngleValueEndWithoutMask(t){if(this.getStack()){const n=He(this.angleAxisHelper.dataToPosition([t[bs]]),this.angleAxisHelper.getScale(0));if(et(n))return n}const e=this.angleAxisHelper.dataToPosition([t[this._angleField[0]]]);return this._spec.clamp?He(e,this.angleAxisHelper.getScale(0)):e}getDimensionField(){return this._specRadiusField}getMeasureField(){return this._specAngleField}initMark(){this._initArcGroupMark()}initMarkStyle(){this._initArcGroupMarkStyle()}_initArcGroupMark(){return this._arcGroupMark=this._createMark(Gm.mark.group,{skipBeforeLayouted:!1}),this._arcGroupMark}_initArcGroupMarkStyle(){const t=this._arcGroupMark;t.created(),this.setMarkStyle(t,{x:0,y:0},"normal",ct.Series),this._arcGroupMark.setMarkConfig({interactive:!1,zIndex:this.layoutZIndex,clip:!0,clipPath:()=>{const e=this._getAngleAxis(),{x:n,y:r}=this.angleAxisHelper.center(),s=this._computeLayoutRadius();if(this._isTickMaskVisible(e)){const{tickMask:l}=this._spec,{angle:u,offsetAngle:c,style:h={}}=l,d=this._getAngleAxisSubTickData(e),f=h;return d.map(({value:p})=>{const g=this.angleAxisHelper.dataToPosition([p])+ii(c),m=ii(u)/2;return DF(Object.assign(Object.assign({},f),{x:n,y:r,startAngle:g-m,endAngle:g+m,innerRadius:s*this._innerRadius,outerRadius:s*this._outerRadius,fill:!0}))})}const{width:a,height:o}=this.getLayoutRect();return[_f({width:a,height:o,fill:!0})]}})}_getAngleAxis(){if(!this.angleAxisHelper)return;const t=this.angleAxisHelper.getAxisId();return this._option.getChart().getAllComponents().find(e=>e.id===t)}_getAngleAxisTickData(t){var e;return(e=t?.getTickData())===null||e===void 0?void 0:e.getLatestData()}_isTickMaskVisible(t){const e=this._getAngleAxisTickData(t),{tickMask:n}=this._spec;return n&&n.visible!==!1&&e?.length>1}_getAngleAxisSubTickData(t){var e;const n=this._getAngleAxisTickData(t),r=[],{subTick:s={},tick:a={}}=(e=t?.getSpec())!==null&&e!==void 0?e:{},{tickCount:o=4}=s,{alignWithLabel:l}=a;if(n?.length>=2){const u=n[1].value-n[0].value;for(let c=0;c<n.length-1;c++){const h=n[c],d=n[c+1];r.push(h);for(let f=0;f<o;f++){const p=(f+1)/(o+1),g=(1-p)*h.value+p*(d?d.value:l?1:h.value+u);r.push({value:g})}}return r.push(n[n.length-1]),r}return n}}Gm.mark=Gz;const k8t=Object.assign(Object.assign({},Gz),{track:{name:"track",type:"arc"},progress:{name:"progress",type:"arc"}}),C8t=i=>({type:"growAngleIn",options:{overall:i.startAngle}}),M8t={type:"fadeIn"};function T8t(i,t){return t==="fadeIn"?M8t:C8t(i)}const Rst=()=>{z.registerAnimation("circularProgress",(i,t)=>({appear:T8t(i,t),enter:{type:"growAngleIn"},disappear:{type:"growAngleOut"}}))};class Ost extends gr{constructor(){super(...arguments),this._supportStack=!0}}const P8t={outerRadius:.8,innerRadius:.6,progress:{style:{fillOpacity:1}},track:{style:{fillOpacity:.2}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}};class Iu extends Gm{constructor(){super(...arguments),this.type=st.circularProgress,this.transformerConstructor=Ost,this._progressMark=null,this._trackMark=null,this._getRadiusValueStart=t=>{if(this.getGroupFields().length>1){const e=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()));if(et(e))return e}return this.radiusAxisHelper.dataToPosition([t[this._radiusField[0]]])},this._getRadiusValueEnd=t=>{var e,n;if(this.getGroupFields().length>1){const r=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()))+((n=(e=this.radiusAxisHelper).getBandwidth)===null||n===void 0?void 0:n.call(e,this._groups?this._groups.fields.length-1:0));if(et(r))return r}return this.radiusAxisHelper.dataToPosition([t[this._radiusField[0]]])+this.radiusAxisHelper.getScale(0).step()}}getStackGroupFields(){return this.getGroupFields()}getGroupFields(){return this._radiusField}initMark(){super.initMark(),this._initTrackMark(),this._initProgressMark()}initMarkStyle(){super.initMarkStyle(),this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){return this._progressMark=this._createMark(Iu.mark.progress,{parent:this._arcGroupMark,isSeriesMark:!0},{morph:fo(this._spec,"progress")}),this._progressMark}_initProgressMarkStyle(){var t;const e=this._progressMark;e&&this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart,endAngle:this._getAngleValueEnd,innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cap:(t=this._spec.roundCap)!==null&&t!==void 0&&t,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0},"normal",ct.Series)}getInteractionTriggers(){const t=[];return this._trackMark&&t.push(this._trackMark),this._progressMark&&t.push(this._progressMark),this._parseInteractionConfig(t)}initTooltip(){super.initTooltip(),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark)}_initTrackMark(){return this._trackMark=this._createMark(Iu.mark.track,{parent:this._arcGroupMark}),this._trackMark.setMarkConfig({morph:!1,morphKey:null,morphElementKey:null}),this._trackMark}_initTrackMarkStyle(){const t=this._trackMark;t&&this.setMarkStyle(t,{visible:e=>{const n=this.angleAxisHelper.getScale(0).range(),r=Math.min(n[0],n[n.length-1]),s=this._getAngleValueStartWithoutMask(e);return Math.abs(s-r)<=1e-14},x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:()=>{const e=this.getStack()?ho:this._angleField[0],n=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueStart({[e]:n[0]})},endAngle:()=>{const e=this.getStack()?bs:this._angleField[0],n=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueEnd({[e]:n[n.length-1]})},innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:100},"normal",ct.Series)}initAnimation(){var t,e,n,r;const s=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._progressMark.setAnimationConfig(ye((n=z.getAnimationInKey("circularProgress"))===null||n===void 0?void 0:n({startAngle:this._startAngle},s),Ce("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(ye((r=z.getAnimationInKey("fadeInOut"))===null||r===void 0?void 0:r(),Ce("track",this._spec,this._markAttributeContext)))}getActiveMarks(){return[this._progressMark]}}Iu.type=st.circularProgress,Iu.mark=k8t,Iu.builtInTheme={circularProgress:P8t},Iu.transformerConstructor=Ost;const Yz=()=>{z.registerSeries(Iu.type,Iu),Oh(),Rst(),rl(),Cf(),Dh()};function Dst(i){return()=>i.direction==="vertical"?{orient:"negative"}:{orient:"positive"}}const E8t=i=>({type:i.direction==="horizontal"?"growWidthIn":"growHeightIn",options:Dst(i)}),R8t=i=>({type:i.direction==="horizontal"?"growWidthOut":"growHeightOut",options:Dst(i)}),O8t={type:"fadeIn"};function rY(i,t="grow"){return t===!1?{}:t==="fadeIn"?O8t:E8t(i)}const D8t=()=>{z.registerAnimation("linearProgress",(i,t)=>({appear:rY(i,t),enter:rY(i),disappear:R8t(i)}))};class I8t extends pr{enableByType(t){return t!=="dimension"}}const L8t=Object.assign(Object.assign({},Bi),{track:{name:"track",type:"rect"},progress:{name:"progress",type:"rect"},group:{name:"group",type:"group"}}),B8t={bandWidth:30,progress:{style:{fillOpacity:1}},track:{style:{fill:{type:"palette",key:"linearProgressTrackColor"},fillOpacity:1}}};class ih extends _o{constructor(){super(...arguments),this.type=st.linearProgress,this._progressMark=null,this._trackMark=null,this._defaultProgressCustomShape=(t,e,n)=>{var r,s;const a=(r=this._spec)===null||r===void 0?void 0:r.cornerRadius,o=L(e.width)?e.width:e.x1-e.x,l=L(e.height)?e.height:e.y1-e.y,u=Math.min(0,o),c=Math.max(0,o),h=Math.min(0,l),d=Math.max(0,l);if(a>0){let f=a;if(((s=this._spec)===null||s===void 0?void 0:s.direction)==="vertical"){if(f=Math.min(Math.abs(o/2),a),2*f>Math.abs(l)){const p=Math.acos((f-Math.abs(l)/2)/f);return n.moveTo(u+f,h),n.arc(u+f,h+f,f,1.5*Math.PI,1.5*Math.PI-p,!0),n.arc(u+f,d-f,f,p+Math.PI/2,Math.PI/2,!0),n.lineTo(c-a,d),n.arc(c-f,d-f,f,Math.PI/2,Math.PI/2-p,!0),n.arc(c-f,h+f,f,-Math.PI/2+p,-Math.PI/2,!0),n.lineTo(u+f,h),n.closePath(),n}}else if(f=Math.min(Math.abs(l/2),a),2*f>Math.abs(o)){const p=Math.acos((f-Math.abs(o)/2)/f);return n.moveTo(u,h+f),n.arc(u+f,h+f,f,Math.PI,Math.PI+p),n.arc(c-f,h+f,f,-p,0),n.lineTo(c,d-f),n.arc(c-f,d-f,f,0,p),n.arc(u+f,d-f,f,Math.PI-p,Math.PI),n.closePath(),n}n.moveTo(u,h+f),n.arc(u+f,h+f,f,Math.PI,1.5*Math.PI),n.lineTo(c-f,h),n.arc(c-f,h+f,f,-Math.PI/2,0),n.lineTo(c,d-f),n.arc(c-f,d-f,f,0,Math.PI/2),n.lineTo(u+f,d),n.arc(u+f,d-f,f,Math.PI/2,Math.PI),n.closePath()}else n.moveTo(u,h),n.lineTo(c,h),n.lineTo(c,d),n.lineTo(u,d),n.closePath();return n}}initMark(){this._initTrackMark(),this._initProgressMark()}initMarkStyle(){this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){var t;return this._progressMark=this._createMark(ih.mark.progress,{isSeriesMark:!0}),N((t=this._spec.progress)===null||t===void 0?void 0:t.customShape)&&this._progressMark.setMarkConfig({setCustomizedShape:this._defaultProgressCustomShape}),this._progressMark}_initProgressMarkStyle(){var t,e,n,r;const s=this._progressMark;if(s)if(this._spec.direction==="vertical"){const a=this._spec.progress||{},o=(t=a.leftPadding)!==null&&t!==void 0?t:0,l=(e=a.rightPadding)!==null&&e!==void 0?e:0;this.setMarkStyle(s,{x:u=>{var c,h;return He(this.dataToPositionX(u),(h=(c=this._xAxisHelper)===null||c===void 0?void 0:c.getScale)===null||h===void 0?void 0:h.call(c,0),!0)-this._spec.bandWidth/2+o},y1:u=>{var c,h;return He(this.dataToPositionY(u),(h=(c=this._yAxisHelper)===null||c===void 0?void 0:c.getScale)===null||h===void 0?void 0:h.call(c,0))},y:()=>{var u,c,h;const d=(u=this._yAxisHelper)===null||u===void 0?void 0:u.dataToPosition([0],{bandPosition:this._bandPosition});return this._spec.clamp?He(d,(h=(c=this._yAxisHelper)===null||c===void 0?void 0:c.getScale)===null||h===void 0?void 0:h.call(c,0)):d},width:this._spec.bandWidth-o-l,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",ct.Series)}else{const a=this._spec.progress||{},o=(n=a.topPadding)!==null&&n!==void 0?n:0,l=(r=a.bottomPadding)!==null&&r!==void 0?r:0;this.setMarkStyle(s,{x1:u=>{var c,h;return He(this.dataToPositionX(u),(h=(c=this._xAxisHelper)===null||c===void 0?void 0:c.getScale)===null||h===void 0?void 0:h.call(c,0))},y:u=>{var c,h;return He(this.dataToPositionY(u),(h=(c=this._yAxisHelper)===null||c===void 0?void 0:c.getScale)===null||h===void 0?void 0:h.call(c,0),!0)-this._spec.bandWidth/2+o},height:this._spec.bandWidth-o-l,x:()=>{var u,c,h;const d=(u=this._xAxisHelper)===null||u===void 0?void 0:u.dataToPosition([0],{bandPosition:this._bandPosition});return this._spec.clamp?He(d,(h=(c=this._xAxisHelper)===null||c===void 0?void 0:c.getScale)===null||h===void 0?void 0:h.call(c,0)):d},cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",ct.Series)}}_initTrackMark(){return this._trackMark=this._createMark(ih.mark.track),this._trackMark}_initTrackMarkStyle(){const t=this._trackMark;t&&(this._spec.direction==="vertical"?this.setMarkStyle(t,{x:e=>{var n,r;return He(this.dataToPositionX(e),(r=(n=this._xAxisHelper)===null||n===void 0?void 0:n.getScale)===null||r===void 0?void 0:r.call(n,0),!0)-this._spec.bandWidth/2},y:0,width:this._spec.bandWidth,height:()=>this._scaleY.range()[0],cornerRadius:this._spec.cornerRadius},"normal",ct.Series):this.setMarkStyle(t,{x:0,y:e=>{var n,r;return He(this.dataToPositionY(e),(r=(n=this._yAxisHelper)===null||n===void 0?void 0:n.getScale)===null||r===void 0?void 0:r.call(n,0),!0)-this._spec.bandWidth/2},height:this._spec.bandWidth,width:()=>this._scaleX.range()[1],cornerRadius:this._spec.cornerRadius},"normal",ct.Series))}getInteractionTriggers(){const t=[];return this._trackMark&&t.push(this._trackMark),this._progressMark&&t.push(this._progressMark),this._parseInteractionConfig(t)}initAnimation(){var t,e,n,r;const s={direction:this.direction},a=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._progressMark.setAnimationConfig(ye((n=z.getAnimationInKey("linearProgress"))===null||n===void 0?void 0:n(s,a),Ce("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(ye((r=z.getAnimationInKey("fadeInOut"))===null||r===void 0?void 0:r(),Ce("track",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new I8t(this),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark),this._trackMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._trackMark)}getActiveMarks(){return[this._progressMark]}}ih.type=st.linearProgress,ih.mark=L8t,ih.builtInTheme={linearProgress:B8t};const Ist=()=>{ru(),D8t(),rl(),z.registerSeries(ih.type,ih)},sY=[0],F8t="hidden",aY=20,z8t=[20,40],N8t=[200,500],j8t="circle",H8t={shrink:!1,enlarge:!1,fontSizeLimitMin:0},V8t=!0,oY=1,W8t=["triangleForward","triangle","diamond","square","star","cardioid","circle","pentagon","rect"],$8t=`${zt}_WORD_CLOUD_TEXT`,U8t=Object.assign(Object.assign({},Bi),{word:{name:"word",type:"text"},fillingWord:{name:"fillingWord",type:"text"},wordMask:{name:"wordMask",type:"rect"}}),G8t={word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}};class dh extends tc{constructor(){super(...arguments),this._fontSizeRange=[aY,aY],this._isWordCloudShape=!1,this._dataChange=!0,this.handleMaskCanvasUpdate=(t,e)=>{this._maskCanvas=t},this.getWordColor=t=>t.isFillingWord?(this._fillingColorCallback&&!this._dataChange||(this._fillingColorCallback=this._wordCloudShapeConfig.fillingColorHexField?e=>e[this._wordCloudShapeConfig.fillingColorHexField]:this.initColorCallback(this._wordCloudShapeConfig.fillingSeriesField,!0)),this._fillingColorCallback(t)):(this._keyWordColorCallback&&!this._dataChange||(this._keyWordColorCallback=this._spec.colorHexField?e=>e[this._spec.colorHexField]:this.initColorCallback(this._seriesField,!1)),this._keyWordColorCallback(t)),this._calculateFontWeight=t=>{const e=this.getRawDataStatisticsByField(this._valueField,!0);return e.min===e.max?this._fontWeightRange[0]:this._fontWeightRange[0]+(this._fontWeightRange[this._fontWeightRange.length-1]-this._fontWeightRange[0])*(t[this._valueField]-e.min)/(e.max-e.min)}}setValueField(t){L(t)&&(this._valueField=t)}setFontSizeRange(t){L(t)?this._fontSizeRange=t:this._fontSizeRange=z8t}setAttrFromSpec(){var t,e,n,r,s;super.setAttrFromSpec(),this._padding=this._option.getChart().padding,this._nameField=this._spec.nameField,this._colorMode=(t=this._spec.colorMode)!==null&&t!==void 0?t:"ordinal",this._colorList=this._spec.colorList,this.setValueField(this._spec.valueField),this._fontWeightRange=(e=this._spec.fontWeightRange)!==null&&e!==void 0?e:N8t,this._rotateAngles=(n=this._spec.rotateAngles)!==null&&n!==void 0?n:sY,this.setFontSizeRange(this._spec.fontSizeRange),this._maskShape=(r=this._spec.maskShape)!==null&&r!==void 0?r:j8t,this._textField=!((s=this._spec.word)===null||s===void 0)&&s.formatMethod?$8t:this._nameField;const a=this._spec.wordCloudConfig;this._wordCloudConfig=Object.assign({drawOutOfBound:F8t,layoutMode:"default",zoomToFit:H8t},this._spec.wordCloudConfig),a&&!N(a.layoutMode)||$l(this._option.mode)||(this._wordCloudConfig.layoutMode="fast"),this._wordCloudShapeConfig=Object.assign({fillingSeriesField:this.getSeriesField(),fillingRotateAngles:sY,layoutMode:"default"},this._spec.wordCloudShapeConfig),this._isWordCloudShape=!W8t.includes(this._maskShape)&&!["fast","grid","cloud"].includes(this._wordCloudConfig.layoutMode),this._defaultFontFamily=this._option.getTheme("fontFamily")}initData(){var t,e;super.initData(),(e=(t=this.getViewData())===null||t===void 0?void 0:t.target)===null||e===void 0||e.addListener("change",()=>{this._dataChange=!0,this.compile()})}initMark(){var t;this._wordMark=this._createMark(dh.mark.word,{key:ys,groupKey:this._seriesField,isSeriesMark:!0},{morphElementKey:this._seriesField}),!((t=this._spec.wordMask)===null||t===void 0)&&t.visible&&(this._maskMark=this._createMark(dh.mark.wordMask,{dataView:!1}),this._maskMark.setMarkConfig({zIndex:ti.Mark-1}))}initMarkStyle(){this.initMarkStyleOfWord(this._wordMark,this._spec.word,this._spec.colorHexField,this._seriesField),this._maskMark&&this.setMarkStyle(this._maskMark,{width:()=>this._region.getLayoutRect().width,height:()=>this._region.getLayoutRect().height,background:()=>this._maskCanvas},"normal",ct.Series)}initMarkStyleOfWord(t,e,n,r,s){var a,o;t&&(this.setMarkStyle(t,{text:e?.formatMethod?l=>e.formatMethod(l):l=>l[this._textField],x:l=>l.x,y:l=>l.y,fontSize:l=>l.fontSize,fontStyle:l=>l.fontStyle,angle:l=>l.angle,visible:l=>l.visible},"normal",ct.Series),this.setMarkStyle(t,{fill:(o=(a=e?.style)===null||a===void 0?void 0:a.fill)!==null&&o!==void 0?o:this.getWordColor,fontWeight:l=>l.fontWeight,fontFamily:l=>l.fontFamily},"normal",ct.User_Mark))}initTooltip(){super.initTooltip(),this._wordMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._wordMark)}initAnimation(){[this._wordMark].forEach(t=>{var e,n;if(t){const r=(n=(e=this._spec)===null||e===void 0?void 0:e.animationAppear)===null||n===void 0?void 0:n.preset,s={animationConfig:()=>{var a,o;return(o=(a=t.getAnimationConfig())===null||a===void 0?void 0:a.appear)===null||o===void 0?void 0:o[0]}};t.setAnimationConfig(ye(z.getAnimationInKey("wordCloud")(s,r),Ce("word",this._spec,this._markAttributeContext)))}})}getWordOrdinalColorScale(t,e){var n,r,s,a,o;const l=e?this._wordCloudShapeConfig.fillingColorList:this._colorList,u=t?(n=this.getViewData())===null||n===void 0?void 0:n.latestData.map(h=>h[t]):[],c=(s=l??((r=this._option.globalScale.getScale("color"))===null||r===void 0?void 0:r.range()))!==null&&s!==void 0?s:this._getDataScheme();return(o=(a=new Yb().domain(u)).range)===null||o===void 0?void 0:o.call(a,c)}initColorCallback(t,e){var n,r,s,a;if(this._colorMode==="ordinal"){const u=this.getWordOrdinalColorScale(t,e);return c=>u.scale(c[t??gs])}const o=(n=e?this._colorList:this._wordCloudShapeConfig.fillingColorList)!==null&&n!==void 0?n:this._option.globalScale.getScale("color").range();if(o.length===1)return u=>o[0];if(this._valueField){const u=this.getRawDataStatisticsByField(this._valueField,!0);if(u.min===u.max)return o[0];const c=new vs().domain([u.min,u.max]).range(o);return h=>c.scale(h[this._valueField])}const l=new vs().domain([0,(a=(s=(r=this.getViewData())===null||r===void 0?void 0:r.latestData)===null||s===void 0?void 0:s.length)!==null&&a!==void 0?a:1]).range(o);return u=>l.scale(u[hr])}compile(){super.compile();const{width:t,height:e}=this._region.getLayoutRect();if(!et(t)||!et(e)||!(e>0&&t>0))return;const n=[];this._isWordCloudShape?n.push(Object.assign({type:"wordcloudShape"},this._wordCloudShapeTransformOption())):n.push(Object.assign({type:"wordcloud"},this._wordCloudTransformOption())),this._wordMark.setTransform(n)}_getCommonTransformOptions(){var t,e,n,r,s;const{width:a,height:o}=this._region.getLayoutRect(),l=(t=this._spec.word)!==null&&t!==void 0?t:{},u=(e=l.style)!==null&&e!==void 0?e:{};return{size:[a,o],shape:ee(this._maskShape)&&this._maskShape.type==="text"&&N(this._maskShape.fontFamily)?Object.assign({fontFamily:this._option.getTheme("fontFamily")},this._maskShape):this._maskShape,onUpdateMaskCanvas:this.handleMaskCanvasUpdate,onLayoutFinished:()=>{const c=()=>{var h,d,f,p;this._option.globalInstance.getStage().hooks.afterRender.taps=this._option.globalInstance.getStage().hooks.afterRender.taps.filter(g=>g.fn!==c),(d=(h=this._option).dispatchEvent)===null||d===void 0||d.call(h,Tt.afterWordcloudShapeDraw,{instance:this._option.globalInstance}),(p=(f=this._option.globalInstance.getChart().getOption().performanceHook)===null||f===void 0?void 0:f.afterWordcloudShapeDraw)===null||p===void 0||p.call(f,this._option.globalInstance)};this._option.globalInstance.getStage().hooks.afterRender.taps.push({type:"sync",name:"afterWordcloudShapeDraw",fn:c})},dataIndexKey:ys,text:l.formatMethod?c=>l.formatMethod(c):{field:this._textField},fontSize:this._valueField?{field:this._valueField}:this._fontSizeRange[0],fontSizeRange:this._fontSizeRange==="auto"?null:this._fontSizeRange,padding:(r=(n=this._spec.word)===null||n===void 0?void 0:n.padding)!==null&&r!==void 0?r:oY,fontFamily:L(this._spec.fontFamilyField)?{field:this._spec.fontFamilyField}:(s=u.fontFamily)!==null&&s!==void 0?s:this._defaultFontFamily,fontWeight:L(this._spec.fontWeightField)?{field:this._spec.fontWeightField}:L(u.fontWeight)?u.fontWeight:L(this._valueField)?this._calculateFontWeight:"normal",fontStyle:L(this._spec.fontStyleField)?{field:this._spec.fontStyleField}:u.fontStyle,createCanvas:Qt.createCanvas.bind(Qt),getTextBounds:EM}}_wordCloudTransformOption(){var t,e;const n=(t=this._wordCloudConfig)!==null&&t!==void 0?t:{};return Object.assign(Object.assign(Object.assign({},n),this._getCommonTransformOptions()),{layoutType:this._wordCloudConfig.layoutMode,rotate:this._rotateAngles,randomVisible:(e=this._spec.random)!==null&&e!==void 0?e:V8t,clip:this._wordCloudConfig.drawOutOfBound==="clip",shrink:this._wordCloudConfig.zoomToFit.shrink,enlarge:this._wordCloudConfig.zoomToFit.enlarge,minFontSize:this._wordCloudConfig.zoomToFit.fontSizeLimitMin,progressiveTime:this._wordCloudConfig.progressiveTime,progressiveStep:this._wordCloudConfig.progressiveStep,repeatFill:this._wordCloudConfig.zoomToFit.repeat})}_wordCloudShapeTransformOption(){var t,e,n,r,s,a;const o=(e=(t=this._spec.fillingWord)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{},l=(n=this._wordCloudShapeConfig)!==null&&n!==void 0?n:{};return Object.assign(Object.assign(Object.assign({},l),this._getCommonTransformOptions()),{createImage:PF,rotateList:this._rotateAngles,fillingRotateList:l.fillingRotateAngles,fillingFontFamily:L(l.fillingFontFamilyField)?{field:l.fillingFontFamilyField}:(r=o.fontFamily)!==null&&r!==void 0?r:this._defaultFontFamily,fillingPadding:(a=(s=this._spec.fillingWord)===null||s===void 0?void 0:s.padding)!==null&&a!==void 0?a:oY,fillingFontStyle:L(l.fillingFontStyleField)?{field:l.fillingFontStyleField}:o.fontStyle,fillingFontWeight:L(l.fillingFontWeightField)?{field:l.fillingFontWeightField}:o.fontWeight})}getStatisticFields(){const t=[];return t.push({key:this._nameField,operations:["values"]}),t.push({key:this._valueField,operations:["max","min"]}),t}dataToPosition(t){return null}dataToPositionX(t){return null}dataToPositionY(t){return null}dataToPositionZ(t){return null}valueToPosition(t,e){return null}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}onLayoutEnd(){super.onLayoutEnd(),this.compile(),this._dataChange=!1}getActiveMarks(){return[this._wordMark]}reInit(){super.reInit(),this._keyWordColorCallback&&(this._keyWordColorCallback=null),this._fillingColorCallback&&(this._fillingColorCallback=null)}}dh.mark=U8t,dh.builtInTheme={wordCloud:G8t};function Y8t(i,t,e){return i*e<t?i+(t-e*i)/(e-1):(t-i)/(e-1)}const X8t=i=>({type:"scaleIn",duration:200,delay:(t,e)=>{const n=i.animationConfig(),r=n?.duration||200,s=n?.totalTime||Ll.appear.duration,a=e.context.graphicCount;return e.context.graphicIndex*Y8t(r,s,a)}});function K8t(i,t){return t===!1?{}:t==="fadeIn"?{type:"fadeIn"}:X8t(i)}const Lst=()=>{z.registerAnimation("wordCloud",(i,t)=>({appear:K8t(i,t),enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}}))},TT=(i,t,e=0,n=-1,r,s,a="value")=>{let o=0,l=n??-1,u=e;return i.forEach((c,h)=>{var d,f;const p={flattenIndex:++l,key:s?s(c):`${(d=r?.key)!==null&&d!==void 0?d:""}-${h}`,maxDepth:-1,depth:e,index:h,value:c[a],isLeaf:!0,datum:r?r.datum.concat(c):[c],parentKey:r?.key};if(!((f=c.children)===null||f===void 0)&&f.length){p.children=[],p.isLeaf=!1;const g=TT(c.children,p.children,e+1,l,p,s,a);p.value=N(c[a])?g.sum:Math.max(g.sum,xd(c[a])),l=g.flattenIndex,u=Math.max(g.maxDepth,u)}else p.isLeaf=!0,p.value=xd(c[a]);o+=Math.abs(p.value),t.push(p)}),{sum:o,maxDepth:u,flattenIndex:l}},hp=(i,t,e,n)=>{let r=n;return i.forEach((s,a)=>{var o;r=t(s,a,e,r),!((o=s.children)===null||o===void 0)&&o.length&&(r=hp(s.children,t,s,r))}),n},S1=(i,t,e,n)=>{let r=n;return i.forEach((s,a)=>{var o;!((o=s.children)===null||o===void 0)&&o.length&&(r=S1(s.children,t,s,r)),r=t(s,a,e,r)}),r},Xz=(i,t=[],e)=>{const n=e?.maxDepth>=0;return i.forEach(r=>{(!n||r.depth<=e.maxDepth)&&(t.push(e?.callback?e.callback(r):r),r.children&&(n&&r.depth===e.maxDepth?(r.children=null,r.isLeaf=!0):Xz(r.children,t,e)))}),t};function q8t(i,t){let e=0;const n=oJ(Array.from(i),t),r=n.length;let s,a,o=[];for(;e<r;)s=n[e],a&&Bst(a,s)?++e:(o=Z8t(o,s),a=Q8t(o),e=0);return a}function Z8t(i,t){let e,n;if(iR(t,i))return[t];for(e=0;e<i.length;++e)if(BS(t,i[e])&&iR(sv(i[e],t),i))return[i[e],t];for(e=0;e<i.length-1;++e)for(n=e+1;n<i.length;++n)if(BS(sv(i[e],i[n]),t)&&BS(sv(i[e],t),i[n])&&BS(sv(i[n],t),i[e])&&iR(Fst(i[e],i[n],t),i))return[i[e],i[n],t];Ee.getInstance().error("error when packEncloseRandom")}function BS(i,t){const e=i.radius-t.radius,n=t.x-i.x,r=t.y-i.y;return e<0||e*e<n*n+r*r}function Bst(i,t){const e=i.radius-t.radius+1e-9*Math.max(i.radius,t.radius,1),n=t.x-i.x,r=t.y-i.y;return e>0&&e*e>n*n+r*r}function iR(i,t){for(let e=0;e<t.length;++e)if(!Bst(i,t[e]))return!1;return!0}function Q8t(i){switch(i.length){case 1:return J8t(i[0]);case 2:return sv(i[0],i[1]);case 3:return Fst(i[0],i[1],i[2])}}function J8t(i){return{x:i.x,y:i.y,radius:i.radius}}function sv(i,t){const e=i.x,n=i.y,r=i.radius,s=t.x,a=t.y,o=t.radius,l=s-e,u=a-n,c=o-r,h=Math.sqrt(l*l+u*u);return{x:(e+s+l/h*c)/2,y:(n+a+u/h*c)/2,radius:(h+r+o)/2}}function Fst(i,t,e){const n=i.x,r=i.y,s=i.radius,a=t.x,o=t.y,l=t.radius,u=e.x,c=e.y,h=e.radius,d=n-a,f=n-u,p=r-o,g=r-c,m=l-s,_=h-s,v=n*n+r*r-s*s,y=v-a*a-o*o+l*l,b=v-u*u-c*c+h*h,x=f*p-d*g,S=(p*b-g*y)/(2*x)-n,w=(g*m-p*_)/x,A=(f*y-d*b)/(2*x)-r,k=(d*_-f*m)/x,C=w*w+k*k-1,M=2*(s+S*w+A*k),R=S*S+A*A-s*s,P=-(Math.abs(C)>1e-6?(M+Math.sqrt(M*M-4*C*R))/(2*C):R/M);return{x:n+S+w*P,y:r+A+k*P,radius:P}}function lY(i,t,e){const n=i.x-t.x;let r,s;const a=i.y-t.y;let o,l;const u=n*n+a*a;u?(s=t.radius+e.radius,s*=s,l=i.radius+e.radius,l*=l,s>l?(r=(u+l-s)/(2*u),o=Math.sqrt(Math.max(0,l/u-r*r)),e.x=i.x-r*n-o*a,e.y=i.y-r*a+o*n):(r=(u+s-l)/(2*u),o=Math.sqrt(Math.max(0,s/u-r*r)),e.x=t.x+r*n-o*a,e.y=t.y+r*a+o*n)):(e.x=t.x+e.radius,e.y=t.y)}function uY(i,t){const e=i.radius+t.radius-1e-6,n=t.x-i.x,r=t.y-i.y;return e>0&&e*e>n*n+r*r}function cY(i){const t=i._,e=i.next._,n=t.radius+e.radius,r=(t.x*e.radius+e.x*t.radius)/n,s=(t.y*e.radius+e.y*t.radius)/n;return r*r+s*s}function FS(i){return{_:i,next:null,prev:null}}function t6t(i,t){const e=(i=X(i)).length;if(!e)return 0;let n=i[0];if(n.x=0,n.y=0,e===1)return n.radius;const r=i[1];if(n.x=-r.radius,r.x=n.radius,r.y=0,e===2)return n.radius+r.radius;let s=i[2];lY(r,n,s);let a,o,l,u,c,h,d,f=FS(n),p=FS(r),g=FS(s);f.next=p,g.prev=p,p.next=g,f.prev=g,g.next=f,p.prev=f;for(let _=3;_<e;++_){d=!1,s=i[_],lY(f._,p._,s),g=FS(s),a=p.next,o=f.prev,l=p._.radius,u=f._.radius;do if(l<=u){if(uY(a._,g._)){p=a,f.next=p,p.prev=f,--_,d=!0;break}l+=a._.radius,a=a.next}else{if(uY(o._,g._)){f=o,f.next=p,p.prev=f,--_,d=!0;break}u+=o._.radius,o=o.prev}while(a!==o.next);if(!d){for(g.prev=f,g.next=p,f.next=p.prev=p=g,c=cY(f),g=g.next;g!==p;)h=cY(g),h<c&&(f=g,c=h),g=g.next;p=f.next}}const m=[p._];for(g=p.next;g!==p;)m.push(g._),g=g.next;s=q8t(m,t);for(let _=0;_<e;++_)n=i[_],n.x-=s.x,n.y-=s.y;return s.radius}function hY(i){return function(t){t.children||(t.radius=Math.max(0,+i(t)||0))}}function nR(i,t,e){return function(n){const r=n?.children;if(r){let s;const a=r.length,o=i(n)*t||0;if(o)for(s=0;s<a;++s)r[s].radius+=o;const l=t6t(r,e);if(o)for(s=0;s<a;++s)r[s].radius-=o;n.radius=l+o}}}function dY(i,t){return function(e,n,r){e.radius*=i,e.maxDepth=t,r&&(e.x=r.x+i*e.x,e.y=r.y+i*e.y)}}class $0{constructor(t){this.options=t;const e=t?.nodeKey,n=it(e)?e:e?Hg(e):null;this._getNodeKey=n,this._getPadding=yt(t?.padding)?r=>t.padding:J(t?.padding)?r=>{var s;return(s=t.padding[r.depth+1])!==null&&s!==void 0?s:0}:()=>0,this._maxDepth=-1}layout(t,e){var n;const r="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)};if(!t||!t.length)return[];const s=[],a=TT(t,s,0,-1,null,this._getNodeKey);this._maxDepth=a.maxDepth;const o=jPt(),l={flattenIndex:-1,maxDepth:-1,key:"root",depth:-1,index:-1,value:a.sum,datum:null,children:s,x:r.x0+r.width/2,y:r.y0+r.height/2},{nodeSort:u,setRadius:c,padding:h,includeRoot:d}=(n=this.options)!==null&&n!==void 0?n:{};if(u!==!1){const f=it(u)?this.options.nodeKey:$0.defaultOpionts.nodeSort;hp([l],p=>{p.children&&p.children.length&&p.children.sort(f)})}if(c)hp([l],hY(c)),S1([l],nR(this._getPadding,.5,o)),hp([l],dY(1,this._maxDepth));else{const f=Math.min(r.width,r.height);hp([l],hY($0.defaultOpionts.setRadius)),S1([l],nR(WPt,1,o)),h&&S1([l],nR(this._getPadding,l.radius/f,o)),hp([l],dY(f/(2*l.radius),this._maxDepth))}return d?[l]:s}}$0.defaultOpionts={setRadius:i=>Math.sqrt(i.value),padding:0,nodeSort:(i,t)=>t.value-i.value};const zst=i=>{let t=0;return i.forEach((e,n)=>{var r;N(e.value)&&(!((r=e.children)===null||r===void 0)&&r.length?e.value=zst(e.children):e.value=0),t+=Math.abs(e.value)}),t};function e6t(i,t,e=[],n={},r){zst(i);const s=(a,o,l)=>{a.forEach((u,c)=>{const h=t?t(u):l?`${l[l.length-1].key}-${c}`:`${o}-${c}`,d=N(u.value)?0:xd(u.value);if(n[h])n[h].value=void 0;else{const f={depth:o,datum:u,index:c,key:h,value:d,sourceLinks:[],targetLinks:[]};n[h]=f,e.push(f)}l&&r&&r.push({source:l[l.length-1].key,target:h,value:d,parents:l}),u.children&&u.children.length&&s(u.children,o+1,l?l.concat([n[h]]):[n[h]])})};return s(i,0,null),e}function i6t(i,t){const e=[],n=[],r={},s={},a=[];return e6t(i,t,e,r,a),a.forEach((o,l)=>{const u=`${o.source}-${o.target}`,c=xa(o,["parents"]);if(c.parents=o.parents.map(d=>xa(d,["sourceLinks","targetLinks"])),s[u])return s[u].value+=xd(o.value),void s[u].datum.push(c);const h={index:l,key:`${o.source}-${o.target}`,source:o.source,target:o.target,datum:[c],value:o.value,parents:o.parents.map(d=>d.key)};n.push(h),r[o.source].sourceLinks.push(h),r[o.target].targetLinks.push(h),s[u]=h}),{nodes:e,links:n,nodeMap:r}}function n6t(i){for(let t=0,e=i.length;t<e;t++){const n=i[t];n.value=Math.max(N(n.value)?0:xd(n.value),n.sourceLinks.reduce((r,s)=>{var a;return r+((a=xd(s.value))!==null&&a!==void 0?a:0)},0),n.targetLinks.reduce((r,s)=>{var a;return r+((a=xd(s.value))!==null&&a!==void 0?a:0)},0))}}function fY(i){return i.depth}function pY(i,t){return t-1-i.endDepth}function r6t(i,t){return i.sourceLinks.length?i.depth:t-1}function s6t(i,t,e){return i.targetLinks.length?i.depth:i.sourceLinks.length?Rn(i.sourceLinks.map(n=>e[n.target].depth))-1:0}const zS=(i,t)=>i?.y0-t?.y0,gY=(i,t)=>{if(N(i.value))return null;const e=(t?i.targetLinks:i.sourceLinks).reduce((n,r)=>(N(r.value)?n.count+=1:n.sum+=r.value,n),{sum:0,count:0});return e.count>0?(i.value-e.sum)/e.count:null},a6t={left:fY,right:pY,justify:r6t,center:s6t,start:fY,end:pY},o6t=jg(0,1);class PT{constructor(t){this._ascendingSourceBreadth=(r,s)=>zS(this._nodeMap[r.source],this._nodeMap[s.source])||r.index-s.index,this._ascendingTargetBreadth=(r,s)=>zS(this._nodeMap[r.target],this._nodeMap[s.target])||r.index-s.index,this.options=Object.assign({},PT.defaultOptions,t);const e=this.options.nodeKey,n=it(e)?e:e?Hg(e):null;this._getNodeKey=n,this._logger=Ee.getInstance(),this._alignFunc=it(this.options.setNodeLayer)?r=>this.options.setNodeLayer(r.datum):a6t[this.options.nodeAlign]}layout(t,e){if(!t)return null;const n="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)};this.options.direction==="vertical"?this._viewBox={x0:n.y0,x1:n.y1,y0:n.x0,y1:n.x1,width:n.height,height:n.width}:this._viewBox=n;const r=this.computeNodeLinks(t),s=r.nodes;let a=r.links;if(this._nodeMap=r.nodeMap,this.computeNodeValues(s),this.computeNodeDepths(s),["right","end","justify"].includes(this.options.nodeAlign)&&this.computeNodeEndDepths(s),this._maxDepth<=0)return null;const o=this.computeNodeBreadths(s);if(this.computeLinkBreadths(s),s.forEach(l=>{l.sourceLinks=l.sourceLinks.filter(u=>!N(u.source)&&!N(u.target)),l.targetLinks=l.targetLinks.filter(u=>!N(u.source)&&!N(u.target))}),a=a.filter(l=>!N(l.source)&&!N(l.target)),this.options.direction==="vertical")if(this.options.inverse){const l=this._viewBox.x1;s.forEach(u=>{const{y0:c,y1:h,x0:d,x1:f}=u;u.y0=l-f,u.y1=l-d,u.x0=c,u.x1=h}),a.forEach(u=>{u.vertical=!0;const{x0:c,x1:h,y0:d,y1:f}=u;u.x0=d,u.x1=f,u.y0=l-c,u.y1=l-h})}else s.forEach(l=>{const{y0:u,y1:c}=l;l.y0=l.x0,l.y1=l.x1,l.x0=u,l.x1=c}),a.forEach(l=>{l.vertical=!0;const u=l.x0,c=l.x1;l.x0=l.y0,l.x1=l.y1,l.y0=u,l.y1=c});else this.options.inverse&&(s.forEach(l=>{const{x0:u,x1:c}=l;l.x0=n.x1-c,l.x1=n.x1-u}),a.forEach(l=>{l.x0=n.x1-l.x0,l.x1=n.x1-l.x1}));return a.forEach(l=>{const u=this._nodeMap[l.source],c=this._nodeMap[l.target];l.sourceRect={x0:u.x0,x1:u.x1,y0:u.y0,y1:u.y1},l.targetRect={x0:c.x0,x1:c.x1,y1:c.y1,y0:c.y0}}),{nodes:s,links:a,columns:o}}computeHierarchicNodeLinks(t){return i6t(t,this._getNodeKey)}computeSourceTargetNodeLinks(t){const e=[],n=[],r={};t.nodes&&t.nodes.forEach((a,o)=>{const l={depth:-1,datum:a,index:o,key:this._getNodeKey?this._getNodeKey(a):o,value:a.value,sourceLinks:[],targetLinks:[]};r[l.key]=l,e.push(l)});const s=[];return t.links.forEach((a,o)=>{const l=!N(a.source),u=!N(a.target);if(t.nodes&&(!r[a.source]||!r[a.target]))return;t.nodes||!l||r[a.source]||(r[a.source]={value:void 0,depth:-1,index:e.length,key:a.source,datum:null,sourceLinks:[],targetLinks:[]},e.push(r[a.source])),t.nodes||!u||r[a.target]||(r[a.target]={value:void 0,depth:-1,index:e.length,key:a.target,datum:null,sourceLinks:[],targetLinks:[]},e.push(r[a.target]));const c={index:o,source:a.source,target:a.target,datum:a,value:a.value};this.options.divideNodeValueToLink&&N(a.value)&&s.push(c),n.push(c),l&&r[a.source].sourceLinks.push(c),u&&r[a.target].targetLinks.push(c)}),this.options.divideNodeValueToLink&&s.length&&s.forEach(a=>{const o=[gY(r[a.source]),gY(r[a.target],!0)].filter(l=>!N(l));o.length&&(a.value=Rn(o))}),{nodeMap:r,nodes:e,links:n}}computeNodeLinks(t){let e;"links"in t?e=this.computeSourceTargetNodeLinks(t):(this._isHierarchic=!0,e=this.computeHierarchicNodeLinks(t.nodes));let n=e.nodes;const r=e.links;if(this.options.linkSortBy)for(let s=0,a=n.length;s<a;s++)n[s].sourceLinks.sort(this.options.linkSortBy),n[s].targetLinks.sort(this.options.linkSortBy);return this.options.dropIsolatedNode&&(n=n.filter(s=>s.targetLinks.length||s.sourceLinks.length)),{nodes:n,links:r,nodeMap:e.nodeMap}}computeNodeValues(t){return n6t(t)}computeNodeDepths(t){var e;const n=t.length;let r,s,a=t,o=0,l=-1;const u=it(this.options.setNodeLayer)?this.options.setNodeLayer:null;for(;a.length&&o<n;){r=[],s={};for(let c=0,h=a.length;c<h;c++){const d=a[c];if(d&&(d.depth=u&&(e=u(d.datum))!==null&&e!==void 0?e:o,u&&(l=Math.max(d.depth,l)),d.sourceLinks&&d.sourceLinks.length))for(let f=0,p=d.sourceLinks.length;f<p;f++){const g=d.sourceLinks[f];s[g.target]||(r.push(this._nodeMap[g.target]),s[g.target]=!0)}}a=r,o+=1}o>n&&this._logger.warn("Error: there is a circular link"),this._maxDepth=u?l+1:o}computeNodeEndDepths(t){const e=t.length;let n,r,s=t,a=0;for(;s.length&&a<e;){n=[],r={};for(let o=0,l=s.length;o<l;o++){const u=s[o];if(u){u.endDepth=a;for(let c=0,h=u.targetLinks.length;c<h;c++){const d=u.targetLinks[c];r[d.source]||(n.push(this._nodeMap[d.source]),r[d.source]=!0)}}}s=n,a+=1}a>e&&this._logger.warn("Error: there is a circular link")}computeNodeLayers(t){const e=this.options.nodeWidth,n=this.options.linkWidth,r=this.options.minStepWidth,s=this._viewBox.width;let a=null,o=null,l=!1;if(Ht(e)){const c=Ke(parseFloat(e.replace("%",""))/100,0,1);let h=s/(this._maxDepth-1+c);r>0&&(h=Math.max(r,h)),a=h*c,o=h*(1-c),l=!0}else if(yt(e)){if(a=e,yt(n))o=n;else if(N(n)){let c=(s-e)/(this._maxDepth-1);r>0&&(c=Math.max(r,c)),o=c-e}l=!0}else it(e)&&yt(n)&&(o=n);const u=[];for(let c=0,h=t.length;c<h;c++){const d=t[c];d.layer=this._isHierarchic?d.depth:Ke(Math.floor(this._alignFunc(d,this._maxDepth,this._nodeMap)),0,this._maxDepth-1);const f=d.layer;f===this._maxDepth-1&&(d.isLastLayer=!0),l&&(d.x0=this._viewBox.x0+f*(a+o),d.x1=d.x0+a),u[f]?u[f].push(d):u[f]=[d]}if(this.options.nodeSortBy)for(let c=0,h=u.length;c<h;c++)u[c].sort(this.options.nodeSortBy);if(!l&&it(e)){let c=this._viewBox.x0;for(let h=0;h<this._maxDepth;h++){const d=u[h];let f=0,p=0;for(let g=0,m=d&&d.length;g<m;g++){const _=d[g],v=e(_);_.x0=c,_.x1=c+v,f=Math.max(a,v);const y=_.sourceLinks;for(let b=0,x=y.length;b<x;b++){const S=y[b],w=it(n)?n(S,this._viewBox):o;p=Math.max(p,w)}}c+=f+p}}return u}initializeNodeBreadths(t){var e,n,r;const s=(e=this.options.minLinkHeight)!==null&&e!==void 0?e:0;let a=(n=this.options.minNodeHeight)!==null&&n!==void 0?n:0;const o=(r=this.options.maxNodeHeight)!==null&&r!==void 0?r:1/0;let l=this.options.maxLinkHeight;(N(a)||a<s)&&(a=s),(N(l)||l>o)&&(l=o);let u=0,c=null,h=null;if(it(this.options.nodeGap))c=this.options.nodeGap,u=t.reduce((m,_)=>{const v=_.reduce((b,x)=>b+x.value,0),y=_.reduce((b,x)=>b+this.options.nodeGap(x),0);return Math.min(m,(this._viewBox.height-y)/v)},1/0);else{const m=t.reduce((y,b)=>Math.max(y,b.length),0),_=this._viewBox.height/m;let v=Math.min(this.options.nodeGap,_);if(a+v>_&&(v=a>=_?_/2:(_-a)/2,a=Math.min(_-v,a)),c=()=>v,this._gapY=v,this.options.equalNodeHeight)h=this._viewBox.height/m-v;else{const y=a>0?Math.max(v,a):v;u=t.reduce((b,x)=>{const S=x.reduce((w,A)=>w+A.value,0);return Math.min(b,(this._viewBox.height-((x.length-1)*y+a))/S)},1/0)}}const d=this.options.gapPosition==="start",f=!d&&this.options.gapPosition!=="end",p=yt(this.options.nodeHeight)?m=>this.options.nodeHeight:it(this.options.nodeHeight)?this.options.nodeHeight:h>0?m=>h:m=>Math.max(m.value*u,0),g=yt(this.options.linkHeight)?()=>this.options.linkHeight:it(this.options.linkHeight)?this.options.linkHeight:(m,_,v)=>Math.min(Math.max(_.value?v*o6t(m.value/_.value):0,s,0),l);for(let m=0,_=t.length;m<_;m++){const v=t[m];if(!v||!v.length)continue;let y=this._viewBox.y0,b=0,x=0,S=0;for(let A=0,k=v.length;A<k;A++){const C=v[A];b=c(C),d&&(y+=b),S=p(C),x=Math.min(Math.max(S,a),o),C.y0=y,C.y1=y+x,y=d?C.y1:C.y1+b;for(let M=0,R=C.sourceLinks.length;M<R;M++){const P=C.sourceLinks[M];P.thickness=g(P,C,S)}}let w=this._viewBox.y1-y+(f?b:0);if(w>0){if(this.options.crossNodeAlign!=="start")if(this.options.crossNodeAlign==="end")for(let A=0,k=v.length;A<k;++A){const C=v[A];C.y0+=w,C.y1+=w}else if(this.options.crossNodeAlign==="parent"){const A=v.reduce((k,C)=>(C.targetLinks&&C.targetLinks.length&&C.targetLinks.forEach(M=>{k[M.source]=!0}),k),{});if(Object.keys(A).length&&t[m-1]&&t[m-1].length){const k=t[m-1].filter(C=>A[C.key]);if(k&&k.length&&k[0].y0!==v[0].y0){const C=k[0].y0-v[0].y0;for(let M=0,R=v.length;M<R;++M){const P=v[M];P.y0+=C,P.y1+=C}}}}else{w/=v.length+1;for(let A=0,k=v.length;A<k;++A){const C=v[A];C.y0+=w*(A+1),C.y1+=w*(A+1)}}}else if(w<0&&v.length>1&&(w/=v.length-1,b+w>=0)){b+=w,this._gapY=Math.min(b);for(let A=1,k=v.length;A<k;++A){const C=v[A];C.y0+=w*A,C.y1+=w*A}}this.reorderLinks(v)}}computeNodeBreadths(t){const e=this.computeNodeLayers(t);this.initializeNodeBreadths(e);const n=this.options.iterations;if(!this._isHierarchic&&!it(this.options.setNodeLayer)&&!it(this.options.nodeGap))for(let r=0;r<n;++r){const s=Math.pow(.99,r),a=Math.max(1-s,(r+1)/n);this.relaxRightToLeft(e,s,a),this.relaxLeftToRight(e,s,a)}return e}relaxLeftToRight(t,e,n){for(let r=1,s=t.length;r<s;++r){const a=t[r];for(let o=0,l=a.length;o<l;o++){const u=a[o];let c=0,h=0;for(let f=0,p=u.targetLinks.length;f<p;f++){const g=u.targetLinks[f],m=g.value*(u.layer-this._nodeMap[g.source].layer);c+=this.targetTop(this._nodeMap[g.source],u)*m,h+=m}if(!(h>0))continue;const d=(c/h-u.y0)*e;u.y0+=d,u.y1+=d,this.reorderNodeLinks(u)}N(this.options.nodeSortBy)&&a.sort(zS),this.resolveCollisions(a,n)}}relaxRightToLeft(t,e,n){for(let r=t.length-2;r>=0;--r){const s=t[r];for(let a=0,o=s.length;a<o;a++){const l=s[a];let u=0,c=0;for(let d=0,f=l.sourceLinks.length;d<f;d++){const p=l.sourceLinks[d],g=p.value*(this._nodeMap[p.target].layer-l.layer);u+=this.sourceTop(l,this._nodeMap[p.target])*g,c+=g}if(!(c>0))continue;const h=(u/c-l.y0)*e;l.y0+=h,l.y1+=h,this.reorderNodeLinks(l)}this.options.nodeSortBy===void 0&&s.sort(zS),this.resolveCollisions(s,n)}}resolveCollisions(t,e){const n=t.length>>1,r=t[n];this.resolveCollisionsBottomToTop(t,r.y0-this._gapY,n-1,e),this.resolveCollisionsTopToBottom(t,r.y1+this._gapY,n+1,e),this.resolveCollisionsBottomToTop(t,this._viewBox.y1,t.length-1,e),this.resolveCollisionsTopToBottom(t,this._viewBox.y0,0,e)}resolveCollisionsTopToBottom(t,e,n,r){for(;n<t.length;++n){const s=t[n],a=(e-s.y0)*r;a>1e-6&&(s.y0+=a,s.y1+=a),e=s.y1+this._gapY}}resolveCollisionsBottomToTop(t,e,n,r){for(;n>=0;--n){const s=t[n],a=(s.y1-e)*r;a>1e-6&&(s.y0-=a,s.y1-=a),e=s.y0-this._gapY}}targetTop(t,e){let n,r,s,a=t.y0-(t.sourceLinks.length-1)*this._gapY/2;for(n=0,r=t.sourceLinks.length;n<r&&(s=t.sourceLinks[n],s.target!==e.key);n++)a+=s.thickness+this._gapY;for(n=0,r=e.targetLinks.length;n<r&&(s=e.targetLinks[n],s.source!==t.key);n++)a-=s.thickness;return a}sourceTop(t,e){let n,r,s,a=e.y0-(e.targetLinks.length-1)*this._gapY/2;for(n=0,r=e.targetLinks.length;n<r&&(s=e.targetLinks[n],s.source!==t.key);n++)a+=s.thickness+this._gapY;for(n=0,r=t.sourceLinks.length;n<r&&(s=t.sourceLinks[n],s.target!==e.key);n++)a-=s.thickness;return a}computeLinkBreadthsNoOverlap(t){for(let e=0,n=t.length;e<n;e++){const r=t[e];let s=r.y0,a=!1;for(let l=0,u=r.sourceLinks.length;l<u;l++){const c=r.sourceLinks[l];a||(c.y0=s+c.thickness/2),c.x0=r.x1,s+c.thickness>r.y1||a?(c.y0=r.y1-c.thickness/2,a=!0):s+=c.thickness}let o=r.y0;a=!1;for(let l=0,u=r.targetLinks.length;l<u;l++){const c=r.targetLinks[l];a||(c.y1=o+c.thickness/2),c.x1=r.x0,o+c.thickness>r.y1||a?(c.y1=r.y1-c.thickness/2,a=!0):o+=c.thickness}}}computeLinkBreadthsOverlap(t){const e=this.options.linkOverlap;for(let n=0,r=t.length;n<r;n++){const s=t[n],a=e==="start"?s.y0:e==="end"?s.y1:(s.y0+s.y1)/2,o=e==="start"?.5:e==="end"?-.5:0;for(let l=0,u=s.sourceLinks.length;l<u;l++){const c=s.sourceLinks[l];c.y0=a+o*c.thickness,c.x0=s.x1}for(let l=0,u=s.targetLinks.length;l<u;l++){const c=s.targetLinks[l];c.y1=a+o*c.thickness,c.x1=s.x0}}}computeLinkBreadths(t){this.options.linkOverlap?this.computeLinkBreadthsOverlap(t):this.computeLinkBreadthsNoOverlap(t)}reorderNodeLinks(t){if(N(this.options.linkSortBy)){const e=t.targetLinks,n=t.sourceLinks;for(let r=0,s=e.length;r<s;r++){const a=e[r];this._nodeMap[a.source].sourceLinks.sort(this._ascendingTargetBreadth)}for(let r=0,s=n.length;r<s;r++){const a=n[r];this._nodeMap[a.target].targetLinks.sort(this._ascendingSourceBreadth)}}}reorderLinks(t){if(N(this.options.linkSortBy))for(let e=0,n=t.length;e<n;e++){const r=t[e];r.sourceLinks.sort(this._ascendingTargetBreadth),r.targetLinks.sort(this._ascendingSourceBreadth)}}}PT.defaultOptions={iterations:6,nodeAlign:"justify",direction:"horizontal",nodeWidth:24,nodeGap:8,crossNodeAlign:"middle",dropIsolatedNode:!0};function ET(i,t,e,n,r,s={x0:"x0",x1:"x1",y0:"y0",y1:"y1"}){const a=i.children;let o,l=-1;const u=a.length,c=i.value&&(n-t)/i.value;for(;++l<u;)o=a[l],o[s.y0]=e,o[s.y1]=r,o[s.x0]=t,o[s.x1]=t+=o.value*c}const l6t={x0:"startAngle",x1:"endAngle",y0:"innerRadius",y1:"outerRadius"};class U0{constructor(t){this._layoutNode=r=>{if(r.maxDepth=this._maxDepth,r.children){const s=this._parsedInnerRadius[r.depth+1],a=this._parsedOutterRadius[r.depth+1];ET(r,r.startAngle,Math.min(s,a),r.endAngle,Math.max(s,a),l6t);const o=J(this.options.label)?this.options.label[r.depth+1]:this.options.label;r.children.forEach(l=>{if(l.x=this._parsedCenter[0],l.y=this._parsedCenter[1],o)return this._layoutLabel(l,Vn(o)?{align:"center",rotate:"radial"}:o)})}},this.options=t?Object.assign({},U0.defaultOpionts,t):Object.assign({},U0.defaultOpionts);const e=this.options.nodeKey,n=it(e)?e:e?Hg(e):null;this._getNodeKey=n,this._maxDepth=-1}_parseRadius(t,e){const n=t.x0+Mo(this.options.center[0],t.width),r=t.y0+Mo(this.options.center[1],t.height),s=Math.min(t.width/2,t.height/2),a=this.options.innerRadius,o=this.options.outerRadius,l=J(a),u=l?a.map(p=>Mo(p,s)):Mo(a,s),c=J(o),h=this.options.gapRadius,d=c?o.map(p=>Mo(p,s)):Mo(o,s),f=lJ(0,e+1);if(l)this._parsedInnerRadius=f.map((p,g)=>{const m=u[g];return N(m)?s:m}),this._parsedOutterRadius=f.map((p,g)=>{var m,_;return c?(m=d[g])!==null&&m!==void 0?m:s:g<e?this._parsedInnerRadius[g+1]-(J(h)?(_=h[g])!==null&&_!==void 0?_:0:h):d});else if(c)this._parsedOutterRadius=f.map((p,g)=>N(d[g])?s:d[g]),this._parsedInnerRadius=f.map((p,g)=>{var m;return g===0?u:this._parsedOutterRadius[g-1]-(J(h)?(m=h[g])!==null&&m!==void 0?m:0:h)});else{const p=Mo(a,s),g=(d-p)/(e+1);this._parsedInnerRadius=f.map((m,_)=>p+_*g),this._parsedOutterRadius=f.map((m,_)=>{var v;return this._parsedInnerRadius[_]+g-(J(h)?(v=h[_])!==null&&v!==void 0?v:0:h)})}this._parsedCenter=[n,r],this._maxRadius=s}layout(t,e){const n="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)};if(!t||!t.length)return[];const r=[],s=TT(t,r,0,-1,null,this._getNodeKey);return this._parseRadius(n,s.maxDepth),this._maxDepth=s.maxDepth,this._layout(r,{flattenIndex:-1,maxDepth:-1,key:"-1",depth:-1,index:-1,value:s.sum,datum:null,children:r,startAngle:this.options.startAngle,endAngle:this.options.endAngle}),r}_layout(t,e){this._layoutNode(e),t.forEach(n=>{var r;!((r=n?.children)===null||r===void 0)&&r.length?this._layout(n.children,n):this._layoutNode(n)})}_layoutLabel(t,e){var n;const r=(t.startAngle+t.endAngle)/2,s=(e.align==="start"?t.innerRadius:e.align==="end"?t.outerRadius:(t.innerRadius+t.outerRadius)/2)+((n=e.offset)!==null&&n!==void 0?n:0),a=yi({x:this._parsedCenter[0],y:this._parsedCenter[1]},s,r);if(t.label={x:a.x,y:a.y,textBaseline:"middle"},e.rotate==="tangential")t.label.angle=r-Math.PI/2,t.label.textAlign="center",t.label.maxLineWidth=Math.abs(t.endAngle-t.startAngle)*s;else{const o=r%(2*Math.PI),l=o<0?o+2*Math.PI:o;l>Math.PI/2&&l<1.5*Math.PI?(t.label.angle=l+Math.PI,t.label.textAlign=e.align==="start"?"end":e.align==="end"?"start":"center"):(t.label.angle=l,t.label.textAlign=e.align),t.label.maxLineWidth=t.isLeaf?void 0:Math.abs(t.outerRadius-t.innerRadius)}}}U0.defaultOpionts={startAngle:Math.PI/2,endAngle:-3*Math.PI/2,center:["50%","50%"],gapRadius:0,innerRadius:0,outerRadius:"70%"};function u6t(i,t,e,n,r){const s=i.children,a=s.length;let o=0;const l=new Array(a+1);l[0]=0;for(let c=0;c<a;++c)o+=s[c].value,l[c+1]=o;const u=(c,h,d,f,p,g,m)=>{if(c>=h-1){const w=s[c];return w.x0=f,w.y0=p,w.x1=g,void(w.y1=m)}const _=l[c],v=d/2+_;let y=c+1,b=h-1;for(;y<b;){const w=y+b>>>1;l[w]<v?y=w+1:b=w}v-l[y-1]<l[y]-v&&c+1<y&&--y;const x=l[y]-_,S=d-x;if(g-f>m-p){const w=d?(f*S+g*x)/d:g;u(c,y,x,f,p,w,m),u(y,h,S,w,p,g,m)}else{const w=d?(p*S+m*x)/d:m;u(c,y,x,f,p,g,w),u(y,h,S,f,w,g,m)}};u(0,a,i.value,t,e,n,r)}function Kz(i,t,e,n,r){const s=i.children;let a,o=-1;const l=s.length,u=i.value&&(r-e)/i.value;for(;++o<l;)a=s[o],a.x0=t,a.x1=n,a.y0=e,e+=a.value*u,a.y1=e}function c6t(i,t,e,n,r){(i.depth%2==1?Kz:ET)(i,t,e,n,r)}function h6t(i,t,e,n,r,s){const a=[],o=t.children;let l,u,c=0,h=0;const d=o.length;let f,p,g,m,_,v,y,b,x,S=t.value;for(;c<d;){f=r-e,p=s-n;do g=o[h++].value;while(!g&&h<d);for(m=g,_=g,b=Math.max(p/f,f/p)/(S*i),x=g*g*b,y=Math.max(_/x,x/m);h<d;++h){if(u=o[h].value,g+=u,u<m&&(m=u),u>_&&(_=u),x=g*g*b,v=Math.max(_/x,x/m),v>y){g-=u;break}y=v}l=Object.assign({},t,{value:g,children:o.slice(c,h)}),a.push(l),f<p?ET(l,e,n,r,S?n+=p*g/S:s):Kz(l,e,n,S?e+=f*g/S:r,s),S-=g,c=h}return a}const d6t=i=>(t,e,n,r,s)=>{h6t(i,t,e,n,r,s)},mY={binary:u6t,dice:ET,slice:Kz,sliceDice:c6t};class RT{constructor(t){var e;this._filterByArea=(s,a)=>{var o;const l=this._getMinAreaByDepth(s.depth);if(l>0&&s.value*a<l)return!1;if(!((o=s.children)===null||o===void 0)&&o.length){const u=s.children.filter(c=>this._filterByArea(c,a));u.length?u.length!==s.children.length&&(s.children=u):(s.isLeaf=!0,s.children=null)}return!0},this._getMinAreaByDepth=s=>{var a;return s<0?0:(a=J(this.options.minVisibleArea)?this.options.minVisibleArea[s]:this.options.minVisibleArea)!==null&&a!==void 0?a:0},this._getGapWidthByDepth=s=>{var a;return s<0?0:(a=J(this.options.gapWidth)?this.options.gapWidth[s]:this.options.gapWidth)!==null&&a!==void 0?a:0},this._getPaddingByDepth=s=>{var a;return s<0?0:(a=J(this.options.padding)?this.options.padding[s]:this.options.padding)!==null&&a!==void 0?a:0},this._getLabelPaddingByDepth=s=>{var a;return s<0?0:(a=J(this.options.labelPadding)?this.options.labelPadding[s]:this.options.labelPadding)!==null&&a!==void 0?a:0},this._layoutNode=s=>{const a=this._getGapWidthByDepth(s.depth);let o=s.x0,l=s.y0,u=s.x1,c=s.y1;if(s.maxDepth=this._maxDepth,a>0&&(o+=a/2,u-=a/2,l+=a/2,c-=a/2,o>u&&(o=(o+u)/2,u=o),l>c&&(l=(l+c)/2,c=l),s.x0=o,s.x1=u,s.y0=l,s.y1=c),s.children){const h=this._getLabelPaddingByDepth(s.depth),d=this._getPaddingByDepth(s.depth);d>0&&d<Math.min(u-o,c-l)/2&&(l+=d,c-=d,o+=d,u-=d),h>0&&(this.options.labelPosition==="top"&&l+h<c?(s.labelRect={x0:o,y0:l,x1:u,y1:l+h},l+=h):this.options.labelPosition==="bottom"&&c-h>l?(s.labelRect={x0:o,y0:c-h,x1:u,y1:c},c-=h):this.options.labelPosition==="left"&&o+h<u?(s.labelRect={x0:o,y0:l,x1:o+h,y1:c},o+=h):this.options.labelPosition==="right"&&u-h>o&&(s.labelRect={x0:u-h,y0:l,x1:u,y1:c},u-=h));const f=this._getGapWidthByDepth(s.depth+1);f>0&&(o-=f/2,u+=f/2,l-=f/2,c+=f/2),this._splitNode(s,o,l,u,c)}},this.options=Object.assign({},RT.defaultOpionts,t);const n=this.options.nodeKey,r=it(n)?n:n?Hg(n):null;this._getNodeKey=r,this._splitNode=this.options.splitType==="squarify"?d6t(this.options.aspectRatio):(e=mY[this.options.splitType])!==null&&e!==void 0?e:mY.binary,this._maxDepth=-1}layout(t,e){var n;if(!t||!t.length)return[];const r="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)},s=[],a=TT(t,s,0,-1,null,this._getNodeKey,this.options.valueField);if(this._maxDepth=a.maxDepth,a.sum<=0)return[];const o={flattenIndex:-1,maxDepth:-1,key:"-1",depth:-1,index:-1,value:a.sum,datum:null,x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,children:s},l=r.width*r.height/a.sum;return this._filterByArea(o,l),this._layout(o),(n=o.children)!==null&&n!==void 0?n:[]}_filterChildren(t){const e=this.options.maxDepth;if(yt(e)&&e>=0&&t.depth>=e)return!1;const n=this.options.minChildrenVisibleArea;if(yt(n)&&Math.abs((t.x1-t.x0)*(t.y1-t.y0))<n)return!1;const r=this.options.minChildrenVisibleSize;return!yt(r)||!(Math.abs(t.x1-t.x0)<r||Math.abs(t.y1-t.y0)<r)}_layout(t){var e;this._filterChildren(t)||(t.children=null,t.isLeaf=!0),this._layoutNode(t),!((e=t.children)===null||e===void 0)&&e.length&&t.children.forEach(n=>{var r;!((r=n?.children)===null||r===void 0)&&r.length?this._layout(n):this._layoutNode(n)})}}RT.defaultOpionts={aspectRatio:(1+Math.sqrt(5))/2,gapWidth:0,labelPadding:0,labelPosition:"top",splitType:"binary",minVisibleArea:10};function wL(i,t,e){return Math.min(i,t)*Math.min(i,t)*Math.PI<=e+Pb?Math.abs(i-t):OPt(function(n){return kJ(i,t,n)-e},0,i+t)}function f6t(i,t,e){const n=AW(t.length,t.length),r=AW(t.length,t.length);return i.filter(function(s){return s.sets.length===2}).map(s=>{const a=e[s.sets[0]],o=e[s.sets[1]],l=wL(Math.sqrt(t[a].size/Math.PI),Math.sqrt(t[o].size/Math.PI),s.size);n[a][o]=n[o][a]=l;let u=0;s.size+1e-10>=Math.min(t[a].size,t[o].size)?u=1:s.size<=1e-10&&(u=-1),r[a][o]=r[o][a]=u}),{distances:n,constraints:r}}function p6t(i,t){const e=(t=t||{}).restarts||10,n=[],r={};let s;for(s=0;s<i.length;++s){const g=i[s];g.sets.length===1&&(r[g.sets[0]]=n.length,n.push(g))}const a=f6t(i,n,r);let o=a.distances;const l=a.constraints,u=QO(o.map(QO))/o.length;o=o.map(g=>g.map(m=>m/u));const c=function(g,m){return g6t(g,m,o,l)};let h,d;for(s=0;s<e;++s){const g=ZO(2*o.length).map((m,_)=>dJ(_));d=DEt(c,g,t),(!h||d.fx<h.fx)&&(h=d)}const f=h.x,p={};for(s=0;s<n.length;++s){const g=n[s];p[g.sets[0]]={x:f[2*s]*u,y:f[2*s+1]*u,radius:Math.sqrt(g.size/Math.PI)}}if(t.history)for(s=0;s<t.history.length;++s)JO(t.history[s].x,u);return p}function g6t(i,t,e,n){let r,s=0;for(r=0;r<t.length;++r)t[r]=0;for(r=0;r<e.length;++r){const a=i[2*r],o=i[2*r+1];for(let l=r+1;l<e.length;++l){const u=i[2*l],c=i[2*l+1],h=e[r][l],d=n[r][l],f=(u-a)*(u-a)+(c-o)*(c-o),p=Math.sqrt(f),g=f-h*h;d>0&&p<=h||d<0&&p>=h||(s+=2*g*g,t[2*r]+=4*g*(a-u),t[2*r+1]+=4*g*(o-c),t[2*l]+=4*g*(u-a),t[2*l+1]+=4*g*(c-o))}}return s}function qz(i,t){let e=0;for(let n=0;n<t.length;++n){const r=t[n];let s;if(r.sets.length!==1){if(r.sets.length===2){const a=i[r.sets[0]],o=i[r.sets[1]];s=kJ(a.radius,o.radius,Je.distancePP(a,o))}else s=XB(r.sets.map(function(a){return i[a]}));e+=(r.hasOwnProperty("weight")?r.weight:1)*(s-r.size)*(s-r.size)}}return e}function m6t(i,t){const e=t&&t.lossFunction?t.lossFunction:qz,n={},r={};for(let c=0;c<i.length;++c){const h=i[c];if(h.sets.length===1){const d=h.sets[0];n[d]={x:1e10,y:1e10,size:h.size,radius:Math.sqrt(h.size/Math.PI),setId:d},r[d]=[]}}i=i.filter(function(c){return c.sets.length===2});for(let c=0;c<i.length;++c){const h=i[c];let d=h.hasOwnProperty("weight")?h.weight:1;const f=h.sets[0],p=h.sets[1];h.size+Pb>=Math.min(n[f].size,n[p].size)&&(d=0),r[f].push({set:p,size:h.size,weight:d}),r[p].push({set:f,size:h.size,weight:d})}const s=[];for(const c in r)if(r.hasOwnProperty(c)){let h=0;for(let d=0;d<r[c].length;++d)h+=r[c][d].size*r[c][d].weight;s.push({set:c,size:h})}function a(c,h){return h.size-c.size}s.sort(a);const o={};function l(c){return c.set in o}function u(c,h){n[h].x=c.x,n[h].y=c.y,o[h]=!0}u({x:0,y:0},s[0].set);for(let c=1;c<s.length;++c){const h=s[c].set,d=r[h].filter(l),f=n[h];if(d.sort(a),d.length===0)throw"ERROR: missing pairwise overlap information";const p=[];for(let _=0;_<d.length;++_){const v=n[d[_].set],y=wL(f.radius,v.radius,d[_].size);p.push({x:v.x+y,y:v.y}),p.push({x:v.x-y,y:v.y}),p.push({y:v.y+y,x:v.x}),p.push({y:v.y-y,x:v.x});for(let b=_+1;b<d.length;++b){const x=n[d[b].set],S=wL(f.radius,x.radius,d[b].size),w=CJ({x:v.x,y:v.y,radius:y},{x:x.x,y:x.y,radius:S});for(let A=0;A<w.length;++A)p.push(w[A])}}let g=1e50,m=p[0];for(let _=0;_<p.length;++_){n[h].x=p[_].x,n[h].y=p[_].y;const v=e(n,i);v<g&&(g=v,m=p[_])}u(m,h)}return n}function _6t(i,t){(t=t||{}).maxIterations=t.maxIterations||500;const e=t.initialLayout||y6t,n=t.lossFunction||qz,r=e(i=v6t(i),t),s=[],a=[];for(const l in r)r.hasOwnProperty(l)&&(s.push(r[l].x),s.push(r[l].y),a.push(l));const o=EJ(function(l){const u={};for(let c=0;c<a.length;++c){const h=a[c];u[h]={x:l[2*c],y:l[2*c+1],radius:r[h].radius}}return n(u,i)},s,t).x;for(let l=0;l<a.length;++l){const u=a[l];r[u].x=o[2*l],r[u].y=o[2*l+1]}return r}function v6t(i){i=i.slice();const t=[],e={};for(let n=0;n<i.length;++n){const r=i[n];if(r.sets.length===1)t.push(r.sets[0]);else if(r.sets.length===2){const s=r.sets[0],a=r.sets[1];e[[s,a].toString()]=!0,e[[a,s].toString()]=!0}}t.sort(function(n,r){return+(n>r)});for(let n=0;n<t.length;++n){const r=t[n];for(let s=n+1;s<t.length;++s){const a=t[s];[r,a].toString()in e||i.push({sets:[r,a],size:0})}}return i}function y6t(i,t){let e=m6t(i,t);const n=t.lossFunction||qz;if(i.length>=8){const r=p6t(i,t);n(r,i)+1e-8<n(e,i)&&(e=r)}return e}function b6t(i,t,e){let n;if(e===null?i.sort(function(r,s){return s.radius-r.radius}):i.sort(e),i.length>0){const r=i[0].x,s=i[0].y;for(n=0;n<i.length;++n)i[n].x-=r,i[n].y-=s}if(i.length===2&&Je.distancePP(i[0],i[1])<Math.abs(i[1].radius-i[0].radius)&&(i[1].x=i[0].x+i[0].radius-i[1].radius-1e-10,i[1].y=i[0].y),i.length>1){const r=Math.atan2(i[1].x,i[1].y)-t,s=Math.cos(r),a=Math.sin(r);let o,l;for(n=0;n<i.length;++n)o=i[n].x,l=i[n].y,i[n].x=s*o-a*l,i[n].y=a*o+s*l}if(i.length>2){let r=Math.atan2(i[2].x,i[2].y)-t;for(;r<0;)r+=2*Math.PI;for(;r>2*Math.PI;)r-=2*Math.PI;if(r>Math.PI){const s=i[1].y/(1e-10+i[1].x);for(n=0;n<i.length;++n){const a=(i[n].x+s*i[n].y)/(1+s*s);i[n].x=2*a-i[n].x,i[n].y=2*a*s-i[n].y}}}}function x6t(i){function t(a){return a.parent!==a&&(a.parent=t(a.parent)),a.parent}function e(a,o){const l=t(a),u=t(o);l.parent=u}i.map(function(a){a.parent=a});for(let a=0;a<i.length;++a)for(let o=a+1;o<i.length;++o){const l=i[a].radius+i[o].radius;Je.distancePP(i[a],i[o])+1e-10<l&&e(i[o],i[a])}const n={};let r;for(let a=0;a<i.length;++a)r=t(i[a]).parent.setId,r in n||(n[r]=[]),n[r].push(i[a]);i.map(function(a){delete a.parent});const s=[];for(r in n)n.hasOwnProperty(r)&&s.push(n[r]);return s}function AL(i){const t=function(e){return{max:Math.max.apply(null,i.map(function(n){return n[e]+n.radius})),min:Math.min.apply(null,i.map(function(n){return n[e]-n.radius}))}};return{xRange:t("x"),yRange:t("y")}}function S6t(i,t,e){t===null&&(t=Math.PI/2);let n=[];for(const c in i)if(i.hasOwnProperty(c)){const h=i[c];n.push({x:h.x,y:h.y,radius:h.radius,setId:c})}const r=x6t(n);for(let c=0;c<r.length;++c){b6t(r[c],t,e);const h=AL(r[c]);r[c].size=(h.xRange.max-h.xRange.min)*(h.yRange.max-h.yRange.min),r[c].bounds=h}r.sort(function(c,h){return h.size-c.size}),n=r[0];let s=n.bounds;const a=(s.xRange.max-s.xRange.min)/50;function o(c,h,d){if(!c)return;const f=c.bounds;let p,g,m;h?p=s.xRange.max-f.xRange.min+a:(p=s.xRange.max-f.xRange.max,m=(f.xRange.max-f.xRange.min)/2-(s.xRange.max-s.xRange.min)/2,m<0&&(p+=m)),d?g=s.yRange.max-f.yRange.min+a:(g=s.yRange.max-f.yRange.max,m=(f.yRange.max-f.yRange.min)/2-(s.yRange.max-s.yRange.min)/2,m<0&&(g+=m));for(let _=0;_<c.length;++_)c[_].x+=p,c[_].y+=g,n.push(c[_])}let l=1;for(;l<r.length;)o(r[l],!0,!1),o(r[l+1],!1,!0),o(r[l+2],!0,!0),l+=3,s=AL(n);const u={};for(let c=0;c<n.length;++c)u[n[c].setId]=n[c];return u}function w6t(i,t,e,n,r,s=!1){t=Math.max(t,1),e=Math.max(e,1);const a=[],o=[];for(const _ in i)i.hasOwnProperty(_)&&(o.push(_),a.push(i[_]));const l=AL(a),u=l.xRange,c=l.yRange;if(u.max===u.min||c.max===c.min)return console.log("not scaling solution: zero size detected"),i;const h=t/(u.max-u.min),d=e/(c.max-c.min);let f;if(s){const _=Math.min(t,e)/2,v=(u.min+u.max)/2,y=(c.min+c.max)/2;let b=0;for(const x of a){const S=Math.sqrt(Math.pow(x.x-v,2)+Math.pow(x.y-y,2))+x.radius;b=Math.max(b,S)}f=_/b}else f=Math.min(d,h);const p=(t-(u.max-u.min)*f)/2,g=(e-(c.max-c.min)*f)/2,m={};for(let _=0;_<a.length;++_){const v=a[_];m[o[_]]={radius:f*v.radius,x:n+p+(v.x-u.min)*f,y:r+g+(v.y-c.min)*f,setId:v.setId}}return m}function A6t(i,t){const e={},n=k6t(i);for(let r=0;r<t.length;++r){const s=t[r].sets,a={},o={};for(let h=0;h<s.length;++h){a[s[h]]=!0;const d=n[s[h]];for(let f=0;f<d.length;++f)o[d[f]]=!0}const l=[],u=[];for(const h in i)h in a?l.push(i[h]):h in o||u.push(i[h]);const c=Nst(l,u);e[s.toString()]=c,c.disjoint&&t[r].size>0&&Ee.getInstance().error("Area "+s+" not represented on screen")}return e}function k6t(i){const t={},e=[];for(const n in i)e.push(n),t[n]=[];for(let n=0;n<e.length;n++){const r=i[e[n]];for(let s=n+1;s<e.length;++s){const a=i[e[s]],o=Je.distancePP(r,a);o+a.radius<=r.radius+1e-10?t[e[s]].push(e[n]):o+r.radius<=a.radius+1e-10&&t[e[n]].push(e[s])}}return t}function Nst(i,t){const e=[];for(let l=0;l<i.length;++l){const u=i[l];e.push({x:u.x,y:u.y}),e.push({x:u.x+u.radius/2,y:u.y}),e.push({x:u.x-u.radius/2,y:u.y}),e.push({x:u.x,y:u.y+u.radius/2}),e.push({x:u.x,y:u.y-u.radius/2})}let n=e[0],r=rR(e[0],i,t);for(let l=1;l<e.length;++l){const u=rR(e[l],i,t);u>=r&&(n=e[l],r=u)}const s=EJ(function(l){return-1*rR({x:l[0],y:l[1]},i,t)},[n.x,n.y],{maxIterations:500,minErrorDelta:1e-10}).x;let a={x:s[0],y:s[1]},o=!0;for(let l=0;l<i.length;++l)if(Je.distancePP(a,i[l])>i[l].radius){o=!1;break}for(let l=0;l<t.length;++l)if(Je.distancePP(a,t[l])<t[l].radius){o=!1;break}if(!o)if(i.length===1)a={x:i[0].x,y:i[0].y};else{const l={};XB(i,l),a=l.arcs.length===0?{x:0,y:-1e3,disjoint:!0}:l.arcs.length===1?{x:l.arcs[0].circle.x,y:l.arcs[0].circle.y}:t.length?Nst(i,[]):MJ(l.arcs.map(function(u){return u.p1}))}return a}function rR(i,t,e){let n,r,s=t[0].radius-Je.distancePP(t[0],i);for(n=1;n<t.length;++n)r=t[n].radius-Je.distancePP(t[n],i),r<=s&&(s=r);for(n=0;n<e.length;++n)r=Je.distancePP(e[n],i)-e[n].radius,r<=s&&(s=r);return s}const jst=i=>{const t={},e=Object.values(i);if(!e.length)return[];XB(e,t);const n=t.arcs.map(({p1:o,p2:l,circle:u,width:c})=>({p1:o,p2:l,radius:u.radius,setId:u.setId,largeArcFlag:c>u.radius})),r=[];let s=0,a=n[0];for(;s<n.length&&a;){const{p2:o}=a;r.push(a),a=n.find(l=>Je.distancePP(l.p1,o)<Pb),s++}return r},Hst=i=>{if(!i?.length)return"";let t=0,e=i[0];const{p1:n}=e;let r=`M${n.x},${n.y}`;for(;e;){const{p2:s,radius:a,largeArcFlag:o}=e;r+=`A${a},${a} 0 ${o?1:0},0 ${s.x},${s.y}`,e=i[++t]}return r+=" Z",r},_Y=i=>{var t;return(t=i?.map(e=>{const{p1:n,p2:r,radius:s,largeArcFlag:a,setId:o}=e,{x:l,y:u}=n,{x:c,y:h}=r,d=((c-l)**2+(h-u)**2)**.5,f=(l+c)/2,p=(u+h)/2,g=(s**2-(d/2)**2)**.5;let m=f+g*(h-u)/d,_=p-g*(c-l)/d;return(yw([c-l,h-u],[m-l,_-u])>0||a)&&(m=f-g*(h-u)/d,_=p+g*(c-l)/d),{x:m,y:_,radius:s,setId:o}}))!==null&&t!==void 0?t:[]},C6t=(i,t)=>{const{x0:e,x1:n,y0:r,y1:s,setField:a="sets",valueField:o="size",orientation:l=Math.PI/2,orientationOrder:u=null,emptySetKey:c}=i;let h={},d={};const f=t.some(g=>{const m=X(g[a]);return!m||m.length===0}),p=f?t.filter(g=>!Lt(X(g[a]))):t;if(p.length>0){const g=p.map(_=>({sets:X(_[a]),size:_[o]}));let m=_6t(g,i);m=S6t(m,l,u),h=w6t(m,n-e,s-r,e,r,f),d=A6t(h,g)}return t.map(g=>{const m=X(g[a]);if(!m||m.length===0)return Object.assign(Object.assign({},g),{datum:g,sets:m,key:c||"others",size:g[o],labelX:void 0,labelY:void 0,type:"circle",x:e+(n-e)/2,y:r+(s-r)/2,radius:Math.min(n-e,s-r)/2});const _=m.toString(),v=d[_],y=Object.assign(Object.assign({},g),{datum:g,sets:m,key:_,size:g[o],labelX:v?.x,labelY:v?.y}),b=h[_];if(b)return Object.assign(Object.assign({},y),{type:"circle",x:b.x,y:b.y,radius:b.radius});const x=jst(m.map(S=>h[S]));return Object.assign(Object.assign({},y),{type:"overlap",x:0,y:0,path:Hst(x),arcs:x})})},M6t=(i,t)=>t.filter(e=>e.type===i.datumType),T6t=C6t,P6t=M6t,sR={triangleForward:D6t,triangleUpright:vY,triangle:vY,diamond:E6t,square:O6t,star:R6t,cardioid:I6t,circle:L6t,pentagon:B6t};function E6t(){return function(i){const t=i%(2*Math.PI/4);return 1/(Math.cos(t)+Math.sin(t))}}function R6t(){return function(i){const t=(i+.955)%(2*Math.PI/10);return(i+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-t)+3.07768*Math.sin(2*Math.PI/10-t)):1/(Math.cos(t)+3.07768*Math.sin(t))}}function O6t(){return function(i){return Math.min(1/Math.abs(Math.cos(i)),1/Math.abs(Math.sin(i)))}}function vY(){return function(i){const t=(i+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(t)+Math.sqrt(3)*Math.sin(t))}}function D6t(){return function(i){const t=i%(2*Math.PI/3);return 1/(Math.cos(t)+Math.sqrt(3)*Math.sin(t))}}function I6t(){return function(i){return 1+Math.sin(i)}}function L6t(){return function(){return 1}}function B6t(){return function(i){const t=(i+.955)%(2*Math.PI/5);return 1/(Math.cos(t)+.726543*Math.sin(t))}}function Zz(i,t){const e=t[0],n=t[1];let r=1;const s=[t[0]>>1,t[1]>>1];switch(i){case"cardioid":s[1]=~~(n/2.7*.4),r=Math.floor(Math.min(e/2.3,n/2.6));break;case"triangleForward":r=n/Math.sqrt(.75)>e?Math.floor(e/2):Math.floor(n/(2*Math.sqrt(.75)));break;case"triangle":case"triangleUpright":s[1]=~~(n/1.5),r=Math.floor(Math.min(n/1.5,e/2));break;case"circle":case"diamond":case"square":case"star":case"pentagon":r=Math.floor(Math.min(e/2,n/2));break;default:r=Math.floor(Math.max(e/2,n/2))}return{maxRadius:r,center:s}}const Vst=i=>sR[i]?sR[i]():sR.circle(),yY=(i,t)=>"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(t-i)+i).toFixed()+"%)";function Xh(i){return it(i)?i:function(){return i}}class Ym{constructor(t){var e,n;switch(this.options=ot({},Ym.defaultOptions,t),it(this.options.shape)?this.shape=this.options.shape:this.shape=Vst(this.options.shape),this.getText=(e=Xh(this.options.text))!==null&&e!==void 0?e:r=>r,this.getTextFontWeight=Xh(this.options.fontWeight),this.getTextFontSize=Xh(this.options.fontSize),this.getTextFontStyle=Xh(this.options.fontStyle),this.getTextFontFamily=Xh(this.options.fontFamily),this.outputCallback=(n=this.options.outputCallback)!==null&&n!==void 0?n:r=>r,this.options.color){case"random-dark":this.getTextColor=()=>yY(10,50);break;case"random-light":this.getTextColor=()=>yY(50,90);break;default:this.getTextColor=Xh(this.options.color)}if(N(this.options.rotate))if(this.options.useRandomRotate){const r=Math.abs(this.options.maxRotation-this.options.minRotation),s=Math.abs(Math.floor(this.options.rotationSteps)),a=Math.min(this.options.maxRotation,this.options.minRotation);this.getTextRotate=()=>this.options.rotateRatio===0||Math.random()>this.options.rotateRatio?0:r===0?a:s>0?a+Math.floor(Math.random()*s)*r/(s-1):a+Math.random()*r}else this.getTextRotate=()=>0;else this.getTextRotate=it(this.options.rotate)?r=>{var s;return ii((s=this.options.rotate(r))!==null&&s!==void 0?s:0)}:(r,s)=>{const a=X(this.options.rotate),o=this.options.random?Math.random():dJ(s);return ii(a[Math.floor(o*a.length)])}}canRepeat(){return!1}exceedTime(){var t;return this.options.progressiveStep>0?this.progressiveIndex>=(((t=this.currentStepIndex)!==null&&t!==void 0?t:-1)+1)*this.options.progressiveStep:this.options.progressiveTime>0&&new Date().getTime()-this.escapeTime>this.options.progressiveTime}progressiveRun(){var t;if(this.options.progressiveStep>0?this.currentStepIndex=((t=this.currentStepIndex)!==null&&t!==void 0?t:-1)+1:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.data&&this.progressiveIndex<this.data.length){this.progressiveResult=[];let e=this.progressiveIndex,n=0;const r=this.options.maxSingleWordTryCount,s=Math.min(this.options.maxFailCount,this.originalData.length);for(;e<this.data.length&&this.failCount<s;){const a=this.layoutWord(e);if(n++,(a||n>r)&&(e++,n=0,this.failCount=a?0:this.failCount+1),this.progressiveIndex=e,this.exceedTime())break;e===this.data.length&&this.failCount<s&&this.options.repeatFill&&this.canRepeat()&&(this.data=[...this.data,...this.originalData.map(o=>Object.assign(Object.assign({},o),{isFill:!0}))],this.isTryRepeatFill=!0)}return this.progressiveResult}return this.result}initProgressive(){this.failCount=0,this.progressiveIndex=0,this.options.progressiveStep>0?this.currentStepIndex=-1:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.progressiveResult=[]}output(){return this.result?this.outputCallback(this.result):null}progressiveOutput(){return this.progressiveResult?this.outputCallback(this.progressiveResult):null}unfinished(){return this.data&&this.data.length&&!N(this.progressiveIndex)&&this.progressiveIndex<this.data.length}release(){this.data=null,this.result=null,this.progressiveIndex=null,this.progressiveResult=null}}Ym.defaultOptions={fontFamily:'"Trebuchet MS", "Heiti TC", "", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",fontStyle:"normal",minFontSize:12,drawOutOfBound:!1,shrink:!1,minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,rotateRatio:.1,random:!1,shape:"circle",progressiveTime:0,progressiveStep:0,repeatFill:!1,fillTextFontSize:12,maxFailCount:20};const bY={archimedean:F6t,rectangular:z6t};function F6t(i){const t=i[0]/i[1];return e=>[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}function z6t(i){const t=4*i[0]/i[1];let e=0,n=0;return r=>{const s=r<0?-1:1;switch(Math.sqrt(1+4*s*r)-s&3){case 0:e+=t;break;case 1:n+=4;break;case 2:e-=t;break;default:n-=4}return[e,n]}}class wg extends Ym{constructor(t){var e;super(ot({},wg.defaultOptions,t)),this.cw=64,this.ch=2048,this._size=[256,256],this._isBoardExpandCompleted=!1,this._placeStatus=0,this._tTemp=null,this._dtTemp=null,this._dy=0,this.cacheMap=new Map,this.options.minFontSize<=wg.defaultOptions.minFontSize&&(this.options.minFontSize=wg.defaultOptions.minFontSize),this.spiral=Ht(this.options.spiral)?(e=bY[this.options.spiral])!==null&&e!==void 0?e:bY.archimedean:this.options.spiral,this.random=this.options.random?Math.random:()=>1,this.getTextPadding=Xh(this.options.padding)}zoomRatio(){return this._originSize[0]/this._size[0]}dy(){return this._dy}layoutWord(t){const e=this.data[t];if((""+e.text).trim()==="")return!0;const{maxRadius:n,center:r}=Zz(this.options.shape,this._size);if(e.x=r[0],e.y=r[1],N6t(this.contextAndRatio,e,this.data,t,this.cw,this.ch),this._placeStatus=0,e.hasText&&this.place(this._board,e,this._bounds,n))return this.result.push(e),this._bounds?H6t(this._bounds,e):this._bounds=[{x:e.x+e.x0,y:e.y+e.y0},{x:e.x+e.x1,y:e.y+e.y1}],e.x-=this._size[0]>>1,e.y-=this._size[1]>>1,this._tTemp=null,this._dtTemp=null,!0;if(this.updateBoardExpandStatus(e.fontSize),e.hasText&&this.shouldShrinkContinue()){if(this._placeStatus===1){const s=e.fontSize*this._originSize[0]/this.options.minFontSize,a=Math.max(e.width,e.height);if(a<=s)this._board=this.expandBoard(this._board,this._bounds,a/this._size[0]);else{if(!this.options.clip)return!0;this._board=this.expandBoard(this._board,this._bounds,s/this._size[0])}}else this._placeStatus,this._board=this.expandBoard(this._board,this._bounds);return this.updateBoardExpandStatus(e.fontSize),!1}return this._tTemp=null,this._dtTemp=null,!0}layout(t,e){this.initProgressive(),this.result=[],this._size=[e.width,e.height],this.clearCache(),this._originSize=[...this._size];const n=this.getContext(this.options.createCanvas({width:1,height:1}));this.contextAndRatio=n,this._board=new Uint32Array((this._size[0]>>5)*this._size[1]).fill(0),this._bounds=null,t.length,this.result=[];const r=t.map((s,a)=>({text:this.getText(s),fontFamily:this.getTextFontFamily(s),fontStyle:this.getTextFontStyle(s),fontWeight:this.getTextFontWeight(s),angle:this.getTextRotate(s,a),fontSize:~~this.getTextFontSize(s),padding:this.getTextPadding(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s,x:0,y:0,width:0,height:0})).sort(function(s,a){return a.fontSize-s.fontSize});if(this.originalData=r,this.data=r,this.progressiveRun(),!this.options.clip&&this.options.enlarge&&this._bounds&&this.shrinkBoard(this._bounds),this._bounds&&["cardioid","triangle","triangle-upright"].includes(this.options.shape)){const s=(this._bounds[0].y+this._bounds[1].y)/2;this._dy=-(s-this._originSize[1]/2)}return this.result}formatTagItem(t){const e=this._size,n=this.zoomRatio(),r=this.dy(),s=e[0]>>1,a=e[1]>>1,o=t.length,l=[];let u,c;for(let h=0;h<o;++h)u=t[h],c={},c.datum=u.datum,c.x=(u.x+s)*n,c.y=(u.y+a+r)*n,c.fontFamily=u.fontFamily,c.fontSize=u.fontSize*n,c.fontStyle=u.fontStyle,c.fontWeight=u.fontWeight,c.angle=u.angle,l.push(c);return l}output(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.result)):this.formatTagItem(this.result)}progressiveOutput(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.progressiveResult)):this.formatTagItem(this.progressiveResult)}updateBoardExpandStatus(t){this._isBoardExpandCompleted=t*(this._originSize[0]/this._size[0])<this.options.minFontSize}shouldShrinkContinue(){return!this.options.clip&&this.options.shrink&&!this._isBoardExpandCompleted}shrinkBoard(t){const e=t[0],n=t[1];if(n.x>=this._size[0]||n.y>=this._size[1])return;const r=Math.min(e.x,this._size[0]-n.x),s=Math.min(e.y,this._size[1]-n.y),a=2*Math.min(r/this._size[0],s/this._size[1]);this._size=this._size.map(o=>o*(1-a))}expandBoard(t,e,n){const r=this._size[0],s=this._size[1],a=r>>5,o=r*(n||1.1)-r>>5;let l=2*o>2?o:2;l%2!=0&&l++;let u=Math.ceil(s*(l<<5)/r);u%2!=0&&u++;const c=r+(l<<5),h=s+u,d=c>>5,f=l/2,p=u/2,g=new Uint32Array(h*d).fill(0);for(let m=0;m<s;m++){const _=m*a,v=_+a,y=(m+p)*d+f,b=t.slice(_,v);g.set(b,y)}if(this._size=[c,h],e){const m=(l<<5)/2,_=u/2;e[0].x+=m,e[0].y+=_,e[1].x+=m,e[1].y+=_}return g}insertZerosToArray(t,e,n){if(this.options.customInsertZerosToArray)return this.options.customInsertZerosToArray(t,e,n);const r=Math.floor(n/6e4),s=n%6e4;for(let a=0;a<r;a++)t.splice(e+6e4*a,0,...new Array(6e4).fill(0));t.splice(e+6e4*r,0,...new Array(s).fill(0))}getContext(t){t.width=1,t.height=1;const e=t.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1),n=Math.sqrt(e.data.length>>2);t.width=(this.cw<<5)/n,t.height=this.ch/n;const r=t.getContext("2d",{willReadFrequently:!0});return r.fillStyle=r.strokeStyle="red",r.textAlign="center",{context:r,ratio:n,canvas:t}}place(t,e,n,r){let s=!1;if(this.shouldShrinkContinue()&&(e.width>this._size[0]||e.height>this._size[1]))return this._placeStatus=1,!1;const a=this.random()<.5?1:-1;if(!this.shouldShrinkContinue()&&this.isSizeLargerThanMax(e,a))return null;const o=e.x,l=e.y,u=Math.sqrt(this._size[0]*this._size[0]+this._size[1]*this._size[1]),c=this.spiral(this._size);let h,d,f,p,g=-a;for(this._tTemp=null,this._dtTemp=null;h=c(g+=a);){d=h[0],f=h[1];const m=Math.sqrt(d**2+f**2);let _=Math.atan(f/d);d<0?_+=Math.PI:f<0&&(_=2*Math.PI+_);const v=this.shape(_);if(Math.min(Math.abs(d),Math.abs(f))>=u)break;if(m>=r)s&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);else{if(e.x=o+~~(m*v*Math.cos(-_)),e.y=l+~~(m*v*Math.sin(-_)),p=e,this.options.clip)if(this.shouldShrinkContinue()){if(aR(p,this._size)){s&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);continue}}else{if(W6t(p,this._size)){s&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);continue}aR(p,this._size)&&(p=$6t(p,this._size))}else if(aR(p,this._size)){s&&this._tTemp===null&&(this._tTemp=g,this._dtTemp=a);continue}if(s=!0,(!n||V6t(p,n))&&(!n||!j6t(p,t,this._size))){const y=p.sprite,b=p.width>>5,x=this._size[0]>>5,S=p.x-(b<<4),w=127&S,A=32-w,k=p.y1-p.y0;let C,M=(p.y+p.y0)*x+(S>>5);for(let R=0;R<k;R++){C=0;for(let P=0;P<=b;P++)t[M+P]|=C<<A|(P<b?(C=y[R*b+P])>>>w:0);M+=x}return e.sprite=null,p.sprite=null,!0}}}return this._tTemp!==null&&(this._placeStatus=3),!this.shouldShrinkContinue()&&this.setCache(p,a),!1}clearCache(){this.cacheMap.clear()}setCache(t,e){const n=`${t.angle}-${e}`,r=t.x1-t.x0,s=t.y1-t.y0;if(!this.cacheMap.has(n))return void this.cacheMap.set(n,{width:r,height:s});const{width:a,height:o}=this.cacheMap.get(n);(r<a&&s<o||r<=a&&s<o)&&this.cacheMap.set(n,{width:r,height:s})}isSizeLargerThanMax(t,e){const n=`${t.angle}-${e}`;if(!this.cacheMap.has(n))return!1;const{width:r,height:s}=this.cacheMap.get(n),a=t.x1-t.x0,o=t.y1-t.y0;return a>=r&&o>=s}}function N6t(i,t,e,n,r,s){if(t.sprite)return;const a=i.context,o=i.ratio;a.setTransform(o,0,0,o,0,0),a.clearRect(0,0,(r<<5)/o,s/o);let l=0,u=0,c=0;const h=e.length;let d,f,p,g,m;for(--n;++n<h;){if(t=e[n],a.save(),a.font=t.fontStyle+" "+t.fontWeight+" "+~~((t.fontSize+1)/o)+"px "+t.fontFamily,d=a.measureText(t.text+"m").width*o,p=t.fontSize<<1,t.angle){const y=Math.sin(t.angle),b=Math.cos(t.angle),x=d*b,S=d*y,w=p*b,A=p*y;d=Math.max(Math.abs(x+A),Math.abs(x-A))+31>>5<<5,p=~~Math.max(Math.abs(S+w),Math.abs(S-w))}else d=d+31>>5<<5;if(p>c&&(c=p),l+d>=r<<5&&(l=0,u+=c,c=0),u+p>=s)break;a.translate((l+(d>>1))/o,(u+(p>>1))/o),t.angle&&a.rotate(t.angle),a.fillText(t.text,0,0),t.padding&&(a.lineWidth=2*t.padding,a.strokeText(t.text,0,0)),a.restore(),t.width=d,t.height=p,t.xoff=l,t.yoff=u,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=d}const _=a.getImageData(0,0,(r<<5)/o,s/o).data,v=[];for(;--n>=0;){if(!(t=e[n]).hasText)continue;for(d=t.width,f=d>>5,p=t.y1-t.y0,g=0;g<p*f;g++)v[g]=0;if(l=t.xoff,l==null)return;u=t.yoff;let y=0,b=-1;for(m=0;m<p;m++){for(g=0;g<d;g++){const x=f*m+(g>>5),S=_[(u+m)*(r<<5)+(l+g)<<2]?1<<31-g%32:0;v[x]|=S,y|=S}y?b=m:(t.y0++,p--,m--,u++)}t.y1=t.y0+b,t.sprite=v.slice(0,(t.y1-t.y0)*f)}}function j6t(i,t,e){const n=e[0]>>5,r=i.sprite,s=i.width>>5,a=i.x-(s<<4),o=127&a,l=32-o,u=i.y1-i.y0;let c,h=(i.y+i.y0)*n+(a>>5);for(let d=0;d<u;d++){c=0;for(let f=0;f<=s;f++)if((c<<l|(f<s?(c=r[d*s+f])>>>o:0))&t[h+f])return!0;h+=n}return!1}function H6t(i,t){const e=i[0],n=i[1];t.x+t.x0<e.x&&(e.x=t.x+t.x0),t.y+t.y0<e.y&&(e.y=t.y+t.y0),t.x+t.x1>n.x&&(n.x=t.x+t.x1),t.y+t.y1>n.y&&(n.y=t.y+t.y1)}function V6t(i,t){return i.x+i.x1>t[0].x&&i.x+i.x0<t[1].x&&i.y+i.y1>t[0].y&&i.y+i.y0<t[1].y}wg.defaultOptions={enlarge:!1,minFontSize:2,maxSingleWordTryCount:2};const W6t=(i,t)=>i.x+i.x0>t[0]||i.y+i.y0>t[0]||i.x+i.x1<0||i.y+i.y1<0,aR=(i,t)=>i.x+i.x0<0||i.y+i.y0<0||i.x+i.x1>t[0]||i.y+i.y1>t[1];function $6t(i,t){const e=i.sprite,n=i.y1-i.y0,r=i.width>>5;let s=0;const a=[],o=Math.max(-(i.y0+i.y),0),l=Math.min(n+(t[1]-(i.y1+i.y)),n),u=Math.max(-(i.x0+i.x),0)>>5,c=Math.min(r+(t[0]-(i.x1+i.x)>>5)+1,r);for(let g=0;g<n;g++){for(let m=0;m<r;m++)g<o||l<=g||m<u||c<=m||a.push(e[s+m]);s+=r}const h=u<<5,d=r-c<<5,f=o,p=n-l;return Object.assign(Object.assign({},i),{width:i.width-h-d,height:i.height-f-p,x0:i.x0+h,x1:i.x1-d,y0:i.y0+f,y1:i.y1-p,x:i.x+h/2-d/2,sprite:a})}const kL=(i,t,e)=>{const{threshold:n,invert:r=!1}={};if(!i||i==="#fff")return(o,l,u)=>{const c=o.width;if(o.data[l*c*4+4*u+3]===0)return!r;const h=o.data[l*c*4+4*u+0],d=o.data[l*c*4+4*u+1],f=o.data[l*c*4+4*u+2];if(h===255&&d===255&&f===255)return!r;if(et(n)){const p=.3*h+.59*d+.11*f;return r?p<=n:p>=n}return!1};const s=e({width:1,height:1}).getContext("2d",{willReadFrequently:!0});s.fillStyle=i,s.fillRect(0,0,1,1);const a=s.getImageData(0,0,1,1).data;return(o,l,u)=>{const c=o.width;return[0,1,2,3].every(h=>r?o.data[4*(l*c+u)+h]!==a[h]:o.data[4*(l*c+u)+h]===a[h])}},Wst=(i,t,e,n,r=!1,s)=>{let{backgroundColor:a="#fff"}=i,{fill:o="#000"}=i;r&&([a,o]=[o,a]);const l=s({width:t,height:e,dpr:1}),u=l.getContext("2d",{willReadFrequently:!0});return u.fillStyle=a,u.fillRect(0,0,l.width,l.height),i.type==="text"?U6t(i,o,l.width,l.height,u):i.type==="geometric"&&X6t(i,o,l.width,l.height,u),l},U6t=(i,t,e,n,r)=>{const{fontFamily:s="sans-serif",fontWeight:a="normal",fontStyle:o="normal",fontVariant:l="normal",text:u,hollow:c}=i;let h=12;r.font=`${o} ${l} ${a} ${h}px ${s}`,r.textAlign="center",r.textBaseline="middle",r.fillStyle=t;const d=r.measureText(u),f=o!=="normal"?1.1:1,p=L(d.actualBoundingBoxRight)&&L(d.actualBoundingBoxLeft)?Math.ceil(f*(Math.abs(d.actualBoundingBoxRight)+Math.abs(d.actualBoundingBoxLeft))):0,g=Math.max(Math.ceil(d.width),p,h);if(c&&(r.globalCompositeOperation="xor"),g>e){const m=Math.min(e/g,n/h);r.fillText(u,e/2,n/2),r.scale(m,m)}else h=Math.floor(h*e/g),h=Math.min(h,n),r.font=`${o} ${l} ${a} ${h}px ${s}`,r.fillText(u,Math.floor(e/2),Math.floor(n/2))},jh=(i,t,e=0,n)=>{const r=2*Math.PI/n;return new Array(n).fill(0).map((s,a)=>yi(i,t,e+a*r))},G6t=(i,t,e=0,n)=>{const r=2*Math.PI/n,s=Vst("cardioid");return new Array(n).fill(0).map((a,o)=>{const l=e+o*r,u=t*s(l);return yi(i,u,l)})},qf=(i,t)=>{i.beginPath(),t.forEach((e,n)=>{n===0?i.moveTo(e.x,e.y):i.lineTo(e.x,e.y)}),i.closePath(),i.fill()},Y6t=(i,t)=>{let e;i.beginPath(),t.forEach((n,r)=>{r===0?i.moveTo(n.x,n.y):i.bezierCurveTo(n.x,n.y,e.x,e.y,n.x,n.y),e=n}),i.closePath(),i.fill()},X6t=(i,t,e,n,r)=>{const{hollow:s}=i,{center:a,maxRadius:o}=Zz(i.shape,[e,n]);r.fillStyle=t,s&&(r.globalCompositeOperation="xor");const l=a[0],u=a[1];if(i.shape==="cardioid")Y6t(r,G6t({x:l,y:u},o,0,100));else if(i.shape==="circle")r.beginPath(),r.arc(l,u,o,0,2*Math.PI,!0),r.fill();else if(i.shape==="diamond")qf(r,jh({x:l,y:u},o,-Math.PI/2,4));else if(i.shape==="square")qf(r,jh({x:l,y:u},o,-Math.PI/4,4));else if(i.shape==="pentagon")qf(r,jh({x:l,y:u},o,Math.PI/2,5));else if(i.shape==="triangle"||i.shape==="triangleUpright")qf(r,jh({x:l,y:u},o,-Math.PI/2,3));else if(i.shape==="triangleForward")qf(r,jh({x:l,y:u},o,0,3));else if(i.shape==="star"){const c=jh({x:l,y:u},o,-Math.PI/2,5),h=jh({x:l,y:u},o/(2*Math.cos(Math.PI/5)),-Math.PI/2+Math.PI/5,5),d=[];for(let f=0;f<5;f++)d.push(c[f]),d.push(h[f]);qf(r,d)}else r.fillRect(0,0,e,n)};function K6t(i){const{size:t,maskCanvas:e}=i,n=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height),r=new Array(t[0]*t[1]).fill(0);let s=1;const a=[[0,1],[1,0],[-1,0],[0,-1]];let o=[];for(let k=0;k<t[1];k++)for(let C=0;C<t[0];C++)if(r[k*t[0]+C]===0&&!i.isEmptyPixel(n,k,C)){r[k*t[0]+C]=s,o.push([k,C]);for(let M=0;M<o.length;M++)for(let R=0;R<4;R++){let P=o[M][0]+a[R][0],O=o[M][1]+a[R][1];P=P<0?0:P>=t[1]?t[1]-1:P,O=O<0?0:O>=t[0]?t[0]-1:O,r[P*t[0]+O]!==0||i.isEmptyPixel(n,P,O)||(r[P*t[0]+O]=s,o.push([P,O]))}s++,o=[]}const l={},u={},c={},h={},d={},f={},p={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0,width:0,height:0},g=[];for(let k=0;k<t[1];k++)for(let C=0;C<t[0];C++){const M=r[k*t[0]+C];M!==0&&(A(k,C)&&(g.push([k,C]),l[M]=l[M]||[],l[M].push([C,k]),h[M]||(h[M]=[1/0,-1/0,1/0,-1/0]),k<h[M][0]&&(h[M][0]=k),k>h[M][1]&&(h[M][1]=k),C<h[M][2]&&(h[M][2]=C),C>h[M][3]&&(h[M][3]=C),C<p.x1&&(p.x1=C),C>p.x2&&(p.x2=C),k<p.y1&&(p.y1=k),k>p.y2&&(p.y2=k)),u[M]=(u[M]||0)+1)}const m=[];for(const k in l){const C=l[k],M=~~(C.reduce((B,I)=>B+I[0],0)/C.length),R=~~(C.reduce((B,I)=>B+I[1],0)/C.length);c[k]=[M,R],m.push(...C);const[P,O,T,D]=h[k];d[k]=~~Math.max(Math.sqrt((M-T)**2+(R-P)**2),Math.sqrt((M-D)**2+(R-O)**2),Math.sqrt((M-T)**2+(R-O)**2),Math.sqrt((M-D)**2+(R-P)**2)),f[k]=(D-T)/(O-P)}const _=Object.keys(c).map(k=>({label:k-1,boundary:l[k],area:u[k],center:c[k],maxPoint:h[k],maxR:d[k],ratio:f[k]}));p.width=p.x2-p.x1+1,p.height=p.y2-p.y1+1;const v=~~(m.reduce((k,C)=>k+C[0],0)/m.length),y=~~(m.reduce((k,C)=>k+C[1],0)/m.length),b=~~Math.max(Math.sqrt((v-p.x1)**2+(y-p.y1)**2),Math.sqrt((v-p.x2)**2+(y-p.y2)**2),Math.sqrt((v-p.x1)**2+(y-p.y2)**2),Math.sqrt((v-p.x2)**2+(y-p.y1)**2)),x=p.width/p.height,S=Object.keys(u).reduce((k,C)=>k+u[C],0),w={regions:_,labels:r,labelNumber:s-1};if(i.blur){const k=i.blur,C=Z6t(r,t[0],t[1],k);Q6t(r,g,t[0],t[1],Math.ceil(k/2)).forEach((M,R)=>{M===1&&(r[R]=C[R])})}return Object.assign(i,{segmentation:w,shapeBounds:p,shapeMaxR:b,shapeRatio:x,shapeCenter:[v,y],shapeArea:S});function A(k,C){const M=[[0,1],[1,0],[-1,0],[0,-1]];if(k===0||C===0||k===t[1]-1||C===t[0]-1)return!0;for(let R=0;R<4;R++){let P=k+M[R][0],O=C+M[R][1];if(P=P<0?0:P>=t[1]?t[1]-1:P,O=O<0?0:O>=t[0]?t[0]-1:O,r[P*t[0]+O]===0)return!0}return!1}}function q6t(i,t){const e=new Array(2*i+1).fill(0),n=i;let r=0;for(let s=-i;s<=i;s++){const a=Math.exp(-s*s/(2*t*t));e[s+n]=a,r+=a}for(let s=0;s<e.length;s++)e[s]/=r;return e}function Z6t(i,t,e,n){const r=n/3,s=Math.ceil(n/2),a=q6t(s,r),o=new Array(i.length).fill(0),l=new Array(i.length).fill(0);for(let u=0;u<e;u++)for(let c=0;c<t;c++){let h=0;for(let d=-s;d<=s;d++)h+=i[u*t+Math.min(Math.max(c+d,0),t-1)]*a[d+s];o[u*t+c]=h}for(let u=0;u<t;u++)for(let c=0;c<e;c++){let h=0;for(let d=-s;d<=s;d++)h+=o[Math.min(Math.max(c+d,0),e-1)*t+u]*a[d+s];l[c*t+u]=Math.max(0,Math.min(1,h))}return l}function Q6t(i,t,e,n,r=1){const s=new Array(i.length).fill(0);for(const[a,o]of t)if(s[a*e+o]=1,r>1){for(let l=1-r;l<=r-1;l++)for(let u=1-r;u<=r-1;u++)if(Math.sqrt(l*l+u*u)<r){const c=a+l,h=o+u;c>=0&&c<n&&h>=0&&h<e&&(s[c*e+h]=1)}}return s}function J6t(i,t,e){t.width=i.width,t.height=i.height;const n=t.getContext("2d",{willReadFrequently:!0});n.clearRect(0,0,t.width,t.height),n.drawImage(i,0,0);const r=t.width,s=n.getImageData(0,0,t.width,t.height);let a=0,o=s.height,l=0,u=s.width;const c=(f,p)=>{for(let g=0;g<f;++g)if(!e(s,p,g))return!1;return!0},h=(f,p,g)=>{for(let m=p;m<g;++m)if(!e(s,m,f))return!1;return!0};for(;a<o&&c(r,a);)++a;for(;o-1>a&&c(r,o-1);)--o;for(;l<u&&h(l,a,o);)++l;for(;u-1>l&&h(u-1,a,o);)--u;const d=n.getImageData(l,a,u-l,o-a);return t.width=d.width,t.height=d.height,n.clearRect(0,0,t.width,t.height),n.putImageData(d,0,0),t}function t7t(i,t){const e=i.width,n=i.height;let r=t[0]/e;n*r>t[1]&&(r=t[1]/n);const s=Math.floor(r*e),a=Math.floor(r*n);return{x:(t[0]-s)/2,y:(t[1]-a)/2,width:s,height:a,scale:r}}/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2019 Tim Guan-tin Chien and contributors.
 * Released under the MIT license
 */let $st=class Ust extends Ym{constructor(t){super(ot({},Ust.defaultOptions,t)),this.fillGridAt=(e,n)=>{e>=this.ngx||n>=this.ngy||e<0||n<0||(this.grid[e][n]=!1)},this.updateGrid=(e,n,r,s,a)=>{const o=a.occupied;let l=o.length;for(;l--;){const u=e+o[l][0],c=n+o[l][1];u>=this.ngx||c>=this.ngy||u<0||c<0||this.fillGridAt(u,c)}},this.gridSize=Math.max(Math.floor(this.options.gridSize),4)}getPointsAtRadius(t){if(this.pointsAtRadius[t])return this.pointsAtRadius[t];const e=8*t;let n=e;const r=[];for(t===0&&r.push([this.center[0],this.center[1],0]);n--;){const s=this.shape(n/e*2*Math.PI);r.push([this.center[0]+t*s*Math.cos(-n/e*2*Math.PI),this.center[1]+t*s*Math.sin(-n/e*2*Math.PI)*this.options.ellipticity,n/e*2*Math.PI])}return this.pointsAtRadius[t]=r,r}getTextInfo(t,e=1,n){var r;const s=this.options.clip?1:e,a=Math.max(Math.floor((this.isTryRepeatFill?this.options.fillTextFontSize:this.getTextFontSize(t))*s),this.options.minFontSize);let o=this.getText(t)+"";if(this.options.clip&&(o=o.slice(0,Math.ceil(o.length*e))),!o)return null;const l=this.getTextFontWeight(t),u=this.getTextFontStyle(t),c=this.getTextRotate&&(r=this.getTextRotate(t,n))!==null&&r!==void 0?r:0,h=this.getTextFontFamily(t),d=this.options.createCanvas({width:1,height:1}),f=d.getContext("2d",{willReadFrequently:!0});f.font=u+" "+l+" "+a.toString(10)+"px "+h;const p=f.measureText(o).width,g=Math.max(a,f.measureText("m").width,f.measureText("").width);let m=p+2*g,_=3*g;const v=Math.ceil(m/this.gridSize),y=Math.ceil(_/this.gridSize);m=v*this.gridSize,_=y*this.gridSize;const b=-p/2,x=.4*-g,S=Math.ceil((m*Math.abs(Math.sin(c))+_*Math.abs(Math.cos(c)))/this.gridSize),w=Math.ceil((m*Math.abs(Math.cos(c))+_*Math.abs(Math.sin(c)))/this.gridSize),A=w*this.gridSize,k=S*this.gridSize;d.setAttribute("width",""+A),d.setAttribute("height",""+k),f.scale(1,1),f.translate(A/2,k/2),f.rotate(-c),f.font=u+" "+l+" "+a.toString(10)+"px "+h,f.fillStyle="#000",f.textBaseline="middle",f.fillText(o,b,x);const C=f.getImageData(0,0,A,k).data;if(this.exceedTime())return null;const M=[];let R,P=w;const O=[S/2,w/2,S/2,w/2],T=(D,B,I)=>{let F=this.gridSize;for(;F--;){let j=this.gridSize;for(;j--;)if(C[4*((B*this.gridSize+F)*A+(D*this.gridSize+j))+3])return I.push([D,B]),D<O[3]&&(O[3]=D),D>O[1]&&(O[1]=D),B<O[0]&&(O[0]=B),void(B>O[2]&&(O[2]=B))}};for(;P--;)for(R=S;R--;)T(P,R,M);return{datum:t,occupied:M,bounds:O,gw:w,gh:S,fillTextOffsetX:b,fillTextOffsetY:x,fillTextWidth:p,fillTextHeight:g,fontSize:a,fontStyle:u,fontWeight:l,fontFamily:h,angle:c,text:o}}calculateEmptyRate(){const t=this.ngx*this.ngy;let e=0;for(let n=0;n<this.ngx;n++)for(let r=0;r<this.ngy;r++)this.grid[n][r]&&e++;return e/t}canFitText(t,e,n,r,s){let a=s.length;for(;a--;){const o=t+s[a][0],l=e+s[a][1];if(o>=this.ngx||l>=this.ngy||o<0||l<0){if(!this.options.drawOutOfBound)return!1}else if(!this.grid[o][l])return!1}return!0}layoutWord(t,e=1){const n=this.data[t],r=this.getTextInfo(n,e,t);if(!r||this.exceedTime())return!1;if(!this.options.drawOutOfBound&&(!this.options.shrink||r.fontSize<=this.options.minFontSize)&&!this.options.clip){const o=r.bounds;if(o[1]-o[3]+1>this.ngx||o[2]-o[0]+1>this.ngy)return!1}let s=this.maxRadius+1;const a=o=>{const l=Math.floor(o[0]-r.gw/2),u=Math.floor(o[1]-r.gh/2),c=r.gw,h=r.gh;return!!this.canFitText(l,u,c,h,r.occupied)&&(r.distance=this.maxRadius-s,r.theta=o[2],this.outputText(l,u,r),this.updateGrid(l,u,c,h,r),!0)};for(;s--;){let o=this.getPointsAtRadius(this.maxRadius-s);if(this.options.random&&(o=[].concat(o),oJ(o)),o.some(a))return!0}return(this.options.clip||!!(this.options.shrink&&r.fontSize>this.options.minFontSize))&&this.layoutWord(t,.75*e)}outputText(t,e,n){const r=this.getTextColor(n),s={text:n.text,datum:n.datum,color:r,fontStyle:n.fontStyle,fontWeight:n.fontWeight,fontFamily:n.fontFamily,angle:n.angle,width:n.fillTextWidth,height:n.fillTextHeight,x:(t+n.gw/2)*this.gridSize,y:(e+n.gh/2)*this.gridSize+n.fillTextOffsetY+.5*n.fontSize,fontSize:n.fontSize};this.result.push(s),this.progressiveResult&&this.progressiveResult.push(s)}initGrid(t){this.grid=[];const e=this.options.shape;if(ee(e)){const n=Wst(e,t.width,t.height,void 0,!1,this.options.createCanvas);let r=n.getContext("2d").getImageData(0,0,this.ngx*this.gridSize,this.ngy*this.gridSize);this.options.onUpdateMaskCanvas&&this.options.onUpdateMaskCanvas(n);let s=kL(e.backgroundColor,void 0,this.options.createCanvas);const a=(l,u)=>{let c=this.gridSize;for(;c--;){let h=this.gridSize;for(;h--;)if(!s(r,u*this.gridSize+c,l*this.gridSize+h))return void(this.grid[l][u]=!0)}this.grid[l][u]=!1};let o=this.ngx;for(;o--;){this.grid[o]=[];let l=this.ngy;for(;l--;)a(o,l),this.grid[o][l]!==!1&&(this.grid[o][l]=!0)}r=s=void 0}else{let n=this.ngx;for(;n--;){this.grid[n]=[];let r=this.ngy;for(;r--;)this.grid[n][r]=!0}}}canRepeat(){return this.calculateEmptyRate()>.001}layout(t,e){this.initProgressive(),this.drawnCount=0,this.isTryRepeatFill=!1,this.originalData=t,this.data=t,this.pointsAtRadius=[],this.ngx=Math.floor(e.width/this.gridSize),this.ngy=Math.floor(e.height/this.gridSize);const{center:n,maxRadius:r}=Zz(this.options.shape,[e.width,e.height]);return this.center=e.origin?[e.origin[0]/this.gridSize,e.origin[1]/this.gridSize]:[n[0]/this.gridSize,n[1]/this.gridSize],this.maxRadius=Math.floor(r/this.gridSize),this.initGrid(e),this.result=[],this.progressiveRun()}};$st.defaultOptions={gridSize:8,ellipticity:1,maxSingleWordTryCount:1};class OT extends Ym{constructor(t){super(ot({},OT.defaultOptions,t)),this.random=this.options.random?Math.random:()=>0,this.aspectRatio=1}fit(t){for(let e=0,n=this.result.length;e<n;e++)if(e7t(t,this.result[e]))return!1;return!0}getTextInfo(t,e){const n={datum:t,fontSize:this.getTextFontSize(t),fontWeight:this.getTextFontWeight(t),fontStyle:this.getTextFontStyle(t),fontFamily:this.getTextFontFamily(t),angle:this.getTextRotate(t,e),text:this.getText(t)+"",x:this.center[0],y:this.center[1]},r=this.options.getTextBounds(n);return n.width=r.width(),n.height=r.height(),n.top=this.center[1]-n.height+.21*n.height,n.left=this.center[0]-n.width/2,n}layoutWord(t){const e=this.getTextInfo(this.data[t],t);let n=2*Math.PI,r=0,s=e.left,a=e.top;const o=e.width,l=e.height;let u=1,c=this.fit(e);for(;!c&&r<this.maxRadius;)r+=.5,u=this.shape(r/this.maxRadius*2*Math.PI),n+=.5*(this.options.random?this.random()>.5?1:-1:t%2==0?1:-1),s=this.center[0]-o/2+r*u*Math.cos(n)*this.aspectRatio,a=this.center[1]-l/2+r*u*Math.sin(n),e.left=s,e.top=a,e.x=s+o/2,e.y=a+l/2,c=this.fit(e);return!!c&&!!(this.options.clip||e.left>=0&&e.left+e.width<=this.width&&e.top>=0&&e.top+e.height<=this.height)&&(this.result.push(e),!0)}layout(t,e){if(!t?.length)return[];this.initProgressive(),this.result=[],this.maxRadius=Math.sqrt(e.width*e.width+e.height*e.height)/2,this.center=[e.width/2,e.height/2],this.width=e.width,this.height=e.height,this.data=t.sort((r,s)=>this.getTextFontSize(s)-this.getTextFontSize(r));let n=0;for(;n<t.length&&(this.layoutWord(n),n++,this.progressiveIndex=n,!this.exceedTime()););return this.result}}function e7t(i,t){return!(i.left+i.width<t.left||i.top+i.height<t.top||i.left>t.left+t.width||i.top>t.top+t.height)}OT.defaultOptions={enlarge:!1};const xY={x:"x",y:"y",z:"z",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",angle:"angle"},Gst=(i,t)=>{var e,n,r,s,a,o;if(i.size&&(i.size[0]<=0||i.size[1]<=0))return Ee.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];const l=t,u=((e=i.size)!==null&&e!==void 0?e:[500,500]).slice();u[0]=Math.floor(u[0]),u[1]=Math.floor(u[1]);const c=i.fontFamily?Hh(i.fontFamily):"sans-serif",h=i.fontStyle?Hh(i.fontStyle):"normal",d=i.fontWeight?Hh(i.fontWeight):"normal",f=i.rotate?Hh(i.rotate):0,p=Hh(i.text),g=(n=i.spiral)!==null&&n!==void 0?n:"archimedean",m=i.padding?Hh(i.padding):1,_=(r=i.shape)!==null&&r!==void 0?r:"square",v=(s=i.shrink)!==null&&s!==void 0&&s,y=(a=i.enlarge)!==null&&a!==void 0&&a,b=(o=i.clip)!==null&&o!==void 0&&o,x=i.minFontSize,S=i.randomVisible,w=i.as?Object.assign(Object.assign({},xY),i.as):xY,A=i.depth_3d,k=i.postProjection;let C=i.fontSize?Hh(i.fontSize):14;const M=i.fontSizeRange;if(M&&!yt(C)){const O=C,T=i7t(n7t(O,l),M);C=D=>T(O(D))}let R=wg;i.layoutType==="fast"?R=OT:i.layoutType==="grid"&&(R=$st);const P=new R(Object.assign(Object.assign({},i),{text:p,padding:m,spiral:g,shape:_,rotate:f,fontFamily:c,fontStyle:h,fontWeight:d,fontSize:C,shrink:v,clip:b,enlarge:y,minFontSize:x,random:S,outputCallback:O=>{const T=[];let D,B;for(let I=0,F=O.length;I<F;I++)B=O[I],D=B.datum,D[w.x]=B.x,D[w.y]=B.y,D[w.fontFamily]=B.fontFamily,D[w.fontSize]=B.fontSize,D[w.fontStyle]=B.fontStyle,D[w.fontWeight]=B.fontWeight,D[w.angle]=B.angle,k==="StereographicProjection"&&r7t(u,B,D,w,A),i.dataIndexKey&&(D[i.dataIndexKey]=`${I}`),T.push(D);return T}}));return P.layout(l,{width:u[0],height:u[1]}),i.progressiveStep>0||i.progressiveTime>0?{progressive:P}:P.output()},Hh=i=>Ht(i)||yt(i)||it(i)||J(i)?i:t=>t[i.field],oR=i=>i<0?-Math.sqrt(-i):Math.sqrt(i),i7t=(i,t,e)=>{if(i[0]===i[1])return o=>t[0];const n=oR(i[0]),r=oR(i[1]),s=Math.min(n,r),a=Math.max(n,r);return o=>(oR(o)-s)/(a-s)*(t[1]-t[0])+t[0]},n7t=(i,t)=>{let e=1/0,n=-1/0;const r=t.length;let s;for(let a=0;a<r;++a)s=Lc(i(t[a])),s<e&&(e=s),s>n&&(n=s);return t.length===1&&e===n&&(e-=1e4),[e,n]};function r7t(i,t,e,n,r){const s=Math.max(i[0],i[1])/2,a=s7t(i[0],i[1],s,{x:s,y:s,z:r??s},t);e[n.x]=a.x,e[n.y]=a.y,e[n.z]=a.z}function s7t(i,t,e,n,r){const{x:s,y:a}=r,o=s/i*Math.PI*2;let l=Math.PI-a/t*Math.PI;return l+=(l<Math.PI/2?1:-1)*Math.pow(Math.min(l-Math.PI/2,1),2)/5,{x:e*Math.sin(l)*Math.cos(o)+n.x,y:e*Math.cos(l)+n.y,z:e*Math.sin(l)*Math.sin(o)+n.z}}var SY;(function(i){i.BEFORE_WORDCLOUD_SHAPE_LAYOUT="beforeWordcloudShapeLayout",i.AFTER_WORDCLOUD_SHAPE_LAYOUT="afterWordcloudShapeLayout",i.AFTER_WORDCLOUD_SHAPE_DRAW="afterWordcloudShapeDraw"})(SY||(SY={}));const a7t=(i,t)=>{if(t.length===1&&t[0]==="#537EF5")return!0;if(!Array.isArray(i)||!Array.isArray(t)||i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==t[e])return!1;return!0},o7t=i=>/^[\u4e00-\u9fa5]+$/.test(i),Yst=(i,t)=>{if(N(i))return 0;let e=0;for(const n of i)o7t(n)?e+=1:e+=.53;return e};function l7t(i){return typeof i=="function"?i:function(){return i}}function u7t(i,t){const{segmentation:{regions:e}}=t;let n=-1/0,r=0,s=0;e.forEach((u,c)=>{const h=u.area;h>n&&(n=h,s=c),r+=h});let a=0;e.forEach(u=>{const c=u.area,h=Math.ceil(c/r*i.length),d=c/n;u.words=[],u.regionNum=h,u.regionWeight=d,a+=h}),a<i.length&&(e[s].wordsNum+=i.length-a);let o=s;const l=e.map(u=>u.regionNum);i.forEach(u=>{let c=0,h=0;u.regionIndex=-1;do{if(l[o]>0&&u.weight<=e[o].regionWeight){u.regionIndex=o,e[o].words.push(u),l[o]--,o=(o+1)%e.length;break}o=(o+1)%e.length,c++,h++,h>e.length+1&&(e.forEach(d=>{d.regionWeight+=.15}),h=0)}while(u.regionIndex===-1&&c<3*e.length);u.regionIndex===-1&&(u.regionIndex=s,e[s].words.push(u),l[s]--)}),e.forEach(u=>{u.words.sort((c,h)=>h.weight-c.weight)})}function c7t(i,t,e){const{size:n,stepFactor:r}=t,{segmentation:{regions:s},tempCanvas:a,boardSize:o,shapeCenter:l,shapeMaxR:u,shapeRatio:c}=e,h=Qz(e),d=a.getContext("2d",{willReadFrequently:!0});for(const f of s){const{words:p,center:g,maxR:m,ratio:_}=f;for(let v=0;v<p.length;v++){sf(a,d,i,v);const y=p[v];y.x=g[0],y.y=g[1],y.hasText&&y.sprite&&pm(h,y,m,_,n,o,r)&&(y.hasPlaced=!0)}}for(let f=0;f<t.textLayoutTimes;f++){const p=i.filter(g=>(g.hasPlaced||(g.hasText=!1,g.sprite=null,g.fontSize=Math.max(~~(g.fontSize*t.fontSizeShrinkFactor),t.minFontSize)),!g.hasPlaced));if(p.length===0)break;for(let g=0;g<p.length;g++){const m=p[g];sf(a,d,p,g),m.x=l[0],m.y=l[1],m.hasText&&pm(h,m,u,c,n,o,r)&&(m.hasPlaced=!0)}}t.board=h}function Xst(i,t,e){const{stepFactor:n,importantWordCount:r,globalShinkLimit:s}=t,{size:a,segmentation:{regions:o},tempCanvas:l,boardSize:u,shapeCenter:c,shapeMaxR:h,shapeRatio:d}=e,f=l.getContext("2d",{willReadFrequently:!0}),p=Qz(e);let g=p.slice(0);const m=t.fontSizeShrinkFactor;let _=null,v=1,y=1;const b=r;let x=0;i.length>b&&(x=i.sort((S,w)=>w.weight-S.weight)[b].weight);for(let S=0;S<o.length;S++){const w=o[S],{words:A,center:k,maxR:C,ratio:M}=w;let R=!1;for(let P=0;P<A.length;P++){sf(l,f,i,P);const O=A[P];if(O.x=k[0],O.y=k[1],!O.skip&&O.hasText&&O.sprite&&pm(g,O,C,M,a,u,n))O.hasPlaced=!0;else{if(!O.skip&&O.weight>x&&y>s){const T=O.datum[Symbol.for("vGrammar_id")];T!==_&&(_=T,v=y),y*=m,i.forEach(D=>{D.hasText=!1,D.sprite=null,D.fontSize=D.fontSize*m}),g=p.slice(0),R=!0;break}if(!O.skip&&O.datum[Symbol.for("vGrammar_id")]===_){i.forEach(T=>{T.hasText=!1,T.sprite=null,T.fontSize=T.fontSize/y}),O.skip=!0,y=v,_=null,g=p.slice(0),R=!0;break}}}R&&(S=-1)}for(let S=0;S<t.textLayoutTimes;S++){const w=i.filter(A=>(A.hasPlaced||(A.hasText=!1,A.sprite=null,A.fontSize=Math.max(~~(A.fontSize*t.fontSizeShrinkFactor),t.minFontSize)),!A.hasPlaced));if(w.length===0)break;for(let A=0;A<w.length;A++){const k=w[A];sf(l,f,w,A),k.x=c[0],k.y=c[1],k.hasText&&pm(g,k,h,d,a,u,n)&&(k.hasPlaced=!0)}}t.board=g}function h7t(i,t,e){const{size:n,stepFactor:r,importantWordCount:s}=t,{segmentation:{regions:a},tempCanvas:o,boardSize:l,shapeCenter:u,shapeMaxR:c,shapeRatio:h}=e,d=o.getContext("2d",{willReadFrequently:!0}),f=Qz(e);let p=f.slice(0);const g=t.fontSizeEnlargeFactor,m=Math.min(s,i.length);let _=0;i.length>m&&(_=i.sort((x,S)=>S.weight-x.weight)[m-1].weight);let v=0,y=1,b=!1;for(let x=0;x<a.length;x++){const S=a[x],{words:w,center:A,maxR:k,ratio:C}=S;let M=!1;for(let R=0;R<w.length;R++){sf(o,d,i,R);const P=w[R];if(P.x=A[0],P.y=A[1],P.hasText&&P.sprite&&pm(p,P,k,C,n,l,r)){if(P.hasPlaced=!0,P.weight>=_&&v++,v>=m&&!b){y*=g,i.forEach(O=>{O.hasText=!1,O.sprite=null,O.fontSize=O.fontSize*g}),p=f.slice(0),M=!0,v=0;break}}else{if(P.weight>=_&&y>1){i.forEach(O=>{O.hasText=!1,O.sprite=null,O.fontSize=O.fontSize/g}),y/=g,b=!0,p=f.slice(0),M=!0;break}if(P.weight>=_)return Xst(i,t,e)}}M&&(x=-1)}for(let x=0;x<t.textLayoutTimes;x++){const S=i.filter(w=>(w.hasPlaced||(w.hasText=!1,w.sprite=null,w.fontSize=Math.max(~~(w.fontSize*t.fontSizeShrinkFactor),t.minFontSize)),!w.hasPlaced));if(S.length===0)break;for(let w=0;w<S.length;w++){const A=S[w];sf(o,d,S,w),A.x=u[0],A.y=u[1],A.hasText&&pm(p,A,c,h,n,l,r)&&(A.hasPlaced=!0)}}t.board=p}function pm(i,t,e,n,r,s,a){const o=t.x,l=t.y,u=d7t(n),c=1*a;let h,d,f,p=-c;for(;h=u(p+=c);){const{wordSize:g,bounds:{dTop:m,dBottom:_,dLeft:v,dRight:y}}=t;if(d=h[0],f=h[1],Math.min(Math.abs(d),Math.abs(f))>=e)break;if(t.x=~~(o+d),t.y=~~(l+f),!(t.x-v<0||t.x+y>r[0]||t.y-m<0||t.y+_>r[1]||qst(t,i,s)))return Kst(t,i,s),!0}return!1}function Kst(i,t,e){const{wordSize:n}=i,r=i.sprite,s=n[0]>>5,a=e[0]>>5,o=i.x-(s<<4),l=o%32,u=32-l,c=n[1];let h,d=(i.y-(n[1]>>1))*a+(o>>5);if(l===0)for(let f=0;f<c;f++){for(let p=0;p<s;p++)t[d+p]|=r[f*s+p];d+=a}else for(let f=0;f<c;f++){h=0;for(let p=0;p<=s;p++)t[d+p]|=h<<u|(p<s?(h=r[f*s+p])>>>l:0);d+=a}}function qst(i,t,e){const{sprite:n,wordSize:r}=i,s=e[0]>>5,a=r[0]>>5,o=i.x-(a<<4),l=o%32,u=32-l,c=r[1];let h,d=(i.y-(r[1]>>1))*s+(o>>5);if(l===0)for(let f=0;f<c;f++){for(let p=0;p<a;p++)if(t[d+p]&n[f*a+p])return!0;d+=s}else for(let f=0;f<c;f++){h=0;for(let p=0;p<=a;p++)if((h<<u|(p<a?(h=n[f*a+p])>>>l:0))&t[d+p])return!0;d+=s}return!1}function d7t(i){return function(t){return[i*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function sf(i,t,e,n){if(e[n].sprite||e[n].fontSize===0)return;const r=2048,s=Math.PI/180,a=e.length;i.width=r,i.height=2048,t.clearRect(0,0,r,2048),t.textAlign="center";let o,l,u=0,c=0,h=0,d=0;const f=n;for(--n;++n<a;){const _=e[n],v=Math.max(_.fontSize,2);if(t.save(),t.font=_.fontStyle+" "+_.fontWeight+" "+v+"px "+_.fontFamily,o=t.measureText(_.text+"m").width+2*_.padding,l=2*v+2*_.padding,_.rotate!==0){const y=Math.sin(_.rotate*s),b=Math.cos(_.rotate*s),x=o*b,S=o*y,w=l*b,A=l*y;o=Math.max(Math.abs(x+A),Math.abs(x-A)),l=~~Math.max(Math.abs(S+w),Math.abs(S-w))}if(o=o+31>>5<<5,l=Math.ceil(l),l>h&&(h=l),u+o>=r&&(u=0,c+=h,h=l),c+l>=2048){if(c===0){_.hasText=!1;continue}break}c+l>=d&&(d=c+l),t.translate(u+(o>>1),c+(l>>1)),_.rotate!==0&&t.rotate(_.rotate*s),t.fillText(_.text,0,0),_.padding&&(t.lineWidth=2*_.padding,t.strokeText(_.text,0,0)),t.restore(),_.LT=[u,c],_.wordSize=[o,l],_.hasText=!0,u+=o}if(d===0)return;const p=t.getImageData(0,0,r,d).data;let g,m;for(;--n>=f;){const _=e[n];if(!_.hasText){_.bounds={dTop:1/0,dBottom:-1/0,dLeft:1/0,dRight:-1/0};break}const{LT:v=[0,0],wordSize:y}=_;[u,c]=v;const b=y[0]>>5,x=new Array(b*y[1]).fill(0);let[S,w,A,k]=[1/0,-1/0,1/0,-1/0];for(m=0;m<y[1];m++){let C;for(g=0;g<y[0];g++)if(p[4*((c+m)*r+(u+g))+3]>0){const M=1<<31-g%32;x[b*m+(g>>5)]|=M,g<A&&(A=g),g>k&&(k=g),C|=M}C&&(m<S&&(S=m),m>w&&(w=m))}_.bounds={dTop:(y[1]>>1)-S,dBottom:w-(y[1]>>1),dLeft:(y[0]>>1)-A,dRight:k-(y[0]>>1)},_.sprite=x,delete _.LT}}function Qz(i){const{segmentation:{labels:t},boardSize:e,size:n}=i,r=e[0]>>5,s=new Array(r*n[1]).fill(0);for(let a=0;a<n[1];a++)for(let o=0;o<n[0];o++)if(t[a*n[0]+o]===0){const l=1<<31-o%32;s[r*a+(o>>5)]|=l}if(e[0]>n[0]){const a=(1<<e[0]-n[0])-1;for(let o=0;o<n[1];o++)s[r*o+r-1]|=a}return s}function f7t(i,t,e){const{size:n,fillingTimes:r,fillingXStep:s,fillingYStep:a,getFillingFontStyle:o,getFillingFontWeight:l,getFillingFontFamily:u,fillingInitialFontSize:c,fillingDeltaFontSize:h,fillingInitialOpacity:d,fillingDeltaOpacity:f,fillingRotateList:p,getFillingPadding:g,random:m,board:_,minFillFontSize:v}=t,{boardSize:y,shapeBounds:b,tempCanvas:x,randomGenerator:S}=e,w=x.getContext("2d",{willReadFrequently:!0});let A=c,k=d;const C=[];for(let P=0;P<r;P++)M(A,k),A=Math.max(A>h?A-h:h,v),k=k>f?k-f:f;return C;function M(P,O){const T=i.map(K=>{const{text:q,color:Z,fillingColor:at,hasPlaced:$,datum:ft}=K;return{x:0,y:0,weight:0,text:q,fontFamily:u(ft),fontStyle:o(ft),fontWeight:l(ft),fontSize:P,rotate:p[~~(S()*p.length)],padding:g(ft),opacity:O,visible:!0,color:Z,fillingColor:at,hasPlaced:$,datum:ft}});R(T);let D=0;const{x1:B,y1:I,x2:F,y2:j}=b,[H,U]=[B+~~(S()*s*2),I+~~(S()*a*2)];for(let K=U;K<=j;K+=a)for(let q=H;q<=F;q+=s){sf(x,w,T,D);const Z=T[D];Z.x=q,Z.y=K;const{wordSize:at,bounds:$,hasPlaced:ft}=Z;if(!ft||!$){++D===T.length&&(D=0,m&&R(T));continue}const{dTop:pt,dBottom:rt,dLeft:gt,dRight:mt}=$;Z.x-gt<0||Z.x+mt>n[0]||Z.y-pt<0||Z.y+rt>n[1]||Z.hasText&&Z.sprite&&!qst(Z,_,y)&&(Kst(Z,_,y),C.push(Object.assign({},Z)),++D===T.length&&(D=0,m&&R(T)))}}function R(P){return P.sort(()=>S()-.5)}}function p7t(i,t,e){u7t(i,e),t.layoutMode==="ensureMapping"?Xst(i,t,e):t.layoutMode==="ensureMappingEnlarge"?h7t(i,t,e):c7t(i,t,e);const n=f7t(i,t,e),r=[],s=[];for(let a=0;a<i.length;a++)i[a].hasPlaced?s.push(i[a]):r.push(i[a]);return r.forEach(a=>a.visible=!1),{fillingWords:n,successedWords:s,failedWords:r}}function g7t(i,t){return i&&(rJ(i)||sJ(i)||i.startsWith("<svg"))?new Promise((e,n)=>{var r;const s=t({image:i}),a=(r=s.resources)===null||r===void 0?void 0:r.get(i);a&&a.state==="success"&&a.data?e(a.data):(s.successCallback=()=>{var o;if(s){const l=(o=s.resources)===null||o===void 0?void 0:o.get(i);l&&l.state==="success"&&l.data?e(l.data):n(new Error("image load failed: "+i))}else n(new Error("image load failed: "+i))},s.failCallback=()=>{n(new Error("image load failed: "+i))})}):null}const wY={x:"x",y:"y",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",angle:"angle",opacity:"opacity",visible:"visible",isFillingWord:"isFillingWord",color:"color"};class m7t{constructor(t){this.progressiveResult=[],this.options=t}layout(t){this.data=t;const e=this.options,n={shapeUrl:e.shape,size:e.size,ratio:e.ratio||.8,tempCanvas:void 0,boardSize:[0,0],random:!1,randomGenerator:void 0},r=this.options.createCanvas({width:e.size[0],height:e.size[1]}),s=r.getContext("2d",{willReadFrequently:!0});s.textAlign="center",s.textBaseline="middle",n.tempCanvas=r;const a=e.size[0]+31>>5<<5;if(n.boardSize=[a,e.size[1]],n.random?n.randomGenerator=Math.random:n.randomGenerator=HPt(),this.segmentationInput=n,Ht(n.shapeUrl)){n.isEmptyPixel=kL(void 0,void 0,this.options.createCanvas);const o=g7t(n.shapeUrl,this.options.createImage);o?(this.isImageFinished=!1,this.isLayoutFinished=!1,o.then(l=>{this.isImageFinished=!0;const u=this.options.createCanvas({width:e.size[0],height:e.size[1],dpr:1});n.maskCanvas=u;const c=u.getContext("2d");e.removeWhiteBorder&&J6t(l,u,n.isEmptyPixel);const h=t7t(l,e.size);c.clearRect(0,0,e.size[0],e.size[1]),c.drawImage(l,h.x,h.y,h.width,h.height),this.options.onUpdateMaskCanvas&&this.options.onUpdateMaskCanvas(n.maskCanvas)}).catch(l=>{this.isImageFinished=!0})):(this.isImageFinished=!0,this.isLayoutFinished=!0)}else if(n.shapeUrl&&(n.shapeUrl.type==="text"||n.shapeUrl.type==="geometric")){n.isEmptyPixel=kL(n.shapeUrl.backgroundColor,void 0,this.options.createCanvas);const o=Wst(n.shapeUrl,e.size[0],e.size[1],void 0,!1,this.options.createCanvas);n.maskCanvas=o,this.options.onUpdateMaskCanvas&&this.options.onUpdateMaskCanvas(o),this.doLayout(),this.isImageFinished=!0,this.isLayoutFinished=!0}}canAnimate(){return!0}unfinished(){return!this.isLayoutFinished}output(){return this.progressiveResult}progressiveRun(){this.isImageFinished&&!this.isLayoutFinished&&(this.segmentationInput.maskCanvas&&this.doLayout(),this.isLayoutFinished=!0)}progressiveOutput(){return this.progressiveResult}doLayout(){var t,e,n,r,s,a,o,l,u,c,h,d,f,p,g,m,_,v,y,b,x;const S=this.segmentationInput,w=K6t(S);if(!w.segmentation.regions.length)return;const A=this.options,k=this.data,C=A.colorMode||"ordinal",M={getText:cs(A.text),getFontSize:cs(A.fontSize),fontSizeRange:A.fontSizeRange,colorMode:C,getColor:A.colorField?cs(A.colorField):cs(A.text),getFillingColor:cs(A.fillingColorField),colorList:A.colorList||(C==="ordinal"?["#2E62F1"]:["#537EF5","#2E62F1","#2358D8","#184FBF","#0C45A6","#013B8E"]),getColorHex:cs(A.colorHexField),getFontFamily:cs(A.fontFamily||"sans-serif"),rotateList:A.rotateList||[0],getPadding:cs(A.padding||1),getFontStyle:cs(A.fontStyle||"normal"),getFontWeight:cs(A.fontWeight||"normal"),getFontOpacity:A.fontOpacity?cs(A.fontOpacity):()=>1};v7t(k,M,w);const R={size:A.size,ratio:A.ratio||.8,shapeUrl:A.shape,random:A.random===void 0||A.random,textLayoutTimes:(t=A.textLayoutTimes)!==null&&t!==void 0?t:3,removeWhiteBorder:A.removeWhiteBorder,layoutMode:(e=A.layoutMode)!==null&&e!==void 0?e:"default",fontSizeShrinkFactor:(n=A.fontSizeShrinkFactor)!==null&&n!==void 0?n:.8,stepFactor:(r=A.stepFactor)!==null&&r!==void 0?r:1,importantWordCount:(s=A.importantWordCount)!==null&&s!==void 0?s:10,globalShinkLimit:A.globalShinkLimit||.2,fontSizeEnlargeFactor:(a=A.fontSizeEnlargeFactor)!==null&&a!==void 0?a:1.5,fillingRatio:(o=A.fillingRatio)!==null&&o!==void 0?o:.7,fillingTimes:(l=A.fillingTimes)!==null&&l!==void 0?l:4,fillingXStep:A.fillingXRatioStep?Math.max(Math.floor(A.size[0]*A.fillingXRatioStep),1):(u=A.fillingXStep)!==null&&u!==void 0?u:4,fillingYStep:A.fillingYRatioStep?Math.max(Math.floor(A.size[1]*A.fillingYRatioStep),1):(c=A.fillingYStep)!==null&&c!==void 0?c:4,fillingInitialFontSize:A.fillingInitialFontSize,fillingDeltaFontSize:A.fillingDeltaFontSize,fillingInitialOpacity:(h=A.fillingInitialOpacity)!==null&&h!==void 0?h:.8,fillingDeltaOpacity:(d=A.fillingDeltaOpacity)!==null&&d!==void 0?d:.05,getFillingFontFamily:cs(A.fillingFontFamily||"sans-serif"),getFillingFontStyle:cs(A.fillingFontStyle||"normal"),getFillingFontWeight:cs(A.fillingFontWeight||"normal"),getFillingPadding:cs((f=A.fillingPadding)!==null&&f!==void 0?f:.4),fillingRotateList:(p=A.fillingRotateList)!==null&&p!==void 0?p:[0,90],fillingDeltaFontSizeFactor:(g=A.fillingDeltaFontSizeFactor)!==null&&g!==void 0?g:.2,fillingColorList:A.fillingColorList||["#537EF5"],sameColorList:!1,minInitFontSize:(m=A.minInitFontSize)!==null&&m!==void 0?m:10,minFontSize:(_=A.minFontSize)!==null&&_!==void 0?_:4,minFillFontSize:(v=A.minFillFontSize)!==null&&v!==void 0?v:2},P=a7t(M.colorList,R.fillingColorList);R.sameColorList=P,_7t(k,M,R,A),y7t(k,M,R,w);const{getText:O,getFontFamily:T,getFontStyle:D,getFontWeight:B,getPadding:I,getColor:F,getFillingColor:j,getColorHex:H,fontSizeScale:U,colorScale:K,fillingColorScale:q,getFontOpacity:Z,rotateList:at}=M,$=k.map(It=>{var W,Q;return{x:0,y:0,weight:0,text:O(It),fontFamily:T(It),fontWeight:B(It),fontStyle:D(It),rotate:at[~~(S.randomGenerator()*at.length)],fontSize:Math.max(R.minInitFontSize,~~U(It)),opacity:Z(It),padding:I(It),color:H&&H(It)||K&&K(F(It))||"black",fillingColor:!j||((W=A.colorField)===null||W===void 0?void 0:W.field)===((Q=A.fillingColorField)===null||Q===void 0?void 0:Q.field)&&P?void 0:H&&H(It)||q&&q(j(It))||"black",datum:It,visible:!0,hasPlaced:!1}}),ft=rn($.map(It=>It.fontSize));$.forEach(It=>It.weight=It.fontSize/ft),$.sort((It,W)=>W.weight-It.weight);const{fillingWords:pt,successedWords:rt,failedWords:gt}=p7t($,R,w),mt=(b=(y=A.text)===null||y===void 0?void 0:y.field)!==null&&b!==void 0?b:"textKey",Dt=(x=A.dataIndexKey)!==null&&x!==void 0?x:"defaultDataIndexKey",St=A.as?Object.assign(Object.assign({},wY),A.as):wY;let Ot,Pt;const _e=[];for(let It=0;It<$.length;++It)Ot=$[It],Pt=Ot.datum,Pt[St.x]=Ot.x,Pt[St.y]=Ot.y,Pt[St.fontFamily]=Ot.fontFamily,Pt[St.fontSize]=Ot.fontSize,Pt[St.fontStyle]=Ot.fontStyle,Pt[St.fontWeight]=Ot.fontWeight,Pt[St.angle]=ii(Ot.rotate),Pt[St.opacity]=Ot.opacity,Pt[St.visible]=Ot.visible,Pt[St.isFillingWord]=!1,Pt[St.color]=Ot.color,Pt[Dt]=`${Ot.text}_${It}_keyword`,_e.push(Pt);const Ze=[];pt.forEach((It,W)=>{var Q,nt;const wt=Object.assign({},It.datum);wt[St.x]=It.x,wt[St.y]=It.y,wt[St.fontFamily]=It.fontFamily,wt[St.fontSize]=It.fontSize,wt[St.fontStyle]=It.fontStyle,wt[St.fontWeight]=It.fontWeight,wt[St.angle]=ii(It.rotate),wt[St.opacity]=It.opacity,wt[St.visible]=It.visible,wt[St.isFillingWord]=!0,wt[St.color]=j?((Q=A.colorField)===null||Q===void 0?void 0:Q.field)===((nt=A.fillingColorField)===null||nt===void 0?void 0:nt.field)&&P?It.color:It.fillingColor:R.fillingColorList[~~(S.randomGenerator()*R.fillingColorList.length)],wt[mt]=It.text,wt[Dt]=`${It.text}_${W}_fillingWords`,Ze.push(wt)}),this.options.onLayoutFinished&&this.options.onLayoutFinished({successedWords:rt,failedWords:gt}),this.progressiveResult=_e.concat(Ze)}release(){this.segmentationInput=null,this.data=null,this.progressiveResult=null,this.options=null}}const _7t=(i,t,e,n)=>{var r,s,a,o;const{colorMode:l,getColor:u,getFillingColor:c}=t,{sameColorList:h}=e;let d,f,p=t.colorList,g=e.fillingColorList;if(l==="ordinal"){const m=i.map(_=>u(_));if(d=_=>new tf().domain(m).range(p).scale(_),c&&(((r=n.colorField)===null||r===void 0?void 0:r.field)!==((s=n.fillingColorField)===null||s===void 0?void 0:s.field)||!h)){const _=i.map(v=>c(v));f=v=>new tf().domain(_).range(g).scale(v)}}else{p.length===1&&(p=[p[0],p[0]]);const m=new vs().domain(Rv(u,i)).range(p);if(d=_=>m.scale(_),c&&(((a=n.colorField)===null||a===void 0?void 0:a.field)!==((o=n.fillingColorField)===null||o===void 0?void 0:o.field)||!h)){g.length===1&&(g=[g[0],g[0]]);const _=new vs().domain(Rv(c,i)).range(g);f=v=>_.scale(v)}}Object.assign(t,{colorScale:d,fillingColorScale:f})},v7t=(i,t,e)=>{let{fontSizeRange:n}=t;const{getFontSize:r,getText:s}=t;let a;if(r){if(r&&n){const o=new ak().domain(Rv(r,i)).range(n);a=l=>o.scale(r(l))}else if(r&&it(r)&&!n){const[l,u]=Rv(r,i),c=i.map(f=>({text:s(f),value:r(f),weight:u===l?1:(r(f)-l)/(u-l)})),h=AY(c,e,!0);n=[~~(.5*h),~~h];const d=new ak().domain(Rv(r,i)).range(n);a=f=>d.scale(r(f))}}else{const o=i.map(u=>({text:s(u)})),l=AY(o,e,!1);a=l7t(l)}Object.assign(t,{getFontSize:r,fontSizeRange:n,fontSizeScale:a})},AY=(i,t,e)=>{const n=t.shapeArea,r=t.ratio,s=t.segmentation.regions,a=Math.ceil(Math.sqrt(n)/12),o=i.reduce((u,c)=>{const h=Yst(c.text);return h<a?u+h*(e?(.5+.5*c.weight)**2:1):u},0);if(o===0)return 12;let l=20;if(s.length===1)l=Math.sqrt(r*(n/(1.7*o)));else{const u=[];for(let c=0;c<s.length;c++){const h=s[c].area,d=s[c].ratio,f=h/n;if(f<.1)continue;const p=f*(o*(d<1?2.7-d:1.7)),g=Math.sqrt(r*(h/p));u.push(g)}l=u.length?Math.min(...u):Math.sqrt(r*(n/(1.7*o)))}return l};function y7t(i,t,e,n){const{getText:r}=t;let{fillingInitialFontSize:s,fillingDeltaFontSize:a}=e;const{fillingRatio:o}=e,l=Math.ceil(Math.sqrt(n.shapeArea)/4);if(!s||!a){const u=o/100,c=i.reduce((d,f)=>{const p=Yst(r(f));return p>l?d:d+p},0)/i.length;let h;if(c===0)h=8;else{const d=.2*n.shapeArea;h=Math.sqrt(u*(d/c))}s=~~h,a=h*e.fillingDeltaFontSizeFactor,Object.assign(e,{fillingInitialFontSize:s,fillingDeltaFontSize:a})}}const Rv=(i,t)=>{let e=1/0,n=-1/0;const r=t.length;let s;for(let a=0;a<r;++a)s=Lc(i(t[a])),s<e&&(e=s),s>n&&(n=s);return t.length===1&&e===n&&(e-=1e4),[e,n]},b7t=(i,t,e)=>{if(!i.size||N(i.size[0])||N(i.size[1])||i.size[0]<=0||i.size[1]<=0)return Ee.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];if(i.size=[Math.ceil(i.size[0]),Math.ceil(i.size[1])],i.shape||Ee.getInstance().error("WordcloudShape shape must be specified."),i.text||Ee.getInstance().error("WordcloudShape text must be specified."),i.onBeforeLayout&&i.onBeforeLayout(),!t||t.length===0)return[];const n=new m7t(i);return n.layout(t),n.unfinished()?{progressive:n}:n.output()};class G0 extends dh{constructor(){super(...arguments),this.type=st.wordCloud}}G0.type=st.wordCloud;const Jz=()=>{z.registerGrammarTransform("wordcloud",{transform:Gst}),Ps(),Lst(),z.registerSeries(G0.type,G0)},x7t=()=>{z.registerGrammarTransform("wordcloudShape",{transform:b7t}),z.registerGrammarTransform("wordcloud",{transform:Gst}),Ps(),Lst(),z.registerSeries(G0.type,G0)},S7t=(i,t)=>{var e,n;const r=i.map(x=>Object.assign({},x));if(!r||r.length===0)return r;const{valueField:s,asTransformRatio:a,asReachRatio:o,asHeightRatio:l,asValueRatio:u,asNextValueRatio:c,asLastValueRatio:h,asLastValue:d,asCurrentValue:f,asNextValue:p,heightVisual:g=!1,isCone:m=!0,range:_}=t,v=r.reduce((x,S)=>Math.max(x,Number.parseFloat(S[s])||-1/0),-1/0),y=r.reduce((x,S)=>Math.min(x,Number.parseFloat(S[s])||1/0),1/0),b=[(e=_?.min)!==null&&e!==void 0?e:y,(n=_?.max)!==null&&n!==void 0?n:v];return r.forEach((x,S)=>{var w,A;const k=Number.parseFloat(x[s]),C=Number.parseFloat((w=r[S-1])===null||w===void 0?void 0:w[s]),M=Number.parseFloat((A=r[S+1])===null||A===void 0?void 0:A[s]),R=et(M*k)&&k!==0?M/k:0,P=et(k*C)&&C!==0?k/C:0;d&&(x[d]=C),p&&(x[p]=M),a&&(x[a]=R),o&&(x[o]=S===0?1:P),l&&(x[l]=g===!0?R:1/r.length),u&&(x[u]=k/b[1]),c&&(x[c]=S===r.length-1?m?0:x[u]:M/b[1]),h&&(x[h]=S===0?1:C/b[1]),f&&(x[f]=k)}),r},w7t=(i,t)=>{var e,n;const r=(n=(e=i[0])===null||e===void 0?void 0:e.latestData)===null||n===void 0?void 0:n.map(s=>Object.assign({},s));return r&&r.length!==0&&(r.shift(),r.forEach(s=>{s[t.asIsTransformLevel]=!0})),r},A7t=`${zt}_FUNNEL_TRANSFORM_RATIO`,CL=`${zt}_FUNNEL_REACH_RATIO`,k7t=`${zt}_FUNNEL_HEIGHT_RATIO`,NS=`${zt}_FUNNEL_VALUE_RATIO`,kY=`${zt}_FUNNEL_LAST_VALUE_RATIO`,CY=`${zt}_FUNNEL_NEXT_VALUE_RATIO`,C7t=`${zt}_FUNNEL_LAST_VALUE`,M7t=`${zt}_FUNNEL_CURRENT_VALUE`,T7t=`${zt}_FUNNEL_NEXT_VALUE`,MY=`${zt}_FUNNEL_TRANSFORM_LEVEL`,P7t=20,Vh=5,E7t="80%",R7t=0;class O7t extends pr{constructor(t){var e,n;super(t),this.dimensionTooltipTitleCallback=(r,s)=>{var a,o,l;const u=this.series;return((a=s?.mark)===null||a===void 0?void 0:a.name)==="transform"?this._transformRatioText:(o=this._getDimensionData(r))!==null&&o!==void 0?o:(l=r.properties)===null||l===void 0?void 0:l[`${u.getCategoryField()}`]},this.markTooltipValueCallback=(r,s)=>{var a;return((a=s?.mark)===null||a===void 0?void 0:a.name)==="transform"?`${(100*r?.[CL]).toFixed(1)}%`:this._getMeasureData(r)},this.markTooltipKeyCallback=(r,s)=>{var a;if(((a=s?.mark)===null||a===void 0?void 0:a.name)==="transform")return this._transformRatioText;const{dimensionFields:o,seriesFields:l}=this._seriesCacheInfo,u=o[o.length-1];return L(l[0])?r?.[l[0]]:r?.[u]},this._transformRatioText=(n=(e=t.getSpec())===null||e===void 0?void 0:e.transformRatioText)!==null&&n!==void 0?n:""}}class Zst extends ns{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{points:[]})}}class Y0 extends Zst{constructor(){super(...arguments),this.type=Y0.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}}Y0.type="polygon";const Qst=()=>{z.registerMark(Y0.type,Y0),as(),IM(),hrt(),z.registerGraphicComponent("polygon",Cet)},D7t=Object.assign(Object.assign({},Bi),{funnel:{name:"funnel",type:"polygon"},transform:{name:"transform",type:"polygon"},transformLabel:{name:"transformLabel",type:"text"},outerLabel:{name:"outerLabel",type:"text"},outerLabelLine:{name:"outerLabelLine",type:"rule"}});class tN extends gr{_transformLabelSpec(t){this._addMarkLabelSpec(t,"funnel"),t.isTransform&&this._addMarkLabelSpec(t,"transform","transformLabel")}}class Ja extends tc{constructor(){super(...arguments),this.type=st.funnel,this._funnelMarkName="funnel",this._funnelMarkType="polygon",this._transformMarkName="transform",this._transformMarkType="polygon",this.transformerConstructor=tN,this._funnelMark=null,this._funnelTransformMark=null,this._labelMark=null,this._transformLabelMark=null,this._funnelOuterLabelMark={}}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}setAttrFromSpec(){var t,e,n,r,s;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this._funnelOrient=(t=this._spec.funnelOrient)!==null&&t!==void 0?t:"top",this._shape=(e=this._spec.shape)!==null&&e!==void 0?e:"trapezoid",this._minLabelLineWidth=(s=(r=(n=this._spec.outerLabel)===null||n===void 0?void 0:n.line)===null||r===void 0?void 0:r.minLength)!==null&&s!==void 0?s:P7t,this._isHorizontal()?this._funnelAlign=["top","bottom"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center":this._funnelAlign=["left","right"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center",!this._seriesField&&this._spec.categoryField&&this.setSeriesField(this._spec.categoryField)}initData(){if(super.initData(),!this._data)return;Vt(this._dataSet,"funnel",S7t),Vt(this._dataSet,"funnelTransform",w7t);const t=new je(this._dataSet,{name:`${zt}_series_${this.id}_viewDataTransform`});t.parse([this.getViewData()],{type:"dataview"}),this._viewDataTransform=new Cr(this._option,t)}compile(){var t,e;super.compile(),this._funnelOuterLabelMark&&((t=this._funnelOuterLabelMark.label)===null||t===void 0||t.compile({group:this._rootMark.getProduct()}),(e=this._funnelOuterLabelMark.line)===null||e===void 0||e.compile({group:this._rootMark.getProduct()}))}compileData(){var t;super.compileData(),(t=this._viewDataTransform)===null||t===void 0||t.compile()}getStatisticFields(){const t=[];return t.push({key:this._categoryField,operations:["values"]}),t.push({key:this._valueField,operations:["max","min"]}),t}_statisticViewData(){var t,e,n,r,s,a,o,l,u;super._statisticViewData(),this._data.getDataView().transform({type:"funnel",options:{valueField:this.getValueField(),isCone:this._spec.isCone,asCurrentValue:M7t,asTransformRatio:A7t,asReachRatio:CL,asHeightRatio:k7t,asValueRatio:NS,asNextValueRatio:CY,asLastValueRatio:kY,asLastValue:C7t,asNextValue:T7t,range:{min:(e=(t=this._spec.range)===null||t===void 0?void 0:t.min)!==null&&e!==void 0?e:(r=(n=this.getViewDataStatistics().latestData)===null||n===void 0?void 0:n[this.getValueField()])===null||r===void 0?void 0:r.min,max:(a=(s=this._spec.range)===null||s===void 0?void 0:s.max)!==null&&a!==void 0?a:(l=(o=this.getViewDataStatistics().latestData)===null||o===void 0?void 0:o[this.getValueField()])===null||l===void 0?void 0:l.max}}}),(u=this._viewDataTransform.getDataView())===null||u===void 0||u.transform({type:"funnelTransform",options:{asIsTransformLevel:MY}})}initMark(){var t,e,n,r,s,a,o,l;if(this._funnelMark=this._createMark(Object.assign(Object.assign({},Ja.mark.funnel),{name:this._funnelMarkName,type:this._funnelMarkType}),{themeSpec:(t=this._theme)===null||t===void 0?void 0:t.funnel,groupKey:this._seriesField,isSeriesMark:!0,noSeparateStyle:!0},{morph:fo(this._spec,this._funnelMarkName),morphElementKey:this._seriesField}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(Object.assign(Object.assign({},Ja.mark.transform),{name:this._transformMarkName,type:this._transformMarkType}),{themeSpec:(e=this._theme)===null||e===void 0?void 0:e.transform,noSeparateStyle:!0}),this._funnelTransformMark&&this._funnelTransformMark.setData(this._viewDataTransform)),(r=(n=this._spec)===null||n===void 0?void 0:n.outerLabel)===null||r===void 0?void 0:r.visible){const{line:u}=(s=this._spec.outerLabel)!==null&&s!==void 0?s:{},{line:c}=(o=(a=this._theme)===null||a===void 0?void 0:a.outerLabel)!==null&&o!==void 0?o:{};this._funnelOuterLabelMark.label=this._createMark(Ja.mark.outerLabel,{themeSpec:(l=this._theme)===null||l===void 0?void 0:l.outerLabel,markSpec:this._spec.outerLabel,noSeparateStyle:!0,parent:!1}),this._funnelOuterLabelMark.line=this._createMark(Ja.mark.outerLabelLine,{themeSpec:c,markSpec:u,noSeparateStyle:!0,parent:!1})}}initTooltip(){this._tooltipHelper=new O7t(this),this._funnelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelMark),this._funnelTransformMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelTransformMark)}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return[this._valueField]}getGroupFields(){return null}initMarkStyle(){var t,e,n,r;const s=this._funnelMark;s&&this.setMarkStyle(s,{points:u=>this.getPoints(u),visible:u=>L(u[this._valueField]),fill:this.getColorAttribute()},"normal",ct.Series);const a=this._funnelTransformMark;a&&this.setMarkStyle(a,{points:u=>this.getPoints(u)},"normal",ct.Series);const o=this._funnelOuterLabelMark.label;o&&(this.setMarkStyle(o,{text:u=>`${u[this.getCategoryField()]}`,x:u=>this._computeOuterLabelPosition(u).x,y:u=>this._computeOuterLabelPosition(u).y,textAlign:u=>this._computeOuterLabelPosition(u).align,textBaseline:u=>this._computeOuterLabelPosition(u).textBaseline,maxLineWidth:u=>this._computeOuterLabelLimit(u),width:0,height:0},"normal",ct.Series),it(this._spec.outerLabel.formatMethod)&&this.setMarkStyle(o,{text:u=>this._spec.outerLabel.formatMethod(`${u[this.getCategoryField()]}`,u)},"normal",ct.User_Mark));const l=this._funnelOuterLabelMark.line;if(l&&o){this.setMarkStyle(l,{x:c=>this._computeOuterLabelLinePosition(c).x1,y:c=>this._computeOuterLabelLinePosition(c).y1,x1:c=>this._computeOuterLabelLinePosition(c).x2,y1:c=>this._computeOuterLabelLinePosition(c).y2},"normal",ct.Series);const u=(n=(e=(t=this._spec.outerLabel)===null||t===void 0?void 0:t.line)===null||e===void 0?void 0:e.visible)!==null&&n!==void 0?n:(r=this._spec.outerLabel)===null||r===void 0?void 0:r.visible;L(u)&&l.setVisible(u)}}initLabelMarkStyle(t){var e;if(!t)return;const n=t.getTarget(),r=t.getComponent();if(n===this._funnelMark){this._labelMark=t,this.setMarkStyle(t,{text:a=>`${a[this.getCategoryField()]} ${a[this.getValueField()]}`,x:a=>this._computeLabelPosition(a).x,y:a=>this._computeLabelPosition(a).y,maxLineWidth:a=>this._computeLabelLimit(a,this._spec.label),stroke:this.getColorAttribute()},"normal",ct.Series);const s=this.getCompiler().getRootMarks();this._funnelOuterLabelMark.label&&Z5(s,this._funnelOuterLabelMark.label,r),this._funnelOuterLabelMark.line&&Z5(s,this._funnelOuterLabelMark.line,(e=this._funnelOuterLabelMark.label)!==null&&e!==void 0?e:r)}else this._funnelTransformMark&&n===this._funnelTransformMark&&(this._transformLabelMark=t,this.setMarkStyle(t,{text:s=>`${(100*_1(CL).bind(this)(s)).toFixed(1)}%`,x:s=>this._computeLabelPosition(s).x,y:s=>this._computeLabelPosition(s).y,maxLineWidth:s=>this._computeLabelLimit(s,this._spec.transformLabel)},"normal",ct.Series))}initAnimation(){var t,e,n,r,s,a,o;const l=(n=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset)!==null&&n!==void 0?n:"clipIn";l==="clipIn"&&this._rootMark&&this._rootMark.setAnimationConfig(ye((r=z.getAnimationInKey("cartesianGroupClip"))===null||r===void 0?void 0:r({direction:()=>this._isHorizontal()?"x":"y",width:()=>{const u=this.getRootMark().getProduct();if(u){const{x1:c,x2:h}=u.AABBBounds;return Math.max(c,h)}return this.getLayoutRect().width},height:()=>{const u=this.getRootMark().getProduct();if(u){const{y1:c,y2:h}=u.AABBBounds;return Math.max(c,h)}return this.getLayoutRect().height},orient:()=>this._isReverse()?"negative":"positive"},l),Ce("group",this._spec,this._markAttributeContext))),[(s=this._funnelOuterLabelMark)===null||s===void 0?void 0:s.label].forEach(u=>{u&&u.setAnimationConfig(ye(z.getAnimationInKey("fadeInOut")(),Ce(u.name,this._spec,this._markAttributeContext)))}),[this._funnelMark,this._funnelTransformMark].forEach(u=>{u&&u.setAnimationConfig(ye(z.getAnimationInKey("funnel")({},l),Ce(u.name,this._spec,this._markAttributeContext)))}),!((a=this._funnelOuterLabelMark)===null||a===void 0)&&a.line&&this._funnelOuterLabelMark.line.setAnimationConfig(ye((o=z.getAnimationInKey("fadeInOut"))===null||o===void 0?void 0:o(),Ce("outerLabelLine",this._spec,this._markAttributeContext)))}initGroups(){}getStackGroupFields(){return[]}getStackValueField(){return null}initEvent(){var t;super.initEvent(),(t=this._viewDataTransform.getDataView())===null||t===void 0||t.target.addListener("change",e=>{this._viewDataTransform.updateData()})}getPoints(t){const e=this.isTransformLevel(t),n=this._getMainAxisLength(e)/2;let r,s;e?(r=this._shape==="rect"?this._getSecondaryAxisLength(t[kY])/2:this._getSecondaryAxisLength(t[NS])/2,s=this._getSecondaryAxisLength(t[NS])/2):(r=this._getSecondaryAxisLength(t[NS])/2,s=this._shape==="rect"?r:this._getSecondaryAxisLength(t[CY])/2);const{x:a,y:o}=this._getPositionByData(t),l=this._getPolygonPoints([a,o],r,s,r,s,n);return this._funnelAlign!=="center"&&this._adjustPoints(l),l}isTransformLevel(t){return!!t?.[MY]}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getPoints=this.getPoints.bind(this),this._markAttributeContext.isTransformLevel=this.isTransformLevel.bind(this)}valueToPosition(t){var e,n,r;const s=(r=(n=(e=this.getViewData())===null||e===void 0?void 0:e.latestData)===null||n===void 0?void 0:n.find)===null||r===void 0?void 0:r.call(n,a=>a[this._categoryField]===t);return L(s)?this._getPolygonCenter(this.getPoints(s)):null}dataToPosition(t,e){return e&&!this.isDatumInViewData(t)?null:this.valueToPosition(t[this._categoryField])}dataToPositionX(t){var e;return(e=this.dataToPosition(t))===null||e===void 0?void 0:e.x}dataToPositionY(t){var e;return(e=this.dataToPosition(t))===null||e===void 0?void 0:e.y}dataToPositionZ(t){return 0}_getMainAxisLength(t=!1){var e;const n=this.getViewData().latestData.length,r=this._isHorizontal()?this.getLayoutRect().width:this.getLayoutRect().height,s=!!this._spec.isTransform,a=s?0:(e=this._spec.gap)!==null&&e!==void 0?e:0,o=s?Math.max(0,n-1):0,l=this._spec.heightRatio||.5,u=(r-a*Math.max(0,n-1))/(n+l*o);return t?s?u*l:0:u}_getSecondaryAxisLength(t){const e=Number.isNaN(t)||!Number.isFinite(t)?0:t,n=this._computeMaxSize(),r=this._computeMinSize();return r+(n-r)*e}_getPositionByData(t){var e;const n=(e=this.getViewData().latestData)===null||e===void 0?void 0:e.findIndex(d=>d[this._categoryField]===t[this._categoryField]&&d[ys]===t[ys]);if(!L(n)||n<0)return{};const r=this.isTransformLevel(t),s=this._isHorizontal(),a=s?this.getLayoutRect().height:this.getLayoutRect().width,o=s?this.getLayoutRect().width:this.getLayoutRect().height,l=a/2;let u=0;const c=this._getMainAxisLength(),h=this._getMainAxisLength(!0);return u+=n*(c+h),u+=r?-h/2:c/2,!this._spec.isTransform&&this._spec.gap&&(u+=this._spec.gap*n),this._isReverse()&&(u=o-u),this._isHorizontal()?{x:u,y:l}:{x:l,y:u}}_getPolygonPoints(t,e,n,r,s,a){const o=t[0],l=t[1];switch(this._funnelOrient){case"left":return[{x:o-a,y:l+e},{x:o-a,y:l-r},{x:o+a,y:l-s},{x:o+a,y:l+n}];case"right":return[{x:o+a,y:l-r},{x:o+a,y:l+r},{x:o-a,y:l+n},{x:o-a,y:l-n}];case"bottom":return[{x:o+e,y:l+a},{x:o-r,y:l+a},{x:o-s,y:l-a},{x:o+n,y:l-a}];default:return[{x:o-e,y:l-a},{x:o+r,y:l-a},{x:o+s,y:l+a},{x:o-n,y:l+a}]}}_getPolygonCenter(t){if(this._isHorizontal()){const r=(t[0].x+t[3].x)/2,s=(t[0].y+t[3].y)/2;return{x:(r+(t[1].x+t[2].x)/2)/2,y:(s+(t[1].y+t[2].y)/2)/2}}const e=(t[0].x+t[3].x)/2,n=(t[0].y+t[3].y)/2;return{x:(e+(t[1].x+t[2].x)/2)/2,y:(n+(t[1].y+t[2].y)/2)/2}}_adjustPoints(t){let e,n,r;return this._isHorizontal()?(r="y",this._funnelOrient==="left"?(e=this._funnelAlign==="bottom"?-t[1].y:t[1].y,n=this._funnelAlign==="bottom"?-t[2].y:t[2].y):(e=this._funnelAlign==="bottom"?-t[0].y:t[0].y,n=this._funnelAlign==="bottom"?-t[3].y:t[3].y)):(r="x",this._funnelOrient==="top"?(e=this._funnelAlign==="left"?t[0].x:-t[0].x,n=this._funnelAlign==="left"?t[3].x:-t[3].x):(e=this._funnelAlign==="left"?t[1].x:-t[1].x,n=this._funnelAlign==="left"?t[2].x:-t[2].x)),t[0][r]-=e,t[1][r]-=e,t[2][r]-=n,t[3][r]-=n,t}_computeLabelPosition(t){const e=this.getPoints(t);return this._getPolygonCenter(e)}_computeLabelLimit(t,e){const n=e?.limit;if(yt(n))return n;const r=this.getPoints(t);return n==="shapeSize"?this._isHorizontal()?Math.abs(r[3].x-r[0].x):(Math.abs(r[0].x-r[1].x)+Math.abs(r[2].x-r[3].x))/2:this._isHorizontal()?Math.abs(r[3].x-r[0].x):void 0}_computeOuterLabelPosition(t){var e,n;let r,s,a=(e=this._spec.outerLabel)===null||e===void 0?void 0:e.position,o="center",l="middle";if(a=this._isHorizontal()?["top","bottom"].includes(a)?a:this._funnelAlign==="bottom"?"top":"bottom":["left","right"].includes(a)?a:this._funnelAlign==="left"?"right":"left",((n=this._spec.outerLabel)===null||n===void 0?void 0:n.alignLabel)!==!1)({x:r,y:s}=this._getPositionByData(t)),a==="left"?(r=0,o="left"):a==="right"?(r=this.getLayoutRect().width,o="right"):a==="top"?(s=0,l="top"):a==="bottom"&&(s=this.getLayoutRect().height,l="bottom");else{const{x2:u,y2:c}=this._computeOuterLabelLinePosition(t);r=u,s=c,a==="left"?(r-=Vh,o="right"):a==="right"?(r+=Vh,o="left"):a==="top"?(s-=Vh,l="bottom"):a==="bottom"&&(s+=Vh,l="top")}return{x:r,y:s,align:o,textBaseline:l}}_computeOuterLabelLimit(t){var e,n,r,s,a,o;if(this._isHorizontal())return this._getMainAxisLength(this.isTransformLevel(t));const l=this.getPoints(t),u=(Math.abs(l[0].x-l[1].x)+Math.abs(l[2].x-l[3].x))/2,c=this.getCategoryField(),h=(s=(r=(n=(e=this._labelMark)===null||e===void 0?void 0:e.getComponent())===null||n===void 0?void 0:n.getComponent())===null||r===void 0?void 0:r.find(({attribute:g,type:m})=>{var _;return m==="text"&&((_=g.data)===null||_===void 0?void 0:_[c])===t[c]},!0))===null||s===void 0?void 0:s.AABBBounds,d=h?h.x2-h.x1:0,f=this._funnelOuterLabelMark.line?this._minLabelLineWidth:0;let p=this.getLayoutRect().width-Math.max(u,d);return this._funnelAlign==="center"&&(p/=2),p-f-((o=(a=this._spec.outerLabel)===null||a===void 0?void 0:a.spaceWidth)!==null&&o!==void 0?o:Vh)}_computeOuterLabelLinePosition(t){var e,n,r,s,a,o,l,u,c,h;const d=this.getCategoryField(),f=(s=(r=(n=(e=this._funnelOuterLabelMark)===null||e===void 0?void 0:e.label)===null||n===void 0?void 0:n.getGraphics())===null||r===void 0?void 0:r.find(k=>{var C;return((C=k.context.data[0])===null||C===void 0?void 0:C[d])===t[d]}))===null||s===void 0?void 0:s.AABBBounds,p=(o=(a=this._labelMark)===null||a===void 0?void 0:a.getComponent())===null||o===void 0?void 0:o.getComponent(),g=(l=p?.find(({attribute:k,type:C})=>{var M;return C==="text"&&((M=k.data)===null||M===void 0?void 0:M[d])===t[d]},!0))===null||l===void 0?void 0:l.AABBBounds,m=(u=this._spec.outerLabel)!==null&&u!==void 0?u:{};let _,v,y,b;if(this._isHorizontal()){const k=(c=m.spaceWidth)!==null&&c!==void 0?c:Vh,C=this.getPoints(t),M=(Math.abs(C[0].y-C[1].y)+Math.abs(C[2].y-C[3].y))/2;return this._spec.outerLabel.position==="top"||this._funnelAlign==="bottom"?(y=this._getPolygonCenter(C).y-M/2-k,b=m.alignLabel!==!1?f?.y2+k:y-k,_=this._getPolygonCenter(C).x,y-b<this._minLabelLineWidth&&(b=y-this._minLabelLineWidth),v=_):(y=this._getPolygonCenter(C).y+M/2+k,b=m.alignLabel!==!1?f?.y1-k:y+k,_=this._getPolygonCenter(C).x,b-y<this._minLabelLineWidth&&(b=y+this._minLabelLineWidth),v=_),{x1:_,x2:v,y1:y,y2:b}}const x=this.getPoints(t),S=(Math.abs(x[0].x-x[1].x)+Math.abs(x[2].x-x[3].x))/2,w=g?.x2-g?.x1||0,A=(h=m.spaceWidth)!==null&&h!==void 0?h:Vh;return this._spec.outerLabel.position==="right"||this._funnelAlign==="left"?(_=this._getPolygonCenter(x).x+Math.max(w/2,S/2)+A,v=m.alignLabel!==!1?f?.x1-A:_+A,y=this._getPolygonCenter(x).y,v-_<this._minLabelLineWidth&&(v=_+this._minLabelLineWidth),b=y):(_=this._getPolygonCenter(x).x-Math.max(w/2,S/2)-A,v=m.alignLabel!==!1?f?.x2+A:_-A,y=this._getPolygonCenter(x).y,_-v<this._minLabelLineWidth&&(v=_-this._minLabelLineWidth),b=y),{x1:_,x2:v,y1:y,y2:b}}_computeMaxSize(){var t;const e=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width,n=(t=this._spec.maxSize)!==null&&t!==void 0?t:E7t;return en(n,e)}_computeMinSize(){var t;const e=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width,n=(t=this._spec.minSize)!==null&&t!==void 0?t:R7t;return en(n,e)}_isHorizontal(){return this._funnelOrient==="left"||this._funnelOrient==="right"}_isReverse(){return this._funnelOrient==="bottom"||this._funnelOrient==="right"}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._funnelMark]}}Ja.type=st.funnel,Ja.mark=D7t,Ja.builtInTheme={funnel:L5t},Ja.transformerConstructor=tN;const Jst=()=>{Qst(),Ps(),Um(),z.registerSeries(Ja.type,Ja),z.registerAnimation("funnel",(i,t)=>Object.assign({appear:t==="clipIn"?void 0:{type:"fadeIn"}},lT)),zUt(),rl()},Ek=(i,t)=>{const e=(i-t[0])/(t[1]-t[0]||1);return Math.max(0,Math.min(1,e))},Rk=i=>{const t=i.filter(n=>n.context.diffState===Kn.update),e=Rn(t.map(n=>{var r,s;return(s=(r=n?.context)===null||r===void 0?void 0:r.data)===null||s===void 0?void 0:s[0].depth}));return t.filter(n=>{var r,s;return((s=(r=n?.context)===null||r===void 0?void 0:r.data)===null||s===void 0?void 0:s[0].depth)===e})},TY=(i,t,e)=>Lt(i)?[t,e]:[Rn(i.map(n=>1*n.getFinalAttribute().startAngle)),rn(i.map(n=>1*n.getFinalAttribute().endAngle))],I7t=i=>({channel:{startAngle:{from:(t,e)=>{const{startAngle:n,endAngle:r}=i.animationInfo(),s=Rk(e.parent.children),a=TY(s,n,r);return Ek(e.getFinalAttribute().startAngle,a)*(r-n)+n},to:(t,e)=>e.getFinalAttribute().startAngle},endAngle:{from:(t,e)=>{const{startAngle:n,endAngle:r}=i.animationInfo(),s=Rk(e.parent.children),a=TY(s,n,r);return Ek(e.getFinalAttribute().endAngle,a)*(r-n)+n},to:(t,e)=>e.getFinalAttribute().endAngle},outerRadius:{from:(t,e)=>e.getFinalAttribute().innerRadius,to:(t,e)=>e.getFinalAttribute().outerRadius},innerRadius:{from:(t,e)=>e.getFinalAttribute().innerRadius,to:(t,e)=>e.getFinalAttribute().innerRadius}}}),PY=i=>[Rn(i.map(t=>1*t.getFinalAttribute().startAngle)),rn(i.map(t=>1*t.getFinalAttribute().endAngle))],EY=i=>({channel:{startAngle:{from:(t,e)=>e.getFinalAttribute().startAngle,to:(t,e)=>{const{startAngle:n,endAngle:r}=i.animationInfo(),s=Rk(e.parent.children),a=PY(s);return Ek(e.getFinalAttribute().startAngle,a)*(r-n)+n}},endAngle:{from:(t,e)=>e.getFinalAttribute().endAngle,to:(t,e)=>{const{startAngle:n,endAngle:r}=i.animationInfo(),s=Rk(e.parent.children),a=PY(s);return Ek(e.getFinalAttribute().endAngle,a)*(r-n)+n}},outerRadius:{from:(t,e)=>e.getFinalAttribute().outerRadius,to:()=>i.animationInfo().innerRadius},innerRadius:{from:(t,e)=>e.getFinalAttribute().innerRadius,to:()=>i.animationInfo().innerRadius}}}),L7t=(i,t)=>{switch(t){case"fadeIn":return{type:"fadeIn"};case"growAngle":return{type:"growAngleIn"};default:return{type:"growRadiusIn"}}},B7t=()=>{z.registerAnimation("sunburst",(i,t)=>({appear:L7t(i,t),enter:I7t(i),exit:EY(i),disappear:EY(i)}))},ix=(i,t={})=>{if(!i)return[];const e=[];return Xz(i,e,t),e},F7t=(i,t)=>{if(!i)return i;const e=t(),{width:n,height:r}=e;return new U0(e).layout(i,{width:n,height:r})},z7t=10;class N7t extends pr{constructor(){super(...arguments),this.markTooltipKeyCallback=t=>t?.[this.series.getDimensionField()[0]]}}var $c;(function(i){i.DrillDown="drillDown",i.DrillUp="drillUp"})($c||($c={}));const j7t=(i,t)=>{const e=t.info(),n=t.keyField(),r=e?.key;if(N(r))return i;if(e.type===$c.DrillDown){const s=Gnt(i,r,n,"children");return X(s)}if(e.type===$c.DrillUp){const s=Ynt(i,r,n,"children");if(s)return X(s)}return i};class eN{_getDrillTriggerEvent(t){var e;const{mode:n}=this._drillParams;return(e=_l(n))===null||e===void 0?void 0:e[t]}_hideTooltip(){const t=this.getChart().getComponentsByType(lt.tooltip)[0];t&&t.hideTooltip()}initDrillable(t){this._drillParams=t}initDrillableData(t){const{getRawData:e}=this._drillParams;Vt(t,"drillFilter",j7t),e().transform({type:"drillFilter",options:{info:()=>this._drillInfo,keyField:()=>this._drillParams.drillField()}})}bindDrillEvent(){const{event:t,getRawData:e,drillField:n}=this._drillParams,r=n();this._getDrillTriggerEvent("start")&&t.on(this._getDrillTriggerEvent("start"),s=>{var a,o,l;if(N(s.datum)||N((a=s.datum)===null||a===void 0?void 0:a[r]))return void this.drillUp();this._hideTooltip();const u=s.datum[r],c=(l=(o=this._drillInfo)===null||o===void 0?void 0:o.path)!==null&&l!==void 0?l:[],h=G5t(e().rawData,u,r,"children");c[c.length-1]===h[h.length-1]?this.drillUp():this.drillDown(h)})}drillDown(t=[]){const{getRawData:e,event:n}=this._drillParams;if(!J(t)||Lt(t))return t;const r=t[t.length-1];return this._drillInfo={key:r,path:t,type:$c.DrillDown},e().reRunAllTransform(),n.emit(Tt.drill,{value:{path:t,type:$c.DrillDown},model:this}),t}drillUp(){var t,e;const{getRawData:n,event:r}=this._drillParams,s=(e=(t=this._drillInfo)===null||t===void 0?void 0:t.path)!==null&&e!==void 0?e:[];if(!J(s)||Lt(s))return s;const a=s.pop();return this._drillInfo={key:a,path:s,type:$c.DrillUp},n().reRunAllTransform(),r.emit(Tt.drill,{value:{path:s,type:$c.DrillUp},model:this}),s}}const H7t=Object.assign(Object.assign({},Bi),{sunburst:{name:"sunburst",type:"arc"}}),iN=(i,t,e)=>(i.push({key:t,operations:["values"]}),i.push({key:e,operations:["max","min"]}),i.push({key:_L,operations:["max","min","values"]}),i.push({key:nf,operations:["values"]}),i),V7t={innerRadius:0,outerRadius:1,startAngle:Pz,endAngle:Crt,gap:0,labelLayout:{align:"center",offset:0,rotate:"radial"},sunburst:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1,cursor:"pointer"}},label:{visible:!0,style:{cursor:"pointer",fill:{type:"palette",key:"primaryFontColor"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}};class Lu extends ex{constructor(){super(...arguments),this.type=st.sunburst}setCategoryField(t){return this._categoryField=t,this._categoryField}getCategoryField(){return this._categoryField}setValueField(t){return this._valueField=t,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((t=this._spec.seriesField)!==null&&t!==void 0?t:nf),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e;return(e=this._spec.drillField)!==null&&e!==void 0?e:ys},getRawData:()=>this.getRawData()}),this._startAngle=ii(this._spec.startAngle),this._endAngle=ii(this._spec.endAngle),this._centerX=this._spec.centerX,this._centerY=this._spec.centerY,this._offsetX=this._spec.offsetX,this._offsetY=this._spec.offsetY,this.__innerRadius=this._spec.innerRadius,this.__outerRadius=this._spec.outerRadius,this._gap=this._spec.gap,this._labelLayout=this._spec.labelLayout,this._sunburst=this._spec.sunburst,this._label=this._spec.label,this._labelAutoVisible=this._spec.labelAutoVisible}initData(){super.initData();const t=this.getRawData();t&&(this._spec.drill&&this.initDrillableData(this._dataSet),Vt(this._dataSet,"sunburstLayout",F7t),Vt(this._dataSet,"flatten",ix),t.transform({type:"sunburstLayout",options:()=>{const{innerRadius:e,outerRadius:n,gap:r,label:s}=this._computeLevel();return{nodeKey:this._categoryField,width:this.getLayoutRect().width,height:this.getLayoutRect().height,center:[L(this._centerX)?this._centerX:this.getLayoutRect().width/2,L(this._centerY)?this._centerY:this.getLayoutRect().height/2],startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:e,outerRadius:n,gapRadius:r,label:s}}}),t.transform({type:"flatten",options:{callback:e=>{if(e.datum){const n=e.datum[e.depth];return Object.assign(Object.assign({},e),n)}return e}}}))}getStatisticFields(){return iN(super.getStatisticFields(),this._categoryField,this._valueField)}_addDataIndexAndKey(){const t=this.getRawData();N(t?.dataSet)||(Vt(t.dataSet,"addVChartProperty",Vm),t.transform({type:"addVChartProperty",options:{beforeCall:kz.bind(this),call:hT}}))}initMark(){this._initArcMark(),this._initLabelMark()}initMarkStyle(){this._initArcMarkStyle(),this._initLabelMarkStyle()}_initArcMark(){if(this._sunburst.visible===!1)return;const t=this._createMark(Lu.mark.sunburst,{isSeriesMark:!0});this._sunburstMark=t}_initArcMarkStyle(){N(this._sunburstMark)||this.setMarkStyle(this._sunburstMark,{x:t=>t.x+(L(this._offsetX)?this._offsetX:0),y:t=>t.y+(L(this._offsetY)?this._offsetY:0),outerRadius:t=>t.outerRadius,innerRadius:t=>t.innerRadius,startAngle:t=>t.startAngle,endAngle:t=>t.endAngle,fill:this.getColorAttribute()},bt.STATE_NORMAL,ct.Series)}_initLabelMark(){if(this._label.visible!==!0)return;const t=this._createMark(Lu.mark.label,{isSeriesMark:!1});this._labelMark=t}_initLabelMarkStyle(){N(this._labelMark)||this.setMarkStyle(this._labelMark,{visible:t=>{var e;const n=this._labelAutoVisible;return ee(n)&&n.enable===!0?(t.endAngle-t.startAngle)*(t.outerRadius-t.innerRadius)>((e=n?.circumference)!==null&&e!==void 0?e:z7t):this._spec.label.visible},x:t=>{var e;return((e=t.label)===null||e===void 0?void 0:e.x)+(L(this._offsetX)?this._offsetX:0)},y:t=>{var e;return((e=t.label)===null||e===void 0?void 0:e.y)+(L(this._offsetY)?this._offsetY:0)},textBaseline:t=>{var e;return(e=t.label)===null||e===void 0?void 0:e.textBaseline},textAlign:t=>{var e;return(e=t.label)===null||e===void 0?void 0:e.textAlign},angle:t=>{var e,n;return(n=(e=t.label)===null||e===void 0?void 0:e.angle)!==null&&n!==void 0?n:0},fontSize:10,text:t=>t.name},bt.STATE_NORMAL,ct.Series)}initTooltip(){this._tooltipHelper=new N7t(this),this._sunburstMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._sunburstMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var t,e;const n={animationInfo:()=>({innerRadius:this._computeRadius(X(this.__innerRadius))[0],outerRadius:this._computeRadius(X(this.__outerRadius))[0],startAngle:X(this._startAngle)[0],endAngle:X(this._endAngle)[0]})},r=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this.getMarksInType("arc").forEach(s=>{var a;s.setAnimationConfig(ye((a=z.getAnimationInKey("sunburst"))===null||a===void 0?void 0:a(n,r),Ce(s.name,this._spec,this._markAttributeContext)))}),this.getMarksInType("text").forEach(s=>{var a;s.setAnimationConfig(ye((a=z.getAnimationInKey("fadeInOut"))===null||a===void 0?void 0:a(),Ce(s.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(){super.onLayoutEnd(),this._rawData.reRunAllTransform()}_computeRadius(t){return J(t)?t.map(e=>this._computeLayoutRadius()*e):this._computeLayoutRadius()*t}_computeLevel(){return{innerRadius:this._computeRadius(this.__innerRadius),outerRadius:this._computeRadius(this.__outerRadius),gap:this._gap,label:this._labelLayout}}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(t,e){}getActiveMarks(){return[this._sunburstMark]}getMarkData(t){return t?.datum?t.datum[t.datum.length-1]:t}}Lu.type=st.sunburst,Lu.mark=H7t,Lu.builtInTheme={sunburst:V7t},Be(Lu,eN);const tat=()=>{z.registerSeries(Lu.type,Lu),Oh(),Ps(),rl(),B7t()},W7t=(i,t)=>{if(!i)return i;const e=t(),{width:n,height:r}=e;return n===0||r===0?i:new $0(e).layout(i,{width:n,height:r})};class $7t extends pr{constructor(){super(...arguments),this.markTooltipKeyCallback=t=>t?.[this.series.getDimensionField()[0]]}}const U7t=i=>i==="fadeIn"?{type:"fadeIn"}:{type:"growRadiusIn"},G7t=()=>{z.registerAnimation("circlePacking",(i,t)=>({appear:U7t(t),enter:{type:"growRadiusIn"},exit:{type:"growRadiusOut"},disappear:{type:"growRadiusOut"}}))},Y7t=Object.assign(Object.assign({},Bi),{circlePacking:{name:"circlePacking",type:"arc"}}),X7t={layoutPadding:5,circlePacking:{visible:!0,style:{cursor:"pointer",lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}},label:{visible:!0,style:{cursor:"pointer",fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}};class Bu extends _o{constructor(){super(...arguments),this.type=st.circlePacking}setCategoryField(t){return this._categoryField=t,this._categoryField}getCategoryField(){return this._categoryField}setValueField(t){return this._valueField=t,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((t=this._spec.seriesField)!==null&&t!==void 0?t:nf),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e;return(e=this._spec.drillField)!==null&&e!==void 0?e:ys},getRawData:()=>this.getRawData()}),this._circlePacking=this._spec.circlePacking,this._label=this._spec.label,this._layoutPadding=this._spec.layoutPadding}initData(){super.initData();const t=this.getRawData();N(t)||(this._spec.drill&&this.initDrillableData(this._dataSet),Vt(this._dataSet,"circlePackingLayout",W7t),Vt(this._dataSet,"flatten",ix),t.transform({type:"circlePackingLayout",options:()=>({nodeKey:this._categoryField,padding:this._layoutPadding,includeRoot:!1,width:this.getLayoutRect().width||1,height:this.getLayoutRect().height||1})}),t.transform({type:"flatten",options:{callback:e=>{if(e.datum){const n=e.datum[e.depth];return Object.assign(Object.assign({},e),n)}return e}}}))}_addDataIndexAndKey(){const t=this.getRawData();N(t?.dataSet)||(Vt(t.dataSet,"addVChartProperty",Vm),t.transform({type:"addVChartProperty",options:{beforeCall:kz.bind(this),call:hT}}))}initMark(){this._initCirclePackingMark(),this._initLabelMark()}initMarkStyle(){this._initCirclePackingMarkStyle(),this._initLabelMarkStyle()}_initCirclePackingMark(){var t;if(((t=this._circlePacking)===null||t===void 0?void 0:t.visible)===!1)return;const e=this._createMark(Bu.mark.circlePacking,{isSeriesMark:!0});this._circlePackingMark=e}_initCirclePackingMarkStyle(){N(this._circlePackingMark)||this.setMarkStyle(this._circlePackingMark,{x:t=>t.x,y:t=>t.y,outerRadius:t=>t.radius,innerRadius:0,startAngle:0,endAngle:2*Math.PI,fill:this.getColorAttribute(),zIndex:t=>t.depth},bt.STATE_NORMAL,ct.Series)}_initLabelMark(){var t;if(((t=this._label)===null||t===void 0?void 0:t.visible)===!1)return;const e=this._createMark(Bu.mark.label,{isSeriesMark:!1});this._labelMark=e}_initLabelMarkStyle(){N(this._labelMark)||this.setMarkStyle(this._labelMark,{x:t=>t.x,y:t=>t.y,text:t=>t.key,cursor:"pointer"},bt.STATE_NORMAL,ct.Series)}getStatisticFields(){return iN(super.getStatisticFields(),this._categoryField,this._valueField)}initTooltip(){this._tooltipHelper=new $7t(this),this._circlePackingMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._circlePackingMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var t;const e=(t=this._spec.animationAppear)===null||t===void 0?void 0:t.preset;this.getMarksInType("arc").forEach(n=>{var r;n.setAnimationConfig(ye((r=z.getAnimationInKey("circlePacking"))===null||r===void 0?void 0:r(void 0,e),Ce(n.name,this._spec,this._markAttributeContext)))}),this.getMarksInType("text").forEach(n=>{var r;n.setAnimationConfig(ye((r=z.getAnimationInKey("scaleInOut"))===null||r===void 0?void 0:r(),Ce(n.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(){super.onLayoutEnd(),this._rawData.reRunAllTransform()}_noAnimationDataKey(t,e){}getActiveMarks(){return[this._circlePackingMark]}getMarkData(t){return t?.datum?t.datum[t.datum.length-1]:t}}Bu.type=st.circlePacking,Bu.mark=Y7t,Bu.builtInTheme={circlePacking:X7t},Be(Bu,eN);const eat=()=>{z.registerSeries(Bu.type,Bu),Oh(),Ps(),uT(),G7t()},iat=(i,t,e)=>{t.forEach(n=>{N(n[e])||i.add(n[e]),n.children&&n.children.length>0&&iat(i,n.children,e)})},K7t=i=>{var t;if(!i||!J(i))return[];if(i.length>1){const e={links:[],nodes:[]};return i.forEach(n=>{n.id!=="links"&&n.id!=="nodes"||(e[n.id]=n.values)}),[e]}return!((t=i[0])===null||t===void 0)&&t.latestData?i[0].latestData:i},q7t=(i,t)=>{if(!i||!t?.view||!i.length)return[];const e=t.view();if(e.x1-e.x0==0||e.y1-e.y0==0||e.x1-e.x0==-1/0||e.x1-e.x0==1/0||e.y1-e.y0==-1/0||e.y1-e.y0==1/0)return[];const n=i[0];if((t.sourceField!=="source"||t.targetField!=="target"||t.valueField!=="value")&&n.links){const a=[];n.links.forEach(o=>{const l={};for(const u in o)u===t.sourceField?l.source=o[t.sourceField]:u===t.targetField?l.target=o[t.targetField]:u===t.valueField?l.value=o[t.valueField]:l[u]=o[u];a.push(l)}),n.links=a}const r=new PT(t),s=[];return s.push(r.layout(n,e)),s},Z7t=i=>{var t,e;return i&&J(i)&&(!((t=i[0])===null||t===void 0)&&t.latestData)&&i[0].latestData.length&&i[0].latestData[0]&&(e=i[0].latestData[0].nodes)!==null&&e!==void 0?e:[]},Q7t=i=>{var t,e;return i&&J(i)&&(!((t=i[0])===null||t===void 0)&&t.latestData)&&i[0].latestData.length&&i[0].latestData[0]&&(e=i[0].latestData[0].links)!==null&&e!==void 0?e:[]};class J7t extends pr{constructor(){super(...arguments),this._getDimensionData=t=>{if(t.source){if(yt(t.source)){const e=this.series.getSeriesKeys();return e[t.source]+" => "+e[t.target]}return t.source+" => "+t.target}return t.datum?t.datum[this.series.getSpec().categoryField]:t.key},this.markTooltipValueCallback=t=>t.value}}const t9t=(i,t=!0)=>({type:i.direction==="horizontal"?"growWidthIn":"growHeightIn",options:{overall:t&&i.growFrom(),orient:"positive"}}),e9t=(i,t)=>t==="fadeIn"?{type:"fadeIn"}:t9t(i),i9t=i=>i==="fadeIn"?{type:"fadeIn"}:{type:"linkPathGrowIn"},n9t=(i,t,e)=>{const n={x0:i.getFinalAttribute().x0,x1:i.getFinalAttribute().x1,y0:i.getFinalAttribute().y0,y1:i.getFinalAttribute().y1,thickness:i.getFinalAttribute().thickness};return{from:Object.assign({},n,{x1:n.x0,y1:n.y0}),to:n}},r9t=(i,t,e)=>{const n={x0:i.getFinalAttribute().x0,x1:i.getFinalAttribute().x1,y0:i.getFinalAttribute().y0,y1:i.getFinalAttribute().y1,thickness:i.getFinalAttribute().thickness};return{from:n,to:Object.assign({},n,{x1:n.x0,y1:n.y0})}};class s9t extends bi{onBind(){var t,e,n;super.onBind(),!((t=this.params)===null||t===void 0)&&t.diffAttrs&&this.target.setAttributes(this.params.diffAttrs);const{from:r,to:s}=n9t(this.target,this.params.options,this.params),a=(n=(e=this.target.context)===null||e===void 0?void 0:e.lastAttrs)!==null&&n!==void 0?n:r,o=this.target.getFinalAttribute();o&&Object.assign(this.target.attribute,o),this.props=s,this.propKeys=Object.keys(s).filter(l=>s[l]!=null),this.animate.reSyncProps(),this.from=a,this.to=s,this.target.setAttributes(a)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.setAttributes(r)}}class a9t extends bi{onBind(){var t,e,n;super.onBind(),!((t=this.params)===null||t===void 0)&&t.diffAttrs&&this.target.setAttributes(this.params.diffAttrs);const{from:r,to:s}=r9t(this.target,this.params.options,this.params),a=(n=(e=this.target.context)===null||e===void 0?void 0:e.lastAttrs)!==null&&n!==void 0?n:r;this.props=s,this.propKeys=Object.keys(s).filter(o=>s[o]!=null),this.animate.reSyncProps(),this.from=a,this.to=s,this.target.setAttributes(a)}onUpdate(t,e,n){const r=this.target.attribute;this.propKeys.forEach(s=>{r[s]=this.from[s]+(this.to[s]-this.from[s])*e}),this.target.setAttributes(r)}}const o9t=()=>{z.registerAnimation("sankeyNode",(i,t)=>Object.assign({appear:e9t(i,t)},lT)),z.registerAnimation("sankeyLinkPath",(i,t)=>({appear:i9t(t),enter:{type:"linkPathGrowIn"},exit:{type:"linkPathGrowOut"},disappear:{type:"linkPathGrowOut"}})),se.registerBuiltInAnimate("linkPathGrowOut",a9t),se.registerBuiltInAnimate("linkPathGrowIn",s9t)},l9t=(i,t)=>{var e;const n=(e=i.curvature)!==null&&e!==void 0?e:.5,r=typeof t=="number"?i.thickness*t:i.thickness;let s=i.x0,a=i.x1,o=i.y0,l=i.y1,u=s+n*(a-s),c=a+n*(s-a),h=_=>_;i.round!==!1&&(s=Math.round(s),a=Math.round(a),o=Math.round(o),l=Math.round(l),u=Math.round(u),c=Math.round(c),h=Math.round),i.pathType==="line"||i.pathType,i.align==="center"?(o=h(i.y0-r/2),l=h(i.y1-r/2)):i.align==="end"?(o=h(i.y0+i.thickness/2-r),l=h(i.y1+i.thickness/2-r)):(o=h(i.y0-i.thickness/2),l=h(i.y1-i.thickness/2));const d=h(o+r),f=h(l+r),p=Math.abs(a-s)>1e-6,g=i.endArrow&&p?`L${a},${h(l-r/2)}L${h(a+r)},${h((l+f)/2)}L${a},${h(f+r/2)}`:"",m=i.startArrow&&p?`L${s},${h(d+r/2)}L${h(s-r)},${h((o+d)/2)}L${s},${h(o-r/2)}`:"";return i.pathType==="line"?`M${s},${o}L${a},${l}${g}L${a},${f}L${s},${d}${m}Z`:i.pathType==="polyline"?`M${s},${o}L${u},${o}L${u},${l}L${a},${l}
    ${g}L${a},${f}L${u},${f}L${u},${d}L${s},${d}${m}Z`:`M${s},${o}C${u},${o},${c},${l},${a},${l}
  ${g}L${a},${f}C${c},${f},${u},${d},${s},${d}${m}Z`},u9t=(i,t)=>{var e;const n=(e=i.curvature)!==null&&e!==void 0?e:.5,r=typeof t=="number"?i.thickness*t:i.thickness;let s=i.y0,a=i.y1,o=i.x0,l=i.x1,u=s+n*(a-s),c=a+n*(s-a),h=_=>_;i.round!==!1&&(h=Math.round,s=Math.round(s),a=Math.round(a),o=Math.round(o),l=Math.round(l),u=Math.round(u),c=Math.round(c)),i.pathType==="line"||i.pathType,i.align==="center"?(o=h(i.x0-r/2),l=h(i.x1-r/2)):i.align==="end"?(o=h(i.x0+i.thickness/2-r),l=h(i.x1+i.thickness/2-r)):(o=h(i.x0-i.thickness/2),l=h(i.x1-i.thickness/2));const d=h(o+r),f=h(l+r),p=Math.abs(a-s)>1e-6,g=i.endArrow&&p?`L${h(l-r/2)},${a}L${h((l+f)/2)},${h(a+r)}L${h(f+r/2)},${a}`:"",m=i.startArrow&&p?`L${h(d+r/2)},${s}L${h((d+o)/2)},${h(s-r)}L${h(o-r/2)},${s}`:"";return i.pathType==="line"?`M${o},${s}L${l},${a}${g}L${f},${a}L${d},${s}${m}Z`:i.pathType==="polyline"?`M${o},${s}L${o},${u}L${l},${u}L${l},${a}
    ${g}L${f},${a}L${f},${u}L${d},${u}L${d},${s}${m}Z`:`M${o},${s}C${o},${u},${l},${c},${l},${a}
  ${g}L${f},${a}C${f},${c},${d},${u},${d},${s}${m}Z`};class X0 extends kT{constructor(){super(...arguments),this.type=X0.type,this._subMarks={back:{type:"path",defaultAttributes:{zIndex:0}},front:{type:"path",defaultAttributes:{zIndex:1}}},this._positionChannels=["x0","y0","x1","y1","thickness","round","curvature","ratio","pathType","align","endArrow","startArrow","ratio"],this._channelEncoder={backgroundStyle:t=>({back:t})},this._positionEncoder=(t,e,n)=>{var r,s;const a=Object.assign(Object.assign({},n.attribute),t),o=(r=a.direction)!==null&&r!==void 0?r:(s=this._glyphConfig)===null||s===void 0?void 0:s.direction,l=["vertical","TB","BT"].includes(o)?u9t:l9t,u=typeof a.ratio=="number"&&a.ratio>=0&&a.ratio<=1;return{back:{path:u?l(a,1):""},front:{path:l(a,u?a.ratio:1)}}}}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,x0:0,y0:0,x1:100,y1:100,thickness:1,round:!0})}}X0.type="linkPath";const c9t=()=>{CT(),Nm(),z.registerGraphicComponent("path",i=>RF(i)),z.registerMark(X0.type,X0)},h9t=Object.assign(Object.assign({},Bi),{node:{name:"node",type:"rect"},link:{name:"link",type:"linkPath"}});class nat extends gr{_transformLabelSpec(t){this._addMarkLabelSpec(t,"node")}}const Zf=(i,t,e,n=!0,r)=>{i.runtimeStateCache||(i.runtimeStateCache={}),i.runtimeStateCache[t]=e,i.hasState(t)&&i.removeState(t),i.addState(t,n,r)},d9t={link:{style:{fillOpacity:.15,round:!0}}};class Fu extends _o{constructor(){super(...arguments),this.type=st.sankey,this.transformerConstructor=nat,this._nodeLayoutZIndex=ti.Node,this._labelLayoutZIndex=ti.Label,this._viewBox=new ir,this._fillByNode=t=>{var e,n,r,s,a;if(t&&t.sourceRect&&t.targetRect)return this._fillByLink(t);const o=(n=(e=this._spec.node)===null||e===void 0?void 0:e.style)===null||n===void 0?void 0:n.fill;if(L(o))return o;if(L(this._spec.seriesField)){const l=(s=(r=this._option)===null||r===void 0?void 0:r.globalScale)===null||s===void 0?void 0:s.getScale("color"),u=t?.datum?t.datum:t;return l?.scale(u?.[this._spec.seriesField])}return(a=this._colorScale)===null||a===void 0?void 0:a.scale(this._getNodeNameFromData(t))},this._fillByLink=t=>{var e,n,r,s,a,o;const l=(n=(e=this._spec.link)===null||e===void 0?void 0:e.style)===null||n===void 0?void 0:n.fill;if(l)return l;if(L(this._spec.seriesField)){const c=(r=this._nodesSeriesData.latestData)===null||r===void 0?void 0:r.find(f=>t.source===f.key),h=c?.datum,d=(a=(s=this._option)===null||s===void 0?void 0:s.globalScale)===null||a===void 0?void 0:a.getScale("color");return d?.scale(h?.[this._spec.seriesField])}const u=yt(t.source)?this.getNodeList()[t.source]:t.source;return(o=this._colorScale)===null||o===void 0?void 0:o.scale(u)},this._handleEmphasisElement=t=>{var e;const n=(e=this._spec.emphasis)!==null&&e!==void 0?e:{},r=t.item;n.effect==="adjacency"?r&&t.mark===this._nodeMark?this._handleNodeAdjacencyClick(r):r&&t.mark===this._linkMark?this._handleLinkAdjacencyClick(r):this._handleClearEmpty():n.effect==="related"&&(r&&t.mark===this._nodeMark?this._handleNodeRelatedClick(r):r&&t.mark===this._linkMark?this._handleLinkRelatedClick(r):this._handleClearEmpty())},this._handleClearEmpty=()=>{var t,e;if(!this._needClear)return;const n=(t=this._nodeMark)===null||t===void 0?void 0:t.getGraphics();if(!n||!n.length)return;const r=(e=this._linkMark)===null||e===void 0?void 0:e.getGraphics();r&&r.length&&(n.forEach(s=>{s.removeState(bt.STATE_SANKEY_EMPHASIS),s.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE)}),r.forEach(s=>{s.removeState(bt.STATE_SANKEY_EMPHASIS),s.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE)}),this._needClear=!1)},this._handleNodeAdjacencyClick=t=>{const e=cn(t),n=[e.key];if(this._linkMark){const r=this._linkMark.getGraphics();if(!r||!r.length)return;r.forEach((s,a)=>{const o=cn(s);o.source===e.key?(n.includes(o.target)||n.push(o.target),s.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE),s.addState(bt.STATE_SANKEY_EMPHASIS,!0)):o.target===e.key?(n.includes(o.source)||n.push(o.source),s.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE),s.addState(bt.STATE_SANKEY_EMPHASIS,!0)):(s.removeState(bt.STATE_SANKEY_EMPHASIS),s.addState(bt.STATE_SANKEY_EMPHASIS_REVERSE,!0))})}this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),n),this._needClear=!0},this._handleLinkAdjacencyClick=t=>{const e=cn(t),n=[e.source,e.target];if(this._linkMark){const r=this._linkMark.getGraphics();if(!r||!r.length)return;r.forEach(s=>{s===t?(s.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE),Zf(s,bt.STATE_SANKEY_EMPHASIS,{ratio:1})):(s.removeState(bt.STATE_SANKEY_EMPHASIS),s.addState(bt.STATE_SANKEY_EMPHASIS_REVERSE,!0))})}this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),n),this._needClear=!0},this._handleNodeRelatedClick=t=>{var e;const n=cn(t),r=this._nodeMark.getGraphics();if(!r||!r.length)return;const s=this._linkMark.getGraphics();if(!s||!s.length)return;const a=!((e=cn(s[0]))===null||e===void 0)&&e.parents?"parents":"source";if(a==="source"){const o=[n.key],l=[];if(s.forEach((u,c)=>{var h,d,f,p;const g=cn(u),m=g?.parents?"parents":"source";if(X(g[m]).includes(n.key)){if(l.includes((h=g.key)!==null&&h!==void 0?h:g.index)||l.push((d=g.key)!==null&&d!==void 0?d:g.index),o.includes(g.source)||o.push(g.source),!o.includes(g.target)){o.push(g.target);let _=r.find(v=>v.data[0].key===g.target).data[0].sourceLinks;for(;_?.length>0;){const v=[];return _.forEach(y=>{var b,x;if(!l.includes((b=y.key)!==null&&b!==void 0?b:y.index)&&(l.push((x=y.key)!==null&&x!==void 0?x:y.index),!o.includes(y.target))){o.push(y.target);const S=r.find(w=>w.data[0].key===y.target);v.push(S.data[0].targetLinks)}}),void(_=v)}}}else if(g.target===n.key&&(l.includes((f=g.key)!==null&&f!==void 0?f:g.index)||l.push((p=g.key)!==null&&p!==void 0?p:g.index),!o.includes(g.source))){o.push(g.source);let _=r.find(v=>v.data[0].key===g.source).data[0].targetLinks;for(;_?.length>0;){const v=[];return _.forEach(y=>{var b,x;if(!l.includes((b=y.key)!==null&&b!==void 0?b:y.index)&&(l.push((x=y.key)!==null&&x!==void 0?x:y.index),!o.includes(y.source))){o.push(y.source);const S=r.find(w=>w.data[0].key===y.source);v.push(S.data[0].targetLinks)}}),void(_=v)}}}),this._linkMark){const u=this._linkMark.getGraphics();if(!u||!u.length)return;u.forEach((c,h)=>{var d;const f=cn(c);l.includes((d=f.key)!==null&&d!==void 0?d:f.index)?(c.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE),c.addState(bt.STATE_SANKEY_EMPHASIS,!0)):(c.removeState(bt.STATE_SANKEY_EMPHASIS),c.addState(bt.STATE_SANKEY_EMPHASIS_REVERSE,!0))})}this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),o)}else{const o=[n.key],l=n.targetLinks.reduce((u,c)=>(X(c.datum).forEach(h=>{const d=h.parents,f=d.length;for(let p=0;p<f;p++){const g=d[p].key,m=d[p+1]?d[p+1].key:n.key,_=h.value,v=u.find(y=>y.source===g&&y.target===m);v?v.value+=_:u.push({source:g,target:m,value:_})}}),u),[]);s.forEach((u,c)=>{const h=cn(u),d=h.datum,f=d?d.filter(g=>g[a].some(m=>m.key===n.key)):null,p=l.find(g=>g.source===h.source&&g.target===h.target);if(f&&f.length){o.includes(h.source)||o.push(h.source),o.includes(h.target)||o.push(h.target);const g=f.reduce((m,_)=>m+_.value,0)/h.value;return u.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE),void Zf(u,bt.STATE_SANKEY_EMPHASIS,{ratio:g})}if(p)return o.includes(h.source)||o.push(h.source),o.includes(h.target)||o.push(h.target),u.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE),void Zf(u,bt.STATE_SANKEY_EMPHASIS,{ratio:p.value/h.value});u.removeState(bt.STATE_SANKEY_EMPHASIS),u.addState(bt.STATE_SANKEY_EMPHASIS_REVERSE,!0)}),this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),o)}this._needClear=!0},this._handleLinkRelatedClick=t=>{const e=this._nodeMark.getGraphics();if(!e||!e.length)return;const n=this._linkMark.getGraphics();if(!(!n||!n.length)){if((cn(t)?"parents":"source")=="source")this._linkMark&&n.forEach(r=>{r.removeState(bt.STATE_SANKEY_EMPHASIS),r.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE)}),this._nodeMark&&e.forEach(r=>{r.removeState(bt.STATE_SANKEY_EMPHASIS),r.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE)});else{const r=cn(t),s=[r.source,r.target],a=[];X(r.datum).forEach(o=>{const l=o.parents,u=l.length;for(let c=0;c<u-1;c++){const h=l[c].key,d=l[c+1].key,f=o.value,p=a.find(g=>g.source===h&&g.target===d);a.push({source:l[c].key,target:l[c+1].key,value:o.value}),p?p.value+=f:a.push({source:h,target:d,value:f})}}),n.forEach(o=>{const l=cn(o),u=l.datum;if(l.source===r.source&&l.target===r.target)return o.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE),void Zf(o,bt.STATE_SANKEY_EMPHASIS,{ratio:1});const c=u?u.filter(d=>{const f=d.parents.map(p=>p.key);return f.includes(r.source)&&f.includes(r.target)}):null;if(c&&c.length){s.includes(l.source)||s.push(l.source),s.includes(l.target)||s.push(l.target);const d=c.filter(f=>f.parents.some((p,g)=>{var m;return p.key===r.source&&((m=f.parents[g+1])===null||m===void 0?void 0:m.key)===r.target})).reduce((f,p)=>f+p.value,0)/l.value;return o.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE),void Zf(o,bt.STATE_SANKEY_EMPHASIS,{ratio:d})}const h=a.find(d=>d.source===l.source&&d.target===l.target);if(h)return s.includes(l.source)||s.push(l.source),s.includes(l.target)||s.push(l.target),o.removeState(bt.STATE_SANKEY_EMPHASIS_REVERSE),void Zf(o,bt.STATE_SANKEY_EMPHASIS,{ratio:h.value/l.value});o.removeState(bt.STATE_SANKEY_EMPHASIS),o.addState(bt.STATE_SANKEY_EMPHASIS_REVERSE,!0)}),this._highLightElements(e,s)}this._needClear=!0}}}get direction(){var t;return(t=this._spec.direction)!==null&&t!==void 0?t:"horizontal"}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((t=this._spec.seriesField)!==null&&t!==void 0?t:this._spec.categoryField)}initData(){var t,e,n,r;super.initData();const s=this.getViewData(),a=this.getRawData();if(a&&s){Vt(this._dataSet,"sankeyLayout",q7t),Vt(this._dataSet,"sankeyFormat",K7t),a.transform({type:"sankeyFormat"},!1),s.transform({type:"sankeyLayout",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),sourceField:this._spec.sourceField,targetField:this._spec.targetField,valueField:this._spec.valueField,direction:this.direction,crossNodeAlign:this._spec.crossNodeAlign,nodeAlign:(t=this._spec.nodeAlign)!==null&&t!==void 0?t:"justify",nodeGap:(e=this._spec.nodeGap)!==null&&e!==void 0?e:8,nodeWidth:(n=this._spec.nodeWidth)!==null&&n!==void 0?n:10,linkWidth:this._spec.linkWidth,minStepWidth:this._spec.minStepWidth,minNodeHeight:(r=this._spec.minNodeHeight)!==null&&r!==void 0?r:4,maxNodeHeight:this._spec.maxNodeHeight,minLinkHeight:this._spec.minLinkHeight,maxLinkHeight:this._spec.maxLinkHeight,iterations:this._spec.iterations,nodeKey:this._spec.nodeKey,linkSortBy:this._spec.linkSortBy,nodeSortBy:this._spec.nodeSortBy,setNodeLayer:this._spec.setNodeLayer,dropIsolatedNode:this._spec.dropIsolatedNode,nodeHeight:this._spec.nodeHeight,linkHeight:this._spec.linkHeight,equalNodeHeight:this._spec.equalNodeHeight,linkOverlap:this._spec.linkOverlap,inverse:this._spec.inverse},level:Qo.sankeyLayout});const{dataSet:o}=this._option;Vt(o,"sankeyNodes",Z7t),Vt(o,"flatten",ix);const l=new je(o,{name:`sankey-node-${this.id}-data`});l.parse([this.getViewData()],{type:"dataview"}),l.transform({type:"sankeyNodes"}),l.transform({type:"flatten",options:{callback:c=>{if(c.datum){const h=c.datum[c.depth];return Object.assign(Object.assign({},c),h)}return c}}},!1),l.transform({type:"addVChartProperty",options:{beforeCall:om.bind(this),call:rf}},!1),this._nodesSeriesData=l,Vt(o,"sankeyLinks",Q7t);const u=new je(o,{name:`sankey-link-${this.id}-data`});u.parse([this.getViewData()],{type:"dataview"}),u.transform({type:"sankeyLinks"}),u.transform({type:"addVChartProperty",options:{beforeCall:om.bind(this),call:rf}},!1),this._linksSeriesData=u}}compileData(){var t,e;super.compileData(),(t=this._linkMark)===null||t===void 0||t.compileData(),(e=this._nodeMark)===null||e===void 0||e.compileData()}initMark(){this._rootMark.setMarkConfig({overflow:this._spec.overflow,interactive:!!this._spec.overflow});const t=this._createMark(Fu.mark.node,{isSeriesMark:!0,dataView:this._nodesSeriesData});t&&(t.setMarkConfig({zIndex:this._nodeLayoutZIndex}),this._nodeMark=t);const e=this._createMark(Fu.mark.link,{dataView:this._linksSeriesData});e&&(this._linkMark=e)}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToNode=this.valueToNode.bind(this),this._markAttributeContext.valueToLink=this.valueToLink.bind(this)}valueToNode(t){const e=this._nodesSeriesData.latestData,n=X(t)[0];return e&&e.find(r=>r.key===n)}valueToLink(t){const e=this._linksSeriesData.latestData,n=X(t);return e&&e.find(r=>r&&r.source===n[0]&&r.target===n[1])}valueToPositionX(t){const e=this.valueToNode(t);return e?.x0}valueToPositionY(t){const e=this.valueToNode(t);return e?.y0}initMarkStyle(){this._initNodeMarkStyle(),this._initLinkMarkStyle()}_initNodeMarkStyle(){var t,e;const n=this._nodeMark;n&&(this.setMarkStyle(n,{x:r=>r.x0,x1:r=>r.x1,y:r=>r.y0,y1:r=>r.y1},bt.STATE_NORMAL,ct.Mark),this.setMarkStyle(n,{fill:(e=(t=this._spec.node.style)===null||t===void 0?void 0:t.fill)!==null&&e!==void 0?e:this._fillByNode},"normal",ct.User_Mark))}_initLinkMarkStyle(){var t,e;const n=this._linkMark;n&&(n.setGlyphConfig({direction:this.direction}),this.setMarkStyle(n,{x0:r=>r.x0,x1:r=>r.x1,y0:r=>r.y0,y1:r=>r.y1,thickness:r=>r.thickness},bt.STATE_NORMAL,ct.Series),this.setMarkStyle(n,{fill:(e=(t=this._spec.link.style)===null||t===void 0?void 0:t.fill)!==null&&e!==void 0?e:this._fillByLink},"normal",ct.User_Mark))}initLabelMarkStyle(t,e){if(!t)return;const n=e.position;n&&n.includes("inside")?this.setMarkStyle(t,{fill:"#ffffff",text:r=>this._createText(r,e),maxLineWidth:r=>{var s;return(s=e.limit)!==null&&s!==void 0?s:r.x1-r.x0}}):this.setMarkStyle(t,{fill:this._fillByNode,text:r=>this._createText(r,e),maxLineWidth:e.limit}),t.setMarkConfig({zIndex:this._labelLayoutZIndex})}_createText(t,e){if(N(t)||N(t.datum))return"";let n=t.datum[this._spec.categoryField]||"";const{formatMethod:r,formatter:s}=e||{},{formatFunc:a,args:o}=Ju(r,s,n,t.datum);return a&&(n=a(...o,{series:this})),n}initAnimation(){var t,e,n,r;const s={direction:this.direction,growFrom:()=>{var o,l;return this.direction==="horizontal"?(o=this._xAxisHelper)===null||o===void 0?void 0:o.getScale(0).scale(0):(l=this._yAxisHelper)===null||l===void 0?void 0:l.getScale(0).scale(0)}},a=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._nodeMark&&this._nodeMark.setAnimationConfig(ye((n=z.getAnimationInKey("sankeyNode"))===null||n===void 0?void 0:n(s,a),Ce("node",this._spec,this._markAttributeContext))),this._linkMark&&this._linkMark.setAnimationConfig(ye((r=z.getAnimationInKey("sankeyLinkPath"))===null||r===void 0?void 0:r(s,a),Ce("link",this._spec,this._markAttributeContext)))}initEvent(){var t,e,n;super.initEvent(),(t=this._nodesSeriesData)===null||t===void 0||t.target.addListener("change",this.nodesSeriesDataUpdate.bind(this)),(e=this._linksSeriesData)===null||e===void 0||e.target.addListener("change",this.linksSeriesDataUpdate.bind(this));const r=(n=this._spec.emphasis)!==null&&n!==void 0?n:{};if(this._option.disableTriggerEvent!==!0&&r.enable&&(r.effect==="adjacency"||r.effect==="related")){const s=r.trigger==="hover"?"pointerover":"pointerdown";this.event.on(s,{level:vi.chart},this._handleEmphasisElement)}}nodesSeriesDataUpdate(){this._nodeMark.getData().updateData(),this._nodeList=null,this._setNodeOrdinalColorScale()}linksSeriesDataUpdate(){this._linkMark.getData().updateData()}_highLightElements(t,e){t&&t.length&&t.forEach(n=>{n.removeState([bt.STATE_SANKEY_EMPHASIS_REVERSE,bt.STATE_SANKEY_EMPHASIS]),e.includes(cn(n).key)?n.addState(bt.STATE_SANKEY_EMPHASIS,!0):n.addState(bt.STATE_SANKEY_EMPHASIS_REVERSE,!0)})}initTooltip(){this._tooltipHelper=new J7t(this),this._nodeMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodeMark),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark)}_setNodeOrdinalColorScale(){var t,e,n,r,s;const a=(e=(t=this._option)===null||t===void 0?void 0:t.globalScale)===null||e===void 0?void 0:e.getScale("color");if(a?._specified)return void(this._colorScale=a);let o,l;a&&(o=a.domain(),l=a.range()),l||(l=this._getDataScheme()),o&&!N(o[0])||(o=this.getNodeList(),o&&o.length>10&&(l=(n=this._getDataScheme()[1])===null||n===void 0?void 0:n.scheme));const u=new Yb;(s=(r=u.domain(o)).range)===null||s===void 0||s.call(r,l),this._colorScale=u}getNodeList(){var t,e;if(this._nodeList)return this._nodeList;const n=this._rawData.latestData[0],r=n?.nodes?!((t=n.nodes[0])===null||t===void 0)&&t.children?Array.from(this.extractNamesFromTree(n.nodes,this._spec.categoryField)):n.nodes.map((s,a)=>s[this._spec.categoryField]):n?.links?Array.from(this.extractNamesFromLink(n.links)):(e=n?.values)===null||e===void 0?void 0:e.map((s,a)=>s[this._spec.categoryField]);return this._nodeList=r,r}_getNodeNameFromData(t){var e;return t?.datum?t.datum[this._spec.categoryField]:(e=t.key)!==null&&e!==void 0?e:t[this._spec.categoryField]}extractNamesFromTree(t,e){const n=new Set;return t.forEach(r=>{n.add(r[e]),r.children&&this.extractNamesFromTree(r.children,e).forEach(s=>n.add(s))}),n}extractNamesFromLink(t){const e=new Set,{sourceField:n,targetField:r}=this._spec;return t.forEach(s=>{L(s[n])&&e.add(s[n]),L(s[r])&&e.add(s[r])}),e}getDimensionField(){return[this._spec.categoryField]}getMeasureField(){return[this._valueField]}getRawDataStatisticsByField(t,e){var n;return this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[t]&&(this._viewDataStatistics&&this.getViewData().transformsArr.length<=1&&(!((n=this._viewDataStatistics.latestData)===null||n===void 0)&&n[t])?this._rawStatisticsCache[t]=this._viewDataStatistics.latestData[t]:this._rawData&&(this._rawStatisticsCache[t]={values:this._collectByField(t)})),this._rawStatisticsCache[t]}_collectByField(t){var e,n,r;const s=[],a=(n=(e=this.getRawData())===null||e===void 0?void 0:e.latestData)===null||n===void 0?void 0:n[0];if(!a)return[];if(a.links)!((r=a.nodes)===null||r===void 0)&&r.length&&a.nodes.forEach(o=>{o[this._seriesField]&&s.push(o[this._seriesField])});else if(a.nodes){const o=new Set;return iat(o,a.nodes,this._seriesField),Array.from(o)}return s}onLayoutEnd(){super.onLayoutEnd(),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this.getViewData().reRunAllTransform()}getDefaultShapeType(){return"square"}_noAnimationDataKey(t,e){}getActiveMarks(){return[this._nodeMark,this._linkMark]}getMarkData(t){return t.datum?J(t.datum)?t.datum[t.datum.length-1]:t.datum:t}}Fu.type=st.sankey,Fu.transformerConstructor=nat,Fu.mark=h9t,Fu.builtInTheme={sankey:d9t};const rat=()=>{ru(),c9t(),Ps(),o9t(),rl(),z.registerSeries(Fu.type,Fu)},RY=(i,t)=>{let e={},n=t.fields;if(it(n)&&(n=n()),!n?.length||!i?.length||!i[0].latestData)return e;const r=i[0].latestData,s=ix(r);return e=mL([{latestData:s}],t),e};class f9t extends pr{constructor(){super(...arguments),this.markTooltipKeyCallback=t=>{var e,n;return(n=(e=this.series)===null||e===void 0?void 0:e.getMarkData(t))===null||n===void 0?void 0:n[this.series.getDimensionField()[0]]},this.markTooltipValueCallback=t=>{var e,n;const{measureFields:r}=this._seriesCacheInfo,s=(e=this.series)===null||e===void 0?void 0:e.getMarkData(t);if(r[0]&&s)return(n=s[r[0]])!==null&&n!==void 0?n:t.value},this.dimensionTooltipTitleCallback=t=>{var e;const{dimensionFields:n}=this._seriesCacheInfo,r=(e=this.series)===null||e===void 0?void 0:e.getMarkData(t);if(n[0]&&r)return r[n[0]]}}get defaultShapeType(){return"square"}}const p9t=Object.assign(Object.assign({},Bi),{nonLeaf:{name:"nonLeaf",type:"rect"},leaf:{name:"leaf",type:"rect"},nonLeafLabel:{name:"nonLeafLabel",type:"text"}}),g9t=i=>i==="fadeIn"?{type:"fadeIn"}:{type:"growCenterIn"},m9t=()=>{z.registerAnimation("treemap",(i,t)=>({appear:g9t(t),enter:{type:"growCenterIn"},exit:{type:"growCenterOut"},disappear:{type:"growCenterOut"}}))};class sat extends gr{_transformLabelSpec(t){this._addMarkLabelSpec(t,"nonLeaf","nonLeafLabel","initNonLeafLabelMarkStyle"),this._addMarkLabelSpec(t,"leaf")}}const _9t=()=>{z.registerGrammarTransform("filter",{transform:(i,t)=>t?.filter(i.callback)})},v9t=()=>{z.registerGrammarTransform("map",{transform:(i,t)=>(t?.forEach((e,n)=>{i.callback(e)}),t)})},y9t=(i,t)=>{if(t.getViewBox()){const e=new RT(t).layout(i,t.getViewBox()),n=[];return Xz(e,n,{maxDepth:t?.maxDepth}),n.forEach((r,s)=>{r&&[nf,"name"].forEach(a=>{r[a]=r.datum[r.depth][t.nameField]})}),n}return[]},b9t={gapWidth:1,nodePadding:[5],nonLeaf:{visible:!1,style:{fillOpacity:.5}},label:{style:{fill:"white",textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},nonLeafLabel:{padding:24,style:{fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},textBaseline:"middle",textAlign:"center"}}};class Ro extends _o{constructor(){super(...arguments),this.type=st.treemap,this.transformerConstructor=sat,this._categoryField="name",this._valueField="value",this._viewBox=new ir,this._enableAnimationHook=this.enableMarkAnimation.bind(this),this.isHierarchyData=()=>!0}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField((t=this._spec.seriesField)!==null&&t!==void 0?t:nf),this._spec.roam&&(this.initZoomable(this.event,this._option.mode),this._matrix=new di),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e,n;return(n=(e=this._spec.drillField)!==null&&e!==void 0?e:this._categoryField)!==null&&n!==void 0?n:ys},getRawData:()=>this.getRawData()}),et(this._spec.maxDepth)&&(this._maxDepth=this._spec.maxDepth-1)}initData(){var t,e,n,r,s;super.initData(),Vt(this._dataSet,"treemap",y9t),(t=this._data.getDataView())===null||t===void 0||t.transform({type:"treemap",options:{nameField:this._categoryField,valueField:this._valueField,getViewBox:()=>this._viewBox.empty()?null:{x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2},maxDepth:this._maxDepth,gapWidth:this._spec.gapWidth,padding:this._spec.nodePadding,splitType:this._spec.splitType,aspectRatio:this._spec.aspectRatio,labelPadding:!((e=this._spec.nonLeafLabel)===null||e===void 0)&&e.visible?(n=this._spec.nonLeafLabel)===null||n===void 0?void 0:n.padding:0,labelPosition:(r=this._spec.nonLeafLabel)===null||r===void 0?void 0:r.position,minVisibleArea:(s=this._spec.minVisibleArea)!==null&&s!==void 0?s:10,minChildrenVisibleArea:this._spec.minChildrenVisibleArea,minChildrenVisibleSize:this._spec.minChildrenVisibleSize}}),this.getViewData()&&this._spec.drill&&this.initDrillableData(this._dataSet)}_runTreemapTransform(t=!1){this._data.getDataView().reRunAllTransform(),t&&this.getCompiler().renderNextTick()}_addDataIndexAndKey(){var t;!((t=this._rawData)===null||t===void 0)&&t.dataSet&&(Vt(this._rawData.dataSet,"addVChartProperty",Vm),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:kz.bind(this),call:hT}}))}getRawDataStatisticsByField(t,e){var n;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[t]&&this._rawData){const r=RY([this._rawData],{fields:[{key:t,operations:e?["min","max"]:["values"]}]})[t];this._rawStatisticsCache[t]=ot((n=this._rawStatisticsCache[t])!==null&&n!==void 0?n:{},r)}return this._rawStatisticsCache[t]}_createHierarchyDataStatistics(t,e){Vt(this._dataSet,"hierarchyDimensionStatistics",RY),Vt(this._dataSet,"flatten",ix);const n=new je(this._dataSet,{name:t});return n.parse(e,{type:"dataview"}),n.transform({type:"hierarchyDimensionStatistics",options:{fields:()=>{const r=this.getStatisticFields();return this._seriesField&&this._seriesField!==this._categoryField&&r.push({key:this._seriesField,operations:["values"]}),r}}},!1),n}getStatisticFields(){return iN(super.getStatisticFields(),this._categoryField,this._valueField)}initMark(){const t=this._createMark(Ro.mark.nonLeaf,{isSeriesMark:!0});t&&(t.setTransform([{type:"filter",callback:n=>!this._shouldFilterElement(n,"nonLeaf")}]),this._nonLeafMark=t);const e=this._createMark(Ro.mark.leaf,{isSeriesMark:!0});e&&(e.setTransform([{type:"filter",callback:n=>!this._shouldFilterElement(n,"leaf")}]),this._leafMark=e)}initMarkStyle(){this._initLeafMarkStyle(),this._initNonLeafMarkStyle()}_initLeafMarkStyle(){this._leafMark&&this.setMarkStyle(this._leafMark,{x:t=>t.x0,y:t=>t.y0,x1:t=>t.x1,y1:t=>t.y1,fill:this.getColorAttribute()},bt.STATE_NORMAL,ct.Series)}_initNonLeafMarkStyle(){this._nonLeafMark&&this.setMarkStyle(this._nonLeafMark,{x:t=>t.x0,y:t=>t.y0,x1:t=>t.x1,y1:t=>t.y1,fill:this.getColorAttribute()},bt.STATE_NORMAL,ct.Series)}_initRichStyleOfLabelMark(t){t.getTextType()==="rich"&&this.setMarkStyle(t,{maxWidth:e=>Math.abs(e.x0-e.x1),maxHeight:e=>Math.abs(e.y0-e.y1),ellipsis:!0},bt.STATE_NORMAL,ct.Series)}initLabelMarkStyle(t){t&&(this._labelMark=t,t.setRule("treemap"),this.setMarkStyle(t,{x:e=>(e.x0+e.x1)/2,y:e=>(e.y0+e.y1)/2,text:e=>{var n;return(n=e.datum[e.depth])===null||n===void 0?void 0:n[this.getDimensionField()[0]]},maxLineWidth:e=>e.x1===e.x0?Number.MIN_VALUE:e.x1-e.x0},bt.STATE_NORMAL,ct.Series),this._initRichStyleOfLabelMark(t))}initNonLeafLabelMarkStyle(t){t&&(this._nonLeafLabelMark=t,t.setRule("treemap"),this.setMarkStyle(t,{x:e=>e.labelRect?(e.labelRect.x0+e.labelRect.x1)/2:(e.x0+e.x1)/2,y:e=>e.labelRect?(e.labelRect.y0+e.labelRect.y1)/2:(e.y0+e.y1)/2,text:e=>{var n;return(n=e.datum[e.depth])===null||n===void 0?void 0:n[this.getDimensionField()[0]]},maxLineWidth:e=>e.x1===e.x0?Number.MIN_VALUE:e.x1-e.x0},bt.STATE_NORMAL,ct.Series),this._initRichStyleOfLabelMark(t))}initAnimation(){this.getMarksInType("rect").forEach(t=>{var e;t.setAnimationConfig(ye((e=z.getAnimationInKey("treemap"))===null||e===void 0?void 0:e(),Ce(t.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.roam&&(this.initDragEventOfSeries(this),this.event.on("panmove",t=>{this.handlePan(t)}),this.initZoomEventOfSeries(this),this.event.on("zoom",t=>{this.handleZoom(t)})),this._spec.drill&&this.bindDrillEvent()}_getDataIdKey(){return"key"}initTooltip(){this._tooltipHelper=new f9t(this),this._leafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._leafMark),this._nonLeafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nonLeafMark)}_shouldFilterElement(t,e){const n=t.isLeaf;return e==="leaf"?!n:n}handlePan(t){const{delta:e}=t;if(e[0]===0&&e[1]===0)return;this._matrix.reset(),this._matrix.translate(e[0],e[1]);const{a:n,b:r,c:s,d:a,e:o,f:l}=this._matrix;this._matrix.multiply(n,r,s,a,o,l),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}handleZoom(t){const{scale:e,scaleCenter:n}=t;if(e===1)return;this._matrix.reset();const{x:r,y:s}=n;this._matrix.translate(r,s),this._matrix.scale(e,e),this._matrix.translate(-r,-s);const{a,b:o,c:l,d:u,e:c,f:h}=this._matrix;this._matrix.multiply(a,o,l,u,c,h),this.disableMarkAnimation(),this.event.on(Zo.AFTER_DO_RENDER,this._enableAnimationHook),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(){super.onLayoutEnd(),this._viewBox.set(0,0,this.getLayoutRect().width,this.getLayoutRect().height),this._runTreemapTransform()}enableMarkAnimation(){this.getMarks().forEach(t=>{}),[this._labelMark,this._nonLeafLabelMark].forEach(t=>{t&&t.getComponent()&&t.getComponent().getProduct().enableAnimation()}),this.event.off(Zo.AFTER_DO_RENDER,this._enableAnimationHook)}disableMarkAnimation(){this.getMarks().forEach(t=>{}),[this._labelMark,this._nonLeafLabelMark].forEach(t=>{t&&t.getComponent()&&t.getComponent().getProduct().disableAnimation()})}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._nonLeafMark,this._leafMark]}getMarkData(t){return t?.datum?t.datum[t.datum.length-1]:t}}Ro.type=st.treemap,Ro.mark=p9t,Ro.builtInTheme={treemap:b9t},Ro.transformerConstructor=sat,Be(Ro,eN),Be(Ro,wT);const aat=()=>{_9t(),v9t(),ru(),Ps(),m9t(),rl(),z.registerSeries(Ro.type,Ro)},x9t=Object.assign(Object.assign({},Gz),{segment:{name:"segment",type:"arc"},track:{name:"track",type:"arc"}}),S9t=Object.assign(Object.assign({},Bi),{pin:{name:"pin",type:"path"},pinBackground:{name:"pinBackground",type:"path"},pointer:{name:"pointer",type:["path","rect"]}}),w9t=i=>({channel:{angle:{from:i.startAngle+Math.PI/2}}}),A9t={type:"fadeIn"};function k9t(i,t){return t==="fadeIn"?A9t:w9t(i)}const C9t=()=>{z.registerAnimation("gaugePointer",(i,t)=>{const e=k9t(i,t);return{appear:e,enter:e,disappear:{type:"fadeOut"}}})};class oat extends gr{constructor(){super(...arguments),this._supportStack=!1}}class M9t extends pr{enableByType(t){return t!=="dimension"}}const T9t="M-0.020059 -0.978425 C-0.018029 -0.9888053 -0.013378 -1 0 -1 C0.01342 -1 0.01812 -0.989146 0.0201 -0.978425 C0.02161 -0.9702819 0.0692 -0.459505 0.09486 -0.184807 C0.10298 -0.097849 0.1089 -0.034548 0.11047 -0.018339 C0.11698 0.04908 0.07373 0.11111 0.00002 0.11111 C-0.07369 0.11111 -0.117184 0.04991 -0.110423 -0.018339 C-0.103662 -0.086591 -0.022089 -0.9680447 -0.020059 -0.978425Z",OY="M1 0 C1 0.55228 0.55228 1 0 1 C-0.552285 1 -1 0.55228 -1 0 C-1 -0.552285 -0.552285 -1 0 -1 C0.55228 -1 1 -0.552285 1 0Z",P9t={pointer:{type:"path",width:.4,height:.4,style:{path:T9t}},pin:{width:.025,height:.025,style:{path:OY,fill:"#888"}},pinBackground:{width:.06,height:.06,style:{path:OY,fill:"#ddd"}}};class Fl extends Gm{constructor(){super(...arguments),this.type=st.gaugePointer,this.transformerConstructor=oat,this._pinMark=null,this._pointerMark=null,this._pinBackgroundMark=null}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setRadiusField(this._spec.radiusField),this._pointerType=((t=this._spec.pointer)===null||t===void 0?void 0:t.type)==="rect"?"rect":"path"}initMark(){this._pinBackgroundMark=this._createMark(Fl.mark.pinBackground),this._pointerMark=this._createMark(Object.assign(Object.assign({},Fl.mark.pointer),{type:this._pointerType}),{isSeriesMark:!0}),this._pinMark=this._createMark(Fl.mark.pin)}initMarkStyle(){this.initPinBackgroundMarkStyle(),this.initPointerMarkStyle(),this.initPinMarkStyle()}initGroups(){}initPointerMarkStyle(){const t=this._pointerMark,e=this._spec.pointer;t&&(this.setMarkStyle(t,{x:n=>{var r,s;const{x:a}=this._getPointerAnchor(n,e);return a-this._getPointerWidth()*((s=(r=e?.center)===null||r===void 0?void 0:r[0])!==null&&s!==void 0?s:0)},y:n=>{var r,s;const{y:a}=this._getPointerAnchor(n,e);return a-this._getPointerHeight(n)*((s=(r=e?.center)===null||r===void 0?void 0:r[1])!==null&&s!==void 0?s:0)},anchor:n=>{const{x:r,y:s}=this._getPointerAnchor(n,e);return[r,s]},fill:this.getColorAttribute(),zIndex:200}),this._pointerType==="path"?this.setMarkStyle(t,{scaleX:this._getPointerWidth.bind(this),scaleY:this._getPointerHeight.bind(this),angle:n=>this._getPointerAngle(n)+Math.PI/2}):this.setMarkStyle(t,{width:this._getPointerWidth.bind(this),height:this._getPointerHeight.bind(this),angle:n=>this._getPointerAngle(n)-Math.PI/2}))}initTooltip(){this._tooltipHelper=new M9t(this),this._pointerMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pointerMark)}_getPointerAnchor(t,e){var n;return(n=e.isOnCenter)===null||n===void 0||n?this.angleAxisHelper.center():this.radiusAxisHelper.coordToPoint({radius:this._innerRadius*this._computeLayoutRadius(),angle:this.angleAxisHelper.dataToPosition([t[this._angleField[0]]])})}_getPointerWidth(){return this._spec.pointer.width*this._computeLayoutRadius()}_getPointerHeight(t){var e,n;const r=this._spec.pointer,s=this._radiusField[0];return L(this.radiusAxisHelper)&&L(s)?this.radiusAxisHelper.dataToPosition([t[s]])-((e=r?.innerPadding)!==null&&e!==void 0?e:0)-((n=r?.outerPadding)!==null&&n!==void 0?n:10):r.height*this._computeLayoutRadius()}_getPointerAngle(t){const e=this.angleAxisHelper.getScale().domain(),n=rn(e),r=Rn(e),s=Ke(t[this._angleField[0]],r,n);return this.angleAxisHelper.dataToPosition([s])}_getRotatedPointerCenterOffset(t){var e,n,r,s;const a=this._spec.pointer,o=this._getPointerWidth()*((n=(e=a?.center)===null||e===void 0?void 0:e[0])!==null&&n!==void 0?n:0),l=-this._getPointerHeight(t)*((s=(r=a?.center)===null||r===void 0?void 0:r[1])!==null&&s!==void 0?s:0),u=this._getPointerAngle(t)-Math.PI/2,c=Math.cos(u),h=Math.sin(u);return{x:o*c+l*h,y:-(l*c-o*h)}}initPinBackgroundMarkStyle(){const t=this._pinBackgroundMark,e=this._spec.pinBackground;t&&this.setMarkStyle(t,{x:n=>this._getPointerAnchor(n,e).x,y:n=>this._getPointerAnchor(n,e).y,scaleX:()=>e.width*this._computeLayoutRadius(),scaleY:()=>e.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:100})}initPinMarkStyle(){const t=this._pinMark,e=this._spec.pin;t&&this.setMarkStyle(t,{x:n=>this._getPointerAnchor(n,e).x,y:n=>this._getPointerAnchor(n,e).y,scaleX:()=>e.width*this._computeLayoutRadius(),scaleY:()=>e.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:300})}getInteractionTriggers(){return this._parseInteractionConfig(this._pointerMark?[this._pointerMark]:[])}initAnimation(){var t,e,n;const r=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._pointerMark.setAnimationConfig(ye((n=z.getAnimationInKey("gaugePointer"))===null||n===void 0?void 0:n({startAngle:this._startAngle},r),Ce("pointer",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}Fl.type=st.gaugePointer,Fl.mark=S9t,Fl.builtInTheme={gaugePointer:P9t},Fl.transformerConstructor=oat;const lat=()=>{z.registerSeries(Fl.type,Fl),ST(),ru(),C9t(),Cf(),Dh()};class uat extends gr{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(t){this._addMarkLabelSpec(t,"segment")}}const E9t={outerRadius:.8,innerRadius:.6,padAngle:1.146,segment:{style:{fillOpacity:1}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}};class zu extends Gm{constructor(){super(...arguments),this.type=st.gauge,this.transformerConstructor=uat,this._segmentMark=null,this._trackMark=null,this._padAngle=0}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._padAngle=ii((t=this._spec.padAngle)!==null&&t!==void 0?t:0)}initData(){var t;super.initData(),Vt(this._option.dataSet,"spiltSegment",(e,n)=>{const r=e.slice();return r.sort((s,a)=>s[this._angleField[0]]-a[this._angleField[0]]),r.forEach((s,a)=>{s[qE]=s[this._angleField[0]],s[y1]=a>0?r[a-1][qE]:void 0}),r}),(t=this.getViewData())===null||t===void 0||t.transform({type:"spiltSegment"},!1)}initMark(){super.initMark(),this._trackMark=this._createMark(zu.mark.track,{parent:this._arcGroupMark,dataView:!1}),this._segmentMark=this._createMark(zu.mark.segment,{parent:this._arcGroupMark,isSeriesMark:!0})}initMarkStyle(){super.initMarkStyle(),this.initTrackMarkStyle(),this.initSegmentMarkStyle()}initSegmentMarkStyle(){var t;const e=this._segmentMark;e&&this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart.bind(this),endAngle:this._getAngleValueEnd.bind(this),innerRadius:()=>{var n;return this._computeLayoutRadius()*((n=this._spec.innerRadius)!==null&&n!==void 0?n:0)},outerRadius:()=>{var n,r;return this._computeLayoutRadius()*((r=(n=this._spec.radius)!==null&&n!==void 0?n:this._spec.outerRadius)!==null&&r!==void 0?r:1)},cap:(t=this._spec.roundCap)!==null&&t!==void 0&&t,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0})}generateRadiusStyle(t){if(!t)return;const e={};return t.outerRadius&&(e.outerRadius=()=>this._computeLayoutRadius()*t.outerRadius),t.innerRadius&&(e.innerRadius=()=>this._computeLayoutRadius()*t.innerRadius),e}initMarkStyleWithSpec(t,e){if(super.initMarkStyleWithSpec(t,e),t&&t.name==="segment"){const n=this.getSpec().segment;if(n)for(const r in n.state||{})this.setMarkStyle(t,this.generateRadiusStyle(n.state[r]),r,ct.User_Mark)}}initTooltip(){super.initTooltip(),this._segmentMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._segmentMark)}initTrackMarkStyle(){var t;const e=this._trackMark;e&&this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:()=>{var n;return this._computeLayoutRadius()*((n=this._spec.innerRadius)!==null&&n!==void 0?n:0)},outerRadius:()=>{var n,r;return this._computeLayoutRadius()*((r=(n=this._spec.radius)!==null&&n!==void 0?n:this._spec.outerRadius)!==null&&r!==void 0?r:1)},cap:(t=this._spec.roundCap)!==null&&t!==void 0&&t,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,zIndex:100})}_getAngleValueStartWithoutMask(t){const e=this._getAngleValueStartWithoutPadAngle(t),n=this._getAngleValueEndWithoutPadAngle(t),r=jg(e,(e+n)/2)(e+(n>e?1:-1)*Math.abs(this._padAngle/2));return this._spec.clamp?He(r,this.angleAxisHelper.getScale(0)):r}_getAngleValueEndWithoutMask(t){const e=this._getAngleValueStartWithoutPadAngle(t),n=this._getAngleValueEndWithoutPadAngle(t),r=jg(n,(e+n)/2)(n-(n>e?1:-1)*Math.abs(this._padAngle/2));return this._spec.clamp?He(r,this.angleAxisHelper.getScale(0)):r}_getAngleValueStartWithoutPadAngle(t){return L(t[y1])?this.angleAxisHelper.dataToPosition([t[y1]]):this._startAngle}_getAngleValueEndWithoutPadAngle(t){return this.angleAxisHelper.dataToPosition([t[qE]])}initAnimation(){var t,e,n;const r=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._segmentMark.setAnimationConfig(ye((n=z.getAnimationInKey("circularProgress"))===null||n===void 0?void 0:n({startAngle:this._startAngle},r),Ce("segment",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}zu.type=st.gauge,zu.mark=x9t,zu.builtInTheme={gauge:E9t},zu.transformerConstructor=uat;const cat=()=>{z.registerSeries(zu.type,zu),Oh(),Rst(),Dh()};class K0 extends ns{constructor(){super(...arguments),this.type=K0.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{fill:void 0,lineWidth:0,padding:0})}_createGraphic(t={}){return mf(t)}_transformGraphicAttributes(t,e,n){var r,s,a;const o=super._transformGraphicAttributes(t,e,n),l=(s=(r=o.shape)!==null&&r!==void 0?r:o.symbolType)!==null&&s!==void 0?s:(a=t.attribute)===null||a===void 0?void 0:a.symbolType;return N(l)?o.symbolType="rect":o.symbolType=l,o}}K0.type="cell";const R9t=()=>{z.registerMark(K0.type,K0),z.registerGraphicComponent("symbol",mf),as(),Ta(),GM()};function O9t(i){return i===!1?{}:{type:"fadeIn"}}const D9t=()=>{z.registerAnimation("heatmap",(i,t)=>Object.assign(Object.assign({},lT),{appear:O9t(t)}))};class I9t extends pr{enableByType(t){return t!=="dimension"}}const L9t=Object.assign(Object.assign({},Bi),{cell:{name:"cell",type:"cell"},cellBackground:{name:"cellBackground",type:"cell"}});class hat extends gr{_transformLabelSpec(t){this._addMarkLabelSpec(t,"cell")}}const B9t={cell:{style:{shape:"square",fillOpacity:1}},cellBackground:{visible:!1}};class zl extends _o{constructor(){super(...arguments),this.type=st.heatmap,this.transformerConstructor=hat}getFieldValue(){return this._fieldValue}setFieldValue(t){this._fieldValue=X(t)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFieldValue(this._spec.valueField)}initMark(){this._cellMark=this._createMark(zl.mark.cell,{isSeriesMark:!0},{morph:fo(this._spec,zl.mark.cell.name),morphElementKey:this.getDimensionField()[0]}),this._backgroundMark=this._createMark(zl.mark.cellBackground)}initMarkStyle(){this.initCellMarkStyle(),this.initCellBackgroundMarkStyle()}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>e[this.getMeasureField()[0]]})}initCellMarkStyle(){this.setMarkStyle(this._cellMark,{x:t=>this.dataToPositionX(t),y:t=>this.dataToPositionY(t),size:()=>[this.getCellSize(this._xAxisHelper),this.getCellSize(this._yAxisHelper)],fill:this.getColorAttribute()},"normal",ct.Series)}initCellBackgroundMarkStyle(){var t,e,n;const r=zr((n=(e=(t=this._spec.cellBackground)===null||t===void 0?void 0:t.style)===null||e===void 0?void 0:e.padding)!==null&&n!==void 0?n:0);this.setMarkStyle(this._backgroundMark,{x:s=>{const a=this.getCellSize(this._xAxisHelper);return this.dataToPositionX(s)-a/2+r[3]},y:s=>{const a=this.getCellSize(this._yAxisHelper);return this.dataToPositionY(s)-a/2+r[0]},width:()=>this.getCellSize(this._xAxisHelper)-r[1]-r[3],height:()=>this.getCellSize(this._yAxisHelper)-r[0]-r[2]},"normal",ct.Series)}getColorAttribute(){var t;return{scale:(t=this._option.globalScale.getScale("color"))!==null&&t!==void 0?t:this._getDefaultColorScale(),field:this.getFieldValue[0]}}getInteractionTriggers(){return this._parseInteractionConfig(this._cellMark?[this._cellMark]:[])}initAnimation(){var t,e,n;const r=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset,s=Rh(this);this._cellMark.setAnimationConfig(ye((n=z.getAnimationInKey("heatmap"))===null||n===void 0?void 0:n(r),Ce("cell",this._spec,this._markAttributeContext),s))}getCellSize(t){var e,n;return(n=(e=t.getBandwidth)===null||e===void 0?void 0:e.call(t,0))!==null&&n!==void 0?n:6}initTooltip(){this._tooltipHelper=new I9t(this),this._cellMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._cellMark)}getDefaultShapeType(){return"square"}getDimensionField(){return[].concat(this.fieldX,this.fieldY)}getMeasureField(){return this.getFieldValue()}getActiveMarks(){return[this._cellMark]}}zl.type=st.heatmap,zl.mark=L9t,zl.builtInTheme={heatmap:B9t},zl.transformerConstructor=hat;const dat=()=>{Ps(),R9t(),D9t(),Mr(),mr(),z.registerSeries(zl.type,zl)},F9t=Object.assign(Object.assign({},Bi),{nodePoint:{name:"nodePoint",type:"symbol"},ripplePoint:{name:"ripplePoint",type:"ripple"},centerPoint:{name:"centerPoint",type:"symbol"},centerLabel:{name:"centerLabel",type:"text"}}),fat=`${zt}_CORRELATION_X`,pat=`${zt}_CORRELATION_Y`,gat=`${zt}_CORRELATION_SIZE`,z9t=(i,t)=>{var e,n,r,s,a,o,l,u,c,h,d,f,p,g,m;if(!i||!t?.view||!J(i))return i;const _=t.view();if(_.x1-_.x0==0||_.y1-_.y0==0||_.x1-_.x0==-1/0||_.x1-_.x0==1/0||_.y1-_.y0==-1/0||_.y1-_.y0==1/0)return i;const v=ii((e=t.startAngle)!==null&&e!==void 0?e:-90),y=ii((n=t.endAngle)!==null&&n!==void 0?n:270),b=Math.max((_.x1-_.x0)/2,(_.y1-_.y0)/2),x=Mo((r=t.innerRadius)!==null&&r!==void 0?r:0,b),S=Mo(t.outerRadius,b),w=[yt((s=t.center)===null||s===void 0?void 0:s[0])?t.center[0]:_.x0+Mo((o=(a=t.center)===null||a===void 0?void 0:a[0])!==null&&o!==void 0?o:"50%",_.x1-_.x0),yt((l=t.center)===null||l===void 0?void 0:l[1])?t.center[1]:_.y0+Mo((c=(u=t.center)===null||u===void 0?void 0:u[1])!==null&&c!==void 0?c:"50%",_.y1-_.y0)],A=Hg(t.field),k=i.map(A),[C,M]=oW(k),R=C===M?H=>(x+S)/2:H=>x+(S-x)*(H-C)/(M-C),P=N(t.radiusField)?A:Hg(t.radiusField),O=(d=(h=t?.radiusRange)===null||h===void 0?void 0:h[1])!==null&&d!==void 0?d:5;let T=H=>O;if(P){const[H,U]=P!==A?oW(i.map(P)):[C,M],K=(p=(f=t.radiusRange)===null||f===void 0?void 0:f[0])!==null&&p!==void 0?p:5,q=(m=(g=t.radiusRange)===null||g===void 0?void 0:g[1])!==null&&m!==void 0?m:5;H!==U&&(T=Z=>K+(q-K)*(P(Z)-H)/(U-H))}const D=Math.min(v,y),B=Math.max(v,y),I=N9t(D,B,i.length),F=[],j=(B-D)/60;return i.forEach((H,U)=>{const K=R(k[U]),q=T(H);let Z,at,$=I[U];for(let ft=0;ft<60&&(Z=w[0]+K*Math.cos($),at=w[1]+K*Math.sin($),j9t({x:Z,y:at,size:q},F)||Z-q<_.x0||Z+q>_.x1||at-q<_.y0||at+q>_.y1);ft++)ft<59&&($+=j,$>B?$=D:$<D&&($=B));F.push(Object.assign({[fat]:Z,[pat]:at,[gat]:q},H))}),F},N9t=(i,t,e)=>{let n=0,r=Math.max(Math.ceil(2*(t-i)/Math.PI),2),s=(t-i)/r,a=0,o=1,l=0,u=0;const c=[];let h=i;for(;l<e;)u<r&&(c.push(h+(u%2?Math.floor(u/2)+Math.floor(r/2):u/2)*s*o),u++),l++,u===r&&(u=0,a+=1,o*=-1,n===0?n=s/2:n/=2,h=o===-1?t-n:i+n,a>=2&&(s/=2,r*=2));return c},j9t=(i,t)=>!(!t||!t.length)&&t.some(e=>Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)<Math.pow(i.size+e.size,2)),H9t=(i,t)=>{if(!i||!J(i))return[];const{keyword:e,categoryField:n}=t,r=i[0].latestData[0];return{[n]:e,[hr]:r?.[hr],[gs]:r?.[gs]}};class q0 extends kT{constructor(){super(...arguments),this.type=q0.type,this._subMarks={ripple0:{type:"symbol",defaultAttributes:{fillOpacity:.75}},ripple1:{type:"symbol",defaultAttributes:{fillOpacity:.5}},ripple2:{type:"symbol",defaultAttributes:{fillOpacity:.25}}},this._positionChannels=["ripple","size"],this._positionEncoder=(t,e,n)=>{const{ripple:r=n.attribute.ripple,size:s=n.attribute.size}=t,a=Ke(r,0,1),o=.5*s;return{ripple0:{size:s+o*a,fillOpacity:.75-.25*a},ripple1:{size:s+o*(1+a),fillOpacity:.5-.25*a},ripple2:{size:s+o*(2+a),fillOpacity:.25-.25*a}}}}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,ripple:0})}}q0.type="ripple";const mat=()=>{CT(),Ta(),z.registerMark(q0.type,q0),z.registerGraphicComponent("symbol",i=>mf(i))},V9t=(i,t)=>t==="fadeIn"?{type:"fadeIn"}:{type:"scaleIn"},W9t=()=>{z.registerAnimation("correlation",(i,t)=>Object.assign({appear:V9t(0,t)},Sz))};class _at extends gr{_transformLabelSpec(t){this._addMarkLabelSpec(t,"nodePoint"),this._addMarkLabelSpec(t,"centerPoint","centerLabel")}}const $9t={centerLabel:{visible:!0,position:"center",style:{fill:"#fff",text:""}},label:{visible:!0,position:"bottom",style:{fill:"#000"}}};class Nl extends ex{constructor(){super(...arguments),this.type=st.correlation,this.transformerConstructor=_at,this._viewBox=new ir}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}getSeriesField(){return this._seriesField}setSeriesField(t){L(t)&&(this._seriesField=t)}getSizeField(){return this._sizeField}setSizeField(t){L(t)&&(this._sizeField=t)}getSizeRange(){return this._sizeRange}setSizeRange(t){L(t)&&(this._sizeRange=t)}setAttrFromSpec(){super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(this._spec.seriesField),this.setSizeField(this._spec.sizeField),this.setSizeRange(this._spec.sizeRange)}initData(){var t,e,n;if(super.initData(),!this._data)return;Vt(this._dataSet,"correlation",z9t);const r=new lh;Ul(r,"dataview",uM),Vt(r,"correlationCenter",H9t);const s=new je(r,{name:`${this.type}_${this.id}_center`});s.parse([this.getViewData()],{type:"dataview"}),s.transform({type:"correlationCenter",options:{keyword:(n=(e=(t=this._spec.centerLabel)===null||t===void 0?void 0:t.style)===null||e===void 0?void 0:e.text)!==null&&n!==void 0?n:"",categoryField:this._spec.categoryField}}),this._centerSeriesData=new Cr(this._option,s)}compileData(){var t;super.compileData(),(t=this._centerSeriesData)===null||t===void 0||t.compile()}_statisticViewData(){super._statisticViewData(),this._data.getDataView().transform({type:"correlation",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),field:this._spec.valueField,radiusRange:this._spec.sizeRange,radiusField:this._spec.sizeField,center:[this._spec.centerX,this._spec.centerY],innerRadius:this._spec.innerRadius,outerRadius:this._spec.outerRadius,startAngle:this._spec.startAngle,endAngle:this._spec.endAngle}})}initMark(){const t=this._createMark(Nl.mark.nodePoint,{groupKey:this._seriesField,isSeriesMark:!0,key:hr});t&&(t.setMarkConfig({zIndex:ti.Node}),this._nodePointMark=t);const e=this._createMark(Nl.mark.ripplePoint,{key:hr,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId()});e&&(this._ripplePointMark=e);const n=this._createMark(Nl.mark.centerPoint,{key:hr,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId()});n&&(n.setMarkConfig({zIndex:ti.Node}),this._centerPointMark=n)}initMarkStyle(){this._initNodePointMarkStyle(),this._initRipplePointMarkStyle(),this._initCenterPointMarkStyle()}_initNodePointMarkStyle(){var t,e,n,r;const s=this._nodePointMark;if(!s)return;const a=(e=(t=this._spec.nodePoint)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{};this.setMarkStyle(s,{x:o=>o[fat],y:o=>o[pat],size:o=>o[gat],fill:(n=a.fill)!==null&&n!==void 0?n:this.getColorAttribute(),fillOpacity:(r=a.fillOpacity)!==null&&r!==void 0?r:1,lineWidth:0},bt.STATE_NORMAL,ct.Series)}_initRipplePointMarkStyle(){var t,e,n,r,s;const a=this._ripplePointMark;if(!a)return;const o=(e=(t=this._spec.ripplePoint)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{};this.setMarkStyle(a,{x:()=>{var l;return(l=this._spec.centerX)!==null&&l!==void 0?l:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var l;return(l=this._spec.centerY)!==null&&l!==void 0?l:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:(n=o.fill)!==null&&n!==void 0?n:this.getColorAttribute(),opacity:(r=o.fillOpacity)!==null&&r!==void 0?r:.2,ripple:(s=o.ripple)!==null&&s!==void 0?s:0},bt.STATE_NORMAL,ct.Series)}_initCenterPointMarkStyle(){var t,e,n,r,s,a;const o=this._centerPointMark;o&&this.setMarkStyle(o,{x:()=>{var l;return(l=this._spec.centerX)!==null&&l!==void 0?l:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var l;return(l=this._spec.centerY)!==null&&l!==void 0?l:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>.2*Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:(n=(e=(t=this._spec.centerPoint)===null||t===void 0?void 0:t.style)===null||e===void 0?void 0:e.fill)!==null&&n!==void 0?n:this.getColorAttribute(),fillOpacity:(a=(s=(r=this._spec.centerPoint)===null||r===void 0?void 0:r.style)===null||s===void 0?void 0:s.fillOpacity)!==null&&a!==void 0?a:1},bt.STATE_NORMAL,ct.Series)}initTooltip(){super.initTooltip(),this._nodePointMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodePointMark)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:e=>e[this._categoryField],z:this.dataToPositionZ.bind(this)},bt.STATE_NORMAL,ct.Series)}initAnimation(){var t,e;const n=(t=this._spec.animationAppear)===null||t===void 0?void 0:t.preset;this._nodePointMark.setAnimationConfig(ye((e=z.getAnimationInKey("correlation"))===null||e===void 0?void 0:e({},n),Ce("nodePoint",this._spec,this._markAttributeContext)))}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}getActiveMarks(){return[this._nodePointMark,this._centerPointMark]}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(){super.onLayoutEnd(),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this._rawData.reRunAllTransform(),this.getViewData().reRunAllTransform()}}Nl.type=st.correlation,Nl.mark=F9t,Nl.builtInTheme={correlation:$9t},Nl.transformerConstructor=_at;const U9t=()=>{cc(),mat(),z.registerSeries(Nl.type,Nl),W9t()},vat={duration:2e3,loop:!0,channel:{wave:{from:0,to:1}}},yat=i=>({duration:2e3,channel:{wave:{from:0,to:1},height:i.height,dy:i.dy}}),G9t=yat,Y9t=i=>({duration:2e3,channel:{dy:i.dy}}),X9t=i=>({duration:2e3,channel:{dy:i.dy}});function lR(i,t){switch(t){case"wave":default:return vat;case"grow":return yat(i);case"waveGrow":return G9t(i)}}function uR(i,t){switch(t){case"wave":default:return vat;case"grow":return Y9t(i);case"waveGrow":return X9t(i)}}const K9t=()=>{z.registerAnimation("liquid",(i,t)=>({appear:lR(i,t),enter:lR(i,t),exit:lR(i,t)})),z.registerAnimation("liquidGroup",(i,t)=>({appear:uR(i,t),enter:uR(i,t),exit:uR(i,t)}))},q9t=Object.assign(Object.assign({},Bi),{liquidGroup:{name:"liquidGroup",type:"group"},liquid:{name:"liquid",type:"liquid"},liquidBackground:{name:"liquidBackground",type:"group"},liquidOutline:{name:"liquidOutline",type:"group"}});class Z0 extends kT{constructor(){super(...arguments),this.type=Z0.type,this._subMarks={wave0:{type:"area",defaultAttributes:{curveType:"monotoneX",fillOpacity:1}},wave1:{type:"area",defaultAttributes:{curveType:"monotoneX",fillOpacity:.66}},wave2:{type:"area",defaultAttributes:{curveType:"monotoneX",fillOpacity:.33}}},this._positionChannels=["wave","y","height"],this._positionEncoder=(t,e,n)=>{const{wave:r=n.attribute.wave,y:s=n.attribute.y,height:a=n.attribute.height}=t,o=[],l=[],u=[];for(let c=0;c<21;c++){const h=50*c-500,d=s+(c%2==0?20:0),f=s+a;o.push({x:h+100*r,y:d,y1:f}),l.push({x:h+200*r-40,y:d,y1:f}),u.push({x:h+300*r-20,y:d,y1:f})}return{wave0:{x:0,y:0,points:o},wave1:{x:0,y:0,points:l},wave2:{x:0,y:0,points:u}}}}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{wave:0})}}Z0.type="liquid";const Z9t=()=>{CT(),jF(),z.registerMark(Z0.type,Z0),z.registerGraphicComponent("area",i=>OF(i))},Q9t=(i,t)=>i==="drop"?J9t(0,0,t):i;function J9t(i,t,e){const n=4*e/3,r=Math.max(n,2*e),s=n/2,a=i,o=s+t-r/2,l=Math.asin(s/(.85*(r-s))),u=Math.sin(l)*s,c=Math.cos(l)*s,h=a-c,d=o+u,f=i,p=o+s/Math.sin(l);return`
      M ${h} ${d}
      A ${s} ${s} 0 1 1 ${h+2*c} ${d}
      Q ${f} ${p} ${i} ${t+r/2}
      Q ${f} ${p} ${h} ${d}
      Z 
    `}class tXt extends pr{constructor(){super(...arguments),this.markTooltipKeyCallback=t=>this.series.getValueField(),this.markTooltipValueCallback=t=>t[this.series.getValueField()],this.shapeStrokeCallback=t=>this.series.getMarkInName("liquid").getAttribute("fill",t)}}const eXt={outlinePadding:10,liquidBackground:{style:{lineWidth:0,fillOpacity:.2}},liquidOutline:{style:{lineWidth:2}}};class Wo extends tc{constructor(){super(...arguments),this.type=st.liquid,this.transformerConstructor=Sf,this._liquidBackgroundMark=null,this._liquidOutlineMark=null,this._getLiquidPosY=()=>{let t=0;const{height:e,startY:n}=this._getLiquidBackPosAndSize();return t=this._reverse?e*this._heightRatio:e*(1-this._heightRatio),t+n},this._getLiquidHeight=()=>{const{height:t}=this._getLiquidBackPosAndSize();return t*this._heightRatio},this._getLiquidBackPosAndSize=(t=!1)=>{var e,n;let{top:r=0,bottom:s=0,left:a=0,right:o=0}=this._marginSpec,{top:l=0,bottom:u=0,left:c=0,right:h=0}=t?{}:this._paddingSpec;this._maskShape==="triangle"&&(s/=Math.sqrt(3),r=r/Math.sqrt(3)*2,u/=Math.sqrt(3),l=l/Math.sqrt(3)*2);const{width:d,height:f}=(n=(e=this._region)===null||e===void 0?void 0:e.getLayoutRect())!==null&&n!==void 0?n:{width:0,height:0},p=d/2+(a+c-(o+h))/2,g=f/2+(r+l-(s+u))/2;let m=d-(a+o+c+h),_=f-(r+s+l+u);const v=Math.min(m,_);return this._maskShape!=="rect"&&(m=v,_=v),{x:p,y:g,size:v,width:m,height:_,startX:p-m/2,startY:g-_/2,endX:p+m/2,endY:g+_/2}},this._getLiquidBackPath=(t=!1)=>{var e;let n;if(this._maskShape==="rect"){const{x:r,y:s,width:a,height:o}=this._getLiquidBackPosAndSize(t);n=_f({x:r-a/2,y:s-o/2,width:a,height:o,fill:!0})}else{const{x:r,y:s,size:a}=this._getLiquidBackPosAndSize(t);n=mf({x:r,y:s,size:a,symbolType:Q9t((e=this._spec.maskShape)!==null&&e!==void 0?e:"circle",a),fill:!0})}return[n]}}setValueField(t){L(t)&&(this._valueField=t)}getValueField(){return this._valueField}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this._marginSpec=Yl(this._spec.outlineMargin),this._paddingSpec=Yl(this._spec.outlinePadding),this.setValueField(this._spec.valueField),this._reverse=(t=this._spec.reverse)!==null&&t!==void 0&&t,this._maskShape=(e=this._spec.maskShape)!==null&&e!==void 0?e:"circle"}viewDataUpdate(t){super.viewDataUpdate(t),this._heightRatio=Nn(...this._data.getLatestData().map(e=>e[this._valueField]))}initMark(){this._initLiquidOutlineMark(),this._initLiquidBackgroundMark(),this._initLiquidMark()}initMarkStyle(){this._initLiquidOutlineMarkStyle(),this._initLiquidBackgroundMarkStyle(),this._initLiquidMarkStyle()}_initLiquidOutlineMark(){return this._liquidOutlineMark=this._createMark(Wo.mark.liquidOutline,{isSeriesMark:!0,skipBeforeLayouted:!1}),this._liquidOutlineMark}_initLiquidBackgroundMark(){return this._liquidBackgroundMark=this._createMark(Wo.mark.liquidBackground,{isSeriesMark:!0,skipBeforeLayouted:!1}),this._liquidBackgroundMark}_initLiquidMark(){return this._liquidGroupMark=this._createMark(Wo.mark.liquidGroup,{parent:this._liquidBackgroundMark,isSeriesMark:!0,skipBeforeLayouted:!1}),this._liquidMark=this._createMark(Wo.mark.liquid,{parent:this._liquidGroupMark,isSeriesMark:!0,skipBeforeLayouted:!1}),this._liquidMark}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getLiquidBackPosAndSize=this._getLiquidBackPosAndSize,this._markAttributeContext.getLiquidPosY=this._getLiquidPosY,this._markAttributeContext.getLiquidHeight=this._getLiquidHeight}_initLiquidOutlineMarkStyle(){const t=this._liquidOutlineMark;t.created(),this.setMarkStyle(t,{stroke:this.getColorAttribute(),width:()=>this._region.getLayoutRect().width,height:()=>this._region.getLayoutRect().height,path:()=>this._getLiquidBackPath(!0)},"normal",ct.Series),this._liquidOutlineMark.setMarkConfig({interactive:!1,zIndex:this.layoutZIndex})}_initLiquidBackgroundMarkStyle(){const t=this._liquidBackgroundMark;t.created(),this.setMarkStyle(t,{width:()=>this._region.getLayoutRect().width,height:()=>this._region.getLayoutRect().height,path:()=>this._getLiquidBackPath()},"normal",ct.Series),this._liquidBackgroundMark.setMarkConfig({interactive:!1,zIndex:this.layoutZIndex,clip:!0})}_initLiquidMarkStyle(){const t=this._liquidMark,e=this._liquidGroupMark;e&&this.setMarkStyle(e,{x:()=>this._region.getLayoutStartPoint().x+this._region.getLayoutRect().width/2,angle:this._reverse?-Math.PI:0,y:0,dy:this._getLiquidPosY}),t&&this.setMarkStyle(t,{y:0,dy:0,height:this._getLiquidHeight,fill:this.getColorAttribute(),wave:0},"normal",ct.Series)}initTooltip(){this._tooltipHelper=new tXt(this),this._liquidMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._liquidMark)}getInteractionTriggers(){return this._parseInteractionConfig(this._liquidMark?[this._liquidMark]:[])}initAnimation(){var t,e,n,r;const s={height:{from:0,to:()=>this._getLiquidHeight()},dy:{from:()=>{let o=0;const{height:l,startY:u}=this._getLiquidBackPosAndSize();return o=this._reverse?0:l,o+u}}},a=(e=(t=this._spec)===null||t===void 0?void 0:t.animationAppear)===null||e===void 0?void 0:e.preset;this._liquidMark.setAnimationConfig(ye((n=z.getAnimationInKey("liquid"))===null||n===void 0?void 0:n(s,a),Ce("liquid",this._spec,this._markAttributeContext))),this._liquidGroupMark.setAnimationConfig(ye((r=z.getAnimationInKey("liquidGroup"))===null||r===void 0?void 0:r(s,a),Ce("liquidGroup",this._spec,this._markAttributeContext)))}initEvent(){super.initEvent(),this._spec.indicatorSmartInvert&&this._option.getChart().getComponentsByKey("indicator")&&this.event.on(Tt.renderFinished,()=>{this._option.getChart().getComponentsByKey("indicator").forEach(t=>{var e,n,r;const s=(e=this._liquidMark.getGraphics()[0].getSubGraphic())===null||e===void 0?void 0:e[0];let{y1:a,y2:o}=s.globalAABBBounds;a+=this._region.getLayoutStartPoint().y,o+=this._region.getLayoutStartPoint().y,(r=(n=t?.getIndicatorComponent())===null||n===void 0?void 0:n.getChildren()[0])===null||r===void 0||r.getChildren().forEach(l=>{const{y1:u,y2:c}=l.globalAABBBounds;if(a<u&&o>c){const h=l.attribute.fill,d=s.attribute.fill,f=VI(h,d);l.setAttribute("fill",f)}})})})}dataToPosition(t){return null}dataToPositionX(t){return null}dataToPositionY(t){return null}valueToPosition(t,e){return null}getStatisticFields(){return[]}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}getActiveMarks(){return[this._liquidMark]}}Wo.type=st.liquid,Wo.mark=q9t,Wo.builtInTheme={liquid:eXt},Wo.transformerConstructor=Sf;const bat=()=>{Z9t(),bz(),K9t(),z.registerSeries(Wo.type,Wo)},Cc=i=>X(i).join(",");class iXt extends pr{constructor(){super(...arguments),this.dimensionTooltipTitleCallback=t=>Cc(t?.[this.series.getDimensionField()[0]]),this.markTooltipKeyCallback=t=>Cc(t?.[this.series.getDimensionField()[0]])}}const nXt=Object.assign(Object.assign({},Bi),{circle:{name:"circle",type:"arc"},overlap:{name:"overlap",type:"path"},overlapLabel:{name:"overlapLabel",type:"text"}}),rXt=i=>{switch(i){case"fadeIn":default:return{type:"fadeIn"};case"growIn":return{type:"growRadiusIn"};case"scaleIn":return{type:"scaleIn"}}},sXt=i=>{switch(i){case"fadeIn":default:return{type:"fadeIn"};case"scaleIn":return{type:"scaleIn"}}};class aXt extends bi{onBind(){var t,e;this.fromCircles={},(t=_Y(this.target.attribute.arcs))===null||t===void 0||t.forEach(n=>{this.fromCircles[n.setId]=n}),this.toCircles={},(e=_Y(this.target.getFinalAttribute().arcs))===null||e===void 0||e.forEach(n=>{this.toCircles[n.setId]=n})}onUpdate(t,e,n){const r=[];Object.keys(this.fromCircles).forEach(a=>{const o=this.fromCircles[a],l=this.toCircles[a];o&&l&&r.push({radius:o.radius+(l.radius-o.radius)*e,x:o.x+(l.x-o.x)*e,y:o.y+(l.y-o.y)*e,setId:a})});const s=jst(r);this.target.setAttributes({arcs:s,path:Hst(s)})}}const oXt=()=>{z.registerAnimation("vennCircle",(i,t)=>({appear:rXt(t),enter:{type:"growRadiusIn"},exit:{type:"growRadiusOut"},disappear:{type:"growRadiusOut"}})),z.registerAnimation("vennOverlap",(i,t)=>({appear:sXt(t),update:{custom:aXt},enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}}))};class xat extends gr{_transformLabelSpec(t){this._addMarkLabelSpec(t,"circle"),this._addMarkLabelSpec(t,"overlap","overlapLabel","initOverlapLabelMarkStyle")}}const lXt=(i,t)=>{const e=t.getViewBox();return e&&i?.length?T6t(Object.assign({setField:t.setField,valueField:t.valueField},e),i):[]},uXt={circle:{style:{opacity:.8},state:{hover:{opacity:1}}},overlap:{style:{opacity:.8},state:{hover:{opacity:1,stroke:"white",lineWidth:2}}},label:{visible:!0,style:{fill:"white",textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"}}},overlapLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}};class Nu extends tc{constructor(){super(...arguments),this.type=st.venn,this.transformerConstructor=xat,this._viewBox=new ir}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}setAttrFromSpec(){var t,e,n;super.setAttrFromSpec(),this.setCategoryField((t=this._spec.categoryField)!==null&&t!==void 0?t:"sets"),this.setValueField((e=this._spec.valueField)!==null&&e!==void 0?e:"size"),this.setSeriesField((n=this._spec.seriesField)!==null&&n!==void 0?n:ys)}initData(){var t;super.initData(),Vt(this._dataSet,"venn",lXt),(t=this._data.getDataView())===null||t===void 0||t.transform({type:"venn",options:{getViewBox:()=>this._viewBox.empty()?null:{x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2},setField:this._categoryField,valueField:this._valueField}})}compile(){super.compile(),this._runVennTransform()}_runVennTransform(t=!1){this._data.getDataView().reRunAllTransform(),t&&this.getCompiler().renderNextTick()}initMark(){const t=this._createMark(Nu.mark.circle,{isSeriesMark:!0});t&&(t.setTransform([{type:"vennMark",datumType:"circle"}]),this._circleMark=t);const e=this._createMark(Nu.mark.overlap,{isSeriesMark:!0});e&&(e.setTransform([{type:"vennMark",datumType:"overlap"}]),this._overlapMark=e)}initMarkStyle(){this._initCircleMarkStyle(),this._initOverlapMarkStyle()}_initCircleMarkStyle(){this._circleMark&&this.setMarkStyle(this._circleMark,{x:t=>t.x,y:t=>t.y,innerRadius:0,outerRadius:t=>t.radius,startAngle:0,endAngle:2*Math.PI,fill:this.getColorAttribute(),stroke:this.getColorAttribute()},bt.STATE_NORMAL,ct.Series)}_initOverlapMarkStyle(){this._overlapMark&&(this.setMarkStyle(this._overlapMark,{x:t=>t.x,y:t=>t.y,path:t=>t.path,arcs:t=>t.arcs,fill:this.getColorAttribute(),stroke:this.getColorAttribute(),zIndex:t=>100*t.sets.length},bt.STATE_NORMAL,ct.Series),this.setMarkStyle(this._overlapMark,{zIndex:t=>100*t.sets.length+1},bt.STATE_HOVER,ct.Series))}initLabelMarkStyle(t){t&&(this._labelMark=t,t.setRule("venn"),this.setMarkStyle(t,{x:e=>e.labelX,y:e=>e.labelY,text:e=>Cc(e.sets),maxLineWidth:e=>{const{x:n,radius:r,labelX:s}=e,a=n-r,o=n+r;return Math.min(s-a,o-s)}},bt.STATE_NORMAL,ct.Series))}initOverlapLabelMarkStyle(t){t&&(this._labelMark=t,t.setRule("venn"),this.setMarkStyle(t,{x:e=>e.labelX,y:e=>e.labelY,text:e=>Cc(e.sets)},bt.STATE_NORMAL,ct.Series))}initTooltip(){this._tooltipHelper=new iXt(this),this._circleMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._circleMark),this._overlapMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._overlapMark)}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(){super.onLayoutEnd(),this._viewBox.set(0,0,this.getLayoutRect().width,this.getLayoutRect().height),this._runVennTransform()}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._circleMark,this._overlapMark]}getStatisticFields(){const t=[];return t.push({key:this._categoryField,operations:["values"]}),t.push({key:this._valueField,operations:["max","min"]}),t}getGroupFields(){return null}dataToPosition(t,e){return{x:t.x,y:t.y}}dataToPositionX(t){return t.x}dataToPositionY(t){return t.y}valueToPosition(t,e){throw new Error("Method not implemented.")}getStackGroupFields(){return[]}getStackValueField(){return null}_getSeriesInfo(t,e){const n=this.getDefaultShapeType();return e.map(r=>({key:Cc(r),originalKey:r,style:this.getSeriesStyle({[t]:r}),shapeType:n}))}getSeriesFieldValue(t,e){const n=super.getSeriesFieldValue(t,e);return Cc(n)}legendSelectedFilter(t,e){if(t.type===lt.discreteLegend){const n=t.getLegendDefaultData(!0);if(e.length===0&&n.length)return[];if(e.length===n.length)return e;const r={};e.forEach(o=>{r[o]=!0});const s=n.filter(o=>!r[Cc(o)]),a=n.filter(o=>!s.includes(o)&&s.some(l=>X(l).every(u=>o.includes(u))));e=e.slice(),a.forEach(o=>{e.splice(e.indexOf(Cc(o)),1)})}return e}initAnimation(){this.getMarksInType("arc").forEach(t=>{var e;t.setAnimationConfig(ye((e=z.getAnimationInKey("vennCircle"))===null||e===void 0?void 0:e(),Ce(t.name,this._spec,this._markAttributeContext)))}),this.getMarksInType("path").forEach(t=>{var e;t.setAnimationConfig(ye((e=z.getAnimationInKey("vennOverlap"))===null||e===void 0?void 0:e(),Ce(t.name,this._spec,this._markAttributeContext)))})}}Nu.type=st.venn,Nu.mark=nXt,Nu.builtInTheme={venn:uXt},Nu.transformerConstructor=xat;const Sat=()=>{Oh(),ST(),oXt(),rl(),z.registerGrammarTransform("vennMark",{transform:P6t}),z.registerSeries(Nu.type,Nu)},cXt={label:{visible:!1,position:"center",style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},bar:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}}};class Ov extends ga{constructor(){super(...arguments),this.type=st.mosaic,this.transformerConstructor=kf}get bandWidthField(){return this._bandWidthField}getStack(){return!0}getPercent(){return this._spec.percent}getGroupFields(){return this.direction==="vertical"?this._specXField:this._specYField}setAttrFromSpec(){super.setAttrFromSpec();const t=this.getPercent();this.direction==="horizontal"?(t&&(this.setFieldX(gk),this.setFieldX2(pk)),this.setFieldY(_k),this.setFieldY2(mk)):(t&&(this.setFieldY(gk),this.setFieldY2(pk)),this.setFieldX(_k),this.setFieldX2(mk)),this._spec.bandWidthField&&(this._bandWidthField=this._spec.bandWidthField)}parseLabelStyle(t,e){if(e?.filterByGroup&&N(t.dataFilter)){const n=this.getGroupFields(),{field:r,type:s="max",filter:a}=e.filterByGroup;delete t.filterField;const o=n.indexOf(r);if(o<0)return;const l=o%2?s==="min"?this.direction==="horizontal"?this._fieldY2:this._fieldX2:this.direction==="horizontal"?this._fieldY:this._fieldX:s==="min"?this.direction==="horizontal"?this._fieldX2:this._fieldY2:this.direction==="horizontal"?this._fieldX:this._fieldY,u=s==="min"?(c,h)=>{var d,f;return((d=c.data)===null||d===void 0?void 0:d[l])<((f=h.data)===null||f===void 0?void 0:f[l])}:(c,h)=>{var d,f;return((d=c.data)===null||d===void 0?void 0:d[l])>((f=h.data)===null||f===void 0?void 0:f[l])};t.dataFilter=c=>{const h={};return c.forEach(d=>{const f=d.data,p=f?.[r];N(p)||a&&!a(d)||h[p]&&!u(d,h[p])||(h[p]=d)}),c.filter(d=>{var f;const p=(f=d.data)===null||f===void 0?void 0:f[r];return h[p]&&h[p]===d})}}return t}}Ov.type=st.mosaic,Ov.builtInTheme={mosaic:cXt},Ov.transformerConstructor=kf;const wat=()=>{ru(),Ps(),rl(),mr(),z.registerSeries(Ov.type,Ov)};class Aat extends Ms{_isValidSeries(t){return t===st.map}_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["type","nameField","valueField","map","nameProperty","centroidProperty","nameMap","area","defaultFillColor","showDefaultName"])}transformSpec(t){super.transformSpec(t),t.region.forEach(e=>{e.coordinate="geo"}),super.transformSeriesSpec(t)}}let Dv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Aat,this.type="map",this.seriesType=st.map}};Dv.type="map",Dv.seriesType=st.map,Dv.transformerConstructor=Aat;const nN=()=>{si(),qrt(),z.registerChart(Dv.type,Dv)};class rN extends Ms{_isValidSeries(t){return!this.seriesType||t===this.seriesType}getIndicatorSpec(t){var e,n,r;const s=X(t.indicator),a=(e=t.innerRadius)!==null&&e!==void 0?e:(r=(n=t.series)===null||n===void 0?void 0:n[0])===null||r===void 0?void 0:r.innerRadius;return L(a)&&s.forEach(o=>{N(o.limitRatio)&&(o.limitRatio=a)}),s}_getDefaultSeriesSpec(t,e){return super._getDefaultSeriesSpec(t,["radius","outerRadius","innerRadius","startAngle","endAngle","sortDataByAxis"],e)}transformSpec(t){super.transformSpec(t),J(t.dataZoom)&&t.dataZoom.length>0&&t.dataZoom.forEach(e=>{e.filterMode==="axis"&&(e.filterMode="filter")}),this.transformSeriesSpec(t),L(t.indicator)&&(t.indicator=this.getIndicatorSpec(t))}}class kat extends rN{needAxes(){return!1}_getDefaultSeriesSpec(t){const e=super._getDefaultSeriesSpec(t,["startAngle","endAngle","centerX","centerY"]);return e.categoryField=t.categoryField||t.radiusField,e.valueField=t.valueField||t.angleField,e}_transformProgressAxisSpec(t,e,n,r,s){var a,o;t.axes||(t.axes=[]);let l=((a=t.axes)!==null&&a!==void 0?a:[]).find(h=>h.orient==="radius"),u=((o=t.axes)!==null&&o!==void 0?o:[]).find(h=>h.orient==="angle");u||(u=e,t.axes.push(u)),l||(l=n,t.axes.push(l)),N(u.type)&&(u.type="linear"),N(l.type)&&(l.type="band");const c=B0(u,{min:0,max:1});N(u.min)&&(u.min=c.min),N(u.max)&&(u.max=c.max),r&&Object.assign(u,Wt({},r,u)),s&&Object.assign(l,Wt({},s,l))}}class Cat extends rN{needAxes(){return!0}_getDefaultSeriesSpec(t){const e=super._getDefaultSeriesSpec(t);return e.categoryField=t.categoryField||t.angleField,e.valueField=t.valueField||t.radiusField,e}transformSpec(t){var e;if(super.transformSpec(t),this.needAxes()){t.axes||(t.axes=[]);const n={radius:!1,angle:!1};((e=t.axes)!==null&&e!==void 0?e:[]).forEach(r=>{const{orient:s}=r;s==="radius"&&(n.radius=!0),s==="angle"&&(n.angle=!0)}),n.angle||t.axes.push({orient:"angle"}),n.radius||t.axes.push({orient:"radius"})}}}class nx extends rN{needAxes(){return!1}_getDefaultSeriesSpec(t){var e;const n=super._getDefaultSeriesSpec(t,["center","centerOffset","cornerRadius","padAngle","minAngle","emptyPlaceholder","showAllZero","supportNegative","useSequentialAnimation","layoutRadius"]);return n.categoryField=t.categoryField||t.seriesField,n.valueField=t.valueField||t.angleField,n.emptyCircle=(e=t.emptyPlaceholder)===null||e===void 0?void 0:e.emptyCircle,n}}class sN extends ki{constructor(){super(...arguments),this.transformerConstructor=nx}}sN.transformerConstructor=nx;let Iv=class extends sN{constructor(){super(...arguments),this.transformerConstructor=nx,this.type="pie",this.seriesType=st.pie}};Iv.type="pie",Iv.seriesType=st.pie,Iv.transformerConstructor=nx;const aN=()=>{si(),Uz(),z.registerChart(Iv.type,Iv)};class Mat extends Cat{_getDefaultSeriesSpec(t){var e,n,r;const s=super._getDefaultSeriesSpec(t);return s.radius=(e=t.radius)!==null&&e!==void 0?e:wk,s.outerRadius=(n=t.outerRadius)!==null&&n!==void 0?n:wk,s.innerRadius=(r=t.innerRadius)!==null&&r!==void 0?r:0,s.stack=t.stack,s.percent=t.percent,s}transformSpec(t){var e;super.transformSpec(t),((e=t.axes)!==null&&e!==void 0?e:[]).forEach(n=>{["domainLine","grid","label","tick"].forEach(r=>{n[r]||(n[r]={visible:!1})}),n.orient==="angle"&&N(n.bandPosition)&&(n.bandPosition=.5)}),t.crosshair=X(t.crosshair||{}).map(n=>Wt({categoryField:{visible:!0,line:{visible:!0,type:"rect"}}},n))}}const hXt=(i,t)=>{const e=2*Math.PI,n=Rn(t),r=rn(t);return i<n?i+=Math.ceil((n-i)/e)*e:i>r&&(i-=Math.ceil((i-r)/e)*e),i},DT=(i,t)=>{if(!i)return null;const e=Sk(i,l=>l.getOrient()==="angle",t),n=Sk(i,l=>l.getOrient()==="radius",t);if(!(e&&e.length||n&&n.length))return null;const r=[],s=l=>l.getDimensionField()[0],{x:a,y:o}=t;return e&&e.forEach(l=>{var u;const c=l.getScale();if(c&&Nr(c.type)){const h=c.domain(),d=c.range(),f=l.getCenter(),p={x:a-l.getLayoutStartPoint().x-f.x,y:o-l.getLayoutStartPoint().y-f.y};let g=X4({x:1,y:0},p);g=hXt(g,d);const m=ck(p),_=(u=n[0])===null||u===void 0?void 0:u.getScale(),v=_?.range();if((g-d?.[0])*(g-d?.[1])>0||(m-v?.[0])*(m-v?.[1])>0)return;const y=l.invert(g);if(N(y))return;let b=h.findIndex(S=>S?.toString()===y.toString());b<0&&(b=void 0);const x=yL(y,l,"polar",s);r.push({index:b,value:y,position:c.scale(y),axis:l,data:x})}}),n&&n.forEach(l=>{var u;const c=l.getScale(),h=c?.range();if(c&&Nr(c.type)){const d=l.getCenter(),f={x:a-l.getLayoutStartPoint().x-d.x,y:o-l.getLayoutStartPoint().y-d.y};let p=X4({x:1,y:0},f);p<-Math.PI/2&&(p=2*Math.PI+p);const g=ck(f),m=(u=e[0])===null||u===void 0?void 0:u.getScale(),_=m?.range();if((p-_?.[0])*(p-_?.[1])>0||(g-h?.[0])*(g-h?.[1])>0)return;const v=c.invert(g);if(N(v))return;let y=c.domain().findIndex(x=>x?.toString()===v.toString());y<0&&(y=void 0);const b=yL(v,l,"polar",s);r.push({index:y,value:v,position:c.scale(v),axis:l,data:b})}}),r.length?r:null};let $p=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Mat,this.type="rose",this.seriesType=st.rose}_setModelOption(){this._modelOption.getDimensionInfo=DT}};$p.type="rose",$p.seriesType=st.rose,$p.transformerConstructor=Mat,Be($p,iu);const oN=()=>{Tr(),si(),Vr(),Hr(),Cst(),z.registerChart($p.type,$p)};class Tat extends Cat{_getDefaultSeriesSpec(t){var e;const n=super._getDefaultSeriesSpec(t);return n.line=t.line,n.point=t.point,n.stack=t.stack,n.percent=t.percent,n.area=Wt({visible:!1},t.area),n.seriesMark=(e=t.seriesMark)!==null&&e!==void 0?e:"area",n.activePoint=t.activePoint,n.pointDis=t.pointDis,n.pointDisMul=t.pointDisMul,n.markOverlap=t.markOverlap,n}transformSpec(t){var e;super.transformSpec(t),((e=t.axes)!==null&&e!==void 0?e:[]).forEach(n=>{n.orient==="radius"&&(["domainLine","label","tick"].forEach(r=>{n[r]||(n[r]={visible:!1})}),n.grid||(n.grid={visible:!0}))}),t.crosshair=X(t.crosshair||{}).map(n=>Wt({categoryField:{visible:!0,line:{visible:!0,type:"line"}}},n))}}let Up=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Tat,this.type="radar",this.seriesType=st.radar}_setModelOption(){this._modelOption.getDimensionInfo=DT}};Up.type="radar",Up.seriesType=st.radar,Up.transformerConstructor=Tat,Be(Up,iu);const lN=()=>{Tr(),si(),nu(),Vr(),Hr(),Tst(),z.registerChart(Up.type,Up)};class Pat extends Ms{_getDefaultSeriesSpec(t){const e=super._getDefaultSeriesSpec(t);return delete e.data,e}_transformAxisSpec(t){t.axes&&t.autoBandSize&&t.series.forEach((e,n)=>{var r;if(e.type==="bar"){const s=this._findBandAxisBySeries(e,n,t.axes);if(s&&!s.bandSize&&!s.maxBandSize&&!s.minBandSize){const a=ee(e.autoBandSize)&&(r=e.autoBandSize.extend)!==null&&r!==void 0?r:0,{barMaxWidth:o,barMinWidth:l,barWidth:u,barGapInGroup:c}=e;this._applyAxisBandSize(s,a,{barMaxWidth:o,barMinWidth:l,barWidth:u,barGapInGroup:c})}}})}transformSpec(t){if(super.transformSpec(t),t.series&&t.series.length){const e=this._getDefaultSeriesSpec(t);t.series.forEach(n=>{this._isValidSeries(n.type)&&Object.keys(e).forEach(r=>{r in n||(n[r]=e[r])})})}t.axes&&t.axes.length&&t.axes.forEach(e=>{be(e,"trimPadding")&&Wt(e,Znt(this.type,t))}),this._transformAxisSpec(t)}}let Lv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Pat,this.type="common"}_setModelOption(){this._modelOption.getDimensionInfo=(t,e,n)=>{var r,s;return[...(r=ea(t,e,n))!==null&&r!==void 0?r:[],...(s=DT(t,e))!==null&&s!==void 0?s:[]]},this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};Lv.type="common",Lv.transformerConstructor=Pat,Be(Lv,iu);const uN=()=>{Tr(),si(),nu(),Vr(),z.registerChart(Lv.type,Lv),Hr()},ML=12;class Eat extends Ms{_getSeriesDataLength(t,e){var n,r;if(e.data){const a=X(e.data)[0];return a instanceof je?(n=a.latestData)===null||n===void 0?void 0:n.length:(r=a.values)===null||r===void 0?void 0:r.length}const s=X(t.data).find((a,o)=>e.dataId?a instanceof je?a.name===e.dataId:a.id===e.dataId:e.dataIndex===o);return s?s instanceof je?s.latestData.length:s.values.length:0}addAttrToComponentSpec(t,e,n){return Array.isArray(t)?t[0][e]=n:t[e]=n,t}addPaddingRow(t,e,n){t.push({index:e,size:n})}addOrientAxes(t,e,n,r){t.push({id:`regionAxesRow${n}`}),e.push({modelId:`axesRow${n}`,col:1,row:n}),r.axes[0].id=`axesRow${n}`,r.axes[0].regionIndex=Array.from(Array(r.series.length),(s,a)=>r.axes[0].orient==="top"?a+1:a)}transformSpec(t){var e,n,r,s,a,o,l,u,c,h,d,f,p,g,m;super.transformSpec(t);let _=0;const v=[],y=[],b=[],x=[],S=[],w=this._option.getCompiler().getStage(),A=(w.viewWidth,w.viewHeight);let k=0;if(t?.legends){v.push({modelId:`legendRow${_}`,col:1,row:_}),this.addAttrToComponentSpec(t.legends,"id",`legendRow${_}`);const T=X(t.legends);let D=(e=T[0].height)!==null&&e!==void 0?e:40;if(T[0].padding){const B=Yl(T[0].padding);D+=Number((n=B?.bottom)!==null&&n!==void 0?n:0),D+=Number((r=B?.top)!==null&&r!==void 0?r:0),T[0].offsetY=Number((a=(s=T[0])===null||s===void 0?void 0:s.offsetY)!==null&&a!==void 0?a:0)+Number((o=B?.top)!==null&&o!==void 0?o:0)}S.push({index:_,size:D}),k+=D,_++}t?.dataZoom&&(v.push({modelId:`dataZoomRow${_}`,col:1,row:_}),this.addAttrToComponentSpec(t.dataZoom,"id",`dataZoomRow${_}`),k+=60,_++,this.addPaddingRow(S,_,10),k+=10,_++),k+=60,t.axes!==null&&((u=(l=t?.axes)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.orient)!=="top"||(this.addOrientAxes(y,v,_,t),_++);const C=t.series.filter(T=>T.type!==st.link).length,M=(A-k-20*C)/C,R=((c=t?.appendPadding)===null||c===void 0?void 0:c.left)||0,P=((h=t?.appendPadding)===null||h===void 0?void 0:h.right)||0;(d=t?.series)===null||d===void 0||d.forEach(T=>{var D,B;if([st.bar,st.line,st.area,st.dot].includes(T.type)){if(v.push({modelId:`${T.type}Row${_}`,col:1,row:_}),v.push({modelId:`axesLeftRow${_}`,col:0,row:_}),y.push({id:`${T.type}Row${_}`,clip:!1}),S.push({index:_,size:T?.height||M}),b.push({orient:"left",id:`axesLeftRow${_}`,type:T.type===st.dot?"band":"linear",visible:T.type!==st.dot,title:{visible:!0,autoRotate:!1,style:{text:T?.barTitle,dx:-20,textBaseline:"middle",textAlign:"end"}},grid:{visible:typeof((D=T?.grid)===null||D===void 0?void 0:D.visible)!="boolean"||((B=T?.grid)===null||B===void 0?void 0:B.visible),style:(I,F)=>{var j,H,U,K,q;let Z=0;if(F===0){const at=(j=T?.grid)===null||j===void 0?void 0:j.style;Z=(U=(H=at?.lineWidth)!==null&&H!==void 0?H:at?.strokeWidth)!==null&&U!==void 0?U:1}return{lineWidth:Z,stroke:((q=(K=T?.grid)===null||K===void 0?void 0:K.style)===null||q===void 0?void 0:q.stroke)||"#dfdfdf",lineDash:[0,0]}}},domainLine:{visible:!1},tick:{visible:!1},label:{visible:!1},regionIndex:y.length-1}),T.type===st.dot){v.push({modelId:`scrollBarRightRow${_}`,col:2,row:_});const I=this._getSeriesDataLength(t,T);let F=0;I&&(F=(T?.height||M)/(30*I)),x.push(Object.assign({orient:"right",visible:T.type===st.dot&&F<1,id:`scrollBarRightRow${_}`,start:0,end:Math.min(F,1),filterMode:"axis",regionIndex:y.length-1,axisId:`axesLeftRow${_}`},X(t?.scrollBar)[0]))}T.regionIndex=y.length-1,_++,this.addPaddingRow(S,_,T?.padding||20),_++,T.leftAppendPadding=R,T.type===st.dot&&(T.title.style.dx=-R,T.subTitle.style.dx=-R)}}),this.addPaddingRow(S,_,20),_++,(f=t?.series)===null||f===void 0||f.forEach(T=>{if(T.type===st.link){const D=T.dotSeriesIndex+1;v.push({modelId:`${T.type}Row${D}`,col:1,row:D-1}),T.regionIndex=t.series[T.dotSeriesIndex].regionIndex,T.leftAppendPadding=R,T.height=t.series[T.dotSeriesIndex].height,T.clipHeight=t.series[T.dotSeriesIndex].clipHeight}}),t?.legends&&this.addAttrToComponentSpec(t.legends,"regionIndex",[y.length-1]),((g=(p=t?.axes)===null||p===void 0?void 0:p[0])===null||g===void 0?void 0:g.orient)==="bottom"&&(this.addOrientAxes(y,v,_,t),_++);const O={type:"grid",col:4,row:_,colWidth:[{index:0,size:R},{index:2,size:ML},{index:3,size:P}],rowHeight:S,elements:v};t.layout=O,t.region=y,(m=t.axes)===null||m===void 0||m.push(...b),t.scrollBar=x}}var dXt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};let Ok=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Eat,this.type="sequence"}_createSeries(t,e){if(!t)return;const{spec:n}=e,r=dXt(e,["spec"]);let s;if(n.type===st.link&&(n.dotSeriesSpec=this._spec.series[n.dotSeriesIndex]),n.regionId&&(s=this.getRegionsInUserId(n.regionId)),s||(s=this.getRegionsInIndex(n.regionIndex?[n.regionIndex]:void 0)[0]),!s)return;const a=new t(n,Object.assign(Object.assign(Object.assign({},this._modelOption),r),{region:s,specKey:"series",globalScale:this._globalScale}));a&&(a.created(),this._series.push(a),s.addSeries(a))}};Ok.type="sequence",Ok.transformerConstructor=Eat;const cN=()=>{Tr(),si(),Pst(),Est(),Mr(),mr(),z.registerChart(Ok.type,Ok)};class hN extends vo{transformSpec(t){super.transformSpec(t),t.axes.forEach(e=>e.type="linear")}_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["x2Field","y2Field","barMinHeight","barBackground","barGap"])}}class Dk extends ki{constructor(){super(...arguments),this.transformerConstructor=hN}}Dk.transformerConstructor=hN,Be(Dk,iu);class IT extends hN{transformSpec(t){super.transformSpec(t),uc(t)}}let Bv=class extends Dk{constructor(){super(...arguments),this.transformerConstructor=IT,this.type="histogram",this.seriesType=st.bar}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};Bv.type="histogram",Bv.seriesType=st.bar,Bv.transformerConstructor=IT;const dN=()=>{Tr(),si(),nu(),Vr(),Hr(),bT(),z.registerTransform("bin",GRt),z.registerChart(Bv.type,Bv)};class Rat extends kat{_getDefaultSeriesSpec(t){var e,n;const r=super._getDefaultSeriesSpec(t);return r.progress=t.progress,r.track=t.track,r.tickMask=t.tickMask,r.cornerRadius=(e=t.cornerRadius)!==null&&e!==void 0?e:0,r.roundCap=(n=t.roundCap)!==null&&n!==void 0&&n,r}transformSpec(t){super.transformSpec(t),this._transformProgressAxisSpec(t,{orient:"angle",visible:!1},{orient:"radius",visible:!1},{forceInitTick:t.tickMask&&t.tickMask.visible!==!1})}}let Gp=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Rat,this.type="circularProgress",this.seriesType=st.circularProgress}_setModelOption(){this._modelOption.getDimensionInfo=DT}};Gp.type="circularProgress",Gp.seriesType=st.circularProgress,Gp.transformerConstructor=Rat,Be(Gp,iu);const fN=()=>{Tr(),si(),Vr(),Hr(),Yz(),z.registerChart(Gp.type,Gp)};class Oat extends kat{_getDefaultSeriesSpec(t){const e=super._getDefaultSeriesSpec(t);return e.radiusField=t.radiusField,e.pin=t.pin,e.pinBackground=t.pinBackground,e.pointer=t.pointer,e}_getDefaultCircularProgressSeriesSpec(t){const e=super._getDefaultSeriesSpec(t);return e.type=st.circularProgress,e}transformSpec(t){var e,n,r,s,a;super.transformSpec(t);let o=(e=t.series)===null||e===void 0?void 0:e.find(l=>l.type===st.gauge||l.type===st.circularProgress);N(o)&&(o=(n=t.gauge)!==null&&n!==void 0?n:this._getDefaultCircularProgressSeriesSpec(t),o.type==="circularProgress"&&(N(o.radiusField)&&N(o.categoryField)&&(o.radiusField=(s=(r=t.radiusField)!==null&&r!==void 0?r:t.categoryField)!==null&&s!==void 0?s:t.seriesField),N(o.valueField)&&N(o.angleField)&&(o.valueField=(a=t.valueField)!==null&&a!==void 0?a:t.angleField)),t.series.length===1?t.series.push(o):t.series.forEach(l=>{l.type===o.type&&Object.keys(o).forEach(u=>{u in l||(l[u]=o[u])})})),o.type===st.circularProgress?this._transformProgressAxisSpec(t,{orient:"angle",visible:!0,domainLine:{visible:!1},grid:{visible:!1}},{orient:"radius",visible:!1},{zIndex:ti.Region+50}):this._transformGaugeAxisSpec(t)}_transformGaugeAxisSpec(t){var e;t.axes||(t.axes=[]);const n={radius:null,angle:null};((e=t.axes)!==null&&e!==void 0?e:[]).forEach(r=>{const{orient:s}=r;s==="radius"&&(n.radius=r),s==="angle"&&(n.angle=r)}),n.angle||(n.angle={orient:"angle",visible:!0},t.axes.push(n.angle)),n.radius||(n.radius={orient:"radius",visible:!1},t.axes.push(n.radius)),N(n.angle.type)&&(n.angle.type="linear"),N(n.radius.type)&&(n.radius.type="linear"),N(n.angle.zIndex)&&(n.angle.zIndex=ti.Region+50)}}let Fv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Oat,this.type="gauge",this.seriesType=st.gaugePointer}};Fv.type="gauge",Fv.seriesType=st.gaugePointer,Fv.transformerConstructor=Oat;const pN=()=>{si(),lat(),cat(),Yz(),z.registerChart(Fv.type,Fv)};class rx extends Ms{transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["nameField","valueField","fontFamilyField","fontWeightField","fontStyleField","colorHexField","colorMode","colorList","rotateAngles","fontWeightRange","fontSizeRange","maskShape","keepAspect","random","wordCloudConfig","wordCloudShapeConfig","word","fillingWord","wordMask"])}}class gN extends ki{constructor(){super(...arguments),this.transformerConstructor=rx,this.type="wordCloud",this.seriesType=st.wordCloud}}gN.transformerConstructor=rx;let Md=class extends gN{constructor(){super(...arguments),this.transformerConstructor=rx,this.type="wordCloud",this.seriesType=st.wordCloud}};Md.type="wordCloud",Md.seriesType=st.wordCloud,Md.transformerConstructor=rx;const mN=()=>{si(),Jz(),z.registerChart(Md.type,Md)},Dat=()=>{x7t(),si(),Jz(),z.registerChart(Md.type,Md)};class LT extends Ms{needAxes(){return!1}_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["categoryField","valueField","funnelAlign","funnelOrient","heightRatio","shape","funnel","transform","outerLabel","transformLabel","isTransform","maxSize","minSize","gap","isCone","range","transformRatioText"])}transformSpec(t){super.transformSpec(t),super.transformSeriesSpec(t)}}let zv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=LT,this.type="funnel",this.seriesType=st.funnel}};zv.type="funnel",zv.seriesType=st.funnel,zv.transformerConstructor=LT;const _N=()=>{si(),Jst(),z.registerChart(zv.type,zv)};class Iat extends vo{needAxes(){return!1}_getDefaultSeriesSpec(t){var e,n;const r=super._getDefaultSeriesSpec(t,["bandWidth","progress","track","clamp"]);return r.direction=(e=t.direction)!==null&&e!==void 0?e:"horizontal",r.cornerRadius=(n=t.cornerRadius)!==null&&n!==void 0?n:0,r}transformSpec(t){var e,n;if(super.transformSpec(t),t.axes||(t.axes=[]),t.direction==="vertical"){let r=null,s=null;((e=t.axes)!==null&&e!==void 0?e:[]).forEach(o=>{const{orient:l}=o;l==="left"&&(r=o),l==="bottom"&&(s=o)}),r||(r={orient:"left",visible:!1},t.axes.push(r)),s||(s={orient:"bottom",visible:!1},t.axes.push(s)),N(s.type)&&(s.type="band"),N(r.type)&&(r.type="linear");const a=B0(r,{min:0,max:1});N(r.min)&&(r.min=a.min),N(r.max)&&(r.max=a.max)}else{let r=null,s=null;((n=t.axes)!==null&&n!==void 0?n:[]).forEach(o=>{const{orient:l}=o;l==="left"&&(r=o),l==="bottom"&&(s=o)}),r||(r={type:"band",orient:"left",visible:!1},t.axes.push(r)),s||(s={orient:"bottom",visible:!1},t.axes.push(s)),N(s.type)&&(s.type="linear"),N(r.type)&&(r.type="band");const a=B0(s,{min:0,max:1});N(s.min)&&(s.min=a.min),N(s.max)&&(s.max=a.max)}}}let Yp=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Iat,this.type="linearProgress",this.seriesType=st.linearProgress}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};Yp.type="linearProgress",Yp.seriesType=st.linearProgress,Yp.transformerConstructor=Iat,Be(Yp,iu);const vN=()=>{Tr(),si(),Vr(),Hr(),Ist(),z.registerChart(Yp.type,Yp)};class Lat extends vo{_getDefaultSeriesSpec(t){var e,n;const r=super._getDefaultSeriesSpec(t,["barWidth","barMaxWidth","barMinWidth","barGapInGroup","barBackground","barMinHeight","stackCornerRadius","bar"]);return t.direction==="horizontal"?r.xField=(e=t.xField)!==null&&e!==void 0?e:[t.minField,t.maxField]:r.yField=(n=t.yField)!==null&&n!==void 0?n:[t.minField,t.maxField],r}transformSpec(t){super.transformSpec(t),uc(t)}}let Nv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Lat,this.type="rangeColumn",this.seriesType=st.rangeColumn}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};Nv.type="rangeColumn",Nv.seriesType=st.rangeColumn,Nv.transformerConstructor=Lat;const yN=()=>{Tr(),si(),Vr(),Hr(),pst(),z.registerChart(Nv.type,Nv)};class Bat extends Ms{_getDefaultSeriesSpec(t){const e=L(t.startAngle)?t.startAngle:Pz,n=L(t.endAngle)?t.endAngle:e+t0(2*Math.PI),r=super._getDefaultSeriesSpec(t,["categoryField","valueField","centerX","centerY","offsetX","offsetY","innerRadius","outerRadius","gap","labelLayout","label","labelAutoVisible","drill","drillField"]);return r.startAngle=e,r.endAngle=n,r}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}let jv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Bat,this.type="sunburst",this.seriesType=st.sunburst}};jv.type="sunburst",jv.seriesType=st.sunburst,jv.transformerConstructor=Bat;const bN=()=>{si(),tat(),z.registerChart(jv.type,jv)};class Fat extends Ms{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["categoryField","valueField","layoutPadding","circlePacking","drill","drillField"])}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}let Hv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Fat,this.type="circlePacking",this.seriesType=st.circlePacking}};Hv.type="circlePacking",Hv.seriesType=st.circlePacking,Hv.transformerConstructor=Fat;const xN=()=>{si(),eat(),z.registerChart(Hv.type,Hv)};class zat extends Ms{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["categoryField","valueField","aspectRatio","splitType","maxDepth","gapWidth","nodePadding","minVisibleArea","minChildrenVisibleArea","minChildrenVisibleSize","roam","drill","drillField","leaf","nonLeaf","nonLeafLabel"])}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}let Vv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=zat,this.type="treemap",this.seriesType=st.treemap}};Vv.type="treemap",Vv.seriesType=st.treemap,Vv.transformerConstructor=zat;const SN=()=>{si(),aat(),z.registerChart(Vv.type,Vv)};class Nat extends xT{transformSpec(t){super.transformSpec(t),t.legends&&X(t.legends).forEach(e=>{e.select=!1,e.hover=!1,e.filter=!1}),uc(t)}_getDefaultSeriesSpec(t){const e=super._getDefaultSeriesSpec(t);return e.bar=t.bar,e.stackLabel=t.stackLabel,e.leaderLine=t.leaderLine,e.total=t.total,e.calculationMode=t.calculationMode,e}}let Wv=class extends Vc{constructor(){super(...arguments),this.transformerConstructor=Nat,this.type="waterfall",this.seriesType=st.waterfall}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};Wv.type="waterfall",Wv.seriesType=st.waterfall,Wv.transformerConstructor=Nat;const wN=()=>{Tr(),si(),nu(),Vr(),Hr(),nst(),z.registerChart(Wv.type,Wv)};class jat extends vo{_getDefaultSeriesSpec(t){var e;const n=[t.maxField,t.medianField,t.q1Field,t.q3Field,t.minField,t.outliersField],r=super._getDefaultSeriesSpec(t,["boxPlot","outlier","minField","maxField","q1Field","medianField","q3Field","outliersField","outliersStyle","boxWidth","boxMaxWidth","boxMinWidth","boxGapInGroup"]);return r.direction=(e=t.direction)!==null&&e!==void 0?e:"vertical",r[r.direction==="horizontal"?"xField":"yField"]=n,r}transformSpec(t){super.transformSpec(t),t.axes||(t.axes=[{orient:"bottom"},{orient:"left"}]),uc(t)}}let $v=class extends ki{constructor(){super(...arguments),this.transformerConstructor=jat,this.type="boxPlot",this.seriesType=st.boxPlot}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};$v.type="boxPlot",$v.seriesType=st.boxPlot,$v.transformerConstructor=jat;const AN=()=>{Tr(),si(),Vr(),Hr(),hst(),z.registerTransform("boxplot",YRt),z.registerChart($v.type,$v)};class Hat extends Ms{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["categoryField","valueField","sourceField","targetField","direction","nodeAlign","crossNodeAlign","nodeGap","nodeWidth","linkWidth","minStepWidth","minNodeHeight","maxNodeHeight","minLinkHeight","maxLinkHeight","dropIsolatedNode","nodeHeight","linkHeight","equalNodeHeight","linkOverlap","iterations","nodeKey","linkSortBy","nodeSortBy","setNodeLayer","node","link","emphasis","inverse","overflow"])}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}let Uv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Hat,this.type="sankey",this.seriesType=st.sankey}_setStateInDatum(t,e,n,r){const s=J(e)?e[0]:e;if(!s)return void this._interaction.clearByState(t);let a=null;this.filterGraphicsByDatum(s,{filter:(o,l)=>l.type!=="text"&&l.getProduct()&&(!n||n(o,l)),region:r,getDatum:o=>{var l;let u=(l=cn(o))===null||l===void 0?void 0:l.datum;return J(u)&&(u=u[0]),u},callback:(o,l,u,c)=>{var h,d;const f=l.getProductId();f&&(f.includes("node")||f.includes("link"))&&((d=(h=u)._handleEmphasisElement)===null||d===void 0||d.call(h,{item:o,mark:l}))},regionCallback:(o,l)=>{s&&o.length&&(a=o[0])}}),a&&this._interaction.updateStateOfGraphics(t,[a])}};Uv.type="sankey",Uv.seriesType=st.sankey,Uv.transformerConstructor=Hat;const kN=()=>{si(),y3t(),rat(),z.registerChart(Uv.type,Uv)};class Vat extends vo{_getDefaultSeriesSpec(t){var e,n;const r=super._getDefaultSeriesSpec(t);return r.area=t.area,r.point=t.point,r.line=t.line,t.direction==="horizontal"?r.xField=(e=t.xField)!==null&&e!==void 0?e:[t.minField,t.maxField]:r.yField=(n=t.yField)!==null&&n!==void 0?n:[t.minField,t.maxField],r.stack=!1,r}transformSpec(t){super.transformSpec(t),uc(t)}}let Gv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Vat,this.type="rangeArea",this.seriesType=st.rangeArea}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};Gv.type="rangeArea",Gv.seriesType=st.rangeArea,Gv.transformerConstructor=Vat;const CN=()=>{Tr(),si(),nu(),Vr(),Hr(),gst(),z.registerChart(Gv.type,Gv)};class Wat extends vo{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["valueField","cell"])}}let Yv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Wat,this.type="heatmap",this.seriesType=st.heatmap}};Yv.type="heatmap",Yv.seriesType=st.heatmap,Yv.transformerConstructor=Wat;const MN=()=>{si(),dat(),z.registerChart(Yv.type,Yv)};class $at extends Ms{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["categoryField","valueField","sizeField","sizeRange","centerX","centerY","innerRadius","outerRadius","startAngle","endAngle","ripplePoint","centerPoint","centerLabel","nodePoint"])}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}let Xv=class extends ki{constructor(){super(...arguments),this.transformerConstructor=$at,this.type="correlation",this.seriesType=st.correlation}};Xv.type="correlation",Xv.seriesType=st.correlation,Xv.transformerConstructor=$at;const BT=()=>{si(),U9t(),z.registerChart(Xv.type,Xv)};function Uat(i){var t,e;const n=Object.assign({},i);return Lt(i.style)||(n.textStyle=$t(i.style)),Lt(i.textStyle)||Wt(n.textStyle,$t(i.textStyle)),!((t=i.shape)===null||t===void 0)&&t.style&&$t(n.shape.style),!((e=i.background)===null||e===void 0)&&e.style&&$t(n.background.style),n}var fXt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};function pXt(i,t){const{title:e={},item:n={},pager:r={},background:s={},type:a,id:o,visible:l,orient:u,position:c,data:h,filter:d,regionId:f,regionIndex:p,seriesIndex:g,seriesId:m,padding:_}=i,v=fXt(i,["title","item","pager","background","type","id","visible","orient","position","data","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);let{title:y={},item:b={},pager:x={},background:S={}}=i;y=Jr(y),b=Jr(b),x=Jr(x),S=Jr(S);const w=v;return y.visible?w.title=Uat(y):w.title={visible:!1},Lt(b.focusIconStyle)||$t(b.focusIconStyle),b.shape&&(b.shape=Lo(b.shape)),b.label&&(b.label=Lo(b.label)),b.value&&(b.value=Lo(b.value)),b.background&&(b.background=Lo(b.background)),va(b.maxWidth)&&(b.maxWidth=Number(b.maxWidth.substring(0,b.maxWidth.length-1))*t.width/100),va(b.width)&&(b.width=Number(b.width.substring(0,b.width.length-1))*t.width/100),va(b.height)&&(b.height=Number(b.height.substring(0,b.height.length-1))*t.width/100),w.item=b,x.type==="scrollbar"?(Lt(x.railStyle)||$t(x.railStyle),Lt(x.sliderStyle)||$t(x.sliderStyle)):(Lt(x.textStyle)||$t(x.textStyle),x.handler&&Lo(x.handler)),w.pager=x,S.visible&&!Lt(S.style)&&(Wt(w,S.style),L(S.padding)&&(w.padding=S.padding)),w}const gXt=(i,t)=>{const e=[],n={},{series:r,seriesField:s}=t;return r().forEach(a=>{const o=s(a);let l;l=o===a.getSeriesField()?a.getSeriesInfoList():a.getSeriesInfoInField(o),l.forEach(u=>{n[u.key]||(n[u.key]=!0,e.push(u))})}),e},mXt=(i,t)=>{var e,n,r;const{series:s,selected:a,field:o,data:l,customFilter:u}=t,c=a(),h=l();if(c.length===0&&h.length)return[];if(c.length===h.length)return i;const d={};c.forEach(p=>{d[p]=!0});const f=(e=o())!==null&&e!==void 0?e:gs;return u?u(i,c,f):(J(i)&&(!((n=i[0])===null||n===void 0)&&n.nodes)?(i[0].nodes=i[0].nodes.filter(p=>d[p.key]===!0),!((r=i[0])===null||r===void 0)&&r.links&&(i[0].links=i[0].links.filter(p=>d[p.source]===!0&&d[p.target]===!0))):L(f)&&(i=i.filter(p=>d[s.getSeriesFieldValue(p,f)]===!0)),i)};class TN extends Cs{constructor(){super(...arguments),this.layoutType="normal",this.layoutZIndex=ti.Legend,this.layoutLevel=Jo.Legend,this.specKey="legends",this._orient="left",this._visible=!0,this._position="middle",this._preSelectedData=[],this._selectedData=[],this.effect={onSelectedDataChange:()=>{zi(this._regions,t=>{var e;(e=t.getViewData())===null||e===void 0||e.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),zi(this._regions,t=>{t.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}get orient(){return this._orient}get visible(){return this._visible}get position(){return this._position}getLegendData(){return this._legendData.getLatestData()}getSelectedData(){return this._selectedData}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._orient=cz(this._spec.orient)?this._spec.orient:"left",this._position=(t=this._spec.position)!==null&&t!==void 0?t:"middle",this._visible=this._spec.visible!==!1;const{regionId:e,regionIndex:n,seriesId:r,seriesIndex:s}=this._spec;L(r)&&(this._seriesUserId=X(r)),L(e)&&(this._regionUserId=X(e)),L(s)&&(this._seriesIndex=X(s)),L(n)&&(this._regionUserIndex=X(n)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionUserIndex)}created(){super.created(),this.initData()}_compareSpec(t,e){const n=super._compareSpec(t,e);return n.reRender=!0,t?.orient!==e?.orient?(n.reMake=!0,n):(Ne(e,t)||(n.reCompile=!0),n)}_bindLegendDataChange(){this._preSelectedData=this._selectedData.slice(),this._initSelectedData(),this._forceLayout()}initData(){const t=this._initLegendData();t.target.addListener("change",this._bindLegendDataChange.bind(this)),this._legendData=new Cr(this._option,t),this._initSelectedData(),zi(this._regions,e=>{e.event.on(Tt.rawDataUpdate,{filter:({model:n})=>n?.id===e.id},()=>{this._legendData.getDataView().reRunAllTransform({skipEqual:!0})})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}setSelectedData(t){var e,n,r;const s=this._selectedData;N(t)||JSON.stringify(s)===JSON.stringify(t)||(zi(this._regions,a=>{a.legendSelectedFilter&&(t=a.legendSelectedFilter(this,t))},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._selectedData=[...t],(n=(e=this.effect).onSelectedDataChange)===null||n===void 0||n.call(e),this.event.emit(Tt.legendSelectedDataChange,{model:this}),(r=this._legendComponent)===null||r===void 0||r.setSelected(this._selectedData))}afterSetLayoutStartPoint(t){if(super.afterSetLayoutStartPoint(t),this._legendComponent){const{x:e,y:n}=t;et(e*n)&&this._legendComponent.setAttributes({x:e,y:n})}}getBoundsInRect(t,e){if(!this._visible)return this._legendComponent&&this._legendComponent.parent&&(this._legendComponent.parent.removeChild(this._legendComponent),this._legendComponent=null),{x1:0,y1:0,x2:0,y2:0};const n={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0},r=this._getLegendAttributes(t);if(r.disableTriggerEvent=this._option.disableTriggerEvent,this._legendComponent)Ne(r,this._cacheAttrs)||this._legendComponent.setAttributes(Wt({},r,{defaultSelected:this._selectedData}));else{const o=new(this._getLegendConstructor())(Wt({},r,{defaultSelected:this._selectedData}));o.name="legend",this._legendComponent=o,this.getContainer().add(o),this._option.disableTriggerEvent||this._initEvent(),o.on("*",(l,u)=>this._delegateEvent(this._legendComponent,l,u))}this._cacheAttrs=r;const s=isFinite(this._legendComponent.AABBBounds.width())?this._legendComponent.AABBBounds.width():0,a=isFinite(this._legendComponent.AABBBounds.height())?this._legendComponent.AABBBounds.height():0;if(this.layoutType!=="normal-inline"){const o=this.layoutOrient==="bottom"||this.layoutOrient==="top"?"horizontal":"vertical",l=this._position,{width:u,height:c}=e;let h=0,d=0;o==="horizontal"?l==="middle"?h=(u-s)/2:l==="end"&&(h=u-s):l==="middle"?d=(c-a)/2:l==="end"&&(d=c-a),this._legendComponent.setAttributes({dx:h,dy:d})}return n.x2=n.x1+s,n.y2=n.y1+a,n}onDataUpdate(){var t,e;if(JSON.stringify(this._preSelectedData)!==JSON.stringify(this._selectedData)){if(this._legendComponent){const n=this._getLegendAttributes(this.getLayoutRect());Ne(n,this._cacheAttrs)||this._legendComponent.setAttributes(Wt({},n,{defaultSelected:this._selectedData}))}(e=(t=this.effect).onSelectedDataChange)===null||e===void 0||e.call(t),this.event.emit(Tt.legendSelectedDataChange,{model:this})}}_getNeedClearVRenderComponents(){return[this._legendComponent]}clear(){super.clear(),this._cacheAttrs=null,this._preSelectedData=null}}TN.specKey="legends";const _Xt={orient:"bottom",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"primaryFontColor"},fontWeight:"normal"},space:12},pager:{textStyle:{fill:{type:"palette",key:"discreteLegendPagerTextColor"}},handler:{style:{fill:{type:"palette",key:"discreteLegendPagerHandlerColor"}},state:{disable:{fill:{type:"palette",key:"discreteLegendPagerHandlerDisableColor"}}}}},item:{visible:!0,spaceCol:10,spaceRow:6,padding:2,background:{state:{selectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}},unSelectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}}}},shape:{space:6,style:{lineWidth:0,fillOpacity:1,opacity:1},state:{unSelected:{fillOpacity:.2,opacity:1}}},label:{space:6,style:{fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},opacity:1},state:{unSelected:{fill:{type:"palette",key:"disableFontColor"},opacity:1}}}},allowAllCanceled:!1};class Kv extends TN{constructor(){super(...arguments),this.type=lt.discreteLegend,this.name=lt.discreteLegend}static getSpecInfo(t){return tl(t,this.specKey,this.type,e=>!e.type||e.type==="discrete")}init(t){super.init(t),zi(this._regions,e=>{e.addViewDataFilter({type:"discreteLegendFilter",options:{series:e,selected:()=>this._selectedData,field:()=>this._getSeriesLegendField(e),data:()=>this.getLegendDefaultData(),customFilter:this._spec.customFilter},level:Qo.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_initLegendData(){Vt(this._option.dataSet,"discreteLegendFilter",mXt),Vt(this._option.dataSet,"discreteLegendDataMake",gXt);const t=new je(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return t.transform({type:"discreteLegendDataMake",options:{series:()=>{const e=[];return zi(this._regions,n=>{e.push(n)},{specIndex:this._spec.seriesIndex,userId:this._spec.seriesId}),e},seriesField:e=>this._getSeriesLegendField(e)}}),t}_getSeriesLegendField(t){var e,n,r;const s=t.getSeriesField(),a=(e=this._spec.scaleName)!==null&&e!==void 0?e:this._spec.scale;if(N(a)||!t.getRawData())return s;const o=this._option.globalScale.getScaleSpec(a);if(!o)return s;if(this._spec.field)return this._spec.field;if(!Op(o.domain))return s;const l=o.domain.find(u=>u.dataId===t.getRawData().name);return l&&(r=(n=l.fields)===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:s}_initSelectedData(){const t=this.getLegendDefaultData();if(this._unselectedData){const e=[],n=[];t.forEach(r=>{this._unselectedData.includes(r)?n.push(r):e.push(r)}),this._selectedData=e,this._unselectedData=n}else this._spec.defaultSelected?this._selectedData=[...this._spec.defaultSelected]:this._selectedData=t}getLegendDefaultData(t){return it(this._spec.data)?this._getLegendItems().map(e=>e.label):this._legendData.getLatestData().map(t?e=>e.originalKey:e=>e.key)}_addDefaultTitleText(t){var e,n,r,s;if(!((e=t.title)===null||e===void 0)&&e.visible&&N(t.title.text)&&N((n=t.title.style)===null||n===void 0?void 0:n.text)){const a=(s=(r=this._regions)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.getSeries()[0];if(!a)return;t.title.text=yk(a.getRawData(),a.getSeriesField())}}_getLegendAttributes(t){const e=this.layoutOrient==="bottom"||this.layoutOrient==="top"?"horizontal":"vertical",n=Object.assign(Object.assign({layout:e,items:this._getLegendItems(),zIndex:this.layoutZIndex},pXt(this._spec,t)),{maxWidth:t.width,maxHeight:t.height});return this._addDefaultTitleText(n),this._addLegendItemFormatMethods(n),n}_getLegendConstructor(){return bnt}setSelectedData(t){t&&(this._unselectedData=this.getLegendDefaultData().filter(e=>!t.includes(e))),super.setSelectedData(t)}_initEvent(){if(this._legendComponent){const t=this._spec.filter!==!1;this._legendComponent.addEventListener(za.legendItemClick,e=>{const n=be(e,"detail.currentSelected");t&&this.setSelectedData(n),this.event.emit(Tt.legendItemClick,{model:this,value:n,event:e})}),this._legendComponent.addEventListener(za.legendItemHover,e=>{const n=be(e,"detail");this.event.emit(Tt.legendItemHover,{model:this,value:n,event:e})}),this._legendComponent.addEventListener(za.legendItemUnHover,e=>{const n=be(e,"detail");this.event.emit(Tt.legendItemUnHover,{model:this,value:n,event:e})})}}_getLegendItems(){const t=(this._legendData.getLatestData()||[]).map(e=>{var n,r;const s=e.style("fillOpacity"),a=e.style("strokeOpacity"),o=e.style("opacity"),l=e.style("texture");return{label:e.key,shape:{symbolType:(r=(n=e.style("symbolType"))!==null&&n!==void 0?n:e.shapeType)!==null&&r!==void 0?r:"circle",fillOpacity:et(s)?s:1,strokeOpacity:et(a)?a:1,opacity:et(o)?o:1,texturePadding:l?1:null,textureSize:l?4:null,texture:l,fill:e.style("fill"),stroke:e.style("stroke"),textureColor:e.style("textureColor"),innerBorder:e.style("innerBorder"),outerBorder:e.style("outerBorder"),lineDash:e.style("lineDash"),lineDashOffset:e.style("lineDashOffset"),lineWidth:e.style("lineWidth")}}});return it(this._spec.data)?this._spec.data(t,this._option.globalScale.getScale("color"),this._option.globalScale):t}_addLegendItemFormatMethods(t){var e,n,r,s;const{formatMethod:a,formatter:o}=(n=(e=this._spec.item)===null||e===void 0?void 0:e.label)!==null&&n!==void 0?n:{},{formatMethod:l,formatter:u}=(s=(r=this._spec.item)===null||r===void 0?void 0:r.value)!==null&&s!==void 0?s:{},{formatFunc:c}=Ju(a,o);o&&!a&&c&&(t.item.label.formatMethod=(d,f)=>c(d,f,o));const{formatFunc:h}=Ju(l,u);u&&!l&&h&&(t.item.value.formatMethod=(d,f)=>h(u,d,f,o))}}Kv.specKey="legends",Kv.builtInTheme={discreteLegend:_Xt},Kv.type=lt.discreteLegend;const Xm=()=>{z.registerComponent(Kv.type,Kv)},vXt=(i,t)=>{const{series:e,field:n,scale:r}=t,s=n();if(n&&s){let a=1/0,o=-1/0;return e().forEach(l=>{const u=l.getRawDataStatisticsByField(s,!0),c=u?.min,h=u?.max;et(c)&&(a=Math.min(c,a)),et(h)&&(o=Math.max(h,o))}),[a,o]}if(r){const a=r();return a?a.domain():[]}return[]},yXt=(i,t)=>{const{selected:e,field:n,data:r,isHierarchyData:s,customFilter:a}=t,o=e(),l=n(),u=s||(c=>c&&c.some(h=>h&&Y5t(h)));if(o===r())return i;if(l&&!Lt(o)){const[c,h]=o;return a?a(i,o,l):u(i)?Xnt(i,+c,+h,l):i.filter(d=>d[l]>=c&&d[l]<=h)}return i};var bXt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};function xXt(i){const t=Wt({},i),{title:e={},handler:n={},rail:r={},track:s={},startText:a,endText:o,handlerText:l,sizeBackground:u,background:c={},type:h,id:d,visible:f,orient:p,position:g,data:m,defaultSelected:_,field:v,filter:y,regionId:b,regionIndex:x,seriesIndex:S,seriesId:w,padding:A}=t,k=bXt(t,["title","handler","rail","track","startText","endText","handlerText","sizeBackground","background","type","id","visible","orient","position","data","defaultSelected","field","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return e.visible?k.title=Uat(e):k.title={visible:!1},k.showHandler=n.visible!==!1,Lt(n.style)||(k.handlerStyle=$t(n.style)),L(r.width)&&(k.railWidth=r.width),L(r.height)&&(k.railHeight=r.height),Lt(r.style)||(k.railStyle=$t(r.style)),Lt(s.style)||(k.trackStyle=$t(s.style)),k.startText=Lo(a),k.endText=Lo(o),k.handlerText=Lo(l),Lt(u)||(k.sizeBackground=$t(u)),c.visible&&!Lt(c.style)&&(Wt(k,c.style),L(c.padding)&&(k.padding=c.padding)),k}function SXt(i){return i==="color"||i==="size"}const wXt={color:eT,size:iT},Gat={orient:"right",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"primaryFontColor"}},space:12},handler:{visible:!0},startText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},endText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},handlerText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6}},DY=i=>{const t={width:200,height:8,style:{fill:{type:"palette",key:"sliderRailColor"}}};return i?(t.width=200,t.height=8):(t.width=8,t.height=200),Object.assign(Object.assign({},Gat),{rail:t,handler:{style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:"#ffffff"},shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"}}}})},AXt={horizontal:DY(!0),vertical:DY(!1)},IY=i=>{const t={style:{fill:{type:"palette",key:"sliderRailColor"}}};return i?(t.width=200,t.height=4):(t.height=200,t.width=4),Object.assign(Object.assign({},Gat),{sizeBackground:{fill:{type:"palette",key:"dataZoomChartColor"}},track:{style:{fill:{type:"palette",key:"sliderTrackColor",a:.8}}},rail:t,handler:{style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:{type:"palette",key:"sliderTrackColor"}},fill:{type:"palette",key:"sliderHandleColor"}}}})},kXt={horizontal:IY(!0),vertical:IY(!1)},CXt=["#C4E7FF","#98CAFF","#75ACFF","#518FF9","#2775DC","#005CBE","#00429F","#00287E"],MXt=[2,10];let qv=class extends TN{static getSpecInfo(t){const e=tl(t,this.specKey,this.type,n=>SXt(n.type));return e&&e.forEach(n=>{n.type=n.spec.type==="color"?lt.colorLegend:lt.sizeLegend}),e}constructor(t,e){super(t,e),this.type=lt.colorLegend,this.name=lt.colorLegend;const n=this._spec.type==="color"?lt.colorLegend:lt.sizeLegend;this.type=n,this.name=n}setAttrFromSpec(){super.setAttrFromSpec(),this._field=this._spec.field,this._legendType=this._spec.type}init(t){super.init(t),zi(this._regions,e=>{e.addViewDataFilter({type:"continuousLegendFilter",options:{selected:()=>this._selectedData,field:()=>this._field,data:()=>this._legendData.getLatestData(),isHierarchyData:e.isHierarchyData,customFilter:this._spec.customFilter},level:Qo.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_getScaleInGlobal(){const t=this._option.globalScale;let e=this._spec.scale;return e||(e=this._legendType),t.getScale(e)}_initLegendData(){Vt(this._option.dataSet,"continuousLegendFilter",yXt),Vt(this._option.dataSet,"continuousLegendDataMake",vXt);const t=new je(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return t.transform({type:"continuousLegendDataMake",options:{series:()=>Ent(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}),field:()=>this._field,scale:this._getScaleInGlobal.bind(this)}}),t}_initSelectedData(){this._spec.defaultSelected?this._selectedData=this._spec.defaultSelected.slice():this._selectedData=this._legendData.getLatestData()}_addDefaultTitleText(t){var e,n,r,s;if(!((e=t.title)===null||e===void 0)&&e.visible&&N(t.title.text)&&N((n=t.title.style)===null||n===void 0?void 0:n.text)){const a=this._field;if(a){const c=(s=(r=this._regions)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.getSeries()[0];return c?void(t.title.text=yk(c.getRawData(),a)):void 0}let o=this._spec.scale;o||(o=this._legendType);const l=this._option.globalScale.getScaleSpec(o);if(!Op(l?.domain))return;const u=l.domain[0];if(u.fields.length===0)return;t.title.text=yk(this._option.dataSet.getDataView(u.dataId),u.fields[0])}}_getLegendAttributes(t){var e,n;const r=this.layoutOrient==="bottom"||this.layoutOrient==="top"?"horizontal":"vertical",s=r==="horizontal"?"bottom":this.layoutOrient;let a=[];const o=this._getScaleInGlobal();o&&o.type==="linear"&&(a=o.range()),Lt(a)&&(a=this._legendType==="color"?CXt:MXt);let l=(e=this._legendData.getLatestData()[0])!==null&&e!==void 0?e:0,u=(n=this._legendData.getLatestData()[1])!==null&&n!==void 0?n:1;this._legendData.getLatestData()[0]===this._legendData.getLatestData()[1]&&(l=Math.min(0,this._legendData.getLatestData()[0]),u=this._legendData.getLatestData()[0]===0?1:Math.max(0,this._legendData.getLatestData()[0]));const c=Object.assign({layout:r,align:s,zIndex:this.layoutZIndex,min:l,max:u,value:this._spec.defaultSelected,[this._legendType==="color"?"colors":"sizeRange"]:a},xXt(this._spec));return this._addDefaultTitleText(c),c}_getLegendConstructor(){return wXt[this._legendType]}_initEvent(){if(this._legendComponent){const t=this._spec.filter!==!1;this._legendComponent.addEventListener("change",pf(e=>{const n=be(e,"detail.value");t&&this.setSelectedData(n),this.event.emit(Tt.legendFilter,{model:this,value:n,event:e})},30))}}};qv.specKey="legends",qv.builtInTheme={colorLegend:AXt,sizeLegend:kXt},qv.type=lt.continuousLegend;const Km=()=>{z.registerComponent(qv.type,qv)},Qf=(i,t)=>L(t)?i.map(e=>t[e]):void 0,md=(i,t)=>e=>i.every((n,r)=>e[n]===t?.[r]),D_=i=>!N(i)&&(J(i)?i.length>0&&i.every(L):Object.keys(i).length>0);function TXt(i,t,e){var n,r,s,a,o,l;const u=Object.assign({regionIndex:0},t),c=e.getOption(),h=c.getRegionsInUserIdOrIndex(L(u.regionId)?[u.regionId]:void 0,L(u.regionIndex)?[u.regionIndex]:void 0)[0];if(!h)return"none";const d=PXt(i,h),f=(n=u.activeType)!==null&&n!==void 0?n:d.length>1?"dimension":"mark",p=h.getLayoutStartPoint(),g=h.getLayoutRect(),m=c.globalInstance.getContainer(),_=Object.assign({x:0,y:0},m?gEt(m):{}),v=b=>{var x;const{dimensionFields:S,dimensionData:w,measureFields:A,measureData:k,groupField:C,groupData:M}=b.data;return(x=b.series.getViewData())===null||x===void 0?void 0:x.latestData.find(P=>md(S,w)(P)&&md(A,k)(P)&&(N(C)||md([C],[M])(P)))},y=b=>{var x,S;const w=(C=>({x:Math.min(Math.max(C.x,0),g.width),y:Math.min(Math.max(C.y,0),g.height)}))(b),A=(x=u.x)!==null&&x!==void 0?x:p.x+w.x,k=(S=u.y)!==null&&S!==void 0?S:p.y+w.y;return{canvasX:A,canvasY:k,clientX:_.x+A,clientY:_.y+k}};if(f==="dimension"){const b=d[0];if(!b)return"none";const x=new Map;d.forEach(k=>{var C;x.has(k.series)||x.set(k.series,[]),(C=x.get(k.series))===null||C===void 0||C.push(k)});const S=[{value:i[b.data.dimensionFields[0]],data:[...x.keys()].map(k=>{var C,M;return{series:k,datum:(M=(C=x.get(k))===null||C===void 0?void 0:C.map(R=>v(R)))!==null&&M!==void 0?M:[]}})}];L(b.dimType)&&(S[0].position=b.pos[b.dimType],S[0].dimType=b.dimType);const w={changePositionOnly:!1,action:"enter",tooltip:null,dimensionInfo:S,chart:(r=c.globalInstance.getChart())!==null&&r!==void 0?r:void 0,datum:void 0,model:void 0,source:ze.chart,event:y({x:d.reduce((k,C)=>k+C.pos.x,0)/d.length,y:d.reduce((k,C)=>k+C.pos.y,0)/d.length}),item:void 0};(o=(a=(s=e.processor)===null||s===void 0?void 0:s.dimension)===null||a===void 0?void 0:a.showTooltip)===null||o===void 0||o.call(a,S,w,!1);const A=c.globalInstance;return he.globalConfig.uniqueTooltip&&he.hideTooltip(A.id),f}if(f==="mark"){const b=d[0];if(!b)return"none";const x=Object.assign(Object.assign({},v(b)),i),S=[{datum:[x],series:b.series}],w={changePositionOnly:!1,tooltip:null,dimensionInfo:[{value:x[b.data.dimensionFields[0]],data:S}],chart:(l=c.globalInstance.getChart())!==null&&l!==void 0?l:void 0,datum:x,model:b.series,source:ze.chart,event:y(b.pos),item:void 0};e.processor.mark.showTooltip({datum:x,mark:null,series:b.series},w,!1);const A=c.globalInstance;return he.globalConfig.uniqueTooltip&&he.hideTooltip(A.id),f}return"none"}const PXt=(i,t)=>{const e=t.getSeries(),n=[];return e.forEach(r=>{var s,a,o,l,u,c,h;const d=r.getDimensionField(),f=r.getMeasureField(),p=r.getSeriesField(),g=L(p)?i[p]:void 0,m=L(p)&&(l=(o=(a=(s=r.getViewDataStatistics)===null||s===void 0?void 0:s.call(r))===null||a===void 0?void 0:a.latestData[p])===null||o===void 0?void 0:o.values)!==null&&l!==void 0?l:[],_=Qf(d,i);let v=Qf(f,i);const y=D_(v),b=!y&&L(p)&&N(g)&&m.length>0,x=()=>{var S;const w=(S=r.getViewData())===null||S===void 0?void 0:S.latestData.find(md(d,_));if(!y&&(v=Qf(f,w),!D_(v)))return;const A=r.type===st.pie?r.dataToCentralPosition(w):r.dataToPosition(w);N(A)||isNaN(A.x)||isNaN(A.y)||n.push({pos:A,data:{dimensionFields:d,dimensionData:_,measureFields:f,measureData:v,hasMeasureData:y,groupField:p,groupData:g},series:r})};if(r.coordinate==="cartesian"){const S=r,w=Nr((c=(u=r.getYAxisHelper())===null||u===void 0?void 0:u.getScale(0))===null||c===void 0?void 0:c.type)?"y":"x",A=d.map((C,M)=>[C,M]).filter(([,C])=>N(_?.[C]));let k=[_??[]];A.length>0&&A.forEach(([C,M])=>{var R,P,O,T;const D=(T=(O=(P=(R=r.getViewDataStatistics)===null||R===void 0?void 0:R.call(r))===null||P===void 0?void 0:P.latestData[C])===null||O===void 0?void 0:O.values)!==null&&T!==void 0?T:[],B=[];k.forEach(I=>{D.forEach(F=>{var j;const H=(j=I?.slice())!==null&&j!==void 0?j:[];H[M]=F,B.push(H)})}),k=B}),k.forEach(C=>{var M,R;if(b){const P=(M=S.getViewData())===null||M===void 0?void 0:M.latestData.filter(md(d,C));m.forEach(O=>{const T=P.find(B=>B[p]===O);if(v=Qf(f,T),!D_(v))return;const D=S.dataToPosition(T);N(D)||isNaN(D.x)||isNaN(D.y)||n.push({pos:D,data:{dimensionFields:d,dimensionData:C,measureFields:f,measureData:v,hasMeasureData:y,groupField:p,groupData:O},series:r,dimType:w})})}else{const P=(R=S.getViewData())===null||R===void 0?void 0:R.latestData.find(md(d,C));if(!y&&(v=Qf(f,P),!D_(v)))return;const O=S.dataToPosition(P);if(N(O)||isNaN(O.x)||isNaN(O.y))return;n.push({pos:O,data:{dimensionFields:d,dimensionData:C,measureFields:f,measureData:v,hasMeasureData:y,groupField:p,groupData:g},dimType:w,series:r})}})}else if(r.coordinate==="polar")if(r.type===st.pie)x();else{const S=r;if(b){const w=((h=S.getViewData())===null||h===void 0?void 0:h.latestData.filter(md(d,_))).find(A=>A[p]===g);m.forEach(A=>{if(v=Qf(f,w),!D_(v))return;const k=S.dataToPosition(w);N(k)||isNaN(k.x)||isNaN(k.y)||n.push({pos:k,data:{dimensionFields:d,dimensionData:_,measureFields:f,measureData:v,hasMeasureData:y,groupField:p,groupData:A},series:r})})}else x()}else r.coordinate==="geo"&&x()}),n},LY=i=>L(i)&&!J(i),BY=i=>L(i)&&J(i);class Yat extends Wm{_shouldMergeThemeToSpec(){return!1}_initTheme(t,e){var n,r,s;const{spec:a,theme:o}=super._initTheme(t,e);return a.style=Wt({},this._theme,a.style),a.offset=Wt({},o.offset,t.offset),a.transitionDuration=(n=t.transitionDuration)!==null&&n!==void 0?n:o.transitionDuration,a.trigger=(r=t.trigger)!==null&&r!==void 0?r:o.trigger,a.triggerOff=(s=t.triggerOff)!==null&&s!==void 0?s:o.triggerOff,{spec:a,theme:o}}_transformSpecAfterMergingTheme(t,e,n){var r,s,a,o,l,u,c;super._transformSpecAfterMergingTheme(t,e,n),t.visible=(r=t.visible)===null||r===void 0||r,t.activeType=QUt(t),t.renderMode=(s=t.renderMode)!==null&&s!==void 0?s:Mh(this._option.mode)||!$l(this._option.mode)?"canvas":"html",t.trigger=(a=t.trigger)!==null&&a!==void 0?a:"hover",t.className=(o=t.className)!==null&&o!==void 0?o:SGt,t.enterable=(l=t.enterable)!==null&&l!==void 0&&l,t.transitionDuration=(u=t.transitionDuration)!==null&&u!==void 0?u:150,t.confine=(c=t.confine)!==null&&c!==void 0?c:t.renderMode==="canvas",L(t.parentElement)?Ht(t.parentElement)&&(t.parentElement=Qt.getElementById(t.parentElement)):$l(this._option.mode)&&(t.parentElement=Rp?.body)}}const EXt={offset:{x:10,y:10},panel:{padding:{top:10,left:10,right:10,bottom:10},backgroundColor:{type:"palette",key:"popupBackgroundColor"},border:{color:{type:"palette",key:"popupBackgroundColor"},width:0,radius:3},shadow:{x:0,y:4,blur:12,spread:0,color:{type:"palette",key:"shadowColor"}}},spaceRow:6,titleLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0},shape:{size:8,spacing:6},keyLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle",spacing:26},valueLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0}};let Xp=class extends Cs{constructor(){super(...arguments),this.layoutZIndex=1,this.type=lt.tooltip,this.name=lt.tooltip,this.transformerConstructor=Yat,this.specKey="tooltip",this.layoutType="none",this._isReleased=!1,this._alwaysShow=!1,this._eventList=[],this._isTooltipShown=!1,this._clickLock=!1,this._mountEvent=(t,e,n)=>{this.event.on(t,e,n),this._eventList.push({eventType:t,handler:n})},this._handleClickToLock=t=>{var e,n;if(this._clickLock)this._handleChartMouseOut(t),this._clickLock=!1;else{if(!this._isTooltipShown&&!(!((n=(e=this.tooltipHandler)===null||e===void 0?void 0:e.isTooltipShown)===null||n===void 0)&&n.call(e)))return;this._clickLock=!0}},this._getMouseOutHandler=t=>e=>{var n,r,s,a,o;if(this._isReleased||this._alwaysShow||this._clickLock||!this._isTooltipShown&&!(!((r=(n=this.tooltipHandler)===null||n===void 0?void 0:n.isTooltipShown)===null||r===void 0)&&r.call(n)))return;const l=$l((s=this._option)===null||s===void 0?void 0:s.mode),{clientX:u,clientY:c}=e.event;l&&t&&this._isPointerInChart({x:u,y:c})||(this._enterable?this._outTimer=setTimeout(()=>{this._handleChartMouseOut(e)},(o=(a=this._spec)===null||a===void 0?void 0:a.showDelay)!==null&&o!==void 0?o:eR):this._handleChartMouseOut(e))},this._handleChartMouseOut=t=>{var e;this._cacheActiveType&&(!((e=this._option)===null||e===void 0)&&e.componentShowContent)&&(this._option.componentShowContent.tooltip===!1||ee(this._option.componentShowContent.tooltip)&&this._option.componentShowContent.tooltip[this._cacheActiveType]===!1)||this._alwaysShow||this._isReleased||this._isEnterTooltip||this._spec.triggerOff!=="none"&&(this._hideTooltipByHandler(Object.assign(Object.assign({},t),{tooltip:this})),this._handleMouseMove&&this._handleMouseMove.cancel&&this._handleMouseMove.cancel(),this._cacheEnterableRect=null,this._cacheInfo=void 0,this._cacheParams=void 0,this._cacheActiveType=void 0)},this._getMouseMoveHandler=t=>e=>{var n,r,s,a;this._isReleased||this._isEnterTooltip||(this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),this._alwaysShow||(this._clickLock?t&&(this._handleChartMouseOut(e),this._clickLock=!1):!t&&this._enterable&&(!((r=(n=this.tooltipHandler)===null||n===void 0?void 0:n.isTooltipShown)===null||r===void 0)&&r.call(n))?(this._showTimer&&clearTimeout(this._showTimer),this._showTimer=setTimeout(()=>{this._handleChartMouseMove(e,t)},(a=(s=this._spec)===null||s===void 0?void 0:s.showDelay)!==null&&a!==void 0?a:eR)):this._handleChartMouseMove(e,t)))},this._handleChartMouseMove=(t,e)=>{if(this._isReleased)return;const n=this._getMouseEventData(t),{tooltipInfo:{dimension:r},ignore:{mark:s}}=n,a={mark:!1,dimension:!1,group:!1},o=["group","mark","dimension"];for(let l=0,u=o.length;l<u;l++){const c=o[l],h=!!this.processor[c]&&this._showTooltipByMouseEvent(c,n,t,e);if(h==="unShowByOption")a[c]="unShowByOption";else if(h){a[c]=!0;break}}Object.values(a).every(l=>!l)&&!JUt(t)&&(s&&LY(this._cacheInfo)?a.mark=this._showTooltipByMouseEvent("mark",n,t,e,!0):L(r)&&(a.dimension=this._showTooltipByMouseEvent("dimension",n,t,e))),a.mark===!0||a.group===!0||a.dimension===!0&&!N(r)?this._initEventOfTooltipContent():this._cacheActiveType&&a[this._cacheActiveType]==="unShowByOption"||this._handleChartMouseOut(t)},this._showTooltipByMouseEvent=(t,e,n,r,s)=>{var a;if(!this._showContentByEvent(t))return"unShowByOption";const o=this.processor[t];if(!o.shouldHandleTooltip(n,e.tooltipInfo[t]))return!1;let l;if(this._hideTimer&&clearTimeout(this._hideTimer),s)l=!o.showTooltip(this._cacheInfo,n,!0);else{const c=e.tooltipInfo[t],h=this._isSameAsCache(c,n,t);l=!o.showTooltip(c,n,h),l&&(this._cacheInfo=c,this._cacheParams=n,this._cacheActiveType=t)}l&&(this._isTooltipShown=!0,r&&this._spec.lockAfterClick&&!this._clickLock?this._clickLock=!0:Number.isFinite(this._spec.hideTimer)&&(this._hideTimer=setTimeout(()=>{this._handleChartMouseOut()},this._spec.hideTimer)));const u=(a=this._option)===null||a===void 0?void 0:a.globalInstance;return l&&he.globalConfig.uniqueTooltip&&u&&he.hideTooltip(u.id),l},this._getMouseEventData=t=>{const e={tooltipInfo:{},ignore:{}};return Object.keys(this.processor).forEach(n=>{const{tooltipInfo:r,ignore:s}=this.processor[n].getMouseEventData(t);e.tooltipInfo[n]=r,e.ignore[n]=s}),e},this._hideTooltipByHandler=t=>{var e,n,r;if(!this._isTooltipShown&&!(!((n=(e=this.tooltipHandler)===null||e===void 0?void 0:e.isTooltipShown)===null||n===void 0)&&n.call(e)))return 0;this.event.emit(Tt.tooltipHide,Object.assign(Object.assign({},t),{source:ze.chart,tooltip:this})),Object.values(this.processor).forEach(a=>{a.clearCache()});const s=(r=this._spec.handler)!==null&&r!==void 0?r:this.tooltipHandler;if(s.hideTooltip){const a=s.hideTooltip.call(s,t);return a||(this._isTooltipShown=!1),a}return 1},this.hideTooltip=()=>{if(this._isReleased)return!1;const t={changePositionOnly:!1,tooltip:this,item:void 0,datum:void 0,source:ze.chart};return this._alwaysShow=!1,!this._hideTooltipByHandler(t)}}isTooltipShown(){return this._isTooltipShown}_registerEvent(){}_releaseEvent(){}onLayoutEnd(){}created(){super.created(),this._regions=this._option.getAllRegions(),this._initEvent()}release(){var t,e;super.release(),this._isReleased=!0,this._hideTimer&&clearTimeout(this._hideTimer),this._eventList.forEach(({eventType:n,handler:r})=>{this.event.off(n,r)}),this._eventList=[],(e=(t=this.tooltipHandler)===null||t===void 0?void 0:t.release)===null||e===void 0||e.call(t),this._isTooltipShown=!1}beforeRelease(){this.event.emit(Tt.tooltipHide,{tooltip:this,chart:this.getChart()}),this.event.emit(Tt.tooltipRelease,{tooltip:this,chart:this.getChart()})}_initHandler(){var t,e,n;const r=(t=this._spec.renderMode)!==null&&t!==void 0?t:"html",s=this._option.globalInstance.getTooltipHandlerByUser();if(s)this.tooltipHandler=s,this._enterable=!1;else{const a=r==="canvas"?um.canvas:um.dom,o=z.getComponentPluginInType(a);o||v0("Can not find tooltip handler: "+a);const l=new o;l.name=`${this._spec.className}-${(e=this._option.globalInstance.id)!==null&&e!==void 0?e:0}-${this.getSpecIndex()}`,(n=this.pluginService)===null||n===void 0||n.load([l]),this.tooltipHandler=l,this._spec.enterable&&r==="html"&&this.tooltipHandler?(this._enterable=!0,this._needInitEventOfTooltip=!0):this._enterable=!1}}_initEventOfTooltipContent(){var t,e;if(!this._needInitEventOfTooltip)return;const n=(e=(t=this.tooltipHandler).getRootDom)===null||e===void 0?void 0:e.call(t);n&&(n.addEventListener("pointerenter",()=>{var r;if(!this._enterable)return;this._isEnterTooltip=!0;const s=(r=n.getBoundingClientRect)===null||r===void 0?void 0:r.call(n);s&&(this._cacheEnterableRect={width:s.width,height:s.height}),this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null)}),n.addEventListener("pointerleave",()=>{var r,s,a;if(this._enterable&&(this._isEnterTooltip=!1,this._spec.triggerOff!=="none"&&this._cacheEnterableRect)){const o=(r=n.getBoundingClientRect)===null||r===void 0?void 0:r.call(n);o&&Object.keys(this._cacheEnterableRect).every(l=>this._cacheEnterableRect[l]===o[l])&&(this._cacheEnterableRect=null,this._outTimer=setTimeout(this.hideTooltip,(a=(s=this._spec)===null||s===void 0?void 0:s.showDelay)!==null&&a!==void 0?a:eR))}}),this._needInitEventOfTooltip=!1)}_initProcessor(){const t=this._spec.activeType;this.processor={},t.forEach(e=>{const n=z.createTooltipProcessor(e,this);n&&(this.processor[e]=n)})}_initEvent(){var t;if(this._option.disableTriggerEvent)return;const e=X((t=this._spec.trigger)!==null&&t!==void 0?t:"hover"),n=X(this._spec.triggerOff),r=this._option.mode;e.forEach(s=>{var a;s==="hover"?(this._handleMouseMove=this._throttle(this._getMouseMoveHandler(!1)),this._mountEvent("pointermove",{source:"chart"},this._handleMouseMove),(uh(r)||Mh(r))&&(this._mountEvent("pointerdown",{source:"chart"},this._getMouseMoveHandler(!1)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))),this._mountEvent("pointerleave",{source:"chart"},this._getMouseOutHandler(!1))):s==="click"?(this._mountEvent("pointertap",{source:"chart"},this._getMouseMoveHandler(!0)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))):ee(s)&&this._mountEvent(s.eventType,{source:(a=s.source)!==null&&a!==void 0?a:"chart",consume:s.consume},this._getMouseMoveHandler(!0))}),n.filter(s=>ee(s)).forEach(s=>{var a,o;this._mountEvent(s.eventType,{source:(a=s.source)!==null&&a!==void 0?a:"chart",consume:s.consume},this._getMouseOutHandler((o=s.checkOutside)!==null&&o!==void 0&&o))}),!e.includes("click")&&this._spec.lockAfterClick&&this._mountEvent("pointertap",{source:"chart"},this._handleClickToLock)}_throttle(t){let e;return e=yt(this._spec.throttleInterval)?this._spec.throttleInterval:this._spec.renderMode==="html"&&this._spec.transitionDuration?50:10,ac(t,e)}_showContentByEvent(t){var e;return!(!((e=this._option)===null||e===void 0)&&e.componentShowContent&&(this._option.componentShowContent.tooltip===!1||ee(this._option.componentShowContent.tooltip)&&this._option.componentShowContent.tooltip[t]===!1))}reInit(t){var e,n,r;if(super.reInit(t),this.tooltipHandler){const s=(e=this._spec.renderMode)!==null&&e!==void 0?e:"html",a=this._spec.enterable&&s==="html";a&&!this._enterable&&(this._needInitEventOfTooltip=!0),this._enterable=a,(r=(n=this.tooltipHandler).reInit)===null||r===void 0||r.call(n)}else this._initHandler()}showTooltip(t,e){var n;if(this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),!(!((n=this.tooltipHandler)===null||n===void 0)&&n.showTooltip))return!1;const r=TXt(t,e,this);return r!=="none"&&(this._alwaysShow=!!e?.alwaysShow,this._cacheActiveType=r),r}_isSameAsCache(t,e,n){if(n!==this._cacheActiveType)return!1;if(t===this._cacheInfo)return!0;if(N(this._cacheInfo)||N(t))return!1;if(BY(t)){if(LY(this._cacheInfo))return!1;const a=this._cacheInfo;return a.length===t.length&&t.every((o,l)=>xrt(o,a[l]))}if(BY(this._cacheInfo))return!1;const r=this._cacheInfo;if(!(t?.datum===r.datum&&t?.mark===r.mark&&t?.series===r.series))return!1;const s=this._cacheParams;return!N(s)&&!N(e)&&s.mark===e.mark&&s.model===e.model&&s.datum===e.datum}_isPointerInChart(t){var e;const n=(e=this._option)===null||e===void 0?void 0:e.globalInstance;if(!n||!n.getChart())return!1;const{x:r,y:s}=t,a=n.getCanvas(),{x:o,y:l,width:u,height:c}=a.getBoundingClientRect();return r>=o&&r<=o+u&&s>=l&&s<=l+c}getVisible(){return this._spec.visible!==!1}};Xp.type=lt.tooltip,Xp.transformerConstructor=Yat,Xp.builtInTheme={tooltip:EXt},Xp.specKey="tooltip";const Mf=()=>{z.registerComponent(Xp.type,Xp)};function RXt(i){return i===wn["desktop-browser"]||i===wn["desktop-miniApp"]?{click:"pointertap",hover:"pointermove",hoverOut:"pointerleave",clickOut:"pointerleave"}:uh(i)||Mh(i)?{click:"tap",hover:["pointerdown","pointermove"],hoverOut:"pointerleave",clickOut:"pointerleave"}:null}var FY;(function(i){i[i.ALL=3]="ALL",i[i.HORIZONTAL=2]="HORIZONTAL",i[i.VERTICAL=1]="VERTICAL"})(FY||(FY={}));var zY=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};const OXt={x:["top","bottom"],y:["left","right"],category:["angle"],value:["radius"]};class PN extends Cs{get enableRemain(){return this.triggerOff==="none"}constructor(t,e){super(t,e),this.specKey="crosshair",this.layoutType="none",this.gridZIndex=ti.CrossHair_Grid,this.labelZIndex=ti.CrossHair,this.trigger="hover",this._handleIn=n=>{if(!this._option)return;const{x:r,y:s}=this.calculateTriggerPoint(n);this.showDefault=!1,this._layoutCrosshair(r,s);const a=this._getNeedClearVRenderComponents();this._hasActive=a.some(o=>o&&o.attribute.visible!==!1)},this._handleClickInEvent=n=>{if(!this._hasActive||!this._spec.lockAfterClick||this._clickLock)return this._clickLock?(this._clickLock=!1,void this._handleOutEvent()):void(this._onlyLockClick||(this._handleIn(n),yt(this.triggerOff)&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(()=>{this._handleOutEvent()},this.triggerOff))));this._clickLock=!0},this._handleHoverInEvent=ac(n=>{this._clickLock||this._handleIn(n)},10),this._handleOutEvent=()=>{this.enableRemain||this._clickLock||!this._hasActive||(this.clearOutEvent(),this.hideCrosshair())},this._handleTooltipShow=n=>{const r=n.tooltipData;if(n.isEmptyTooltip||!r||!r.length)return void this._handleTooltipHideOrRelease();if(ee(this._spec.followTooltip)&&this._spec.followTooltip[n.activeType]===!1)return void this._handleTooltipHideOrRelease();const{x:s,y:a}=this.calculateTriggerPoint(n);this.showDefault=!1,this._layoutCrosshair(s,a,r,n.activeType);const o=this._getNeedClearVRenderComponents();this._hasActive=o.some(l=>l&&l.attribute.visible!==!1)},this._handleTooltipHideOrRelease=()=>{this.clearOutEvent(),this.hideCrosshair()},this.enable=!0,this.showDefault=!0}_setAllAxisValues(t,e,n){let r=!1;if(t.forEach(a=>{Nr(a.axis.getScale().type)&&(r?this.enable=!1:r=!0)}),!this.enable)return!1;const{currentValue:s}=this._stateByField[n];return t.forEach((a,o)=>{const l=a.axis;s.set(o,{datum:this._getDatumAtPoint(l,e),axis:l})}),!0}clearAxisValue(){Object.keys(this._stateByField).forEach(t=>{this._stateByField[t].currentValue.clear()})}hideCrosshair(){this.clearAxisValue(),this.hide()}showCrosshair(t){t&&t.length&&(this.showDefault=!1,this.clearAxisValue(),t.forEach(e=>{const{axis:n,value:r}=e;this.setAxisValue(r,n)}),this.layoutByValue(!1))}_getLimitBounds(){var t,e;if(!this._limitBounds){const{width:n,height:r}=(e=(t=this._option.globalInstance.getChart())===null||t===void 0?void 0:t.getViewRect())!==null&&e!==void 0?e:{width:0,height:0};this._limitBounds={x1:0,y1:0,x2:n,y2:r}}return this._limitBounds}_showDefaultCrosshairBySpec(){let t=!1;return Object.keys(this._stateByField).forEach(e=>{const n=this._spec[e];if(n&&n.visible&&n.defaultSelect){const{axisIndex:r=0,datum:s}=n.defaultSelect,a=this._option.getComponentsByKey("axes").find(o=>o.getSpecIndex()===r);a&&(t=!0,this._stateByField[e].currentValue.clear(),this._stateByField[e].currentValue.set(r,{axis:a,datum:s}))}}),t}_updateVisibleCrosshair(){let t=!1;Object.keys(this._stateByField).forEach(e=>{const n=this._spec[e];n&&n.visible&&this._stateByField[e].currentValue.size?t=!0:this._hideByField(e)}),t&&this.layoutByValue(!1)}_showDefaultCrosshair(){this.showDefault?this._showDefaultCrosshairBySpec()&&this.layoutByValue(!1):this._updateVisibleCrosshair()}setAttrFromSpec(){super.setAttrFromSpec(),this._parseCrosshairSpec()}created(){super.created(),this._initEvent()}_compareSpec(t,e){const n=super._compareSpec(t,e);return n.reMake||Ne(e,t)||(n.reRender=!0,n.reMake=!0),n}_initEvent(){if(!this._option.disableTriggerEvent)if(this._spec.followTooltip)this._registerTooltipEvent();else{const t=this._getTriggerEvent();t&&t.forEach(e=>{this._registerEvent(e.in,!1,e.click),e.out&&this._registerEvent(e.out,!0)})}}_registerEvent(t,e,n){var r;if(((r=this._option.componentShowContent)===null||r===void 0?void 0:r.crosshair)===!1)return;const s=e?this._handleOutEvent:n?this._handleClickInEvent:this._handleHoverInEvent,a=e?{level:vi.chart}:{source:ze.chart};J(t)?t.forEach(o=>{this.event.on(o,a,s)}):this.event.on(t,a,s)}_eventOff(t,e,n){const r=e?this._handleOutEvent:n?this._handleClickInEvent:this._handleHoverInEvent;J(t)?t.forEach(s=>{this.event.off(s,r)}):this.event.off(t,r)}onBeforeRender(){this._limitBounds=null,this._showDefaultCrosshair()}calculateTriggerPoint(t){const{event:e}=t,n=this._option.getCompiler().getStage().getLayer(void 0),r={x:e.viewX,y:e.viewY};return n.globalTransMatrix.transformPoint({x:e.viewX,y:e.viewY},r),{x:r.x-this.getLayoutStartPoint().x,y:r.y-this.getLayoutStartPoint().y}}_getTriggerEvent(){const{mode:t=wn["desktop-browser"]}=this._option,e=RXt(t);if(e){const n=X(this.trigger||"hover"),r=a=>a==="click"?this.triggerOff==="none"?null:e.clickOut:e.hoverOut;this._spec.lockAfterClick&&!n.includes("click")?(n.push("click"),this._onlyLockClick=!0):this._onlyLockClick=!1;const s=[];return n.forEach(a=>{s.push({click:a==="click",in:e[a],out:r(a)})}),s}return null}_registerTooltipEvent(){this.event.on(Tt.tooltipHide,{source:ze.chart},this._handleTooltipHideOrRelease),this.event.on(Tt.tooltipShow,{source:ze.chart},this._handleTooltipShow),this.event.on(Tt.tooltipRelease,{source:ze.chart},this._handleTooltipHideOrRelease)}_getAxisInfoByField(t){var e,n;const r=(n=(e=this._option).getComponentsByKey)===null||n===void 0?void 0:n.call(e,"axes");if(!r?.length)return null;let s=be(this._spec,`${t}Field.bindingAxesIndex`);if(s||(s=[],r.forEach((f,p)=>{OXt[t].includes(f.getOrient())&&s.push(p)})),!s.length)return null;const a=new Map;let o=1/0,l=1/0,u=-1/0,c=-1/0;const{x:h,y:d}=this.getLayoutStartPoint();return s.forEach(f=>{var p,g;o=1/0,l=1/0,u=-1/0,c=-1/0;const m=r.find(v=>v.getSpecIndex()===f);if(!m)return;const _=((g=(p=m).getInnerOffset)===null||g===void 0?void 0:g.call(p))||{left:0,right:0,top:0,bottom:0};m.getRegions().forEach(v=>{const{x:y,y:b}=v.getLayoutStartPoint();o=Math.min(o,y-h+_.left),l=Math.min(l,b-d+_.top),u=Math.max(u,y+v.getLayoutRect().width-h-_.right),c=Math.max(c,b+v.getLayoutRect().height-d-_.bottom)}),a.set(f,{x1:o,y1:l,x2:u,y2:c,axis:m})}),a}onLayoutEnd(){const t=this._regions[0];this.setLayoutRect(t.getLayoutRect()),this.setLayoutStartPosition(t.getLayoutStartPoint()),super.onLayoutEnd()}_releaseEvent(){this.clearOutEvent();const t=this._getTriggerEvent();t&&t.forEach(e=>{this._eventOff(e.in,!1,e.click),e.out&&this._eventOff(e.out,!0)})}_parseFieldInfo(){Object.keys(this._stateByField).forEach(t=>{const e=this._spec[t],{crosshairComp:n}=this._stateByField[t];if(e&&e.visible){if(this._stateByField[t].attributes=this._parseField(e,t),n){const{style:r,type:s}=this._stateByField[t].attributes,a=s==="rect"?"rectStyle":"lineStyle";n.setAttributes({[a]:r})}}else n&&n.parent&&n.parent.removeChild(n)})}_parseCrosshairSpec(){this._parseFieldInfo();const{trigger:t,triggerOff:e,labelZIndex:n,gridZIndex:r}=this._spec;t&&(this.trigger=t),(e==="none"||yt(e)&&e>0)&&(this.triggerOff=e),n!==void 0&&(this.labelZIndex=n),r!==void 0&&(this.gridZIndex=r)}_parseField(t,e){var n,r,s;const a={},{line:o={},label:l={},visible:u}=t;if(a.visible=u,a.type=o.type||"line",o.visible===!1)a.style={visible:!1};else{const c=o.style||{},{stroke:h,fill:d,lineWidth:f}=c,p=c,{strokeOpacity:g,fillOpacity:m,opacity:_}=p,v=zY(p,["strokeOpacity","fillOpacity","opacity"]),y=a.type==="line";let b=y?g:m;if(yt(_)&&(b=(b??1)*_),a.style=Object.assign({opacity:b,pickable:!1,visible:!0},v),y)a.style.stroke=h||d,a.style.lineWidth=be(o,"width",f||2);else{a.style.fill=d||h,!((r=(n=t?.line)===null||n===void 0?void 0:n.style)===null||r===void 0)&&r.stroke&&(a.style.stroke=t.line.style.stroke);const x=be(o,"width");if(typeof x=="string"){const S=parseInt(x.substring(0,x.length-1),10)/100;a.style.sizePercent=S}else typeof x!="number"&&typeof x!="function"||(a.style.size=x)}}if(l.visible){const c=l.labelBackground||{},h=(s=l.syncAxisLabelAngle)!==null&&s!==void 0&&s,d=l.style||{},f=c.style||{},{fill:p="rgba(47, 59, 82, 0.9)",stroke:g,outerBorder:m}=f,_=zY(f,["fill","stroke","outerBorder"]);a.label={visible:!0,formatMethod:l.formatMethod,formatter:l.formatter,minWidth:c.minWidth,maxWidth:c.maxWidth,padding:c.padding,syncAxisLabelAngle:h,textStyle:Object.assign(Object.assign({fontSize:14,pickable:!1},d),{fill:d.fill||"#fff",stroke:be(d,"stroke")}),panel:(Vn(c.visible)?c.visible:c)?Object.assign({visible:!0,pickable:!1,fill:p,stroke:g,outerBorder:Object.assign({stroke:p,distance:0,lineWidth:3},m)},_):{visible:!1},zIndex:this.labelZIndex,childrenPickable:!1,pickable:!1}}else a.label={visible:!1};return a}_filterAxisByPoint(t,e,n){return t&&t.forEach(r=>{const s=r.axis;if(u5t(r,e,n)&&t.delete(s.getSpecIndex()),s.type.startsWith("polarAxis")){const a=s.getCenter(),o=s.getInnerRadius(),l=s.getOuterRadius(),u=Je.distancePP({x:e,y:n},a);(u>l||u<o)&&t.delete(s.getSpecIndex())}}),t}_updateCrosshairLabel(t,e,n){const r=this.getContainer();t?t.setAttributes(e):(t=new qo(e),r?.add(t),n(t)),D4t(t,this._getLimitBounds())}clearOutEvent(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._clickLock&&(this._clickLock=null),this._hasActive&&(this._hasActive=null)}_hideByField(t){const{crosshairComp:e,labelsComp:n}=this._stateByField[t];e&&e.hideAll(),n&&Object.keys(n).forEach(r=>{n[r]&&n[r].hideAll()})}hide(){Object.keys(this._stateByField).forEach(t=>{this._hideByField(t)})}_getNeedClearVRenderComponents(){return Object.keys(this._stateByField).reduce((t,e)=>{const{crosshairComp:n,labelsComp:r}=this._stateByField[e];return n&&t.push(n),r&&Object.keys(r).forEach(s=>{r[s]&&t.push(r[s])}),t},[])}}PN.specKey="crosshair";const Xat={trigger:"hover",bandField:{visible:!1,line:{type:"rect",visible:!0,style:{fill:{type:"palette",key:"axisGridColor"},opacity:.7,lineWidth:0,stroke:{type:"palette",key:"markLineStrokeColor"},lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}},linearField:{visible:!1,line:{type:"line",visible:!0,style:{stroke:{type:"palette",key:"markLineStrokeColor"},fill:"transparent",opacity:.7,lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}}};class Zv extends PN{static getSpecInfo(t){return tl(t,this.specKey,this.type,e=>e.xField&&e.xField.visible!==!1||e.yField&&e.yField.visible!==!1)}constructor(t,e){super(t,e),this.type=lt.cartesianCrosshair,this.name=lt.cartesianCrosshair,this._stateByField={xField:{coordKey:"x",anotherAxisKey:"y",currentValue:new Map,labelsComp:{top:null,bottom:null}},yField:{coordKey:"y",anotherAxisKey:"x",currentValue:new Map,labelsComp:{left:null,right:null}}}}_findAllAxisContains(t,e){const n=this._getAxisInfoByField("x"),r=this._getAxisInfoByField("y");return{xAxisMap:this._filterAxisByPoint(n,t,e),yAxisMap:this._filterAxisByPoint(r,t,e)}}_getDatumAtPoint(t,e){const n=Ci(t.getOrient())?"x":"y",r=e[n]-(t.getLayoutStartPoint()[n]-this.getLayoutStartPoint()[n]);return t.getScale().invert(r)}setAxisValue(t,e){Ci(e.getOrient())?this._stateByField.xField.currentValue.set(e.getSpecIndex(),{datum:t,axis:e}):this._stateByField.yField.currentValue.set(e.getSpecIndex(),{datum:t,axis:e})}_layoutCrosshair(t,e,n,r){var s;let a=t,o=e;if(n&&n.length){if(r==="dimension"){const c=n[0],h=c.data.findIndex(f=>f.datum.length>0);let d;if(h>-1){const f=c.data[h];d=f.series.dataToPosition(f.datum[0])}(L(c.dimType)?c.dimType==="y":Bo((s=c?.axis)===null||s===void 0?void 0:s.getOrient()))?o=d?.y:a=d?.x}else if(r==="mark"){const c=n[0],h=c.series.dataToPosition(c.datum[0]);a=h?.x,o=h?.y}}this.clearAxisValue();const{xAxisMap:l,yAxisMap:u}=this._findAllAxisContains(a,o);if(l&&l.size===0||u&&u.size===0){if(this.enableRemain)return;this.hide()}else l&&l.size&&this._setAllAxisValues(l,{x:a,y:o},"xField"),u&&u.size&&this._setAllAxisValues(u,{x:a,y:o},"yField"),this.layoutByValue()}layoutByValue(t){if(!this.enable)return;const e=oz(this._regions,"cartesian");e&&(Nrt(this._stateByField,e,this.getLayoutStartPoint(),t??this.enableRemain),Object.keys(this._stateByField).forEach(n=>{this._layoutByField(n)}))}_layoutByField(t){const{cacheInfo:e,attributes:n,labelsComp:r,bandSize:s,coordKey:a}=this._stateByField[t];if(!n||!e||e._isCache&&this.enableRemain)return;const{coord:o,labels:l,visible:u,labelsTextStyle:c}=e;if(u){const h=xL(this._stateByField[t]);this._updateCrosshairByField(t,h),Object.keys(l).forEach(d=>{var f,p,g;if(l[d].visible){const m=Object.assign(Object.assign(Object.assign({[a]:o+s/2},l[d]),n.label),{angle:n.label.syncAxisLabelAngle&&(p=(f=e.axisLabel)===null||f===void 0?void 0:f.attribute.angle)!==null&&p!==void 0?p:0,textStyle:Object.assign(Object.assign({},(g=n.label)===null||g===void 0?void 0:g.textStyle),c[d]),zIndex:this.labelZIndex,visible:!0});this._updateCrosshairLabel(r[d],m,_=>{_.name=`crosshair-${t.replace("Field","")}-${d}-label`,r[d]=_})}else r[d]&&r[d].hideAll()})}else this._hideByField(t)}_updateCrosshairByField(t,e){const n=this.getContainer(),{attributes:r}=this._stateByField[t];let{crosshairComp:s}=this._stateByField[t];if(s)s.setAttributes(e);else{const a=r.style;r.type==="line"?s=new jb(Object.assign(Object.assign({},e),{lineStyle:a,zIndex:this.gridZIndex+1,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1})):r.type==="rect"&&(s=new FM(Object.assign(Object.assign({},e),{rectStyle:a,zIndex:this.gridZIndex,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1}))),n?.add(s),this._stateByField[t].crosshairComp=s}}}Zv.specKey="crosshair",Zv.builtInTheme={crosshair:Xat},Zv.type=lt.cartesianCrosshair;const FT=()=>{z.registerComponent(Zv.type,Zv)},DXt=(i,t,e=!1)=>{Object.keys(i).forEach(n=>{const{attributes:r,currentValue:s,cacheInfo:a,coordKey:o}=i[n];if(r){const l=!!s.size,u=e&&!l&&L(a),c=u?a:{coord:0,axis:null,visible:l,coordRange:[0,0],sizeRange:[0,0],labels:{all:{visible:!1,text:"",offset:0}}};if(a&&(a._isCache=u),n==="valueField"&&(c.sides=t.angleAxisHelper.getScale(0).domain().length),s.forEach(({axis:h,datum:d=""})=>{var f;const p=h.niceLabelFormatter;if(!((f=r.label)===null||f===void 0)&&f.visible&&(c.labels.all.visible=!0,c.labels.all.defaultFormatter=p,c.labels.all.text=d,c.labels.all.offset=Mz(h.getSpec())),n==="categoryField"){const g=t.angleAxisHelper.dataToPosition([d]),m=t.angleAxisHelper.getBandwidth(0),_=h.getOuterRadius();c.coord=g,c.coordRange=[g-m/2,g+m/2],c.sizeRange=[_,_]}else{const g=h.startAngle,m=t.radiusAxisHelper.dataToPosition([d]);c.coord=m,c.coordRange=[m,m],c.sizeRange=[g,g]}c.axis=h}),c&&!u&&c.labels.all.visible&&r&&r.label){const h=c.labels.all,{formatMethod:d,formatter:f}=r.label,{formatFunc:p,args:g}=Ju(d,f,h.text,{label:h.text,orient:o});p?h.text=p(...g):h.defaultFormatter&&(h.text=h.defaultFormatter(h.text))}i[n].cacheInfo=c}})},IXt=(i,t,e)=>{const{cacheInfo:n,coordKey:r,attributes:s}=i,{axis:a,coord:o,sizeRange:l,coordRange:u}=n,c=a.getCenter(),h={x:c.x+t.x,y:c.y+t.y};if(r==="angle")return(s.type==="rect"?"sector":"line")=="sector"?{center:h,innerRadius:a.getInnerRadius(),radius:a.getOuterRadius(),startAngle:u[0],endAngle:u[1]}:{start:yi(h,a.getInnerRadius(),o),end:yi(h,a.getOuterRadius(),o)};const d=a.startAngle,f=a.endAngle,p=n.sides;let g=o;if(!e){const m=a.getCenter(),_=a.coordToPoint({angle:l[0],radius:o}),v=pJ(m,_),y=(f-d)/p,b=Math.floor((v-d)/y),x=b*y+d,S=Math.min((b+1)*y+d,f),w=yi(m,o,x),A=yi(m,o,S),k=_J([A.x,A.y],[w.x,w.y],[m.x,m.y],[_.x,_.y]);k&&(g=Ke(Je.distancePN(_,k[0],k[1])+o,a.getInnerRadius(),a.getOuterRadius()))}return{center:h,startAngle:d,endAngle:f,radius:g,sides:p}};class Qv extends PN{static getSpecInfo(t){return tl(t,this.specKey,this.type,e=>e.categoryField&&e.categoryField.visible!==!1||e.valueField&&e.valueField.visible!==!1)}constructor(t,e){super(t,e),this.type=lt.polarCrosshair,this.name=lt.polarCrosshair,this._stateByField={categoryField:{coordKey:"angle",anotherAxisKey:"radius",currentValue:new Map,labelsComp:{all:null}},valueField:{coordKey:"radius",anotherAxisKey:"angle",currentValue:new Map,labelsComp:{all:null}}}}setAxisValue(t,e){e.getOrient()==="radius"?this._stateByField.valueField.currentValue.set(e.getSpecIndex(),{datum:t,axis:e}):this._stateByField.categoryField.currentValue.set(e.getSpecIndex(),{datum:t,axis:e})}_findAllAxisContains(t,e){const n=this._getAxisInfoByField("category"),r=this._getAxisInfoByField("value");return{angleAxisMap:this._filterAxisByPoint(n,t,e),radiusAxisMap:this._filterAxisByPoint(r,t,e)}}_getDatumAtPoint(t,e){const{x:n,y:r}=t.getLayoutStartPoint(),{x:s,y:a}=this.getLayoutStartPoint();return t.positionToData({x:e.x-(n-s),y:e.y-(r-a)})}_layoutCrosshair(t,e,n,r){let s=t,a=e;if(n&&n.length){if(r==="dimension"){const u=n[0];if(u.axis){const c=u.axis.pointToCoord({x:s,y:a}),h=u.axis.getOrient()==="radius"?{radius:u.position,angle:c.angle}:{radius:c.radius,angle:u.position},d=u.axis.coordToPoint(h);s=d.x,a=d.y}}else if(r==="mark"){const u=n[0],c=u.series.dataToPosition(u.datum[0]);s=c.x,a=c.y}}this.clearAxisValue();const{angleAxisMap:o,radiusAxisMap:l}=this._findAllAxisContains(s,a);if(o.size!==0||l.size!==0)o&&this._setAllAxisValues(o,{x:s,y:a},"categoryField"),l&&this._setAllAxisValues(l,{x:s,y:a},"valueField"),this.layoutByValue();else{if(this.enableRemain)return;this.hide()}}layoutByValue(t){if(!this.enable)return;const e=oz(this._regions,"polar");e&&(DXt(this._stateByField,e,t??this.enableRemain),Object.keys(this._stateByField).forEach(n=>{this._layoutByField(n)}))}_layoutByField(t){var e,n,r;const{cacheInfo:s,attributes:a,crosshairComp:o,labelsComp:l,coordKey:u}=this._stateByField[t];if(!s||s._isCache&&this.enableRemain)return;const c=this.getContainer(),{visible:h,labels:d,coord:f,sizeRange:p,axis:g}=s;if(h){const m=this.getLayoutStartPoint(),_=(n=(e=this._spec.valueField)===null||e===void 0?void 0:e.line)===null||n===void 0?void 0:n.smooth,v=IXt(this._stateByField[t],m,_);if(o)o.setAttributes(v);else{let b;if(u==="angle"){const x=a.type==="rect"?"sector":"line";x==="line"?b=new jb(Object.assign(Object.assign({},v),{lineStyle:a.style,zIndex:this.gridZIndex,pickable:!1})):x==="sector"&&(b=new NM(Object.assign(Object.assign({},v),{sectorStyle:a.style,zIndex:this.gridZIndex,pickable:!1})))}else b=(_?"circle":"polygon")=="polygon"?new jM(Object.assign(Object.assign({},v),{lineStyle:a.style,zIndex:this.gridZIndex+1})):new zM(Object.assign(Object.assign({},v),{lineStyle:a.style,zIndex:this.gridZIndex}));this._stateByField[t].crosshairComp=b,c.add(b)}const y=d.all;if(y.visible){const b=g.getCenter(),x={x:b.x+m.x,y:b.y+m.y},S=u==="angle"?K3t(f):f5t(g.startAngle),w=u==="angle"?yi(x,p[1]+y.offset,f):yi(x,v.radius,g.startAngle),A=Object.assign(Object.assign(Object.assign(Object.assign({},w),a.label),y),{textStyle:Object.assign(Object.assign({},(r=a.label)===null||r===void 0?void 0:r.textStyle),{textAlign:S.align,textBaseline:S.baseline}),zIndex:this.labelZIndex});this._updateCrosshairLabel(l.all,A,k=>{k.name=`crosshair-${u}-label`,l.all=k})}else l.all&&l.all.hideAll()}}}Qv.specKey="crosshair",Qv.builtInTheme={crosshair:Xat},Qv.type=lt.polarCrosshair;const EN=()=>{z.registerComponent(Qv.type,Qv)},LXt=(i,t)=>{const{getNewDomain:e,isContinuous:n,field:r,originalFields:s}=t,a=r(),o=e();if(N(o)||N(a))return i;const l=s(),u=J(a)?a[0]:a;return i[u]&&l&&l[u]&&l[u].lockStatisticsByDomain&&!n()&&(i[u].values=o),i},BXt=(i,t)=>{const{getNewDomain:e,isContinuous:n,field:r}=t,s=r(),a=e();if(N(a)||N(s))return i;if(a.length===0)return[];const o={};a.forEach(u=>{o[u]||(o[u]=1)});let l=null;return l=n()?u=>{let c=!1;return X(s).every(h=>{u[h]>=a[0]&&u[h]<=ke(a)&&(c=!0)}),c}:u=>{let c=!1;return X(s).every(h=>{(o[u[h]+""]||o[u[h]])&&(c=!0)}),c},i.filter(l)},FXt=(i,t)=>{const{stateFields:e,valueFields:n,dataCollection:r,isCategoryState:s,seriesCollection:a}=t.input,{stateField:o,valueField:l}=t.output,u={},c=[],h=[],d=[];let f=!1,p=!1;return r.forEach((g,m)=>{var _;if(N(e[m]))return;const v=a[m];if(v){const b=v.getRawDataStatisticsByField(e[m]);L(b?.max)&&L(b?.min)&&(p=!0)}const y=(_=g.getFields())===null||_===void 0?void 0:_[e[m]];y&&y.lockStatisticsByDomain&&(f=!0,y.domain.forEach(b=>{N(u[b])&&(d.push(b),u[b]=0,c.push(b))})),g.latestData.forEach(b=>{X(e[m]).forEach(x=>{N(b[x])||(N(u[b[x]])&&(d.push(b[x]),u[b[x]]=0,c.push(b[x])),N(n[m])||(u[b[x]]+=isNaN(parseFloat(b[n[m]]))?1:parseFloat(b[n[m]])))})})}),(f?d:s===!1||p?d.sort((g,m)=>g-m):c).forEach(g=>{const m={[o]:g};l&&(m[l]=u[g]),h.push(m)}),h},jl=(i,t,e)=>{const n=t.domain();if(Ge(t.type))return e?n[0]+(ke(n)-n[0])*(1-i):n[0]+(ke(n)-n[0])*i;let r=t.range();e&&(r=r.slice().reverse());const s=r[0]+(ke(r)-r[0])*i;return t.invert(s)},Jf=(i,t,e)=>{const n=t.scale(i);let r=t.range();return!e&&Ge(t.type)&&(r=r.slice().reverse()),Math.max(0,Math.min(1,(n-r[0])/(ke(r)-r[0])))},zs=(i,t)=>{const e=i;if(!e)return!1;const n=e.getScale();return n.range()[0]>n.range()[1]&&(!e.getInverse()||t)},NY=i=>{const t=i?.bandSize,e=i?.maxBandSize,n=i?.minBandSize;if(t||n||e)return{bandSize:t,maxBandSize:e,minBandSize:n}},jY=(i,t,e)=>i==="start"?t==="percent"&&L(e.start)||t==="value"&&L(e.startValue):t==="percent"&&L(e.end)||t==="value"&&L(e.endValue),HY=(i,t,e)=>{if(Ge(e.type))return[Math.min(t,i),Math.max(t,i)];const n=e.domain(),r=n.indexOf(i),s=n.indexOf(t);return n.slice(Math.min(r,s),Math.max(r,s)+1)},zXt=(i,t,e,n,r)=>{if(Ge(r.type)){const c=r.domain(),h=c[0],d=ke(c)-h,f=L(i)?h+d*i:+t,p=L(e)?h+d*e:+n;return[Math.min(p,f),Math.max(p,f)]}const s=r.domain(),a=r.range(),o=a[a.length-1]-a[0],l=L(i)?s.indexOf(r.invert(o*i+a[0])):s.indexOf(t),u=L(e)?s.indexOf(r.invert(o*e+a[0])):s.indexOf(n);return s.slice(Math.min(l,u),Math.max(l,u)+1)};class Kat{enableInteraction(){this._activeRoam=!0}disableInteraction(){this._activeRoam=!1}zoomIn(t){this.handleChartZoom({zoomDelta:1.2,zoomX:t?.x,zoomY:t?.y})}zoomOut(t){this.handleChartZoom({zoomDelta:.8,zoomX:t?.x,zoomY:t?.y})}constructor(t,e,n,r,s,a,o,l){this._activeRoam=!0,this._zoomAttr={enable:!0,rate:1,focus:!0},this._dragAttr={enable:!0,rate:1,reverse:!0},this._scrollAttr={enable:!0,rate:1,reverse:!0},this.initZoomEvent=()=>{var u,c,h,d,f,p,g;const m={delayType:(c=(u=this._spec)===null||u===void 0?void 0:u.delayType)!==null&&c!==void 0?c:"throttle",delayTime:L((h=this._spec)===null||h===void 0?void 0:h.delayType)?(f=(d=this._spec)===null||d===void 0?void 0:d.delayTime)!==null&&f!==void 0?f:30:0,realTime:(g=(p=this._spec)===null||p===void 0?void 0:p.realTime)===null||g===void 0||g,allowComponentZoom:!0};this._zoomAttr.enable&&this.initZoomEventOfRegions(this.getRegions(),null,this.handleChartZoom,m),this._scrollAttr.enable&&this.initScrollEventOfRegions(this.getRegions(),null,this.handleChartScroll,m),this._dragAttr.enable&&this.initDragEventOfRegions(this.getRegions(),null,this.handleChartDrag,m)},this.handleChartZoom=(u,c)=>{var h,d;if(!this._activeRoam||this._zoomAttr.filter&&!this._zoomAttr.filter(u,c))return;const{zoomDelta:f,zoomX:p,zoomY:g}=u,{x:m,y:_}=this.getRegions()[0].getLayoutStartPoint(),{width:v,height:y}=this.getRegions()[0].getLayoutRect(),b=Math.abs(this.getState().start-this.getState().end),x=(d=(h=this._spec.roamZoom)===null||h===void 0?void 0:h.rate)!==null&&d!==void 0?d:1;if(b>=1&&f<1||b<=.01&&f>1)return;const S=this._isHorizontal?p:g,w=b*(f-1)*x;let A=w/2,k=w/2;if(S){const R=this._isHorizontal?m:_,P=this._isHorizontal?v:y;A=Math.abs(R-S)/Math.abs(P-R)*w,k=Math.abs(P-S)/Math.abs(P-R)*w}const C=Ke(this.getState().start+A,0,1),M=Ke(this.getState().end-k,0,1);this._handleChange(Math.min(C,M),Math.max(C,M),!0)},this.handleChartScroll=(u,c)=>{var h;if(!this._activeRoam||this._scrollAttr.filter&&!this._scrollAttr.filter(u,c))return!1;const{scrollX:d,scrollY:f}=u;let p=this._isHorizontal?d:f;const g=this._isHorizontal?xe(d/f)>=.5:xe(f/d)>=.5;this._scrollAttr.reverse||(p=-p),g&&this.handleChartMove(p,(h=this._scrollAttr.rate)!==null&&h!==void 0?h:1);const m=this.getState().start!==0&&this.getState().end!==1;return g&&m},this.handleChartDrag=(u,c)=>{var h;if(!this._activeRoam||this._dragAttr.filter&&!this._dragAttr.filter(u,c))return;const[d,f]=u;let p=this._isHorizontal?d:f;this._dragAttr.reverse&&(p=-p),this.handleChartMove(p,(h=this._dragAttr.rate)!==null&&h!==void 0?h:1)},this.handleChartMove=(u,c)=>{const h=this._isHorizontal?this.getLayoutRect().width:this.getLayoutRect().height;if(Math.abs(u)>=1e-6){if(u>0&&this.getState().end<1){const d=Math.min(1-this.getState().end,u/h)*c;this._handleChange(this.getState().start+d,this.getState().end+d,!0)}else if(u<0&&this.getState().start>0){const d=Math.max(-this.getState().start,u/h)*c;this._handleChange(this.getState().start+d,this.getState().end+d,!0)}}return!1},this._type=t,this._spec=e,this._handleChange=n,this.getLayoutRect=r,this.getState=s,this.getRegions=a,this._regions=a(),this.getOption=o,this._option=o(),this.getEvent=l,this._isHorizontal=Ev(Ec(e))==="horizontal"}setEventAttrFromSpec(){this._spec.roamZoom===!0||this._spec.roamZoom?this._zoomAttr=ot({},this._zoomAttr,this._spec.roamZoom):this._zoomAttr.enable=!1,this._spec.roamDrag===!0||this._spec.roamDrag?this._dragAttr=ot({},this._dragAttr,this._spec.roamDrag):this._dragAttr.enable=!1,this._spec.roamScroll===!0||this._spec.roamScroll?this._scrollAttr=ot({},this._scrollAttr,this._spec.roamScroll):this._scrollAttr.enable=!1,Vn(this._spec.roam)&&(this._zoomAttr.enable=this._type!=="scrollBar"&&this._spec.roam,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.getEvent(),this._option.mode)}}Be(Kat,wT);class RN extends Cs{get isHorizontal(){return this._isHorizontal}get stateScale(){return this._stateScale}get relatedAxisComponent(){return this._relatedAxisComponent}setStartAndEnd(t,e,n=["percent","percent"]){const[r="percent",s="percent"]=n,a=r==="percent"?t:Jf(t,this._stateScale,this._isHorizontal),o=s==="percent"?e:Jf(e,this._stateScale,this._isHorizontal);this._handleChange(a,o,!0)}enableInteraction(){this._dataFilterEvent.enableInteraction()}disableInteraction(){this._dataFilterEvent.disableInteraction()}zoomIn(t){this._dataFilterEvent.zoomIn(t)}zoomOut(t){this._dataFilterEvent.zoomOut(t)}_initEvent(){var t;this._dataFilterEvent.initZoomEvent(),(t=this._relatedAxisComponent)===null||t===void 0||t.event.on(Tt.scaleRawDomainUpdate,({model:e})=>{console.log("scaleRawDomainUpdate",e.getRawDomain())})}_handleChange(t,e,n){var r,s;(s=(r=this._spec)===null||r===void 0?void 0:r.zoomLock)!==null&&s!==void 0&&s||e-t!==this._spanCache&&(e-t<this._minSpan||e-t>this._maxSpan)?this._shouldChange=!1:(this._shouldChange=!0,this._spanCache=e-t)}_updateRangeFactor(t){const e=this._relatedAxisComponent,n=e.getScale(),r=zs(e,this._isHorizontal),s=r?[1-this._end,1-this._start]:[this._start,this._end];if(r)switch(t){case"startHandler":e.scaleRangeFactorEnd(s[1]);break;case"endHandler":e.scaleRangeFactorStart(s[0]);break;default:e.scaleRangeFactorStart(s[0],!0),e.scaleRangeFactorEnd(s[1])}else switch(t){case"startHandler":e.scaleRangeFactorStart(s[0]);break;case"endHandler":e.scaleRangeFactorEnd(s[1]);break;default:e.scaleRangeFactorEnd(s[1],!0),e.scaleRangeFactorStart(s[0])}const a=n.rangeFactor();a?(this._start=r?1-a[1]:a[0],this._end=r?1-a[0]:a[1]):(this._start=0,this._end=1)}get visible(){return this._visible}constructor(t,e){super(t,e),this.layoutType="none",this._orient="left",this._cacheVisibility=void 0,this._dataUpdating=!1,this._hasInitStateScale=!1,this._shouldChange=!0,this._stateField="x",this._handleStateChange=(n,r,s)=>{var a,o;return this._startValue=n,this._endValue=r,this._newDomain=HY(this._startValue,this._endValue,this._stateScale),(o=(a=this.effect).onZoomChange)===null||o===void 0||o.call(a,s),!0},this.effect={onZoomChange:n=>{var r,s;const a=this._relatedAxisComponent;if(a&&this._filterMode==="axis"){const o=a.getScale(),l=a.getSpec();this._auto&&NY(l)&&this._spec.ignoreBandSize&&(o.bandwidth("auto"),o.maxBandwidth("auto"),o.minBandwidth("auto")),this._updateRangeFactor(n),this._auto&&((s=(r=this._component)===null||r===void 0?void 0:r.setStartAndEnd)===null||s===void 0||s.call(r,this._start,this._end)),a.effect.scaleUpdate({value:"force"})}else zi(this._regions,o=>{var l;(l=o.getViewData())===null||l===void 0||l.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),zi(this._regions,o=>{o.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._visible=!0,this._orient=Ec(t),this._isHorizontal=Ev(this._orient)==="horizontal",this._dataFilterEvent=new Kat(this.type,this._spec,this._handleChange.bind(this),this.getLayoutRect.bind(this),()=>({start:this._start,end:this._end}),()=>this._regions,(()=>this._option).bind(this),()=>this.event)}created(){super.created(),this._setAxisFromSpec(),this._setRegionsFromSpec(),this._initEvent(),this._initData(),this._initStateScale(),this._setStateFromSpec()}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}init(t){super.init(t),this._addTransformToSeries(),this._start===0&&this._end===1||this.effect.onZoomChange()}_compareSpec(t,e){const n=super._compareSpec(t,e);return n.reMake||Ne(e,t)||(n.reRender=!0,n.reMake=!0),n}reInit(t){super.reInit(t),this._marks.forEach(e=>{e.getMarks().forEach(n=>{this.initMarkStyleWithSpec(n,this._spec[n.name])})})}onLayoutStart(t,e){super.onLayoutStart(t,e);const n=this._autoUpdate(t);this._autoVisible(n),this._dataUpdating=!1}updateLayoutAttribute(){this._visible&&this._createOrUpdateComponent(),this._hasInitStateScale||(this._start===0&&this._end===1||(this._newDomain=zXt(this._spec.start,this._startValue,this._spec.end,this._endValue,this._stateScale),this.effect.onZoomChange()),this._hasInitStateScale=!0)}_initAfterLayout(){this._stateScale=null,this._initStateScale(),this._updateScaleRange(),this._setStateFromAxis()}_beforeLayoutEnd(){this._hasInitStateScale?this._updateScaleRange():this._initAfterLayout()}onLayoutEnd(){var t;this._beforeLayoutEnd();const e=!(this._start===0&&this._end===1);this._autoVisible(e),super.onLayoutEnd(),(t=this._relatedAxisComponent)===null||t===void 0||t.updateScaleRange()}getBoundsInRect(t){const e={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0};return this._isHorizontal?(e.y2=e.y1+this._height,e.x2=e.x1+t.width):(e.x2=e.x1+this._width,e.y2=e.y1+t.height),e}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._dataFilterEvent.setEventAttrFromSpec(),this._field=this._spec.field,this._width=this._computeWidth(),this._height=this._computeHeight(),this._visible=(t=this._spec.visible)===null||t===void 0||t}_setAxisFromSpec(){if(L(this._spec.axisId)?this._relatedAxisComponent=this._option.getComponentByUserId(this._spec.axisId):L(this._spec.axisIndex)&&(this._relatedAxisComponent=this._option.getComponentByIndex("axes",this._spec.axisIndex)),N(this._spec.field)&&!this._relatedAxisComponent){const t=this._option.getComponentsByKey("axes"),e=t.find(n=>Ev(n._orient)===Ev(this._orient));if(e)this._relatedAxisComponent=e;else{const n=t.find(r=>!Ge(r.getScale().type));this._relatedAxisComponent=n}}this._relatedAxisComponent&&this._filterMode==="axis"&&(this._relatedAxisComponent.autoIndentOnce=!0)}_setRegionsFromSpec(){var t,e;this._regions=this._relatedAxisComponent?this._relatedAxisComponent.getRegions():this._option.getAllRegions();const n=this._relatedAxisComponent?(e=(t=this._relatedAxisComponent).getBindSeriesFilter)===null||e===void 0?void 0:e.call(t):null;if(L(n)&&(L(n.userId)&&(this._seriesUserId=X(n.userId)),L(n.specIndex)&&(this._seriesIndex=X(n.specIndex))),L(this._spec.seriesId)){const r=X(this._spec.seriesId);this._seriesUserId?this._seriesUserId=this._seriesUserId.filter(s=>r.includes(s)):this._seriesUserId=r}if(L(this._spec.seriesIndex)){const r=X(this._spec.seriesIndex);this._seriesIndex?this._seriesIndex=this._seriesIndex.filter(s=>r.includes(s)):this._seriesIndex=r}if(L(this._spec.regionIndex)){const r=this._option.getRegionsInIndex(X(this._spec.regionIndex));this._regions=this._regions.filter(s=>r.includes(s))}else if(L(this._spec.regionId)){const r=X(this._spec.regionId);this._regions=r.length?this._regions.filter(s=>r.includes(s.id)):[]}}_initData(){const t=[],e=[],n=[],r=[];let s;if(this._relatedAxisComponent){const l={};zi(this._regions,u=>{var c,h;const d=u.coordinate==="cartesian"?u.getXAxisHelper():u.coordinate==="polar"?u.angleAxisHelper:null,f=u.coordinate==="cartesian"?u.getYAxisHelper():u.coordinate==="polar"?u.radiusAxisHelper:null;if(!d||!f)return;const p=d.getAxisId()===this._relatedAxisComponent.id?d:f.getAxisId()===this._relatedAxisComponent.id?f:this._isHorizontal?d:f,g=p===d?f:d,m=Ge(g.getScale(0).type),_=Ge(p.getScale(0).type);t.push(u.getRawData());const v=u.getSpec(),y=u.coordinate==="cartesian"?X(v.xField):X((c=v.angleField)!==null&&c!==void 0?c:v.categoryField),b=u.coordinate==="cartesian"?X(v.yField):X((h=v.radiusField)!==null&&h!==void 0?h:v.valueField);if(l[u.id]=u.type==="link"?["from_xField"]:p===d?y:b,_?(s=!1,n.push(l[u.id])):(s=!0,n.push(l[u.id][0])),this._valueField){const x=u.type==="link"?["from_yField"]:g===d?y:b;m&&r.push(...x)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._originalStateFields=l}else zi(this._regions,l=>{t.push(l.getRawData()),e.push(l),n.push(this._field),this._valueField&&r.push(this._spec.valueField)},{userId:this._seriesUserId,specIndex:this._seriesIndex});const{dataSet:a}=this._option;Ul(a,"dataview",uM),Vt(a,"dataFilterComputeDomain",FXt);const o=new je(a,{name:`${this.type}_${this.id}_data`});o.transform({type:"dataFilterComputeDomain",options:{input:{dataCollection:t,seriesCollection:e,stateFields:n,valueFields:r,isCategoryState:s},output:{stateField:this._stateField,valueField:this._valueField}}},!1),this._data=new Cr(this._option,o),o.reRunAllTransform(),a.multipleDataViewAddListener(t,"change",this._handleDataCollectionChange.bind(this))}_addTransformToSeries(){this._relatedAxisComponent&&this._filterMode==="axis"||(Vt(this._option.dataSet,"dataFilterWithNewDomain",BXt),Vt(this._option.dataSet,"lockStatisticsFilter",LXt),zi(this._regions,t=>{t.getViewDataStatistics().transform({type:"lockStatisticsFilter",options:{originalFields:()=>t.getViewDataStatistics().getFields(),getNewDomain:()=>this._newDomain,field:()=>{var e;return(e=this._field)!==null&&e!==void 0?e:this._parseFieldOfSeries(t)},isContinuous:()=>Ge(this._stateScale.type)},level:1},!1),t.addViewDataFilter({type:"dataFilterWithNewDomain",options:{getNewDomain:()=>this._newDomain,field:()=>{var e;return(e=this._field)!==null&&e!==void 0?e:this._parseFieldOfSeries(t)},isContinuous:()=>Ge(this._stateScale.type)},level:Qo.dataZoomFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex}))}onDataUpdate(){var t;const e=this._computeDomainOfStateScale(Ge(this._stateScale.type));this._stateScale.domain(e,!1),this._handleChange(this._start,this._end,!0),this._spec.auto&&!Ne(this._domainCache,e)&&(this._domainCache=e,this._dataUpdating=!0,(t=this.getChart())===null||t===void 0||t.setLayoutTag(!0,null,!1))}_parseFieldOfSeries(t){var e;return(e=this._originalStateFields)===null||e===void 0?void 0:e[t.id]}_setStateFromSpec(){let t,e;if(this._auto=!!this._spec.auto,this._spec.rangeMode){const[n,r]=this._spec.rangeMode;jY("start",n,this._spec)&&jY("end",r,this._spec)&&(t=n==="percent"?this._spec.start:Jf(this._spec.startValue,this._stateScale,this._isHorizontal),e=r==="percent"?this._spec.end:Jf(this._spec.endValue,this._stateScale,this._isHorizontal))}else t=this._spec.start?this._spec.start:this._spec.startValue?Jf(this._spec.startValue,this._stateScale,this._isHorizontal):0,e=this._spec.end?this._spec.end:this._spec.endValue?Jf(this._spec.endValue,this._stateScale,this._isHorizontal):1;this._start=Math.max(0,Math.min(1,t)),this._end=Math.max(0,Math.min(1,e))}_setStateFromAxis(){var t,e;this._setStateFromSpec();const n=this._relatedAxisComponent;this._startValue=jl(this._start,this._stateScale,zs(n,this._isHorizontal)),this._endValue=jl(this._end,this._stateScale,zs(n,this._isHorizontal)),this._minSpan=(t=this._spec.minSpan)!==null&&t!==void 0?t:0,this._maxSpan=(e=this._spec.maxSpan)!==null&&e!==void 0?e:1,Ge(this._stateScale.type)&&this._stateScale.domain()[0]!==ke(this._stateScale.domain())&&(this._spec.minValueSpan&&(this._minSpan=this._spec.minValueSpan/(ke(this._stateScale.domain())-this._stateScale.domain()[0])),this._spec.maxValueSpan&&(this._maxSpan=this._spec.maxValueSpan/(ke(this._stateScale.domain())-this._stateScale.domain()[0]))),this._minSpan=Math.max(0,this._minSpan),this._maxSpan=Math.min(this._maxSpan,1),n&&(n&&this._filterMode==="axis"||this._start===0&&this._end===1||(this._newDomain=HY(this._startValue,this._endValue,this._stateScale)))}_initStateScale(){var t,e,n,r,s,a;const o=[0,1];if(this._relatedAxisComponent){const l=this._relatedAxisComponent.getScale().clone();this._stateScale=l,(e=(t=l).maxBandwidth)===null||e===void 0||e.call(t,"auto",!0),(r=(n=l).minBandwidth)===null||r===void 0||r.call(n,"auto",!0),(a=(s=l).bandwidth)===null||a===void 0||a.call(s,"auto",!0),l.rangeFactor(o,!0).range(o)}else{let l=!0;this._field&&zi(this._regions,u=>{const c=u.getRawDataStatisticsByField(this._field);et(c?.min)&&et(c?.max)||(l=!1)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._stateScale=l?new vs:new xf,this._stateScale.domain(this._computeDomainOfStateScale(l),!0).range(o)}}_computeDomainOfStateScale(t){if(this._spec.customDomain)return this._spec.customDomain;const e=this._data.getLatestData().map(n=>n[this._stateField]);if(t){const n=e.map(r=>1*r);return e.length?[Rn(n),rn(n)]:[-1/0,1/0]}return e}_autoVisible(t){if(!this._auto)return;t?this.show():this.hide();const e=this._isHorizontal?"height":"width";this.layout.setLayoutRect({[e]:t?this[`_${e}`]:0},{[e]:ct.Built_In})}hide(){var t;(t=this._component)===null||t===void 0||t.hideAll()}show(){var t;(t=this._component)===null||t===void 0||t.showAll()}_autoUpdate(t){var e,n,r,s,a,o;if(!this._auto)return this._cacheVisibility=void 0,!0;const l=this._relatedAxisComponent,u=l?.getSpec(),c=l?.getScale(),h=NY(u);if(!this._dataUpdating&&Nr(c.type)&&t?.height===((e=this._cacheRect)===null||e===void 0?void 0:e.height)&&t?.width===((n=this._cacheRect)===null||n===void 0?void 0:n.width)&&this._fixedBandSize===h?.bandSize)return this._cacheVisibility;let d=!0;if(this._isHorizontal&&t?.width!==((r=this._cacheRect)===null||r===void 0?void 0:r.width)?c.range(l.getInverse()?[t.width,0]:[0,t.width]):t?.height!==((s=this._cacheRect)===null||s===void 0?void 0:s.height)&&c.range(l.getInverse()?[0,t.height]:[t.height,0]),this._cacheRect={width:t?.width,height:t?.height},this._fixedBandSize=h?.bandSize,Nr(c.type)){h&&(this._start||this._end)&&(this.type===lt.scrollBar&&(this._start=0,this._end=1),this._updateRangeFactor());const[f,p]=(a=c.rangeFactor())!==null&&a!==void 0?a:[];d=(!N(f)||!N(p))&&!(f===0&&p===1)}else{const[f,p]=(o=c.rangeFactor())!==null&&o!==void 0?o:[this._start,this._end];d=!(f===0&&p===1)}return this.setStartAndEnd(this._start,this._end),this._cacheVisibility=d,d}_getNeedClearVRenderComponents(){return[this._component]}}Be(RN,wT);class qat extends Wm{_mergeThemeToSpec(t,e){const n=this._theme;let r=t;if(this._shouldMergeThemeToSpec()){const s=o=>{const l=Wt({selectedBackgroundChart:{line:{},area:{}}},this._theme,o),{selectedBackgroundChart:u={}}=o,{line:c,area:h}=u;return c&&c.visible!==!1&&(l.selectedBackgroundChart.line.style=Object.assign(Object.assign({},l.selectedBackgroundChart.line.style),{visible:!0})),h&&h.visible!==!1&&(l.selectedBackgroundChart.area.style=Object.assign(Object.assign({},l.selectedBackgroundChart.area.style),{visible:!0})),l},a=t;r=J(a)?a.map(o=>s(o)):s(a)}return this._adjustPadding(r),{spec:r,theme:n}}}const NXt=`M-0.5-2.4h0.9c0.4,0,0.7,0.3,0.7,0.7v3.3c0,0.4-0.3,0.7-0.7,0.7h-0.9c-0.4,0-0.7-0.3-0.7-0.7v-3.3
C-1.2-2-0.9-2.4-0.5-2.4z M-0.4-1.4L-0.4-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6
C-0.4-1.4-0.4-1.4-0.4-1.4z M0.3-1.4L0.3-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6
C0.3-1.4,0.3-1.4,0.3-1.4z;`,VY=()=>({style:{symbolType:NXt,fill:{type:"palette",key:"sliderHandleColor"},scaleX:1.2,scaleY:1.2,stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},lineWidth:1}}),WY=i=>({area:{style:{visible:i,stroke:!1,fill:{type:"palette",key:"dataZoomChartColor"}}},line:{style:{visible:i,stroke:{type:"palette",key:"dataZoomChartColor"},lineWidth:1}}}),jXt={padding:[12,0],showDetail:"auto",brushSelect:!1,middleHandler:{visible:!1,background:{size:6,style:{stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},cornerRadius:2}},icon:{style:{size:4,fill:{type:"palette",key:"sliderHandleColor"},stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}}},background:{size:20,style:{fill:{type:"palette",key:"sliderRailColor"},lineWidth:0}},selectedBackground:{style:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.1,outerBorder:{stroke:{type:"palette",key:"sliderTrackColor"},strokeOpacity:.2,distance:-.5,lineWidth:1}}},selectedBackgroundChart:WY(!1),startHandler:VY(),endHandler:VY(),startText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},endText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},backgroundChart:WY(!0)};let Kp=class extends RN{constructor(t,e){var n;super(t,e),this.type=lt.dataZoom,this.name=lt.dataZoom,this.transformerConstructor=qat,this.specKey="dataZoom",this.layoutZIndex=ti.DataZoom,this.layoutLevel=Jo.DataZoom,this.layoutType="region-relative",this._isReverseCache=!1,this._dataToPositionX=r=>{const s=this._isHorizontal?0:this._middleHandlerSize,a=this._isHorizontal?this._startHandlerSize/2:0,o=this._isHorizontal?this._stateScale:this._valueScale,l=this._isHorizontal?this._stateField:this._valueField;return o.scale(r[l])+this.getLayoutStartPoint().x+s+a},this._dataToPositionX2=r=>{const s=this._isHorizontal?0:this._middleHandlerSize,a=this._isHorizontal?this._startHandlerSize/2:0,o=this._isHorizontal?this._stateScale:this._valueScale,l=o.domain()[0];return o.scale(l)+this.getLayoutStartPoint().x+s+a},this._dataToPositionY=r=>{const s=this._isHorizontal?this._middleHandlerSize:0,a=this._isHorizontal?0:this._startHandlerSize/2,o=this._isHorizontal?this._valueScale:this._getPreviewStateScale(),l=this._isHorizontal?this._valueField:this._stateField;return o.scale(r[l])+this.getLayoutStartPoint().y+s+a},this._dataToPositionY2=r=>{const s=this._isHorizontal?this._middleHandlerSize:0,a=this._isHorizontal?0:this._startHandlerSize/2,o=this._isHorizontal?this._valueScale:this._getPreviewStateScale(),l=o.domain()[0];return o.scale(l)+this.getLayoutStartPoint().y+s+a},this._valueField="y",this._filterMode=(n=t.filterMode)!==null&&n!==void 0?n:"filter"}_handleChange(t,e,n,r){if(super._handleChange(t,e,n),this._shouldChange)if(n&&this._component)this._component.setStartAndEnd(t,e);else{const s=this._relatedAxisComponent,a=jl(t,this._stateScale,zs(s,this._isHorizontal)),o=jl(e,this._stateScale,zs(s,this._isHorizontal));if(!L(a)||!L(o))return;this._start=t,this._end=e,(it(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(t,e,a,o):this._handleStateChange(a,o,r))&&this.event.emit(Tt.dataZoomChange,{model:this,value:{filterData:this._filterMode!=="axis",start:t,end:e,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){this._data.getDataView().reRunAllTransform();const t=this._computeDomainOfValueScale();t&&(this._valueScale||(this._valueScale=new vs),this._valueScale.domain(t),this._updateValueScaleRange(),this._component&&this._createOrUpdateComponent(!0))}created(){super.created(),this._initValueScale()}updateLayoutAttribute(){this._cacheVisibility!==!1&&super.updateLayoutAttribute()}_beforeLayoutEnd(){super._beforeLayoutEnd();const t=this._relatedAxisComponent;(zs(t,this._isHorizontal)&&!this._isReverseCache||this._auto)&&(this._isReverseCache=zs(t,this._isHorizontal),this.effect.onZoomChange())}clear(){if(this._component){const t=this.getContainer();this._component.removeAllChild(),t&&t.removeChild(this._component),this._component=null}super.clear()}getBoundsInRect(t){var e,n,r,s;const a={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0},o=this._startHandlerSize*((e=this._spec.startHandler.style.scaleX)!==null&&e!==void 0?e:1),l=this._startHandlerSize*((n=this._spec.startHandler.style.scaleY)!==null&&n!==void 0?n:1),u=this._endHandlerSize*((r=this._spec.endHandler.style.scaleX)!==null&&r!==void 0?r:1),c=this._endHandlerSize*((s=this._spec.endHandler.style.scaleY)!==null&&s!==void 0?s:1),h=this._visible?this._isHorizontal?(o-this._startHandlerSize)/2+(u-this._endHandlerSize)/2:(Math.max(o,u)-this._width)/2:0,d=this._visible?this._isHorizontal?(Math.max(l,c)-this._height)/2:(l-this._startHandlerSize)/2+(c-this._endHandlerSize)/2:0;return this._isHorizontal?(a.y2=a.y1+this._height+d,a.x2=a.x1+t.width+h):(a.x2=a.x1+this._width+h,a.y2=a.y1+t.height+d),a}setAttrFromSpec(){var t,e,n,r,s,a,o,l,u,c;super.setAttrFromSpec();const h=this._isHorizontal?Number(this._spec.height):Number(this._spec.width);this._backgroundSize=(e=(t=this._spec.background)===null||t===void 0?void 0:t.size)!==null&&e!==void 0?e:30,this._middleHandlerSize=this._computeMiddleHandlerSize(),N((s=(r=(n=this._spec)===null||n===void 0?void 0:n.startHandler)===null||r===void 0?void 0:r.style)===null||s===void 0?void 0:s.size)&&(this._spec.startHandler.style.size=isNaN(h)?this._backgroundSize:h-this._middleHandlerSize),N((l=(o=(a=this._spec)===null||a===void 0?void 0:a.endHandler)===null||o===void 0?void 0:o.style)===null||l===void 0?void 0:l.size)&&(this._spec.endHandler.style.size=isNaN(h)?this._backgroundSize:h-this._middleHandlerSize);const d=(u=this._spec.startHandler.style.visible)===null||u===void 0||u,f=(c=this._spec.endHandler.style.visible)===null||c===void 0||c;this._startHandlerSize=d?this._spec.startHandler.style.size:0,this._endHandlerSize=f?this._spec.endHandler.style.size:0,this._width=this._computeWidth(),this._height=this._computeHeight()}_initValueScale(){const t=this._computeDomainOfValueScale();if(t){const e=new vs;e.domain(t),this._valueScale=e}}_updateScaleRange(){this._updateStateScaleRange(),this._updateValueScaleRange()}_updateStateScaleRange(){var t,e,n;const r=this._startHandlerSize+this._endHandlerSize;if(!this._stateScale)return;let s;const a=this._isHorizontal?this.getLayoutRect().width-r:this.getLayoutRect().height-r,o=(e=(t=this._relatedAxisComponent)===null||t===void 0?void 0:t.getScale().range())!==null&&e!==void 0?e:[this._startHandlerSize/2,a+this._startHandlerSize/2],l=this._computeWidth(),u=this._computeHeight();s=this._isHorizontal?this._visible?[this._startHandlerSize/2,l-r+this._startHandlerSize/2]:o:this._visible?[this._startHandlerSize/2,u-r+this._startHandlerSize/2]:o,this._stateScale.range(s),(n=this._previewStateScale)===null||n===void 0||n.range(zs(this._relatedAxisComponent,this._isHorizontal)?s.reverse():s)}_updateValueScaleRange(){if(!this._valueScale)return;const t=this._computeWidth(),e=this._computeHeight();this._isHorizontal?this._valueScale.range([e-this._middleHandlerSize,0]):this.layoutOrient==="left"?this._valueScale.range([t-this._middleHandlerSize,0]):this._valueScale.range([0,t-this._middleHandlerSize])}_computeDomainOfValueScale(){const t=this._data.getLatestData().map(n=>n[this._valueField]),e=t.map(n=>1*n);return t.length?[Rn(e),rn(e)]:null}_isScaleValid(t){if(!t||!t.domain())return!1;const e=t.domain();return(!Ge(t.type)||e[0]!==ke(e))&&(!Nr(t.type)||EPt(e).length!==1)}_getXScale(){return this._relatedAxisComponent.getScale().type===this.stateScale.type&&this._isHorizontal?this.stateScale:this._isHorizontal?this._stateScale:this._valueScale}_getYScale(){return this._isHorizontal?this._valueScale:this._stateScale}_computeMiddleHandlerSize(){var t,e,n,r;let s=0;if(!((e=(t=this._spec)===null||t===void 0?void 0:t.middleHandler)===null||e===void 0)&&e.visible){const a=(n=this._spec.middleHandler.icon.style.size)!==null&&n!==void 0?n:8,o=(r=this._spec.middleHandler.background.size)!==null&&r!==void 0?r:40;s+=Math.max(a,o)}return s}_computeWidth(){return this._visible===!1?0:yt(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:Math.max(this._startHandlerSize||0,this._endHandlerSize||0,this._backgroundSize||0)+this._middleHandlerSize}_computeHeight(){return this._visible===!1?0:yt(this._spec.height)?this._spec.height:this._isHorizontal?Math.max(this._startHandlerSize||0,this._endHandlerSize||0,this._backgroundSize||0)+this._middleHandlerSize:this.getLayoutRect().height}_getAttrs(t){var e,n,r,s,a;const o=(e=this._spec)!==null&&e!==void 0?e:{};return Object.assign({zIndex:this.layoutZIndex,start:this._start,end:this._end,position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y},orient:this._orient,size:{width:this._computeWidth(),height:this._computeHeight()},showDetail:o.showDetail,brushSelect:(n=o.brushSelect)!==null&&n!==void 0&&n,zoomLock:(r=o.zoomLock)!==null&&r!==void 0&&r,minSpan:this._minSpan,maxSpan:this._maxSpan,delayType:o.delayType,delayTime:L(o.delayType)?(s=o.delayTime)!==null&&s!==void 0?s:30:0,realTime:(a=o.realTime)===null||a===void 0||a,previewData:t&&this._data.getLatestData(),previewPointsX:t&&this._dataToPositionX,previewPointsY:t&&this._dataToPositionY,tolerance:this._spec.tolerance,isReverse:zs(this._relatedAxisComponent,this._isHorizontal)},this._getComponentAttrs(t))}_getLayoutAttrs(){return{position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y},size:{width:this._computeWidth(),height:this._computeHeight()}}}_createOrUpdateComponent(t){if(this._visible){const e=this._isHorizontal?this._stateScale:this._valueScale,n=this._isHorizontal?this._valueScale:this._stateScale,r=this._isScaleValid(e)&&this._isScaleValid(n)&&this._spec.showBackgroundChart!==!1,s=this._getAttrs(r),a=this._relatedAxisComponent;if(this._component)this._component.setAttributes(s),t&&(this._component.setPreviewData(this._data.getDataView().latestData),r&&(this._isHorizontal?this._component.setPreviewPointsY1(this._dataToPositionY2):this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData(o=>jl(o,this._stateScale,zs(a,this._isHorizontal)))));else{const o=this.getContainer();this._component=new ont(s),this._component.setPreviewData(this._data.getDataView().latestData),this._isHorizontal?r&&this._component.setPreviewPointsY1(this._dataToPositionY2):r&&this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData(l=>jl(l,this._stateScale,zs(a,this._isHorizontal))),this._component.addEventListener("dataZoomChange",l=>{const{start:u,end:c,tag:h}=l.detail;this._handleChange(u,c,void 0,h)}),o.add(this._component)}}}_getComponentAttrs(t){var e,n,r,s,a,o,l,u,c,h,d;const{middleHandler:f={},startText:p={},endText:g={},backgroundChart:m={},selectedBackgroundChart:_={}}=this._spec;return{backgroundStyle:$t((e=this._spec.background)===null||e===void 0?void 0:e.style),startHandlerStyle:$t((n=this._spec.startHandler)===null||n===void 0?void 0:n.style),middleHandlerStyle:f.visible?{visible:!0,icon:$t((r=f.icon)===null||r===void 0?void 0:r.style),background:{size:(s=f.background)===null||s===void 0?void 0:s.size,style:$t((a=f.background)===null||a===void 0?void 0:a.style)}}:{visible:!1},endHandlerStyle:$t((o=this._spec.endHandler)===null||o===void 0?void 0:o.style),startTextStyle:{padding:p.padding,formatMethod:this._getHandlerTextFormatMethod(p),textStyle:$t(p.style)},endTextStyle:{padding:g.padding,formatMethod:this._getHandlerTextFormatMethod(g),textStyle:$t(g.style)},selectedBackgroundStyle:$t(this._spec.selectedBackground.style),dragMaskStyle:$t((l=this._spec.dragMask)===null||l===void 0?void 0:l.style),backgroundChartStyle:t?{line:Wt($t((u=m.line)===null||u===void 0?void 0:u.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},$t((c=m.area)===null||c===void 0?void 0:c.style))}:{line:{visible:!1},area:{visible:!1}},selectedBackgroundChartStyle:t?{line:Wt($t((h=_.line)===null||h===void 0?void 0:h.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},$t((d=_.area)===null||d===void 0?void 0:d.style))}:{line:{visible:!1},area:{visible:!1}},disableTriggerEvent:this._option.disableTriggerEvent}}_getHandlerTextFormatMethod(t){const{formatMethod:e,formatter:n}=t,{formatFunc:r}=Ju(e,n);return r?s=>r(s,{label:s},n):void 0}_getNeedClearVRenderComponents(){return[this._component]}onDataUpdate(){super.onDataUpdate(),this._previewStateScale!==this._stateScale&&(this._previewStateScale=null)}_getPreviewStateScale(){return this._previewStateScale||(zs(this._relatedAxisComponent,this._isHorizontal)?(this._previewStateScale=this._stateScale.clone(),this._previewStateScale.range(this._stateScale.range().reverse())):this._previewStateScale=this._stateScale),this._previewStateScale}};Kp.type=lt.dataZoom,Kp.transformerConstructor=qat,Kp.builtInTheme={dataZoom:jXt},Kp.specKey="dataZoom";const sx=()=>{z.registerComponent(Kp.type,Kp)},HXt={horizontal:{height:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}},vertical:{width:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}}};let Jv=class extends RN{constructor(t,e){var n;super(t,e),this.type=lt.scrollBar,this.name=lt.scrollBar,this.specKey="scrollBar",this.layoutZIndex=ti.DataZoom,this.layoutLevel=Jo.DataZoom,this.layoutType="region-relative",this._filterMode=(n=t.filterMode)!==null&&n!==void 0?n:"axis"}_handleChange(t,e,n){super._handleChange(t,e,n);const r=uk(this._start,t)&&uk(this._end,e);if(this._shouldChange&&(!r||this._spec.realTime===!1)){n&&this._component&&this._component.setAttribute("range",[t,e]),this._start=t,this._end=e;const s=jl(t,this._stateScale,!1),a=jl(e,this._stateScale,!1);(it(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(t,e,s,a):this._handleStateChange(s,a))&&this.event.emit(Tt.scrollBarChange,{model:this,value:{filterData:this._filterMode!=="axis",start:this._start,end:this._end,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){this._spec.auto&&this._data.getDataView().reRunAllTransform()}_beforeLayoutEnd(){var t,e;super._beforeLayoutEnd(),(e=(t=this.effect).onZoomChange)===null||e===void 0||e.call(t)}onLayoutEnd(){this._updateComponentBounds(),super.onLayoutEnd()}_updateScaleRange(){}_updateComponentBounds(){this._component&&this._component.setAttributes({x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height})}_computeWidth(){return this._visible===!1?0:yt(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:ML}_computeHeight(){return this._visible===!1?0:yt(this._spec.height)?this._spec.height:this._isHorizontal?ML:this.getLayoutRect().height}_getAttrs(){var t,e,n,r,s,a;return Object.assign({zIndex:this.layoutZIndex,x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height,range:[this._start,this._end],direction:this._isHorizontal?"horizontal":"vertical",delayType:(t=this._spec)===null||t===void 0?void 0:t.delayType,delayTime:L((e=this._spec)===null||e===void 0?void 0:e.delayType)?(r=(n=this._spec)===null||n===void 0?void 0:n.delayTime)!==null&&r!==void 0?r:30:0,realTime:(a=(s=this._spec)===null||s===void 0?void 0:s.realTime)===null||a===void 0||a},this._getComponentAttrs())}_createOrUpdateComponent(){const t=this._getAttrs();if(this._component)this._component.setAttributes(t);else{const e=this.getContainer();this._component=new y0(t),this._component.addEventListener("scrollDrag",n=>{const r=n.detail.value;this._handleChange(r[0],r[1])}),this._component.addEventListener("scrollUp",n=>{const r=n.detail.value;this._handleChange(r[0],r[1])}),e.add(this._component)}}_getComponentAttrs(){const{rail:t,slider:e,innerPadding:n}=this._spec,r={};return N(n)||(r.padding=n),Lt(t?.style)||(r.railStyle=$t(t.style)),Lt(e?.style)||(r.sliderStyle=$t(e.style)),r.disableTriggerEvent=this._option.disableTriggerEvent,r}_getNeedClearVRenderComponents(){return[this._component]}};Jv.type=lt.scrollBar,Jv.builtInTheme={scrollBar:HXt},Jv.specKey="scrollBar";const ax=()=>{z.registerComponent(Jv.type,Jv)},VXt=(i,t)=>{const{datum:e,title:n,content:r}=t,s=[],a=e.call(null);return n.visible&&s.push({type:"title",index:0,datum:a,spec:n}),X(r).forEach((o,l)=>{o.visible&&s.push({type:"content",index:l,datum:a,spec:o})}),s},$Y=(i,t)=>({fontSize:{type:"token",key:i},fill:{type:"palette",key:t},fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}),WXt={title:{visible:!0,autoLimit:!1,autoFit:!1,style:$Y("l1FontSize","primaryFontColor")},content:{visible:!0,style:$Y("l2FontSize","tertiaryFontColor")}};var $Xt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};let ty=class extends Cs{constructor(){super(...arguments),this.type=lt.indicator,this.name=lt.indicator,this.specKey="indicator",this.layoutType="none",this.layoutZIndex=ti.Indicator,this.layoutLevel=Jo.Indicator,this._gap=0,this._activeDatum=null}static getSpecInfo(t){return tl(t,this.specKey,this.type,e=>e&&e.visible!==!1)}created(){super.created(),this.initData(),this.initEvent()}setAttrFromSpec(){super.setAttrFromSpec(),this._gap=this._spec.gap||0,this._title=this._spec.title,this._content=X(this._spec.content),this._regions=this._option.getRegionsInUserIdOrIndex(X(this._spec.regionId),X(this._spec.regionIndex))}initEvent(){this._option.disableTriggerEvent||this._spec.trigger!=="none"&&(this._spec.trigger==="hover"?(this.event.on("element-highlight:start",t=>{const e=t.graphics[0];this.isRelativeModel(e)&&this.updateDatum(cn(e))}),this.event.on("element-highlight:reset",t=>{this._activeDatum&&this.updateDatum(null)})):(this.event.on("element-select:start",t=>{const e=t.graphics[0];this.isRelativeModel(e)&&this.updateDatum(cn(e))}),this.event.on("element-select:reset",t=>{this._activeDatum&&this.updateDatum(null)})))}updateDatum(t){this._activeDatum=t,this._displayData.updateData();const e=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(e)}initData(){Vt(this._option.dataSet,"indicatorFilter",VXt);const t=new je(this._option.dataSet,{name:`${this.type}_${this.id}_data`});t.transform({type:"indicatorFilter",options:{title:this._title,content:this._content,datum:()=>this._activeDatum}}),t.target.addListener("change",this.updateDatum.bind(this)),this._displayData=new Cr(this._option,t)}updateLayoutAttribute(){const t=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(t),super.updateLayoutAttribute()}_getIndicatorAttrs(){if(this._spec.visible===!1||this._spec.fixed===!1&&this._activeDatum===null)return{visible:!1};const t=this._regions[0],{width:e,height:n}=t.getLayoutRect(),{x:r,y:s}=t.getLayoutStartPoint(),a=this._spec,{content:o,offsetX:l,offsetY:u,limitRatio:c,title:h}=a,d=$Xt(a,["content","offsetX","offsetY","limitRatio","title"]),f=[];return X(o).forEach(p=>{const g=Wt({},this._theme.content,p);f.push({visible:g.visible!==!1&&(!g.field||this._activeDatum!==null),space:g.space||this._gap,autoLimit:g.autoLimit,autoFit:g.autoFit,fitPercent:g.fitPercent,fitStrategy:g.fitStrategy,style:Object.assign(Object.assign({},nG(xa(g.style,["text"]),this._activeDatum)),{text:this._createText(g.field,g.style.text)})})}),Object.assign({visible:!0,size:{width:e,height:n},zIndex:this.layoutZIndex,x:r,y:s,dx:l?or(l,this._computeLayoutRadius()):0,dy:u?or(u,this._computeLayoutRadius()):0,limitRatio:c||1/0,title:{visible:h.visible!==!1&&(!L(h.field)||this._activeDatum!==null),space:h.space||this._gap,autoLimit:h.autoLimit,autoFit:h.autoFit,fitPercent:h.fitPercent,fitStrategy:h.fitStrategy,style:Object.assign(Object.assign({},nG(xa(h.style,["text"]),this._activeDatum)),{text:this._createText(h.field,h.style.text)})},content:f},d)}_createOrUpdateIndicatorComponent(t){if(t.visible===!1)return this._indicatorComponent&&this._indicatorComponent.parent&&this._indicatorComponent.parent.removeChild(this._indicatorComponent),void(this._indicatorComponent=null);if(this._indicatorComponent)Ne(t,this._cacheAttrs)||this._indicatorComponent.setAttributes(t);else{const e=this.getContainer(),n=new z$t(t);n.name="indicator",e.add(n),this._indicatorComponent=n,this._indicatorComponent.on("*",(r,s)=>this._delegateEvent(this._indicatorComponent,r,s))}this._cacheAttrs=t}_createText(t,e){var n;return t?this._activeDatum?this._activeDatum[t]:"":it(e)?(n=e(this._activeDatum,void 0))!==null&&n!==void 0?n:"":e??""}_computeLayoutRadius(){const t=this._regions[0],{width:e,height:n}=t.getLayoutRect();return Math.min(e/2,n/2)}isRelativeModel(t){return this._regions.some(e=>!!e.getSeriesInId(t.context.modelId))}_getNeedClearVRenderComponents(){return[this._indicatorComponent]}clear(){this._cacheAttrs=null,super.clear()}getIndicatorComponent(){return this._indicatorComponent}};ty.type=lt.indicator,ty.builtInTheme={indicator:WXt},ty.specKey="indicator";const Tf=()=>{z.registerComponent(ty.type,ty)},UXt=["sum","average","min","max","variance","standardDeviation","median"];var GXt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};function fh(i,t,e){if(!e)return!1;const n=i.map(a=>1*a),r=Rn(n),s=rn(n);return t<r||t>s}function UY(i,t,e,n,r,s){var a,o;const{relativeSeries:l}=n;let u;return yt(i.x)&&fh(t,i.x,e)&&((o=l==null?void 0:(a=l.getXAxisHelper()).setExtendDomain)===null||o===void 0||o.call(a,"marker_xAxis_extend",i.x)),u=va(i.x)?Ik(i.x,r)+s.x:ph(l.getXAxisHelper(),[i.x])+s.x,u}function GY(i,t,e,n,r,s){var a,o;const{relativeSeries:l}=n;let u;return yt(i.y)&&fh(t,i.y,e)&&((o=(a=l.getYAxisHelper())===null||a===void 0?void 0:a.setExtendDomain)===null||o===void 0||o.call(a,"marker_yAxis_extend",i.y)),u=va(i.y)?Ik(i.y,r)+s.y:ph(l.getYAxisHelper(),[i.y])+s.y,u}function YY(i,t,e,n){var r,s;const{relativeSeries:a}=n;return yt(i.angle)&&fh(t,i.angle,e)&&((s=(r=a.angleAxisHelper)===null||r===void 0?void 0:r.setExtendDomain)===null||s===void 0||s.call(r,"marker_angleAxis_extend",i.angle)),ph(a.angleAxisHelper,[i.angle])}function XY(i,t,e,n){var r,s;const{relativeSeries:a}=n;return yt(i.radius)&&fh(t,i.radius,e)&&((s=(r=a.radiusAxisHelper)===null||r===void 0?void 0:r.setExtendDomain)===null||s===void 0||s.call(r,"marker_radiusAxis_extend",i.radius)),ph(a.radiusAxisHelper,[i.radius])}function Ik(i,t){return Number(i.substring(0,i.length-1))*t/100}function ph(i,t){const e=i.getScale(0);return Ge(e.type)&&e.domain()[0]===e.domain()[1]&&t[0]!==e.domain()[0]?NaN:i.dataToPosition(t)}function av(i){return UXt.includes(i)}function Lk(i,t,e,n,r,s=!1){const a=t.getRegion(),o=a.getLayoutStartPoint(),l=e.getRegion(),u=l.getLayoutStartPoint(),c=Math.abs(Math.min(o.x,u.x)-Math.max(o.x+a.getLayoutRect().width,u.x+l.getLayoutRect().width)),h=Math.abs(Math.min(o.y,u.y)-Math.max(o.y+a.getLayoutRect().height,u.y+l.getLayoutRect().height)),d={relativeSeries:n},f=[],p=i.latestData[0]&&i.latestData[0].latestData?i.latestData[0].latestData:i.latestData,g=n.getXAxisHelper(),m=n.getYAxisHelper(),_=g.getScale(0).domain(),v=m.getScale(0).domain(),y=s&&!g.isContinuous&&!!g.getBandwidth,b=s&&!m.isContinuous&&!!m.getBandwidth,x={min:null,max:null},S={min:null,max:null};return p.forEach(w=>{const A=L(w.x),k=L(w.y);let C,M;if(A&&k)C=UY(w,_,r,d,c,o),M=GY(w,v,r,d,h,o),jS(C,y,x,f.length),jS(M,b,S,f.length),f.push([{x:C,y:M}]);else if(A){C=UY(w,_,r,d,c,o),M=Math.max(o.y+a.getLayoutRect().height,u.y+l.getLayoutRect().height);const R=Math.min(o.y,u.y);jS(C,y,x,f.length),f.push([{x:C,y:M},{x:C,y:R}])}else if(k){C=Math.min(o.x,u.x),M=GY(w,v,r,d,h,o);const R=Math.max(o.x+a.getLayoutRect().width,u.x+l.getLayoutRect().width);jS(M,b,S,f.length),f.push([{x:C,y:M},{x:R,y:M}])}}),YXt(f,g,m,x,S),f}function YXt(i,t,e,n,r){if(n.min||n.max){const s=t.getBandwidth(0)*(1+t.getScale(0).paddingInner());n.min&&i[n.min.index].forEach(a=>a.x-=s/2),n.max&&i[n.max.index].forEach(a=>a.x+=s/2)}if(r.min||r.max){const s=e.getBandwidth(0)*(1+e.getScale(0).paddingInner());r.min&&i[r.min.index].forEach(a=>a.y-=s/2),r.max&&i[r.max.index].forEach(a=>a.y+=s/2)}}function jS(i,t,e,n){return t&&((e.min===null||e.min.value>i)&&(e.min={value:i,index:n}),(e.max===null||e.max.value<i)&&(e.max={value:i,index:n})),i}function ON(i,t,e,n,r){const s={relativeSeries:n},a=[],o=i.latestData[0]&&i.latestData[0].latestData?i.latestData[0].latestData:i.latestData,l=n.angleAxisHelper.getScale(0).domain(),u=n.radiusAxisHelper.getScale(0).domain(),c=Math.min(n.getRegion().getLayoutRect().width/2,n.getRegion().getLayoutRect().height/2);return o.forEach(h=>{const d=L(h.angle),f=L(h.radius);if(d&&f){const p=YY(h,l,r,s),g=XY(h,u,r,s);a.push([{angle:p,radius:g}])}else if(d){const p=YY(h,l,r,s);a.push([{angle:p,radius:-c},{angle:p,radius:c}])}else if(f){const p=XY(h,u,r,s);a.push([{radius:p,angle:0},{radius:p,angle:2*Math.PI}])}}),a}function XXt(i,t){const e=[];return(i.latestData[0]&&i.latestData[0].latestData?i.latestData[0].latestData:i.latestData).forEach(n=>{L(n.areaName)&&e.push([{x:t.nameValueToPosition(n.areaName).x+t.getRegion().getLayoutStartPoint().x,y:t.nameValueToPosition(n.areaName).y+t.getRegion().getLayoutStartPoint().y}])}),e}function DN(i,t,e,n){const r=[],s=i.latestData[0]&&i.latestData[0].latestData?i.latestData[0].latestData:i.latestData,a=J(n);return s.forEach((o,l)=>{var u,c,h,d;const f=o?.getRefRelativeSeries?o.getRefRelativeSeries():t,p=f.getRegion(),g=p.getLayoutStartPoint(),{width:m,height:_}=p.getLayoutRect();let v=0,y=0;if(n){const A=a?n[l]:n,k=A.x,C=A.y;k&&(v=va(k)?Number(k.substring(0,k.length-1))*m/100:k),C&&(y=va(C)?Number(C.substring(0,C.length-1))*_/100:C)}const b=f.getXAxisHelper().getScale(0).domain(),x=f.getYAxisHelper().getScale(0).domain(),S=X(o.x),w=X(o.y);S.length===1&&yt(S[0])&&fh(b,S[0],e)&&((c=(u=f.getXAxisHelper())===null||u===void 0?void 0:u.setExtendDomain)===null||c===void 0||c.call(u,"marker_xAxis_extend",S[0])),w.length===1&&yt(w[0])&&fh(x,w[0],e)&&((d=(h=f.getYAxisHelper())===null||h===void 0?void 0:h.setExtendDomain)===null||d===void 0||d.call(h,"marker_yAxis_extend",w[0])),r.push({x:ph(f.getXAxisHelper(),S)+g.x+v,y:ph(f.getYAxisHelper(),w)+g.y+y})}),r}function Zat(i,t,e){const n=[];return(i.latestData[0]&&i.latestData[0].latestData?i.latestData[0].latestData:i.latestData).forEach(r=>{var s,a,o,l;const u=r?.getRefRelativeSeries?r.getRefRelativeSeries():t,c=u.angleAxisHelper.getScale(0).domain(),h=u.radiusAxisHelper.getScale(0).domain(),d=X(r.angle),f=X(r.radius);d.length===1&&yt(d[0])&&fh(c,d[0],e)&&((a=(s=u.angleAxisHelper)===null||s===void 0?void 0:s.setExtendDomain)===null||a===void 0||a.call(s,"marker_xAxis_extend",d[0])),f.length===1&&yt(f[0])&&fh(h,f[0],e)&&((l=(o=u.radiusAxisHelper)===null||o===void 0?void 0:o.setExtendDomain)===null||l===void 0||l.call(o,"marker_yAxis_extend",f[0])),n.push({angle:ph(u.angleAxisHelper,d),radius:ph(u.radiusAxisHelper,f)})}),n}function KY(i,t,e){let{x:n,y:r}=i;return va(n)&&(n=Ik(n,t)),va(r)&&(r=Ik(r,e)),{x:n,y:r}}function IN(i,t,e){let n;if(n=it(i)?X(i(t.getData().getLatestData(),t)):X(i),e){const a=t.getRegion(),{x:o,y:l}=a.getLayoutStartPoint(),{width:u,height:c}=a.getLayoutRect();return n.map(h=>{let{x:d,y:f}=KY(h,u,c);return d+=o,f+=l,{x:d,y:f}})}const{width:r,height:s}=t.getOption().getChart().getViewRect();return n.map(a=>KY(a,r,s))}function LN(i){let t=1/0,e=-1/0,n=1/0,r=-1/0;return i.forEach(s=>{const a=s.getLayoutStartPoint(),o=s.getLayoutRect();a.x<t&&(t=a.x),a.x+o.width>e&&(e=a.x+o.width),a.y<n&&(n=a.y),a.y+o.height>r&&(r=a.y+o.height)}),{minX:t,maxX:e,minY:n,maxY:r}}function BN(i,t,e){const{labelBackground:n={},style:r,shape:s}=i,a=GXt(i,["labelBackground","style","shape"]);if(i.visible!==!1){const o=a;return s?.visible?o.shape=Object.assign({visible:!0},$t(s.style)):o.shape={visible:!1},n.visible!==!1?(o.panel=Object.assign({visible:!0,customShape:n.customShape},$a($t(n.style),t,e)),L(n.padding)&&(o.padding=zr(n.padding))):(o.panel={visible:!1},o.padding=0),r&&(o.textStyle=$a($t(r),t,e)),o}return{visible:!1}}function $s(i,t,e){for(const n in i)it(i[n])&&(i[n]=i[n](t,e));return i}function $a(i,t,e){return it(i)?i(t,e):i}function qY(i,t){return it(i)?i(t):i}function ZY(i,t,e){return L(i)?t==="regionLeft"?e.getLayoutStartPoint().x-i.x:t==="regionRight"?e.getLayoutStartPoint().x+e.getLayoutRect().width-i.x:t==="regionTop"?e.getLayoutStartPoint().y-i.y:t==="regionBottom"?e.getLayoutStartPoint().y+e.getLayoutRect().height-i.y:t:t}function Qat(i){return{isXProcess:L(i.x),isYProcess:L(i.y),isX1Process:L(i.x1),isY1Process:L(i.y1),isAngleProcess:L(i.angle),isRadiusProcess:L(i.radius),isAngle1Process:L(i.angle1),isRadius1Process:L(i.radius1),isCoordinatesProcess:L(i.coordinates),isValidProcess:L(i.process)}}function Td(i){const{isXProcess:t,isYProcess:e,isX1Process:n,isY1Process:r,isAngleProcess:s,isRadiusProcess:a,isAngle1Process:o,isRadius1Process:l,isCoordinatesProcess:u,isValidProcess:c}=Qat(i);return{doXProcess:t&&!e&&!r,doXYY1Process:t&&e&&r,doYProcess:e&&!t&&!n,doYXX1Process:e&&t&&n,doXYProcess:t&&e&&n&&r,doAngleProcess:s&&!o&&!a&&!l,doRadiusProcess:a&&!l&&!s&&!o,doAngRadRad1Process:s&&!o&&a&&l,doRadAngAng1Process:a&&s&&o&&!l,doRadAngProcess:s&&a&&o&&l,doCoordinatesProcess:u&&(!c||"process"in i&&"xy"in i.process)}}function Pd(i){const{isXProcess:t,isYProcess:e,isX1Process:n,isY1Process:r,isAngleProcess:s,isRadiusProcess:a,isAngle1Process:o,isRadius1Process:l,isCoordinatesProcess:u}=Qat(i);return{doXProcess:t&&n&&!e&&!r,doYProcess:e&&r&&!t&&!n,doXYProcess:t&&n&&e&&r,doAngleProcess:s&&o&&!a&&!l,doRadiusProcess:a&&l&&!s&&!o,doRadAngProcess:s&&a&&o&&l,doCoordinatesProcess:u}}function TL(i){return{doXYProcess:L(i.x)&&L(i.y),doPolarProcess:L(i.angle)&&L(i.radius),doGeoProcess:L(i.areaName)}}function KXt(i,t,e,n=0){const r=[],s=i.y-t.y,a=i.x-t.x;switch(e){case"top":r.push(i),r.push({x:i.x,y:s>0?i.y-n-Math.abs(s):i.y-n}),r.push({x:t.x,y:s>0?t.y-n:t.y-n-Math.abs(s)}),r.push(t);break;case"bottom":r.push(i),r.push({x:i.x,y:s<0?i.y+n+Math.abs(s):i.y+n}),r.push({x:t.x,y:s<0?t.y+n:t.y+n+Math.abs(s)}),r.push(t);break;case"left":r.push(i),r.push({x:a>0?i.x-n-Math.abs(a):i.x-n,y:i.y}),r.push({x:a>0?t.x-n:t.x-n-Math.abs(a),y:t.y}),r.push(t);break;case"right":r.push(i),r.push({x:a>0?i.x+n:i.x+n+Math.abs(a),y:i.y}),r.push({x:a>0?t.x+n+Math.abs(a):t.x+n,y:t.y}),r.push(t)}return r}function qXt(i,t,e,n=0){const r=i.y-t.y,s=i.x-t.x;return e==="bottom"?{dx:s>0?-s/2:Math.abs(s/2),dy:r>0?n:Math.abs(r)+n}:e==="top"?{dx:s>0?-Math.abs(s/2):+Math.abs(s/2),dy:r>0?-(Math.abs(r)+n):-n}:e==="left"?{dx:s>0?-s-n:-n,dy:r>0?-r/2:Math.abs(r/2)}:e==="right"?{dx:s>0?n:Math.abs(s)+n,dy:r>0?-r/2:Math.abs(r/2)}:{}}var ZXt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};const QXt=(i,t)=>{const e=i[0].latestData;return Tnt(e,t.field)},JXt=(i,t)=>{const e=i[0].latestData;return sz(e,t.field)};function tKt(i,t){const e=i[0].latestData;return C0(e,t.field)}function eKt(i,t){const e=i[0].latestData;return az(e,t.field)}function iKt(i,t){const e=i[0].latestData;return Pnt(e,t.field)}function nKt(i,t){const e=i[0].latestData;return c5t(e,t.field)}function rKt(i,t){const e=i[0].latestData;return h5t(e,t.field)}function Jat(i,t){let e;if(t.coordinates){const r=t,{coordinates:s,coordinateType:a,getSeriesByIdOrIndex:o}=r,l=ZXt(r,["coordinates","coordinateType","getSeriesByIdOrIndex"]);let u,c;if(it(s)){const h=t.getRelativeSeries();u=s(h.getData().getLatestData(),h)}else u=s;u=X(u),e=u.map(h=>{const d=o(h.refRelativeSeriesId,h.refRelativeSeriesIndex);if(a==="cartesian"){const{xField:f,yField:p}=d.getSpec(),{xFieldDim:g,xFieldIndex:m,yFieldDim:_,yFieldIndex:v}=h;let y=f;L(m)&&(y=X(f)[m]),g&&X(f).includes(g)&&(y=g);let b=p;L(v)&&(b=X(p)[v]),_&&X(p).includes(_)&&(b=_),c=Object.assign({x:void 0,y:void 0},l),Ht(h[y])&&av(h[y])?c.x={field:y,aggrType:h[y]}:c.x=X(y).map(x=>h[x]),Ht(h[b])&&av(h[b])?c.y={field:b,aggrType:h[b]}:c.y=X(b).map(x=>h[x])}else if(a==="polar"){const{valueField:f,categoryField:p}=d.getSpec(),{angleFieldDim:g,angleFieldIndex:m}=h;let _=p;L(m)&&(_=X(p)[m]),g&&X(p).includes(g)&&(_=g);const v=f;c=Object.assign({angle:void 0,radius:void 0},l),Ht(h[_])&&av(h[_])?c.angle={field:_,aggrType:h[_]}:c.angle=X(_).map(y=>h[y]),Ht(h[v])&&av(h[v])?c.radius={field:v,aggrType:h[v]}:c.radius=X(v).map(y=>h[y])}return c.getRefRelativeSeries=()=>d,c})}else e=t;const n=[];return e.forEach(r=>{const s={x:null,y:null,angle:null,radius:null,areaName:null};if(L(r.x)){const a=r.x;J(a)?s.x=a.map(o=>cu(o,i,r)):s.x=cu(a,i,r)}if(L(r.y)){const a=r.y;J(a)?s.y=a.map(o=>cu(o,i,r)):s.y=cu(a,i,r)}if(L(r.angle)){const a=r.angle;J(a)?s.angle=a.map(o=>cu(o,i,r)):s.angle=cu(a,i,r)}if(L(r.radius)){const a=r.radius;J(a)?s.radius=a.map(o=>cu(o,i,r)):s.radius=cu(a,i,r)}if(L(r.areaName)){const a=r.areaName;s.areaName=cu(a,i,r)}r.getRefRelativeSeries&&(s.getRefRelativeSeries=r.getRefRelativeSeries),n.push(s)}),n}const sKt={min:QXt,max:JXt,sum:tKt,average:eKt,variance:iKt,standardDeviation:nKt,median:rKt};function cu(i,t,e){const n=e.getRelativeSeries(),r=e.getStartRelativeSeries(),s=e.getEndRelativeSeries(),a=n.getData().getLatestData(),o=r.getData().getLatestData(),l=s.getData().getLatestData();if(it(i))return i(a,o,l,n,r,s);if(no(i)){const{aggrType:u,field:c}=i;return sKt[u](t,{field:c})}return i}function tot(i,t){if(t&&t.getRelativeSeries){const e=t.getRelativeSeries();if(e){const n=e.getViewData();return n&&n.latestData&&n.latestData.length?i:[]}}return i}class FN extends Cs{constructor(){super(...arguments),this.layoutType="none",this._layoutOffsetX=0,this._layoutOffsetY=0}getRelativeSeries(){return this._relativeSeries}getMarkerData(){return this._markerData}static _getMarkerCoordinateType(t){return"cartesian"}static getSpecInfo(t){return tl(t,this.specKey,this.type,e=>e.visible!==!1&&this._getMarkerCoordinateType(e)===this.coordinateType)}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkerAttributeContext(){this._markAttributeContext={relativeSeries:this._relativeSeries,startRelativeSeries:this._startRelativeSeries,endRelativeSeries:this._endRelativeSeries,vchart:this._option.globalInstance}}created(){super.created(),this._bindSeries(),this._initDataView(),this.initEvent(),this._buildMarkerAttributeContext()}_getAllRelativeSeries(){return{getRelativeSeries:()=>this._relativeSeries,getStartRelativeSeries:()=>this._startRelativeSeries,getEndRelativeSeries:()=>this._endRelativeSeries}}_getFieldInfoFromSpec(t,e,n){const r={x:"xField",y:"yField",radius:"valueField",angle:"categoryField",areaName:"nameField"};return Ht(e)&&av(e)?{field:n.getSpec()[r[t]],aggrType:e}:e}_processSpecByDims(t){const e=this._relativeSeries,n={};return t.forEach(r=>n[r.dim]=this._getFieldInfoFromSpec(r.dim,r.specValue,e)),Object.assign(Object.assign({},n),this._getAllRelativeSeries())}_processSpecCoo(t){return Object.assign(Object.assign({coordinates:t.coordinates||t.coordinate},this._getAllRelativeSeries()),{getSeriesByIdOrIndex:(e,n)=>this._getSeriesByIdOrIndex(e,n),coordinateType:this.coordinateType})}_getRelativeDataView(){if(this._specifiedDataSeries){let t=[];X(this._specifiedDataSeries).forEach(n=>{t=t.concat(n.getViewData().latestData)});const e=new lh;return e.registerParser("array",iJ),new je(e).parse(t,{type:"array"})}return this._relativeSeries.getViewData()}updateLayoutAttribute(){var t,e,n;if((t=this._spec.visible)===null||t===void 0||t){if(!this._markerComponent){const r=this._createMarkerComponent();r.name=(e=this._spec.name)!==null&&e!==void 0?e:this.type,r.id=(n=this._spec.id)!==null&&n!==void 0?n:`${this.type}-${this.id}`,this._markerComponent=r,this.getContainer().add(this._markerComponent),this._markerComponent.on("*",(s,a)=>{this._delegateEvent(this._markerComponent,s,a,null,this.getMarkerData.bind(this))})}this._markerLayout()}super.updateLayoutAttribute()}_getSeriesByIdOrIndex(t,e){var n,r;let s;return s=(n=this._option.getSeriesInUserIdOrIndex(L(t)?[t]:[],[e]))===null||n===void 0?void 0:n[0],s||(s=(r=this._relativeSeries)!==null&&r!==void 0?r:this._getFirstSeries()),s}_bindSeries(){const t=this._spec;this._relativeSeries=this._getSeriesByIdOrIndex(t.relativeSeriesId,t.relativeSeriesIndex),this._startRelativeSeries=this._getSeriesByIdOrIndex(t.startRelativeSeriesId,t.startRelativeSeriesIndex),this._endRelativeSeries=this._getSeriesByIdOrIndex(t.endRelativeSeriesId,t.endRelativeSeriesIndex),t.specifiedDataSeriesIndex&&t.specifiedDataSeriesIndex==="all"||t.specifiedDataSeriesId&&t.specifiedDataSeriesId==="all"?this._specifiedDataSeries=this._option.getAllSeries():(t.specifiedDataSeriesIndex||t.specifiedDataSeriesId)&&(this._specifiedDataSeries=this._getSeriesByIdOrIndex(t.specifiedDataSeriesId,t.specifiedDataSeriesIndex))}initEvent(){this._relativeSeries.coordinate!=="cartesian"&&(this._relativeSeries.event.on("zoom",this._markerLayout.bind(this)),this._relativeSeries.event.on("panmove",this._markerLayout.bind(this)),this._relativeSeries.event.on("scroll",this._markerLayout.bind(this)))}clear(){super.clear(),this._firstSeries=null}_getFirstSeries(){var t;if(this._firstSeries)return this._firstSeries;const e=oz(this._regions);return e?(this._firstSeries=e,e):((t=this._option)===null||t===void 0||t.onError("need at least one series"),null)}_getNeedClearVRenderComponents(){return[this._markerComponent]}onLayoutStart(t,e){N(this._spec.offsetX)||(this._layoutOffsetX=en(this._spec.offsetX,e.width,e)),N(this._spec.offsetY)||(this._layoutOffsetY=en(this._spec.offsetY,e.height,e)),super.onLayoutStart(t,e)}_compareSpec(t,e){const n=super._compareSpec(t,e);return Ne(e,t)||(n.reRender=!0,n.reMake=!0,n.change=!0),n}_initCommonDataView(){const{options:t}=this._computeOptions(),e=this._getRelativeDataView();Vt(this._option.dataSet,"markerAggregation",Jat),Vt(this._option.dataSet,"markerFilter",tot);const n=new je(this._option.dataSet,{name:`${this.type}_${this.id}_data`});n.parse([e],{type:"dataview"}),n.transform({type:"markerAggregation",options:t}),n.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),n.target.on("change",()=>{this._markerLayout()}),this._markerData=n}}function aKt(i,t){const e=i[0].latestData;return d5t(e,t.fieldX,t.fieldY)}class zN extends FN{constructor(){super(...arguments),this.specKey="markLine",this.layoutZIndex=ti.MarkLine}static _getMarkerCoordinateType(t){const{doAngleProcess:e,doRadiusProcess:n,doAngRadRad1Process:r,doRadAngAng1Process:s,doRadAngProcess:a}=Td(t);return t.coordinateType==="polar"||e||n||r||s||a?"polar":"cartesian"}_createMarkerComponent(){var t,e,n,r,s,a,o,l,u,c,h,d,f;const{startSymbol:p={},endSymbol:g={}}=this._spec,m=X((t=this._spec.label)!==null&&t!==void 0?t:{}),_={zIndex:this.layoutZIndex,interactive:(e=this._spec.interactive)===null||e===void 0||e,hover:(n=this._spec.interactive)===null||n===void 0||n,select:(r=this._spec.interactive)===null||r===void 0||r,points:[{x:0,y:0},{x:0,y:0}],center:{x:0,y:0},radius:0,startAngle:0,endAngle:0,lineStyle:$a($t((s=this._spec.line)===null||s===void 0?void 0:s.style),this._markerData,this._markAttributeContext),clipInRange:(a=this._spec.clip)!==null&&a!==void 0&&a,label:m.map(v=>BN(v,this._markerData,this._markAttributeContext)),state:{line:$s((l=(o=this._spec.line)===null||o===void 0?void 0:o.state)!==null&&l!==void 0?l:{},this._markerData,this._markAttributeContext),lineStartSymbol:$s((c=(u=this._spec.startSymbol)===null||u===void 0?void 0:u.state)!==null&&c!==void 0?c:{},this._markerData,this._markAttributeContext),lineEndSymbol:$s((d=(h=this._spec.endSymbol)===null||h===void 0?void 0:h.state)!==null&&d!==void 0?d:{},this._markerData,this._markAttributeContext),label:m.map(v=>{var y;return $s((y=v.state)!==null&&y!==void 0?y:{},this._markerData,this._markAttributeContext)}),labelBackground:m.map(v=>{var y,b;return $s((b=(y=v.labelBackground)===null||y===void 0?void 0:y.state)!==null&&b!==void 0?b:{},this._markerData,this._markAttributeContext)})},animation:(f=this._spec.animation)!==null&&f!==void 0&&f,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return p.visible?_.startSymbol=Object.assign(Object.assign({},p),{visible:!0,style:$a($t(p.style),this._markerData,this._markAttributeContext)}):_.startSymbol={visible:!1},g.visible?_.endSymbol=Object.assign(Object.assign({},g),{visible:!0,style:$a($t(g.style),this._markerData,this._markAttributeContext)}):_.endSymbol={visible:!1},this._newMarkLineComponent(_)}_getUpdateMarkerAttrs(){var t,e;const n=this._spec,r=this._markerData,s=this._startRelativeSeries,a=this._endRelativeSeries,o=this._relativeSeries,l=this._computePointsAttr(),u=o.getViewData().latestData,c=r.latestData[0]&&r.latestData[0].latestData?r.latestData[0].latestData:r.latestData;let h;if(n.clip||X(n.label).some(m=>m?.confine)){const{minX:m,maxX:_,minY:v,maxY:y}=LN([s.getRegion(),a.getRegion(),o.getRegion()]);h={x:m,y:v,width:_-m,height:y-v}}const d=(e=(t=this._markerComponent)===null||t===void 0?void 0:t.attribute)!==null&&e!==void 0?e:{},f=X(d.label),p=X(this._spec.label),g=f.map((m,_)=>{const v=p[_]||{};return Object.assign(Object.assign({},m),{text:v.formatMethod?v.formatMethod(c,u):m?.text})});return Object.assign(Object.assign({},l),{label:g,limitRect:h,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}_markerLayout(){var t;const e=this._getUpdateMarkerAttrs();(t=this._markerComponent)===null||t===void 0||t.setAttributes(e)}_initDataView(){const t=this._spec,e="coordinates"in t,{doXProcess:n,doYProcess:r,doXYY1Process:s,doYXX1Process:a,doXYProcess:o,doAngleProcess:l,doRadiusProcess:u,doAngRadRad1Process:c,doRadAngAng1Process:h,doRadAngProcess:d}=Td(t);if(this._markerData=this._getRelativeDataView(),!(n||r||s||a||o||l||u||c||h||d||e))return;Vt(this._option.dataSet,"markerAggregation",Jat),Vt(this._option.dataSet,"markerRegression",aKt),Vt(this._option.dataSet,"markerFilter",tot);const{options:f,needAggr:p,needRegr:g,processData:m}=this._computeOptions(),_=new je(this._option.dataSet);_.parse([m],{type:"dataview"}),p&&_.transform({type:"markerAggregation",options:f}),g&&_.transform({type:"markerRegression",options:f}),_.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),_.target.on("change",()=>{this._markerLayout()}),this._markerData=_}}zN.specKey="markLine";const eot=()=>({style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fontStyle:"normal",fill:{type:"palette",key:"primaryFontColor"}},labelBackground:{padding:{top:2,bottom:2,right:4,left:4},style:{cornerRadius:3,fill:{type:"palette",key:"markLabelBackgroundColor"}}}}),QY=i=>({visible:i,symbolType:"triangle",size:10,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}}),iot=eot();iot.refY=5;const not={line:{style:{lineDash:[3,3],stroke:{type:"palette",key:"markLineStrokeColor"}}},startSymbol:QY(!1),endSymbol:QY(!0),label:iot};class ey extends zN{constructor(){super(...arguments),this.type=lt.markLine,this.name=lt.markLine,this.coordinateType="cartesian"}_newMarkLineComponent(t){return new QM(t)}_computePointsAttr(){var t;const e=this._spec,n=this._markerData,r=this._startRelativeSeries,s=this._endRelativeSeries,a=this._relativeSeries,o=L(e.coordinates),l=L(e.process),u=l&&L(e.process.x),c=l&&L(e.process.y),h=L(e.positions),d=(t=e.autoRange)!==null&&t!==void 0&&t,{doXProcess:f,doYProcess:p,doXYY1Process:g,doYXX1Process:m,doXYProcess:_,doCoordinatesProcess:v}=Td(e);let y=[];if(f||g||p||m||_||o&&u||o&&c){const b=Lk(n,r,s,a,d);y=b.length===1?b[0]:b.map(x=>x[0])}else v?y=DN(n,a,d,e.coordinatesOffset):h&&(y=IN(e.positions,a,e.regionRelative));return{points:y}}_markerLayout(){var t,e,n,r,s;const a=this._getUpdateMarkerAttrs();if(this._spec.type==="type-step"){const o=this._startRelativeSeries,l=this._endRelativeSeries,{multiSegment:u,mainSegmentIndex:c}=this._spec.line||{},{connectDirection:h,expandDistance:d=0}=this._spec;let f;if(va(d)){const S=o.getRegion(),w=S.getLayoutStartPoint(),A=l.getRegion(),k=A.getLayoutStartPoint();if(h==="bottom"||h==="top"){const C=Math.abs(Math.min(w.y,k.y)-Math.max(w.y+S.getLayoutRect().height,k.y+A.getLayoutRect().height));f=Number(d.substring(0,d.length-1))*C/100}else{const C=Math.abs(Math.min(w.x,k.x)-Math.max(w.x+S.getLayoutRect().width,k.x+A.getLayoutRect().width));f=Number(d.substring(0,d.length-1))*C/100}}else f=d;const{points:p,limitRect:g}=a;if(!p||p.length<2)return void((t=this._markerComponent)===null||t===void 0||t.setAttributes(a));const m=KXt(p[0],p[1],h,f);let _;_=u&&L(c)?{position:"middle",autoRotate:!1}:Object.assign({position:"start",autoRotate:!1},qXt(p[0],p[1],h,f));const v=(n=(e=this._markerComponent)===null||e===void 0?void 0:e.attribute)!==null&&n!==void 0?n:{},y=X(v.label),b=X(a.label),x=X(this._spec.label);(r=this._markerComponent)===null||r===void 0||r.setAttributes({points:u?[[m[0],m[1]],[m[1],m[2]],[m[2],m[3]]]:m,label:b.map((S,w)=>{var A,k,C,M;let R=0,P=0,O=(A=_.dx)!==null&&A!==void 0?A:0,T=(k=_.dy)!==null&&k!==void 0?k:0;const D=(C=x[w])!==null&&C!==void 0?C:x[0];return et(D?.refX)&&(R+=D.refX),et(D?.refY)&&(P+=D.refY),et(D?.dx)&&(O+=D.dx),et(D?.dy)&&(T+=D.dy),Object.assign(Object.assign(Object.assign({},S),_),{refX:R,refY:P,dx:O,dy:T,textStyle:Object.assign(Object.assign({},(M=y[w])===null||M===void 0?void 0:M.textStyle),{textAlign:"center",textBaseline:"middle"})})}),limitRect:g,multiSegment:u,mainSegmentIndex:c,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}else(s=this._markerComponent)===null||s===void 0||s.setAttributes(a)}_computeOptions(){let t,e=this._getRelativeDataView(),n=!0,r=!1;const s=this._spec,a=this._relativeSeries,{doXProcess:o,doYProcess:l,doXYY1Process:u,doYXX1Process:c,doXYProcess:h,doCoordinatesProcess:d}=Td(s);if(h)t=[this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y}]),this._processSpecByDims([{dim:"x",specValue:s.x1},{dim:"y",specValue:s.y1}])];else if(o)t=[this._processSpecByDims([{dim:"x",specValue:s.x}])];else if(l)t=[this._processSpecByDims([{dim:"y",specValue:s.y}])];else if(u)t=[this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y}]),this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y1}])];else if(c)t=[this._processSpecByDims([{dim:"x",specValue:s.x},{dim:"y",specValue:s.y}]),this._processSpecByDims([{dim:"x",specValue:s.x1},{dim:"y",specValue:s.y}])];else if(d){if(t=this._processSpecCoo(s),n=!1,e=new je(this._option.dataSet,{name:`${this.type}_${this.id}_data`}).parse([a.getViewData()],{type:"dataview"}).transform({type:"markerAggregation",options:t}),s.process&&L(s.process.x)&&(t=[this._processSpecByDims([{dim:"x",specValue:s.process.x}])],n=!0),s.process&&L(s.process.y)&&(t=t=[this._processSpecByDims([{dim:"y",specValue:s.process.y}])],n=!0),s.process&&L(s.process.xy)){const{xField:f,yField:p}=a.getSpec();t={fieldX:f,fieldY:p},r=!0}}else n=!1;return{options:t,needAggr:n,needRegr:r,processData:e}}}ey.type=lt.markLine,ey.coordinateType="cartesian",ey.builtInTheme={markLine:not};const zT=()=>{z.registerComponent(ey.type,ey),pnt()};class iy extends zN{constructor(){super(...arguments),this.type=lt.polarMarkLine,this.name=lt.polarMarkLine,this.coordinateType="polar"}_newMarkLineComponent(t){const{doRadiusProcess:e,doRadAngAng1Process:n}=Td(this._spec);return e||n?new Su(t):new QM(t)}_computePointsAttr(){var t;const e=this._spec,n=this._markerData,r=this._startRelativeSeries,s=this._endRelativeSeries,a=this._relativeSeries,o=(t=e.autoRange)!==null&&t!==void 0&&t,{doAngleProcess:l,doRadiusProcess:u,doAngRadRad1Process:c,doRadAngAng1Process:h,doRadAngProcess:d,doCoordinatesProcess:f}=Td(e);let p=[],g={};const m={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if(l||u||c||h||d){const _=ON(n,r,s,a,o);p=_.length===1?_[0]:_.map(v=>v[0]),g=p[0].radius===p[1].radius?{radius:p[0].radius,startAngle:p[0].angle,endAngle:p[1].angle,center:m}:{points:p.map(v=>yi(m,v.radius,v.angle))}}else f&&(p=Zat(n,a,o),g={points:p.map(_=>yi(m,_.radius,_.angle))});return g}_computeOptions(){const t=this._spec,{doAngleProcess:e,doRadiusProcess:n,doAngRadRad1Process:r,doRadAngAng1Process:s,doRadAngProcess:a,doCoordinatesProcess:o}=Td(t);let l;const u=this._getRelativeDataView();return a?l=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius1}])]:e?l=[this._processSpecByDims([{dim:"angle",specValue:t.angle}])]:n?l=[this._processSpecByDims([{dim:"radius",specValue:t.radius}])]:r?l=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius1}])]:s?l=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius}])]:o&&(l=this._processSpecCoo(t)),{options:l,needAggr:!0,needRegr:!1,processData:u}}}iy.type=lt.polarMarkLine,iy.coordinateType="polar",iy.builtInTheme={polarMarkLine:not};const rot=()=>{z.registerComponent(iy.type,iy),M$t(),pnt()},oKt={padding:{top:4,bottom:20},textStyle:{fontSize:{type:"token",key:"l3FontSize"},lineHeight:{type:"token",key:"l3LineHeight"},fill:{type:"palette",key:"primaryFontColor"}},subtextStyle:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fill:{type:"palette",key:"tertiaryFontColor"}}};let ny=class extends Cs{get orient(){return this._orient}constructor(t,e){super(t,e),this.type=lt.title,this.specKey=lt.title,this.layoutType="normal",this.layoutZIndex=ti.Title,this.layoutLevel=Jo.Title,this._orient="top",this._orient=cz(t.orient)?t.orient:"top"}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}static getSpecInfo(t){return tl(t,this.specKey,lt.title,e=>e.visible!==!1)}_compareSpec(t,e){const n=super._compareSpec(t,e);return e?.orient===t?.orient&&e?.visible===t.visible||(n.reMake=!0),n.change=!0,n.reRender=!0,n}afterSetLayoutStartPoint(t){et(t.x)&&this._titleComponent&&this._titleComponent.setAttribute("x",t.x),et(t.y)&&this._titleComponent&&this._titleComponent.setAttribute("y",t.y),super.afterSetLayoutStartPoint(t)}getBoundsInRect(t){let e={};this.setLayoutRect(t);const n=this._getTitleAttrs();this._createOrUpdateTitleComponent(n),e=this._getTitleLayoutRect();const{x:r,y:s}=this.getLayoutStartPoint();return{x1:r,y1:s,x2:r+e.width,y2:s+e.height}}_getTitleLayoutRect(){const t=this._titleComponent.AABBBounds;return{width:this._spec.width?this._spec.width:et(t.width())?t.width():0,height:this._spec.height?this._spec.height:et(t.height())?t.height():0}}_getTitleAttrs(){var t,e,n,r,s,a,o,l;if(this._spec.visible===!1)return{visible:!1};const u=this.getLayoutRect(),c=en(this._spec.width,u.width,null,u.width),h=en(this._spec.maxWidth,u.width,null,u.width),d=Math.max(Math.min(c,h,u.width),0),f=Object.assign(Object.assign({},xa(this._spec,["padding"])),{textType:(t=this._spec.textType)!==null&&t!==void 0?t:"text",text:(e=this._spec.text)!==null&&e!==void 0?e:"",subtextType:(n=this._spec.subtextType)!==null&&n!==void 0?n:"text",subtext:(r=this._spec.subtext)!==null&&r!==void 0?r:"",x:(s=this._spec.x)!==null&&s!==void 0?s:0,y:(a=this._spec.y)!==null&&a!==void 0?a:0,height:this._spec.height,minWidth:this._spec.minWidth,maxWidth:d,minHeight:this._spec.minHeight,maxHeight:this._spec.maxHeight,padding:this._spec.innerPadding,align:(o=this._spec.align)!==null&&o!==void 0?o:"left",verticalAlign:(l=this._spec.verticalAlign)!==null&&l!==void 0?l:"top",textStyle:Object.assign({width:d,maxLineWidth:d},this._spec.textStyle),subtextStyle:Object.assign({maxLineWidth:d},this._spec.subtextStyle)});return L(this._spec.width)&&(f.textStyle.width=Math.max(c,u.width),f.subtextStyle.width=f.textStyle.width),f}_createOrUpdateTitleComponent(t){if(this._titleComponent)Ne(t,this._cacheAttrs)||this._titleComponent.setAttributes(t);else{const e=this.getContainer(),n=new Snt(t);n.name="title",e.add(n),this._titleComponent=n,n.on("*",(r,s)=>this._delegateEvent(n,r,s))}return this._cacheAttrs=t,this._titleComponent}_getNeedClearVRenderComponents(){return[this._titleComponent]}clear(){super.clear(),this._cacheAttrs=null}};ny.type=lt.title,ny.specKey=lt.title,ny.builtInTheme={title:oKt};const qm=()=>{z.registerComponent(ny.type,ny)};class NN extends FN{constructor(){super(...arguments),this.specKey="markArea",this.layoutZIndex=ti.MarkArea}static _getMarkerCoordinateType(t){const{doAngleProcess:e,doRadiusProcess:n,doRadAngProcess:r}=Pd(t);return t.coordinateType==="polar"||e||n||r?"polar":"cartesian"}_createMarkerComponent(){var t,e,n,r,s,a,o,l;const u=X((t=this._spec.label)!==null&&t!==void 0?t:{}),c={zIndex:this.layoutZIndex,interactive:(e=this._spec.interactive)===null||e===void 0||e,hover:(n=this._spec.interactive)===null||n===void 0||n,select:(r=this._spec.interactive)===null||r===void 0||r,points:[{x:0,y:0}],center:{x:0,y:0},innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,areaStyle:$a($t((s=this._spec.area)===null||s===void 0?void 0:s.style),this._markerData,this._markAttributeContext),clipInRange:(a=this._spec.clip)!==null&&a!==void 0&&a,label:u.map(h=>BN(h,this._markerData,this._markAttributeContext)),state:{area:$s((o=this._spec.area)===null||o===void 0?void 0:o.state,this._markerData,this._markAttributeContext),label:u.map(h=>$s(h.state,this._markerData,this._markAttributeContext)),labelBackground:u.map(h=>{var d;return $s((d=h.labelBackground)===null||d===void 0?void 0:d.state,this._markerData,this._markAttributeContext)})},animation:(l=this._spec.animation)!==null&&l!==void 0&&l,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return this._newMarkAreaComponent(c)}_markerLayout(){var t;const e=this._spec,n=this._markerData,r=this._startRelativeSeries,s=this._endRelativeSeries,a=this._relativeSeries,o=this._computePointsAttr(),l=this._getRelativeDataView().latestData,u=n?n.latestData[0]&&n.latestData[0].latestData?n.latestData[0].latestData:n.latestData:l;let c;if(e.clip||X(e.label).some(h=>h?.confine)){const{minX:h,maxX:d,minY:f,maxY:p}=LN([r.getRegion(),s.getRegion(),a.getRegion()]);c={x:h,y:f,width:d-h,height:p-f}}if(this._markerComponent){const h=X((t=this._markerComponent.attribute)===null||t===void 0?void 0:t.label),d=X(this._spec.label);this._markerComponent.setAttributes(Object.assign(Object.assign({},o),{label:h.map((f,p)=>{const g=d[p]||{};return Object.assign(Object.assign({},f),{text:g.formatMethod?g.formatMethod(u,l):f?.text})}),limitRect:c,dx:this._layoutOffsetX,dy:this._layoutOffsetY}))}}_initDataView(){const t=this._spec,{doXProcess:e,doYProcess:n,doXYProcess:r,doAngleProcess:s,doRadiusProcess:a,doRadAngProcess:o,doCoordinatesProcess:l}=Pd(t);if(!(e||n||r||s||a||o||l))return null;this._initCommonDataView()}}NN.specKey="markArea";const sot={area:{style:{fill:{type:"palette",key:"axisDomainColor",a:.25}}},label:eot()};class ry extends NN{constructor(){super(...arguments),this.type=lt.markArea,this.name=lt.markArea,this.coordinateType="cartesian"}_newMarkAreaComponent(t){return new A0(t)}_computePointsAttr(){var t,e;const n=this._spec,r=this._markerData,s=this._startRelativeSeries,a=this._endRelativeSeries,o=this._relativeSeries,{doXProcess:l,doYProcess:u,doXYProcess:c,doCoordinatesProcess:h}=Pd(n),d=L(n.positions),f=(t=n.autoRange)!==null&&t!==void 0&&t,p=(e=n.includeFullBand)!==null&&e!==void 0&&e;let g=[],m=[];if(c){m=Lk(r,s,a,o,f,p);const[_,v]=m;_&&_.length&&v&&v.length&&(g=[{x:_[0].x,y:v[0].y},_[0],{x:v[0].x,y:_[0].y},v[0]])}else if(l||u){m=Lk(r,s,a,o,f,p);const[_,v]=m;_&&_.length&&v&&v.length&&(g=[..._,v[1],v[0]])}else h?g=DN(r,o,f,n.coordinatesOffset):d&&(g=IN(n.positions,o,n.regionRelative));return{points:g}}_computeOptions(){const t=this._spec,{doXProcess:e,doYProcess:n,doXYProcess:r,doCoordinatesProcess:s}=Pd(t);let a;return r?a=[this._processSpecByDims([{dim:"x",specValue:t.x},{dim:"y",specValue:t.y}]),this._processSpecByDims([{dim:"x",specValue:t.x1},{dim:"y",specValue:t.y1}])]:e?a=[this._processSpecByDims([{dim:"x",specValue:t.x}]),this._processSpecByDims([{dim:"x",specValue:t.x1}])]:n?a=[this._processSpecByDims([{dim:"y",specValue:t.y}]),this._processSpecByDims([{dim:"y",specValue:t.y1}])]:s&&(a=this._processSpecCoo(t)),{options:a}}}ry.type=lt.markArea,ry.coordinateType="cartesian",ry.builtInTheme={markArea:sot};const NT=()=>{z.registerComponent(ry.type,ry),gnt()};class sy extends NN{constructor(){super(...arguments),this.type=lt.polarMarkArea,this.name=lt.polarMarkArea,this.coordinateType="polar"}_newMarkAreaComponent(t){const{doRadiusProcess:e,doAngleProcess:n,doRadAngProcess:r}=Pd(this._spec);return n||e||r?new Ml(t):new A0(t)}_computePointsAttr(){var t;const e=this._spec,n=this._markerData,r=this._startRelativeSeries,s=this._endRelativeSeries,a=this._relativeSeries,{doAngleProcess:o,doRadiusProcess:l,doRadAngProcess:u,doCoordinatesProcess:c}=Pd(e),h=(t=e.autoRange)!==null&&t!==void 0&&t;let d,f={};const p={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if(o||l||u){const g=ON(n,r,s,a,h);u?f={innerRadius:g[0][0].radius,outerRadius:g[1][0].radius,startAngle:g[0][0].angle,endAngle:g[1][0].angle,center:p}:o?f={innerRadius:0,outerRadius:Math.abs(g[0][0].radius),startAngle:g[0][1].angle,endAngle:g[1][1].angle,center:p}:l&&(f={innerRadius:g[0][0].radius,outerRadius:g[1][0].radius,startAngle:g[0][0].angle,endAngle:g[1][1].angle,center:p})}else c&&(d=Zat(n,a,h),f={points:d.map(g=>yi(p,g.radius,g.angle))});return f}_computeOptions(){const t=this._spec,{doAngleProcess:e,doRadiusProcess:n,doRadAngProcess:r,doCoordinatesProcess:s}=Pd(t);let a;return r?a=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius1}])]:e?a=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius}])]:n?a=[this._processSpecByDims([{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"radius",specValue:t.radius1}])]:s&&(a=this._processSpecCoo(t)),{options:a}}}sy.type=lt.polarMarkArea,sy.coordinateType="polar",sy.builtInTheme={polarMarkArea:sot};const aot=()=>{z.registerComponent(sy.type,sy),T$t(),gnt()},JY=i=>{const t=Object.assign({},i);return $t(t)},lKt=i=>{const t=Object.assign({},i);return $t(t)},HS=i=>Object.assign(Object.assign({},i),{style:Object.assign({},$t(i.style))}),oot=i=>{var t,e,n,r,s,a,o,l,u,c,h,d,f,p,g;const m=JY((e=(t=i?.slider)===null||t===void 0?void 0:t.trackStyle)!==null&&e!==void 0?e:{}),_=JY((r=(n=i?.slider)===null||n===void 0?void 0:n.railStyle)!==null&&r!==void 0?r:{}),v=lKt((a=(s=i?.slider)===null||s===void 0?void 0:s.handlerStyle)!==null&&a!==void 0?a:{}),y=HS((l=(o=i?.controller)===null||o===void 0?void 0:o.start)!==null&&l!==void 0?l:{}),b=HS((c=(u=i?.controller)===null||u===void 0?void 0:u.pause)!==null&&c!==void 0?c:{}),x=HS((d=(h=i?.controller)===null||h===void 0?void 0:h.backward)!==null&&d!==void 0?d:{}),S=HS((p=(f=i?.controller)===null||f===void 0?void 0:f.forward)!==null&&p!==void 0?p:{}),w=Object.assign(Object.assign({},i),{direction:i.direction,interval:i.interval,visible:i.visible,orient:(g=i.orient)!==null&&g!==void 0?g:"bottom",slider:Object.assign(Object.assign({},i.slider),{trackStyle:m,railStyle:_,handlerStyle:v}),controller:Object.assign(Object.assign({},i.controller),{start:y,pause:b,backward:x,forward:S})});return i.visible||(w.controller.visible=!1,w.slider.visible=!1),w},uKt=(i,t)=>Object.assign(Object.assign({},oot(i)),{data:t,type:"continuous"}),cKt=(i,t)=>Object.assign(Object.assign({},oot(i)),{data:t,type:"discrete"}),I_=i=>i==="left"||i==="right",cR=i=>i==="top"||i==="bottom",hKt={visible:!0,position:"start",padding:{top:20,bottom:20},slider:{space:10,trackStyle:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.8},railStyle:{fill:{type:"palette",key:"sliderRailColor"}},handlerStyle:{size:15,stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fill:{type:"palette",key:"playerControllerColor"}}},controller:{start:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},pause:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},backward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},forward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}}}};let ay=class extends Cs{constructor(){super(...arguments),this.layoutZIndex=ti.Player,this.layoutLevel=Jo.Player,this.specKey="player",this.type=lt.player,this._orient="bottom",this._getPlayerAttrs=()=>{var t,e,n,r,s,a;const o=this._spec.type,l={size:{width:this._width,height:this._height},dx:(t=this._spec.dx)!==null&&t!==void 0?t:0+this._dx,dy:(e=this._spec.dy)!==null&&e!==void 0?e:0+this._dy};return o==="discrete"?Object.assign(Object.assign(Object.assign({},cKt(this._spec,this._specs)),l),{disableTriggerEvent:this._option.disableTriggerEvent,loop:(r=(n=this._spec)===null||n===void 0?void 0:n.loop)===null||r===void 0||r}):Object.assign(Object.assign(Object.assign({},uKt(this._spec,this._specs)),l),{disableTriggerEvent:this._option.disableTriggerEvent,loop:(a=(s=this._spec)===null||s===void 0?void 0:s.loop)===null||a===void 0||a})},this._createOrUpdatePlayerComponent=()=>{const t=Object.assign({},this._getPlayerAttrs()),e=this.getContainer();this._playerComponent?Ne(t,this._cacheAttrs)||(this._cacheAttrs=t,this._playerComponent.setAttributes(t),this._playerComponent._initAttributes(),this._playerComponent.render()):(t.type==="discrete"?this._playerComponent=new t5t(t):this._playerComponent=new i5t(t),this._cacheAttrs=t,this._playerComponent.name="player",e.add(this._playerComponent),this._initEvent())},this._maxSize=()=>{var t,e,n,r,s,a,o,l,u;return Math.max(...X((e=(t=this._spec.controller.start)===null||t===void 0?void 0:t.style)===null||e===void 0?void 0:e.size),...X((r=(n=this._spec.controller.pause)===null||n===void 0?void 0:n.style)===null||r===void 0?void 0:r.size),...X((a=(s=this._spec.controller.backward)===null||s===void 0?void 0:s.style)===null||a===void 0?void 0:a.size),...X((l=(o=this._spec.controller.forward)===null||o===void 0?void 0:o.style)===null||l===void 0?void 0:l.size),(u=I_(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)!==null&&u!==void 0?u:10)},this._sliderExceededSize=()=>{var t,e,n,r,s,a,o,l,u;const c=(t=I_(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)!==null&&t!==void 0?t:10,h=Math.max(...X((n=(e=this._spec.controller.start)===null||e===void 0?void 0:e.style)===null||n===void 0?void 0:n.size),...X((s=(r=this._spec.controller.pause)===null||r===void 0?void 0:r.style)===null||s===void 0?void 0:s.size),...X((o=(a=this._spec.controller.backward)===null||a===void 0?void 0:a.style)===null||o===void 0?void 0:o.size),...X((u=(l=this._spec.controller.forward)===null||l===void 0?void 0:l.style)===null||u===void 0?void 0:u.size));return c>=h?c-h:0},this._initEvent=()=>{this._option.disableTriggerEvent||(this._option.globalInstance.on(Tt.rendered,()=>{var t;!((t=this._spec)===null||t===void 0)&&t.auto&&(this._playerComponent.pause(),this._playerComponent.play())}),this._playerComponent.addEventListener(tn.end,()=>{var t;this.event.emit(Tt.playerEnd,{model:this}),this._alternate&&this._spec.type==="discrete"&&(this._direction=this._direction==="default"?"reverse":"default",this._playerComponent.setAttributes({direction:this._direction,dataIndex:this._direction==="reverse"?this._specs.length-2:1})),!((t=this._spec)===null||t===void 0)&&t.loop&&this._playerComponent.play()}),this._playerComponent.addEventListener(tn.change,t=>{const{index:e}=t.detail;this.changePlayerIndex(e)}),this._playerComponent.addEventListener(tn.backward,t=>{const{index:e}=t.detail,n=this._specs[e];this.event.emit(Tt.playerBackward,{model:this,value:{spec:n,index:e,specs:this._specs}})}),this._playerComponent.addEventListener(tn.forward,t=>{const{index:e}=t.detail,n=this._specs[e];this.event.emit(Tt.playerForward,{model:this,value:{spec:n,index:e,specs:this._specs}})}),this._playerComponent.addEventListener(tn.play,t=>{const{index:e}=t.detail,n=this._specs[e];this.event.emit(Tt.playerPlay,{model:this,value:{spec:n,index:e,specs:this._specs}})}),this._playerComponent.addEventListener(tn.pause,t=>{const{index:e}=t.detail,n=this._specs[e];this.event.emit(Tt.playerPause,{model:this,value:{spec:n,index:e,specs:this._specs}})}))}}get orient(){return this._orient}set layoutOrient(t){this._orient=t}setAttrFromSpec(){var t,e,n,r,s,a,o,l;super.setAttrFromSpec(),this._orient=(t=this._spec.orient)!==null&&t!==void 0?t:"bottom",this._specs=(e=this._spec.specs)!==null&&e!==void 0?e:[],this._direction=(n=this._spec.direction)!==null&&n!==void 0?n:"default",this._alternate=(r=this._spec.alternate)!==null&&r!==void 0&&r,this._dx=(s=this._spec.dx)!==null&&s!==void 0?s:0,this._dy=(a=this._spec.dy)!==null&&a!==void 0?a:0,this._position=(o=this._spec.position)!==null&&o!==void 0?o:"middle",this._visible=(l=this._spec.visible)===null||l===void 0||l}afterSetLayoutStartPoint(t){if(super.afterSetLayoutStartPoint(t),et(t.x)){const e=I_(this._orient)?t.x+this._sliderExceededSize()/2:t.x;this._playerComponent&&this._playerComponent.setAttribute("x",e)}if(et(t.y)){const e=cR(this._orient)?t.y+this._sliderExceededSize()/2:t.y;this._playerComponent&&this._playerComponent.setAttribute("y",e)}}getBoundsInRect(t,e){this._width=this._computeWidth(t),this._height=this._computeHeight(t),this._dx=this._computeDx(e),this._dy=this._computeDy(e);const n=this._computeLayoutRect(t,this._width,this._height);return this._createOrUpdatePlayerComponent(),n}_getNeedClearVRenderComponents(){return[this._playerComponent]}_computeLayoutRect(t,e,n){if(this._visible===!1)return{x1:0,x2:0,y1:0,y2:0};switch(this._orient){case"top":case"left":return{x1:0,y1:0,x2:e,y2:n};case"right":return{x1:t.width-e,y1:0,x2:t.width,y2:t.height};default:return{x1:0,y1:t.height-n,x2:t.width,y2:t.height}}}_computeWidth(t){return yt(this._spec.width)?Math.min(t.width,Number(this._spec.width)):I_(this._orient)?this._maxSize():t.width}_computeHeight(t){return yt(this._spec.height)?(this._height=this._spec.height,Math.min(t.height,Number(this._spec.height))):cR(this._orient)?this._maxSize():t.height}_computeDx(t){return I_(this._orient)||this._position==="start"?0:this._position==="middle"?(t.width-this._width)/2:t.width-this._width}_computeDy(t){return cR(this._orient)||this._position==="start"?0:this._position==="middle"?(t.height-this._height)/2:t.height-this._height}changePlayerIndex(t){const e=this._specs[t];this._option.globalInstance.updateFullData(e.data),this.event.emit(Tt.playerChange,{model:this,value:{spec:e,index:t,specs:this._specs}})}};ay.builtInTheme={player:hKt},ay.specKey="player",ay.type=lt.player;const jN=()=>{z.registerComponent(ay.type,ay)};class HN extends Cs{constructor(t,e){super(t,e),this.type=lt.label,this.name=lt.label,this.layoutType="none",this.layoutZIndex=ti.Label,this._regions=e.getRegionsInIndex(e.regionIndexes)}_interactiveConfig(t){const{interactive:e}=t,n={hover:!1,select:!1,state:t.state};if(e!==!0)return n;const{hover:r,select:s}=this._option.getChart().getSpec();return r===!1&&r.enable===!1||(n.hover=!0),s===!1&&s.enable===!1||(n.select=!0),n}_compareSpec(t,e){const n=super._compareSpec(t,e);return n.reRender=!0,Ne(e,t)||(n.reMake=!0),n}_getDataLabelType(t,e){const n=t.type;return n==="line"||n==="area"?e??"line-data":n==="rect"?"rect":n==="arc"?"arc":n==="symbol"||n==="cell"?"symbol":t.setDataLabelType?t.setDataLabelType():""}_setTransformOfComponent(t,e){t.setAttributeTransform(({labelStyle:n,size:r,itemEncoder:s})=>{const a=r(),o=Dnt({type:"palette",key:"secondaryFontColor"},this.getColorScheme());return{dataLabels:X(e).map((l,u)=>{const c=n(u),h=[],d=l.getGraphics();if(d)return c.data&&c.data.length?c.data.forEach((f,p)=>{if(d[p]){const g=s(f,{labelIndex:u});N(g.fill)&&(g.fill=o),N(g.data)&&(g.data=f),h.push(g)}}):d.forEach(f=>{const{data:p,diffState:g}=f.context;g!==Kn.exit&&p.forEach((m,{})=>{const _=s(m,{labelIndex:u});N(_.fill)&&(_.fill=o),N(_.data)&&(_.data=m),h.push(_)})}),no(c.overlap)&&N(c.overlap.size)&&(c.overlap.size=Object.assign({},a)),Object.assign(Object.assign({smartInvert:!1,baseMarkGroupName:l.getProductId(),getBaseMarks:()=>d},c),{type:this._getDataLabelType(l,c.type),data:h})}),size:a}})}getVRenderComponents(){const t=[];return this.getMarks().forEach(e=>{const n=e.getComponent();n&&t.push(n)}),t}clear(){super.clear(),this.getMarks().forEach(t=>{t&&t.clearComponent()})}}HN.type=lt.label;class Bk extends hm{constructor(){super(...arguments),this.skipEncode=!1}getRule(){return this._rule}setRule(t){this._rule=t}getTarget(){return this._target}setTarget(t){this._target=t,this._rule||this.setRule(t.type)}getComponent(){return this._component}setComponent(t){this._component=t}render(){}}Bk.type="text",Bk.constructorType="label";const lot=()=>{Ps(),z.registerMark(Bk.constructorType,Bk)};class uot extends Wm{_initTheme(t,e){return{spec:t,theme:this._theme}}}class Ag extends HN{constructor(t,e){super(t,e),this.type=lt.label,this.name=lt.label,this.specKey="label",this.transformerConstructor=uot,this.layoutZIndex=ti.Label,this._layoutRule=t.labelLayout||"series"}static getSpecInfo(t,e){const n=[];return(e?.region||[]).forEach((s,a)=>{(s.seriesIndexes||[]).some(o=>{const l=e.series[o],{markLabelSpec:u={}}=l;return Object.values(u).some(c=>Array.isArray(c)&&(h=>h.some(d=>d.visible))(c))})&&n.push({spec:t,type:lt.label,specInfoPath:["component",this.specKey,a],regionIndexes:[a]})}),n}init(t){super.init(t),this.initEvent(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}reInit(t){super.reInit(t),this._labelInfoMap&&(this._labelInfoMap.forEach(e=>{e.forEach(({labelMark:n})=>{n.release()})}),this._labelInfoMap.clear()),this._labelInfoMap&&this._labelInfoMap.clear(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}initEvent(){this.event.on(Tt.dataZoomChange,()=>{this._labelComponentMap.forEach((e,n)=>{const r=n.getComponent();r&&r.disableAnimation()}),this.event.on(Zo.AFTER_MARK_RENDER_END,t)});const t=()=>{this._labelComponentMap.forEach((e,n)=>{const r=n.getComponent();r&&r.enableAnimation()}),this.event.off(Zo.AFTER_MARK_RENDER_END,t)}}_initTextMark(){this._labelInfoMap||(this._labelInfoMap=new Map),this._labelComponentMap||(this._labelComponentMap=new Map),zi(this._regions,t=>{const{markLabelSpec:e={}}=t.getSpecInfo(),n=Object.keys(e),r=t.getRegion();this._labelInfoMap.get(r)||this._labelInfoMap.set(r,[]);for(let s=0;s<n.length;s++){const a=n[s],o=t.getMarkInName(a);o&&e[a].forEach((l,u)=>{var c,h,d;if(l.visible){const f=this._labelInfoMap.get(r),p=this._createMark({type:"label",name:`${(c=t.userId)!==null&&c!==void 0?c:t.id}-${a}-label-${u}`},{attributeContext:t.getMarkAttributeContext()});l.showRelatedMarkTooltip&&((d=(h=t.tooltipHelper)===null||h===void 0?void 0:h.activeTriggerSet.mark)===null||d===void 0||d.add(p)),p.setTarget(o),f.push({labelMark:p,baseMark:o,series:t,labelSpec:l})}})}})}_initLabelComponent(){const t={};this._labelComponentMap.forEach((e,n)=>{t[n.name]=n}),this._labelInfoMap.forEach((e,n)=>{if(this._layoutRule==="region"){let r=!1;const s=`${n.getGroupMark().name}-label-component`;let a=t[s];a||(r=!0,a=this._createMark({type:"component",name:s},{componentType:"label"},{support3d:this._spec.support3d})),a&&(r&&(a.setSkipBeforeLayouted(!0),this._marks.addMark(a),e.forEach(o=>{var l;(l=o.baseMark.getData())===null||l===void 0||l.addRelatedMark(a)})),e[0]&&L(e[0].labelSpec.zIndex)&&a.setMarkConfig({zIndex:e[0].labelSpec.zIndex}),this._labelComponentMap.set(a,()=>this._labelInfoMap.get(n)),t[s]=null)}else e.forEach((r,s)=>{var a;let o=!1;const l=`${r.labelMark.name}-component`;let u=t[l];u||(o=!0,u=this._createMark({type:"component",name:l},{componentType:"label",noSeparateStyle:!0},{support3d:r.baseMark.getMarkConfig().support3d})),u&&(L(r.labelSpec.zIndex)&&u.setMarkConfig({zIndex:r.labelSpec.zIndex}),o&&(u.setSkipBeforeLayouted(!0),this._marks.addMark(u),(a=r.baseMark.getData())===null||a===void 0||a.addRelatedMark(u)),this._labelComponentMap.set(u,()=>this._labelInfoMap.get(n)[s]),t[l]=null)})}),Object.keys(t).forEach(e=>{const n=t[e];n&&(n.release(),this._labelComponentMap.delete(n))})}_initTextMarkStyle(){this._labelComponentMap.forEach((t,e)=>{X(t()).forEach(({labelMark:n})=>{n.setComponent(e)})}),this._labelInfoMap.forEach(t=>{t.forEach(e=>{var n,r;const{labelMark:s,labelSpec:a,series:o}=e;if(this.initMarkStyleWithSpec(s,a),it(a?.getStyleHandler)){const l=a.getStyleHandler(o);l?.call(o,s,a)}!((r=(n=s.stateStyle)===null||n===void 0?void 0:n.normal)===null||r===void 0)&&r.lineWidth&&s.setAttribute("stroke",o.getColorAttribute(),"normal",ct.Base_Series)})})}updateLayoutAttribute(){super.updateLayoutAttribute(),this._labelComponentMap.forEach((t,e)=>{const n=t();J(n)?this._updateMultiLabelAttribute(n,e):this._updateSingleLabelAttribute(n,e)})}_updateMultiLabelAttribute(t,e){this._updateLabelComponentAttribute(e,t.map(({baseMark:n})=>n),t)}_updateSingleLabelAttribute(t,e){const{baseMark:n}=t;this._updateLabelComponentAttribute(e,n,[t])}_updateLabelComponentAttribute(t,e,n){const r=this._option.getComponentsByType("totalLabel");t.setMarkConfig({interactive:!1}),t.setSimpleStyle({labelStyle:s=>{var a,o;const l=n[s],{labelSpec:u,labelMark:c,series:h}=l,d=c.getRule(),f=this._interactiveConfig(u),p=(o=(a=this._spec)===null||a===void 0?void 0:a.centerOffset)!==null&&o!==void 0?o:0;let g=Wt({textStyle:Object.assign({pickable:u.interactive===!0},u.style),overlap:{avoidMarks:r.map(m=>m.getMarks()[0].getProductId())}},pYt(d,l),Object.assign(Object.assign(Object.assign({},xa(u,["position","style","state","type","stackDataFilterType","getStyleHandler"])),f),{centerOffset:p}),u.stackDataFilterType?{dataFilter:u.stackDataFilterType==="min"?m=>m.filter(_=>_.data[dz]):m=>m.filter(_=>_.data[P0])}:{});return h&&h.parseLabelStyle&&(g=h.parseLabelStyle(g,u,c)),d!=="line"&&d!=="area"||(g.type=d),g},size:()=>{var s;return Object.assign({padding:(s=n[0].labelSpec.overlap)===null||s===void 0?void 0:s.padding},n[0].series.getRegion().getLayoutRect())},itemEncoder:(s,{labelIndex:a})=>n[a]&&!n[a].labelMark.skipEncode?Vz(n[a],s,n[a].labelSpec.formatMethod,n[a].labelSpec.formatter):{data:s}}),this._setTransformOfComponent(t,e)}compileMarks(){this.getMarks().forEach(t=>{const e=this._labelComponentMap.get(t)();let n;n=J(e)?e[0].series.getRegion().getGroupMark().getProduct():e.series.getRegion().getGroupMark().getProduct(),t.compile({group:n})})}getLabelInfoByTextGraphic(t){let e;const n=t?.parent,r=n?.parent;if(r){const s=r.getChildren().indexOf(n);this._labelComponentMap.forEach((a,o)=>{o.getComponent()===r&&(e=X(a())[s])})}return e}}Ag.type=lt.label,Ag.specKey="label",Ag.transformerConstructor=uot;const xi=()=>{z.registerGraphicComponent(Ag.type,i=>new Wb(i)),lot(),pT(),z.registerComponent(Ag.type,Ag,!0,1/0)},dKt={visible:!1,offset:5,overlap:{clampForce:!0,strategy:[]},smartInvert:!1,animation:!1,style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"primaryFontColor"}}};class kg extends HN{constructor(){super(...arguments),this.type=lt.totalLabel,this.name=lt.totalLabel,this.specKey="totalLabel",this.layoutZIndex=ti.Label}static getSpecInfo(t,e){var n;const r=[];return(n=e?.region)===null||n===void 0||n.forEach((s,a)=>{var o;(o=s.seriesIndexes)===null||o===void 0||o.forEach(l=>{const{spec:u}=e.series[l],c=u[this.specKey];c?.visible&&r.push({spec:c,type:lt.totalLabel,specPath:["series",l,this.specKey],specInfoPath:["component",this.specKey,l],regionIndexes:[a],seriesIndexes:[l]})})}),r}init(t){super.init(t),this._initTextMark(),this._initLabelComponent()}reInit(t){super.reInit(t),this._initTextMark()}_initTextMark(){var t;const e=this._getSeries();if(!((t=e.getSpec().totalLabel)===null||t===void 0)&&t.visible){const n=e.getSeriesMark();if(n){const r=this._createMark({type:"label",name:`${n.name}-total-label`});this._baseMark=n,this._textMark=r,this._initTextMarkStyle()}}}_initTextMarkStyle(){var t;super.initMarkStyleWithSpec(this._textMark,this._spec),this.setMarkStyle(this._textMark,{text:n=>n[fk]},"normal",ct.Default);const e=this._getSeries();(t=e.initTotalLabelMarkStyle)===null||t===void 0||t.call(e,this._textMark)}_initLabelComponent(){var t;const e=this._getSeries(),n=this._createMark({type:"component",name:`${(t=e.name)!==null&&t!==void 0?t:e.type}-total-label-component`},{componentType:"label"},{support3d:this._spec.support3d});n&&(this._marks.addMark(n),e.getData().addRelatedMark(n))}updateLayoutAttribute(){super.updateLayoutAttribute();const t=this._getSeries();this._marks.forEach((e,n)=>{e.setMarkConfig({interactive:!1}),e.setSimpleStyle({labelStyle:()=>{var r,s;if(this._baseMark){const{offset:a,animation:o,overlap:l,position:u="top"}=this._spec,c=this._interactiveConfig(this._spec);return Wt({textStyle:{pickable:this._spec.interactive===!0},position:fKt(t,this._baseMark.type,u),x:0,y:0},(s=(r=t.getTotalLabelComponentStyle)===null||r===void 0?void 0:r.call(t,{baseMark:this._baseMark,labelMark:this._textMark}))!==null&&s!==void 0?s:{},Object.assign({offset:a,animation:o,overlap:l,dataFilter:h=>h.filter(d=>u==="bottom"?d.data[dz]:d.data[P0])},c))}},size:()=>{var r;return Object.assign({padding:(r=this._spec.overlap)===null||r===void 0?void 0:r.padding},this._regions[0].getLayoutRect())},itemEncoder:r=>Vz({baseMark:this._baseMark,labelMark:this._textMark,series:t,labelSpec:t.getSpec().totalLabel},r,this._spec.formatMethod)}),this._setTransformOfComponent(e,this._baseMark)})}compileMarks(){this.getMarks().forEach(t=>{const e=this._regions[0].getGroupMark().getProduct();t.compile({group:e,context:{model:this}})})}_getSeries(){return this._option.getSeriesInIndex([this.getSpecPath()[1]])[0]}}kg.type=lt.totalLabel,kg.builtInTheme={totalLabel:dKt},kg.specKey="totalLabel";function fKt(i,t,e="top"){var n,r;let s;const{direction:a}=i;let o;o=e==="bottom"?{vertical:["bottom","top"],horizontal:["left","right"]}:{vertical:["top","bottom"],horizontal:["right","left"]};const l=(a==="horizontal"?!((n=i.getXAxisHelper())===null||n===void 0)&&n.isInverse():!((r=i.getYAxisHelper())===null||r===void 0)&&r.isInverse())?1:0;switch(t){case"rect":case"symbol":s=o[a][l];break;default:s="top"}return s}const Ih=()=>{z.registerGraphicComponent(kg.type,i=>new Wb(i)),lot(),pT(),z.registerComponent(kg.type,kg,!0)};var t8=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};class jT extends FN{constructor(){super(...arguments),this.specKey="markPoint",this.layoutZIndex=ti.MarkPoint}static _getMarkerCoordinateType(t){const{doPolarProcess:e,doGeoProcess:n}=TL(t);return t.coordinateType==="polar"||e?"polar":t.coordinateType==="geo"||n?"geo":"cartesian"}_createMarkerComponent(){var t,e,n,r,s,a,o,l,u,c,h,d,f,p,g,m,_,v,y,b,x,S,w,A,k,C,M,R,P,O,T,D;const{itemContent:B={},itemLine:I={},targetSymbol:F={}}=this._spec,j=B,{type:H="text",text:U,symbol:K,image:q,richText:Z,customMark:at,textStyle:$,symbolStyle:ft,imageStyle:pt,richTextStyle:rt,customMarkStyle:gt,style:mt={},state:Dt={}}=j,St=t8(j,["type","text","symbol","image","richText","customMark","textStyle","symbolStyle","imageStyle","richTextStyle","customMarkStyle","style","state"]);let Ot=null,Pt=null,_e={};H==="text"?(Ot=(t=U?.state)!==null&&t!==void 0?t:Dt,_e={dx:0,dy:0},Pt=BN(ot(_e,(e=U??$)!==null&&e!==void 0?e:mt),this._markerData,this._markAttributeContext)):H==="richText"?(Ot=(n=Z?.state)!==null&&n!==void 0?n:Dt,_e={width:100,height:100},Pt=$a(ot(_e,(s=(r=Z?.style)!==null&&r!==void 0?r:rt)!==null&&s!==void 0?s:mt),this._markerData,this._markAttributeContext)):H==="symbol"?(Ot=(a=K?.state)!==null&&a!==void 0?a:Dt,_e={symbolType:"star",fill:"rgb(48, 115, 242)",fillOpacity:.8,size:20},Pt=$t($a(ot(_e,(l=(o=K?.style)!==null&&o!==void 0?o:ft)!==null&&l!==void 0?l:mt),this._markerData,this._markAttributeContext))):H==="image"?(Ot=(u=q?.state)!==null&&u!==void 0?u:Dt,_e={width:80,height:80},Pt=$a(ot(_e,(h=(c=q?.style)!==null&&c!==void 0?c:pt)!==null&&h!==void 0?h:mt),this._markerData,this._markAttributeContext)):H==="custom"&&(Ot=(d=at?.state)!==null&&d!==void 0?d:Dt,Pt=$a((p=(f=at?.style)!==null&&f!==void 0?f:gt)!==null&&p!==void 0?p:mt,this._markerData,this._markAttributeContext));const Ze={zIndex:this.layoutZIndex,interactive:(g=this._spec.interactive)===null||g===void 0||g,hover:(m=this._spec.interactive)===null||m===void 0||m,select:(_=this._spec.interactive)===null||_===void 0||_,position:{x:0,y:0},clipInRange:(v=this._spec.clip)!==null&&v!==void 0&&v,itemContent:Object.assign(Object.assign({type:H,offsetX:qY(B.offsetX,this._relativeSeries.getRegion()),offsetY:qY(B.offsetX,this._relativeSeries.getRegion())},St),{style:$a(Pt,this._markerData,this._markAttributeContext)}),targetSymbol:{offset:(y=F.offset)!==null&&y!==void 0?y:0,visible:(b=F.visible)!==null&&b!==void 0&&b,size:(x=F.size)!==null&&x!==void 0?x:20,style:$a(F.style,this._markerData,this._markAttributeContext)},state:{line:$s((w=(S=this._spec.itemLine.line)===null||S===void 0?void 0:S.state)!==null&&w!==void 0?w:{},this._markerData,this._markAttributeContext),lineStartSymbol:$s((k=(A=this._spec.itemLine.startSymbol)===null||A===void 0?void 0:A.state)!==null&&k!==void 0?k:{},this._markerData,this._markAttributeContext),lineEndSymbol:$s((M=(C=this._spec.itemLine.endSymbol)===null||C===void 0?void 0:C.state)!==null&&M!==void 0?M:{},this._markerData,this._markAttributeContext),itemContent:$s(Ot,this._markerData,this._markAttributeContext),textBackground:$s((P=(R=this._spec.itemContent.text)===null||R===void 0?void 0:R.labelBackground)===null||P===void 0?void 0:P.state,this._markerData,this._markAttributeContext),targetItem:$s((T=(O=this._spec.targetSymbol)===null||O===void 0?void 0:O.state)!==null&&T!==void 0?T:{},this._markerData,this._markAttributeContext)},animation:(D=this._spec.animation)!==null&&D!==void 0&&D,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate},{visible:It,line:W={}}=I,Q=t8(I,["visible","line"]);return Ze.itemLine=It!==!1?Object.assign(Object.assign({},Q),{visible:!0,lineStyle:$t(W.style)}):{visible:!1},new JM(Ze)}_markerLayout(){var t,e,n,r,s;const a=this._spec,o=this._markerData,l=this._relativeSeries,{point:u}=this._computePointsAttr(),c=this._getRelativeDataView().latestData,h=o?o.latestData[0]&&o.latestData[0].latestData?o.latestData[0].latestData:o.latestData:c;let d;if(a.clip||!((t=a.itemContent)===null||t===void 0)&&t.confine){const{minX:f,maxX:p,minY:g,maxY:m}=LN([l.getRegion()]);d={x:f,y:g,width:p-f,height:m-g}}if(this._markerComponent){const f=(e=this._markerComponent.attribute)!==null&&e!==void 0?e:{},p=(r=(n=f.itemContent)===null||n===void 0?void 0:n.textStyle)!==null&&r!==void 0?r:{};this._markerComponent.setAttributes({position:u===void 0?{x:null,y:null}:u,itemContent:Object.assign(Object.assign({},f.itemContent),{textStyle:Object.assign(Object.assign({},p),{text:!((s=this._spec.itemContent.text)===null||s===void 0)&&s.formatMethod?this._spec.itemContent.text.formatMethod(h,c):p.text}),offsetX:ZY(u,f.itemContent.offsetX,this._relativeSeries.getRegion()),offsetY:ZY(u,f.itemContent.offsetY,this._relativeSeries.getRegion())}),limitRect:d,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}}_initDataView(){const t=this._spec,{doXYProcess:e,doPolarProcess:n,doGeoProcess:r}=TL(t);(L(t.coordinate)||e||n||r)&&this._initCommonDataView()}}jT.specKey="markPoint";const VN={itemLine:{decorativeLine:{visible:!1},startSymbol:{size:5,visible:!0,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},endSymbol:{style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},line:{style:{stroke:{type:"palette",key:"markLineStrokeColor"}}}},itemContent:{offsetY:-50}};class oy extends jT{constructor(){super(...arguments),this.type=lt.markPoint,this.name=lt.markPoint,this.coordinateType="cartesian"}_computePointsAttr(){var t,e,n;const r=this._spec,s=this._markerData,a=this._relativeSeries,o=L(r.x)&&L(r.y),l=L(r.coordinate),u=L(r.position),c=(t=r?.autoRange)!==null&&t!==void 0&&t;let h;return o?h=(n=(e=Lk(s,a,a,a,c))===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n[0]:l?h=DN(s,a,c,r.coordinatesOffset)[0]:u&&(h=IN(r.position,a,r.regionRelative)[0]),{point:h}}_computeOptions(){const t=this._spec,{doXYProcess:e}=TL(t),n=L(t.coordinate);let r;return e?r=[this._processSpecByDims([{dim:"x",specValue:t.x},{dim:"y",specValue:t.y}])]:n&&(r=this._processSpecCoo(t)),{options:r}}}oy.type=lt.markPoint,oy.coordinateType="cartesian",oy.builtInTheme={markPoint:VN};const HT=()=>{z.registerComponent(oy.type,oy),iz()};class ly extends jT{constructor(){super(...arguments),this.type=lt.polarMarkPoint,this.name=lt.polarMarkPoint,this.coordinateType="polar"}_computePointsAttr(){var t,e;const n=this._markerData,r=this._relativeSeries,s=(e=(t=this._spec)===null||t===void 0?void 0:t.autoRange)!==null&&e!==void 0&&e,a=ON(n,r,r,r,s)[0][0],o={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};return{point:yi(o,a.radius,a.angle)}}_computeOptions(){const t=this._spec;return{options:[this._processSpecByDims([{dim:"radius",specValue:t.radius},{dim:"angle",specValue:t.angle}])]}}}ly.type=lt.polarMarkPoint,ly.coordinateType="polar",ly.builtInTheme={polarMarkPoint:VN};const cot=()=>{z.registerComponent(ly.type,ly),iz()};class uy extends jT{constructor(){super(...arguments),this.type=lt.geoMarkPoint,this.name=lt.geoMarkPoint,this.coordinateType="geo"}_computePointsAttr(){const t=this._markerData,e=this._relativeSeries;return{point:XXt(t,e)[0][0]}}_computeOptions(){const t=this._spec;return{options:[this._processSpecByDims([{dim:"areaName",specValue:t.areaName}])]}}}uy.type=lt.geoMarkPoint,uy.coordinateType="geo",uy.builtInTheme={geoMarkPoint:VN};const hot=()=>{z.registerComponent(uy.type,uy),iz()},pKt={style:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",lineWidth:2},brushMode:"single",brushType:"rect",brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:0};let cy=class extends Cs{constructor(){super(...arguments),this.layoutType="none",this.type=lt.brush,this.name=lt.brush,this.specKey="brush",this.layoutZIndex=ti.Brush,this._linkedSeries=[],this._itemMap={},this._linkedItemMap={},this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._cacheInteractiveRangeAttrs=[],this._releatedAxes=[],this._regionAxisMap={},this._axisDataZoomMap={},this._zoomRecord=[]}static getSpecInfo(t){return tl(t,this.specKey,this.type,e=>e.visible!==!1)}init(){const t=this._transformBrushedMarkAttr(this._spec.inBrush),e=this._transformBrushedMarkAttr(this._spec.outOfBrush);this._option.getAllSeries().forEach(n=>{n.getActiveMarks().forEach(r=>{r&&(n.setMarkStyle(r,Object.assign({},t),"inBrush",ct.Series),n.setMarkStyle(r,Object.assign({},e),"outOfBrush",ct.Series))})})}_initNeedOperatedItem(){const t=this._spec.seriesId,e=this._spec.seriesIndex;this._relativeRegions.forEach(n=>{const r=[];n.getSeries().forEach(s=>{(t&&X(t).includes(s.userId.toString())||e&&X(e).includes(s.getSpecIndex())||!e&&!t)&&r.push(...s.getMarksWithoutRoot()),this._itemMap[n.id]=r})}),this._linkedSeries.forEach(n=>{this._linkedItemMap[n.id]=n.getMarksWithoutRoot()})}created(){super.created(),this.initEvent(),this._bindRegions(),this._bindLinkedSeries(),this._initRegionAxisMap(),this._initAxisDataZoomMap(),this._initNeedOperatedItem()}_bindRegions(){L(this._spec.regionId)||L(this._spec.regionIndex)?this._relativeRegions=this._option.getRegionsInUserIdOrIndex(X(this._spec.regionId),X(this._spec.regionIndex)):this._relativeRegions=this._option.getAllRegions()}_bindLinkedSeries(){(L(this._spec.brushLinkSeriesId)||L(this._spec.brushLinkSeriesIndex))&&(this._linkedSeries=this._option.getSeriesInUserIdOrIndex(X(this._spec.brushLinkSeriesId),X(this._spec.brushLinkSeriesIndex)))}_initRegionAxisMap(){L(this._spec.axisId)?X(this._spec.axisId).forEach(t=>{this._releatedAxes.push(this._option.getComponentByUserId(t))}):L(this._spec.axisIndex)?X(this._spec.axisIndex).forEach(t=>{this._releatedAxes.push(this._option.getComponentByIndex("axes",t))}):this._releatedAxes=this._option.getComponentsByKey("axes"),this._releatedAxes.forEach(t=>{t?.getRegions().forEach(e=>{this._regionAxisMap["region_"+e.id]?this._regionAxisMap["region_"+e.id].push(t):this._regionAxisMap["region_"+e.id]=[t]})})}_initAxisDataZoomMap(){this._option.getComponentsByKey("dataZoom").forEach(t=>{t.relatedAxisComponent&&(this._axisDataZoomMap[t.relatedAxisComponent.id]=t)})}initEvent(){}_compareSpec(t,e){this._brushComponents&&this._relativeRegions.forEach((r,s)=>{this._updateBrushComponent(r,s)});const n=super._compareSpec(t,e);return Ne(e,t)||(n.reRender=!0,n.reMake=!0),n}onLayoutEnd(){var t;super.onLayoutEnd(),!this._option.disableTriggerEvent&&((t=this._spec.visible)===null||t===void 0||t)&&(this._brushComponents?this._relativeRegions.forEach((e,n)=>{this._updateBrushComponent(e,n)}):(this._brushComponents=[],this._relativeRegions.forEach((e,n)=>{this._createBrushComponent(e,n)})))}_updateBrushComponent(t,e){const n=this._getBrushInteractiveAttr(t),r=this._brushComponents[e];r.setAttributes(n),this._initMarkBrushState(e,""),r.children[0].removeAllChild()}_createBrushComponent(t,e){var n,r;const s=this._getBrushInteractiveAttr(t),a=new knt(Object.assign(Object.assign(Object.assign({zIndex:this.layoutZIndex,brushStyle:$t((n=this._spec)===null||n===void 0?void 0:n.style)},s),this._spec),{disableTriggerEvent:this._option.disableTriggerEvent}));a.id=(r=this._spec.id)!==null&&r!==void 0?r:`brush-${this.id}`,this.getContainer().add(a),this._brushComponents.push(a),this._cacheInteractiveRangeAttrs.push(s),a.addEventListener(Fn.brushActive,o=>{this._initMarkBrushState(e,"outOfBrush"),this._emitEvent(Tt.brushActive,t)}),a.addEventListener(Fn.drawStart,o=>{this._setRegionMarkPickable(t,!0),this._emitEvent(Tt.brushStart,t)}),a.addEventListener(Fn.moveStart,o=>{this._setRegionMarkPickable(t,!0),this._emitEvent(Tt.brushStart,t)}),a.addEventListener(Fn.drawing,o=>{this._setRegionMarkPickable(t,!1),this._handleBrushChange(t,o),this._emitEvent(Tt.brushChange,t)}),a.addEventListener(Fn.moving,o=>{this._setRegionMarkPickable(t,!1),this._handleBrushChange(t,o),this._emitEvent(Tt.brushChange,t)}),a.addEventListener(Fn.brushClear,o=>{this._setRegionMarkPickable(t,!0),this._initMarkBrushState(e,""),this._emitEvent(Tt.brushClear,t)}),a.addEventListener(Fn.drawEnd,o=>{var l;this._setRegionMarkPickable(t,!0);const{operateMask:u}=o.detail,{updateElementsState:c=!0}=this._spec;if(!((l=this._spec)===null||l===void 0)&&l.onBrushEnd)this._spec.onBrushEnd(o)===!0?(this.clearGraphic(),this._initMarkBrushState(e,""),this._emitEvent(Tt.brushClear,t)):(this._spec.onBrushEnd(o),this._emitEvent(Tt.brushEnd,t));else{const h=this._extendDataInBrush(this._inBrushElementsMap);(!this._spec.zoomWhenEmpty&&h.length>0||!c)&&this._setAxisAndDataZoom(u,t),this._emitEvent(Tt.brushEnd,t)}}),a.addEventListener(Fn.moveEnd,o=>{this._setRegionMarkPickable(t,!0);const{operateMask:l}=o.detail,{updateElementsState:u=!0}=this._spec,c=this._extendDataInBrush(this._inBrushElementsMap);(!this._spec.zoomWhenEmpty&&c.length>0||u)&&this._setAxisAndDataZoom(l,t),this._emitEvent(Tt.brushEnd,t)})}_getBrushInteractiveAttr(t){const e=t.getLayoutStartPoint(),n=t.getLayoutRect(),r=e.x,s=r+n.width,a=e.y,o=a+n.height;return{interactiveRange:{minY:a,maxY:o,minX:r,maxX:s},xRange:[r,s],yRange:[a,o]}}_transformBrushedMarkAttr(t){const e={};return t?.symbol&&(e.symbolType=t.symbol),t?.symbolSize&&(e.size=t.symbolSize),t?.color&&(e.fill=t.color),t?.colorAlpha&&(e.fillOpacity=t.colorAlpha),Object.assign(Object.assign({},$t(t)),e)}_handleBrushChange(t,e){const{operateMask:n}=e.detail,{updateElementsState:r=!0}=this._spec;r&&(this._reconfigItem(n,t),this._reconfigLinkedItem(n,t))}_extendDataInBrush(t){var e,n;const r=[];for(const s in t)for(const a in t[s])r.push(Object.assign({},(n=(e=t[s][a].context)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n[0]));return r}_extendDatumOutOfBrush(t){var e,n;const r=[];for(const s in t)r.push((n=(e=t[s].context)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n[0]);return r}_emitEvent(t,e){var n;this.event.emit(t,{model:this,value:{operateType:t,operateRegion:e,inBrushData:this._extendDataInBrush(this._inBrushElementsMap),outOfBrushData:this._extendDatumOutOfBrush(this._outOfBrushElementsMap),linkInBrushData:this._extendDataInBrush(this._linkedInBrushElementsMap),linkOutOfBrushData:this._extendDatumOutOfBrush(this._linkedOutOfBrushElementsMap),inBrushElementsMap:this._inBrushElementsMap,outOfBrushElementsMap:this._outOfBrushElementsMap,linkedInBrushElementsMap:this._linkedInBrushElementsMap,linkedOutOfBrushElementsMap:this._linkedOutOfBrushElementsMap,zoomRecord:this._zoomRecord},vchart:(n=this._option)===null||n===void 0?void 0:n.globalInstance})}_reconfigItem(t,e){var n,r,s;if(!t?.globalTransMatrix||!(!((n=t?.attribute)===null||n===void 0)&&n.points))return;const a=(s=(r=t?.attribute)===null||r===void 0?void 0:r.points)!==null&&s!==void 0?s:[],{a:o,b:l,c:u,d:c,e:h,f:d}=t.globalTransMatrix,f=a.map(g=>({x:o*g.x+u*g.y+h,y:l*g.x+c*g.y+d})),{markTypeFilter:p=[]}=this._spec;this._itemMap[e.id].forEach(g=>{if(p.includes(g.type))return;const m=g.getGraphics();m&&m.length&&m.forEach(_=>{var v,y,b;const x=g.id+"_"+_.context.key,S=this._isBrushContainItem(t.globalAABBBounds,f,_);!((v=this._outOfBrushElementsMap)===null||v===void 0)&&v[x]&&S?(_.addState("inBrush",!0),this._inBrushElementsMap[t?.name]||(this._inBrushElementsMap[t?.name]={}),this._inBrushElementsMap[t?.name][x]=_,delete this._outOfBrushElementsMap[x]):!((b=(y=this._inBrushElementsMap)===null||y===void 0?void 0:y[t?.name])===null||b===void 0)&&b[x]&&!S&&(_.removeState("inBrush"),_.addState("outOfBrush",!0),this._outOfBrushElementsMap[x]=_,delete this._inBrushElementsMap[t.name][x])})})}_reconfigLinkedItem(t,e){var n;if(!t?.globalTransMatrix||!(!((n=t?.attribute)===null||n===void 0)&&n.points))return;const r=e.getLayoutStartPoint(),s=e.getSeries().map(a=>a.id);this._linkedSeries.forEach(a=>{var o,l;if(!s.includes(a.id)){const u=a.getRegion().getLayoutStartPoint(),c=u.x-r.x,h=u.y-r.y,d=(l=(o=t?.attribute)===null||o===void 0?void 0:o.points)!==null&&l!==void 0?l:[],{a:f,b:p,c:g,d:m,e:_,f:v}=t.globalTransMatrix,y=c||0,b=h||0,x=d.map(w=>({x:f*w.x+g*w.y+_+y,y:p*w.x+m*w.y+v+b}));t.globalAABBBounds.clone().set(t.globalAABBBounds.x1+y,t.globalAABBBounds.y1+b,t.globalAABBBounds.x2+y,t.globalAABBBounds.y2+b);const{markTypeFilter:S=[]}=this._spec;this._linkedItemMap[a.id].forEach(w=>{if(S.includes(w.type))return;const A=w.getGraphics();A&&A.length&&A.forEach(k=>{var C,M,R;const{key:P}=k.context,O=w.id+"_"+k.context.key;!((C=this._linkedOutOfBrushElementsMap)===null||C===void 0)&&C[O]&&this._isBrushContainItem(t.globalAABBBounds,x,k)?(k.addState("inBrush",!0),this._linkedInBrushElementsMap[t?.name]||(this._linkedInBrushElementsMap[t?.name]={}),this._linkedInBrushElementsMap[t?.name][O]=k,delete this._linkedOutOfBrushElementsMap[O]):!((R=(M=this._linkedInBrushElementsMap)===null||M===void 0?void 0:M[t?.name])===null||R===void 0)&&R[O]&&!this._isBrushContainItem(t.globalAABBBounds,x,k)&&(k.removeState("inBrush"),k.addState("outOfBrush",!0),this._linkedOutOfBrushElementsMap[O]=k)})})}})}_isBrushContainItem(t,e,n){let r=[];if(["symbol","rect"].includes(n.type)){const{x1:s,x2:a,y1:o,y2:l}=n?.globalAABBBounds;return r=[{x:s,y:o},{x:a,y:o},{x:a,y:l},{x:s,y:l}],aEt(e,r)}return t.intersects(n.globalAABBBounds)}_initItemMap(t,e,n){const{markTypeFilter:r=[]}=this._spec;Object.entries(t).forEach(([s,a])=>{a.forEach(o=>{if(r.includes(o.type))return;const l=o.getGraphics();l&&l.length&&l.forEach(u=>{const c=o.id+"_"+u.context.key;u.removeState("inBrush"),u.removeState("outOfBrush"),n&&u.addState(n,!0),e[c]=u})})})}_initMarkBrushState(t,e){this._brushComponents.forEach((n,r)=>{r!==t&&n.children[0].removeAllChild()}),this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._initItemMap(this._itemMap,this._outOfBrushElementsMap,e),this._initItemMap(this._linkedItemMap,this._linkedOutOfBrushElementsMap,e)}_setRegionMarkPickable(t,e){t.getGroupMark().getGraphics().forEach(n=>n.setAttribute("childrenPickable",e))}_stateClamp(t){return Math.min(Math.max(0,t),1)}_setAxisAndDataZoom(t,e){var n;if(this._zoomRecord=[],this._spec.zoomAfterBrush){const r=t.AABBBounds;(n=this._regionAxisMap["region_"+e.id])===null||n===void 0||n.forEach(s=>{var a,o;const l=s.layoutOrient==="bottom"||s.layoutOrient==="top",u=(a=this._spec.axisRangeExpand)!==null&&a!==void 0?a:0,{x1:c,x2:h,y1:d,y2:f}=r,p=l?"x":"y",g=l?"width":"height",m=l?c:d,_=l?h:f;if(this._axisDataZoomMap[s.id]){const v=this._axisDataZoomMap[s.id],y=(m-e.getLayoutStartPoint()[p])/e.getLayoutRect()[g],b=(_-e.getLayoutStartPoint()[p])/e.getLayoutRect()[g],x=this._stateClamp(y-u),S=this._stateClamp(b+u);v.setStartAndEnd(Math.min(x,S),Math.max(x,S),["percent","percent"]),this._zoomRecord.push({operateComponent:v,start:x,end:S,startValue:jl(x,v.stateScale,zs(v.relatedAxisComponent,v.isHorizontal)),endValue:jl(S,v.stateScale,zs(v.relatedAxisComponent,v.isHorizontal))})}else{const v=s.getScale().range(),y=(o=s.scaleRangeFactor())!==null&&o!==void 0?o:[0,1],b=ke(v)<v[0],x=m-e.getLayoutStartPoint()[p],S=_-e.getLayoutStartPoint()[p],w=b?Math.min(x,S):Math.max(x,S),A=b?Math.max(x,S):Math.min(x,S),k=(A-v[0])/(ke(v)-v[0])*(y[1]-y[0])+y[0],C=(w-v[0])/(ke(v)-v[0])*(y[1]-y[0])+y[0],M=this._stateClamp(k-u),R=this._stateClamp(C+u);s.scaleRangeFactor([M,R]),s.effect.scaleUpdate(),this._zoomRecord.push({operateComponent:s,start:M,end:R,startValue:s.getScale().invert(A),endValue:s.getScale().invert(w)})}})}}_getNeedClearVRenderComponents(){return this._brushComponents}clearGraphic(){this._brushComponents&&this._brushComponents.forEach(t=>{t._container.incrementalClearChild()})}clear(){if(this._brushComponents){const t=this.getContainer();this._brushComponents.forEach((e,n)=>{this._initMarkBrushState(n,""),e.removeAllChild(),e.releaseBrushEvents(),t&&t.removeChild(e)}),this._brushComponents=null}}};cy.type=lt.brush,cy.builtInTheme={brush:pKt},cy.specKey="brush";const ox=()=>{z.registerComponent(cy.type,cy)};class Fk extends Cs{constructor(){super(...arguments),this.type=lt.customMark,this.specKey="customMark",this.layoutType="none",this.layoutZIndex=ti.CustomMark,this.layoutLevel=Jo.CustomMark}created(){super.created(),this.initMarks(),this.initEvent()}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(t,e)=>{var n;return(n=this._option.globalScale.getScale(t))===null||n===void 0?void 0:n.scale(e)}}}initMarks(){if(!this._spec)return;let t=null;if(this._spec.parent){const e=this.getChart().getAllMarks().find(n=>n.getUserId()===this._spec.parent);e.type==="group"&&(t=e)}this._createExtensionMark(this._spec,t,`${zt}_series_${this.id}_extensionMark`,0)}_createExtensionMark(t,e,n,r=0){var s,a;const o=this._createMark({type:t.type,name:L(t.name)?`${t.name}`:`${n}_${r}`},{skipBeforeLayouted:!0,attributeContext:this._getMarkAttributeContext(),componentType:t.componentType,key:t.dataKey});if(o){if(L(t.id)&&o.setUserId(t.id),((s=this._option.globalInstance)===null||s===void 0?void 0:s.isAnimationEnable())&&t.animation){const l=ye({},Ce(t.type,t,this._markAttributeContext));o.setAnimationConfig(l)}if(N(e)?this._marks.addMark(o):e&&e.addMark(o),this.initMarkStyleWithSpec(o,t),t.type==="group"&&(n=`${n}_${r}`,(a=t.children)===null||a===void 0||a.forEach((l,u)=>{this._createExtensionMark(l,o,n,u)})),L(t.dataId)||et(t.dataIndex)){const l=this.getChart().getSeriesData(t.dataId,t.dataIndex);l&&(o.setDataView(l),l.target.addListener("change",()=>{o.getData().updateData()}))}}}initEvent(){}_compareSpec(t,e){const n=super._compareSpec(t,e);return Ne(e,t)||(n.reMake=!0),n.change=!0,n.reRender=!0,n}_getMarkAttributeContext(){return{vchart:this._option.globalInstance,chart:this.getChart(),globalScale:(t,e)=>{var n;return(n=this._option.globalScale.getScale(t))===null||n===void 0?void 0:n.scale(e)},getLayoutBounds:()=>{const{x:t,y:e}=this.getLayoutStartPoint(),{width:n,height:r}=this.getLayoutRect();return new ir().set(t,e,t+n,e+r)}}}_getLayoutRect(){const t=new ir;return this.getMarks().forEach(e=>{const n=e.getProduct();n&&t.union(n.AABBBounds)}),t.empty()?{width:0,height:0}:{width:t.width(),height:t.height()}}getBoundsInRect(t){this.setLayoutRect(t);const e=this._getLayoutRect(),{x:n,y:r}=this.getLayoutStartPoint();return{x1:n,y1:r,x2:n+e.width,y2:r+e.height}}getVRenderComponents(){const t=[],e=n=>{if(n&&n.type==="group")n.getMarks().forEach(r=>{e(r)});else if(n.type==="component"){const r=n?.getComponent();r&&t.push(r)}};return this.getMarks().forEach(n=>{e(n)}),t}}Fk.type=lt.customMark,Fk.specKey="customMark";const Zm=()=>{z.registerComponent(Fk.type,Fk)};class PL{constructor(t,e){this._chartLayoutRect={x:0,y:0,width:1,height:1},this._col=1,this._row=1,this._elementMap=new Map,this.standardizationSpec(t),this._gridInfo=t,this._col=t.col,this._row=t.row,this._colSize=new Array(this._col).fill(null),this._rowSize=new Array(this._row).fill(null),this._colElements=new Array(this._col).fill([]),this._rowElements=new Array(this._row).fill([]),this._onError=e?.onError,this.initUserSetting()}standardizationSpec(t){var e,n,r;t.col=(e=t.col)!==null&&e!==void 0?e:1,t.row=(n=t.row)!==null&&n!==void 0?n:1,t.elements=(r=t.elements)!==null&&r!==void 0?r:[]}initUserSetting(){this._gridInfo.colWidth&&this.setSizeFromUserSetting(this._gridInfo.colWidth,this._colSize,this._col,this._chartLayoutRect.width),this._gridInfo.rowHeight&&this.setSizeFromUserSetting(this._gridInfo.rowHeight,this._rowSize,this._row,this._chartLayoutRect.height),this._colSize.forEach((t,e)=>{t||(this._colSize[e]={value:0,isUserSetting:!1,isLayoutSetting:!1})}),this._rowSize.forEach((t,e)=>{t||(this._rowSize[e]={value:0,isUserSetting:!1,isLayoutSetting:!1})})}setSizeFromUserSetting(t,e,n,r){t.forEach(s=>{s.index<0&&s.index>=n||(et(s.size)?e[s.index]={value:+s.size,isUserSetting:!0,isLayoutSetting:!1}:it(s.size)&&(e[s.index]={value:s.size(r),isUserSetting:!0,isLayoutSetting:!1}))})}clearLayoutSize(){this._gridInfo.colWidth&&this.setSizeFromUserSetting(this._gridInfo.colWidth,this._colSize,this._col,this._chartLayoutRect.width),this._gridInfo.rowHeight&&this.setSizeFromUserSetting(this._gridInfo.rowHeight,this._rowSize,this._row,this._chartLayoutRect.height),this._colSize.forEach(t=>{t.isLayoutSetting=!1,t.isUserSetting||(t.value=0)}),this._rowSize.forEach(t=>{t.isLayoutSetting=!1,t.isUserSetting||(t.value=0)})}getItemGridInfo(t){var e;const n=this._elementMap.get(t);if(n)return n;let r;return r=(e=this._gridInfo.elements)===null||e===void 0?void 0:e.find(s=>{var a;if("modelId"in s&&L(s.modelId)){if(L(t.model.userId)&&t.model.userId===s.modelId)return!0}else if("modelKey"in s&&L(s.modelKey)&&"modelIndex"in s&&L(s.modelIndex)&&((a=t.model.specKey)!==null&&a!==void 0?a:t.model.type)===s.modelKey&&t.model.getSpecIndex()===s.modelIndex)return!0;return!1}),r||(r={col:0,colSpan:1,row:0,rowSpan:1}),this._elementMap.set(t,r),r}getSizeFromGrid(t,e){var n;const r=e==="col"?this._colSize:this._rowSize;let s=0;for(let a=t[e];a<t[e]+((n=t[`${e}Span`])!==null&&n!==void 0?n:1);a++)s+=r[a].value;return s}getSizeFromUser(t,e){var n,r;const s=e==="col"?this._colSize:this._rowSize;if(!(!((n=s[t[e]])===null||n===void 0)&&n.isUserSetting))return;let a=0;for(let o=t[e];o<t[e]+((r=t[`${e}Span`])!==null&&r!==void 0?r:1);o++){if(!s[o].isUserSetting)return;a+=s[o].value}return a}setItemLayoutSizeToGrid(t,e){if(L_(t)){if(e.colSpan&&e.colSpan>1||this._colSize[e.col].isUserSetting)return;this._colSize[e.col].value=Math.max(this._colSize[e.col].value,t.getLayoutRect().width+t.layoutPaddingLeft+t.layoutPaddingRight),this._colSize[e.col].isLayoutSetting=!0}else{if(e.rowSpan&&e.rowSpan>1||this._rowSize[e.row].isUserSetting)return;this._rowSize[e.row].value=Math.max(this._rowSize[e.row].value,t.getLayoutRect().height+t.layoutPaddingTop+t.layoutPaddingBottom),this._rowSize[e.row].isLayoutSetting=!0}}layoutGrid(t){const e=t==="col"?this._colSize:this._rowSize;let n=t==="col"?this._chartLayoutRect.width:this._chartLayoutRect.height;const r=[];e.forEach(s=>{s.isUserSetting||s.isLayoutSetting?n-=s.value:r.push(s)}),n<0&&console.warn(`layout content ${t} size bigger than chart`),r.forEach(s=>s.value=n/r.length)}getItemPosition(t){const e=this.getItemGridInfo(t),n={x:this._chartLayoutRect.x,y:this._chartLayoutRect.y};for(let r=0;r<e.col;r++)n.x+=this._colSize[r].value;for(let r=0;r<e.row;r++)n.y+=this._rowSize[r].value;return n.x+=t.layoutPaddingLeft+t.layoutOffsetX,n.y+=t.layoutPaddingTop+t.layoutOffsetY,n}getItemLayoutRect(t){var e,n;const r=this.getItemGridInfo(t);return{width:((e=this.getSizeFromGrid(r,"col"))!==null&&e!==void 0?e:this._chartLayoutRect.width)-t.layoutPaddingLeft-t.layoutPaddingRight,height:((n=this.getSizeFromGrid(r,"row"))!==null&&n!==void 0?n:this._chartLayoutRect.height)-t.layoutPaddingTop-t.layoutPaddingBottom}}layoutItems(t,e,n,r){this._chartLayoutRect=n,this._chartViewBox=r,this.clearLayoutSize(),e.sort((h,d)=>d.layoutLevel-h.layoutLevel);const s=e.filter(h=>h.layoutType==="normal"&&h.getModelVisible()!==!1),a=s.filter(h=>L_(h)),o=s.filter(h=>!L_(h));s.forEach(h=>{this.layoutOneItem(h,"user",!1)});const l=e.filter(h=>h.layoutType==="region-relative"),u=l.filter(h=>L_(h)),c=l.filter(h=>!L_(h));u.forEach(h=>this.layoutOneItem(h,"user",!1)),this.layoutGrid("col"),o.forEach(h=>this.layoutOneItem(h,"colGrid",!1)),c.forEach(h=>{this.layoutOneItem(h,"colGrid",!1)}),this.layoutGrid("row"),c.forEach(h=>{this.layoutOneItem(h,"grid",!1)}),a.forEach(h=>this.layoutOneItem(h,"grid",!1)),u.forEach(h=>{this.layoutOneItem(h,"grid",!0)}),this.layoutGrid("col"),e.filter(h=>h.layoutType==="region").forEach(h=>this.layoutOneItem(h,"grid",!1)),this.layoutAbsoluteItems(e.filter(h=>h.layoutType==="absolute")),e.filter(h=>h.layoutType!=="absolute").forEach(h=>{h.setLayoutStartPosition(this.getItemPosition(h))})}layoutAbsoluteItems(t){t.forEach(e=>{e.absoluteLayoutInRect(this._chartLayoutRect)})}layoutOneItem(t,e,n){var r,s;const a=e==="rowGrid"||e==="grid"?this.getSizeFromGrid.bind(this):this.getSizeFromUser.bind(this),o=e==="colGrid"||e==="grid"?this.getSizeFromGrid.bind(this):this.getSizeFromUser.bind(this),l=this.getItemGridInfo(t),u={width:((r=o(l,"col"))!==null&&r!==void 0?r:this._chartLayoutRect.width)-t.layoutPaddingLeft-t.layoutPaddingRight,height:((s=a(l,"row"))!==null&&s!==void 0?s:this._chartLayoutRect.height)-t.layoutPaddingTop-t.layoutPaddingBottom},c=t.computeBoundsInRect(u);et(c.width)||(c.width=u.width),et(c.height)||(c.height=u.height),t.setLayoutRect(e!=="grid"?c:u),this.setItemLayoutSizeToGrid(t,l)}}function L_(i){return i.layoutOrient==="left"||i.layoutOrient==="right"}PL.type="grid";const gKt=()=>{z.registerLayout(PL.type,PL)},dot=()=>{F3t()},Cg="vchart-tooltip",e8=`${Cg}-container`,VS=`${Cg}-title`,hR=`${Cg}-content-box`,mKt="",dR={offsetX:10,offsetY:10},i8="99999999999999";function dp(i){return String(i).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\(/g,"&#40;").replace(/  /g," &nbsp;")}const n8=(i,t)=>i?(t||(t=i.getBoundingClientRect()),i.offsetWidth>0?t.width/i.offsetWidth:i.offsetHeight>0?t.height/i.offsetHeight:1):1,r8=i=>Ht(i)&&i?.trim()!==""||yt(i)?dp(i):mKt,B_=(i,t)=>{let e;if(L(i)){if(yt(i))e=i;else if(it(i)){const n=i(t);yt(n)&&(e=n)}}return e},_Kt={left:[-2,0],right:[2,0],top:[0,-2],bottom:[0,2],insideTop:[0,-1.5],insideBottom:[0,1.5],insideLeft:[-1.5,0],insideRight:[1.5,0],insideTopLeft:[-1.5,-1.5],insideTopRight:[1.5,-1.5],insideBottomLeft:[-1.5,1.5],insideBottomRight:[1.5,1.5],lt:[-2,-2],tl:[-2,-2],rt:[2,-2],tr:[2,-2],bl:[-2,2],lb:[-2,2],br:[2,2],rb:[2,2],inside:[0,0],center:[0,0],centerBottom:[0,1],centerTop:[0,-1],centerLeft:[-1,0],centerRight:[1,0]},s8=(i,t,e=2)=>{var n,r;return(r=(n=_Kt[i])===null||n===void 0?void 0:n[t==="x"?0:1])!==null&&r!==void 0?r:e},vKt=i=>ee(i)&&(L(i.left)||L(i.right)||L(i.top)||L(i.bottom)),yKt=i=>ee(i)&&(L(i.x)||L(i.y));class WN extends qb{constructor(){super(...arguments),this._visible=!0,this._isReleased=!1,this.showTooltip=(t,e,n)=>{const{changePositionOnly:r}=n;return r?this.changeTooltipPosition(n,e):this.changeTooltip(!0,n,e)},this.changeTooltip=(t,e,n)=>this._isReleased?1:t?this.changeTooltipPosition(e,n):(this._updateTooltip(!1,e),0),this.changeTooltipPosition=(t,e)=>{var n,r,s,a,o;if(this._isReleased)return 1;const l=t.event,{tooltipSpec:u,activeTooltipSpec:c,changePositionOnly:h}=t;if(!c)return 1;const d=c.activeType;if(c.handler)return(s=(r=(n=c.handler).showTooltip)===null||r===void 0?void 0:r.call(n,d,e,t))!==null&&s!==void 0?s:0;const f=c,p=this._getActualTooltipPosition(c,t,this._getTooltipBoxSize(c,h));c.position=p;const g=(a=c.updatePosition)!==null&&a!==void 0?a:(o=u[d])===null||o===void 0?void 0:o.updatePosition;g&&(c.position=g(c.position,e,t));let m=f?.visible!==!1;return e&&l.type!=="pointerout"&&c.visible&&(c.title||c.content)||(m=!1),this._updateTooltip(m,Object.assign(Object.assign({},t),{changePositionOnly:h})),0},this._getActualTooltipPosition=(t,e,n)=>{var r,s,a,o,l,u,c,h,d;const f=this._chartOption.getRectByDimensionData,{tooltipSpec:p}=e,g={x:1/0,y:1/0};if(!p)return g;const m=e.event,{activeType:_,data:v}=t,y=_==="dimension"?(s=(r=v[0])===null||r===void 0?void 0:r.data)===null||s===void 0?void 0:s[0]:v?.[0],{offsetX:b,offsetY:x}=this._option,S=p[_],w=gG(S?.position,v,e),A=(a=gG(S?.positionMode,v,e))!==null&&a!==void 0?a:_==="mark"?"mark":"pointer",{width:k=0,height:C=0}=n??{},M=p.renderMode==="canvas",R=(o=e?.chart)===null||o===void 0?void 0:o.getCanvasRect(),P=(l=R?.width)!==null&&l!==void 0?l:Fp,O=(u=R?.height)!==null&&u!==void 0?u:zp;let T=!1;const D={width:0,height:0};let B,I={x:0,y:0},F={x:0,y:0},j=1,H=1;const U=$l(this._env);if(U&&!p.confine?(D.width=window.innerWidth,D.height=window.innerHeight):(D.width=P,D.height=O),U&&!M){const rt=this._getParentElement(p);F=(h=(c=rt?.getBoundingClientRect)===null||c===void 0?void 0:c.call(rt))!==null&&h!==void 0?h:g;const gt=(d=this._compiler.getCanvas())!==null&&d!==void 0?d:this._chartContainer;B=gt?.getBoundingClientRect(),I={x:B.x-F.x,y:B.y-F.y},j=n8(gt,B),H=n8(rt,F)}const K=H/j,q={},Z={x:w,y:w},at={x:["left","right"],y:["top","bottom"]},$=({orient:rt,mode:gt,offset:mt},Dt)=>{var St;let Ot,Pt;const _e=e.model,Ze=_e?.getLayoutStartPoint(),It=mt??(Dt==="x"?b:x);if(gt==="mark"){T=!0;const W=e.item,Q=W?.AABBBounds;Q&&Ze&&(Ot=(Dt==="x"?Q.x1:Q.y1)+Ze[Dt],Pt=(Dt==="x"?Q.x2:Q.y2)+Ze[Dt])}else if(f&&gt==="crosshair"&&((St=y?.series)===null||St===void 0?void 0:St.coordinate)==="cartesian"&&y.datum&&y.datum.length){T=!0;const W=f(y,Ze);W&&(Ot=W.start[Dt],Pt=W.end[Dt])}else Z[Dt]=rt;if(T){const W=at[Dt][0],Q=Dt==="x"?k:C;switch(s8(rt,Dt)){case-2:q[W]=Ot-Q*K-It;break;case-1.5:q[W]=Ot+It;break;case 0:q[W]=(Ot+Pt)/2-Q*K/2;break;case-1:q[W]=(Ot+Pt)/2-Q*K-It;break;case 1:q[W]=(Ot+Pt)/2+It;break;case 1.5:q[W]=Pt-Q*K-It;break;case 2:q[W]=Pt+It}}},ft=["x","y"];if(ee(w))if(vKt(w)){const{left:rt,right:gt,top:mt,bottom:Dt}=w;q.left=B_(rt,m),q.top=B_(mt,m),q.right=B_(gt,m),q.bottom=B_(Dt,m)}else yKt(w)&&ft.forEach(rt=>{const gt=w[rt];yt(gt)||it(gt)?q[at[rt][0]]=B_(gt,m):$(gt,rt)});else L(w)&&($({orient:w,mode:A},"x"),$({orient:w,mode:A},"y"));const pt={x:null,y:null};return ft.forEach(rt=>{var gt;const mt=rt==="x"?k:C,Dt=rt==="x"?P:O,St=rt==="x"?b:x,Ot=s8(Z[rt],rt);if(et(q[at[rt][0]]))pt[rt]=q[at[rt][0]];else if(et(q[at[rt][1]]))pt[rt]=Dt-mt*K-q[at[rt][1]];else{const It=rt==="x"?m.canvasX:m.canvasY;pt[rt]=Ot>0?It+St:Ot===0?It-mt*K/2:It-mt*K-St}pt[rt]*=j,U&&(pt[rt]+=I[rt]),pt[rt]/=H;const Pt=rt==="x"?D.width:D.height,_e=p.confine?-(F[rt]-((gt=B?.[rt])!==null&&gt!==void 0?gt:0)/j)/H:-F[rt]/H,Ze=Pt/H+_e-mt;Ot!==2&&pt[rt]<_e?T?pt[rt]=_e:(pt[rt]+=Ot===0?St+mt/2:2*St+mt,pt[rt]>Ze&&(pt[rt]=Ze)):Ot!==-2&&pt[rt]>Ze&&(T?pt[rt]=Ze:(pt[rt]-=Ot===0?St+mt/2:2*St+mt,pt[rt]<_e&&(pt[rt]=_e)))}),pt}}get env(){return this._env}onAdd(t){super.onAdd(t);const e=t.component;this._component=e,this._chartOption=e.getOption(),this._env=this._chartOption.mode,this._chartContainer=this._chartOption.globalInstance.getContainer(),this._compiler=e.getCompiler(),this._initFromSpec()}hideTooltip(t){return this.changeTooltip(!1,t)}release(){var t,e,n,r;const s=(e=(t=this._component)===null||t===void 0?void 0:t.getSpec())!==null&&e!==void 0?e:{};s.handler?(r=(n=s.handler).release)===null||r===void 0||r.call(n):(this._removeTooltip(),this._isReleased=!0,this._chartOption=null,this._component=null)}_getDefaultOption(){var t,e;const{offset:n}=this._component.getSpec();return n?{offsetX:(t=n.x)!==null&&t!==void 0?t:dR.offsetX,offsetY:(e=n.y)!==null&&e!==void 0?e:dR.offsetY}:dR}_getParentElement(t){return t.parentElement}getTooltipContainer(){return this._container}_initFromSpec(){this._option=this._getDefaultOption()}reInit(){this._initFromSpec()}}WN.specKey="tooltip";const _d=(i,t)=>L(i)?J(i)?i.map(e=>`${e}px`).join(" "):`${i}px`:t??"initial",hy=(i={},t={})=>{var e,n;L(i.fontFamily)&&(t.fontFamily=i.fontFamily);const r=(e=i.fill)!==null&&e!==void 0?e:i.fontColor;return L(r)&&(t.color=r),L(i.fontWeight)&&(t.fontWeight=i.fontWeight),L(i.textAlign)&&(t.textAlign=i.textAlign),L(i.fontSize)&&(t.fontSize=_d(i.fontSize)),L(i.maxWidth)&&(t.maxWidth=_d(i.maxWidth)),i.multiLine||L(i.maxWidth)&&i.multiLine!==!1?(t.whiteSpace="initial",t.wordBreak=(n=i.wordBreak)!==null&&n!==void 0?n:"break-word"):(t.wordBreak="normal",t.whiteSpace="nowrap"),t},a8=(i={})=>{const{lineHeight:t}=i;return i.fontSize?en(t,i.fontSize):0},bKt=(i={})=>{var t,e,n,r;const{style:s={},enterable:a,transitionDuration:o}=i,{panel:l={},titleLabel:u,shape:c,keyLabel:h,valueLabel:d,spaceRow:f,align:p}=s,{panelStyle:g,panelPadding:m}=xKt(l),_={marginTop:"0px",marginBottom:"0px"};g.pointerEvents=a?"auto":"none",o&&(g.transitionDuration=o?`${o}ms`:"initial",g.transitionProperty=o?"transform":"initial",g.transitionTimingFunction=o?"ease-out":"initial"),et(f)&&(_.marginBottom=`${f}px`);const v={width:_d((t=c?.size)!==null&&t!==void 0?t:8)},y=hy(u),b=hy(h),x=hy(d),S=p==="right"?"marginLeft":"marginRight";p==="right"&&(g.direction="rtl"),N(y.textAlign)&&(y.textAlign=p==="right"?"right":"left"),N(b.textAlign)&&(b.textAlign=p==="right"?"right":"left"),N(x.textAlign)&&(x.textAlign=p==="right"?"left":"right"),v[S]=_d((e=c.spacing)!==null&&e!==void 0?e:8),b[S]=_d((n=h.spacing)!==null&&n!==void 0?n:26),x[S]=_d((r=d.spacing)!==null&&r!==void 0?r:0);const w=Math.max(a8(d),a8(h));return _.lineHeight=w>0?`${w}px`:"20px",{panelPadding:m,row:_,panel:g,title:y,shape:v,key:b,value:x}},xKt=i=>{var t;const{backgroundColor:e,border:n,shadow:r,padding:s}=i,a={borderWidth:`${(t=n?.width)!==null&&t!==void 0?t:0}px`};let o=null;n?.color&&(a.borderColor=n.color),e&&(a.backgroundColor=e),a.boxShadow=r?`${r.x}px ${r.y}px ${r.blur}px ${r.spread}px ${r.color}`:"initial";const{radius:l}=n??{};return L(l)&&(a.borderRadius=et(l)?`${l}px`:`${l}`),s&&(o=zr(s),a.padding=_d(o)),{panelStyle:a,panelPadding:o}};function Wh(i,t){i&&i.style&&t&&Object.keys(t).forEach(e=>{i.style[e]=t[e]})}const fot=i=>{z.registerComponentPlugin(i.type,i)};function SKt(i,t){var e,n,r,s,a,o;if(!i||!i.hasShape||!i.shapeType)return"";const l='style="display:inline-block;vertical-align:middle;"',{shapeType:u,shapeStroke:c,shapeHollow:h=!1,shapeFill:d}=i,f=(e=i.shapeSize)!==null&&e!==void 0?e:8,p=i.shapeLineWidth?dp(i.shapeLineWidth)+"px":"0px";let g="currentColor";const m=()=>c?dp(c):g,_=f,v=C=>new CM({symbolType:C,size:_,fill:!0});let y=v(u);const b=y.getParsedPath();let x,S;if(!b.path&&b.pathStr&&(y=v(b.pathStr)),y.getParsedPath().path){const C=y.getParsedPath().path;S=C.toString(),x=C.bounds}else b.isSvg&&b.svgCache&&(S=b.svgCache.map(C=>C.path.toString()).join(),x=b.svgCache.reduce((C,M)=>C.union(M.path.bounds),new ir));let w=`${x.x1} ${x.y1} ${x.width()} ${x.height()}`;if(p!=="0px"){const[C,M,R,P]=w.split(" ").map(T=>Number(T)),O=Number(p.slice(0,-2));w=`${C-O/2} ${M-O/2} ${R+O} ${P+O}`}const A=To.IsGradientStr(d);if(!d||Ht(d)&&!A||h)return g=h?"none":d?dp(d):"currentColor",`
    <svg ${l} width="${f}" height="${f}" viewBox="${w}">
      <path
        d="${S}"
        style="fill: ${g}; stroke: ${m()}; stroke-width: ${p}"
      >
      </path>
    </svg>`;const k=A?To.Parse(d):ee(d)?d:null;if(k){g="gradientColor"+(t??"");let C="";const M=((n=k.stops)!==null&&n!==void 0?n:[]).map(R=>`<stop offset="${dp(R.offset.toString())}" stop-color="${dp(R.color)}"/>`).join("");return k.gradient==="radial"?C=`<radialGradient id="${g}" cx="50%" cy="50%" r="50%" fx="0%" fy="0%">
      ${M}
      </radialGradient>`:k.gradient==="linear"&&(C=`<linearGradient id="${g}" x1="${100*((r=k.x0)!==null&&r!==void 0?r:0)}%" y1="${100*((s=k.y0)!==null&&s!==void 0?s:0)}%" x2="${100*((a=k.x1)!==null&&a!==void 0?a:0)}%" y2="${100*((o=k.y1)!==null&&o!==void 0?o:0)}%">
      ${M}
      </linearGradient>`),`
    <svg ${l} width="${f}" height="${f}" viewBox="-0.5 -0.5 1 1">
      ${C}
      <path
        d="${S}"
        style="fill: url(#${g}); stroke: ${m()}; stroke-width: ${p}"
      >
      </path>
    </svg>`}return""}class VT extends WN{getVisibility(){return!!this._rootDom&&this._rootDom.style.visibility==="visible"}setVisibility(t){t!==this.getVisibility()&&this._rootDom&&(this._rootDom.style.visibility=t?"visible":"hidden")}getRootDom(){return this._rootDom}constructor(){super(VT.type),this.type=um.dom,this._tooltipContainer=Rp?.body}onAdd(t){super.onAdd(t),this._initStyle(),this.initEl()}initEl(){const t=this._component.getSpec().parentElement;if(Rp&&t&&t.children&&t.children.length){for(let e=0;e<t.children.length;e++)if(t.children[e].classList.contains(e8)){this._container=t.children[e];break}this._container||(this._container=Rp.createElement("div"),this._container.style.position="relative",this._container.style.zIndex=i8,this._container.classList.add(e8),t.appendChild(this._container))}}initRootDom(){var t;const e=this._component.getSpec(),n=document.createElement("div"),r=(t=this._chartOption)===null||t===void 0?void 0:t.getTheme("fontFamily");Wh(n,Object.assign({left:"0",top:"0",pointerEvents:"none",padding:"12px",position:"absolute",zIndex:i8,fontFamily:r??T0.fontFamily,fontSize:"11px",borderRadius:"3px",borderStyle:"solid",lineHeight:"initial",background:"#fff",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.1)",maxWidth:"100wh",maxHeight:"100vh",visibility:"hidden"},this._domStyle.panel)),n.classList.add(e.className),n.setAttribute("vchart-tooltip-id",`${this.id}`),this._container.appendChild(n),this._rootDom=n}_getTooltipBoxSize(t,e){var n;this._rootDom||this.initRootDom(),e||this._updateDomStringByCol(t),this._updateDomStyle("height",e);const r=(n=this._rootDom)===null||n===void 0?void 0:n.getBoundingClientRect();return{width:r?.width,height:r?.height}}_removeTooltip(){this._rootDom&&this._rootDom.parentNode&&(this._rootDom.parentNode.removeChild(this._rootDom),this._rootDom=null),this._container=null}_updateTooltip(t,e){var n,r;if(t&&this._rootDom){const{tooltipSpec:s,activeTooltipSpec:a}=e;e.changePositionOnly||(this._tooltipActual=a);const o=this._rootDom;if(o){const{x:l=0,y:u=0}=(n=a.position)!==null&&n!==void 0?n:{};let c={x:l,y:u};const h=this.getVisibility();s.updateElement&&(this._updatePosition((r=this._cacheCustomTooltipPosition)!==null&&r!==void 0?r:{x:l,y:u}),s.updateElement(o,a,e),c=this._getActualTooltipPosition(a,e,{width:o.offsetWidth,height:o.offsetHeight}),this._cacheCustomTooltipPosition=c),!h&&t&&(this._rootDom.style.transition="none",this._updatePosition(c,!1),this._rootDom.getBoundingClientRect()),this._updatePosition(c)}this.setVisibility(t)}else this.setVisibility(t),this._cacheCustomTooltipPosition=void 0}_initStyle(){const t=this._component.getSpec();this._domStyle=bKt(t)}_updateDomStringByCol(t){var e;const{title:n={},content:r}=t,s=r&&r.length,a=this._domStyle.row,o=[...this._rootDom.children];let l=o.find(h=>h.className.includes(VS)),u=o.find(h=>h.className.includes(hR));if(!l&&n.visible!==!1){l=document.createElement("h2");const h=document.createElement("span");l.appendChild(h),l.classList.add(VS),this._rootDom.firstChild?this._rootDom.insertBefore(l,this._rootDom.firstChild):this._rootDom.appendChild(l)}l&&n.visible!==!1?(Wh(l,Object.assign(Object.assign(Object.assign({},this._domStyle.title),s?a:{marginBottom:"0px"}),{marginTop:"0px"})),l.firstChild.innerHTML=`${(e=n.value)!==null&&e!==void 0?e:""}`):l&&n.visible===!1&&l.parentNode.removeChild(l);const c=["shape","key","value"];if(!u&&s&&(u=document.createElement("div"),c.forEach(h=>{const d=document.createElement("div");d.classList.add(`${Cg}-column`),d.classList.add(`${Cg}-${h}-column`),d.setAttribute("data-col",h),u.appendChild(d)}),u.classList.add(hR),this._rootDom.appendChild(u)),u&&s){const h=[...u.children];Wh(u,{whiteSpace:"nowrap"}),h.forEach((d,f)=>{const p=d.getAttribute("data-col");if(p&&c.includes(p)){const g=p==="shape"&&r.every(_=>!_.hasShape||!_.shapeType);Wh(d,Object.assign(Object.assign({},this._domStyle[p]),{display:g?"none":"inline-block",verticalAlign:"top"}));const m=[...d.children];m.slice(r.length).forEach(_=>{_.parentNode.removeChild(_)}),r.forEach((_,v)=>{let y=m[v];y||(y=document.createElement("div"),y.classList.add(`${Cg}-${p}`),d.appendChild(y));const b=Object.assign({},a);v===r.length-1&&(b.marginBottom="0px"),b.display=_.visible===!1?"none":"block",b.height="initial",p==="key"?(y.innerHTML=r8(_.key),_.keyStyle&&hy(_.keyStyle,b)):p==="value"?(y.innerHTML=r8(_.value),_.valueStyle&&hy(_.valueStyle,b)):p==="shape"&&(y.innerHTML=SKt(_,`${this.id}_${v}`)),Wh(y,b)})}})}else u&&!s&&u.parentNode.removeChild(u)}_updateDomStyle(t="width",e){var n,r,s,a,o;const l=this._rootDom,u=[...l.children].find(h=>h.className.includes(hR)),c=[...l.children].find(h=>h.className.includes(VS));if(u){const h=this._component.getSpec(),d={},f=(n=h.style)===null||n===void 0?void 0:n.titleLabel;if(f&&f.autoWidth&&f.multiLine!==!1&&c){const m=[...u.children].reduce((_,v)=>t==="height"?_+v.getBoundingClientRect().width:Math.max(_,v.getBoundingClientRect().width),0);m>0&&(c.style.maxWidth=`${m}px`,c.style.maxWidth=`${Math.ceil(u.getBoundingClientRect().width)}px`)}if(L((r=h?.style)===null||r===void 0?void 0:r.maxContentHeight)){const m=c&&c.className.includes(VS)?c.getBoundingClientRect().height+((s=h.style.spaceRow)!==null&&s!==void 0?s:0):0,_=this._chartOption.getChartViewRect(),v=en(h.style.maxContentHeight,Math.min(_.height,document.body.clientHeight)-m-(this._domStyle.panelPadding?this._domStyle.panelPadding[0]+this._domStyle.panelPadding[1]:0));v>0&&(d.maxHeight=`${v}px`,d.overflowY="auto",d.width=`calc(100% + ${this._domStyle.panelPadding?this._domStyle.panelPadding[1]+"px":"10px"})`,Wh(u,d))}const p=u.children,g=[];if(p){for(let m=0;m<p.length;m++){const _=(a=p[m].children)!==null&&a!==void 0?a:[];for(let v=0;v<_.length;v++){e&&(_[v].style[t]="initial");const y=_[v].getBoundingClientRect()[t];(g[v]===void 0||g[v]<y)&&(g[v]=y)}}for(let m=0;m<p.length;m++){const _=(o=p[m].children)!==null&&o!==void 0?o:[];for(let v=0;v<_.length;v++)_[v].style[t]=`${g[v]}px`}}}}_getParentElement(t){var e;return(e=this._container)!==null&&e!==void 0?e:super._getParentElement(t)}isTooltipShown(){return this.getVisibility()}reInit(){super.reInit(),this._initStyle(),this._rootDom&&Wh(this._rootDom,this._domStyle.panel),this.getVisibility()&&(this._updateDomStringByCol(this._tooltipActual),this._updateDomStyle("height",!1))}_updatePosition({x:t,y:e},n=!0){this._rootDom&&(this._rootDom.style.transform=`translate3d(${t}px, ${e}px, 0)`,n&&this._rootDom.style.transition!==""&&(this._rootDom.style.transition="",Object.assign(this._rootDom.style,this._domStyle.panel)))}}VT.type=um.dom;const lx=()=>{fot(VT)},wKt={fontFamily:T0.fontFamily,spacing:10,wordBreak:"break-word"},fR=(i,t)=>{var e;let n,r;i?.type!=="rich"&&i?.type!=="html"?(i=(i??"").toString(),t.multiLine?(n=i.split(`
`),n=n.map((a,o)=>o<n.length-1?a+`
`:a)):n=[i],r=n.map(a=>Object.assign(Object.assign({},t),{text:a}))):(r=i.text,n=i);const s=A2t({wordBreak:(e=t.wordBreak)!==null&&e!==void 0?e:"break-word",maxWidth:t.maxWidth?t.maxWidth:void 0,width:0,height:0,textConfig:r});return{width:s.width(),height:s.height(),text:n}};function tp(i={},t,e){var n,r;return Object.assign(Object.assign({},e??wKt),{fill:(n=i.fill)!==null&&n!==void 0?n:i.fontColor,textAlign:i.textAlign,textBaseline:i.textBaseline,fontFamily:(r=i.fontFamily)!==null&&r!==void 0?r:t,fontSize:i.fontSize,fontWeight:i.fontWeight,lineHeight:i.lineHeight,spacing:i.spacing,multiLine:L(i.maxWidth)?i.multiLine!==!1:i.multiLine,maxWidth:i.maxWidth,wordBreak:i.wordBreak,autoWidth:i.autoWidth})}const AKt=i=>{var t;const{backgroundColor:e,border:n,shadow:r}=i,s={lineWidth:(t=n?.width)!==null&&t!==void 0?t:0,shadow:!!r};n?.color&&(s.stroke=n.color),e&&(s.fill=e),r&&(s.shadowColor=r.color,s.shadowBlur=r.blur,s.shadowOffsetX=r.x,s.shadowOffsetY=r.y,s.shadowSpread=r.spread);const{radius:a}=n??{};return L(a)&&(s.cornerRadius=[a,a,a,a]),s},kKt=(i,t,e)=>{var n,r,s,a,o;const{style:l={},enterable:u,transitionDuration:c}=t,{panel:h={},titleLabel:d,shape:f,keyLabel:p,valueLabel:g,spaceRow:m,align:_}=l,v=zr(h.padding),y=Yl(h.padding),b=tp(Object.assign({textAlign:_==="right"?"right":"left"},d),e),x=tp(Object.assign({textAlign:_==="right"?"right":"left"},p),e),S=tp(g,e),w={fill:!0,size:(n=f?.size)!==null&&n!==void 0?n:8,spacing:(r=f?.spacing)!==null&&r!==void 0?r:6},A={panel:AKt(h),padding:v,title:{},content:[],titleStyle:{value:b,spaceRow:m},contentStyle:{shape:w,key:x,value:S,spaceRow:m},hasContentShape:!1,keyWidth:0,valueWidth:0,enterable:u,transitionDuration:c,align:_},{title:k={},content:C=[]}=i;let M=y.left+y.right,R=y.top+y.bottom,P=0;const O=!!C.length;let T=0,D=0,B=0,I=0;if(O){const ft=[],pt=[],rt=[],gt=[];let mt=0;A.content=C.map((Dt,St)=>{let Ot=0;const{hasShape:Pt,key:_e,shapeType:Ze="",shapeFill:It,shapeStroke:W,shapeLineWidth:Q,shapeSize:nt,value:wt,isKeyAdaptive:xt,spaceRow:dt,keyStyle:jt,valueStyle:pe,shapeHollow:me}=Dt,We={height:0,spaceRow:dt??m};if(L(_e)){const Si=Wt({},x,tp(jt,void 0,{})),{width:ai,height:Ln,text:Se}=fR(_e,Si);We.key=Object.assign(Object.assign({width:ai,height:Ln},Si),{text:Se}),xt?pt.push(ai):ft.push(ai),Ot=Math.max(Ot,Ln)}if(L(wt)){const Si=Wt({},S,tp(pe,void 0,{})),{width:ai,height:Ln,text:Se}=fR(wt,Si);We.value=Object.assign(Object.assign({width:ai,height:Ln},Si),{text:Se}),rt.push(ai),Ot=Math.max(Ot,Ln)}if(Pt){const Si={visible:!0,symbolType:Ze};me?Si.stroke=It:Si.fill=It,Si.stroke=W??It,Si.lineWidth=Q,We.shape=Si;const ai=nt??w.size;Ot=Math.max(ai,Ot),gt.push(ai)}else We.shape={visible:!1};return We.height=Ot,mt+=Ot,St<C.length-1&&(mt+=We.spaceRow),We}),R+=mt,T=ft.length?rn(ft):0,D=pt.length?rn(pt):0,B=rt.length?rn(rt):0,I=gt.length?rn(gt)+w.spacing:0,P=Math.max(I+T+x.spacing+B+S.spacing,I+D,P),A.hasContentShape=!!gt.length,A.keyWidth=T,A.valueWidth=B}let F=0,j=0,H=0;const{visible:U=!0,value:K="",valueStyle:q,spaceRow:Z}=k;A.title.visible=U,A.title.spaceRow=Z??m;let at={};const $=()=>at.autoWidth&&at.multiLine!==!1;if(U){at=Wt({},b,tp(q,void 0,{})),$()&&(at.multiLine=(s=at.multiLine)===null||s===void 0||s,at.maxWidth=(a=at.maxWidth)!==null&&a!==void 0?a:O?Math.ceil(P):void 0);const{text:ft,width:pt,height:rt}=fR(K,at);A.title.value=Object.assign(Object.assign({width:$()?Math.min(pt,(o=at.maxWidth)!==null&&o!==void 0?o:Number.MAX_VALUE):pt,height:rt},at),{text:ft}),F=A.title.value.width,j=A.title.value.height,H=j+(O?A.title.spaceRow:0)}return R+=H,A.title.width=F,A.title.height=j,$()?M+=P||F:M+=Math.max(F,P),O&&A.content.forEach(ft=>{var pt;const rt=ft.value;rt&&((pt=rt.autoWidth)===null||pt===void 0||pt)&&(rt.width=M-y.left-y.right-I-T-x.spacing-S.spacing,rt.maxWidth||(rt.maxWidth=Math.ceil(rt.width)),A.valueWidth=Math.max(A.valueWidth,rt.width))}),A.panel.width=M,A.panel.height=R,A};class WT extends WN{constructor(){super(WT.type),this.type=um.canvas,this._attributes=null}onAdd(t){var e;super.onAdd(t),this._tooltipCanvasId=(e=this._chartOption.modeParams)===null||e===void 0?void 0:e.tooltipCanvasId}_initTooltipComponent(t){const e=this._getLayer(t);this._tooltipComponent=new Mnt({autoCalculatePosition:!1,autoMeasure:!1}),e.add(this._tooltipComponent)}_getLayer(t){if(this._layer)return this._layer;this._layer=t.createLayer(this._tooltipCanvasId);const e=this._layer.layerHandler.canvas.nativeCanvas;return e&&e.style&&(e.style.touchAction="none",e.style.pointerEvents="none"),this._layer}_getTooltipBoxSize(t,e){var n,r;if(!e||N(this._attributes)){const a=(n=this._chartOption)===null||n===void 0?void 0:n.getTheme("fontFamily");this._attributes=kKt(t,this._component.getSpec(),a)}const{panel:s}=(r=this._attributes)!==null&&r!==void 0?r:{};return{width:s.width+s.lineWidth,height:s.height+s.lineWidth}}_removeTooltip(){this._layer&&this._layer.removeAllChild(),this._attributes=null}_updateTooltip(t,e){this._visible=t;const n=this._compiler.getStage();if(!n)return;if(!t)return void(this._tooltipComponent&&this._tooltipComponent.attribute.visible&&(this._tooltipComponent.hideAll(),this._tooltipComponent.setAttributes({visibleAll:!1})));this._tooltipComponent||this._initTooltipComponent(n);const{activeTooltipSpec:r}=e,s=r.position;e.changePositionOnly?L(s)&&this._tooltipComponent.setAttributes(s):this._tooltipComponent.setAttributes(Object.assign(Object.assign({},this._attributes),s)),this._tooltipComponent.attribute.visible||(this._tooltipComponent.showAll(),this._tooltipComponent.setAttributes({visibleAll:!0}))}isTooltipShown(){var t;return(t=this._tooltipComponent)===null||t===void 0?void 0:t.attribute.visibleAll}release(){var t;super.release(),(t=this._layer)===null||t===void 0||t.release()}}WT.type=um.canvas;const pot=()=>{fot(WT)},$N=i=>{z.registerChartPlugin(i.type,i)},CKt=/\{([^}]+)\}/,MKt=/\{([^}]+)\}/g,TKt=/:/;class Ed extends qb{constructor(){super(Ed.type),this.type="formatterPlugin",this._timeModeFormat={utc:No.getInstance().timeUTCFormat,local:No.getInstance().timeFormat},this._formatter=this._format,this._timeFormatter=this._timeModeFormat.local,this._numericFormatter=od.getInstance().format,this._numericSpecifier=od.getInstance().formatter,this._numericFormatterCache=new Map,this._isNumericFormatterCache=new Map}onInit(t,e){var n;const{globalInstance:r}=t;if(!r)return;this._spec=(n=e?.[Ed.specKey])!==null&&n!==void 0?n:{};const{timeMode:s,customFormatter:a,numericFormatter:o,timeFormatter:l}=this._spec;it(a)?this._formatter=a:(this._formatter=this._format.bind(this),it(l)?this._timeFormatter=l:s&&this._timeModeFormat[s]&&(this._timeFormatter=this._timeModeFormat[s]),o&&(this._numericFormatter=o,this._numericSpecifier=null,this._numericFormatterCache=null)),z.registerFormatter(this._formatter)}_format(t,e,n){return J(t)?t.map((r,s)=>{const a=J(n)?n[s]:n;return a?this._formatSingleLine(r,e,a):r}):J(n)?n.map(r=>this._formatSingleLine(t,e,r)):this._formatSingleLine(t,e,n)}_formatSingleLine(t,e,n){let r;return this._isNumericFormatterCache&&(this._isNumericFormatterCache.get(n)?r=this._isNumericFormatterCache.get(n):(r=CKt.test(n),this._isNumericFormatterCache.set(n,r))),r?n.replace(MKt,(s,a)=>{if(!TKt.test(a)){const c=e[a.trim()];return c!==void 0?c:s}const o=a.split(":"),l=e[o.shift()],u=o.join(":");return this._formatSingleText(l,u)}):this._formatSingleText(t,n)}_formatSingleText(t,e){if(PJ.test(e)&&this._numericFormatter){let n;return this._numericFormatterCache&&this._numericSpecifier?(this._numericFormatterCache.get(e)?n=this._numericFormatterCache.get(e):(n=this._numericSpecifier(e),this._numericFormatterCache.set(e,n)),n(Number(t))):this._numericFormatter(e,Number(t))}return e.includes("%")&&this._timeFormatter?this._timeFormatter(e,t):e.startsWith("calc(")?this._calcFormatter(e,t):t}_calcFormatter(t,e){try{const n=t.slice(5,-1).replace(/v/g,String(e));return this._calculateMathExpression(n,e)}catch{return e}}_calculateMathExpression(t,e){const n=t.replace(/\s+/g,"");if(!this._isValidMathExpression(n))return e;try{const r=new Function("return ("+n+")")();if(typeof r!="number"||isNaN(r)||!isFinite(r))throw new Error("Invalid calculation result");return r}catch{return e}}_isValidMathExpression(t){return/^[0-9+\-*/().]+$/.test(t)}release(){super.release(),this._format=null,this._timeFormatter=null,this._numericFormatter=null,this._numericSpecifier=null,this._numericFormatterCache=null,this._isNumericFormatterCache=null}}Ed.pluginType="chart",Ed.specKey="formatter",Ed.type="formatterPlugin";const PKt=()=>{$N(Ed)},got={state:bt.STATE_ACTIVE,trigger:"pointerover",triggerOff:"pointerout"};class zk extends Eh{constructor(t){super(t),this.type="element-active",this.handleStart=e=>{this.start(e.item)},this.handleReset=e=>{this.reset(e.item)},this.options=Object.assign({},got,t),this.updateMarkIdByState([this.options.state])}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}getStartState(){return this.options.state}start(t){if(t){const{state:e,interaction:n}=this.options;this.isGraphicInStateMark(t,e)&&(t.addState(e,!0),n.setStatedGraphics(this,[t]))}}reset(t){const{interaction:e,state:n}=this.options,r=e.getStatedGraphics(this),s=t??r?.[0];s&&r.includes(s)&&(s.removeState(n),e.setStatedGraphics(this,r.filter(a=>a!==s)))}}zk.type="element-active",zk.defaultOptions=got;const EKt=()=>{z.registerInteractionTrigger(zk.type,zk)},UN="element-active-by-legend",mot={state:bt.STATE_ACTIVE,filterType:"groupKey"};class EL extends Eh{constructor(t){super(t),this.type=UN,this.handleStart=e=>{var n,r;const s=e.event;s&&this.start((r=(n=s.detail)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r.id)},this.handleReset=e=>{this.resetAll()},this.options=Object.assign({},mot,t),this.updateMarkIdByState([this.options.state])}getEvents(){return[{type:Tt.legendItemHover,handler:this.handleStart},{type:Tt.legendItemUnHover,handler:this.handleReset}]}getStartState(){return this.options.state}start(t){if(N(t))return;const{interaction:e,state:n}=this.options,r=wz(this.options),s=e.getStatedGraphics(this),a=[];this.getMarks().forEach(o=>{var l;(l=o.getGraphics())===null||l===void 0||l.forEach(u=>{r(u)===t&&a.push(u)})}),e.updateStates(this,a,s,n),e.setStatedGraphics(this,a)}resetAll(){const{interaction:t,state:e}=this.options;t.clearAllStatesOfTrigger(this,e),t.setStatedGraphics(this,[])}reset(t){const{state:e,interaction:n}=this.options;if(t){const r=n.getStatedGraphics(this);r&&r.includes(t)&&(t.removeState(e),n.setStatedGraphics(this,r.filter(s=>s!==t)))}else this.resetAll()}}EL.type=UN,EL.defaultOptions=mot;const RKt=()=>{z.registerInteractionTrigger(UN,EL)},GN="element-highlight-by-group";class Nk extends Eh{constructor(t){super(t),this.type=GN,this.handleStart=e=>{this.start(e.item)},this.handleReset=e=>{const n=e.item;n&&this.isGraphicInMark(n)&&this.resetAll()},this.options=Object.assign({},drt,t),this.updateMarkIdByState([this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getResetState(){return this.options.blurState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}resetAll(){const{interaction:t,highlightState:e,blurState:n}=this.options;t.clearAllStatesOfTrigger(this,e,n),t.setStatedGraphics(this,[])}_getHightlightKey(t){var e;return(e=t.context)===null||e===void 0?void 0:e.groupKey}start(t){if(t&&this.isGraphicInMark(t)){const e=this._getHightlightKey(t);if(N(e))return;const{interaction:n,highlightState:r,blurState:s}=this.options,a=n.getStatedGraphics(this),o=[];this.getMarks().forEach(l=>{var u;(u=l.getGraphics())===null||u===void 0||u.forEach(c=>{this._getHightlightKey(c)===e&&o.push(c)})}),n.updateStates(this,o,a,r,s),n.setStatedGraphics(this,o)}}reset(t){if(t){if(this.isGraphicInMark(t)){const{interaction:e}=this.options,n=e.getStatedGraphics(this);t.removeState([this.options.highlightState,this.options.blurState]),e.setStatedGraphics(this,n.filter(r=>r!==t))}}else this.resetAll()}}Nk.type=GN,Nk.defaultOptions=drt;const OKt=()=>{z.registerInteractionTrigger(GN,Nk)},YN="element-highlight-by-key";class _ot extends Nk{constructor(){super(...arguments),this.type=YN}_getHightlightKey(t){var e;return(e=t.context)===null||e===void 0?void 0:e.key}}_ot.type=YN;const DKt=()=>{z.registerInteractionTrigger(YN,_ot)},XN="element-highlight-by-legend",vot={highlightState:bt.STATE_HIGHLIGHT,blurState:bt.STATE_BLUR,filterType:"groupKey"};class RL extends Eh{constructor(t){super(t),this.type=XN,this.handleStart=e=>{var n,r;const s=e.event;s&&this.start((r=(n=s.detail)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r.id)},this.handleReset=e=>{this.resetAll()},this.options=Object.assign({},vot,t),this.updateMarkIdByState([this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getResetState(){return this.options.blurState}getEvents(){return[{type:Tt.legendItemHover,handler:this.handleStart},{type:Tt.legendItemUnHover,handler:this.handleReset}]}start(t){if(t){const e=wz(this.options),{interaction:n,highlightState:r,blurState:s}=this.options,a=n.getStatedGraphics(this),o=[];this.getMarks().forEach(l=>{var u;(u=l.getGraphics())===null||u===void 0||u.forEach(c=>{e(c)===t&&o.push(c)})}),n.updateStates(this,o,a,r,s),n.setStatedGraphics(this,o)}}resetAll(){const{interaction:t,highlightState:e,blurState:n}=this.options;t.clearAllStatesOfTrigger(this,e,n),t.setStatedGraphics(this,[])}reset(t){const{highlightState:e,blurState:n,interaction:r}=this.options;if(t){const s=r.getStatedGraphics(this);s&&s.includes(t)&&(t.removeState([e,n]),r.setStatedGraphics(this,s.filter(a=>a!==t)))}else this.resetAll()}}RL.type=XN,RL.defaultOptions=vot;const IKt=()=>{z.registerInteractionTrigger(XN,RL)},KN="element-highlight-by-name",yot={highlightState:bt.STATE_HIGHLIGHT,blurState:bt.STATE_BLUR,filterType:"groupKey"};class OL extends Eh{constructor(t){super(t),this.type=KN,this.handleStart=e=>{if(this.options.shouldStart?this.options.shouldStart(e):this._filterByName(e)){const n=this._parseTargetKey(e);this.start(n)}},this.handleReset=e=>{(this.options.shouldReset?this.options.shouldReset(e):this._filterByName(e))&&this.resetAll()},this.options=Object.assign({},yot,t),this.updateMarkIdByState([this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getResetState(){return this.options.blurState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}_filterByName(t){var e;const n=X(this.options.graphicName);return((e=t?.node)===null||e===void 0?void 0:e.name)&&n.includes(t.node.name)}_parseTargetKey(t){return this.options.parseData?this.options.parseData(t):t.node.type==="text"?t.node.attribute.text:null}start(t){if(t){const e=wz(this.options),{interaction:n,highlightState:r,blurState:s}=this.options,a=n.getStatedGraphics(this),o=[];this.getMarks().forEach(l=>{var u;(u=l.getGraphics())===null||u===void 0||u.forEach(c=>{e(c)===t&&o.push(c)})}),n.updateStates(this,o,a,r,s),n.setStatedGraphics(this,o)}}resetAll(){const{interaction:t,highlightState:e,blurState:n}=this.options;t.clearAllStatesOfTrigger(this,e,n),t.setStatedGraphics(this,[])}reset(t){const{highlightState:e,blurState:n,interaction:r}=this.options;if(t){const s=r.getStatedGraphics(this);s&&s.includes(t)&&(t.removeState([e,n]),r.setStatedGraphics(this,s.filter(a=>a!==t)))}else this.resetAll()}}OL.type=KN,OL.defaultOptions=yot;const LKt=()=>{z.registerInteractionTrigger(KN,OL)};class Q0 extends ns{constructor(){super(...arguments),this.type=Q0.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}Q0.type="image";const BKt=()=>{z.registerMark(Q0.type,Q0),as(),Uet(),z.registerGraphicComponent("image",PF)},ux=()=>{bz(),dT(),cc(),Um(),Ps(),yT(),ru(),ST(),Oh(),Qst(),BKt(),mat(),pT()};he.useRegisters([Iz,Bz,zz,jz,aN,oN,lN,dN,nN,pN,mN,Dat,_N,wN,AN,fN,vN,yN,CN,bN,xN,SN,kN,MN,cN,BT,uN,mr,Mr,Jb,$m,Rrt,Cf,Dh,Xm,Km,Mf,FT,EN,sx,ax,Tf,Hz,zT,NT,HT,rot,aot,cot,hot,qm,jN,xi,Ih,ox,Zm,dot,gKt,ux,lx,pot,PKt,EKt,RKt,IKt,LKt,OKt,DKt,cT,DM,Izt]);class bot extends Ms{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["valueField","maskShape","reverse","outlineMargin","outlinePadding","indicatorSmartInvert","liquidBackground","liquidOutline"])}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}let dy=class extends ki{constructor(){super(...arguments),this.transformerConstructor=bot,this.type="liquid",this.seriesType=st.liquid}};dy.type="liquid",dy.seriesType=st.liquid,dy.transformerConstructor=bot;const xot=()=>{si(),bat(),z.registerChart(dy.type,dy)};class Sot extends Ms{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["categoryField","valueField","circle","overlap","overlapLabel"])}transformSpec(t){super.transformSpec(t),this.transformSeriesSpec(t)}}let fy=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Sot,this.type="venn",this.seriesType=st.venn}};fy.type="venn",fy.seriesType=st.venn,fy.transformerConstructor=Sot;const wot=()=>{si(),Sat(),z.registerChart(fy.type,fy)};class Aot extends vo{_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["barWidth","barMaxWidth","barMinWidth","barGapInGroup","barBackground","barMinHeight","stackCornerRadius","bar","bandWidthField"])}transformSpec(t){super.transformSpec(t),uc(t)}_setDefaultXAxisSpec(t){return{orient:"bottom",type:"linear",label:{visible:!1}}}_setDefaultYAxisSpec(t){return{orient:"left",type:"linear"}}}let py=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Aot,this.type="mosaic",this.seriesType=st.mosaic,this.handleAfterStackRegion=(t,e)=>{t.getSeries().forEach(n=>{const r=n.getStackData(),s=n.getStackValue(),a=n.getStackValueField();r&&a&&(Wnt(e[s],a),$nt(n,e[s]))})}}_beforeInit(){this._dataSet&&Vt(this._dataSet,"stackSplit",Irt)}_initStack(){this._stack=new Lrt(this,{afterStackRegion:this.handleAfterStackRegion}),this._stack.init()}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};py.type="mosaic",py.seriesType=st.mosaic,py.transformerConstructor=Aot;const kot=()=>{Tr(),si(),nu(),Vr(),Hr(),wat(),z.registerChart(py.type,py)};class gm extends qb{constructor(){super(gm.type),this.type="ChartResizeZoomPlugin",this._zoom=1,this._onWheel=t=>{t.preventDefault(),t.stopImmediatePropagation();const e=Math.pow(1.005,-t.deltaY*Math.pow(16,t.deltaMode)*.2*this._rate),n={x:t.offsetX,y:t.offsetY};this.zoom(e,n)}}onAfterInitChart(t,e){var n,r,s,a,o;const l=t.globalInstance,u=(r=(n=l.getSpec())===null||n===void 0?void 0:n[gm.specKey])!==null&&r!==void 0?r:{enabled:!1};u.enabled===!0&&(this._minZoom=(s=u.min)!==null&&s!==void 0?s:.1,this._maxZoom=(a=u.max)!==null&&a!==void 0?a:10,this._rate=(o=u.rate)!==null&&o!==void 0?o:.1,this._container=l.getContainer(),this._triggerEvent=_l(t.globalInstance.getChart().getOption().mode).zoom,this._container&&this._triggerEvent&&this._container.addEventListener(this._triggerEvent,this._onWheel))}zoom(t,e){const n=this.service.globalInstance;if(!n)return;const r=this._zoom;let s=this._zoom*t;if(s<=this._minZoom&&t<1||s>=this._maxZoom&&t>1)if(s<=this._minZoom&&this._zoom>this._minZoom)s=this._minZoom;else{if(!(s>=this._maxZoom&&this._zoom<this._maxZoom))return;s=this._maxZoom}if(s===r)return;const a=s/r;if(this._zoom=s,n.resize(n.getCurrentSize().width*this._zoom,n.getCurrentSize().height*this._zoom),e&&this._container){const{scrollLeft:o,scrollTop:l}=this._container;this._container.scrollLeft=o+e.x*(a-1),this._container.scrollTop=l+e.y*(a-1)}}release(){this._container&&this._triggerEvent&&this._container.removeEventListener(this._triggerEvent,this._onWheel)}}gm.specKey="resizeZoom",gm.type="ChartResizeZoomPlugin";const FKt=()=>{$N(gm)};var zKt=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e};function NKt(i,t="ChartContainer",e){const n=Y.forwardRef((r,s)=>{const a=E.useRef(null),[o,l]=E.useState(!1),{className:u,style:c,width:h,height:d,id:f}=r,p=zKt(r,["className","style","width","height","id"]);return E.useLayoutEffect(()=>{l(!0)},[]),Y.createElement("div",{ref:a,id:f?.toString(),className:u,style:Object.assign({position:"relative",height:d||"100%",width:h||"100%"},c)},o?Y.createElement(i,Object.assign({ref:s,container:a.current},e?e(p):p)):Y.createElement(Y.Fragment,null))});return n.displayName=t||i.name,n}const $T=Y.createContext(null);$T.displayName="ChartContext";var Cot={exports:{}},Ii={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qN=Symbol.for("react.element"),ZN=Symbol.for("react.portal"),UT=Symbol.for("react.fragment"),GT=Symbol.for("react.strict_mode"),YT=Symbol.for("react.profiler"),XT=Symbol.for("react.provider"),KT=Symbol.for("react.context"),jKt=Symbol.for("react.server_context"),qT=Symbol.for("react.forward_ref"),ZT=Symbol.for("react.suspense"),QT=Symbol.for("react.suspense_list"),JT=Symbol.for("react.memo"),tP=Symbol.for("react.lazy"),HKt=Symbol.for("react.offscreen"),Mot;Mot=Symbol.for("react.module.reference");function yo(i){if(typeof i=="object"&&i!==null){var t=i.$$typeof;switch(t){case qN:switch(i=i.type,i){case UT:case YT:case GT:case ZT:case QT:return i;default:switch(i=i&&i.$$typeof,i){case jKt:case KT:case qT:case tP:case JT:case XT:return i;default:return t}}case ZN:return t}}}Ii.ContextConsumer=KT;Ii.ContextProvider=XT;Ii.Element=qN;Ii.ForwardRef=qT;Ii.Fragment=UT;Ii.Lazy=tP;Ii.Memo=JT;Ii.Portal=ZN;Ii.Profiler=YT;Ii.StrictMode=GT;Ii.Suspense=ZT;Ii.SuspenseList=QT;Ii.isAsyncMode=function(){return!1};Ii.isConcurrentMode=function(){return!1};Ii.isContextConsumer=function(i){return yo(i)===KT};Ii.isContextProvider=function(i){return yo(i)===XT};Ii.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===qN};Ii.isForwardRef=function(i){return yo(i)===qT};Ii.isFragment=function(i){return yo(i)===UT};Ii.isLazy=function(i){return yo(i)===tP};Ii.isMemo=function(i){return yo(i)===JT};Ii.isPortal=function(i){return yo(i)===ZN};Ii.isProfiler=function(i){return yo(i)===YT};Ii.isStrictMode=function(i){return yo(i)===GT};Ii.isSuspense=function(i){return yo(i)===ZT};Ii.isSuspenseList=function(i){return yo(i)===QT};Ii.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===UT||i===YT||i===GT||i===ZT||i===QT||i===HKt||typeof i=="object"&&i!==null&&(i.$$typeof===tP||i.$$typeof===JT||i.$$typeof===XT||i.$$typeof===KT||i.$$typeof===qT||i.$$typeof===Mot||i.getModuleId!==void 0)};Ii.typeOf=yo;Cot.exports=Ii;var VKt=Cot.exports;const QN=i=>{let t=[];return Y.Children.forEach(i,e=>{N(e)||(VKt.isFragment(e)?t=t.concat(QN(e.props.children)):t.push(e))}),t},WKt=["children","hooks","ref"],ic={onPointerDown:"pointerdown",onPointerUp:"pointerup",onPointerUpOutside:"pointerupoutside",onPointerTap:"pointertap",onPointerOver:"pointerover",onPointerMove:"pointermove",onPointerEnter:"pointerenter",onPointerLeave:"pointerleave",onPointerOut:"pointerout",onMouseDown:"mousedown",onMouseUp:"mouseup",onMouseUpOutside:"mouseupoutside",onMouseMove:"mousemove",onMouseOver:"mouseover",onMouseOut:"mouseout",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onPinch:"pinch",onPinchStart:"pinchstart",onPinchEnd:"pinchend",onPan:"pan",onPanStart:"panstart",onPanEnd:"panend",onDrag:"drag",onDragStart:"dragstart",onDragEnter:"dragenter",onDragLeave:"dragleave",onDragOver:"dragover",onDragEnd:"dragend",onRightDown:"rightdown",onRightUp:"rightup",onRightUpOutside:"rightupoutside",onTouchStart:"touchstart",onTouchEnd:"touchend",onTouchEndOutside:"touchendoutside",onTouchMove:"touchmove",onTouchCancel:"touchcancel",onPress:"press",onPressUp:"pressup",onPressEnd:"pressend",onSwipe:"swipe",onDrop:"drop",onWeel:"wheel",onClick:"click",onDblClick:"dblclick"},JN={onLegendItemHover:"legendItemHover",onLegendItemUnHover:"legendItemUnHover",onLegendItemClick:"legendItemClick",onLegendFilter:"legendFilter",onLegendSelectedDataChange:"legendSelectedDataChange"},Tot={onBrushStart:"brushStart",onBrushChange:"brushChange",onBrushEnd:"brushEnd",onBrushClear:"brushClear"},Pot={onDataZoomChange:"dataZoomChange"},Eot={onPlayerPlay:"playerPlay",onPlayerPause:"playerPause",onPlayerEnd:"playerEnd",onPlayerChange:"playerChange",onPlayerForward:"playerForward",onPlayerBackward:"playerBackward"},Rot={onScrollBarChange:"scrollBarChange"},$Kt={onDimensionHover:"dimensionHover",onDimensionClick:"dimensionClick"},UKt={onDrill:"drill"},GKt={onInitialized:"initialized",onRendered:"rendered",onRenderFinished:"renderFinished",onAnimationFinished:"animationFinished",onLayoutStart:"layoutStart",onLayoutEnd:"layoutEnd"},DL=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},JN),Tot),Eot),Pot),Rot),$Kt),GKt),UKt),ic),YKt=Object.keys(DL).concat(Object.keys(ic).map(i=>`${i}Filter`)),XKt=Object.keys(ic),KKt=Object.keys(ic).reduce((i,t)=>(i[ic[t]]=t,i),{}),IL=(i,t=ic)=>{const e={};return Object.keys(i).forEach(n=>{t[n]&&i[n]&&(e[n]=i[n])}),e},jk=(i,t,e,n=ic)=>{if(!t&&!e||!i)return!1;const r=e?IL(e,n):null,s=t?IL(t,n):null;return r&&Object.keys(r).forEach(a=>{(!s||!s[a]||s[a]!==r[a])&&i.off(n[a],r[a])}),s&&Object.keys(s).forEach(a=>{if(!r||!r[a]||r[a]!==s[a]){const o=t[`${a}Filter`];o?i.on(n[a],o,s[a]):i.on(n[a],s[a])}}),!0},LL=`${zt}_REACT_TOOLTIP`,qKt=(i,t,e)=>{let n;if(e?.tooltipRender?(n=e.tooltipRender,delete e.tooltipRender):t.tooltipRender&&(n=t.tooltipRender),n){let r;return e?.reserveDefaultTooltip?(r=e.reserveDefaultTooltip,delete e.reserveDefaultTooltip):r=t.reserveDefaultTooltip,Object.assign(Object.assign({},e),{updateElement:(s,a,o)=>{const{changePositionOnly:l}=o;if(!l){if(!r){s.style.width="auto",s.style.height="auto",s.style.minHeight="auto",s.style.padding="0px";for(let u=0;u<s.children.length;u++){const c=s.children[u];c.className!==LL&&c.style.display!=="none"&&(c.style.display="none")}}i(rc.createPortal(Y.createElement("div",{className:LL},n(s,a,o)),s))}}})}return e},o8=[...WKt,...YKt,"vchartConstructor","vchartConstrouctor","useSyncRender","skipFunctionDiff","onError","onReady","spec","container","options","morphConfig"],l8={morph:!1,enableExitAnimation:!1},Oot=(i,t)=>`${i&&i.type&&(i.type.displayName||i.type.name)}-${t}`,ZKt=i=>{const t={};return QN(i.children).map((e,n)=>{const r=e&&e.type&&e.type.parseSpec;if(r&&e.props){const s=r(N(e.props.componentId)?Object.assign(Object.assign({},e.props),{componentId:Oot(e,n)}):e.props);s.isSingle?t[s.specName]=s.spec:(t[s.specName]||(t[s.specName]=[]),t[s.specName].push(s.spec))}}),t},QKt=Y.forwardRef((i,t)=>{const[e,n]=E.useState(0),r=E.useRef({});E.useImperativeHandle(t,()=>{var g;return(g=r.current)===null||g===void 0?void 0:g.chart});const s=!!i.spec,a=E.useRef(!1),o=E.useRef(xa(i,o8)),l=E.useRef(null),u=Y.useRef(null),c=!!i.skipFunctionDiff,[h,d]=E.useState(null),f=g=>{let m;s&&g.spec?(m=g.spec,L(g.data)&&(m=Object.assign(Object.assign({},g.spec),{data:g.data}))):m=Object.assign(Object.assign({},o.current),l.current);const _=qKt(d,g,m.tooltip);return _&&(m.tooltip=_),m},p=g=>{if(!a.current){if(!r.current||!r.current.chart)return;g&&jk(r.current.chart,i,u.current,DL),n(e+1),i.onReady&&i.onReady(r.current.chart,e===0)}};return E.useEffect(()=>{var g,m,_;const v=s?null:ZKt(i);if(!(!((g=r.current)===null||g===void 0)&&g.chart))return s||(l.current=v),(b=>{var x;const S=new((x=b.vchartConstructor)!==null&&x!==void 0?x:b.vchartConstrouctor)(f(b),Object.assign(Object.assign({},b.options),{onError:b.onError,autoFit:!0,dom:b.container}));r.current=Object.assign(Object.assign({},r.current),{chart:S}),a.current=!1})(i),r.current.chart&&(jk(r.current.chart,i,u.current,DL),r.current.chart.renderSync({reuse:!1}),p()),void(u.current=i);if(s)return void(Ne(u.current.spec,i.spec,{skipFunction:c})?u.current.data!==i.data&&(r.current.chart.updateFullDataSync(i.data),p(!0),u.current=i):(r.current.chart.updateSpecSync(f(i),void 0,(m=i.morphConfig)!==null&&m!==void 0?m:l8),p(!0),u.current=i));const y=xa(i,o8);Ne(y,o.current,{skipFunction:c})&&Ne(v,l.current,{skipFunction:c})||(o.current=y,l.current=v,r.current.chart.updateSpecSync(f(i),void 0,(_=i.morphConfig)!==null&&_!==void 0?_:l8),p(!0),u.current=i)},[i]),E.useEffect(()=>()=>{r&&r.current&&r.current.chart&&(r.current.chart.release(),r.current.chart=null),u.current=null,a.current=!0},[]),Y.createElement($T.Provider,{value:r.current},QN(i.children).map((g,m)=>{if(typeof g=="string")return null;const _=Oot(g,m);return Y.createElement(Y.Fragment,{key:_},Y.cloneElement(g,{updateId:e,componentId:_}))}),h)}),qe=(i,t,e)=>{e&&e.length&&t.vchartConstructor&&t.vchartConstructor.useRegisters(e);const n=NKt(QKt,i,r=>t?Object.assign(r,t):r);return n.displayName=i,n},os=[cT,DM,Mf,lx,mr,Mr,Jb,$m,FT,ox,Km,sx,Xm,Zm,ux,NT,zT,HT,ax,qm],JKt=qe("AreaChart",{type:"area",vchartConstructor:he},[Bz,xi,Ih,...os]),tqt=qe("BarChart",{type:"bar",vchartConstructor:he},[zz,xi,Ih,...os]);class Dot extends xT{_getDefaultSeriesSpec(t){const e=super._getDefaultSeriesSpec(t);return e.barWidth=t.barWidth,e.barMaxWidth=t.barMaxWidth,e.barMinWidth=t.barMinWidth,e.barGapInGroup=t.barGapInGroup,e}}var u8;(function(i){i.bar3d="bar3d",i.histogram3d="histogram3d",i.rangeColumn3d="rangeColumn3d",i.pie3d="pie3d",i.wordCloud3d="wordCloud3d",i.funnel3d="funnel3d"})(u8||(u8={}));var c8;(function(i){i.rect3d="rect3d",i.arc3d="arc3d",i.pyramid3d="pyramid3d"})(c8||(c8={}));var Zi;(function(i){i.bar3d="bar3d",i.rangeColumn3d="rangeColumn3d",i.pie3d="pie3d",i.wordCloud3d="wordCloud3d",i.funnel3d="funnel3d"})(Zi||(Zi={}));var h8;(function(i){i.bar3d="bar3d",i.funnel3d="funnel3d",i.transform3d="transform3d",i.pie3d="pie3d"})(h8||(h8={}));var d8;(function(i){i.bar3d_horizontal="bar3d_horizontal",i.bar3d_vertical="bar3d_vertical",i.bar3d_stack="bar3d_stack",i.rangeColumn3d_horizontal="rangeColumn3d_horizontal",i.rangeColumn3d_vertical="rangeColumn3d_vertical"})(d8||(d8={}));const Iot=i=>i.zField||i.series&&i.series.some(t=>t.zField),eqt=i=>{return!!i&&((t=i.type)==="bar3d"||t==="funnel3d"||t==="histogram3d"||t==="pie3d"||t==="rangeColumn3d"||t==="wordCloud3d"||Iot(i),!0);var t};class J0 extends qb{constructor(){super(J0.type),this.type="VChart3dPlugin"}onInit(t,e){var n;if(this._is3d=eqt(e),this._is3d){const{globalInstance:r}=t;r.getCompiler().getStage().set3dOptions(Object.assign({},(n=r._option)===null||n===void 0?void 0:n.options3d))}}onBeforeInitChart(t,e,n){this._is3d&&Iot(e)&&(e.layout={type:"layout3d"})}}J0.pluginType="chart",J0.type="VChart3dPlugin";const Pf=()=>{$N(J0),FF(),zF(),Fzt()},Lot={label:{name:"label",type:"text"},bar3d:{name:"bar3d",type:"rect3d"}};class Bot extends kf{_transformLabelSpec(t){this._addMarkLabelSpec(t,"bar3d")}}const iqt=()=>{z.registerAnimation("bar3d",(i,t)=>({appear:$rt(i,t),enter:tx(i,!1),exit:cm(i,!1),disappear:cm(i)}))};class tb extends ns{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,length:3})}setDataLabelType(){return"rect"}constructor(t,e){super(t,e),this.type=tb.type,this._markConfig.support3d=!0}setMarkConfig(t){super.setMarkConfig(t),this._markConfig.support3d=!0}}tb.type="rect3d";const Fot=()=>{z.registerMark(tb.type,tb),as(),f3t(),lrt(),z.registerGraphicComponent("rect3d",wet)},nqt={bar3d:{style:{length:3}},label:{visible:!1,style:{offset:12,position:"outside"}}};class qp extends ga{constructor(){super(...arguments),this.type=Zi.bar3d,this._barMarkName="bar3d",this._barMarkType="rect3d",this.transformerConstructor=Bot}}qp.type=Zi.bar3d,qp.mark=Lot,qp.builtInTheme={bar3d:nqt},qp.transformerConstructor=Bot;const tj=()=>{iqt(),Fot(),Mr(),mr(),z.registerSeries(qp.type,qp)};class BL extends yz{layoutItems(t,e,n,r){this._layoutInit(t,e,n,r);const s={recomputeWidth:this.recomputeWidth,recomputeHeight:this.recomputeHeight};this._layoutNormalItems(e,s);const a={left:this.leftCurrent,top:this.topCurrent,right:this.rightCurrent,bottom:this.bottomCurrent},o=e.filter(v=>v.layoutType==="absolute"),l=o.filter(v=>v.layoutOrient==="z");let u={width:0,height:0};l.length&&(u=l[0].getLayoutRect()),this.leftCurrent+=u.width/8,this.rightCurrent-=u.width/8,this.topCurrent+=u.height/8,this.bottomCurrent-=u.height/8;const{regionItems:c,relativeItems:h,relativeOverlapItems:d,allRelatives:f,overlapItems:p}=this._groupItems(e);this.layoutRegionItems(c,h,d,p,s),this._processAutoIndent(c,h,d,p,f,a,s);const g=o.filter(v=>v.layoutOrient!=="z");this.layoutAbsoluteItems(g);const m=h.filter(v=>v.model.specKey==="axes"&&Ci(v.layoutOrient))[0],_=h.filter(v=>v.model.specKey==="axes"&&Bo(v.layoutOrient))[0];if(m&&l.length){const v=m.getLayoutStartPoint(),y=m.getLayoutRect(),b={x:_.layoutOrient==="left"?v.x+y.width:v.x,y:v.y,width:this._chartLayoutRect.width,height:this._chartLayoutRect.height};l[0].model.directionStr=_.layoutOrient==="left"?"r2l":"l2r";const x=m.getLayoutRect(),S=_.getLayoutRect(),w={length:l[0].getLayoutRect().width,width:x.width,height:S.height};m.model.setLayout3dBox&&m.model.setLayout3dBox(w),_.model.setLayout3dBox&&_.model.setLayout3dBox(w),l[0].model.setLayout3dBox&&l[0].model.setLayout3dBox(w),this.layoutZAxisItems(l,b)}}layoutZAxisItems(t,e){t.forEach(n=>{n.absoluteLayoutInRect(e)})}getItemComputeLayoutRect(t,e){return e||(e={offsetLeft:0,offsetRight:0,offsetTop:0,offsetBottom:0}),{width:this.rightCurrent-this.leftCurrent-t.layoutPaddingLeft-t.layoutPaddingRight-(e.offsetLeft+e.offsetRight),height:this.bottomCurrent-this.topCurrent-t.layoutPaddingTop-t.layoutPaddingBottom-(e.offsetTop+e.offsetBottom)}}_checkAutoIndent(t){const e={top:0,left:0,bottom:0,right:0},n=this._chartViewBox.x2-this._chartViewBox.x1-this.rightCurrent,r=this._chartViewBox.y2-this._chartViewBox.y1-this.bottomCurrent;return t.forEach(s=>{if(!s.getModelVisible()||!s.autoIndent)return;const a=s.layoutOrient==="left"||s.layoutOrient==="right",o=s.getLastComputeOutBounds();a?(e.top=Math.max(e.top,o.y1-this.topCurrent),e.bottom=Math.max(e.bottom,o.y2-r)):(e.left=Math.max(e.left,o.x1-this.leftCurrent),e.right=Math.max(e.right,o.x2-n))}),e}}BL.type="layout3d";const Qm=()=>{z.registerLayout(BL.type,BL)};let gy=class extends Vc{constructor(){super(...arguments),this.transformerConstructor=Dot,this.type="bar3d",this.seriesType=Zi.bar3d}};gy.type="bar3d",gy.seriesType=Zi.bar3d,gy.transformerConstructor=Dot;const zot=()=>{Pf(),Qm(),tj(),z.registerChart(gy.type,gy)},rqt=Object.assign(Object.assign({},Bi),{funnel3d:{name:"funnel3d",type:"pyramid3d"},transform3d:{name:"transform3d",type:"pyramid3d"},transformLabel:{name:"transformLabel",type:"text"},outerLabel:{name:"outerLabel",type:"text"},outerLabelLine:{name:"outerLabelLine",type:"rule"}});class Not extends tN{_transformLabelSpec(t){this._addMarkLabelSpec(t,"funnel3d"),t.isTransform&&this._addMarkLabelSpec(t,"transform3d","transformLabel")}}class eb extends Zst{_getDefaultStyle(){const t=super._getDefaultStyle();return t.stroke=!1,t}constructor(t,e){super(t,e),this.type=eb.type,this._markConfig.support3d=!0}setMarkConfig(t){super.setMarkConfig(t),this._markConfig.support3d=!0}}eb.type="pyramid3d";const sqt=()=>{z.registerMark(eb.type,eb),as(),d3t(),hrt(),z.registerGraphicComponent("pyramid3d",Met)},aqt=Fnt(!0);class $o extends Ja{constructor(){super(...arguments),this.type=Zi.funnel3d,this._funnelMarkName="funnel3d",this._funnelMarkType="pyramid3d",this._transformMarkName="transform3d",this._transformMarkType="pyramid3d",this.transformerConstructor=Not}initMark(){var t,e,n,r,s,a,o,l;if(this._funnelMark=this._createMark(Object.assign(Object.assign({},$o.mark.funnel3d),{name:this._funnelMarkName,type:this._funnelMarkType}),{themeSpec:(t=this._theme)===null||t===void 0?void 0:t.funnel3d,key:this._seriesField,isSeriesMark:!0},{support3d:!0}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(Object.assign(Object.assign({},$o.mark.transform3d),{name:this._transformMarkName,type:this._transformMarkType}),{themeSpec:(e=this._theme)===null||e===void 0?void 0:e.transform3d,key:this._seriesField,skipBeforeLayouted:!1,dataView:this._viewDataTransform.getDataView(),dataProductId:this._viewDataTransform.getProductId()})),(r=(n=this._spec)===null||n===void 0?void 0:n.outerLabel)===null||r===void 0?void 0:r.visible){const{line:u}=(s=this._spec.outerLabel)!==null&&s!==void 0?s:{},{line:c}=(o=(a=this._theme)===null||a===void 0?void 0:a.outerLabel)!==null&&o!==void 0?o:{};this._funnelOuterLabelMark.label=this._createMark($o.mark.outerLabel,{themeSpec:(l=this._theme)===null||l===void 0?void 0:l.outerLabel,key:this._seriesField,markSpec:this._spec.outerLabel}),this._funnelOuterLabelMark.line=this._createMark($o.mark.outerLabelLine,{themeSpec:c,key:this._seriesField,markSpec:u})}}initMarkStyle(){super.initMarkStyle();const t=this._funnelMark;t&&this.setMarkStyle(t,{z:e=>{if(this._isHorizontal())return 0;const n=this.getPoints(e),r=Math.max(Math.abs(n[0].x-n[1].x),Math.abs(n[2].x-n[3].x));return(this._computeMaxSize()-r)/2}},"normal",ct.Series)}initLabelMarkStyle(t){var e,n;super.initLabelMarkStyle(t),this.setMarkStyle(t,{z:r=>{if(this._isHorizontal())return 0;const s=this.getPoints(r),a=Math.max(Math.abs(s[0].x-s[1].x),Math.abs(s[2].x-s[3].x));return(this._computeMaxSize()-a)/2}},"normal",ct.Series),this._labelMark=t,(e=this._funnelOuterLabelMark)===null||e===void 0||e.label,(n=this._funnelOuterLabelMark)===null||n===void 0||n.line}}$o.type=Zi.funnel3d,$o.mark=rqt,$o.builtInTheme={funnel3d:aqt},$o.transformerConstructor=Not;const jot=()=>{sqt(),Ps(),Um(),z.registerSeries($o.type,$o)};let my=class extends ki{constructor(){super(...arguments),this.transformerConstructor=LT,this.type="funnel3d",this.seriesType=Zi.funnel3d}};my.type="funnel3d",my.seriesType=Zi.funnel3d,my.transformerConstructor=LT;const Hot=()=>{si(),Pf(),Qm(),jot(),z.registerChart(my.type,my)};let _y=class extends Dk{constructor(){super(...arguments),this.transformerConstructor=IT,this.type="histogram3d",this.seriesType=Zi.bar3d}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};_y.type="histogram3d",_y.seriesType=Zi.bar3d,_y.transformerConstructor=IT;const Vot=()=>{nu(),Tr(),si(),Vr(),Hr(),Pf(),Qm(),tj(),z.registerChart(_y.type,_y)};class Wot extends nx{transformSpec(t){super.transformSpec(t),t.series.forEach(e=>{e.type==="pie3d"&&(e.angle3d=t.angle3d)})}}class eP extends yst{setDataLabelType(){return"arc"}constructor(t,e){super(t,e),this.type=eP.type,this._markConfig.support3d=!0}setMarkConfig(t){super.setMarkConfig(t),this._markConfig.support3d=!0}}eP.type="arc3d";const oqt=()=>{urt(),as(),u3t(),z.registerGraphicComponent("arc3d",ket),z.registerMark("arc3d",eP)},lqt=Object.assign(Object.assign({},Bi),{pie3d:{name:"pie3d",type:"arc3d"},labelLine:{name:"labelLine",type:"path"}});class $ot extends $z{_transformLabelSpec(t){this._addMarkLabelSpec(t,"pie3d")}}const uqt=()=>{z.registerAnimation("pie3d",(i,t)=>({appear:Wz(i,t),enter:mst(i),exit:_st(i),disappear:vst(i)}))},cqt={outerRadius:.6,pie3d:{style:{height:10,fillOpacity:1}},label:{visible:!1,interactive:!0,position:"outside"}};class Zp extends Cd{constructor(){super(...arguments),this.type=Zi.pie3d,this._pieMarkName="pie3d",this._pieMarkType="arc3d",this.transformerConstructor=$ot}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this._angle3d=(e=(t=this._spec)===null||t===void 0?void 0:t.angle3d)!==null&&e!==void 0?e:-Math.PI/3}initMarkStyle(){super.initMarkStyle();const t=this._pieMark;t&&this.setMarkStyle(t,{beta:()=>this._angle3d},"normal",ct.Series)}initLabelMarkStyle(t,e={}){t&&(super.initLabelMarkStyle(t),this.setMarkStyle(t,{support3d:!0},void 0,ct.Mark))}}Zp.type=Zi.pie3d,Zp.mark=lqt,Zp.builtInTheme={pie3d:cqt},Zp.transformerConstructor=$ot;const Uot=()=>{uqt(),oqt(),z.registerSeries(Zp.type,Zp)};let vy=class extends sN{constructor(){super(...arguments),this.transformerConstructor=Wot,this.type="pie3d",this.seriesType=Zi.pie3d}};vy.type="pie3d",vy.seriesType=Zi.pie3d,vy.transformerConstructor=Wot;const Got=()=>{si(),Pf(),Qm(),Uot(),z.registerChart(vy.type,vy)},hqt=i=>({custom:THt,customParameters:()=>i,easing:"linear",loop:1/0,duration:6e3}),dqt=()=>{z.registerAnimation("wordCloud3d",i=>({appear:hqt(i)}))},fqt={word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}};class Hk extends dh{constructor(){super(...arguments),this.type=Zi.wordCloud3d}_wordCloudTransformOption(){var t;return Object.assign(Object.assign({},super._wordCloudTransformOption()),{postProjection:(t=this._spec.postProjection)!==null&&t!==void 0?t:"StereographicProjection",depth_3d:this._spec.depth_3d})}_wordCloudShapeTransformOption(){var t;return Object.assign(Object.assign({},super._wordCloudShapeTransformOption()),{postProjection:(t=this._spec.postProjection)!==null&&t!==void 0?t:"StereographicProjection",depth_3d:this._spec.depth_3d})}initMark(){this._wordMark=this._createMark(dh.mark.word,{groupKey:this._seriesField,isSeriesMark:!0},{support3d:!0})}initMarkStyle(){super.initMarkStyle();const t=this._wordMark;t&&this.setMarkStyle(t,{z:e=>{var n;return(n=e.z)!==null&&n!==void 0?n:0}},"normal",ct.Series)}initAnimation(){var t,e;const n=(t=this._padding)!==null&&t!==void 0?t:{};this._wordMark&&this._wordMark.setAnimationConfig(ye((e=z.getAnimationInKey("wordCloud3d"))===null||e===void 0?void 0:e(()=>{var r;const s=this.getCompiler().getStage(),a=s.width-n.left||0-n.right||0,o=s.height-n.top||0-n.bottom||0,l=Math.max(a,o)/2;return{center:{x:l,y:l,z:(r=this._spec.depth_3d)!==null&&r!==void 0?r:l},r:l}}),Ce("word",this._spec,this._markAttributeContext)))}}Hk.type=Zi.wordCloud3d,Hk.builtInTheme={wordCloud3d:fqt};const Yot=()=>{Ps(),dqt(),z.registerSeries(Hk.type,Hk)};class Xot extends rx{_getDefaultSeriesSpec(t){const e=super._getDefaultSeriesSpec(t);return e.depth_3d=t.depth_3d,e}}let yy=class extends gN{constructor(){super(...arguments),this.transformerConstructor=Xot,this.type="wordCloud3d",this.seriesType=Zi.wordCloud3d}};yy.type="wordCloud3d",yy.seriesType=Zi.wordCloud3d,yy.transformerConstructor=Xot;const Kot=()=>{Pf(),Yot(),z.registerChart(yy.type,yy)},cx={label:{space:0}},pqt=(i,t)=>{var e;const n=Trt(i.getRegions()),{width:r}=i.getLayoutRect(),s=r,a=i.layout3dBox?i.layout3dBox.length:0,o=i.layout3dBox?i.layout3dBox.width:0,l={x:a,y:0},u=i.getLabelItems(s),c={start:{x:0,y:0},end:l,title:{text:i._spec.title.text||i._dataFieldText,maxWidth:i._getTitleLimit(!1)},items:u,scale:i._scale.clone()},h=(e=i.directionStr)!==null&&e!==void 0?e:"r2l";let d=[0,0],f=-Math.PI/2,p=0;return h==="l2r"&&(p=i.layout3dBox.length,d=[0,0,0],f=Math.PI/2),c.z=p,c.alpha=f,c.anchor3d=d,t||(c.grid={type:"line",start:{x:0,y:0},end:l,items:u[0],verticalFactor:i._axisStyle.verticalFactor,depth:o,length:t?0:n.height,alpha:f,z:p,anchor3d:d}),c};class hx{setLayout3dBox(t){this.layout3dBox=t}_afterUpdateAttribute(t,e){const n=mu(this._orient),r=Ci(this._orient),s=Bo(this._orient);let a=0,o=0;if(!e){const p=this.getRegions();let{x:g,y:m}=p[0].getLayoutStartPoint(),_=g+p[0].getLayoutRect().width,v=m+p[0].getLayoutRect().height;for(let y=1;y<p.length;y++){const b=p[y],{x,y:S}=b.getLayoutStartPoint(),{width:w,height:A}=b.getLayoutRect();g=Math.min(g,x),_=Math.max(_,w+x),m=Math.min(m,S),v=Math.max(v,A+S)}a=Math.abs(v-m),o=Math.abs(_-g)}let l=0,u=0;const{width:c,height:h}=this.getLayoutRect();let d={x:0,y:0};r?(d={x:c,y:0},l=a,u=c):s&&(d={x:0,y:h},l=o,u=h);const f=this.layout3dBox?this.layout3dBox.length:0;if(!n){const p=this.getLabelItems(u);return t.grid={length:l},t.start={x:0,y:0},t.text=this._spec.title.text||this._dataFieldText,t.maxWidth=this._getTitleLimit(r),t.items=p,t.grid={type:"line",start:{x:0,y:0},end:d,items:p[0],depth:f,length:l},t}return pqt(this,e)}}const gqt=()=>{Mr();const i=z.getComponentInKey(jc.type);i.builtInTheme=Object.assign(Object.assign({},i.builtInTheme),{axisZ:Object.assign(Object.assign({},jc.builtInTheme.axisX),cx)}),Be(i,hx)},mqt=()=>{mr();const i=z.getComponentInKey(Vo.type);i.builtInTheme=Object.assign(Object.assign({},i.builtInTheme),{axisZ:Object.assign(Object.assign({},Vo.builtInTheme.axisX),cx)}),Be(i,hx)},_qt=()=>{$m();const i=z.getComponentInKey(Hc.type);i.builtInTheme=Object.assign(Object.assign({},i.builtInTheme),{axisZ:Object.assign(Object.assign({},Hc.builtInTheme.axisX),cx)}),Be(i,hx)},vqt=()=>{$m();const i=z.getComponentInKey(gd.type);i.builtInTheme=Object.assign(Object.assign({},i.builtInTheme),{axisZ:Object.assign(Object.assign({},i.builtInTheme.axisX),cx)}),Be(i,hx)},yqt=()=>{Jb();const i=z.getComponentInKey(Sg.type);i.builtInTheme=Object.assign(Object.assign({},i.builtInTheme),{axisZ:Object.assign(Object.assign({},i.builtInTheme.axisX),cx)}),Be(i,hx)},bqt=()=>{Pf(),Qm(),gqt(),mqt(),yqt(),vqt(),_qt()},xqt=Object.assign(Object.assign({},Lot),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}});class Vk extends Qa{constructor(){super(...arguments),this.type=Zi.rangeColumn3d,this._barMarkType="rect3d",this._barName=Zi.bar3d}}Vk.type=Zi.rangeColumn3d,Vk.mark=xqt;const qot=()=>{Fot(),Mr(),mr(),z.registerSeries(Vk.type,Vk)};class Zot extends vo{_getDefaultSeriesSpec(t){var e,n;const r=super._getDefaultSeriesSpec(t,["bar3d","barGapInGroup"]);return t.direction==="horizontal"?r.xField=(e=t.xField)!==null&&e!==void 0?e:[t.minField,t.maxField]:r.yField=(n=t.yField)!==null&&n!==void 0?n:[t.minField,t.maxField],r}}let by=class extends ki{constructor(){super(...arguments),this.transformerConstructor=Zot,this.type="rangeColumn3d",this.seriesType=Zi.rangeColumn3d}_setModelOption(){this._modelOption.getDimensionInfo=ea,this._modelOption.getDimensionInfoByValue=Ts,this._modelOption.getRectByDimensionData=ia}};by.type="rangeColumn3d",by.seriesType=Zi.rangeColumn3d,by.transformerConstructor=Zot;const Qot=()=>{Tr(),si(),Vr(),Hr(),Pf(),Qm(),qot(),z.registerChart(by.type,by)},Jot="pictogram",dx="pictogram",Sqt="element-highlight-by-graphic-name",wqt="element-select-by-graphic-name";var f8;(function(i){i.pictogram="pictogram"})(f8||(f8={}));const Aqt=Object.assign(Object.assign({},Bi),{pictogram:{name:"pictogram",type:"group"}});class tlt extends Ms{_isValidSeries(t){return t===dx}_getDefaultSeriesSpec(t){return super._getDefaultSeriesSpec(t,["type","nameField","valueField","svg","pictogram","defaultFillColor"])}transformSpec(t){super.transformSpec(t),t.region.forEach(e=>{e.coordinate="geo"}),super.transformSeriesSpec(t)}}const af=new Map;let w1;function kqt(){w1||(w1=new lh,Ul(w1,"svg",xOt))}function Cqt(i,t){af.has(i)&&es(`svg source key of '${i}' already exists, will be overwritten.`),kqt();const e=new je(w1);e.parse(t,{type:"svg"}),af.set(i,e)}function Mqt(i){af.has(i)?af.delete(i):es(`map type of '${i}' does not exists.`)}function Tqt(i){return af.get(i)}class Pqt extends gr{_getDefaultSpecFromChart(t){var e,n,r;const s=(e=super._getDefaultSpecFromChart(t))!==null&&e!==void 0?e:{},a=t.svg,o=(r=(n=af.get(a))===null||n===void 0?void 0:n.latestData)===null||r===void 0?void 0:r.elements;return o&&o.length&&o.map(l=>l.name).filter(l=>L(l)).forEach(l=>{t[l]&&(s[l]=t[l])}),s}}class Eqt extends pr{constructor(){super(...arguments),this.dimensionTooltipTitleCallback=t=>{var e;const n=this.series;return(e=this._getDimensionData(t))!==null&&e!==void 0?e:n.getDatumName(t)},this.markTooltipValueCallback=(t,e)=>{const{measureFields:n}=this._seriesCacheInfo;if(n[0]&&t.data)return t.data[n[0]]},this.markTooltipKeyCallback=t=>{var e;return(e=t.data)===null||e===void 0?void 0:e[this.series.getDimensionField()[0]]}}}const elt="element-highlight-by-graphic-name";class FL extends R0{constructor(){super(...arguments),this.type=elt,this.handleStart=t=>{if(t&&t.item&&this.isGraphicInMark(t.item)&&(this.options.shouldStart?this.options.shouldStart(t):this._filterByName(t))){const e=this._parseTargetKey(t);this.start(e)}},this.handleReset=t=>{t&&t.item&&this.isGraphicInMark(t.item)&&this.reset()}}_filterByName(t){var e;return!!(!((e=t?.node)===null||e===void 0)&&e.name)}_parseTargetKey(t){return t.node.name}start(t){if(N(t))return;const{interaction:e,highlightState:n,blurState:r}=this.options,s=e.getStatedGraphics(this),a=[];this.getMarks().forEach(o=>{var l;(l=o.getGraphics())===null||l===void 0||l.forEach(u=>{u.name===t&&a.push(u)})}),e.updateStates(this,a,s,n,r),e.setStatedGraphics(this,a)}reset(){const{highlightState:t,blurState:e,interaction:n}=this.options;n.clearAllStatesOfTrigger(this,t,e),n.setStatedGraphics(this,[])}}FL.type=elt;const Rqt=()=>{z.registerInteractionTrigger(FL.type,FL)},ilt="element-select-by-graphic-name";class zL extends O0{constructor(){super(...arguments),this.type=ilt}start(t){const e=t?.name;e&&this.getMarks().forEach(n=>{var r;(r=n.getGraphics())===null||r===void 0||r.forEach(s=>{s.name===e&&super.start(s)})})}}zL.type=ilt;const Oqt=()=>{z.registerInteractionTrigger(zL.type,zL)};function ej(i){var t;return L(i)&&i!=="none"&&!(!((t=i.includes)===null||t===void 0)&&t.call(i,"url"))}const Dqt=i=>{const t=parseFloat(i.strokeWidth);if(!isNaN(t))return t;const e=i.stroke;return e&&ej(e)?1:0},fp=(i,t)=>{var e;const n=(e=i.fill)!==null&&e!==void 0?e:t;return n&&ej(n)?n:void 0},Iqt=(i,t)=>{var e;const n=(e=i.stroke)!==null&&e!==void 0?e:t;return!(!n||!ej(n))&&n},_c=i=>Object.assign(Object.assign({},i),{x:parseFloat(i.x)||void 0,y:parseFloat(i.y)||void 0,fillStrokeOrder:!1,fill:fp(i),lineWidth:Dqt(i),stroke:Iqt(i)}),NL={group:i=>{const t=_c(i);return Object.assign(Object.assign({},t),{visibleAll:t.visible!==!1})},rule:i=>Object.assign(Object.assign({},_c(i)),{x:parseFloat(i.x1),y:parseFloat(i.y1),x1:parseFloat(i.x2),y1:parseFloat(i.y2)}),rect:i=>Object.assign(Object.assign({},_c(i)),{fill:fp(i,"#000"),width:parseFloat(i.width),height:parseFloat(i.height)}),polygon:i=>Object.assign(Object.assign({},_c(i)),{fill:fp(i,"#000"),points:i.points.trim().split(/\s+/).map(t=>{const[e,n]=t.split(",").map(Number);return{x:e,y:n}})}),line:i=>Object.assign(Object.assign({},_c(i)),{points:i.points.trim().split(/\s+/).map(t=>{const[e,n]=t.split(",").map(Number);return{x:e,y:n}})}),path:i=>Object.assign(Object.assign({},_c(i)),{path:i.d,fillStrokeOrder:!1,fill:fp(i,"#000")}),arc:i=>{var t;return Object.assign(Object.assign({},_c(i)),{outerRadius:(t=i.r)!==null&&t!==void 0?t:i.ry,x:parseFloat(i.cx),y:parseFloat(i.cy),startAngle:0,endAngle:2*Math.PI,scaleX:parseFloat(i.rx)/parseFloat(i.ry)||1,fill:fp(i,"#000")})},text:(i,t)=>{var e,n;return Object.assign(Object.assign({},_c(i)),{text:t,textAlign:(e=i.textAlign)!==null&&e!==void 0?e:"left",textBaseLine:(n=i.textAnchor)!==null&&n!==void 0?n:"middle",anchor:[0,0],fill:fp(i,"#000")})}},Lqt=i=>{var t,e;if(!i||!i[0])return{};const{elements:n}=i[0].latestData;if(n&&n.length){n.forEach((s,a)=>{var o;s[hr]=a,s._uniqueId=`${s.id}-${a}`,s.data=void 0;const{graphicType:l,transform:u}=s,c={visible:s.attributes.visibility!=="hidden"&&s.attributes.visibility!=="collapse"};s.graphicType==="text"?ot(c,s._inheritStyle,(o=s.parent)===null||o===void 0?void 0:o._textGroupStyle,s.attributes):s.graphicType!=="group"&&ot(c,s._inheritStyle,s.attributes),NL[l]?s._finalAttributes=NL[l](c,s.value):s._finalAttributes=c,u&&(s._finalAttributes.postMatrix=Object.assign({},u))});const r=n.filter(s=>s.tagName==="text");for(let s=0;s<r.length;s++){const a=r[s]._uniqueId,o=n.filter(l=>{let u=!1,c=l.parent;for(;c;){if(c._uniqueId===a){u=!0;break}c=c.parent}return u});if(o&&o.length){const l=(e=(t=r[s]._textGroupStyle)===null||t===void 0?void 0:t.x)!==null&&e!==void 0?e:0;let u=l;for(let c=0;c<o.length;c++){const h=o[c];if(h.graphicType==="group")u=l;else if(h.value&&h.parent._textGroupStyle.x===void 0){const d=o.slice(0,c).reverse().find(f=>f.graphicType==="text"&&f.value);d&&(u+=jnt(d.value,d._finalAttributes).width),h._finalAttributes.x=u}}}}}return n};class Fo extends Xrt{constructor(){super(...arguments),this.type=dx,this._idToMark=new Map}setAttrFromSpec(){var t,e,n;super.setAttrFromSpec(),this.svg=this._spec.svg,this._nameField=this._spec.nameField,this._valueField=this._spec.valueField,this.svg||(t=this._option)===null||t===void 0||t.onError("svg source is not specified !"),this._parsedSvgResult=(e=Tqt(this.svg))===null||e===void 0?void 0:e.latestData,this._parsedSvgResult||(n=this._option)===null||n===void 0||n.onError(`'${this.svg}' is not registered !`)}getDatumCenter(t){return[Number.NaN,Number.NaN]}getDatumName(t){return t.name||t._nameFromParent}getMarksWithoutRoot(){return this.getMarks().filter(t=>t.name&&!t.name.includes("seriesGroup")&&!t.name.includes("root")&&t!==this._pictogramMark)}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getTransformMatrix=this.getRootMatrix.bind(this),this._markAttributeContext.coordToPosition=this.coordToPosition.bind(this),this._markAttributeContext.dataToPosition=this.dataToPosition.bind(this)}_defaultHoverConfig(t){return{type:Sqt,trigger:t.trigger,triggerOff:"pointerout",blurState:bt.STATE_HOVER_REVERSE,highlightState:bt.STATE_HOVER}}_defaultSelectConfig(t){const e=t.mode==="multiple",n=L(t.triggerOff)?t.triggerOff:e?["empty","self"]:["empty",t.trigger];return{type:wqt,trigger:t.trigger,triggerOff:n,reverseState:bt.STATE_SELECTED_REVERSE,state:bt.STATE_SELECTED,isMultiple:e}}initMark(){var t;if(this._pictogramMark=this._createMark(Fo.mark.pictogram,{groupKey:this.getDimensionField()[0],isSeriesMark:!0,skipBeforeLayouted:!0},{morph:fo(this._spec,Fo.mark.pictogram.name)}),this._pictogramMark){this._pictogramMark.setData(this._mapViewData),this._pictogramMark.setUserId(Fo.mark.pictogram.name);for(const e of this._mapViewData.getDataView().latestData){const{graphicType:n,name:r,parent:s,id:a,_nameFromParent:o,_uniqueId:l}=e,u=this._createMark({type:n,name:r??o},{groupKey:l,isSeriesMark:!1,skipBeforeLayouted:!0,parent:(t=this._idToMark.get(s?._uniqueId))!==null&&t!==void 0?t:this._pictogramMark},{morph:fo(this._spec,Fo.mark.pictogram.name)});u&&(u.setData(this._mapViewData),u.setUserId(l),this._idToMark.set(l,u),u.type!=="group"&&u.setMarkConfig({graphicName:u.name}),u.setTransform([{type:"filter",callback:c=>c._uniqueId===l}]))}this._initLabelMark()}}_initLabelMark(){if(this._spec.label.visible!==!0)return;const t=this._createMark(Fo.mark.label,{isSeriesMark:!1,parent:this._pictogramMark,groupKey:"_uniqueId",skipBeforeLayouted:!0});t&&(this._labelMark=t,this._labelMark.setData(this._mapViewData))}initLabelMarkStyle(){this._labelMark&&this.setMarkStyle(this._labelMark,{visible:t=>!!this._validElement(t),x:t=>{var e;return(e=this.dataToPosition(t,!0))===null||e===void 0?void 0:e.x},y:t=>{var e;return(e=this.dataToPosition(t,!0))===null||e===void 0?void 0:e.y},text:t=>t[this.nameField],textAlign:"center",textBaseline:"middle"},bt.STATE_NORMAL,ct.Series)}initMarkStyle(){const{root:t,viewBoxRect:e}=this._parsedSvgResult,n=this._mapViewData.getDataView().latestData;t&&(this.setMarkStyle(this._pictogramMark,NL.group(t.attributes),"normal",ct.Built_In),t.transform&&this.setMarkStyle(this._pictogramMark,{postMatrix:()=>t.transform},"normal",ct.Built_In),e&&this._pictogramMark.setMarkConfig({clip:!0,clipPath:[_f(Object.assign(Object.assign({},e),{fill:!0}))]}));for(const r of n){const{_uniqueId:s,_finalAttributes:a}=r,o=this._idToMark.get(s),l=this._validElement(r);o&&(this.setMarkStyle(o,{keepStrokeScale:!0},"normal",ct.Built_In),l?(this.initMarkStyleWithSpec(o,ot({},this._spec.pictogram,this._spec[o.name])),this.setMarkStyle(o,a,"normal",ct.Series),o.setPostProcess("fill",(u,c)=>L(u)?u:this._spec.defaultFillColor)):(o.setMarkConfig({interactive:!1}),this.setMarkStyle(o,a,"normal",ct.Built_In)))}this.initLabelMarkStyle()}_validElement(t){return t.name||t._nameFromParent}initTooltip(){this._tooltipHelper=new Eqt(this),this.getMarksWithoutRoot().forEach(t=>{t&&t.name&&this._tooltipHelper.activeTriggerSet.mark.add(t)})}dataToPosition(t,e=!1){if(!t)return null;const n=t[this.nameField];if(!n)return null;const r=this.getMarksWithoutRoot().filter(o=>o.name===n);if(!r||r.length===0)return null;let s=new ir;e?r.forEach(o=>{s=s.union(o.getGraphics()[0].globalAABBBounds)}):r.forEach(o=>{s=s.union(o.getProduct().AABBBounds)});const a={x:(s.x1+s.x2)/2,y:(s.y1+s.y2)/2};if(e){const{x:o,y:l}=this.getLayoutStartPoint();a.x-=o,a.y-=l}return a}coordToPosition(t){if(!t)return null;const{x:e,y:n}=t,r=this.getRootMatrix();if(!r)return null;const s={};return r.getInverse().transformPoint({x:e,y:n},s),s}getRootMatrix(){var t;return(t=this.getPictogramRootGraphic())===null||t===void 0?void 0:t.transMatrix}getPictogramRootGraphic(){return this._pictogramMark.getProduct()}initData(){var t,e;super.initData();const n=af.get(this.svg);n||(t=this._option)===null||t===void 0||t.onError("no valid svg found!");const r=new je(this._dataSet,{name:`pictogram_${this.id}_data`});Vt(this._dataSet,"pictogram",Lqt),Vt(this._dataSet,"lookup",_rt),r.parse([n],{type:"dataview"}).transform({type:"pictogram"}).transform({type:"lookup",options:{from:()=>this.getViewData().latestData,key:"name",fields:this._nameField,set:(s,a)=>{a&&(s.data=a)}}}).transform({type:"lookup",options:{from:()=>this.getViewData().latestData,key:"_nameFromParent",fields:this._nameField,set:(s,a)=>{a&&(s.data=a)}}}),(e=this._data)===null||e===void 0||e.getDataView().target.addListener("change",r.reRunAllTransform),this._mapViewData=new Cr(this._option,r)}mapViewDataUpdate(){this._mapViewData.updateData()}onLayoutEnd(){var t;super.onLayoutEnd(),(t=this._mapViewData)===null||t===void 0||t.getDataView().reRunAllTransform()}updateSVGSize(){const{width:t,height:e}=this.getLayoutRect(),n=t/2,r=e/2,s=this.getPictogramRootGraphic();if(s){const a=s.AABBBounds,{x1:o,x2:l,y1:u,y2:c}=s.AABBBounds,h=(o+l)/2,d=(u+c)/2,f=t/a.width(),p=e/a.height(),g=Math.min(f,p);s.scale(g,g,{x:h,y:d}),s.translate(n-h,r-d)}}initEvent(){var t;super.initEvent(),(t=this._mapViewData.getDataView())===null||t===void 0||t.target.addListener("change",this.mapViewDataUpdate.bind(this)),this.event.on(Tt.afterMarkLayoutEnd,this.updateSVGSize.bind(this))}handleZoom(t){const{scale:e,scaleCenter:n}=t;if(e===1)return;const r=this.getPictogramRootGraphic();r&&(r.attribute.postMatrix||r.setAttributes({postMatrix:new di}),r.scale(e,e,n))}handlePan(t){const{delta:e}=t;if(e[0]===0&&e[1]===0)return;const n=this.getPictogramRootGraphic();n&&(n.attribute.postMatrix||n.setAttributes({postMatrix:new di}),n.translate(e[0],e[1]))}getMarkData(t){var e;return(e=t.data)!==null&&e!==void 0?e:{}}getMeasureField(){return[this.valueField]}getDimensionField(){return[this.nameField]}_getSeriesInfo(t,e){const n=this.getDefaultShapeType();return e.map(r=>({key:r,originalKey:r,style:this.getSeriesStyle({data:{[t]:r}}),shapeType:n}))}release(){this._parsedSvgResult=null,this._idToMark.clear(),this._idToMark=null}}Fo.type=dx,Fo.mark=Aqt,Fo.transformerConstructor=Pqt;const nlt=()=>{z.registerSeries(Fo.type,Fo),z.registerImplement("registerSVG",Cqt),z.registerImplement("unregisterSVG",Mqt),Rqt(),Oqt()};let xy=class extends ki{constructor(){super(...arguments),this.transformerConstructor=tlt,this.type=Jot,this.seriesType=dx}};xy.type=dx,xy.seriesType=Jot,xy.transformerConstructor=tlt;const rlt=()=>{si(),nlt(),z.registerChart(xy.type,xy)};function p8(i,t,e=0){return e>Math.max(t.x1-i.x2,i.x1-t.x2,t.y1-i.y2,i.y1-t.y2)}function Bqt(i){return{x1:i.x,x2:i.x+i.width,y1:i.y,y2:i.y+i.height}}function Fqt(i){return{x:i.x1,y:i.y1,width:i.x2-i.x1,height:i.y2-i.y1}}function slt(i){var t;if(!i||i.length===0)return[];if(i.length===1)return[i[0].rect];const e=i.map(r=>{var s;return Object.assign(Object.assign({},r),{bound:Bqt(r.rect),anchorCandidates:jqt((s=r.anchors)!==null&&s!==void 0?s:[],r.point,r.rect,r.offset)})}),n=[];n.push(e[0].bound);for(let r=1;r<=e.length-1;r++){const s=e[r],a=s.bound;let o=n.some(l=>p8(l,a));if(s.anchorCandidates)if(o&&((t=s.anchorCandidates)===null||t===void 0?void 0:t.length)>0){for(let l=0;l<s.anchorCandidates.length;l++){const u=s.anchorCandidates[l],c={x1:u.x,y1:u.y,x2:u.x+a.x2-a.x1,y2:u.y+a.y2-a.y1,anchor:u};if(!n.some(h=>p8(h,c))){n.push(c),o=!1;break}}o&&n.push(s.bound)}else n.push(s.bound)}return n.map(r=>Fqt(r))}function zqt(i,t,e){const n=i.map(u=>u.pointCoord),{x1:r,x2:s,y1:a,y2:o}=nEt(n),l=e([(r+s)/2,(a+o)/2]);return l?slt(i.map(u=>{const c=u.rect,h=alt(t,u.pointCoord)?e(Nqt(t,[u.pointCoord.x,u.pointCoord.y],g8(m8(u.point,l)))):u.point;h&&(c.x=h.x,c.y=h.y);const d=g8(m8(u.point,l));let f;const p=[];return d>=-45&&d<45?(f="top",p.push("left","right")):d>=45&&d<135?f="right":d>=-135&&d<-45?(f="left",p.push("left")):(f="bottom",p.push("left","right")),u.anchors=p,u.offset=20,u.rect=ij(u.rect,f,0),u})):[]}function g8(i){return i>180?i-360:i}function m8(i,t){return 180*Math.atan2(i.y-t.y,i.x-t.x)/Math.PI+90}function Nqt(i,t,e,n=200){const r=5621/n;let s=t;for(let a=1;a<=r;a++){const o=SEt(s,n,e);if(!alt(i,o))return[o.x,o.y];s=[o.x,o.y]}return t}function alt(i,t){for(let e=0;e<i.length;e++)if(xEt(t,i[e]))return!0;return!1}function ij(i,t,e=0){const n=Object.assign({},i);return t==="top"?(n.x-=i.width/2,n.y-=e+i.height/2):t==="bottom"?(n.x-=i.width/2,n.y+=e-i.height/2):t==="left"?(n.x-=e+i.width,n.y-=i.height/2):t==="right"&&(n.x+=e,n.y-=i.height/2),n}function jqt(i,t,e,n=0){const r=[];return i.forEach(s=>{const{x:a,y:o}=ij(Object.assign(Object.assign({},t),{width:e.width,height:e.height}),s,n);r.push({x:a,y:o})}),r}const Hqt={visible:!0,offset:12,position:"top",space:10,nameLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"left",fill:"black",fontSize:10}},valueLabel:{visible:!0,style:{textBaseline:"middle",textAlign:"left",fill:"black",fontSize:10}},background:{visible:!0,padding:{top:4,bottom:4,left:6,right:6},style:{cornerRadius:2,lineWidth:1,fill:"white",stroke:"grey"}},leader:{visible:!1,style:{lineWidth:1,stroke:"black"}}};class olt extends Wm{_getDefaultSpecFromChart(){return Hqt}}class A1 extends Cs{constructor(){super(...arguments),this.type="mapLabel",this.name=" mapLabel",this.specKey="mapLabel",this.transformerConstructor=olt,this.layoutType="none",this.layoutZIndex=ti.MarkPoint,this._activeDatum=[]}static getSpecInfo(t){return tl(t,this.specKey,this.type,e=>e.visible&&L(e.seriesId))}setAttrFromSpec(){var t,e,n,r;this.nameField=(t=this._spec.nameField)!==null&&t!==void 0?t:(e=this._series)===null||e===void 0?void 0:e.getDimensionField()[0],this.valueField=(n=this._spec.valueField)!==null&&n!==void 0?n:(r=this._series)===null||r===void 0?void 0:r.getMeasureField()[0]}created(){super.created(),this._spec.visible&&(this.initRelatedInfo(),this.initData(),this.initEvent())}initRelatedInfo(){var t,e,n,r,s,a,o,l;this._series=this._option.getSeriesInUserIdOrIndex([this._spec.seriesId])[0],this._spec.position==="outer"&&(this._map=(e=(t=this._regions[0].getSeriesInType("map")[0])===null||t===void 0?void 0:t.getMapViewData())===null||e===void 0?void 0:e.latestData,this._longitudeField=(s=(r=(n=this._regions[0]).getSpec)===null||r===void 0?void 0:r.call(n))===null||s===void 0?void 0:s.longitudeField,this._latitudeField=(l=(o=(a=this._regions[0]).getSpec)===null||o===void 0?void 0:o.call(a))===null||l===void 0?void 0:l.latitudeField)}initData(){const t=this._series;if(!t)return;const e=t.getViewData();if(e){const n=new je(this._option.dataSet,{name:`${this.name}_data`});n.parse([e],{type:"dataview"}),n.transform({type:"copyDataView",level:Qo.copyDataView},!1),this._data=new Cr(this._option,n),n.target.addListener("change",()=>{this._spec.trigger!=="hover"&&this._spec.trigger!=="click"&&(this._activeDatum=this._data.getLatestData())})}}initEvent(){this.event.on("zoom",{filter:e=>this._isRelativeModel(e.model)},()=>(this.handleZoom(),!0)),this.event.on("panmove",{filter:e=>this._isRelativeModel(e.model)},e=>(this.handlePan(e),!0));const t=this._spec.trigger;t!=="none"&&(t==="hover"?(this.event.on("element-highlight:start",e=>{const n=e.graphics[0];this._isRelativeSeries(n)&&this._updateDatum(cn(n))}),this.event.on("element-highlight:reset",e=>{this._activeDatum&&this._updateDatum(null)})):t==="click"&&(this.event.on("element-select:start",e=>{const n=e.graphics[0];this._isRelativeSeries(n)&&this._updateDatum(cn(n))}),this.event.on("elementSelectReset",e=>{this._activeDatum&&this._updateDatum([])})))}handlePan(t){const{delta:e}=t;this._markerComponents.forEach(n=>{n.translate(e[0],e[1])})}handleZoom(){this._updateMarkerLayoutAttribute()}_updateDatum(t){this._activeDatum=t,this._markerComponents.forEach((e,n)=>{var r;const s=(r=this._data)===null||r===void 0?void 0:r.getLatestData()[n];this._activeDatum.includes(s)?e.setAttribute("visible",!0):e.setAttribute("visible",!1)})}dataToPosition(t){return this._series.dataToPosition(t)}updateLayoutAttribute(){var t;const e=(t=this._data)===null||t===void 0?void 0:t.getLatestData();e&&e.length!==0&&(super.updateLayoutAttribute(),this._updateMarkerLayoutAttribute())}_updateMarkerLayoutAttribute(){var t;const e=[],n=[];this._markerComponents||(this._markerComponents=(t=this._data)===null||t===void 0?void 0:t.getLatestData().map((s,a)=>{var o;const l=new JM({position:void 0,animation:!1});return l&&(l.name=`${this.name}_marker_${a}`,l.id=(o=this._spec.id)!==null&&o!==void 0?o:`${this.name}_marker_${this.id}`,l.setAttribute("zIndex",this.layoutZIndex)),l})),this._markerComponents.forEach((s,a)=>{const{pairInfo:o,contentMarks:l}=this._evaluateMarker(this._data.getLatestData()[a],a);o&&e.push(o),l&&n.push(l)});const r=this._layoutLabels(e);this._layoutMarkers(r,n),this._renderMarkers()}_evaluateMarker(t,e){var n,r,s,a,o,l,u,c,h,d,f,p,g,m;let _=0,v=0,y=0,b=0,x=0;const S=this._spec.position||"top",w=this._spec.offset,A=Yl((n=this._spec.background)===null||n===void 0?void 0:n.padding),k=this._spec.space||0;v+=(A?.left||0)+(A?.right||0),y+=(A?.top||0)+(A?.bottom||0);const C={},M=this.dataToPosition(t),R=Mt.group({});if(R.name=`${this.name}_marker_itemContainer_${e}`,C.container=R,(r=this._spec.background)===null||r===void 0?void 0:r.visible){const B=Mt.rect($t(Object.assign({},this._spec.background.style)));B.setAttributes(M),C.labelBackground=B,R.appendChild(B)}if(!((s=this._spec.icon)===null||s===void 0)&&s.visible){const B=Mt.symbol($t(Object.assign({},this._spec.icon.style)));B.setAttributes(M),B.setAttribute("symbolType",(o=(a=this._spec.icon.style)===null||a===void 0?void 0:a.symbolType)!==null&&o!==void 0?o:(l=this._spec.icon.style)===null||l===void 0?void 0:l.shape);const I=B.AABBBounds,F=(u=I?.y2-I?.y1)!==null&&u!==void 0?u:0,j=(c=I?.x2-I?.x1)!==null&&c!==void 0?c:0;C.icon=B,R.appendChild(B),x=F,b+=j,_++}if(!((h=this._spec.nameLabel)===null||h===void 0)&&h.visible){const B=Mt.text($t(Object.assign({},this._spec.nameLabel.style)));B.setAttributes(M),B.setAttribute("text",t[this.nameField]);const I=B.AABBBounds,F=(d=I?.y2-I?.y1)!==null&&d!==void 0?d:0,j=(f=I?.x2-I?.x1)!==null&&f!==void 0?f:0;C.nameLabel=B,R.appendChild(B),x=Math.max(x,F),b+=j,_++}if(!((p=this._spec.valueLabel)===null||p===void 0)&&p.visible&&L(t[this.valueField])){const B=Mt.text($t(Object.assign({},this._spec.valueLabel.style)));B.setAttributes(M),B.setAttribute("text",t[this.valueField]);const I=B.AABBBounds,F=(g=I?.y2-I?.y1)!==null&&g!==void 0?g:0,j=(m=I?.x2-I?.x1)!==null&&m!==void 0?m:0;C.valueLabel=B,R.appendChild(B),x=Math.max(x,F),b+=j,_++}const P=Object.values(C).find(B=>!!B&&B.type!=="group"),O={x:P?.getComputedAttribute("x"),y:P?.getComputedAttribute("y")},T={x:O.x,y:O.y,width:0,height:0};T.width=v+b+(_-1)*k,T.height=y+x;const D={rect:T,point:O,index:e};if(S!=="outer"){const B=["top","right","left","bottom"].filter(I=>I!==S);D.rect=ij(T,S,w),D.anchors=B,D.offset=w}else D.pointCoord={x:+t?.[this._longitudeField],y:+t?.[this._latitudeField]};return{pairInfo:D,contentMarks:C}}_layoutMarkers(t,e){var n,r,s;for(let a=0;a<e.length;a++){if(!t[a]||!e[a])return;const{icon:o,nameLabel:l,valueLabel:u,labelBackground:c,container:h}=e[a],d=t[a],f=Yl((n=this._spec.background)===null||n===void 0?void 0:n.padding),p=this._spec.space||0,g=d.height/2;let m=f?.left||0;[o,l,u].forEach((x,S)=>{var w,A;if(x){const k=x.AABBBounds;let C=0;x.type==="symbol"&&(C+=((w=k.x2-k.x1)!==null&&w!==void 0?w:0)/2),x.setAttributes({x:m+C,y:g}),m+=(A=k.x2-k.x1)!==null&&A!==void 0?A:0,S!==2&&(m+=p)}}),c?.setAttributes({x:0,y:0,width:d.width,height:d.height}),h?.setAttributes({dx:-d.width/2,dy:-d.height/2});const _=this._data.getLatestData()[a],v=this.dataToPosition(_),y=this.getRegions()[0].getLayoutStartPoint(),b=!(!(!((r=this._spec.leader)===null||r===void 0)&&r.visible)||!(o||l||u));this._markerComponents[a].setAttributes({x:y.x,y:y.y,position:v,visible:this._activeDatum.includes(_),itemContent:{refX:0,type:"custom",renderCustomCallback:()=>h,autoRotate:!1,offsetX:d.x+d.width/2-v.x,offsetY:d.y+d.height/2-v.y},itemLine:{visible:b,type:"type-po",lineStyle:$t(Object.assign({},(s=this._spec.leader)===null||s===void 0?void 0:s.style)),startSymbol:{visible:!1}}})}}_renderMarkers(){if(this._markerComponents&&this._markerComponents.length)for(let t=0;t<this._markerComponents.length;t++)this.getContainer().add(this._markerComponents[t])}_layoutLabels(t){return this._spec.position==="outer"&&this._map?zqt(t,this._map,e=>this._series.dataToPosition({[this._longitudeField]:e[0],[this._latitudeField]:e[1]})):slt(t)}_isRelativeModel(t){var e,n,r;const s=(n=(e=this._series.getXAxisHelper())===null||e===void 0?void 0:e.getAxisId())!==null&&n!==void 0?n:(r=this._series.getCoordinateHelper())===null||r===void 0?void 0:r.getCoordinateId();return t?.id===s}_isRelativeSeries(t){var e;return((e=t.context)===null||e===void 0?void 0:e.modelId)===this._series.id}_getNeedClearVRenderComponents(){return this._markerComponents}getVRenderComponents(){return this._markerComponents}}A1.type="mapLabel",A1.specKey="mapLabel",A1.transformerConstructor=olt;const Vqt=i=>{const t=i?.VChart||he;t&&t.useComponent([A1])},Wqt=qe("Bar3dChart",{type:"bar3d",vchartConstructor:he},[zot,xi,Ih,...os]),$qt=qe("BoxPlotChart",{type:"boxPlot",vchartConstructor:he},[AN,xi,...os]),ls=[cT,DM,Mf,lx,Xm,Km,Zm,ux,qm],Uqt=qe("CirclePackingChart",{type:"circlePacking",vchartConstructor:he},[xN,xi,...ls]),nj=[cT,DM,Mf,lx,Dh,Cf,EN,ox,Km,sx,Xm,Zm,ux,ax,qm],Gqt=qe("CircularProgressChart",{type:"circularProgress",vchartConstructor:he},[fN,xi,Tf,...nj]),Yqt=qe("CommonChart",{type:"common",vchartConstructor:he},[uN,mr,Mr,Jb,$m,FT,xi,Ih,Lz,bT,Oz,Nz,Uz]),Xqt=qe("CorrelationChart",{type:"correlation",vchartConstructor:he},[BT,...ls]),Kqt=qe("FunnelChart",{type:"funnel",vchartConstructor:he},[_N,xi,...ls]),qqt=qe("Funnel3dChart",{type:"funnel3d",vchartConstructor:he},[Hot,xi,...ls]),Zqt=qe("GaugeChart",{type:"gauge",vchartConstructor:he},[pN,...ls]),Qqt=qe("HeatmapChart",{type:"heatmap",vchartConstructor:he},[MN,xi,...os]),Jqt=qe("Histogram3dChart",{type:"histogram3d",vchartConstructor:he},[Vot,xi,...os]),tZt=qe("HistogramChart",{type:"histogram",vchartConstructor:he},[dN,xi,...os]),eZt=qe("LinearProgressChart",{type:"linearProgress",vchartConstructor:he},[vN,xi,...os]),iZt=qe("LineChart",{type:"line",vchartConstructor:he},[Iz,xi,...os]),nZt=qe("LiquidChart",{type:"liquid",vchartConstructor:he},[xot,Tf,...ls]),rZt=qe("MapChart",{type:"map",vchartConstructor:he},[nN,xi,...ls]),sZt=qe("MosaicChart",{type:"mosaic",vchartConstructor:he},[kot,xi,Ih,...os]),aZt=qe("PictogramChart",{type:"pictogram",vchartConstructor:he},[rlt,xi,...ls]),oZt=qe("PieChart",{type:"pie",vchartConstructor:he},[aN,xi,Tf,...ls]),lZt=qe("Pie3dChart",{type:"pie3d",vchartConstructor:he},[Got,xi,Tf,...ls]),uZt=qe("RadarChart",{type:"radar",vchartConstructor:he},[lN,xi,...nj]),cZt=qe("RangeAreaChart",{type:"rangeArea",vchartConstructor:he},[CN,xi,...os]),hZt=qe("RangeColumnChart",{type:"rangeColumn",vchartConstructor:he},[yN,xi,...os]),dZt=qe("RangeColumn3dChart",{type:"rangeColumn3d",vchartConstructor:he},[Qot,xi,...os]),fZt=qe("RoseChart",{type:"rose",vchartConstructor:he},[oN,xi,...nj]),pZt=qe("SankeyChart",{type:"sankey",vchartConstructor:he},[kN,xi,...ls]),gZt=qe("ScatterChart",{type:"scatter",vchartConstructor:he},[jz,xi,...os]),mZt=qe("SequenceChart",{type:"sequence",vchartConstructor:he},[cN,...os]),_Zt=qe("SunburstChart",{type:"sunburst",vchartConstructor:he},[bN,xi,...ls]),vZt=qe("TreemapChart",{type:"treemap",vchartConstructor:he},[SN,xi,...ls]),yZt=qe("WordCloudChart",{type:"wordCloud",vchartConstructor:he},[mN,...ls]),bZt=qe("WordCloud3dChart",{type:"wordCloud3d",vchartConstructor:he},[Kot,...ls]),xZt=qe("VennChart",{type:"venn",vchartConstructor:he},[wot,xi,...ls]),SZt=qe("WaterfallChart",{type:"waterfall",vchartConstructor:he},[wN,xi,Ih,...os]),ni=(i,t,e,n)=>{n&&n.length&&he.useRegisters(n);const r=XKt.concat(["updateId","componentId"]),s=a=>{var o;const l=Y.useContext($T),u=(o=a.id)!==null&&o!==void 0?o:a.componentId,c=Y.useRef({}),h=f=>{const p=t.map(g=>`${u}-${g}`);f?.mark&&p.includes(f.mark.getUserId())&&a[KKt[f.event.type]](f)},d=f=>{f&&l.chart&&(c.current&&Object.keys(c.current).forEach(p=>{l.chart.off(ic[p],c.current[p]),c.current[p]=null}),f&&Object.keys(f).forEach(p=>{var g;!((g=c.current)===null||g===void 0)&&g[p]||(l.chart.on(ic[p],h),c.current||(c.current={}),c.current[p]=h)}))};return d(IL(a)),Y.useEffect(()=>()=>{d({}),c.current={}},[]),null};return s.displayName=i,s.parseSpec=a=>{var o;const l=xa(a,r);var u,c;return u=l,c=(o=a.id)!==null&&o!==void 0?o:a.componentId,t.forEach(h=>{const d=`${c}-${h}`;N(u[h])?u[h]={id:d}:N(u[h].id)&&(u[h].id=d)}),N(e)||(l.type=e),{spec:l,specName:"series"}},s},wZt=ni("Series",["bar","line","area"]),AZt=ni("Area",["area"],"area",[Lz]),kZt=ni("Bar",["bar"],"bar",[bT]),CZt=ni("Bar3d",["bar"],"bar3d",[tj]),MZt=ni("BoxPlot",["boxPlot"],"boxPlot",[hst]),TZt=ni("CirclePacking",["circlePacking","label"],"circlePacking",[eat]),PZt=ni("CircularProgress",["circularProgress"],"circularProgress",[Yz]),EZt=ni("Correlation",["centerPoint","ripplePoint","centerLabel","nodePoint","label"],"correlation",[BT]),RZt=ni("Dot",["dot"],"dot",[Pst]),OZt=ni("Funnel",["funnel"],"funnel",[Jst]),DZt=ni("Funnel3d",["funnel"],"funnel3d",[jot]),IZt=ni("Gauge",["segment","track","label"],"gauge",[cat]),LZt=ni("GaugePointer",["pinBackground","pin","pointer"],"gaugePointer",[lat]),BZt=ni("Heatmap",["cell","cellBackground","label"],"heatmap",[dat]),FZt=ni("Line",["line"],"line",[Oz]),zZt=ni("LinearProgress",["linearProgress"],"linearProgress",[Ist]),NZt=ni("Link",["link"],"link",[Est]),jZt=ni("Liquid",["node","link"],"liquid",[bat]),HZt=ni("Map",["map"],"map",[qrt]),VZt=ni("Mosaic",["mosaic"],"mosaic",[wat]),WZt=ni("Pictogram",["pictogram"],"pictogram",[nlt]),$Zt=ni("Pie",["pie"],"pie",[Uz]),UZt=ni("Pie3d",["pie"],"pie3d",[Uot]),GZt=ni("Radar",["radar"],"radar",[Tst]),YZt=ni("RangeArea",["rangeArea"],"rangeArea",[gst]),XZt=ni("RangeColumn",["rangeColumn"],"rangeColumn",[pst]),KZt=ni("RangeColumn3d",["rangeColumn"],"rangeColumn3d",[qot]),qZt=ni("Rose",["rose"],"rose",[Cst]),ZZt=ni("Sankey",["node","link"],"sankey",[rat]),QZt=ni("Scatter",["scatter"],"scatter",[Nz]),JZt=ni("Sunburst",["sunburst","label"],"sunburst",[tat]),tQt=ni("Treemap",["leaf","nonLeaf","label","nonLeafLabel"],"treemap",[aat]),eQt=ni("Venn",["circle","overlap","overlapLabel"],"venn",[Sat]),iQt=ni("Waterfall",["leaderLine","stackLabel","label","bar"],"waterfall",[nst]),nQt=ni("WordCloud",["wordCloud"],"wordCloud",[Jz]),rQt=ni("WordCloud3d",["wordCloud"],"wordCloud3d",[Yot]),Es=(i,t,e,n,r)=>{r&&r.length&&he.useRegisters(r);const s=["updateId","componentId","children"],a=e?Object.keys(e).concat(s):s,o=l=>{const u=E.useContext($T),c=Y.useRef(null),h=Y.useRef(l.updateId);return l.updateId!==h.current&&(h.current=l.updateId,e&&jk(u.chart,l,c.current,e)&&(c.current=l)),E.useEffect(()=>()=>{e&&jk(u.chart,null,c.current,e)},[]),null};return o.displayName=i,o.parseSpec=l=>({spec:xa(l,a),specName:t,isSingle:n}),o},sQt=Es("Axis","axes"),aQt=Es("Mark","customMark",null,!1,[Zm,ux]),oQt=Es("Region","region"),lQt=Es("Legend","legends",JN,!1,[Xm]),uQt=Es("Brush","brush",Tot,!0,[ox]),cQt=Es("Crosshair","crosshair"),hQt=Es("DataZoom","dataZoom",Pot,!1,[sx]),dQt=Es("MarkLine","markLine",null,!1,[zT]),fQt=Es("MarkArea","markArea",null,!1,[NT]),pQt=Es("MarkPoint","markPoint",null,!1,[HT]),gQt=Es("ScrollBar","scrollBar",Rot,!1,[ax]),llt=(i,t,e)=>{e&&e.length&&he.useRegisters(e);const n=["updateId","componentId","children"],r=s=>{const a=Y.useRef(s.updateId);return s.updateId!==a.current&&(a.current=s.updateId),null};return r.displayName=i,r.parseSpec=s=>{const a=xa(s,n);return!s.tooltipRender&&s.children&&(a.tooltipRender=(o,l,u)=>Y.Children.map(s.children,c=>ee(c)?Y.cloneElement(c,{tooltipElement:o,actualTooltip:l,params:u}):c)),{spec:a,specName:t,isSingle:!0}},r},mQt=llt("Tooltip","tooltip",[Mf,lx]),_Qt=llt("CanvasTooltip","tooltip",[Mf,pot]),vQt=Es("Player","player",Eot,!0,[jN]),yQt=Es("Indicator","indicator",null,!0,[Tf]),bQt=Es("Title","title",null,!0,[qm]),xQt=Es("ContinuousLegend","legends",JN,!1,[Km]),SQt=qe("VChart",{vchartConstructor:he}),wQt=qe("VChartSimple"),AQt="2.0.11",mie=Object.freeze(Object.defineProperty({__proto__:null,Area:AZt,AreaChart:JKt,Axis:sQt,Bar:kZt,Bar3d:CZt,Bar3dChart:Wqt,BarChart:tqt,BoxPlot:MZt,BoxPlotChart:$qt,Brush:uQt,CanvasTooltip:_Qt,CirclePacking:TZt,CirclePackingChart:Uqt,CircularProgress:PZt,CircularProgressChart:Gqt,CommonChart:Yqt,ContinuousLegend:xQt,Correlation:EZt,CorrelationChart:Xqt,Crosshair:cQt,DataZoom:hQt,Dot:RZt,Funnel:OZt,Funnel3d:DZt,Funnel3dChart:qqt,FunnelChart:Kqt,Gauge:IZt,GaugeChart:Zqt,GaugePointer:LZt,Heatmap:BZt,HeatmapChart:Qqt,Histogram3dChart:Jqt,HistogramChart:tZt,Indicator:yQt,Legend:lQt,Line:FZt,LineChart:iZt,LinearProgress:zZt,LinearProgressChart:eZt,Link:NZt,Liquid:jZt,LiquidChart:nZt,Map:HZt,MapChart:rZt,Mark:aQt,MarkArea:fQt,MarkLine:dQt,MarkPoint:pQt,Mosaic:VZt,MosaicChart:sZt,Pictogram:WZt,PictogramChart:aZt,Pie:$Zt,Pie3d:UZt,Pie3dChart:lZt,PieChart:oZt,Player:vQt,REACT_TOOLTIP_ClASS_NAME:LL,Radar:GZt,RadarChart:uZt,RangeArea:YZt,RangeAreaChart:cZt,RangeColumn:XZt,RangeColumn3d:KZt,RangeColumn3dChart:dZt,RangeColumnChart:hZt,Region:oQt,Rose:qZt,RoseChart:fZt,Sankey:ZZt,SankeyChart:pZt,Scatter:QZt,ScatterChart:gZt,ScrollBar:gQt,SequenceChart:mZt,Series:wZt,Sunburst:JZt,SunburstChart:_Zt,Title:bQt,Tooltip:mQt,Treemap:tQt,TreemapChart:vZt,VChart:SQt,VChartCore:he,VChartSimple:wQt,Venn:eQt,VennChart:xZt,Waterfall:iQt,WaterfallChart:SZt,WordCloud:nQt,WordCloud3d:rQt,WordCloud3dChart:bZt,WordCloudChart:yZt,registerAreaChart:Bz,registerAxis3dPlugin:bqt,registerBar3dChart:zot,registerBarChart:zz,registerBoxplotChart:AN,registerBrush:ox,registerCartesianBandAxis:Mr,registerCartesianCrossHair:FT,registerCartesianLinearAxis:mr,registerCartesianLogAxis:$m,registerCartesianSymlogAxis:Rrt,registerCartesianTimeAxis:Jb,registerChartResizeZoomPlugin:FKt,registerCirclePackingChart:xN,registerCircularProgressChart:fN,registerCommonChart:uN,registerContinuousLegend:Km,registerCorrelationChart:BT,registerCustomMark:Zm,registerDataZoom:sx,registerDiscreteLegend:Xm,registerFunnel3dChart:Hot,registerFunnelChart:_N,registerGaugeChart:pN,registerGeoCoordinate:Hz,registerGeoMarkPoint:hot,registerHeatmapChart:MN,registerHistogram3dChart:Vot,registerHistogramChart:dN,registerIndicator:Tf,registerLabel:xi,registerLineChart:Iz,registerLinearProgressChart:vN,registerLiquidChart:xot,registerMapChart:nN,registerMapLabel:Vqt,registerMarkArea:NT,registerMarkLine:zT,registerMarkPoint:HT,registerMosaicChart:kot,registerPictogramChart:rlt,registerPie3dChart:Got,registerPieChart:aN,registerPlayer:jN,registerPolarBandAxis:Cf,registerPolarCrossHair:EN,registerPolarLinearAxis:Dh,registerPolarMarkArea:aot,registerPolarMarkLine:rot,registerPolarMarkPoint:cot,registerPoptip:dot,registerRadarChart:lN,registerRangeAreaChart:CN,registerRangeColumn3dChart:Qot,registerRangeColumnChart:yN,registerRoseChart:oN,registerSankeyChart:kN,registerScatterChart:jz,registerScrollBar:ax,registerSequenceChart:cN,registerSunburstChart:bN,registerTitle:qm,registerTooltip:Mf,registerTotalLabel:Ih,registerTreemapChart:SN,registerVennChart:wot,registerWaterfallChart:wN,registerWordCloud3dChart:Kot,registerWordCloudChart:mN,registerWordCloudShapeChart:Dat,version:AQt},Symbol.toStringTag,{value:"Module"}));export{tq as $,JJt as A,ete as B,sJt as C,tte as D,rte as E,zQt as F,UJt as G,YJt as H,FQt as I,ute as J,ate as K,UQt as L,ote as M,lte as N,LQt as O,WQt as P,cte as Q,Y as R,ZQt as S,VQt as T,hte as U,ZJt as V,QK as W,ZK as X,JK as Y,iq as Z,$Jt as _,tr as a,nee as a$,eq as a0,qK as a1,dte as a2,fte as a3,TJt as a4,pte as a5,g0t as a6,m0t as a7,xm as a8,EQt as a9,Ite as aA,RQt as aB,Lte as aC,lJt as aD,Fte as aE,$xt as aF,Uxt as aG,zte as aH,Nte as aI,jte as aJ,Hte as aK,WJt as aL,FJt as aM,JQt as aN,HJt as aO,AJt as aP,Xte as aQ,Kte as aR,Yte as aS,Ute as aT,Wte as aU,Vte as aV,EJt as aW,Qte as aX,Zte as aY,Jte as aZ,iee as a_,IQt as aa,bJt as ab,gJt as ac,DJt as ad,NJt as ae,tJt as af,BJt as ag,vJt as ah,xJt as ai,Js as aj,DQt as ak,zJt as al,CJt as am,z2 as an,MQt as ao,RJt as ap,VJt as aq,SJt as ar,wJt as as,rJt as at,Fct as au,pJt as av,jJt as aw,Bte as ax,yB as ay,Dte as az,BQt as b,tee as b0,eee as b1,qte as b2,kQt as b3,LJt as b4,OJt as b5,oJt as b6,IJt as b7,PJt as b8,$te as b9,fee as bA,uee as bB,lj as bC,PQt as bD,mie as bE,JAt as ba,Gte as bb,MJt as bc,kJt as bd,dJt as be,hJt as bf,fJt as bg,yJt as bh,uJt as bi,_Jt as bj,eJt as bk,mJt as bl,HMt as bm,ree as bn,oee as bo,lee as bp,see as bq,aee as br,U_ as bs,TQt as bt,CQt as bu,cee as bv,hee as bw,pee as bx,gee as by,dee as bz,kft as c,QQt as d,$Qt as e,GQt as f,YQt as g,KQt as h,mee as i,V as j,iJt as k,XQt as l,cJt as m,qQt as n,HQt as o,GJt as p,XJt as q,E as r,nJt as s,NQt as t,ite as u,aJt as v,nte as w,KJt as x,qJt as y,QJt as z};

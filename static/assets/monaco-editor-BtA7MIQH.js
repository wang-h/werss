import{i as fe}from"./vendor-COGJctpY.js";import{r as a,W as A}from"./react-vendor-BxoUobzX.js";import"./radix-ui-BA32w1ww.js";function ee(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function de(e){if(Array.isArray(e))return e}function ge(e,r,t){return(r=ye(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function pe(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,o,u,d,v=[],M=!0,j=!1;try{if(u=(t=t.call(e)).next,r!==0)for(;!(M=(n=u.call(t)).done)&&(v.push(n.value),v.length!==r);M=!0);}catch(P){j=!0,o=P}finally{try{if(!M&&t.return!=null&&(d=t.return(),Object(d)!==d))return}finally{if(j)throw o}}return v}}function me(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function re(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function te(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?re(Object(t),!0).forEach(function(n){ge(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ve(e,r){if(e==null)return{};var t,n,o=he(e,r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)t=u[n],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function he(e,r){if(e==null)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;t[n]=e[n]}return t}function be(e,r){return de(e)||pe(e,r)||Me(e,r)||me()}function we(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ye(e){var r=we(e,"string");return typeof r=="symbol"?r:r+""}function Me(e,r){if(e){if(typeof e=="string")return ee(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ee(e,r):void 0}}var je={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Oe(e){return function r(){for(var t=this,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return o.length>=e.length?e.apply(this,o):function(){for(var d=arguments.length,v=new Array(d),M=0;M<d;M++)v[M]=arguments[M];return r.apply(t,[].concat(o,v))}}}function Ee(e){return{}.toString.call(e).includes("Object")}function Se(e){return e||ne("configIsRequired"),Ee(e)||ne("configType"),e.urls?(Pe(),{paths:{vs:e.urls.monacoBase}}):e}function Pe(){console.warn(oe.deprecation)}function Ie(e,r){throw new Error(e[r]||e.default)}var oe={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},ne=Oe(Ie)(oe),Re={config:Se},Le=function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return function(o){return t.reduceRight(function(u,d){return d(u)},o)}};function ie(e,r){return Object.keys(r).forEach(function(t){r[t]instanceof Object&&e[t]&&Object.assign(r[t],ie(e[t],r[t]))}),te(te({},e),r)}var Ce={type:"cancelation",msg:"operation is manually canceled"};function J(e){var r=!1,t=new Promise(function(n,o){e.then(function(u){return r?o(Ce):n(u)}),e.catch(o)});return t.cancel=function(){return r=!0},t}var Ae=["monaco"],Ve=fe.create({config:je,isInitialized:!1,resolve:null,reject:null,monaco:null}),ae=be(Ve,2),z=ae[0],q=ae[1];function xe(e){var r=Re.config(e),t=r.monaco,n=ve(r,Ae);q(function(o){return{config:ie(o.config,n),monaco:t}})}function De(){var e=z(function(r){var t=r.monaco,n=r.isInitialized,o=r.resolve;return{monaco:t,isInitialized:n,resolve:o}});if(!e.isInitialized){if(q({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),J(Q);if(window.monaco&&window.monaco.editor)return ue(window.monaco),e.resolve(window.monaco),J(Q);Le(_e,Te)(ze)}return J(Q)}function _e(e){return document.body.appendChild(e)}function Ne(e){var r=document.createElement("script");return e&&(r.src=e),r}function Te(e){var r=z(function(n){var o=n.config,u=n.reject;return{config:o,reject:u}}),t=Ne("".concat(r.config.paths.vs,"/loader.js"));return t.onload=function(){return e()},t.onerror=r.reject,t}function ze(){var e=z(function(t){var n=t.config,o=t.resolve,u=t.reject;return{config:n,resolve:o,reject:u}}),r=window.require;r.config(e.config),r(["vs/editor/editor.main"],function(t){var n=t.m||t;ue(n),e.resolve(n)},function(t){e.reject(t)})}function ue(e){z().monaco||q({monaco:e})}function We(){return z(function(e){var r=e.monaco;return r})}var Q=new Promise(function(e,r){return q({resolve:e,reject:r})}),$={config:xe,init:De,__getMonacoInstance:We},ke={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},X=ke,Ue={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},$e=Ue;function qe({children:e}){return A.createElement("div",{style:$e.container},e)}var Fe=qe,He=Fe;function Be({width:e,height:r,isEditorReady:t,loading:n,_ref:o,className:u,wrapperProps:d}){return A.createElement("section",{style:{...X.wrapper,width:e,height:r},...d},!t&&A.createElement(He,null,n),A.createElement("div",{ref:o,style:{...X.fullWidth,...!t&&X.hide},className:u}))}var Ge=Be,ce=a.memo(Ge);function Ke(e){a.useEffect(e,[])}var Z=Ke;function Ye(e,r,t=!0){let n=a.useRef(!0);a.useEffect(n.current||!t?()=>{n.current=!1}:e,r)}var y=Ye;function T(){}function C(e,r,t,n){return Je(e,n)||Qe(e,r,t,n)}function Je(e,r){return e.editor.getModel(le(e,r))}function Qe(e,r,t,n){return e.editor.createModel(r,t,n?le(e,n):void 0)}function le(e,r){return e.Uri.parse(r)}function Xe({original:e,modified:r,language:t,originalLanguage:n,modifiedLanguage:o,originalModelPath:u,modifiedModelPath:d,keepCurrentOriginalModel:v=!1,keepCurrentModifiedModel:M=!1,theme:j="light",loading:P="Loading...",options:O={},height:F="100%",width:H="100%",className:B,wrapperProps:G={},beforeMount:K=T,onMount:Y=T}){let[b,V]=a.useState(!1),[S,p]=a.useState(!0),m=a.useRef(null),g=a.useRef(null),x=a.useRef(null),h=a.useRef(Y),l=a.useRef(K),I=a.useRef(!1);Z(()=>{let i=$.init();return i.then(s=>(g.current=s)&&p(!1)).catch(s=>(s==null?void 0:s.type)!=="cancelation"&&console.error("Monaco initialization: error:",s)),()=>m.current?D():i.cancel()}),y(()=>{if(m.current&&g.current){let i=m.current.getOriginalEditor(),s=C(g.current,e||"",n||t||"text",u||"");s!==i.getModel()&&i.setModel(s)}},[u],b),y(()=>{if(m.current&&g.current){let i=m.current.getModifiedEditor(),s=C(g.current,r||"",o||t||"text",d||"");s!==i.getModel()&&i.setModel(s)}},[d],b),y(()=>{let i=m.current.getModifiedEditor();i.getOption(g.current.editor.EditorOption.readOnly)?i.setValue(r||""):r!==i.getValue()&&(i.executeEdits("",[{range:i.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),i.pushUndoStop())},[r],b),y(()=>{var i,s;(s=(i=m.current)==null?void 0:i.getModel())==null||s.original.setValue(e||"")},[e],b),y(()=>{let{original:i,modified:s}=m.current.getModel();g.current.editor.setModelLanguage(i,n||t||"text"),g.current.editor.setModelLanguage(s,o||t||"text")},[t,n,o],b),y(()=>{var i;(i=g.current)==null||i.editor.setTheme(j)},[j],b),y(()=>{var i;(i=m.current)==null||i.updateOptions(O)},[O],b);let W=a.useCallback(()=>{var E;if(!g.current)return;l.current(g.current);let i=C(g.current,e||"",n||t||"text",u||""),s=C(g.current,r||"",o||t||"text",d||"");(E=m.current)==null||E.setModel({original:i,modified:s})},[t,r,o,e,n,u,d]),k=a.useCallback(()=>{var i;!I.current&&x.current&&(m.current=g.current.editor.createDiffEditor(x.current,{automaticLayout:!0,...O}),W(),(i=g.current)==null||i.editor.setTheme(j),V(!0),I.current=!0)},[O,j,W]);a.useEffect(()=>{b&&h.current(m.current,g.current)},[b]),a.useEffect(()=>{!S&&!b&&k()},[S,b,k]);function D(){var s,E,R,_;let i=(s=m.current)==null?void 0:s.getModel();v||((E=i==null?void 0:i.original)==null||E.dispose()),M||((R=i==null?void 0:i.modified)==null||R.dispose()),(_=m.current)==null||_.dispose()}return A.createElement(ce,{width:H,height:F,isEditorReady:b,loading:P,_ref:x,className:B,wrapperProps:G})}var Ze=Xe,lr=a.memo(Ze);function er(){let[e,r]=a.useState($.__getMonacoInstance());return Z(()=>{let t;return e||(t=$.init(),t.then(n=>{r(n)})),()=>t==null?void 0:t.cancel()}),e}var sr=er;function rr(e){let r=a.useRef();return a.useEffect(()=>{r.current=e},[e]),r.current}var tr=rr,U=new Map;function nr({defaultValue:e,defaultLanguage:r,defaultPath:t,value:n,language:o,path:u,theme:d="light",line:v,loading:M="Loading...",options:j={},overrideServices:P={},saveViewState:O=!0,keepCurrentModel:F=!1,width:H="100%",height:B="100%",className:G,wrapperProps:K={},beforeMount:Y=T,onMount:b=T,onChange:V,onValidate:S=T}){let[p,m]=a.useState(!1),[g,x]=a.useState(!0),h=a.useRef(null),l=a.useRef(null),I=a.useRef(null),W=a.useRef(b),k=a.useRef(Y),D=a.useRef(),i=a.useRef(n),s=tr(u),E=a.useRef(!1),R=a.useRef(!1);Z(()=>{let c=$.init();return c.then(f=>(h.current=f)&&x(!1)).catch(f=>(f==null?void 0:f.type)!=="cancelation"&&console.error("Monaco initialization: error:",f)),()=>l.current?se():c.cancel()}),y(()=>{var f,w,N,L;let c=C(h.current,e||n||"",r||o||"",u||t||"");c!==((f=l.current)==null?void 0:f.getModel())&&(O&&U.set(s,(w=l.current)==null?void 0:w.saveViewState()),(N=l.current)==null||N.setModel(c),O&&((L=l.current)==null||L.restoreViewState(U.get(u))))},[u],p),y(()=>{var c;(c=l.current)==null||c.updateOptions(j)},[j],p),y(()=>{!l.current||n===void 0||(l.current.getOption(h.current.editor.EditorOption.readOnly)?l.current.setValue(n):n!==l.current.getValue()&&(R.current=!0,l.current.executeEdits("",[{range:l.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),l.current.pushUndoStop(),R.current=!1))},[n],p),y(()=>{var f,w;let c=(f=l.current)==null?void 0:f.getModel();c&&o&&((w=h.current)==null||w.editor.setModelLanguage(c,o))},[o],p),y(()=>{var c;v!==void 0&&((c=l.current)==null||c.revealLine(v))},[v],p),y(()=>{var c;(c=h.current)==null||c.editor.setTheme(d)},[d],p);let _=a.useCallback(()=>{var c;if(!(!I.current||!h.current)&&!E.current){k.current(h.current);let f=u||t,w=C(h.current,n||e||"",r||o||"",f||"");l.current=(c=h.current)==null?void 0:c.editor.create(I.current,{model:w,automaticLayout:!0,...j},P),O&&l.current.restoreViewState(U.get(f)),h.current.editor.setTheme(d),v!==void 0&&l.current.revealLine(v),m(!0),E.current=!0}},[e,r,t,n,o,u,j,P,O,d,v]);a.useEffect(()=>{p&&W.current(l.current,h.current)},[p]),a.useEffect(()=>{!g&&!p&&_()},[g,p,_]),i.current=n,a.useEffect(()=>{var c,f;p&&V&&((c=D.current)==null||c.dispose(),D.current=(f=l.current)==null?void 0:f.onDidChangeModelContent(w=>{R.current||V(l.current.getValue(),w)}))},[p,V]),a.useEffect(()=>{if(p){let c=h.current.editor.onDidChangeMarkers(f=>{var N;let w=(N=l.current.getModel())==null?void 0:N.uri;if(w&&f.find(L=>L.path===w.path)){let L=h.current.editor.getModelMarkers({resource:w});S==null||S(L)}});return()=>{c==null||c.dispose()}}return()=>{}},[p,S]);function se(){var c,f;(c=D.current)==null||c.dispose(),F?O&&U.set(u,l.current.saveViewState()):(f=l.current.getModel())==null||f.dispose(),l.current.dispose()}return A.createElement(ce,{width:H,height:B,isEditorReady:p,loading:M,_ref:I,className:G,wrapperProps:K})}var or=nr,ir=a.memo(or),fr=ir;export{lr as DiffEditor,ir as Editor,fr as default,$ as loader,sr as useMonaco};
